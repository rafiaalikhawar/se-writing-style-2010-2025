Model Projection: Simplifying Models inResponse to
Restricting theEnvironment
KellyAndroutsopoulos1DavidBinkle y2DavidClark1Nicolas Gold1
MarkHarman1KevinLano3Zheng Li1
1University College London, Malet Place ,London, WC1E 6BT,UK.
2LoyolaUniversity Maryland, Baltimore ,MD21210-2699, USA.
3King’ sCollege London, Strand, London, WC2R 2LS,UK.
ABSTRA CT
This paper introduces Model Projection .Finite state models such as
Extended Finite State Machines arebeing used inaneverincreasing
number ofsoftw areengineering activities. Model projecti onfacil-
itates model development byspecializing models foraspeciﬁc op-
erating environment. Aprojection isuseful inmanydesign-le vel
applications including speciﬁcation reuse andproperty veriﬁcation.
Theapplicability ofmodel projection rests upon three criticalcon-
cerns: correctness, effectiveness, andefﬁcienc y,allofwhich are
addressed inthispaper .Weintroduce four related algorithms for
model projection andproveeach correct. Wealsopresent anempiri-
calstudy ofeffectiveness andefﬁcienc yusing tenmodels, including
widely–studied benchmarks aswell asindustrial models. Results
showthatatypical projection includes about halfofthestates anda
third ofthetransitions from theoriginal model.
Categories andSubject Descriptors
D.2.2 [Softwar eEngineering ]:Design Tools andTechniques
General Terms
Algorithms, Theory ,Experimentation
Keywords
Model Projection, Extended Finite State Machines, Slicing
1.INTR ODUCTION
Both automatically andmanually generated state-based models
ﬁndmanyapplications insoftw areengineering. Forexample, they
areoften constructed bymodel check ers[8]andbuiltbyengineers
inthetelecommunications andembedded systems sectors [9,10,
25]. Theyarealso used inmodelling notations such astheUML
[28], which drawsheavily onstate-based modelling [27], andare
widely used forspecifying discrete-e ventcontrol devices, such as
automated manuf acturing systems (AMS) [30].
Agreat deal ofengineering effortisdirected towards thedesign
ofanorganisation’ smodels. Asaresult, itiscommon formodels to
bereused. One such scenario arises when control models arereused
within adevice thatoffersarestricted operational environment. For
example, the‘basic model’ carairconditioning system may notoffer
theclimate control functionality found inmore luxurious models. It
would bewasteful tospecify different models foreach potential car
Permission tomakedigital orhard copies ofallorpart ofthisworkfor
personal orclassroom useisgranted without feeprovided thatcopies are
notmade ordistrib uted forproﬁt orcommercial advantage andthatcopies
bear thisnotice andthefullcitation ontheﬁrstpage. Tocopyotherwise, or
republish, topost onserversortoredistrib utetolists, requires prior speciﬁc
permission and/or afee.
ICSE11, May 21-28 2011, Waikiki, Honolulu, HI,USA
Copyright 2011 ACM978-1-4503-0445-0/11/05 ...$10.00.conﬁguration. Rather ,there istypically asingle controller forthe
entire product line[3].Inthissituation, model projections, special-
izedtotheparticular environment, areuseful astheyavoidproducing
bloated controllers thatimplement unused functionality .
The design ofmodels typically occurs earlier intheoverall de-
velopment process than coding where thecost oferrors is,ingen-
eral, higher .This makesitimportant tohavepowerful andﬂexible
tools formodel analysis. Model projection facilitates such analysis
inmuch thesame waythattechniques such asprogram transforma-
tionandprogram slicing assist with code levelanalysis [29,16,32].
Figure 1presents anexample ofmodel projection inwhich a
vending machine allowsauser toinsert coins andvends teawith
options oflargecups, small cups, sugar,anddouble sugar.Con-
sider redeplo ying thiscontroller inan en vironment where the‘sugar’
button isdisabled, andthus inan en vironment inwhich theevent
Sugar() neveroccurs. The projection remo vesallstates andtran-
sitions (shownindashed grey)unreachable byeventsequence sin
therestricted environment. This causes thestate Sugar tobecome
unreachable andsubsequently thestate Double Sugar ,because itis
only reachable from thestate Sugar .When these states andtheir
associated transitions areprojected outofthemodel, only theblack
elements remain.
Model projection canalso beused tofacilitate property veriﬁca-
tionbyreducing thecomple xityofamodel andthusmaking analysis
more efﬁcient. Consider theproduction cellexample used inthein-
dustrial case study ofaGerman metal processing plant [26]. Inthis
system, metal blanks enter thesystem onafeed beltandarecon-
veyedviaatable byrobot arms tooneoftwopresses. Assume that
wewanttoprovethatthefeed beltmotor isoffifthere isablank on
thebeltandablank ontheelevating rotating table. Call thisproperty
P.Itturns outthatproperty Ponly concerns twosensors and one
actuator ofthemodel. ToprovethatPholds intheoriginal model re-
quires consideration ofastate space having over3,000 states. How-
ever,only four eventsaffectP(s1on ,s1off ,s3on ,s3off ).Amodel
projection produced byignoring allother eventshasonly four states
andeight transitions. This substantial reduction incontroller size
means thatPcanbeveriﬁed tohold inallstates directly .Asshown
inSection 4,thisimplies thatPholds intheoriginal model.
Withthese applications andothers, theapplicability ofourap-
proach depends upon bothcorrectness andthereduction achie vedin
reasonable time. Therefore, thispaper concerns thetheoretical and
empirical underpinnings ofmodel projection asformalized inSec-
tion 2.Section 3then introduces four progressi velymore precise
(and more expensi ve)model projection algorithms. This isfollowed
inSection 4 by proofs ofcorrectnes sforthefour algorithms. Fi-
nally ,Section 5investig atestheeffectiveness andefﬁcienc yofour
approach interms ofthereduction achie vedonasetoftenmodels
(including standard benchmarks andrealworldmodels).EXIT
Sugar()Coin()
[t+25>=price && price>0]/
s=0;t=0;
MoreSugar()
Tea()
[k==1 && s==1]/
k=k-1;Tea()
[k1==1 && s==2]/
k1=k1-1;
Coin() Coin()dispose()
insertlargecups(n)
[n>0]/
k=n;insertsmallcups(n)
[n>0]/
k1=n;Coin()
smallcup()/
s=2;
largecup()/
s=1;Cancel()Tea()
[k>1 && s==1]/
k=k-1; Tea()
[k1>1 && s==2]/
k1=k1-1;setprice(p)[p>0]/price=p;Coin()[t+25<price]/t=t+25;insertlargecups(n)[n>0]/k=k+n;insertsmallcups(n)[n>0]/k1=k1+n;
create()/
k=0;k1=0;t=0;price=0;
No Small 
CupsNo Large 
CupsCoins 
InsertedSugarDouble
SugarIdle
Tea()
[k1==1 && s==2]/
k1=k1-1;Tea()
[k1==1 && s==2]/
k1=k1-1;Tea()
[k==1 && s==1]/
k=k-1;Tea()
[k==1 && s==1]/
k=k-1;Cancel()
Cancel()
Tea()
[k1>1 && s==2]/
k1=k1-1;Tea()
[k1>1 && s==2]/
k1=k1-1;Tea()
[k>1 && s==1]/
k=k-1;
Tea()
[k1>1 && s==2]/
k1=k1-1;
Coin()Coin()
smallcup()/
s=2;
smallcup()/
s=2;
largecup()/
s=1;largecup()/
s=1;Figur e1: Illustrati veexample:
model projection forasimple vend-
ingmachine. The complete vending
machine includes both thedashed
grey and blackelements. The pro-
jection, forreuse inanenviron-
ment wher esugar isunavailable
(the ‘sugar’ button isdisabled ),in-
cludes only theblack elements ofthe
model. The states and transitions
concer nedwith providing sugar are
projected outofthemodel. The pro-
jection isfaithful toallother (sugar
free)interactions with itsenviron-
ment.
2.MODEL PROJECTION DEFINITION
This section ﬁrst introduces some notat ionandterminology re-
lated totheparticular models focused oninthispaper: Extended
Finite State Machines (EFSMs). Itthen formalizes thenotion ofa
projection forEFSMs.
Deﬁnition 1(Extended Finite State Machines (EFSMs))
AnEFSM Misatuple(S,T,A,Si)wher eSisasetofstates, T
isasetofstate tostate transitions, Aisanevent alphabet (asetof
events), andSiisthesetofinitial states. Atransition t∈Thas
alabellbl(t)oftheforme()[g]/a,wher ee∈A,gisaboolean
guard,written inanunspeciﬁed condition langua ge,andaisan
action, written inanunspeciﬁed command langua ge.Allparts of
thelabel areoptional. Only when theguardevaluates toTruecan
thetransition betaken.Anomitted guardisassumed tobeTrue. For
transition t,source(t),target(t),guard(t),trigger(t),andaction( t)
areused torefer tot’ssourcestate ,targetstate ,boolean guard,
triggerevent, andaction, respectively .
AnEFSM Mtakes as input asequence ofeventsE∈A∗.Each
eventincludes, inaddition totheeventname, alistofformal param-
eters thatarepassed values from theexternal environment with the
event. Atransition’ saction commonly update sthestore andmay
produce output events, which need notcome fromA.Finally ,iftwo
transitions share thesame source state, thesame trigger event,and
their guards canbesimultaneously True,thenMisanon-deterministic
EFSM; otherwise, itisdeterministic.
Acompletely speciﬁed EFSM includes, foreverystate, atran-
sition triggered byeveryeventintheeventalphabet A.Since com-
pleteness canoften obscure thetruenature ofanEFSM, asaconven-
tionEFSMs areoften presented with certain transitions leftimplicit.
Acommon interpretation forimplicit transitions isaselftransition.
Ineffecttheeventisconsumed byhaving thestate machine stutter
(repeat) thesame state without anyeffectother than consuming the
event.Thefollowing deﬁnition form alizes theeventsequences that
donotrequire stuttering.
Deﬁnition 2(Implicit Transition FreeEventSequence)
ForEFSM M=(S,T,A,Si),aninput event sequence E∈A∗is
referr edtoasimplicit transition freeifMtakesnoimplicit transi-
tions when presented withE.Such an eventsequence isalsoreferr ed
toasstutter -free .Forasetofevent sequences X,itf(M,X)denotes
theimplicit transition freesubset ofX:
itf(M,X)={E∈X|Mtakesnoimplicit transitions
when processing E}.basicProjection (EFSM M=(S,T,A,Si),Ignore EventSetI)
LetM′=(S′,T′,A,Si)where
S′={s′∈S|∃pathp=s···s′∈T∗∧s∈Si}
∧∀t∈p,trigger(t)/ne}ationslash∈I
T′={t∈T|source(t)∈S′∧target(t)∈S′}
in
M′=(S′,T′,A−I,Si)
Figur e2:The basic model projection.
Givenasetofeventstoignore, denotedI,theprojection ofEFSM
Mpreserv esM’sbehaviorwhen placed inan en vironment thatdoes
notgenerate events fromI.The resulting setofeventsequences,
formalized bythefollowing ﬁlter,isused todeﬁne model projection .
Deﬁnition 3(EventSequence SetFilter)
Sequence-set Filter function ﬁ(X,I)={E∈X|E∩I=∅}
wher eE∩Idenotes theinter section ofthesetofevents inEwith
I.
Deﬁnition 4(Model Projection)
AModel Projection ofEFSM M=(S,T,A,Si)forignor esetIis
areduced EFSM M′thatissemantically indistinguishable fromM
onallevent sequences fromﬁ(A∗,I).
Foraprojection tobesemantically indistinguishable asrequired
bythedeﬁnition, itmust preserv ethebehavior oftheoriginal ma-
chine. There aretwoaspects tothissemantic requirement: what
behaviorispreserv edandoverwhat setofeventsequences itispre-
served.Theﬁrstofthese, “what behaviorispreserv ed”isformalized
byDeﬁnition 9inSection 4.Informally ,thebehavior includes the
variable values computed ateach state.
Thesecond aspect ofthesemantic requirement considers theset
ofeventsequences overwhich thesemantics ispreserv ed. Two
options areconsidered: thestrong semantic requir ement andthe
weak semantic requir ement .Under thestrong requirement, behavior
ispreserv edonallsequences inﬁ(A∗,I),while fortheweak re-
quirement, behavior ispreserv edonly forthestutter freesequences
ofﬁ(itf(M,A∗),I).Thus theweak requirement does notrequire
matching behavior oneventsequences forwhich theEFSM implic-
itlyconsumes anevent.Rather ,itrestricts thisrequirement toevent
sequences where thebehaviorofMisexplicitly deﬁned.
Figure 2presents thedeﬁnition ofabasic projection ofanEFSM,
which isillustrated bytheexample inFigure 1.InSection 4weprovethat theimplementation ofbasicProjection showninFig-
ure3satisﬁes thestrong semantic requirement. Furthermore this
algorithms remo valofstates andtransitions canfacilitate further
simpliﬁcations. Thus three additional algorithms gobeyond theba-
sicprojection andconsider simplifying thestate machine using con-
stant propag ation andstate merging. Themost aggressi veofthestate
merging algorithms satisﬁes only theweak semantic requirement.
3.ALGORITHMS
This section describes four model projecti onalgorithms thatrep-
resent differing performance/precision tradeof fs.Model projection
hasseveral possible implementation strate gies. Forexample, one
could buildaprojection byadding necessary elements toaninitially
empty model. Alternat ively,onecould remo veelements from the
model being projected. Theinitial implementation followsthelater
approach. To do so,itrecasts thenotion ofprogram slicing [34]
totheEFSM domain. However,thisrecasting differsfrom previ-
ousworkonslicing state-based models [17, 21, 23, 24, 33], which
transplant concepts from theprogram slicing [34]inanattempt toin-
crementally adapt program-slicing concepts andtechniques. These
differences areconsidered further inSections 5.3and6.
Formuch ofitshistory ,depende nceanalysis hastypically been
applied toprograms, butthere hasbeen arecent increase inthethe-
oryandpractice ofdependence analysis formodels, andinparticular
state-based models [1]. Indeed, ithasbeen argued [15] thatallde-
scriptions, whether theybespeciﬁcations, models, orother descrip-
tions, willhave atendenc ytobecome executable overtime, making
such descriptions more likelytobecome thesubject oftechniques
associated with program analysis, such asdependence analysis and
slicing. The recent interest independence analysis forstate-based
models makesittimely toconsider whether notions ofslicing, hith-
erto deﬁned for programs, remain appropriate when transplanted
into theparadigm ofmodels. This paper argues thatthenotion of
slicing needs tobegeneralised tooneofmodel projection forcon-
sidering models both EFSMs andotherwise. Speciﬁcally ,the‘slic-
ingcriterion’ andalgorithms forslicing willneed totakeaccount of
model-speciﬁc characteristics.
Therecasting ofslicing used toimplement model projection pro-
vides amore natural slicing approach byproviding amore natu-
ralwaytospecify theslicing criterion: anenvironment-based slice
istakenwith respect toanignore setI.AsshowninSections 4
and5,environment-based slicing correctly andeffectivelyimple-
ments model projection. This achie vesalong standing goal inpro-
gram slicing ofdeﬁning theslicing criteria interms ofhigher level
concepts [14, 34].
Theremainder ofthissection ﬁrstintroduces theslicing algorithm
basicSlice andthen three extensions thatincorporate constant prop-
agation and2different state mergings. Figure 3presents basicSlice .
Givenasaslicing criterion anignore setI,basicSlice computes a
slice bydeleting alltransitions whose trigger eventcorresponds to
events intheignore set.Then itremo vesallstates andtheir transi-
tions thatarenolonger reachable from aninitial state. Thereduced
model isabasicProjection asdeﬁned inFigure 2.Figure 1shows
thebasicSlice produced fortheVending Machine example using
theignore setI={Sugar()}.
Theﬁrstextension tobasicSlice ,Algorithm A2isshowninFig-
ure4,incorporates constant propag ation. Algorithm A2further re-
duces theprojection’ ssize byreplacing aconstant-v alued variable
byitsvalue throughout themachine. When aguard isupdated, it
may simplify toFalse;thus thecorresponding transition (and per-
haps itstargetstate) canberemo ved. The algorithm implements
asimple ﬂow-insensiti veconstant propag ationalgorithm inwhich
variables aremapped tovalues inaﬂatlattice [12]. Initially vari-basicSlice (EFSM M=(S,T,A),Ignore EventSetI)
{
M′←M
delete fromT′alltransitions twhere trigger(t)∈I
while∃stateswith noincoming transitions do
remo vesandalltransitions twhere source(t)=s
return M′
}
Figur e3:Algorithm A1:basicSlice .Basic algorithm forcom-
puting anenvironment-based slice.
ables thatappear asformal parameters ofaneventlabelling atran-
sition areassigned thevalue⊥(non-constant) because theyrecei ve
anunkno wnvalue from theenvironment. Allother variables vare
initialized to⊤(uninitialized). Theassignments thatlabel thetran-
sitions arethen takenintoaccount. Iftheright-hand side oftheas-
signment evaluates toaconstant then thevalue oftheleft-hand side
variable isreplaced with themeet oftheconstant andthevariable’ s
present value. Otherwise, thevalue isreplaced with⊥.
Inaddition toconstant propag ation, twostate merging algorithms
areused tofurther reduce thesize ofaprojection bycombining
groups ofstates thathaveidentical semantics. Theright-equi valent
merging algorithm extends analgorithm ofIlieetal.[19] toEF-
SMs. R-equi valence equates tobisimulation fordeterministic state
Slice CP(EFSM M,Ignore EventSetI)
{
M′=basicSlice (M,I)
constantPropagation (M′)
returnM′
}
constantPropagation (EFSM M=(S,T,A,Si))
{
¯σ=λv.8
<
:⊥ifvisused asaformal parameter ofan
input eventinatransition label
⊤otherwise
foreach t∈T
foreach assignment “v=exp”∈action(t)
letx=result ofevaluating expusing¯σ
inupdate (¯σ,v,x)
deleteUnT rigger ableTransitions (M′,¯σ)
}
deleteUnT rigger ableTransitions (EFSM M=(S,T,A,Si),
abstract store¯σ)
{
while∃t∈Twhere guard(t)evaluates toFalseusing¯σ
remo vetfromT
while∃s∈Swith noincoming transitions do
remo vesandalltransitions ¯twhere source(¯t)=s
}
where
update (¯σ,v,x)replaces v’svalue in¯σwith¯σ(v)⊓x
using thefollowing meet operation:
⊤⊓⊤=⊤ ⊤⊓C=C⊤⊓⊥=⊥
C⊓C=C C⊓C′=⊥(C/ne}ationslash=C′)
C⊓⊥=⊥ ⊥⊓⊥=⊥
Figur e4:Algorithm A2:Constant Propagation removestransi-
tions whose guard isalways False.Slice Merge(EFSM M,Ignore EventSetI)
{
M′=basicSlice (M,I)
constantPropagation (M′)
R-mergeEquiv alentStates (M′)
ifonly satisfying theweak semantic requirement then
G-mergeEquiv alentStates (M′)
}
R-mergeEquiv alentStates (EFSM M=(S,T,A,Si))
{
while∃States s1,s2∈Ssuch thatR-equivalent (s1,s2)
replace s1ands2withs,where shasasitsoutgoing (and self-) transitions acopyofthose ofs1,
andincoming transitions theunion ofthose ofs1ands2.
}
R-equivalent (States s1,s2)
{
ifﬁnalState (s1)∧notﬁnalState (s2)ornotﬁnalState (s1)∧ﬁnalState (s2)
return false
elsereturn trueiff
∀t∈T·source(t)=s1⇒∃t′:T·source(t′)=s2∧trigger(t′)=trigger(t)∧action(t′)=action(t)
∧guard(t′)≡guard(t)∧target(t′)∼target(t)
∀t∈T·source(t)=s2⇒∃t′:T·source(t′)=s1∧trigger(t′)=trigger(t)∧action(t′)=action(t)
∧guard(t′)≡guard(t)∧target(t′)∼target(t)
//Where s1∼s2means thetargetsarethesame state, oroneiss1andtheothers2.
}
G-mergeEquiv alentStates (EFSM M=(S,T,A,Si))
{
Forasetoftransitions T,triggers[T]denotes thesetoftriggers ofthetransitions ofT.
Function metric(g)denotes thenumber ofstates remo vedbymerging groups ingintosingle states: Σs∈g(|s|−1)
where|s|denotes thesizeofsets.
possibleGr oups={ss∈2S| |ss|≥2∧
(∀t∈T·source(t)∈ss∧target(t)∈ss⇒action(t)=skip)
∧( (triggers[{t∈T|source(t)∈ss∧target(t)∈ss}]
∩triggers[{t∈T|source(t)∈ss∧target(t)/ne}ationslash∈ss}]=∅)}
ifpossibleGr oups/ne}ationslash=∅then
mergeGroups={pg∈2possibleGr oups|pg/ne}ationslash=∅∧∀state setsss1,ss2∈pg·ss1/ne}ationslash=ss2⇒ss1∩ss2=∅}
bestGr oup=g∈mergeGroups such thatmetric(g)ismaximal.
collapseStates (M,bestGr oup)
}
Figur e5:Algorithms A3andA4:TwoState Merging algorithms
machines. Ithasacounterpart that mergesleft-equi valent states.
However,thismergeisonly relevantfornon-deterministic EFSMs
andisnotpresently implemented. Merging both R-equi valent andL-
equivalent states forms abisimulation forgeneral EFSMs. Theap-
proach, implemented bythefunction R-mergeEquiv alentStates ,
showninFigure 5,repeatedly mergespairs ofstates provided that
thetwostates ofthepairareR-equivalent ,until nofurther merging
ispossible. States s1ands2areR-equivalent if,foreverytransition
froms1,there isacorresponding transi tionfroms2andvice versa.
That is,foreach trigger event,theoutgoing transitions from thetwo
states areidentical intheir guards andactions, andhaveequivalent
targetstates after themerge(i.e.,s1ands2areconsidered tobethe
same state). This transformation preserv estheregular expression
language (i.e., thesetofstutter -free eventsequences) accepted by
thestate machine.
The second merging algorithm, G-mergeEquiv alentStates ,
showninFigure 5,isamore aggressi vemergethatcanyield greater
simpliﬁcation and, asatradeof f,only preserv estheweak seman-
ticrequirement. Inthisfunction thesetpossibleGr oups includes allgroups (subsets ofS)thatareeligible tobemergedintosingle states.
Agroup sscanbemergedifithassizetwoormore, alltransitions
within thegroup havenoactions, andthesetofinternal triggering
events isdisjoint from thesetofexiting triggering events .The set
ofinternaltriggering eventsincludes those eventsthattrigger transi-
tions from astate insstoanother state insswhile thesetofexiting
triggering events includes those events thattrigger transitions from
astate insstoastate outside ofss.While unimplemented, itispos-
sible torelax thisrequirement andallowthemerge,provided that
foralleventsE,theguard conditions ofeach internal transition trig-
gered byEarelogically inconsistent with theguard conditions of
alloftheexiting transitions triggered byE.
IfthesetpossibleGr oups isnon-empty ,then some merging ispos-
sible. Todetermine thebest merge,asetofallpossibilities merge-
Groups isdeﬁned. This setincludes subsets ofpossibleGr oups that
arepairwise disjoint andcanthusbemergedsimultaneously .Finally ,
thesubset thatmaximizes thenumber ofstates remo vedischosen.
Because thisalgorithm isexponential inthenumber ofstates (which
islikelytobethecase foranyalgorithm which considers allpossi-blecandidates forstate merging) future workincludes considering
heuristics forapplying G-mergeEquiv alentStates .Howeverthe
empirical study reported inSection 5.3indicates that, inpractice,
theruntimes arereasonable.
Figure 6illustrates theimpact ofconstant propag ation andstate
merging. EFSM Aissliced with respect toignore setI={a}.Slic-
ingremo vesthetwoassignments toxwhen itdeletes thetransitions
froms3→s4ands5→s4.This leavesxwith theconstant value
1.Constant propag ation rewrites theguard x<2onthetransition
froms4totheﬁnal state to“True”,which inturnenables R-mer ging
ofstatess4ands5leading toEFSM B.EFSM Cshowstheresult of
R-mer ging states s1ands3.This mergedoes notrequire constant
propag ation; thus theexample illustrates both that some merging
ispossible without performi ngconstant propag ation andthatcon-
stant propag ation canenable (additional) merging. Ifonly stutter -
freesequences areacceptable thenG-mergeEquiv alentStates can
beused. This mergess1,s3ands4,s5yielding EFSM D.
4.ALGORITHM CORRECTNESS
Inwhat followsweshowthatthebasic slicing Algorithm A1is
correct with respect tothestrong semantic requirement. Moreo ver,
weshowthattheconstant propag ation andright-equi valent merging
algorithms, A2andA3,arealsocorrect with respect tothisrequire-
ment. Finally ,thegroup merging algorithm isshowntobecorrect
with respect totheweak semantic requirement. Before wepresent
theproofs ofcorrectness, wedescribe thesemantics ofEFSMs, for-
mally .
Deﬁnition 5(Conﬁgurations)
LetΣbethesetofallpossible storesforanEFSM. ForEFSM M=
(S,T,A,Si),aconﬁgur ation isapair(s,σ)wher es∈Sisastate
andσ∈Σisastore.
Deﬁnition 6(Status)
ForEFSM M=(S,T,A,Si),astatus isapair(C,E)wher eC
isaconﬁgur ation andE∈A∗isanevent sequence .Astatus isan
initial status ifthestate contained initsconﬁgur ation isaninitial
state.
Deﬁnition 7(Enabled Transitions)
ForStatus St=(C,E)ofanEFSM M=(S,T,A,Si)wher eC=
(s,σ),transition tisenabled iffsource(t)=s,guard(t)evaluates
toTruewhen evaluated usingσ,andtrigger (t)=head(E).Theset
Enabled (St)denotes thesetofalltransitions enabled inStatus St.
Thesemantics ofanEFSM M,isformaliz edasaLabeled Tran-
sition System (LTS). States oftheLTSarethestatuses ofMand
transitions oftheLTShavethesame labels asthetransitions ofM
butextended with anadditional label forimplicit transit ions (see
theoperational semantics deﬁnition below).TheLTShasalabeled
step rulewhich deﬁnes legaltransitions. Aclosed syste massump-
tion ismade inwhich thestatus isonly changed explicitly bythe
step rule. The semantics ofEFSM Mtaking enabled transition t
isgivenasanLTSmovefrom Status St1toStatusSt2,denoted
M⊢St1t−−−→
LTSSt2.Indoing sothestore isupdated using the
store update function denoted by[ [action(t)]].This single step rule
isformalized asfollows:
Deﬁnition 8(LTSStep− − −→
LTS)
ForStatus St=((s,σ),E)ofEFSM M,taking enabled transition
tproduces thenextstatus:
t∈Enabled (St)∧σ′=[ [action(t)]]σ
M⊢((source(t),σ),E)t−−−→
LTS((target(t),σ′),tail(E))s4
b/acts2s4, s5d
gd/acts1
d b
b/acts2b[x<2]/acts2 gA
s1
s3
s5s2
d
gd b
b/acts2gB
s4, s5s3s2
s1d/acts1
ds2C
s1, s3bd/acts1
ga/x = x−1a/x =5/x =1
/x =1
/x =1
 ds2
bD
s4, s5s1, s3d/acts1
b/acts2
g/x =1
Figur e6:This example illustrates therollofconstant propaga-
tion and state merging inthecurrentimplementation ofmodel
projection. Applying basicSlice toEFSM Ausing ignor eset
I={a}removesthetwodashed transitions fromEFSM A.
EFSM Bshowstheresults ofconstant propagation, which re-
places theguard x<2with “True,”and then theR-mer ging
ofstates s4ands5,which isenabled bytheconstant propaga-
tion. EFSM Cshowstheresult oftheadditional R-mer ging of
states s1ands3.Finally ,EFSM Dshowstheresult ofapplying
G-mer ge,combining s1,s3ands4,s5.
Deﬁnition 9(Operational Semantics)
Theoperational semantics deﬁnes themeaning ofEFSM M=(S,
T,A,Si)astheLTS(ST,STi,L,−−−→
LTS)wher eSTandSTiare
setsofstatuses andinitial statuses, respectively ,thelabel setLis
T∪{ε},wher ethespecial labelεisused tomodel implicit transi-
tions, and−−−→
LTSistheLTSstep rule fromDeﬁnition 8.
Deﬁnition 10(Stuttering Rule)
ForaStatus St=(C,E),ifnotransitions areenabled, then the
head oftheevent sequence isconsumed without changing C.
Enabled(St) =∅
M⊢(C,E)ε−−−→
LTS(C,tail(E))Deﬁnition 11(Reachable Statuses Set)
ForEFSM M=(S,T,A,Si)having LTS(St,Sti,L,−−−→
LTS)and
arestricted event alphabet AR,thesetStatuses(M,AR)istheset
ofstatuses reachable inzeroormoresteps fromaninitial status in
anenvironment thatproduces only events found inAR:
Statuses(M,AR)/defines{st∈St|sti∈Sti
∧M⊢stit−−−→
LTS∗
stwhere trigger(l)∈AR}
Deﬁnition 12(Status Congruence ∼=)
Statuses ((s1,σ1),E1)and((s2,σ2),E2)arecongruent, written
((s1,σ1),E1)∼=((s2,σ2),E2)iffσ1=σ2andE1=E2.
Inthefollowing proofs, M′continues todenote asliceofEFSM
M.Subscripts areadded todenote aslice produced byaparticular
slicing algorithm; thus,aslice ofMproduced byA1(Figure 3)
isdenoted M′
1.Themain theorem uses simulation toestablish the
correctness ofAlgorithm A1byshowing thatforalleventsequences
E∈ﬁ(A∗,I)ManditssliceM′
1produce corresponding statuses.
That is,whate verMcandousing only therestricted eventsetM′
alsocando.This resul tisthen extended toshowthatthesimulation
stillholds forA2slices. Finally ,itisshownthatA3produces slices
who’ ssimulation ishomomorphic tothose forslices produced byA2
and, foreventsequences inﬁ(itf(M,A∗),I).This result extends to
slices produced byA4.
Simulation isarelation between statuses intheoperati onal se-
mantics ofapair ofEFSMs. WewriteSt1✄St2tomean St2
simulates St1.Wemildly abusethewordsimulation when saying
M′simulates MforagivensetofeventsequencesE.The intu-
ition isthatifM′simulates MforEthen thetwomachines havethe
same behaviorwhen placed inan en vironment thatcanonly produce
eventsequences inE.First wegivethegeneral deﬁnition ofasim-
ulation between thesemantics ofEFSMs andthen thedeﬁnition for
themeaning ofM′simulates MforE.
Deﬁnition 13(Simulation relation ✄fortheoperational seman-
ticsofEFSMs)
LetEFSMs M=(S,T,A,Si)and(itsslice)M′=(S′,T′,A′,S′
i)
have statuses (C1,E1)and(C′
1,E1)respectively .
Then(C1,E1)✄(C′
1,E1)iffwhene ver
(C1,E1)∼=(C′
1,E1)andM⊢(C1,E1)t−−−→
LTS(C2,E2)
there exists astatus (C′
2,E2)suchthat
M′⊢(C′
1,E1)t−−−→
LTS(C′
2,E2)and(C2,E2)✄(C′
2,E2)
wher eE2denotes tail(E1).
Deﬁnition 14(EFSM simulation)
EFSM M′=(S′,T′,A′,S′
i)simulates EFSM M=(S,T,A,Si)
forE,written M✄EM′,if
•thereisasimulation relation, ✄,between thetwosemantics
whose rangeincludes allstatuses inthesemantics ofM′for
event sequences inEand
•forevery start states′
i∈S′
iforM′thereisacorresponding
start statesi∈SiforMsothatanyevent sequence EinE
andstoreσ,((si,σ),E)✄((s′
i,σ),E)
Theﬁrsttheorem states thatprojecting thebehavior ofanEFSM
viaanignore setissafeastheresulting EFSM simulates theoriginal
with respect tothereduced environment.
Theor em1Given EFSM M=(S,T,A,Si)anditssliceM′
1=
(S′,T′,A′,Si)produced byalgorithm A1using ignor esetIM✄E
M′
1forE=(A−I)∗(M′
1simulates MforE=(A−I)∗).Proof.Weﬁrst provethatanon-empty simulation relation exists
between thesemantics ofM′
1andthesemantics ofM.IfM′
1ispro-
duced fromMbyAlgorithm A1using ignore setI,thenM′
1isa
submachine ofM(itsstates, transitions andactions arecontained
inthestates transitions andactions ofM).Without lossofgeneral-
itywecanassume thatthesetofpossible stores foreach machine is
thesame. Then each status ofM′
1isastatus ofM.IfMhasstatus
((s,σ),E)andM′
1hasstatus ((s′,σ′),E)where s=s′,σ=σ′,
andE∈E=(A−I)∗then wecanshowthattheysatisfy asimu-
lation relation.
Because thestatuse sareidentical ((s,σ),E)∼=((s′,σ′),E).
Nowassume thatM⊢((s,σ),E)t−−−→
LTS((s1,σ1),tail(E))where
head(E)∈A′.WehavethatM′
1⊢((s′,σ′),E)=((s,σ),E)t−−−→
LTS
((s1,σ1),tail(E))aswell. Ifthatwere notthecase, sincet−−−→
LTS
corresponds toatransitiont−→inMandt−→istriggered byanevent
inA′,thefailure tobeinM′
1canonly bebecause thetransition is
deleted during theconstruction ofM′
1byA1because itisunreach-
able. Howeversince itssource state isinM′
1(byarbitrary choice of
thestatus forM′
1),itmust bereachable. Thus theresulting pairof
conﬁgurations areidentical andinturn must satisfy thesimulation
relation. Wetake✄asthelargest simulation relation between the
conﬁgurations ofthetwosemantics thatboth includes theidentical
pairs from thesemantics ofMandM′
1andsatisfy simulation asde-
ﬁned inDeﬁnition 13.Finally ,byconstruction ✄includes apairof
identical statuses foreveryinitial status inM′
1because A1includes
allofM’sinitial states inM′
1./square
Wenextshowthatthere isanEFSM simulation between theorig-
inalmachine andtheslice produced byA2,which extends A1by
applying constant propag ation.
Proposition 1Given EFSM M=(S,T,A,Si)anditssliceM′
2
=(S′
2,T′
2,A′
2,Si)produced byA2using ignor esetI,M✄EM′
2
wher eE=(A−I)∗.
Proof.LetM′
1=(S′
1,T′
1,A′
1,Si
1)betheresult ofapplying A1to
Musing ignore setI.WeshowthatM′
2simulates M′
1forE,that
isthere isasimulation ✄2such thatM′
1✄2
EM′
2andthen relyon
theclosure ofsimulations under composition fortheexistence ofa
simulation ofMbyM′
2forE,i.e.M(✄;✄2)EM′
2.
First observ ethatA2produces M′
1andthen performs constant
propag ation. Theeffectofconstant propag ation onM′
1isthatsome
transitions whose guards areconstantly falseinthesemantics ofM′
1
aremissing inM′
2(some rather than allbecause thecorrectness of
theconstant propag ation algorithm implie sitisconserv ative).Fur-
thermore, transitions inM′
1only reachable viatransitions whose
guards areconstantly falsearemissing inM′
2.SoM′
2isasubma-
chine ofM′
1.
Weshowthat there isanonempty simulation ofthesemantics
ofM′
1bythesemantics ofM′
2.LetSt2=((s,σ),E)beasta-
tusofM′
2.Since M′
2isasubmachine ofM′
1St2isalso astatus
ofM′
1andtheidentical pair satisfy∼=.Nowassume thatM′
1⊢
((s,σ),E)t−−−→
LTS((s1,σ1),tail(E)).M′
2⊢((s,σ),E)t−−−→
LTS
((s1,σ1),tail(E))willhold unless thetransition t∈T′
1does not
existinT′
2.This could beforoneoftworeasons: either theguard
oftisconstantly false ortisonly reachable viatransitions whose
guards areconstantly false. IntheﬁrstcaseM′
1⊢((s,σ),E)t−−−→
LTS
((s1,σ1),tail(E))isnotpossible, inthesecond Stisnotareach-
ableconﬁguration ofM′
1,soneither isitareachable conﬁguration of
M′
2.Therefore M′
2⊢((s,σ),E)t−−−→
LTS((s1,σ1),tail(E))holdsandtheresulting conﬁgurations areidentical, satisfying thesimula-
tionrelation. Again✄2isdeﬁned similarly to✄andtheargument
fortheinitial conﬁgurations ofM′
2satisfying therelation issimilar .
/square
Wenowshowthatthesimulation produced byAlgorithm A3is
homomorphic tothatproduced byAlgorithm A2.
Proposition 2Given EFSM M=(S,T,A,Si)anditssliceM′
3
=(S′
3,T′
3,A′
3,Si)produced byA3using ignor esetI,M✄EM′
3
wher eE=(A−I)∗.
Proof.LetM′
2betheslice ofMproduced byA2usingI.We
showthat there exists a(model) homomorphism, h,fromM′
2to
M′
3.Wethen arguethathnaturally extends toahomomorphism
between thesimulations ofM′
2andM′
3;thus,M✄EM′
3follows
fromM✄EM′
2.
Assume thatM′
2includes statess1,s2where s1ands2haveiden-
tical outgoing transitions forevents inA−I.Inmore detail, for
each transiti ont1where source(t1)=s1andlbl(t1)=e[G]/acts
andtarget(t1)=x,there isatransition t2where source(t2)=
s2,lbl(t2)=e[G]/acts ,andtarget(t2)=x′where x=x′or
{x,x′}={s1,s2}.Model M′
3isidentical toM′
2except thats1and
s2arereplaced byasingle states,each transition ttargeting s1or
s2isreplaced beatransition targeting s,Matched transitions t1and
t2inM′
2asabovearereplaced inM′
3byasingle transi tiontwith
source(t)=s,lbl(t)=e[G]/acts andtarget(t)=zwhere z=x
ifx/ne}ationslash=s1andx/ne}ationslash=s2,orz=sotherwise. Therefore, M′
3isclearly
homomorphic toM′
2.
This model homomorphism induces asimulation homomorphism
thatmaps status forM′
2tothestatuses forM′
3.Inparticular ,the
statuses fors1ands2aremapped those fors.Since theassoci ated
transitions t1andt2havethesame label, theresulting conﬁgurations
arenotaffected. Consequently ,M✄EM′
2implies M✄EM′
3./square
Finally weshowthatapplying A4also induces asimulation be-
tween thesemantics oftheoriginal machine andtheresulting slice,
butonly with some further restriction onthetype ofinput eventse-
quences thatcanbeconsidered inthesemantics.
Proposition 3Given EFSM M=(S,T,A,Si)anditssliceM′
4=
(S′
4,T′
4,A′
4,Si)produced byA4using ignor esetI,M✄4
E′M′
4
wher eE′=ﬁ(itf(M,A∗),I),thesetofrestricted sequences which
arestutter freeonM.
Proofsketch. LetM′
3betheslice ofEFSM Mproduced byapply-
ingalgorithm A3.Lethdenote themodel homomorphism theexists
between M′
3toM′
4.Proposition 2showsthatthere isasimulation
✄3
E′such thatM✄3
E′M′
3.(The proposition actually provesthe
stronger result forE=ﬁ(A∗,I)=(A−I)∗which isasuperset of
E′.)Theremainder oftheproof showsthatusinghthisrelationship
extends toM′
4(i.e., thatM(h(✄3))E′M′
4).
Model homomorphism hinduces ahomomorphism between the
LTSsthatarethesemantics ofM′
3andM′
4respecti velybutonly if
theinput eventsequences forM′
3arestutter free. Consider astatus
((s,σ),E)inthesemantics ofM′
3.Itsimage inthesemantics ofM′
4
under theinduced homomorphis m(also called h)is((h(s),σ),E).
Nowsuppose M′
3⊢((s,σ),E)t−−−→
LTS((s′,σ′),E′)where E′=
tail(E).SinceEisstutter freeforM′
3thelabel onthastrigger(t)=
head(E).Wehavetwocases toconsider .Intheﬁrstcase,head(E)
isinternal andM′
4takesaself-loop: M′
4⊢((h(s),σ),E)h(t)−−−→
LTS
((h(s′),σ′),E′)andh(s)=h(s′)andσ′=σ(because internal
labels havenoactions). Alternati velyinthesecond casehead(E)
isexiting andM′
4⊢((h(s),σ),E)h(t)−−−→
LTS((s′,σ′),E′)because G-
mergeEquiv alentStates preserv esexiting transitions. Note thatifEisnotstutter freeonM′
3thisbreaks down.Itispossible thatM′
3
stutters: M′
3⊢((s,σ),E)t−−−→
LTS((s,σ),E′)whereas because of
themerging ofstates there existanexiting transition fromh(s)in
M′
4thatistriggered byhead(E).
Thus, inconclusion, homomorphism hinduces ahomomorphism
onsimulations such that foreventsequences inﬁ(itf(M,A∗),I),
M′
3(h(✄3))E′M′
4.Combined with theresult from Proposition 2
thatM✄3M′
3,Weconclude thatM(h(✄3))E′M′
4./square
5.EMPIRICAL EVALU ATION
Forenvironment-based slicing tobeofpractical use, itisimpor -
tant toempirically consider thereduction obtained. This section
presents results from implementations ofthefour model slicing al-
gorithms A1-A4.Theempirical study addresses thefollowing three
research questions:
RQ1What istheimpact onmodel sizeofslicing with
respect tosmall ignore sets?
RQ2What istheimpact onmodel sizeofslicing with
respect toalllargeignore sets?
RQ3What istheperformance oftheslicer?
ThetenEFSM models thatwere used intheexperiment areshown
inTable 1where each model’ ssizeisgiveninterms ofthenumber
ofstates (#S)andtransitions (#T)andthenumber ofeventsinits
input alphabet (#Event).Theﬁrstsixmodels were used byKorel
etal.[20, 21]instudies ofdependence-based slicing. Thelastfour
aretheproduction systems INRES [6]andDoorControl [31] from
previous model-based studies, andTCP [35] andTCSbin. TCSbin,
provided byMotorola, wasoriginally written inSDL [5].Since SDL
speciﬁcations arericherthan those currently handled byourtool, this
model wastransformed toasemantically equivalent model (e.g., by
remo ving theneed for‘history’ and‘All’state types).
Table 1:Experimental Models.
EFSM Model #S #T #Event
ATM[21] 9 23 12
Cashier [22] 12 21 16
CruiseControl [20] 5 17 10
FuelPump [20] 13 25 16
PrintToken[22] 11 89 11
VendingMachine [22] 8 37 13
DoorController [31] 6 12 11
INRES protocol [6] 8 18 8
TCP [35] 12 57 6
TCSbin[Motorola] 24 65 39
Total 108 364 142
5.1 Small Ignor eSets
Theﬁrststudy exhausti velyconsiders theimpact ofslicing using
small ignore sets. Smaller ignore setsshould produce largerslices,
andthus provides a‘worstcase’ forthereduct ions tobeexpected
from environment-based slicing. Inaddition, slice sizeisaproxy for
theimpact ofanevent: alargerslice size indicates asmall impact
while asmall slice size indicates aneventhaving alargeimpact.
Thus, computing allpossible slices canidentify interesting events.
The experiment used allignore setsofsize 1, 2, and4.Table 2
presents theaverage slice sizecomputed overslices from alltensub-
jects separately foreach ofthefour algorithms. Overall, thereduc-
tioninthenumber ofstates andthenumber oftransiti onstellasim-
ilarstory .Inaddition asexpected, themore expensi vealgorithms
provide consistently smaller slices. Considering thatatn=4onlySlice Size 
(States)100%
50%
0%
Slices120 80 40 0A4A3A2A1
Slice Size 
(Transitions)100%
50%
0%
Slices120 80 40 0A4A3A2A1Slice Size 
(States)100%
50%
0%
Slices1200 900 600 300 0A4A3A2A1
Slice Size 
(Transitions)100%
50%
0%
Slices1200 900 600 300 0A4A3A2A1
Figur e7:Allslice sizes forAlgorithms A1,A2,A3andA4.The upper twoﬁgur esshowallslice sizes when theignor esetIissetto
each ofthe142events andthelowertwographs showallslice sizes when theignor esetIissettoeach ofthe1323 pairs ofevents.
Slices120 80 40 0Slice Size 
(States)100%
50%
0%A4A3A2A1
Slices120 80 40 0Slice Size 
(Transitions)100%
50%
0%A4A3A2A1
Figur e8:Allslice sizes forAlgorithms A1,A2,A3andA4using allpossible ignor esetscontaining allbutone(n−1)events.
athird oftheevents are,onaverage, being ignored, thereductions
areconsiderable: A4reduces thenumber ofstates by60% andthe
number oftransitions by70%. Forexpensi veapplications, such as
model checking, thisreduction isespecially signiﬁcant.
Table 2:Average slice sizewhen ignoring nevents.
States Transitions
n=1 n=2 n=4 n=1 n=2 n=4
A185.3% 78.8% 49.3% 77.5% 70.3% 33.5%
A280.5% 77.2% 47.1% 71.3% 67.1% 31.1%
A378.6% 74.6% 45.2% 69.2% 64.1% 30.3%
A471.2% 70.7% 41.1% 66.1% 63.2% 29.8%
Figure 7showsgraphs ofallslice sizes forallignore setsofsize
n=1andn=2using allfouralgorithms. Ineach graph, thex-axis
showstheslices inmonotonically increasing order ofslice size. Nor-
malized toapercentage, they-axis showsslice sizeasapercentage
ofnumber ofstates orthenumber oftransitions. The data isindi-
vidually sorted, andthus should notbeused tocompare aparticular
slice. Inallgraphs, thefour lines showsimilar trends. Consider -
ingtheextremes, forAlgorithm A1andsingleton eventignore-sets,
there arenostates remo vedinapprox 80ofthe142slices (indicated
bythestraight line onthetopright ofthediagram). Forthese slices,
thereductions inthenumber oftransitions issmall (less than 10%).
Attheother endofthespectrum, insevencases, theslices havezero
transitions. This occurs when akeyeventisused astheslicing cri-
terion. Further investig ation reveals that these events often occuronthetransitions close toaninitial state where thetriggering event
determines iffurther processing bythemodel isneeded. Forexam-
ple,ignoring theCard() eventintheATMmodel corresponds tonot
inserting anATMcard, andthus theATMremains initsidlestate.
5.2 LargeIgnor eSets
The second research question considers largerignore sets. For
A1,using ignore setsofsizen=8,alargersize than considered
inTable 2,theaverage sliceincludes 27.6% ofthestates and10.4%
ofthetransitions. The sizes forA2,A3,andA4followthesame
pattern asseen inTable 2.Attheextreme, ignoring allbutoneevent
produces anaverage slice sizeof12.7% states and1.1% transitions.
Figure 8showgraphsoftheseslices foralltenmodels where only a
single lineisvisible forallfour algorithms because theyallproduce
verysimilar sized slices.
One motivation forthisresearch question wastosupport acom-
parison with dependence-based EFSM slicing techniques andwith
theslicing ofprograms. Dependence-based techniques extract the
part ofanEFSM thataffectsoneormore elements (states, transi-
tions, orvariables used intransition labels) from theEFSM. Inthe
following comparison these elements areassumed tobetransitions.
Previous studies ofsuch slices using thesame tensubjects report an
average slice sizeofbetween 38.4% and68.0% ofthetransitions us-
ingavariety ofdeﬁnitions of“dependence” [2].From aprogram P,
acommon variant ofprogram slicing extracts asemantically mean-
ing‘subprogram’ thatcaptures theexecution ofaparticular state-
ment fromP.Itisdifﬁcult tomake adirect comparison ofenvironment-based
slicing with theslicing ofprograms ordependence-based techniques
forEFSMs because theslicing criteria aresodifferent: environment-
based slicing startswith oneormore events toignore, while the
others start with aparticular transition orstatement topreserv e.The
average program slice sizeisabout onethird ofaprogram [4].This
iscomparable tothereduction intransitions foramodel using an
ignore setofsize4.
Comparing with EFSM dependence-based techniques, onepos-
sible comparison clearly favorsenvironment- based slicing: given
thatdependence-based approaches preserv ethebehavior ofasin-
gletransition, onemight compare them with anignore setthatin-
cludes allbutoneevent. Considering allbutoneeventissimilar
todependence-based slicing’ sseeking topreserv e asingle transi-
tion from themodel. InthiscaseA4’saverage slice size of1.0%
ofthetransitions compares quite favorably .Asimilar result might
beexpected from comparing theuseofignore setsofsizeonewith
dependence-based slices takenwith respect toalltransitions notus-
inganignored event. Asthisslicing criterion (starting point) isa
substantial portion ofthemodel, thiscomparison toofavorsenvi-
ronment-based slicing. Finally ,consider alike-for -likecomparison
using asingle transition fordependence-based slicing andanignore
setofsizeoneforenvironment-based slice. HereA4’saverage slice
size of66.1% ofthetransitions, whiletowardthelargeendofthe
range fordependence-based slicing (28.4% –68%), stillprovides a
comparable reduction.
5.3 Runtime Efﬁciency
Theﬁnal research question considers theruntime efﬁcienc yofthe
slicer .Slices were computed ona2.4GHz Intel(R)Core Duo CPU
having 4GB memory .Forignore setsofsizeone, theresults show
thatA1andA2areextremely fastwith maximal times of0.016s
and0.042s,respecti vely.Incontrast, theexecution time forA3and
A4reﬂect thePSPACEcomple xityofminimizing anEFSM (and in
general anNFA)[18,13]). Theaverage times were 27sand36sand
themaximal times were 94sand753s,respecti vely.Alltimes drop
with largerignore sets. Forexample, theworst-case times forthe
four algorithms using allignore setsofsize4are0.0012 s,0.025s,
29s,and126s,respecti vely.While allfour showalargepercentage
drop, theimpact ismore meaningful forA3andA4,where theworst
case runtime forA3andA4drop by70% and83% respecti vely.
6.RELA TED WORK
Our model projections arerelated tomodel dependence analy-
sisandslicing. However,previous workonslicing state-based for-
malisms [17,21, 23, 24, 33]hasconcentrated exclusi velyonawhite-
boxviewofastate machine, inwhich themachine ismuch like a
special case ofaprogram; itsstates loosely play therole ofstate-
ments anditstransitions merely mimic control ﬂow.This hasal-
lowed concepts from program slicing tobeadapted forstate-based
models. Though valuable, such approaches miss theability totalk
about sub-models extracted from anoriginal model interms ofthe
environment inwhich themodel operates. Inthissection wede-
scribe therelationship between model projection andprevious work
ondependence analysis andslicing ofstate-based models.
Korel etal.[21] describe theincreased comple xity oftheproof
oblig ation formodel-based slicing, arising from thepresence ofen-
vironmental considerations, while Sanchez etal.[30] advocate a
clear separation between equipment control activities andproduct
manuf acturing procedures. However,neither provide algorithms that
yield model projections deﬁned for restricted environments.
Cheung andKramer [7]consider aform ofreachability analy-
sisinterms ofevents. Such ananalysis isapre-requisite ofslic-ing,which weuseinourmodel projection. However,Cheung and
Kramer usetheir approach tosimplify interf aces, nottosimplify the
models themselv es.Thetwocomplement each other asmodel pro-
jection computes theimplications ofthesimpliﬁed interf aces onthe
models themselv es.
The previous workthat most closely resembles model projec-
tionisthatdescribed byEshuis andWiering a[11]. Their approach
wasdeveloped tohandle thestate-space explosion problem when
model checking workﬂo wsaremodelled asUML activitydiagrams.
Rather than being based ondependence analysis, their approach con-
sists offour reduction rules based onactivityhypergraphs. Each of
their four rules isrelated toboth model-based slicing andaspects of
model projection. Theﬁrstofthefour rules reﬂects changes made to
themachine during theoverall rewrite process back toitsenviron-
ment. This issimilar toournotion ofimplicit-transition-free event
sequences (Deﬁnition 2).Thesecond ruleinsists thatnotwonamed
eventscanoccur atthesame time (i.e., theycanonly beinterlea ved).
This issimilar toourrequir ement thatonly oneeventisdealt with
atatime. The third rule deﬁnes when avariable canberemo ved,
andissimilar toadata dependence analysis thatisaprerequisite of
dependence-based slicing. The fourth rule, which resembles are-
stricted form ofslicing, deﬁnes howwait andactivity states
canberemo vedfrom UML activity hypergraphs. Incomparison,
with ourapproach, theenvironmental restriction isspeciﬁed bythe
designer ,whereas intheapproach ofEshuis andWiering a,theiter-
ativeapplication ofthefour rules canhavetheeffectofremo ving
some environmental elements.
Model projection introduces thepossibility ofslicing ontheevents
inwhich amodel participates toproduce areduced model special-
ized toaspeciﬁc environment. Model projection therefore presents
newchallenges andopportunities formodel-based slicing, inwhich
theenvironment essentially becomes aﬁrstclass citizen intheslic-
ingcriteria.
7.CONCLUSION
Weintroduced model projection inorder toextend tothedesign
levelbeneﬁts thatslicing offersatthecoding level.However,mod-
eling languages arenotsimply higher -levelprogramming languages
andsowefound thatweneeded tore-think thewayinwhich thesim-
pliﬁcation inherent inslicing isdeﬁned andimplemented. Inpartic-
ular,wefocused onthemodel’ senvironment asacriterion forsim-
pliﬁcation, rather than theinternal white boxstructure ofthemodel
itself.
Aswith anynewapproach there isanoblig ation todemonstrate
correctness, effectiveness, andefﬁcienc yandthese havetherefore
formed theprimary contrib utions ofthispaper .Wehaveintroduced
andprovedcorrect asetoffour algorithms formodel projection that
trade effectiveness (interms ofprojected model size) forefﬁcienc y
(interms ofprojection construction time). Theimplementations of
ourfour algorithm sareavailable from theSLIM project website at
http://slim.dcs.kcl.ac.uk .
8.REFERENCES
[1]K.Androutsopoulos, D.Clark, M.Harman, J.Krink e,and
L.Tratt.Surveyofslicing ﬁnite state machine models.
Technical Report RN/10/07, University Colle geLondon,
2010.
[2]K.Androutsopoulos, N.Gold, M.Harman, Z.Li,andL.Tratt.
Atheoretical andempirical study ofEFSM dependence. In
International Confer ence onSoftwar eMaintenance (ICSM) ,
pages 287–296, Edmonton, Canada, 2009.
[3]A.Baresel, H.Pohlheim, andS.Sade ghipour .Structural and
functional sequence testofdynamic andstate-based softw arewith evolutionary algorithms. InGenetic andEvolutionary
Computation Confer ence (GECCO ’03),pages 2428–2441,
Berlin, 2003. Springer -Verlag.
[4]D.Binkle y,N.Gold, andM.Harman. Anempirical study of
static program slice size. ACMTransactions onSoftwar e
Engineering andMethodolo gy,16(2), 2007.
[5]C.Bourhﬁr ,R.Dssouli, E.Aboulhamid, andN.Rico.
Speciﬁcation anddescription language (SDL),W ebPro Forum
Tutorial, Int.Eng. Consortium.
[6]C.Bourhﬁr ,R.Dssouli, E.Aboulhamid, andN.Rico.
Automatic executable testcase generation forextended ﬁnite
state machine protocols. InIWTCS’97 ,pages 75–90, 1997.
[7]S.Cheung andJ.Kramer .Conte xtConstr aints for
Compositional Reac hability Analysis .ACMTransactions on
Softwar eEngineering andMethodolo gy,5(4), October 1996.
[8]J.C.Corbett, M.B.Dwyer ,J.Hatclif f,S.Laubach, C.S.
Pasareanu, Robby ,andH.Zheng. Bandera: Extracting
ﬁnite-state models from Javasource code. In22nd
International Confer ence onSoftwar eEngineering
(ICSE’2000) ,pages 439–448, LosAlamitos, California, USA,
June 2000. IEEE Computer Society Press.
[9]D.Drusinsk y.Modeling andVeriﬁcation Using UML
Statec harts: AWorking Guide toReactive System Design,
Runtime Monitoring andExecution-based Model Chec king.
ElsevierInc,2006.
[10] B.Dutertre andV.Stavridou. Avionics systems requirements:
Acomparison ofRSML andSCR. InIrish Signals and
Systems Confer ence,Dublin Institute ofTechnology ,1998.
[11] R.Eshuis andR.Wiering a.Toolsupport forverifying UML
activitydiagrams. IEEE Transactions onSoftwar e
Engineering ,30(7):437–447, 2004.
[12] C.N.Fischer andR.J.LeBlanc. Crafting aCompiler .
Benjamin/Cummings Series inComputer Science.
Benjamin/Cummings Publishing Compan y,Menlo Park,CA,
1988.
[13] M.R.Gare yandD.S.Johnson. Computer sandIntractability .
W.H.Freeman andCompan y,1979.
[14] N.Gold, M.Harman, D.Binkle y,andR.M.Hierons.
Unifying program slicing andconcept assignment for
higher -levelexecutable source code extraction. Softwar e
Practice andExperience ,35(10):977–1006, 2005.
[15] M.Harman. Whysource code analysis andmanipulation will
alwaysbeimportant. In10thIEEE International Working
Confer ence onSourceCode Analysis andManipulation ,
Timisoara, Romania, 2010.
[16] M.Harman andS.Danicic. Using program slicing tosimplify
testing. Softwar eTesting ,Veriﬁcation andReliability ,
5(3):143–162, Sept. 1995.
[17] M.P.E.Heimdahl andM.W.Whalen. Reduction andslicing
ofhierarchical state machines. InProc.FifthACMSIGSOFT
Symposium ontheFoundations ofSoftwar eEngineering ,
Zurich, Switzerland, 1997. Springer –Verlag.
[18] J.E.Hopcroft andJ.D.Ullman. Formal Langua gesandtheir
Relation toAutomata .Addison-W esley,Reading, MA, 1969.
[19] L.Ilie,R.Solis-Oba, andS.Yu.Reducing thesizeofNFAsby
using equivalences andpreorders. InCPM ,volume 3537 of
LNCS .Springer -Verlag, 2005.
[20] B.Korel, G.Koutsogiannakis, andL.H.Tahat. Model-based
testprioritization heuristic methods andtheir evaluation. In
A-MOST ’07: Proceedings ofthe3rdinternational workshop
onAdvances inmodel-based testing ,pages 34–43, USA,2007. ACM.
[21] B.Korel, I.Singh, L.Tahat, andB.Vaysburg.Slicing ofstate
based models. InIEEE International Confer ence onSoftwar e
Maintenance (ICSM’03) ,pages 34–43, LosAlamitos,
California, USA, Sept. 2003. IEEE Computer Society Press.
[22] B.Korell. Privatecommunication, 2009.
[23] S.Labbé andJ.-P.Gallois. Slicing communicating automata
speciﬁcations: polynomial algorithms formodel reduction.
Formal Aspects ofComputing ,20(6):563–595, 2008.
[24] S.V.Langenho veandA.Hooge wijs. SVtL:System
veriﬁcation through logic toolsupport forverifying sliced
hierarchical statecharts. InLectur eNotes inComputer
Science ,Recent Trends inAlgebraicDevelopment Techniques ,
pages 142–155, Berlin, 2007. Springer .
[25] D.Lee, K. K. Ramakrishnan, W.M.Moh, andU.Shankar .
Protocol speciﬁcation using parameterized communicating
extended ﬁnite state machines -acase study oftheATMABR
ratecontrol scheme. InProceedings oftheInternational
Confer ence onNetwork Protocols (ICNP ’96),page 208,
Washington, DC, USA, 1996. IEEE Computer Society .
[26] T.Maibaum, P.Kan, andK.Lano. Systematising reacti ve
system design. InAlgebraicMethodolo gyandSoftwar e
Technolo gy,volume 1548 ofLNCS .Springer -Verlag, 1999.
[27] W.E.McUmber andB.H.C.Cheng. Ageneral frame work
forformalizing UML with formal languages. InICSE ’01:
Proceedings ofthe23rdInternational Confer ence onSoftwar e
Engineering ,pages 433–442, Washington, DC, USA, 2001.
IEEE Computer Society .
[28] OMG. OMG uniﬁed modeling language speciﬁcation 2.2,
Feb.2009.
http://www.omg.org/cgi-bin/doc?formal/2009-02-02 .
[29] H. A. Partsch. TheSpeciﬁcation andTransformation of
Programs: A Formal Appr oachtoSoftwar eDevelopment .
Springer ,1990.
[30] A.Sanchez, E.Aranda-Bricaire, F.Jaimes, E.Hernandez, and
A.Nava.Synthesis ofproduct-dri vencoordination controllers
foraclass ofdiscrete-e ventmanuf acturing systems. Robotics
andComputer -Integrated Manufacturing ,26(4), August 2010.
[31] F.Strobl andA.Wisspeintner .Speciﬁcation ofanelevator
control system –anautofocus case study .Technical Report
TUM-I9906, Technische Universität München, 1999.
[32] F.Tip.Asurveyofprogram slicing techniques. Technical
Report CS-R9438, Centrum voorWiskunde enInformatica,
Amsterdam, 1994.
[33] J.Wang, W.Dong, andZ.-C. Qi.Slicing hierarchical automata
formodel checking UML statecharts. InProceedings ofthe
4thInternational Confer ence onFormal Engineering Methods
(ICFEM) ,pages 435–446, UK, 2002. Springer -Verlag.
[34] M.Weiser.Program slicing. In5thInternational Confer ence
onSoftwar eEngineering ,pages 439–449, SanDiego,CA,
Mar.1981.
[35] R.Y.Zaghal andJ.I.Khan. EFSM/SDL modeling ofthe
original TCP standard (RFC793) andthecongestion control
mechanism ofTCP Reno. Technical Report TR2005-07-22,
Internetw orking andMedia Communications Research
Laboratories, Department ofComputer Science, KentState
University ,2005.