Towards Reusing Hints from Past Fixes
An Exploratory Study on Thousands of Real Samples
Hao Zhong
Department of Computer Science and Engineering
Shanghai Jiao Tong University, China
zhonghao@sjtu.edu.cnNa Meng
Department of Computer Science
Virginia Tech, USA
nm8247@cs.vt.edu
ABSTRACT
Researchers have recently proposed various automatic program re-
pair (APR) approaches that reuse past ﬁxes to ﬁx new bugs. Howev-er, some fundamental questions, such as how new ﬁxes overlap withold ﬁxes, have not been investigated. Intuitively, the overlap be-tween old and new ﬁxes decides how APR approaches can constructnew ﬁxes with old ones. Based on this intuition, we systematical-ly designed six overlap metrics, and performed an empirical study
on 5,735 bug ﬁxes to investigate the usefulness of past ﬁxes when
composing new ﬁxes. For each bug ﬁx, we created delta depen-
dency graphs (i.e., program dependency graphs for code changes),
and identiﬁed how bug ﬁxes overlapped with each other in terms of
the content, code structure, and identiﬁer names of ﬁxes . Our re-
sults show that if an APR approach composes new ﬁxes by fully or
partially reusing the content of past ﬁxes, only 2.1% and 3.2% newﬁxes can be created from single or multiple past ﬁxes in the sameproject, compared with 0.9% and 1.2% ﬁxes created from past ﬁxesacross projects. However, if an APR approach composes new ﬁxes
by fully or partially reusing the code structure of past ﬁxes, up to
41.3% and 29.7% new ﬁxes can be created.
ACM Reference format:
Hao Zhong and Na Meng. 2018. Towards Reusing Hints from Past Fixes.
InProceedings of ICSE ’18: 40th International Conference on Software En-
gineering , Gothenburg, Sweden, May 27-June 3, 2018 (ICSE ’18), 1 pages.
DOI: 10.1145/3180155.3182550
1 INTRODUCTION
Due to the usage of version control systems, many bug ﬁxes have
accumulated over the years. From past bug ﬁxes, researchers [1–3] proposed some automatic program repair (APR) approaches thatreused past ﬁxes to ﬁx new bugs. Although these approaches showpromising results, they are limited in the following two aspects: (1)existing empirical studies are based on manual or simple automatic
analysis; and (2) some hypotheses of APR approaches are not fully
explored. In this paper, by comparing each ﬁx’s delta dependencygraphs (DDGs) produced by G
RAPA [5], we performed a compre-
hensive empirical study on 5,735 bug ﬁxes in four popular projects.Our comparison checks for six types of overlap between bug ﬁxesi.e., a bug ﬁx may fully or partially overlap with one or multiple
Permission to make digital or hard copies of part or all of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
for proﬁt or commercial advantage and that copies bear this notice and the full citationon the ﬁrst page. Copyrights for third-party components of this work must be honored.
For all other uses, contact the owner/author(s).
ICSE ’18, Gothenburg, Sweden
© 2018 Copyright held by the owner/author(s). 978-1-4503-5638-1/18/05. . . $15.00
DOI: 10.1145/3180155.3182550ﬁxes in terms of code content, syntactic structures, and identiﬁer
names. Our major ﬁndings are as follows:
•Extent of constructing ﬁxes from past ﬁxes. Bug ﬁxes
have more overlap in syntactic structures than code contentand identiﬁer names. The syntactic structures of 41% ﬁxescan be synthesized from the syntactic structures of multi-ple past ﬁxes. A new ﬁx is often relevant to only several
useful past ﬁxes. However, if we require exact matches,
only 3% ﬁxes can be constructed from past ﬁxes, as most
bugs need creative repairs that never appear in past ﬁxes.
•Preparing a repository of past ﬁxes. We consider a bug
ﬁx to be useful, if it is repetitive. If we build the reposi-
tory from ﬁxes of the same project, most ﬁxes are useful,but it can be challenging to extract useful repair actions,since a ﬁx typically has both useful repair actions and use-less repair actions. The usefulness of a repository may not
increase with the number of collected bug ﬁxes. This is
because when a repository contains many past ﬁxes, it canbecome challenging to identify useful ones among the ﬁx-es. It is worthy identifying useful ﬁxes, since an identiﬁedﬁx can be useful to repair many ﬁxes.
•Learning from other projects. From other projects, it
is feasible to learn many code structure changes. Howev-
er, the combination of multiple past ﬁxes does not achieve
as good results as the combination of ﬁxes from the same
projects. Furthermore, as different projects typically have
different client code names, it becomes more challengingto learn how to replace those API elements correctly.
Our journal paper [4] presents more details of the empirical study.
ACKNOWLEDGEMENT
Hao Zhong is sponsored by the 973 grant 2015CB352203, the NS-
FC grant 61572313, and the STCSM grant 15DZ1100305. Na Meng
is sponsored by the grants NSF CCF-1565827 and ONR-N00014-
17-1-2498.
REFERENCES
[1] Dongsun Kim, Jaechang Nam, Jaewoo Song, and Sunghun Kim. 2013. Auto-
matic patch generation learned from human-written patches. In Proc. 35th ICSE.
802–811.
[2] Fan Long and Martin Rinard. 2016. Automatic patch generation by learning
correct code. In Proc. 43rd POPL . 298–312.
[3] Matias Martinez and Martin Monperrus. 2013. Mining software repair models
for reasoning on the search space of automated program ﬁxing. Empirical Soft-
ware Engineering 20, 1 (2013), 176–205.
[4] Hao Zhong and Na Meng. 2018. Towards Reusing Hints from Past Fixes -An Ex-
ploratory Study on Thousands of Real Samples. Empirical Software Engineering
(2018).
[5] Hao Zhong and Xiaoyin Wang. 2017. Boosting complete-code tool for partial
program. In Proc. ASE. 671–681.
8852018 ACM/IEEE 40th International Conference on Software Engineering
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 11:38:44 UTC from IEEE Xplore.  Restrictions apply. 