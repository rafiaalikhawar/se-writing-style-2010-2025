Automated Repair of Mobile Friendly Problems in Web Pages
Sonal Mahajan
University of Southern California, USANegarsadat Abolhassani
University of Southern California, USA
Phil McMinn
University of Sheffield, UKWilliam G. J. Halfond
University of Southern California, USA
ABSTRACT
MobiledeviceshavebecomeaprimarymeansofaccessingtheIn-
ternet.Unfortunately,manywebsitesarenotdesignedtobemobile
friendly.Thisresultsinproblemssuchasunreadabletext,cluttered
navigation, and content overflowing a device’s viewport; all of
which can lead to a frustrating and poor user experience. Existing
techniques are limited in helping developers repair these mobile
friendly problems. To address this limitation of prior work, we de-
signedanovelautomatedapproachforrepairingmobilefriendly
problems in web pages. Our empirical evaluation showed that our
approachwasabletosuccessfullyresolvemobilefriendlyproblems
in95%of theevaluationsubjects.Ina userstudy,participantspre-
ferredourrepairedversionsofthesubjectsandalsoconsideredthe
repaired pages to be more readable than the originals.
CCS CONCEPTS
•Software and its engineering →Search-based software en-
gineering ;
KEYWORDS
Mobile Friendly Problems, automated repair, web apps
ACM Reference Format:
Sonal Mahajan, Negarsadat Abolhassani, Phil McMinn, and William G.
J. Halfond. 2018. Automated Repair of Mobile Friendly Problems in Web
Pages. In Proceedings of ICSE ’18: 40th International Conference on Software
Engineering (ICSE’18). ACM,NewYork,NY,USA,11pages.https://doi.org/
10.1145/3180155.3180262
1 INTRODUCTION
Mobile devices have become one of the most common means of ac-
cessingtheInternet.Infact,recentstudiesshowthatforasignificant
portion of web users, a mobile device is their primary means of ac-
cessing the Internet and interacting with other web-based services,
such as online shopping, news, and communication [ 12,18,19,40].
Unfortunately,manywebsitesarenotdesignedtogracefullyhandleuserswhoareaccessingtheirpagesthroughanon-traditionalsizeddevice,suchasasmartphoneortablet.Theseproblematicsitesmay
exhibitarangeofusabilityissues,suchasunreadabletext,cluttered
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
on the first page. Copyrights for components of this work owned by others than ACMmustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,orrepublish,topostonserversortoredistributetolists,requirespriorspecificpermissionand/ora
fee. Request permissions from permissions@acm.org.
ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden
© 2018 Association for Computing Machinery.
ACM ISBN 978-1-4503-5638-1/18/05 ...$15.00
https://doi.org/10.1145/3180155.3180262navigation, or content that overflows the device’s viewport and
forcestheusertopanandzoomthepageinordertoaccesscontent.
Such usability issues are collectively referred as mobile friendly
problems [4,15] and lead to a frustrating and poor user experience.
Despite the importance of mobile friendly problems, they are
highly prevalent in modern websites — in a recent study over 75%
of users reported problems in accessing websites from their mobile
devices [19]. Over one third of users also said that they abandon
mobileunfriendlywebsitesandfindotherwebsitesthatworkbetter
on mobile devices. This underscores the importance for developers
inensuringthemobilefriendlinessofthewebpagestheydesignand
maintain.Addingtothismotivationisthefactthat,asofApril2015,
Google hasincorporated mobile-friendlinessas part ofits rankingcriteria when returning search results to mobile devices [
17]. This
meansthatunlessawebsiteisdeemedtobemobilefriendly,itis
less likely to be highly ranked in the results returned to users.
Makingwebsitesmobilefriendlyischallengingevenforawell
motivated developer. These challenges arise from the difficulties in
detectingandrepairingmobilefriendlyproblems.Todetectthese
problems,developersmustbeabletoverifyawebpage’sappear-
ance on many different types and sizes of mobile devices. Since thescaleoftestingrequiredforthisisgenerallyquitelarge,developers
often use mobile testing services, such as BrowserStack [ 6] and
SauceLabs [ 39], to determine if there are problems in their sites.
However, even with this information it is difficult for developers toimproveorrepairtheirpages.Thereasonforthisisthattheappear-
anceofwebpagesiscontrolledbycomplexinteractionsbetween
the HTML elements and CSS style properties that define a web
page. This means that to fix a mobile friendly problem, developers
must typically adjust dozens of elements and properties while at
the same time ensuring that these adjustments do not impact other
partsofthepage.Forexample,aseeminglysimplesolution,such
as increasing the font size of text or the margins of clickable ele-
ments, can result in a distorted user interface that is unlikely to be
acceptable to end users or developers.
Existing approaches are limited in helping developers to de-
tect and repair mobile friendly problems. For example, the Mobile
Friendly Test Tools produced by Google [ 15] and Bing [ 4], only
focusonthedetectionofmobilefriendlyproblemsinawebpage.
While these tools may provide hints or suggestions as to how to
repair the pages, the task of performing the repair is still a manual
effort. Developers may also use frameworks, such as Bootstrap
andFoundation,tohelpcreatepagesthatwillbemobilefriendly.
However,theuseofframeworkscannotguaranteetheabsenceof
mobile-friendlyproblems[ 1].Somecommercialwebsitesattempt
toautomatethisprocess(e.g.,[ 5,11,29]),butaregenerallytargeted
for hobbyist pages as they require the transformed website to use
1402018 ACM/IEEE 40th International Conference on Software Engineering
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden Sonal Mahajan, Negarsadat Abolhassani, Phil McMinn, and William G. J. Halfond
one of their preset templates. This leaves developers with a lack of
automated support for repairing mobile friendly problems.
Toaddressthisproblemwedesignedanapproachtoautomati-
callygenerateCSSpatchesthatcanimprovethemobilefriendliness
of a web page. To do this our approach builds graph-based models
of the layout of a web page. It then uses constraints encoded by
thesegraphs tofind patchesthat canimprove mobilefriendliness
while minimizing layout disruption. To efficiently identify the best
patch, our approach leverages unique aspects of the problem do-
maintoquantifymetricsrelatedtolayoutdistortionandparallelize
the computation of the solution. We implemented our approach
in a prototype tool, MFix, and evaluated its effectiveness on the
homepagesof38oftheAlexaTop50mostvisitedwebsites.Theresults showed that our approach could effectively increase the
mobile friendliness ratings of a page, typically by 33%, while mini-
mizing layout distortion. Our approach was also fast, needing less
than 5 minutes, on average, to generate the CSS patch. We also
evaluated our results with a user study, in which participants over-
whelminglypreferredtherepairedversionofthewebsiteforuseon
mobiledevices,andalsoconsideredtherepairedpagetobemore
readablethantheoriginal.Overall,theseresultsareverypositive
and indicate that our approach can help developers to improve the
mobile friendliness of their web pages.
The contributions of our paper are as follows:
(1)AtechniqueforautomaticallygeneratingCSSbasedpatches
to improve the mobile friendliness of a web page
(2)An empirical study on popular websites that shows theapproach’s effectiveness at improving mobile friendliness
scores while maintaining the original pages’ layout.
(3)Auserstudythatshowsthatpagespatchedbyourapproach
arepreferredformobileusageandareratedasmorereadable.
Ourpaperisorganizedasfollows.InSection2,weprovideback-
ground information about typical mobile friendly problems and
solutions.OurapproachispresentedinSection3.Weevaluatedour
approachonpopularwebsitesandconductedauserstudyofthe
results,which aredescribedin Section4. Wediscuss relatedwork
in Section 5, and conclude in Section 6.
2 BACKGROUND
Inthissectionwediscussavarietyofmobilefriendlyproblemsand
currentwaysofaddressingtheminordertobuildamobilefriendly
website.
2.1 Types of Mobile Friendly Problems
Widely used mobile testing tools provided by Google [ 15] and
Bing [4] report mobile friendly problems in five areas:
1. Font sizing: Font sizes optimized for viewing a web page on a
desktopareoftentoosmalltobelegibleonamobiledevice,forcing
users to zoom in to read the text, and then out again to navigate
around the page.
2. Tap target spacing: “Tap targets” are elements on a web page,
such as a hyperlinks, buttons, or input boxes, that a user can tap
or touch to perform actions, such as navigate to another page or
fill and submit a form. If tap targets are located close to each other
on a mobile screen, it can become difficult for a user to physically
selectthedesiredelementwithouthittinganeighboringelementaccidentally.Targetsmayalsobetoosmall,requiringuserstozoom
into the page in order to tap them on their device.
3.Contentsizing: Whenawebpageextendsbeyondthewidthofa
device’sviewport,theuserisrequiredtoscrollhorizontallyorzoomouttoaccesscontent.Horizontalscrollingisparticularlyconsidered
problematic since users are typically used to scrolling vertically
but not horizontally [ 20]. This can lead to important content being
missedbyusers.Thereforeattentiontocontentsizingisparticularly
important on mobile devices, where a smaller screen means thatspace is limited, and the browser may not be resizable to fit the
page.
4.Viewportconfiguration: Usingthe“ meta viewport ”HTMLtag
allows browsers to scale web pages based on the size of a user’s
device. Web pages that do not specify or correctly use the tag may
have content sizing issues, as the browser may simply scale or clip
the content without adjusting for the layout of the page.
5. Flash usage: Flash content is not rendered by most mobile
browsers.ThismakescontentbasedonFlash,suchasanimations
and navigation, inaccessible.
Inourapproach,detailedinSection3,wefocusonaddressing
the first three of these problems. We regard the Flash usage as out
of scope for our approach, since it requires a major content change
in thepage; while theviewport configuration problemis trivial to
address, as it only requires insertion of a missing “ meta viewport ”
tag into the page’s HTML head.
2.2 Current Methods of Addressing Mobile
Friendly Problems
There are a number of ways in which a website can be adjusted
tobecomemoremobilefriendly.Intheearlydaysofmobileweb
browsing,acommonapproachwastosimplybuildanalternative
mobile version of an existing desktop website. Such websites were
typically hosted at a separate URL and delivered to a user when
thewebserverdetectedtheuseofamobiledevice.However,the
cost and effort of building such a separate mobile website was
high. To address this problem, commercial services, such as bMobi-
lized[5]andMobify[ 29],canautomaticallycreateamobilewebsite
from a desktop version using a series of pre-designed templates.
A drawback of these templated websites, however, is that they
fail to capture the distinct design details of the original desktop
version, making them look identical to every other organization
using the service. Broadly speaking, although having a separatemobile website could address mobile friendly concerns, it intro-
ducesaheavymaintenancedebtontheorganizationinensuring
that the mobile website renders and behaves consistently and as
reliably as its regular desktop version, thereby doubling the cost of
an organization’s online presence. Furthermore, having a separate
mobile-onlysitewouldnothelpimprovesearch-enginerankings
of theorganization’smain website,since thetwoversions reside at
different URLs.
To avoid developing and maintaining separate mobile and desk-
topversionsofa website,anorganizationmayemploy responsive
designtechniques. This kind of design makes use of CSS media
queries to dynamically adjust the layout of a page to the screen
size on which it will be displayed. The advantage of this technique
141
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. Automated Repair of Mobile Friendly Problems in Web Pages ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden
overmobilededicatedwebsitesisthattheURLofthewebsitere-
mains the same. However, converting an existing website into a
fullyresponsivewebsiteisanextremelylaborintensivetask,andisbettersuitedforwebsitesthatarebeingbuiltfromscratch.Assuch,
repairing an existing website may be a more cost effective solution
than completely redeveloping the site. Furthermore, although a re-
sponsivedesignislikelytoallowforagoodmobileuserexperience,
itdoesnotnecessarilyprecludethepossibilityofmobilefriendly
problems,sinceadditionalstylesmaybeusedorcertainprovided
styles may be incorrectly overridden [1].
Our approach introduces a novel technique for handling mobile
friendly problems by adjusting specific CSS properties in the page
and producing a repair patch . The repair patch uses CSS media
queries to ensure that the modified CSS is only used for mobile
viewing–thatis,itdoesnotaffectthewebsitewhenviewedona
desktop.
3 APPROACH
The goal of our approach is to automatically generate a patch that
can be applied to the CSS of a web page to improve its mobilefriendliness. Our technique addresses the three specific problem
typesintroducedinSection2,namelyfontsizing,taptargetspacing,
and content sizing for the viewport – factors used by Google to
rate the mobile friendliness of a page.
There is usuallya straightforward fix for theseproblems – sim-
plyincreasethefontsizeusedinthepageandthemarginsofthe
elements within it. The result, however, is one that would likely be
unacceptabletoanend-user:suchchangestendtosignificantlydis-
rupt the layout of a page and require the user to perform excessive
panning and scrolling. The challenge in generating a successful
repair, therefore, involves balancing two objectives – addressing
a page’s mobile friendlinessproblems, while also ensuring anaes-
thetically pleasing and usable layout.
With this in mind, the goal of our technique is to generate a
solution that is as faithful as possible to the page’s original layout.
Thisrequiresfixingmobilefriendlinessproblemswhilemaintaining,
wherepossible,therelativeproportionsandpositioningofelements
thatarerelatedtooneanotheronthepage(forexample,linksin
thenavigationbar,andtheproportionsoffontsforheadingsand
body text in the main content pane).
OurapproachforgeneratingaCSSpatchcanberoughlybroken
down into three distinct phases, segmentation ,localization , and
repair. These are shown in Figure 1. The input to our approach
is the URL of a page under test ( PUT). Typically, this would be a
pagethathasbeenidentifiedasfailingamobilefriendlytest(e.g.,
Google’s[ 15]orBing’s[ 4]),butitmayalsobeapageforwhicha
developerwouldliketosimplyimprovemobilefriendliness.The
segmentation phase identifies elements that form natural visual
groupingsonthepage–referredtoas segments.Thelocalization
phase then identifies the mobile friendly problems in the page, and
relates these to the HTML elements and CSS properties in each
segment. The last phase – repair – seeks to adjust the proportional
sizingofelementswithinsegments,alongwiththerelativepositions
ofeachsegmentandtheelementswithintheminordertogenerateasuitablepatch.Wenowexplaineachofthesethreephasesinmore
detail.3.1 Phase 1: Segmentation
Thefirstphaseanalyzesthestructureofthepagetoidentify seg-
ments–setsofHTMLelementswhosepropertiesshouldbeadjusted
together to maintain the visual consistency of the repaired web
page.Anexampleofasegmentisaseriesoftext-basedlinksina
menu bar where if the font size of any link in the segment is too
small, then all of the links should be adjusted by the same amount
to maintain the links’ visual consistency. The reason our approach
uses segments is that through manual experimentation with pages
that contained mobile friendly problems, we found that once we
identifiedtheoptimalfixvalueforanelement,tomaintainvisual
consistency,thesamevaluewouldalsoneedtobeappliedtoclosely
related elements (i.e., those in the element’s segment). This insight
motivatedtheuseofsegments,anditallowedtheapproachtotreat
many HTML elements as an equivalence class, which also reduced
the complexity of the patch generation process.
To identify the segments in a page, the approach analyzes the
Document Object Model ( DOM)t r e eo ft h e PUT. In informal ex-
periments, we evaluated several well-known page segmentation
analyses,suchasVIPS[ 7],Block-o-matic[ 38],andcorrelationclus-
tering[8].Wechosetouseanautomatedclustering-basedpartition-
ingalgorithmproposedbyRomeroetal.[ 33],asitssegmentation
results more readily conformed to our definition of a segment. We
summarize the algorithm here for completeness. The approachstarts by assigning each leaf element of the
DOMtree to its own
segment. Then, to cluster the elements, the approach iterates over
the segments and uses a cost function to determine when it can
mergeadjacentsegments.Thecostfunctionisbasedonthenumber
of hops in the DOMtree between the lowest common ancestors
of the two segments under consideration. If the number of hopsis below a threshold based on the average depth of leaves in the
DOMtree, then the approach will cluster the adjacent segments.
Thevalueofthisthresholdisdeterminedempirically.Theapproach
continues to iterate over the segments until no further merges are
possible(i.e.,thesegmentsethasreachedafixedpoint).Theoutput
is a set of segments, Segs, where each segment contains a set of
XPathIDsdenotingtheHTMLelementsthathavebeengrouped
together in the segment.
Figure2ashows asimplifiedversionofthesegments thatwere
identifiedforoneofthewebpages,Wiley,usedinourevaluation.
The red overlay rectangles show the visible elements that were
groupedtogetherassegments.Theseincludetheheadercontent,
a left-aligned navigation menu, the content pane, and the page’s
footer.
3.2 Phase 2: Localization
The second phase identifies the parts of the PUTthat must be
targeted to address its mobile friendly problems. The second phase
consists of two steps. In the first step, the approach analyzes the
PUTto identify which segments contain mobile friendly problems.
Then, based on the structure and problem types identified for each
segment, the second step identifies the CSS properties that will
mostlikelyneedtobeadjustedtoresolveeachproblem.Theoutputofthelocalizationphaseisamappingofthepotentiallyproblematic
segments to these properties.
142
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden Sonal Mahajan, Negarsadat Abolhassani, Phil McMinn, and William G. J. Halfond
/g5/g17/g18/g25/g30/g22/g19/g32/g1
/g11/g18/g20/g24/g18/g25/g30/g29/g1/g5/g17/g18/g25/g30/g22/g19/g32/g1
/g9/g28/g26/g15/g23/g18/g24/g14/g30/g22/g16/g1
/g11/g18/g20/g24/g18/g25/g30/g29/g1/g5/g17/g18/g25/g30/g22/g19/g32/g1
/g9/g28/g26/g15/g23/g18/g24/g14/g30/g22/g16/g1
/g2/g11/g11/g1/g9/g28/g26/g27/g18/g28/g30/g22/g18/g29/g1/g2/g26/g24/g27/g31/g30/g18/g1/g2/g14/g25/g17/g22/g17/g14/g30/g18/g1
/g7/g26/g15/g22/g23/g18/g1/g3/g28/g22/g18/g25/g17/g23/g32/g1
/g9/g14/g30/g16/g21/g18/g29/g1/g4/g18/g25/g18/g28/g14/g30/g18/g1/g30/g21/g18/g1
/g7/g26/g15/g22/g23/g18/g1/g3/g28/g22/g18/g25/g17/g23/g32/g1
/g9/g14/g30/g16/g21/g1/g7/g26/g15/g22/g23/g18/g1/g3/g28/g22/g18/g25/g17/g23/g32/g1
/g8/g28/g14/g16/g23/g18/g1/g35/g7/g3/g8/g36/g1/g7/g26/g15/g22/g23/g18/g1
/g3/g28/g22/g18/g25/g17/g23/g22/g25/g18/g29/g29/g1
/g11/g16/g26/g28/g18/g1/g35 /g1/g36/g1/g6/g14/g32/g26/g31/g30/g1
/g17/g22/g29/g30/g26/g28/g30/g22/g26/g25/g1/g35/g6/g36/g1
/g9/g37/g34/g1/g11/g18/g20/g24/g18/g25/g30/g14/g30/g22/g26/g25/g1 /g9/g38/g34/g1/g6/g26/g16/g14/g23/g22/g33/g14/g30/g22/g26/g25/g1 /g9/g39/g34/g1/g10/g18/g27/g14/g22/g28/g1/g9/g14/g20/g18/g1/g31/g25/g17/g18/g28/g1/g30/g18/g29/g30/g1
/g35/g9/g13/g12/g36/g1/g10/g18/g27/g14/g22/g28/g18/g17/g1/g9/g13/g12/g1
Figure 1: Overview of the approach.
(a) PUT with segments highlighted
 (b) PUT with distortions highlighted
 (c) Repaired PUT
Figure 2: Example for demonstrating our approach. Thick red rectangles highlight segments identified by our technique, while dashed red ovals indica te distor-
tions caused by undesirable adjustments to the page’s layout.
3.2.1 Identifying Problematic Segments. Inthefirststepofthe
localization phase, the approach identifies mobile friendly problem
typesinthe PUTandthesubsetofsegmentsthatwilllikelyneed
to be adjusted to address them.
In our approach, mobile friendly problems in the PUTare de-
tected by an Mobile Friendly Oracle (MFO). An MFO is a function
that takes a web page as input and returns a list of mobile friendly
problem types it contains. The MFOcan identify the presence of
mobile friendly problems but cannot identify the faulty HTML ele-
mentsandCSSpropertiesresponsiblefortheobservedproblems.
In the implementation of our approach, we use the Google Mobile-
FriendlyTestTool( GMFT)asourapproach’s MFO.However,any
detector or testingtool may also be usedas an MFO. The basicre-
quirementforan MFOisthatitcanaccuratelyreportwhetherthere
areanytypes of mobile friendly problems present in the page. Ide-
ally,theMFOshouldalsodetail whattypesofproblemsarepresent,
alongwithamappingofeachproblemtothecorrespondingHTMLelements.However,thesearenotstrictrequirements:ourapproach
can correctly function with the assumption that all segments have
allproblemtypes.Thoughthisover-approximationcanincreasetheamount of time needed to compute the best solution in the second
phase.
Since we leverage the GMFTin our implementation, we discuss
how the output of this particular tool is used by our approach.
We expect that other MFOs, such as Bing, could be adapted in a
similar way. Given a PUT, theGMFTreturns, for each problem
type it detects, a reference to the HTML elements that contain
that problem. However, through experimentation with the GMFT,
welearnedthatthelistofHTMLelementsitsuppliesisgenerally
incomplete.Therefore,givenareportedproblemtype,ourapproach
appliesaconservativefilteringtothesegmentstoidentifywhich
ones may be problematic with respect to that problem type. For
example,ifthe GMFTreportsthatthereisaproblemwithfontsizing
inthePUT,thenourtechniqueidentifiesanysegmentthatcontains
a visible text element as potentially problematic. As mentionedabove, this over-approximation may increase the time needed tocompute the best solution, but does not introduce unsoundness
into our approach.
Theoutputofthisstepisasetoftuplesoftheform /angbracketlefts,T/angbracketrightwhere
s∈Segsis a potentially problematic segment and Tis the set of
143
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. Automated Repair of Mobile Friendly Problems in Web Pages ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden
problemtypesassociatedwith s(i.e.,inthedomainof {tap_targets,
font_size,content_size}).ReferringbacktotheexampleinFigure2a,
GMFTidentifiedS3 ashavingtwoproblem types, thetap targets
were too close and the font size was too small, so the approach
would generate a tuple for S3 where Tincludes these two problem
types.
3.2.2 Identifying Problematic CSS Properties. After identifying
the subset of problematic segments, the approach needs to identify
theCSSpropertiesthatmayneedtobeadjustedineachsegment
to make the page mobile friendly. The general intuition of this step
is that each of a segment’s identified problem types generally map
toasetofCSSpropertieswithinthesegment.However,thisstep
is complicated by the fact that HTMLelements may not explicitly
define a CSS property (i.e., they may inherit a style from a par-
entelement)andthatourapproachadjustsCSSpropertiesatthe
segment level instead of the individual element level.
To address these issues, we introduce the concept of a Property
DependenceGraph( PDG),whichforagivensegmentandproblem
type, models the relevant style relationships among its HTML ele-
ments based on CSS inheritance and style dependencies. Formally,
we define a PDGas a directed graph of the form /angbracketleftE,R,M/angbracketright. Here
e∈Eis a node in the graph that corresponds to an HTML ele-
mentinthe PUTthathasanexplicitlydefinedCSSproperty, p∈P,
wherePisthesetofCSSpropertiesrelevantforaproblemtype(e.g.,
font-size for font sizing problems, marginfor tap target issues,
etc.).R⊆E×Eis a set of directed edges, such that for each pair
of elements /angbracketlefte1,e2/angbracketright∈R, there exists a dependency relationship
between e1ande2.Mis a function M:R/mapsto→2Cthat maps each
edgetoasetoftuplesoftheform C:/angbracketleftp,φ/angbracketright,wherep∈Pandφisa
ratio between the values of pfore1ande2. This function is used in
thefollowingrepairphase(Section3.3)toensurethatstylechanges
made to a segment remain consistent across pairs of elements in a
dependency relationship.
Ourapproachdefinesavariantof PDGforeachofthethreeprob-
lem types: the Font PDG(FPDG), the Content Size PDG(CPDG),
and the Tap Target PDG(TPDG). Each of these three graphs has a
specificsetofrelevantCSSproperties( P),adependencyrelation-
ship, and a mapping function ( M). Due to space constraints, we
only present the formal definition of the FPDG, as the other two
graphs are defined in a similar manner.
TheFPDGisconstructedforanysegmentforwhichafontsizing
problemtypehasbeenidentified.Forthisproblemtype,themost
relevant CSS property is clearly font-size , but the line-height ,
width,and heightpropertiesofcertainelementsmayalsoneedto
be adjusted if font sizes are changed. Therefore P={font-size ,
line-height ,width,height}. A dependency relationship exists
betweenany e1,e2∈E,ifandonlyif e1isanancestorof e2inthe
DOMtree ande2has an explicitly defined CSS property, p∈P,
i.e., the value of the property is not inherited from e1. The general
intuitionofusingthisdependencyrelationshipisthatonlynodes
thatexplicitlydefinearelevantpropertymayneedtobeadjusted
andtheremainderofthenodesinbetween e1,e2willsimplyinherit
the style from e1. The ratio, φ, associated with each edge is the
valueofpdefinedfor e1dividedbythevalueof pdefinedfor e2.T o
illustrateconsidertwoHTMLelementsinS3ofFigure2a.Thefirst,
e1,isa/angbracketleftdiv/angbracketrighttagwrappingalloftheelementsinS3with font-size= 13pxandthesecond, e2,isthe/angbracketlefth2/angbracketrightelementcontainingthetext
“Resources"with font-size = 18px .Adependencyrelationship
exists from e1toe2withpasfont-size and the ratio φ= 0.72.
The output of this final step is the set, I, of tuples where each
tupleisoftheform /angbracketlefts,д,a/angbracketrightwheresidentifiesthesegmenttowhich
thetuplecorresponds, дidentifiesacorresponding PDG,andaisan
adjustmentfactorforthe PDGthatisinitiallysetto1.Theadjust-
mentfactorisusedintherepairphaseandservesasamultiplierto the ratios defined for the edges of each
PDG. A tuple is added
toIfor each problem type that was identified as applicable to a
segment. Referring back to the example in Figure 2a, the approach
would generate two tuples for S3, one containing an FPDGand the
other containing an TPDG.
3.3 Phase 3: Repair
Thegoalof thethirdphaseistocomputea repair forthe PUT.The
bestrepairhastobalancetwoobjectives.Thefirstobjectiveisto
identifythesetofchanges–a patch–thatwillmostimprovethe
PUT’smobilefriendliness.Thesecondobjectiveistoidentifythe
set ofchanges that doesnot significantlychange the layoutof the
PUT.
3.3.1 Metrics. A key insight for our approach is that both of
the aforementioned objectives – mobile friendliness and layout
distortion–canbequantified.Forthefirstobjective,itistypicalformobilefriendlytesttoolstoassignanumericscoretoapage,where
thisscorerepresentsthepage’smobilefriendliness.Forexample,
theGooglePageSpeed InsightsTool( PSIT)assignspagesascorein
therangeof0to100,with100beingaperfectlymobilefriendlypage.
By treating this score as a function, F, that operates on a page, it is
possibletoestablishanorderingonsolutionsandusethatordering
to identify a best solution among a group of solutions. The second
objective can also be quantified as a function, L, that compares
the amount of change between the layout of a page containing a
candidate patch versus the layout of the original page. The amount
ofchangeinalayoutcanbedeterminedbybuildingmodelsthatex-presstherelativevisualpositioningamongandwithinthesegments
of a page. We refer to these models as the Segment Model ( SM)and
Intra-SegmentModel( ISM),respectively.Giventhesetwomodels,
our approach uses graph comparison techniques to quantify the
difference between the models for the original page and a page
with an applied candidate solution.
We now provide a more formal definition of the SMandISM.A
SegmentModel( SM)isdefinedasadirectedcompletegraphwhere
thenodesarethesegmentsidentifiedinthefirstphase(Section3.1)
and the edge labels represent layout relationships between seg-
ments.Todeterminetheedgelabels,theapproachfirstcomputes
the Minimum Bounding Rectangles ( MBRs) of each segment. This
done by finding the maximum and minimum X and Y coordinates
of all of the elements included in the segment, which can be found
byqueryingthe DOMofthepage.Basedonthecoordinatesofeach
pairofMBRs,theapproachdetermineswhichofthefollowingrela-
tionships apply: (1) intersection, (2) containment, or (3) directional
(i.e., above, below, left, right). Each edge in an SMis labeled in this
manner.ReferringtoFigure2a,oneoftherelationshipsidentified
wouldbethatS1isaboveS3andS4.An ISMisthesame,butisbuilt
144
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden Sonal Mahajan, Negarsadat Abolhassani, Phil McMinn, and William G. J. Halfond
foreachsegmentandthenodesaretheHTMLelementswithinthe
segment.
Toquantifythelayoutdifferencesbetweentheoriginalpageand
atransformedpagetowhichacandidatepatchhasbeenapplied,
theapproach computestwo metrics.Thefirst metricis attheseg-
mentlevel.Theapproachsumsthesizeofthesymmetricdifference
betweeneachedge’slabelsinthe SMoftheoriginalpageandthe
SMof the transformed page. Recall that both models are complete
graphs, so a counterpart for each edge exists in the other model.
To illustrate, consider the examples shown in Figures 2a and 2b.
The change to the page has caused segments S3 and S4 to overlap.
Thischangeintherelationshipbetweenthetwosegmentswould
becountedasadifferencebetweenthetwo SMsandincreasethe
amountoflayoutdifference.Thesecondmetricissimilartothefirst
butcomparesthe ISMforeachsegmentintheoriginalandtrans-
formedpage.Theonedifferenceinthecomputationofthemetricisthatthesymmetricdifferenceisonlycomputedfortheintersectionrelationship.Theintuitionbehindthisdifferenceincountingisthat
we consider movement of elements within a segment, except for
intersection, to be an acceptable change to accommodate the goal
of increasing mobile friendliness. Referring back to the example
showninFigure2b,nineintra-segmentintersectionsarecounted
amongtheelementsinsegmentS4asshownbydashedredovals.
Thedifferencesumscalculatedatthesegmentandintra-segment
level are returned as the amount of layout difference.
3.3.2 Computing Candidate Mobile Friendly Patches. Toidentify
the best CSS patch, the approach must find new values for the
potentiallyproblematicproperties,identifiedinthefirstphase,that
make the PUTmobile friendly while also maintaining its layout.
Tostatethismoreformally,given I,theapproachmustidentifya
set of new values for each of the adjustment factors (i.e., a) in each
tuple ofIso that the value of Fis 100 (i.e., the maximum mobile
friendlinessscore)andthevalueof Liszero(i.e.,therearenolayout
differences).
A direct computation of this solution faces two challenges. The
first of these challenges is that an optimal solution that satisfies
bothoftheaboveconditionsmaynotexist.Thiscanhappendue
to constraints in the layout of the PUT. The second challenge is
that, even if such a solution were to exist, it exists in a solution
spacethatgrowsexponentiallybasedonthenumberofelements
and properties that must be considered. Since many of the CSS
properties have a large range of potential values, a direct computa-
tion of the solution would be too expensive to be practical. Both of
thesechallengesmotivatetheuseofanapproximationalgorithm
to identify a repair. Therefore, the approach must find a set of val-
uesthatminimizesthelayoutscorewhilemaximizingthemobile
friendliness score.
Thedesignofourapproximationalgorithmtakesintoaccount
severaluniqueaspectsoftheproblemdomaintogenerateahigh
quality patch in a reasonable amount of time. The first of these
aspectsisthat,throughmanualexperimentation,welearnedthat
goodoroptimalsolutionstypicallyinvolvealargenumberofsmall
changes to many segments. This motivates targeting a solution
spacecomprisedofcandidatesolutionsthatdifferfromtheoriginal
page in many places but by only small amounts. The second of
these aspects is that computing the values of the LandFfunctionsis expensive. The reason for this is that Frequires accessing an
API on the web and Lrequires rendering the pageand computing
layoutinformationforthetwoversionsofthe PUT.Thismotivates
us to avoid algorithms that require sequential processing of Land
F(e.g., simulated annealing or genetic algorithms).
To incorporate these insights, the approximation algorithm first
generatesasetofsize nofcandidatepatches.Togenerateeachcan-
didatepatch,theapproachcreatesacopyof I,calledI/prime,theniterates
overeachtuplein I/primeandwithprobability x,randomlyperturbsthe
valueoftheadjustmentfactor(i.e., a)usingaprocesswedescribein
moredetailinthenextparagraph.Then I/primeisconvertedintoapatch,
R, using the process described in the next section (Section 3.3.3),
and added to the set of candidate patches. This process is repeated
untiltheapproachhasgenerated ncandidatepatches.Theapproach
then computes, in parallel, the values of FandLfor a version of
thePUTwith an applied candidate patch. (Our implementation
uses Amazon Web Services ( AWS) to parallelize this computation.)
Theobjective scorefor thecandidate patchis thencomputed asa
weighted sum of FandL. The candidate patch with the maximum
score, i.e., with the highest value of Fand the lowest value of L,i s
selected as the final solution, Rmax. Figure 2c shows Rmaxapplied
to the example page.
Ourapproachperturbsadjustmentfactorsinsuchawayasto
takeadvantageofourinsightthattheoptimalsolutionsdifferfrom
the original page in many places but by only small amounts. To
represent this insight, we based our perturbation on a Gaussian
distributionaroundtheoriginalvalueinaproperty.Throughexper-
imentation,wefoundthatitwasmosteffectivetohavethemean
(μ) and standard deviation ( σ) values used for the Gaussian dis-
tributionvarybasedonthespecificmobilefriendlyproblemtype
being addressed. For each problem type, the goal was to identify
aμandσthat provided a large enough range to allow sufficient
diversityinthegenerationofcandidatepatches.Foridentifying μ
values,we foundthrough experimentationthat μsetat thevalues
suggested by the GMFT[14] was not effective in generating candi-
datepatchesthatcouldimprovethemobilefriendlinessofthePUT.
Therefore we added an amendment factor to the values suggested
by theGMFTto allow the approach to select a value considered
mobilefriendlywithahighprobability.Thespecificamendment
factors we found the most effective were: +14 for font size, -20 for
content sizing, and 0 for tap target sizing problems. For example, if
theGMFTsuggested value for font size problems was 16px, we set
μat 30px. For each problem type, we then identified a σvalue. The
specific values we determined to be most effective were: σ=1 6f o r
contentsizeproblems, σ=5forfontsizeproblems,and σ=2for
tap target spacing problems.
3.3.3 Generating the Mobile Friendly Patch. Given a set I, the
approachgeneratesarepairpatch, R,andmodifiesthe PUTsothat
Rwillbe applied atruntime. Thegeneral formof Ris aset ofCSS
styledeclarationsthatapplytotheHTMLelementsofeachsegment
inI.Togenerate R,theapproachiteratesoveralltuplesin I.Foreach
tuple,theapproachiteratesovereachnodeofits PDG,startingwith
therootnode,andcomputesanewvaluethatwillbeassignedtotheCSS property represented by the node. The new value for a node iscomputedbymultiplyingthenewvalueassignedtoitspredecessorbytheratio,
φ,definedontheedgewiththepredecessor.Oncenew
145
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. Automated Repair of Mobile Friendly Problems in Web Pages ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden
property values have been computed for all nodes in the PDG, the
approachgeneratesasetoffixes,whereeachfixisrepresentedas
atuple/angbracketlefti,p,v/angbracketright,whereiistheXPathforeachnodeinthe PDGthat
had a property change, pis the changed CSS property, and vis
thenewlycomputedvalue.ThesetuplesaremadeintoCSSstyle
declarationsbyconverting iintoaCSSselectorandthenaddingthe
declarationsof pandvwithintheselector.AllofthegeneratedCSS
style declarations are then wrapped in a CSS media query that will
cause it to be loaded when accessed by a mobile device. In practice
wefoundthatthesizerangespecifiedinourpatch’smediaquery
is applicable to a wide range of mobile devices. However, to allow
developers to generate patches for specific device sizes, we provide
configurable size parameters in the media query.
Referring back to the example, the ratio ( φ) between e1(/angbracketleftdiv/angbracketright
containing all elements in S3) and e2(/angbracketlefth2/angbracketrightcontaining text “Re-
sources") is 0.72. Consider a tuple /angbracketleftS3, font-size, 2 /angbracketrightinI. Thus,
a valuevof 26px is calculated for the predecessor node e1based
on the adjustment factor 2. Accordingly v= 26px * 1/0.72 = 36px
is calculated for e2. Thus, the approach generates two fix tuples:
/angbracketleftdiv, font-size, 26px /angbracketrightand/angbracketlefth2, font-size, 36px /angbracketright.
4 EVALUATION
Toevaluateourapproach,wedesignedexperimentstodetermine
itseffectiveness,runningtime,andthevisualappealofitssolutions.
The specific research questions we considered were:
RQ1:How effective is our approach in repairing mobile friendly
problems in web pages?RQ2:
How long does it take for our approach to generate patches
for the mobile friendly problems in web pages?RQ3:
Howdoesourapproachimpactthevisualappealofwebpages
after applying the suggested CSS repair patches?
4.1 Implementation
WeimplementedourapproachinJavaasaprototypetoolnamed
MFix[21].Foridentifyingthemobilefriendlyproblemsinaweb
page,weusedtheGoogleMobile-FriendlyTestTool( GMFT)[15]
andGoogle PageSpeed InsightsTool( PSIT)[16]APIs.Wealsoused
thePSITfor obtaining the mobile friendliness score (labeled as
“usability”inthe PSITreport).Foridentifyingsegmentsinaweb
page and building the SMandISM, we first built the DOMtree by
renderingthepageinanemulatedmobileChromebrowserv60.0
andextractingrenderinginformation,suchaselement MBRsand
XPath,usingJavascriptandSeleniumWebDriver.Thesegmentation
threshold value determined by the average depth of leaves in a
DOMtreewascappedatfourtoavoidthesituationwhereallofthe
visibleelementsinapagewerewrappedinonelargesegment.This
constant value was determined empirically, and was implemented
asaconfigurableparameterin MFix.Weused jStyleParser for
identifyingexplicitlydefinedCSSpropertiesforHTMLelements
inapageforbuildingthe PDG.Weparallelizedtheevaluationof
candidate solutions using a cloud of 100 Amazon EC2 t2.xlarge
instances pre-installed with Ubuntu 16.04.Table 1: Subjects
ID URL Category Rank #HTML
1 http://aamc.org Health 23 598
2 https://arxiv.org Science 21 3813 http://us.battle.net Kids and teens 2 6154 https://bitcointalk.org Science 25 1302
5 http://blizzard.com Kids and teens 33 313
6 https://boardgamegeek.com Games 31 44747 https://bulbagarden.net Kids and teens 26 1518 http://coinmarketcap.com Science 8 19649 http://correios.com.br/para-voce Society 14 769
10 http://dict.cc Reference 20 63311 https://www.discogs.com Arts 26 5738
12 http://drudgereport.com News 23 779
13 http://www.finalfantasyxiv.com Games 37 6114 http://www.flashscore.com Sports 16 662115 https://www.fragrantica.com Health 35 109116 http://forum.gsmhosting.com/vbb Home 39 261817 http://www.intellicast.com Science 38 139318 https://www.irctc.co.in Regional 34 1031
19 https://www.irs.gov Home 14 569
20 https://www.leo.org Reference 31 99021 http://letour.fr Sports 3 126022 http://lolcounter.com Kids and teens 30 125723 http://www.mmo-champion.com Games 29 190324 http://myway.com Computers 42 13525 https://www.ncbi.nlm.nih.gov Science 2 833
26 http://www.nexusmods.com Games 28 2108
27 http://nvidia.com Games 20 71928 http://rotoworld.com Sports 41 252329 http://sigmaaldrich.com Science 37 14130 http://us.soccerway.com Sports 30 270831 http://www.square-enix.com Games 30 19832 https://travel.state.gov Home 26 440
33 http://www.weather.gov Science 18 1101
34 http://www.bom.gov.au Kids and teens 48 68535 http://www.wiley.com Shopping 14 46036 http://onlinelibrary.wiley.com Business 33 82437 https://www.wowprogress.com Games 46 282838 https://xkcd.com Arts 48 121
4.2 Subjects
For our experiments we used 38 real-world subjects collected from
the top 50 most visited websites across all seventeen categories
trackedbyAlexa[ 3].ThesubjectsarelistedinTable1.Thecolumns
“Category"and“Rank"refertothesourceAlexacategoryandrankof
thesubjectwithinthatcategory,respectively.Thecolumn“#HTML"
referstothetotalnumberofHTMLelementsinasubject,which
we counted by parsing the subject’s DOM for node type “element".
Thisvaluegivesanapproximationforthesizeandcomplexityof
the subject.
We used Alexa as the source of our subjects as the websites
represent popular widely used sites and a mix of different layouts.
From the 651 unique URLs that were identified across the 17 cat-egories, we excluded the websites that passed the
GMFTor had
adultcontent.Eachoftheremaining38subjectswasdownloaded
using the Scrapbook-X Firefox plugin, which downloads an HTML
pageanditssupportingfiles,suchasimages,CSS,andJavascript.
Wethenremovedtheportionsofthesubjectpagesthatmadeactive
internetconnections,suchasforadvertisements,toenablerunning
of the subjects in an offline mode.
4.3 Experiment One
To address RQ1 and RQ2, we ran MFixten times on each of the 38
subjectstomitigatethenon-determinisminherentintheapproxi-
mation algorithm used to find a repair solution.
ForRQ1,weconsideredtwometricstogaugetheeffectiveness
ofourapproach.Forthefirstmetric,weusedthe GMFTtomeasure
howmanyofthesubjectswereconsideredmobilefriendlyafterthe
146
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden Sonal Mahajan, Negarsadat Abolhassani, Phil McMinn, and William G. J. Halfond
patch was applied. For the second metric, we compared the before
and after scores for mobile friendliness and layout distortion for
each subject. For comparing mobile friendliness score, we selected,
for each subject over the ten runs, the repair that represented a
medianscore.Forlayoutdistortion,weselected,foreachsubject
over the ten runs, the best and worst repair, in terms of layout
distortion,thatpassedthemobilefriendlytest.Essentially,foreach
subject,thesewerethetwopatchedpagesthatpassedthemobile
friendlytestandhadthelowest(best)andhighest(worst)amountof
distortion.Forthesubjectsthatdidnotpassthemobilefriendlytest,
we considered the patched pages with the highest mobile friendly
scores to be the “passing” pages.
ForRQ2,wemeasuredtheaveragetotalrunningtimeof MFix
for each of the ten runs for each of the subjects, and also measured
the time spent in the different stages of the approach.
4.3.1 Discussion of results. The results for effectiveness (RQ1)
were that 95% (36 out of 38) of the subjects passed the GMFTafter
applying MFix’ssuggested CSSrepairpatch. Thisshowsthat the
patches generated by MFixwere effective in making the pages
pass the mobile friendly test.
Figure 3 shows the results of comparing the before and after
medianmobilefriendlinessscoresforeachsubject.Foreachsubject,
the dark gray portion shows the score reported by the PSITfor the
patched page and the light gray portion shows the score for theoriginal version. The black horizontal line drawn at 80 indicates
the value above which the GMFTconsiders a page to have passed
the test and to be mobile friendly. On average, MFiximproved the
mobile friendliness score of a subject by 33% Overall, these results
showthatourapproachwasabletoconsistentlyimproveasubject’s
mobile friendliness score.
We also compared the layout distortion score for the best and
worst repairs of each subject. On average, the best repair had a
layout distortion score 55% lower than the worst repair. These
resultsshowthatourapproachwaseffectiveinidentifyingpatches
thatcouldreducetheamountofdistortioninasolutionthatwas
able to pass the mobile friendly test. (For RQ3, we examined, viaauserstudy,ifthisreductionindistortiontranslatesintoamore
attractive page.)
We investigated the results to understand why two subjects
did not pass the GMFT. The patched version of the first subject,
gsmhosting,contained acontent sizingproblem.The originalver-
sion of the page did not contain this problem, which indicates that
theincreasedfontsizeintroducedbythepatchcausedcontentin
thispagetooverflowtheviewportwidth.Forthesecondsubject,
aamc,MFixwasnotabletofullyresolveitscontentsizingproblem
astherequiredvaluewasextremelylargecomparedtotherange
explored by the Gaussian perturbation of the adjustment factor.
Both of these issues suggest further refinements to our techniques
that could be explored in future work, such as making the process
iterative and expanding the initial search space.
Thetotalrunningtime(RQ2) requiredbyourapproachforthe
different subjects ranged from 2 minutes to 10 minutes, averaging
a little less than 5 minutes. As of August 2017, an Amazon EC2
t2.xlarge instance was priced at $0.188 per hour. Thus, with an
averagetimeof5minutesthecostofrunning MFixon100instances
was $1.50 per subject. Figure 4 shows a breakdown of the average/g4/g1/g5/g4/g1/g6/g4/g1/g7/g4/g1/g8/g4/g1/g9/g4/g1/g10/g4/g1/g11/g4/g1/g12/g4/g1/g13/g4/g1/g5/g4/g4/g1
/g5/g1/g6/g1/g7/g1/g8/g1/g9/g1/g10/g1/g11/g1/g12/g1/g13/g1/g5/g4/g1/g5/g5/g1/g5/g6/g1/g5/g7/g1/g5/g8/g1/g5/g9/g1/g5/g10/g1/g5/g11/g1/g5/g12/g1/g5/g13/g1/g6/g4/g1/g6/g5/g1/g6/g6/g1/g6/g7/g1/g6/g8/g1/g6/g9/g1/g6/g10/g1/g6/g11/g1/g6/g12/g1/g6/g13/g1/g7/g4/g1/g7/g5/g1/g7/g6/g1/g7/g7/g1/g7/g8/g1/g7/g9/g1/g7/g10/g1/g7/g11/g1/g7/g12/g1After mobile friendliness score 
Subjects Before mobile friendliness score Difference between before and after scores 
Figure3:Distributionofthemedianmobilefriendlinessscoreacross10runs
timeforthedifferentstagesoftheapproach.Ascanbeseenfrom
thechart,findingtherepairforthemobilefriendlyproblems(phase
3) was the most time consuming, taking up almost 60% of the
totaltime.Amajorportionofthistimewasspentinevaluatingthe
candidatesolutionsbyinvokingthe PSITAPI.Theremainderofthe
timewasspentincalculatinglayoutdistortion,whichisdependent
onthesize ofthepage.The overheadcausedbynetwork delayin
communicatingwiththeAmazoncloudinstanceswasnegligible.
For the API invocation, we implemented a random wait time of 30
to 60 seconds between consecutive calls to avoid retrieving stale
orcachedresults.Identifyingproblematicsegmentswasthenext
most time consuming step as it required invoking the GMFT API.
4.4 Experiment Two
To address RQ3, we conducted a user-based survey to evaluate the
aesthetics and visual appeal of the repaired page. The main intent
ofthestudywastoevaluatetheeffectivenessofthelayoutdistor-
tionmetric, L(Section3.3),inminimizinglayoutdisruptionsand
producingattractivepages.Thegeneralformatofoursurveywas
toaskparticipantstocomparetheoriginalandrepairedversions
of a subset of the subjects. To make the survey length manageable,
we divided the 38 subjects into six different surveys, each with
six or seven subjects. For each subject, the survey presented, in
randomorder,ascreenshotoftheoriginalandrepairedpageswhen
displayed in a frame of the mobile device. The screenshots were
obtained from the output of the GMFT. An example of one such
screenshot is shown in Figure 2c. We asked each human subjectto(1)selectwhichofthetwoversions(originalorrepaired)they
wouldprefertouse ontheirmobiledevice;(2)ratethereadability
of each version of the page on a scale of 1–10, where 1 means low
and10meanshigh;and(3)ratetheattractivenessofthepageona scale of 1–10, where 1 means low and 10 means high. We had
Identifying 
problematic 
segments 
(25%) 
Segmentation 
(1%) 
Identifying 
problematic CS S
properties 
(15%) Finding repair for 
mobile friendly 
problems 
(59%) 
Figure 4: Breakdown of the running time of MFix
147
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. Automated Repair of Mobile Friendly Problems in Web Pages ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden
two variants of the survey, one that used the best repair as the
screenshot of the repaired page and the other one that used the
worst repairas the screenshot ofthe repaired page. Here, thebest
and worst repairs were as defined in Experiment 1.
We used Amazon Mechanical Turk ( AMT) service to conduct
thesurveys. AMTallowsusers(requesters)toanonymouslypost
jobs which it then matches them to anonymous users (workers)
whoarewillingtocompletethosetaskstoearnmoney.Toavoid
workerswhohadatrackrecordofhaphazardlycompletingtasks,
weonlyallowedworkersthathadhighapprovalratingsfortheir
previously completed tasks (over 95%) and had completed more
than 5,000 approved tasks to complete our survey. In general, this
isconsideredafairlyselectivecriteriaforparticipantselectionon
AMT. For each survey, we had 20 anonymous participants, giving
us a total of 240 completed surveys across both variants of the
survey. Each participants was paid $0.65 for completing a survey.
4.4.1 Discussion of results. Based on the analysis of the results
of the first variant of the survey, we found that the users preferred
tousetherepairedversionin26outof38subjects,threesubjects
received equal preference for the original and repaired versions,
and only nine subjects received a preference for using the original
version.Interestingly,userspreferredtousetherepairedversion
evenforthetwosubjectsthatdidnotpassthe GMFT.Forreadability,
all but four subjects were rated as having an improved readability
over the original versions. On average, the readability rating of the
repairedpagesshoweda17%improvementoveroriginalversions
(original = 5.97, repaired = 6.98). This result was also confirmed as
statistically significant using the Wilcoxon signed-rank test with a
p-value=1 .53×10−14<0.05.Usingtheeffectsizemetricbasedon
Vargha-DelaneyAmeasure,readabilityoftherepairedversionwas
observedtobe62%ofthetimebetterthantheoriginalversion.With
regardstoattractiveness,nostatisticalsignificancewasobserved,
implyingthat MFixdidnotdeterioratetheaestheticsofthepagesin
the process of automatically repairing the reported mobile friendly
problems. In fact, overall, our repaired versions were rated slightly
higherthanoriginalversionsforattractiveness(avg.original=6.50,
avg. repaired = 6.67 and median original = 6.02, median repaired =
7.12).
Weinvestigatedtheninesubjectswheretherepairedversionwas
not preferred by the participants. Based on our analysis, we found
two dominant reasons that applied to all of the nine subjects. First,
these subjects all had a fixed sized layout, meaning that the section
and container elements in the pages were assigned absolute size
andlocationvalues.Thiscausedacascadingeffectwithanychange
introduced in the page, such as increasing font sizes or decreasing
width to fit the viewport. The second reason was linked to the first
asthepagesweretextintensive,therebyrequiring MFixtoincrease
font sizes. These results motivate future work in techniques that
can better handle these types of pages.
Overall,theseresultsindicatethat MFixwasveryeffectivein
generating repaired pages that (1) users preferred over the original
version, (2) considered to be more readable, and (3) that did not
suffer in terms of visual aesthetics.
Theresultsforthesecondvariantofthesurveyunderscoredthe
importanceofourlayoutdistortionobjectiveandtheimpactvisualdistortionscanhaveonendusers’perceptionofapage’sattractive-
ness.Theresultsshowedthattheuserspreferredtousetheoriginal,
non-mobile friendly version, in 22 out of 38 subjects and preferred
tousetherepairedversionforonly16subjects.Readabilityshowed
similarresults asthefirst surveyvariant.On average,animprove-
ment of 11% in readability was observed for the repaired pagescompared to the original versions, and was still found to demon-
strate statistical significance (p-value = 7 .54×10−6<0.05). This is
expectedastheenlargedfontsizescanmakethetextveryreadable
intherepairedversionsdespitelayoutdistortions.However,inthissurveyastatisticalsignificance(p-value=2
.20×10−16<0.05)was
observedfortheattractivenessoftheoriginalversionbeingrated
higher than the repaired version. On average, the original version
wasrated6.82(median7.00)andtherepairedversionwasrated5.64
(median5.63).Intermsoftheeffectsizemetric,therepairedversion
wasratedtohaveabetterattractivenessonly38%ofthetime.These
resultsstronglyindicatethatthelayoutdistortionobjectiveplays
an important role in generating patches that make the pages more
attractive to end users.
4.5 Threats to Validity
ExternalValidity :Thefirstpotentialthreatisbiasintheselection
of participants for the user-based study in Experiment two. Toaddress this threat, we used
AMTthat provided us with a large
pool of anonymous participants. We only specified qualification
requirementsfortheparticipantsinourstudy(i.e.,highnumbersof
previouslycompletedtasksandhighapprovalratings,asoutlinedin
Section 4.4) to ensure authentic results. Another potential threat is
intheselectionofsubjectwebpagesforourevaluation.Tomitigate
any bias, we used the home pages of websites drawn from Alexa’s
50 top ranked websites from different categories.
Internal Validity : One potential threat is that the survey used
in the user-based study may not render in full resolution when
viewedonsmallscreendevices,potentiallyimpactingtheresults.
To mitigate this threat, we asked participants to enter the device
they used for answering the survey, so that we could isolate those
results. However, only a small minority of our participants did not
useadesktoporlaptop,andtheresultsfromthefewwhouseda
mobilephoneortablettoanswerthesurveydidnotindicateany
anomalous responses. Another potential threat is the use of GMFT
andPSITinourapproachtodeterminemobilefriendlyproblems
andmobilefriendlinessscore.However,the PSITistheonlypublicly
available tool that reports a mobile friendliness score. Bing only
offersawebinterfacefordetectingmobilefriendlyproblems,unlike
GMFT,whichprovidesanAPI.Furthermore, GMFTandPSITare
stable tools that are used by Google to rank pages in their own
search results.
ConstructValidity : A potentialthreat is thatthe layout distor-
tionobjectiveusedinourapproachquantifiestheaestheticvalue
of a page, which is a subjective aspect of a web page. To address
this threat, we conducted two user-based studies (i.e., Experiment
Two) to qualitatively understand the impact of layout distortion
on the visual appeal of a page. A second potential threat is that
the numbers supplied by participants in response to the readability
andattractivenessratingsthatweaskedthemtoprovidearealso
subjective. To mitigate this threat, we used relativevalues given
148
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden Sonal Mahajan, Negarsadat Abolhassani, Phil McMinn, and William G. J. Halfond
bytheparticipantsforthebeforeandafterrepairversionsforthe
subjects,asopposedtousingtheirabsolutevalues.Thatis,although
twoparticipants maysupply differentnumbers forthe ratingsfor
the same pair of web pages, they will supply higher values for one
of the pages if they believe that readability/attractiveness is better
forthatpage.Athirdpotentialthreatisthatweusedscreenshots
ofthesubjectpagesintheuser-basedstudyasopposedtoallowing
the users to interact with the pages on mobile devices. We selected
this mechanism as we wanted the users to visualize the before and
after repair versions of the pages next to each other to allow for an
easycomparison.Also,wedidnothavecontroloverparticipants’
mobiledevicesandwantedtoavoidvariationsinresultsthatthis
could cause. A fourth potential threat is that the participants have
abiasinselectingtherepairedversionbasedontheorderinwhich
theoriginalandrepairedversionsarepresentedinthesurvey.To
mitigatethisthreat,werandomizedtheorderofthetwoversions
foreach questionofthesurvey. Afinalpotential threatisthatthe
definitionofcorrectrepair usedinourapproachmaybedifferent
fromdeveloperintent.However,thisthreatismitigatedbytheuser
study results discussed in RQ3, which show that the repairs gener-
ated byMFixwere considered visually appealing and preferred by
the participants.
5 RELATED WORK
Therehavebeenapproachesintheliteraturethatattempttofixpre-
sentation issues in a web page, but none of these attempt to repair
mobilefriendlyproblems.TheXFix[ 22,23]technique,forexample,
repairslayout Cross Browser Issues ( XBIs)— presentation failures
arisingfromtheinconsistenciesintherenderingofawebsiteacross
differentbrowsers.Inthisdomain,the“correct”presentationofthe
page is available through one of the browsers, the layout of which
must be mimicked in another. Mobile friendly problems entail adifferent approach, in which the presentation of a page must be
changed to correct a series of identified issues. There is no correct
referencerenderingavailabletotherepairprocess,whichmustalso
maintain as much of the original aesthetics of the page as possible.
Thelatterconstraintmotivatestheuseofthesegmentmodelinthis
paper’sapproach(Section3),whichenablescertainpropertiesof
relatedHTMLelementstobeadjustedinproportiontooneanother.Elsewhere,Cassius[
32],proposesaframeworkbasedonautomated
reasoning for debugging and repairing faulty CSS. However, thetechnique assumes as input the faulty source lines in CSS files,and a set of page layout examples that the technique can use tosynthesize repair. These are unavailable in the problem domainof mobile-friendly issues, however, where the only informationavailable is the types of mobile friendly problems that exist in a
page.Meanwhile,PhpRepair[ 37]andPhpSync[ 31]detectandre-
pair HTML syntax problems in web applications. Also, Wang et
al.[45]presentatechniquethatusesstaticanddynamicanalysis
to repair web applications by propagating a given presentation fix
to the server side source code. However, none of these techniques
specifically address mobile friendly problems and would be unable
to provide suitable repairs for them.
Other approaches circumvent mobile friendly problems by pre-
senting alternative versions of a desktop website, rather than byissuingrepairs.Forexample,commercialservicessuchasbMobi-
lized[5],WompMobile[ 46],Mobilifyit[ 30],Duda[11],andMob-
ify[29],canconvertagivendesktopwebsitetoamobilefriendly
versionusingpre-designedtemplates.Althoughhelpful,thesolu-
tions are not appropriate in all situations. Firstly, the templates are
unlikely to capture the carefully crafted layout and graphics de-
signedforthedesktopversions,possiblyunderminingthebranding
efforts a company is trying to achieve. Our approach avoids these
limitationsbymaintainingaclosesimilaritytotheoriginalversion.
Second,theoutputrepresentsaseparatemobilefriendlywebsite
with a new URL, requiring the development team to maintain two
websites.Incontrast,ourapproachgeneratesaCSSmediaquery
patch that is added to the existing CSS of the original website and
that will only be triggered if the page is requested from a device
with a smaller screen size. Alternatively, modern browsers, such as
Chrome [ 10], Safari [36], and Firefox [ 13], provide a “reader” mode
intendedforeasyclutter-freeviewingofwebpagesonmobilede-
vices by presenting its text only and stripping out layout and page
styling. The primary purpose of this mode, however, is to allow for
easierreadingofapage’sprimarycontent,ratherthantoaddress
mobile friendly problems.
Techniquesfromtheresearchcommunitytargetvariouspartsof
thedetectionandlocalizationprocessforvarioustypesofUIrelated
problems in web apps, such as XBIs[9,34,34,35], presentation
failures[24,25,25–28,41],internationalization[ 2],responsiveweb
pageproblems[ 42,43],andneed-to-translatestrings[ 44].However,
the problems detected by these approaches do not overlap with
mobile friendly problems and their solutions are too specific to
generalize to this broader domain.
6 CONCLUSION AND FUTURE WORK
Inthispaper,weintroducedanapproachfortheautomatedrepairofmobilefriendlyproblemsinwebpages.Ourapproachfirstsegments
the page into elements forming natural visual groupings. It then
builds graph-based models of the segments and layout of the page
andusestheconstraintsrepresentedbythesegraphstocompute
a repair that can improve mobile friendliness while minimizinglayoutdisruption.Intheevaluation,wefoundthatourapproach
was effectivein resolvingmobile friendly problemsfor 95%of the
subjectsandrequiredonlyanaverageoffiveminutespersubject.
In a user study, the participants overwhelmingly preferred the
repaired version of the website for use on mobile devices and also
consideredtherepairedpagetobesignificantlymorereadablethantheoriginal.Overall,theseresultsareverypositiveandindicatethatourapproachcanhelpdeveloperstoimprovethemobilefriendliness
of their web pages.
One possible direction of future work is to extend our approach
to handle complex transformations, such as converting navigation
links to dropdown menus. This would pose new research chal-
lenges, such as analysis to identify which lists of hyperlinks could
be grouped into a drop down menu, a refactoring to carry out this
change, and a method to quantify the change’s impact.
ACKNOWLEDGMENTS
ThisworkwassupportedbyU.S.NationalScienceFoundationgrant
CCF-1528163.
149
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. Automated Repair of Mobile Friendly Problems in Web Pages ICSE ’18, May 27-June 3, 2018, Gothenburg, Sweden
REFERENCES
[1]StackOverflow Search — Mobile Friendly Problems with Bootstrap. Retrieved
Aug2017fromhttps://stackoverflow.com/search?q=bootstrap+mobile+problem
[2]AbdulmajeedAlameer,SonalMahajan,andWilliamG.J.Halfond.2016. Detecting
andLocalizingInternationalizationPresentationFailuresinWebApplications.InProceedingofthe9thIEEEInternationalConferenceonSoftwareTesting,Verification,
and Validation (ICST) .
[3]Alexa. 2017. Alexa Top 50 Websites by Category. Retrieved Aug 2017 from
https://www.alexa.com/topsites/category
[4]Bing. 2017. Bing Mobile Friendly Test Tool. Retrieved Aug 2017 from https:
//www.bing.com/webmaster/tools/mobile-friendliness
[5]bMobilized.2017.bMobilizedWebsite.RetrievedAug2017fromhttp://bmobilized.
com/
[6]Browserstack.2017. BrowserStackforTestingMobileWebsites. RetrievedAug
2017 from https://www.browserstack.com/
[7]DengCai,ShipengYu,Ji-RongWen,andWei-YingMa.2003. VIPS:aVision-based
Page Segmentation Algorithm . Technical Report.
[8]Deepayan Chakrabarti, Ravi Kumar, and Kunal Punera. 2008. A Graph-theoretic
Approach to Webpage Segmentation. In Proceedings of the 17th International
Conference on World Wide Web (WWW ’08) .
[9]Shauvik Roy Choudhary, Mukul R. Prasad, and Alessandro Orso. 2012. Cross-
Check:CombiningCrawlingandDifferencingtoBetterDetectCross-browser
IncompatibilitiesinWebApplications.In ProceedingsoftheIEEEFifthInterna-
tional Conference on Software Testing, Verification and Validation (ICST) . IEEE
Computer Society, Washington, DC, USA, 171–180.
[10]Chrome.2017. ChromeReaderMode. RetrievedAug2017fromhttps://github.
com/chromium/dom-distiller
[11]Duda.2017. DudaWebsite. RetrievedAug2017fromhttps://www.dudamobile.
com/
[12]eMarketer. 2017. Estimates for Digital Users. Re-trieved Aug 2017 from https://www.emarketer.com/Article/
eMarketer-Releases-Updated-Estimates-US-Digital-Users/1015275
[13]Firefox. 2017. Firefox Reader Mode. Retrieved Aug 2017 from https://support.
mozilla.org/en-US/kb/firefox-reader-view-clutter-free-web-pages
[14]Google. 2017. Google Mobile Friendly Problem Types. Retrieved Aug 2017 from
https://support.google.com/webmasters/answer/6352293
[15]Google. 2017. Google Mobile Friendly Test Tool. Retrieved Aug 2017 from
https://search.google.com/test/mobile-friendly
[16]Google.2017. GooglePageS peedInsightsTo ol. Retrieved Aug 2017fromhttps:
//developers.google .com/speed/pagespeed/insights/
[17]Google.2017. GoogleSearchRankingbasedonMobileFriendliness. Retrieved
Aug 2017 from https://support.google.com/adsense/answer/6196932?hl=en
[18]Google.2017. GoogleStudyforMobileUsage. RetrievedAug2017fromhttps:
//developers.google.com/search/mobile-sites/
[19]Google. 2018. Consumer Study. Retrieved Feb 2018 from https://www.
consumerbarometer.com/en/insights/?countryCode=US
[20]Google.2018. ContentSizing. RetrievedFeb2018fromhttps://developers.google.
com/web/fundamentals/design-and-ux/responsive/
[21]Sonal Mahajan. 2017. MFixProject. Retrieved Aug 2017 from https://github.
com/USC-SQL/mfix
[22]Sonal Mahajan, Abdulmajeed Alameer, Phil McMinn, and William G.J. Halfond.
2017. Automated Repair of Layout Cross Browser Issues using Search-Based
Techniques.In Proceedingsofthe26thInternationalSymposiumonSoftwareTesting
and Analysis (ISSTA) .
[23]Sonal Mahajan, Abdulmajeed Alameer, Phil McMinn, and William G.J. Halfond.
2017. XFix: Automated Tool for Repair of Layout Cross Browser Issues. In
Proceedings of the 26th International Symposium on Software Testing and Analysis
(ISSTA) – Tool Track .
[24]SonalMahajanandWilliamG.J.Halfond.2014. FindingHTMLPresentationFail-
ures Using ImageComparison Techniques. In Proceedings of the29th IEEE/ACM
InternationalConferenceonAutomatedSoftwareEngineering(ASE)–NewIdeas
track.
[25]SonalMahajanandWilliamG.J.Halfond.2015. DetectionandLocalizationof
HTMLPresentationFailuresUsingComputerVision-BasedTechniques.In Pro-
ceedings of the 8th IEEE International Conference on Software Testing, Verificationand Validation (ICST) .
[26]Sonal Mahajan and William G. J. Halfond. 2015. WebSee: A Tool for Debug-ging HTML Presentation Failures. In Proceedings of the 8th IEEE International
Conference on Software Testing, Verification and Validation (ICST) – Tool track .
[27]Sonal Mahajan, Bailan Li, Pooyan Behnamghader, and William G. J. Halfond.2016. Using Visual Symptoms for Debugging Presentation Failures in Web
Applications. In Proceedings of the9th IEEE International Conference onSoftware
Testing, Verification and Validation (ICST) .
[28]Sonal Mahajan, Bailan Li, and William G. J. Halfond. 2014. Root Cause Analysis
for HTML Presentation Failures Using Search-based Techniques. In Proceedings
of the 7th International Workshop on Search-Based Software Testing (SBST) .
[29]Mobify.2017.MobifyWebsite.RetrievedAug2017fromhttps://www.mobify.com/
[30]Mobilifyit. 2017. Mobilifyit Website. Retrieved Aug 2017 from http://www.
mobilifyit.com/
[31]HungVietNguyen,HoanAnhNguyen,TungThanhNguyen,andTienN.Nguyen.
2011. Auto-locating and Fix-propagating for HTML Validation Errors to PHP
Server-side Code. In Proceedings of the 2011 26th IEEE/ACM International Confer-
enceonAutomatedSoftwareEngineering(ASE) .IEEEComputerSociety,Washing-
ton, DC, USA, 13–22.
[32]PavelPanchekhaand EminaTorlak.2016. AutomatedReasoningfor WebPage
Layout.In ProceedingsoftheACMSIGPLANInternationalConferenceonObject-
Oriented Programming, Systems, Languages, and Applications (OOPSLA) .
[33]RichardRomeroandAdamBerger.2004. AutomaticPartitioningofWebPagesUs-
ingClustering.In ProceedingsofMobileHuman-ComputerInteraction-MobileHCI
2004: 6th International Symposium .
[34]Shauvik Roy Choudhary, Mukul R. Prasad, and Alessandro Orso. 2013. X-PERT:
Accurate Identification of Cross-browser Issues in Web Applications. In Proceed-
ingsofthe2013InternationalConferenceonSoftwareEngineering(ICSE) .702–711.
[35]Shauvik Roy Choudhary, Husayn Versee, and Alessandro Orso. 2010. WEBD-
IFF:AutomatedIdentificationofCross-browserIssuesinWebApplications.In
Proceedings of the IEEE International Conference on Software Maintenance (ICSM) .
1–10.
[36]Safari. 2017. Safari Reader Mode. Retrieved Aug 2017 from https://en.wikipedia.
org/wiki/Safari_(web_browser)
[37]HesamSamimi, MaxSchäfer,ShayArtzi, ToddMillstein, FrankTip, andLaurie
Hendren. 2012. Automated Repair of HTML Generation Errors in PHP Ap-plications Using String Constraint Solving. In Proceedings of the International
Conference on Software Engineering (ICSE) . 277–287.
[38]AndrÃľsSanojaandStÃľphaneGanÃğarski.2014. Block-o-Matic:Awebpage
segmentation framework. In Proceedings of the International Conference on Multi-
media Computing and Systems (ICMCS) .
[39]SauceLabs. 2017. SauceLabs for Testing Mobile Websites. Retrieved Aug 2017
from https://saucelabs.com/
[40]Statcounter. 2017. Mobile Market Share. Retrieved Aug 2017 fromhttp://gs.statcounter.com/platform-market-share/desktop-mobile/worldwide/
#monthly-201407-201707
[41]Michael Tamm. 2009. Fighting layout bugs. https://code.google.com/p/
fighting-layout-bugs/.
[42]Thomas Walsh, Gregory Kapfhammer, and Phil McMinn. 2017. Automated
LayoutFailureDetectionforResponsiveWebPageswithoutanExplicitOracle.In
Proceedings of the 26th International Symposium on Software Testing and Analysis
(ISSTA).
[43]Thomas A. Walsh, Phil McMinn, and Gregory M. Kapfhammer. 2015. Automatic
Detection of Potential Layout Faults Following Changes to Responsive WebPages. In International Conference on Automated Software Engineering (ASE) .
ACM, 709–714.
[44]Xiaoyin Wang, Lu Zhang, Tao Xie, Hong Mei, and Jiasu Sun. 2010. Locating
Need-to-TranslateConstantStringsinWebApplications.In Proceedingsofthe
Eighteenth ACM SIGSOFT InternationalSymposium on Foundations ofSoftware
Engineering (FSE ’10) .
[45]XiaoyinWang,LuZhang,TaoXie,YingfeiXiong,andHongMei.2012. Automat-
ingPresentationChangesinDynamicWebApplicationsviaCollaborativeHybrid
Analysis.In ProceedingsoftheACMSIGSOFT20thInternationalSymposiumonthe
FoundationsofSoftwareEngineering(FSE) .ACM,NewYork,NY,USA,16:1–16:11.
[46]WompMobile. 2017. WompMobile Website. Retrieved Aug 2017 from http:
//www.wompmobile.com/
150
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 10:50:07 UTC from IEEE Xplore.  Restrictions apply. 