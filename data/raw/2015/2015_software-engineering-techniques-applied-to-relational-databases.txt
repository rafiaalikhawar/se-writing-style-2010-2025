Software Engineering Techniques
Applied to Relational Databases
Julien Delplanque
julien.delplanque@inria.fr
Université de Lille, CRIStAL, CNRS, UMR 9189
RMoD Team, Inria Lille Nord Europe
Lille, France
ABSTRACT
Relational databases play a central role in software systems. As
any software artefact they are subject to software engineeringrelated problems. That apply even more when these databases
hold behaviourin theform ofstored functions, triggers,etc... The
purposeofthisarticleistopresentaresearchplantohandlethis
problematic.
CCS CONCEPTS
•Softwareanditsengineering →Softwarereverseengineer-
ing;
KEYWORDS
relational databases, software engineering, reengineering
ACM Reference Format:
JulienDelplanque.2018.SoftwareEngineeringTechniquesAppliedtoRe-
lationalDatabases.In Proceedings of the 2018 33rd ACM/IEEE International
Conference on Automated Software Engineering (ASE ’18), September 3–
7, 2018, Montpellier, France. ACM, New York, NY, USA, 4pages.https:
//doi.org/10.1145/3238147.3241534
1 MOTIVATIONS
Problems related to software engineering appear during relational
database (DB) development and maintenance. Those problems are
not only related to tables and columns. Indeed, in modern RDBMS,
there is a large variety of entity types usable in databases. For
example, stored functions allow to store behaviour in the database.
Triggers can be used to perform actions when a specific event
occursonatable(e.g. afterarowisinserted).Rulesallowtomodify
a query dynamically before it is executed on a table. Foreign tables
canbeusedtoimportdatafromoutsidethedatabaseandeventually
from a source that is not a relational database.
The usage of these entities, while providing great capabilities to
the database architect (DBA), come with more difficulties to main-
tainandmakeevolvethedatabase.Toillustratethosedifficulties,
three scenarios are developped. Then, challenges opened by those
scenarios are detailed.
Publication rights licensed to ACM. ACM acknowledges that this contribution was
authoredor co-authoredbyanemployee, contractororaffiliateof anationalgovern-
ment.Assuch,theGovernmentretainsanonexclusive,royalty-freerighttopublishor
reproduce this article, or to allow others to do so, for Government purposes only.
ASE ’18, September 3–7, 2018, Montpellier, France
© 2018 Copyright held by the owner/author(s). Publication rights licensed to ACM.
ACM ISBN 978-1-4503-5937-5/18/09...$15.00
https://doi.org/10.1145/3238147.32415341.1 Scenarios
The three following scenarios illustrate problems a DBA may have
while maintaining and making evolve a database.
1.1.1 Changing Database’s Entities. The database is evolving to
meetnewrequirementsoftherealworld.Thisevolutionismadeof
a succession of changes applied by the DBA. Entities have relation-
shipsbetweeneachotherswhichimplydependencies.Managing
these dependencies and predicting the effect of a modification can
be difficult. The following example illustrates this difficulty.
Notably, historizing a table Tcan be achieved using a trigger
and a second table Hstoring historized rows. The columns of H
will be the same as those of Twith two additional columns: one
storing the version of each row (which can be the date and time
representing the last moment the row held those data in T) and
another referencing the historized row. Let’s take a concrete ex-
ampletoillustratethispattern.Figure 1showsa“BlogPost”table
whichcontainsdataaboutblogposts:its idwhichhasaprimary
key constraint, its titlestored as a VARCHAR on 256 characters
and its content stored using the TEXTdata type. A second ta-
ble “BlogPostHistory” is used to backup the rows of “BlogPost”
table.Thistablehas thesamecolumnsas“BlogPost”with twoad-
ditionalcolumns: when_historized holdingthedateandtimeof
eachbackupand row_idreferencingthemodifiedrow.Thebackup
process is handled by a trigger which listens to UPDATEevent on
“BlogPost”tableand,beforeperformingtheupdate,insertsanew
rowin“BlogPostHistory”containingtheoldvaluesoftherowto
update.
BlogPost
id: INTEGER
title: VARCHAR(256)
content: TEXTBlogPostHistory
id: INTEGER
title: VARCHAR(256)
content: TEXT
when_historized: DATEANDTIME
row_id: INTEGER REFERENCES BlogPost(id)
UPDATE
QueryTrigger backup the old 
row in BlogPostHistory  
before¬UPDATE query 
execution  
Figure 1: Illustration of row historization using a trigger.
In this configuration, there is a hidden dependency between the
types of “BlogPost” columns and the types of “BlogPostHistory”
columns.Indeed,eachcolumnthat“BlogPostHistory”backupmust
have its type in sync with the corresponding column in “BlogPost”.
Nevertheless,thisdependencyisnotexplicit.Itispossibletomodify
the type of a column of “BlogPost” (let’s say, changing the typeof
titlecolumn to VARCHAR(512) ) without being notified that
the typedependency is nowbroken. Thus, whenthe next UPDATE
query is executed, an exception could be raised if the title length is
948
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 14:10:52 UTC from IEEE Xplore.  Restrictions apply. ASE ’18, September 3–7, 2018, Montpellier, France Julien Delplanque
greater than 256 and the query rejected by the database (behaviour
observed on PostgreSQL 9.6).
This example shows how hard to predict the side effect of a
change can be. Tools are needed to help DBA in this task.
1.1.2 Migrating from a DBMS Version to Another. DBMS (e.g.
PostgreSQL, MySQL or Oracle) are constantly evolving and new
versionsare regularlyreleased tointroducenew featuresor tofix
bugs. In theory, the new version of a DBMS should be backward
compatible with older versions. In practice, it may happen that the
behaviour or name of an instruction has been changed from one
version to the next. Upgrade migration patches are rarely provided
due to the risk of breaking a database and all the applications that
relyonit.IncaseofopensourceDBMSlikePostgreSQL,newre-
leases only come with a textual change log. The task of DB schema
migrationislefttotheDBA.Onemustidentifywhatimpactsthe
changes will have on a schema, and correct it accordingly. Figure 2
illustratesthisprocessmadeoftwosteps:1.UpdatingtheDBMS
(gray part of the figure, achieved by DBMS’ maintainers), and 2.
Correcting databases using features modified by the DBMS up-
datesaccordinglytoallowthemigration(whitepartofthefigure,
achieved by maintainer(s) of each DB using the DBMS).
DBMS v1
DB1
DB2
DB3DBMS v2
DB1
DB2
DB3DB2 migration
DB3 migrationDB1 migration
DBMS  
update
Figure2:IllustrationofthemigrationofaDBMStoanewer
version and its databases migration from one version to an-
other. The gray part of the figure illustrates the DBMS up-
date,achievedbytheDBMS’maintainers.Thewhitepartofthe figure illustrates the update of DBs using the DBMS (ac-tion induced by the DBMS update), achieved by the main-tainer(s) of each DB.
As an example, PostgreSQL documents differences of each new
version of the DBMS in webpages (e.g., for versions after 9.0,
PL/PgSQL variables take preference over a table or view column
withthesamename1).Ifthebehaviourofsourcecodewaschanged
after migration and this source code is not updated accordingly, it
may lead to errors.
1.1.3 MaintainingConsistencybetweenDifferentForksofaData-
base Schema. A DB schema may be used as a basis for multiple
softwareprojects,eachoneadaptingtheschematoitsneeds.For
example,theDBschemausedbyourresearchlaboratorytomanage
members, teams and funding is shared with another laboratory,
togetherwithalltheapplicationsusingtheDB.EachlaboratoryhasitsownDBbasedontheinitialschema.However,theITteamofthe
1https://wiki.postgresql.org/wiki/What’s_new_in_PostgreSQL_9.0other laboratory modifies its version of the database to adapt it to
the specific needs of its users. The laboratory that adopted the tool
also benefits from maintenance to accommodate new features and
bug fixes. Each change in the original DB needs to be ported to the
forkedDBwiththeriskthatbothDBcontinuetoevolveseparately,
thus drifting further apart. Figure 3illustrates this co-evolution
between the two databases.
ForkMerge updates from
original project  Original¬ 
DB schema  
Forked¬  
DB schema  time
Figure 3: Illustration of the co-evolution of a database and
one of its fork.
Echoingchangesmadeontheoriginaldatabasetoitsforkcomes
with more technical constraints. Indeed, in practice, modifications
made on the original databases are not directly applied on its fork.
Awholeyearmayelapsebetweentwochangessetsapplications.
Meanwhile,changesmadeontheoriginaldatabaseshouldsomehow
be stored, waiting to be applied on the fork. The solution found by
the DBA of our laboratory is to store the queries applied to modify
theoriginaldatabaseasplaintextinwhathecalls“apatch”.The
DBA concatenates the scripts used to modify the original database
in this patch file. This process can generate errors in the patch
becauseofapoortoolsupporttoperformthisactivitycombined
with human errors. For example, some queries used to modify the
originaldatabasecanbeomitted.Adifftoolisnotenoughsincethe
forkedDBwentthroughevolutionsthatneedtobemergedwith
those of the original DB.
1.2 Challenges
The previous scenarios open challenges for researches in Software
Engineering. They are opportunities to re-use existing concepts de-
velopped by this research field and to adapt existing techniques on
DBs. Particularly, these challenges are linked to Software Change
Impact Analysis [Arnold 1996] for which two separated challenges
are distinguished: the dependency analysis which analyses the rela-
tionsbetweentheentitiesofadatabaseandthe recommandation
which provides a model allowing to integrate a change required in
the database. The last challenge identified concerns the manage-
ment of embedded behaviour in databases.
1.2.1 DependencyAnalysis. Thethreepreviousscenariossus-
taintheneedfordependencyanalysis.Indeed,whentheDBAwants
to change an entity (scenario 1.1.1), one has to evaluate the impact
of this change. To do that, entities dependent of the changed en-
tity need to be identified. When entities of a database are adapted
to work in a newer DBMS version (scenario 1.1.2), the impact of
changesperformedduringadaptationneedtobeevaluated.Finally,
when an entity is changed in a database having forks for which up-
datesneedtobeprovided(scenario 1.1.3),knowingtheimpactofan
update script is valuable in order to avoid breaking fork databases.
Thedependencyanalysis generatesagraphon whichthetran-
sitiveclosurecanbecomputedtoget,fromaparticularentity,all
theentitiesdependingonit.Thechallengehereistodesignameta-
model gathering all kind of entities available in a database and the
949
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 14:10:52 UTC from IEEE Xplore.  Restrictions apply. Software Engineering Techniques Applied to Relational Databases ASE ’18, September 3–7, 2018, Montpellier, France
links between them. Furthermore, instances of this meta-model
should be easy to query in order to perform dependency analysis.
1.2.2 Recommandations. Knowing which entities are subject
to be impacted when a certain entity is changed is good for the
DBA.Knowinghowthoseentitiesshouldbeadaptedtointegrate
the change is better. This is what this challenge is about. Using the
meta-model described in the previous challenge, it will be possible
to create a recommandations model. This recommandations model
will provide, for a change on a type of entity, 1. conditions that the
entity should fulfill for the change to be applied; and 2. changes
toapplyonthemodelinordertobeabletointegratethechange
triggered by the DBA.
1.2.3 Embedded Behaviour Management. Databases can embed
behaviour under the form of stored function, trigger, CHECKcon-
straints, etc... This behaviour can be executed from a query (e.g.
calling a stored functions from a client of the database) or it can be
triggered by an event happening in the database as illustrated in
Scenario1.1.1.Implementingbehaviourdirectlyinsidethedatabase
has the main advantages to allow clients (eventually written in
differentprogramminglanguages)tousethesamebehaviour.Thus,
modifyingthesourcecodeofthebehaviourlocatedatasingleloca-
tioniseasierthanifitwasspreadindifferentprojectspotentially
using different programming languages. The main drawback when
implementing behaviour inside the database is the lack of tool sup-
port to maintain it. This is mainly due to the fact that analysing
dependenciesbetweenentitiesisnottrivial.Since,forexample,thebodyofstoredfunctionsareconsideredasplaintextinPostgreSQL.
2 PREVIOUS WORK
This section presents previous works achieved in Software Engi-
neering by the author and from the literature.
2.1 Personal Contributions
“CodeCritics applied to databases: Challenges and first results”
[Delplanqueetal .2017](appeared)exploresqualityproblemsap-
pearing during relational databases development. This article in-
troduces DBCritics, a tool to check if a database follows properties
describedby theDBA. Based onproperties definedin thearticle,
an experiment is set up to evaluate the quality of multiple versions
of two database: Wikimedia (the database used by Wikipedia) and
AppSI,ourlaboratory’sdatabase.Thisarticleconcludesthatquality
problems can be found in open-source as well as in proprietary
databases, the number of properties violations evolves with the to-
tal number of entities in the database and on both databases, some
quality problems are fixed but not all of them.
“Software Engineering Issues in RDBMS, a Preliminary Survey”
[Delplanque2017](appeared)analysestheresultsofasurveywhichtargetsDBAs.Thisarticleallowsthemtoreportproblemstheyhave
withviews,storedproceduresandtriggersduringthedevelopment
ofrelationaldatabases.Itconcludes:0-20%ofthedatabaseareusingsuchentities,theseentitiesrepresent0-20%ofthenumberoftables,
7/12peopleusestoredproceduresand3ofthemreportproblems
duringtheimplementation,“programminglanguagecomplexity”
and “maintenance complicated” issues are reported for stored pro-
cedures, and “performance issues” is reported for triggers.“Définition et identification des tables de nomenclatures”
[Delplanqueetal .2018](appeared)presentstheconceptof“nomen-
clature table” in the context of relational databases. Those tables
areusedtogatheradditionalinformationtorowsoftablesforming
thecoreofthedatabase.Inthispaper,adefinitionofthiskindof
tables based on their structural properties and their historical evo-
lution is proposed. Then, based on this data, a classification model
fornomenclaturetablesisbuiltusingadataminingalgorithm.Its
evaluation shows a precision of 88.6% and a recall of 88.7%.
2.2 Literature
SoftwarechangeimpactanalysisasdefinedbyArnoldandBohnert[Arnold1996]hasalreadybeenwidelyinvestigatedbythescientificcommunityasillustratedbyLehnert’smeta-analysis[Lehnert2011].
This research field is related to the work presented in this paper
since the dependency analysis challenge will be solve by applying
andadaptingexistingtechniquesforsoftwareengineering.Some
work has already been done to estimate the impact of a database’s
change on clients of the database [Deruelle et al .2001;Gardiki-
otis and Malevris 2006, 2009;Maule 2010] as well as to estimate
the impact of a change directly inside a database [Andany et al .
1991;Curinoetal .2008;JainaeandSuwannasart2014].Thework
presentedinthispaperwillfocusontheimpactofchangeinside
databaseasafirststep.However,itcanbedistinguishedfromex-
isiting work in the literature on the fact that the impact analysis
aimstoprovidesupportforbehaviouralentitiesandtodealwith
complicated dependency relations that arise from their usage.
Meurice et al. [Meurice et al .2016] propose a meta-model for
relational database and client applications with a list of operations
describingchangesonmodels.Foreachoperationalistofstrate-
gies to either adapt the database or warn the DBA a part of the
code should be reviewed is provided. This recommandation model
has been evaluated on the history of 3 software using relational
databases and shows a rate of 99% correct recommandation and 5%
of missing recommandation because of ORM mapping undetected.
The research presented in this paperaims to extend this work but
focusing on the adaptation of the behavior embedded in databases.
Nagy et al. [Nagy et al .2011] present the analysis of a software
systembasedonarelationaldatabaseusingOracle’sPL/SQLstored
routines massively (30,000 stored routine, 1.8 million lines of code).
Notably, the authors observed that the overall source code quality
ofthesystemshowedanegativeinfluenceonitsmaintainability.In
thecontextoftheresearchpresentedinthispaper,anevaluation
of the quality of stored functions in databases could be done. Then,
recommendations to enhance the quality of stored procedures’source code could be developed based on an impact model and
associated recommandations.
Premerlani and Blaha [Premerlani and Blaha 1993] proposed
an approach for reverse engineering of relational databases. The
authors propose an informal process broadly consisting in 1. mod-
ellingdatabase’sentitiesand2.dependingonstructuresfoundin
the model generated on step 1., perform transformations on the
databaseschema.11transformationsconcerningtables,columns,
foreign keys are proposed in the paper. The aim ot this thesis is to
proposetransformationsforallkindofentitiesavailableinmodern
RDBMS and to formalize them.
950
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 14:10:52 UTC from IEEE Xplore.  Restrictions apply. ASE ’18, September 3–7, 2018, Montpellier, France Julien Delplanque
3 PROPOSITION: MODEL RELATIONAL
DATABASES AND THEIR EVOLUTION
The proposition for this research is to develop a meta-model, a
change model and animpact model for relational databases. The
meta-model aims to model all kinds of entities in a database andthe links between them (tables, columns, views but also stored
procedures, triggers, types, queries, etc...). The change model aims
togatherlow-levelandhighlevelchangetypesandcombination
operators. The impact model uses the meta-model and the change
model to predict how to modify the database to integrate a change.
Finally, from the three preceding parts of the research, it will be
possibletogenerateaSQLscriptthatappliesthechangescomputed.
3.1 A Meta-Model
Themainrequirementforthemeta-modelisthefollowing:modelall
the entity types of the database or provide the possibility to extend
the set of entity types modellable. Indeed, the DBA may want to
modifyanypartofthedatabase.Thesecondaryrequirementisthat
instancesof themeta-model(models)should beeasyto query in
order to perform dependency analysis.
3.2 A Change Model
Thechangemodelshouldprovide:1.thelistofchangesavailableto
be applied on instances of the meta-model, 2. for each change, the
entitytypeonwhichitcanbeappliedandeventuallyacondition
ontheentityonwhichitcanbeapplied,3.operatorsallowingto
combine changes together to create more complex changes, and 4.
foreachoperator,thechangesacceptedasinput.Withthesefour
features,itispossibletodefineasetofhigh-levelchangesavailable
to the DBA defined as a combination of low-level changes.
3.3 An Impact Model
The impact model extends the change model by adding the fol-
lowing information to each change available: 1. from the entityconcerned by the change, it can gets the list of entity potentially
impacted, and2. ifneeded toapply thechange, it proposesone or
many recommandations to adapt the database to change.
3.4 A SQL script generator
Onceonecanpredicthowtoadaptthedatabaseinordertoapply
a change initiated by a DBA, the ultimate goal is to generate theSQL script implementing the change and adaptations associated.
Beforethe actualgeneration ofthe script,wewould likethe DBA
to be able to manipulate its high-level changes as whole (including
low-levelchangesinducedbythepreviousanalysis).Thisway,it
will be possible to go back on a change, modify it and re-run the
analysistoensureitisstillvalidwiththerestofthechanges(e.g. no
modificationofinexistantentity).Itwillalsobepossibletocheck
thatthelistofchangestoapplyisconsistent(e.g. achangeisnot
discarding another change).
4 RESEARCH PLAN
The method used to carry out the research consist in the three
following steps. 1. explore and develop theoretical solutions, 2.
implementthem,and3.validatetheimplementationagainstrealdatabases from open-source projects and companies. Concretely,
the plan is to achieve the following steps:
(1)Design the meta-model / change model / impact-model the-
oretically;
(2)Implement the meta-model / change model / impact-model;
(3)Validatetheimpact-modelonopen-sourceandproprietary
databases for which the evolution history is available; and
(4)Compare the prediction of the impact-model with patchfilesofourlaboratory’sdatabase.Thisstepconsistsinthe
comparisonofwhatlow-levelchangestheDBAandtheSQL
generator use to implement the high-level changes.
In the end, the meta-model and the impact model are used to
createatool helpingtheDBAtoapplychanges onadatabaseand
ensuring the database continues to answer its requirements as
well as possible after the change. Such tool could take the form
ofa“wizard”takingahigh-leveloriginalchangeandguidingthe
DBA through the steps required to keep its database working after
thechange. Oncethiswizardfixedall thechangesinduced bythe
original change with the help of the DBA, it could generate a SQL
scriptthancanbeappliedonthedatabasetomigrate.Tosummarize,
thegoalistocreateatooltakingahigh-levelchangedescription
foradatabaseandgeneratingtheSQLcommandsrequiredtoapply
this change on the database.
REFERENCES
José Andany, Michel Léonard, and Carole Palisser. 1991. Management Of Schema
Evolution In Databases.. In VLDB. 161–170.
RobertSArnold.1996. Software change impact analysis. IEEEComputerSocietyPress.
Carlo A Curino, Hyun J Moon, and Carlo Zaniolo. 2008. Graceful database schema
evolution:theprismworkbench. Proceedings of the VLDB Endowment 1,1(2008),
761–772.
JulienDelplanque.2017. SoftwareEngineeringIssuesinRDBMS,aPreliminarySurvey.
16th edition of the BElgian-NEtherlands software eVOLution symposium (BENEVOL
2017)(2017).
JulienDelplanque,OlivierAuverlot,AnneEtien,andAnquetilNicolas.2018. Définition
et identification des tables de nomenclatures. 36 ème édition d’INFormatique des
ORganisations et Systèmes d’Information et de Décision (Inforsid 2018) (2018).
Julien Delplanque, Anne Etien, Olivier Auverlot, Tom Mens, Nicolas Anquetil, and
StéphaneDucasse. 2017. CodeCritics appliedtodatabase schema:Challenges and
first results.In Software Analysis, Evolution and Reengineering (SANER), 2017 IEEE
24th International Conference on. IEEE, 432–436.
LDeruelle,MBouneffa,NMelab,andHBasson.2001. Achangepropagationmodeland
platformformulti-databaseapplications.In Proceedings of the IEEE International
Conference on Software Maintenance (ICSM’01). IEEE Computer Society, 42.
Spyridon K Gardikiotis and Nicos Malevris. 2006. DaSIAn: A Tool for Estimating
the Impact of Database Schema Modifications on WEB Applications. In Computer
Systems and Applications, 2006. IEEE International Conference on. IEEE, 188–195.
Spyridon K Gardikiotis and Nicos Malevris. 2009. A two-folded impact analysis of
schema changes on database applications. International Journal of Automation and
Computing 6, 2 (2009), 109–123.
JiratchayaJainaeandTaratipSuwannasart.2014. Aframeworkfortestcaseimpact
analysis of database schema changes using use cases. International Journal of
Engineering and Technology 6, 3 (2014), 186.
SteffenLehnert.2011. Ataxonomyforsoftwarechangeimpactanalysis.In Proceedings
of the 12th International Workshop on Principles of Software Evolution and the 7th
annual ERCIM Workshop on Software Evolution. ACM, 41–50.
Andy Maule. 2010. Impact analysis of database schema changes. PhD Thesis. UCL
(University College London).
Loup Meurice, Csaba Nagy, and Anthony Cleve. 2016. Detecting and preventing
program inconsistencies under database schema evolution. In Software Quality,
Reliability and Security (QRS), 2016 IEEE International Conference on.IEEE,262–273.
CsabaNagy,RudolfFerenc,andTiborBakota.2011. Atruestoryofrefactoringalarge
oracle PL/SQL banking system. In Industrial Track of the 8th joint meeting of the
European Software Engineering Conference and the ACM SIGSOFT Symposium on the
Foundations of Software Engineering (ESEC/FSE 2011).
WilliamJPremerlaniandMichaelRBlaha.1993.Anapproachforreverseengineeringof
relationaldatabases.In Reverse Engineering, 1993., Proceedings of Working Conference
on. IEEE, 151–160.
951
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 14:10:52 UTC from IEEE Xplore.  Restrictions apply. 