Descartes: A PITest Engine to Detect Pseudo-Tested Methods
Tool Demonstration
Oscar Luis Vera-Pérez
Inria Rennes - Bretagne Atlantique
Rennes, France
oscar.vera-perez@inria.frMartin Monperrus
KTH Royal Institute of Technology
Stockholm, Sweden
martin.monperrus@csc.kth.seBenoit Baudry
KTH Royal Institute of Technology
Stockholm, Sweden
baudry@kth.se
ABSTRACT
Descartesisatoolthatimplementsextrememutationoperatorsand
aimsatfindingpseudo-testedmethodsinJavaprojects.Itleverages
the efficient transformation and runtime features of PITest. The
demonstrationcomparesDescartes withGregor,thedefaultmuta-
tionengineprovidedbyPITest,inasetofrealopensourceprojects.
It considers the execution time, number of mutants created andthe relationship between the mutation scores produced by both
engines. It provides some insights on the main features exposed by
Descartes.
CCS CONCEPTS
•Software and its engineering →Software testing and de-
bugging;
KEYWORDS
pseudo-testedmethods,extrememutation,mutationtesting,soft-
ware testing, PITest
ACM Reference Format:
OscarLuisVera-Pérez,MartinMonperrus,andBenoitBaudry.2018.Descartes:
A PITest Engine to Detect Pseudo-Tested Methods: Tool Demonstration. In
Proceedings of the 2018 33rd ACM/IEEE International Conference on Automated
Software Engineering (ASE ’18), September 3–7, 2018, Montpellier, France.
ACM,NewYork,NY,USA, 4pages.https://doi.org/10.1145/3238147.3240474
1 INTRODUCTION
Mutation analysis or mutation testing [ 2] evaluates the fault de-
tectioncapabilitiesofatestsuite.Itdoessobyinsertingartificial
bugs in the form of subtle code changes. Then, it verifies if the test
suite is able to detect those changes. The usual outcome from this
analysis is the mutation score, that is, the ratio of planted faults
(mutants) that has been detected to the total of mutants created.
Niedermayr and colleagues [ 5] recently introduced extreme mu-
tation analysis. It is an alternative to traditional mutation that
performsmore coarse-grainedtransformationsby eliminating,at
once, all side effects of a method. For a voidmethod this approach
removes all instructions from its body. If the method is not void,
then the body is replaced by a single returninstruction with a
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
on the first page. Copyrights for components of this work owned by others than ACMmustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,orrepublish,topostonserversortoredistributetolists,requirespriorspecificpermissionand/ora
fee. Request permissions from permissions@acm.org.
ASE ’18, September 3–7, 2018, Montpellier, France
© 2018 Association for Computing Machinery.
ACM ISBN 978-1-4503-5937-5/18/09...$15.00
https://doi.org/10.1145/3238147.3240474predefinedvalue.Listing 1showsasimpleJavamethodandListing
2shows two variants or mutants that could be created for this
method using extreme mutation, in this case with constants 0 and
1. Besides removing all side effects, the technique ensures that the
mutated method will always return the same value.
Extreme mutation addresses two challenges of the traditional
approach.Itcreatesmuchlessmutantsandcanautomaticallyavoid
most transformations that could be equivalent to the original code.
Thesetwoaspectsareusuallyquotedasdrawbacksthatpreventthe
wideuseofmutationtestinginpractice[ 3,4].Anotherbenefitof
thisapproachisthatitoperatesatthemethodlevelwhicheasesthe
understandingoftheunderlyingtestingproblem.Inadditiontothe
mutationscore,extrememutationpinpointsalistofworsttested
methods.Inparticular,thetechniquehiglightsmethodsexecuted
by the test suite but where no extreme mutant is detected while
runningthetests.Thesemethodsarelabeledaspseudo-testedin
the work of Niedermayr et. al.[5].
Inthisdemonstration,wepresentDescartes,anextrememuta-
tionengineforPITest[ 1],astate-of-the-artmutationtestingtool
for Java projects. PITest is a popular tool that works with all major
buildsystems:Ant,Gradle,MavenandcanhandleJUnitandTestNG
test suites. Descartes brings a set of extreme mutation operators
toPITestanddiscoverspseudo-testedmethods.Wealsocompare
theresultprovidedbyDescarteswiththeoutcomeofGregor,the
default mutation engine for PITest. Our goal is to determine if
extrememutationcanbeusedasaviabletrade-offbetweencode
coverage, which assesses only test inputs, and traditional mutation
analysis,whichalsoaddressestheoraclesbutataveryhighcost.
ThisisanovelcontributionwithrespecttotheworkofNiedermayr
et al whose focus is on checking whether code coverage is a good
indicator of test quality when discerning between system and unit
tests.
1 //Original method
public static long factorial( int n) {
3 if(n==0) return 0;
long result = 1;
5 for(int i=2 ;i< =n ;i + + )
result *= i;
7 return result;
}
Listing 1: A simple Java method.
//Extreme mutant 1
2 public static long factorial( int n) { return 0; }
4 //Extreme mutant 2
public static long factorial( int n) { return 1; }
Listing 2: Two mutans created with extreme mutation.
908
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 13:48:24 UTC from IEEE Xplore.  Restrictions apply. ASE ’18, September 3–7, 2018, Montpellier, France Oscar Luis Vera-Pérez, Martin Monperrus, and Benoit Baudry
2 AN OVERVIEW OF DESCARTES
Descartesisatooltoautomaticallydetectpseudo-testedmethods
in Java programs tested with JUnit test suites. This detection relies
on extreme mutation analysis. We implement this analysis as a
mutationengineforPITest.InPITest’sjargon,amutationengineis
apluginthathandlesthediscoveryandcreationofmutants.Such
apluginshouldalsomanageasetofmutationoperators,whichare
models of the transformations to be performed.
Our extreme mutation engine provides a set of configurable mu-
tationoperators.Amutationoperatorisconfiguredbyspecifying
the literal value it should use to modify the method. Descartes
supportsliteralsofallJavaprimitivetypes, Strinд,thenullvalue
and has two special operators: one to target voidmethods and an-
other to return an empty array where possible. The engine does
not mutate constructors.
Figure1illustratestheinteractionbetweenPITestandDescartes.
PITesthandlestheinspectionofthetargetprojecttodiscoverall
dependencies, creates execution units composed by the mutants
and the tests to be executed, and ultimately runs the test cases.
Themutationengineleveragesallthesefunctionalitiesandhandles
mutant discovery and creation.
Relying on the infrastructure and architecture of PITest allowed
us to speed up the development of Descartes and its adoption in
production. So far, the biggest challenges we have faced have been:
1) The lack of documentation describing how to create mutation
enginesforPITest;2)Thedesignandimplementationofmeaningful
mutation operator abstractions and their interaction with the rest
ofthePITestframework;3)MaintainingtheengineuptodatewiththeregularchangesandreleasesofPITest;4)Makingthetooluseful
to developers. To overcome this last challenge we have augmented
Descartes with custom reporting capabilities and functionalities
toreducethenumberofpotentialfalsepositives,forexample,we
provide method filtersbased onthe methodstructurerather than
its signature.
To the best of our knowledge, Descartes is the only available
alternative to the default engine provided by PITest. Our project
couldbeusedasanadditionalsupportingmaterialforthosewho
are willing to create their own extensions.
3 DESCARTES VS GREGOR
Gregor is the default mutation engine for PITest. It provides most
traditionalmutationoperators1.Theseoperatorsworkatthein-
struction level. Listing 3shows examples of the transformations
thatcanbeproducedbyGregoroverthemethodexposedinList-
ing1. The first variant of the method, shown in line 2negates the
condition in line 3. The second variant, shown in line 11, modifies
the return value by adding 1 in line 16.
1 //Mutant 1. Changes == by !=
public static long factorial( int n) {
3 if(n!=0) return 0;
long result = 1;
5 for(int i=2 ;i< =n ;i + + )
result *= i;
7 return result;
}
9
//Gregor mutant 2. Changes the result value by adding 1
1The full list is available here: http://pitest.org/quickstart/mutators/11 public static long factorial( int n) {
if(n==0) return 0;
13 long result = 1;
for(int i=2 ;i< =n ;i + + )
15 result *= i;
return result + 1;
17 }
Listing 3: Examples of mutants produced by Gregor.
WecomparetheexecutionofGregorandDescartesinaselection
ofJavaprojects.TheseareallprojectsthatuseMavenasmainbuild
system,JUnitasmaintestingframeworkandareavailableforma
version control hosting service, mostly Github.
Table2showsthemetricsrecordedforthecomparison.Foreach
mutationenginethetableshowstheexecutiontimeandnumber
of mutants created. The “Covered ” columns show the number of
mutants actually executed by the test suite and planted in meth-
odsthatweremutatedbybothengines.Thisdistinctionremoves
fromthecomparisonmutantsthatGregor maycreateinmethods
not analyzed by Descartes, and vice versa. For example, mutants
createdinconstructorsareleftout.The“Killed ”columnscontain
the number of mutants from the respective “Covered ” column that
were detected (killed) bythe test suite. The “Score ” columns show
the corresponding mutation score, that is the ratio of “Killed ”t o
“Covered”.
Table 1: Extreme mutation operators used in the compari-
son.
Method type Transformations
void Empties the method
Reference types Returns nullboolean Returns true or falsebyte,short,int,long Returns 0 or 1float,double Returns 0 .0o r0 .1
char Returns‘’o r‘ A ’
String Returns “” or “A”
T[] Returns new T[]{}
ForGregor,allstandardmutationoperatorswereused.Descartes
usedthesamemutationoperatorsasNiedermayrset.al.[ 5]plus
two additional transformations, one to return nullfor reference
typesandanothertoreturnanemptyarray.Thefulllistofextreme
mutation operators is shown in table 1.
One can observe that Descartes creates much less mutants than
Gregor which is reflected in the difference between the times to ex-
ecute the analysis of each engine. In all cases, Descartes completed
thetaskinmuchlesstime.Someinterestingcontrastsinthismatter
come from projects like Spoonwhere Descartes took a little less
thantwohoursandahalfwhileGregortookmorethan56hours,
Java Git with one hour and a half for extreme mutation and 16
hours for Gregor and Jaxen XPath Engine with less than two
minutesagainstnearly25minutes.Whilethenumberofmutants
createdandcoveredaffectstheexecutiontime,theteststhemselves
play an important role as they can involve heavy computation.
Take,forexample, thedifferencebetween Apache Commons Lang
andSCIFIOwith similar numbers of mutants and very different
execution times.
909
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 13:48:24 UTC from IEEE Xplore.  Restrictions apply. Descartes: A PITest Engine to Detect Pseudo-Tested Methods ASE ’18, September 3–7, 2018, Montpellier, France
Figure 1: Interconnection between PITest and Descartes.
Table 2: List of projects used to compare both engines, the execution time for the analysis, the number of mutants created,
mutants covered and placed in methods targeted by both tools, mutants killed and the mutation score.
Descartes Gregor
Project TimeCreated Covered Killed Score TimeCreated Covered Killed Score
AuthZForce PDP Core 0:08:00 626 378 358 94.71 1:23:50 7296 3536 3188 90.16
Amazon Web Services SDK 1:32:23 161758 3090 2732 88.41 6:11:22 2141689 17406 13536 77.77
Apache Commons CLI 0:00:13 271 256 246 96.09 0:01:26 2560 2455 2183 88.92
Apache Commons Codec 0:02:02 979 912 875 95.94 0:07:57 9233 8687 7765 89.39
Apache Commons Collections 0:01:41 3558 1556 1463 94.02 0:05:41 20394 8144 7073 86.85
Apache Commons IO 0:02:16 1164 1035 968 93.53 0:12:48 8809 7633 6500 85.16
Apache Commons Lang 0:02:07 3872 3261 3135 96.14 0:21:02 30361 25431 22120 86.98
Apache Flink 0:14:04 4935 2781 2373 85.33 2:29:45 43619 21350 16647 77.97
Google Gson 0:01:08 848 657 617 93.91 0:05:34 7353 6179 5079 82.20
Jaxen XPath Engine 0:01:31 1252 953 921 96.64 0:24:40 12210 9002 6041 67.11
JFreeChart 0:05:48 7210 4686 3775 80.56 0:41:28 89592 47305 28080 59.36
Java Git 1:30:08 7152 5007 4507 90.0116:02:03 78316 54441 40756 74.86
Joda-Time 0:03:39 4525 3996 3827 95.77 0:16:32 31233 26443 21911 82.86
JOpt Simple 0:00:37 412 397 379 95.47 0:01:36 2271 2136 2000 93.63
jsoup 0:02:43 1566 1248 1197 95.91 0:12:49 14054 11092 8771 79.08
SAT4J Core 0:53:09 2304 804 617 76.7410:55:50 17163 7945 5489 69.09
Apache PdfBox 0:44:07 7559 3185 2548 80.00 6:20:25 79763 32753 20226 61.75
SCIFIO 0:24:14 3627 1235 1158 93.77 3:12:11 62768 19615 9496 48.41
Spoon 2:24:55 4713 3452 3171 91.8656:47:57 43916 34694 27519 79.32
Urban Airship Client Library 0:07:25 3082 2362 2242 94.92 0:11:31 17345 11015 8956 81.31
XWiki Rendering Engine 0:10:56 5534 3099 2594 83.70 2:07:19 112605 50472 26292 52.09
Asforthescores,onecannoticethatthereisacertaincorrela-
tion between the values obtained by both engines. Figure 2shows
a scatter plot, in which each point represents a project. The coordi-
natesforeachpointaregivenbythescores,the xaxiscorresponds
to thescore fromDescartes while the yrepresents thescore from
Gregor. The figure corroborates the tendency for a positive mono-
tonic correlation between both scores, which means that, if the
score with Gregor is high, it is more likely that the mutation score
withDescarteswillbealsohigh.TheSpearmancorrelationcoeffi-
cientresultsin0.6fortheprojectsstudiedwitha p-valueof0.003,
whichindeedindicatesthatthereisamoderatepositivecorrelation.
Anyways, there are cases such as SCIFIOandXWiki RenderingEnginewhich produce a medium to low mutation score with Gre-
gor and scores above 83% with Descartes.
4 PSEUDO-TESTED METHODS
The results of extreme mutation are not limited to produce a score
for a given project. The proposal of Niedermayr et. al. [ 5] classifies
methods according to the extreme mutant detection. A method
is said to be pseudo-tested if it is covered by the test suite but
norelatedextrememutantiskilled.Thesemethodsaretheworst
tested in the code base. Extreme mutation provides a framework
todetect suchmethods moreefficiently thantraditionalmutation
testing.
910
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 13:48:24 UTC from IEEE Xplore.  Restrictions apply. ASE ’18, September 3–7, 2018, Montpellier, France Oscar Luis Vera-Pérez, Martin Monperrus, and Benoit Baudry
Figure 2: Visual correlation between scores
1 public static boolean isValidXmlChar( int ch) {
return (ch == 0x9)
3 || (ch == 0xA)
|| (ch == 0xD)
5 || (ch >= 0x20 && ch <= 0xD7FF)|| (ch >= 0xE000 && ch <= 0xFFFD)
7 || (ch >= 0x10000 && ch <= 0x10FFFF);
}
Listing 4: Real example of a pseudo-tested method.
Listing4shows a method belonging to one of the projects in-
cluded in table 2. It was found to be pseudo-tested by Descartes.
Onlytwoextrememutationsarerequiredtodetectthatthevalue
of thismethod isnot correctly verifiedby thetest suite,if verified
atall,whileGregorcreated45mutants.Thisisanexampleofthe
utility of extreme mutation.
Nevertheless, the result of Descartes is coarse-grained. Methods
where extreme mutants are killed are not exempt from having
testingissues.Listing 5showsarealexampleofamethodwhere
allextrememutantsweredetectedbutGregorcreatedmutantsthat
survived the analysis. In particular one of the traditional mutation
operators changed the value of Lonд .MIN_VALUEin line2. The
modification was unnoticed by the test suite, which indicates that
thecornercaseisnotbeingtested.Thislevelofdetailcannotbe
reached with the use of extreme mutation alone.
For a deep analysis regarding the utility in practice of Descartes
in the search of pseudo-tested methods we invite the reader to
check our work on the matter [ 6]. There, we analyze whether
thesemethodsarevalidhintstoimproveexistingtestcasesandwe
provideasetoftestingissuesfoundwiththehelpofDescartesin
real and well tested open-source projects.
public long subtract( long instant , long value) {
2 if(value == Long. MIN_VALUE)
throw new ArithmeticException(...);
4 return add(instant , -value);
}
Listing 5: Example of a non pseudo-tested method.
5 DEMONSTRATION SCOPE
Thedemonstrationwillbedirectedtoresearchersanddevelopers
whowishtoexperimentswithtraditionalandextrememutation.
It will be focused on the practical comparison of both mutationapproaches.WewilldiscusshowtointerprettheresultsgivenbyDescartesandhowpractitionerscanusetheseresultstoenhance
theirtest suites.Wewillshowexamples ofrealtesting faultsfound
withtheuseoftheextrememutationengine.Thedemowillalso
showcase the integration of Descartes and the latest check Github
API2to discover pseudo-tested methods in commits and pull re-
quests.
6 SUPPORTING MATERIALS
Allmaterialsrelatedtothetoolareavailableonline.Hereweprovide
a list with the main resources:
•Descartes code repository : Main code repository hosted in
Github.Itcontainsthecode,documentationandinstructions
to build the tool.https://github.com/STAMP-project/pitest-descartes
•Experimental data
:Consistsinasetoffileswiththeoutput
obtainedfrombothmutationenginesaswellasdataconcerning
the studied projects.
https://figshare.com/articles/data/6343280
•Experimental material : Github repository with additional
experimental data and scripts to support the analysis and com-
parison of both mutation engines.
https://github.com/STAMP-project/descartes-experiments
•Maven Central artifacts :CompiledversionsofDescartesare
available for use from Maven Central.
https://mvnrepository.com/artifact/eu.stamp-project/descartes
•Github Application repository :Codeoftheprototypeappli-
cation to integrate Descartes in a Github repository.
https://github.com/STAMP-project/descartes-github-app
ACKNOWLEDGMENTS
ThisworkhasbeensupportedbytheEUProjectSTAMPICT-16-10
No.731529.
REFERENCES
[1]HenryColes,ThomasLaurent,ChristopherHenard,MikePapadakis,andAnthony
Ventresque. 2016. PIT: A Practical Mutation Testing Tool for Java (Demo). In
Proceedings of the 25th International Symposium on Software Testing and Analysis
(ISSTA 2016).ACM,NewYork,NY,USA,449–452. https://doi.org/10.1145/2931037.
2948707
[2]Richard A.DeMillo, RichardJ. Lipton,andFrederickG.Sayward. 1979. Program
mutation: A new approach to program testing. Infotech State of the Art Report,
Software Testing 2, 1979 (1979), 107–126.
[3]Lech Madeyski, Wojciech Orzeszyna, Richard Torkar, and Mariusz Józala. 2014.
Overcoming the Equivalent Mutant Problem: A Systematic Literature Review
andaComparativeExperimentofSecondOrderMutation. IEEE Transactions on
Software Engineering 40, 1 (Jan. 2014), 23–42. https://doi.org/10.1109/TSE.2013.44
[4]Jakub Možucha and Bruno Rossi. 2016. Is Mutation Testing Ready to Be
AdoptedIndustry-Wide?.In Product-Focused Software Process Improvement (Lec-
ture Notes in Computer Science).Springer,Cham,217–232. https://doi.org/10.1007/
978-3-319-49094-6_14
[5]RainerNiedermayr,ElmarJuergens,andStefanWagner.2016. Willmyteststell
meifIbreakthiscode?.In Proceedings of the International Workshop on Continuous
Software Evolution and Delivery.ACMPress,NewYork,NY,USA,23–29. https:
//doi.org/10.1145/2896941.2896944
[6]Oscar Luis Vera-Pérez, Benjamin Danglot, Martin Monperrus, and Benoit Baudry.
2018. AComprehensiveStudyofPseudo-testedMethods. arXiv:1807.05030 [cs]
(July 2018). http://arxiv.org/abs/1807.05030 arXiv: 1807.05030.
2https://developer.github.com/v3/checks/
911
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 13:48:24 UTC from IEEE Xplore.  Restrictions apply. 