Metamorphic Testing of RESTful Web APIs
Sergio Segura, José A. Parejo, Javier Troya and Antonio Ruiz-Cortés
Dept. of Computer Languages and Systems, Universidad de Sevilla
Sevilla, Spain
sergiosegura@us.es
ABSTRACT
Web Application Programming Interfaces (APIs) specifyhowtoac-
cessservicesanddataoverthenetwork,typicallyusingWebser-
vices. Web APIs are rapidly proliferating as a key element to foster
reusability,integration,andinnovation,enablingnewconsumption
models such as mobile or smart TV apps. Companies such as Face-
book, Twitter,Google, eBay orNetflix receive billionsof API calls
every day from thousands of different third-party applications and
devices, which constitutes more than half of their total traffic.
As Web APIs are progressively becoming the cornerstone of
software integration, their validation is getting more critical. In
thiscontext,thefastdetectionofbugsisofutmostimportanceto
increase the quality of internal products and third-party applica-
tions. However, testing Web APIs is challenging mainly due to the
difficulty to assess whether the output of an API call is correct, i.e.,
theoracle problem. For instance, consider the Web API of the popu-
larmusicstreamingserviceSpotify.Supposeasearchforalbums
withthequery“redhouse”returning21totalmatches:Isthisoutput
correct?Doallthealbumsintheresultsetcontainthekeyword?
Are there any albumscontaining the keyword not included inthe
result set? Answering these questions is difficult, even with small
result sets, and often infeasible when the results are counted by
thousands or millions.
Metamorphic testing alleviatestheoracleproblembyproviding
an alternative when the expected output of a test execution is com-
plexorunknown.Ratherthancheckingtheoutputofanindividual
program execution, metamorphic testing checks whether multi-ple executions of the program under test fulfil certain necessary
properties called metamorphic relations. For instance, consider the
following metamorphic relation in Spotify: two searches for albums
with the same query should return the same number of total results re-gardless of the size of pagination.SupposethatanewSpotifysearch
is performed using the exact same query as before and increasing
themaximumnumberofresultsperpagefrom20(defaultvalue)to50:Thissearchreturns27totalalbums(6morematchesthaninthe
previous search), which reveals a bug. This is an example of a real
and reproducible fault detected using the approach presented in
thispaperandreportedtoSpotify.AccordingtoSpotifydevelopers,
it was a regression fault caused by a fix with undesired side effects.
Inthispaper[ 1],wepresentametamorphictestingapproachfor
theautomateddetectionoffaultsinRESTfulWebAPIs(henceforth
Permission to make digital or hard copies of part or all of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
onthefirstpage.Copyrightsforthird-partycomponentsofthisworkmustbehonored.
For all other uses, contact the owner/author(s).
ICSE’18, May 27-June 3, 2018, Gothenburg, Sweden
© 2018 Copyright held by the owner/author(s).
ACM ISBN 978-1-4503-5638-1/18/05.
https://doi.org/10.1145/3180155.3182528also referred to as simply Web APIs). We introduce the concept
ofmetamorphic relationoutputpatterns.A Metamorphic Relation
Output Pattern (MROP) definesanabstractoutputrelationtypically
identifiedinWebAPIs,regardlessoftheirapplicationdomain.Each
MROPisdefinedintermsofsetoperationsamongtestoutputssuchasequality,union,subset,orintersection.MROPsprovideahelpful
guidefortheidentificationofmetamorphicrelations,broadening
thescopeof ourworkbeyond aparticularWeb API.Basedonthe
notion of MROP, a methodology is proposed for the application
oftheapproachtoanyWebAPIfollowingtheRESTarchitectural
pattern.
The approach was evaluated in several steps. First, we used the
proposed methodology to identify 33 metamorphic relations infour Web APIs developed by undergraduate students. All the re-
lations are instances of the proposed MROPs. Then, we assessed
the effectiveness of the identified relations at revealing 317 auto-
maticallyseededfaults(i.e.,mutants)intheAPIsundertest.Asa
result, 302 seeded faults were detected, achieving a mutation score
of95.3%.Second,weevaluatedtheapproachusingrealWebAPIs
and faults. In particular, we identified 20 metamorphic relations in
theWebAPIofSpotifyand40metamorphicrelationsintheWeb
API of YouTube. Each metamorphic relation was implemented and
automaticallyexecutedusing both randomandmanualtest data.In total, 469K metamorphic tests were generated. As a result, 21
metamorphic relations were violated, and 11 issues revealed and
reported(3issuesinSpotifyand8issuesinYouTube).Todate,10
ofthereportedissues have beeneitherconfirmedbythe APIdevel-
opers or reproduced by other users supporting the effectiveness of
our approach.
CCS CONCEPTS
•Software and its engineering →Software testing and de-
bugging;
KEYWORDS
Metamorphic testing, REST, RESTful Web services, Web API
ACM Reference Format:
SergioSegura,José A.Parejo,JavierTroyaand AntonioRuiz-Cortés.2018.
MetamorphicTestingofRESTfulWebAPIs.In ICSE’18: 40th International
Conference on Software Engineering, May 27-June 3, 2018, Gothenburg, Swe-
den.ACM, New York, NY, USA, 1 page. https://doi.org/10.1145/3180155.
3182528
REFERENCES
[1]S. Segura, J. A. Parejo, J. Troya, and A. Ruiz-Cortés. 2017. Metamorphic Testing of
RESTfulWebAPIs. IEEE Transactions on Software Engineering PP,99(2017),1–1.
https://doi.org/10.1109/TSE.2017.2764464
8822018 ACM/IEEE 40th International Conference on Software Engineering
Authorized licensed use limited to: LAHORE UNIV OF MANAGEMENT SCIENCES. Downloaded on August 07,2025 at 11:38:09 UTC from IEEE Xplore.  Restrictions apply. 