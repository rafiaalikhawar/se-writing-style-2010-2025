Analyzing Scratch Programs with Automated Tests
Andreas Stahlbauer1, Marvin Kreis1, Gordon Fraser1
Abstract: Block-based programming environments like Scratchfoster engagement with computer
programming and are used by millions of young learners. Scratchallows learners to quickly
create entertaining programs and games, while eliminating syntactical program errors that could
interfere with progress. However, functional programming errors may still lead to incorrect programs,
and learners and their teachers need to identify and understand these errors. This is currently an
entirely manual process. We introduce a formal testing framework that describes the problem of
Scratchtesting in detail, and instantiate this formal framework with the Whisker tool, which
provides automated and property-based testing functionality for Scratchprograms. Empirical
evaluation on real student and teacher programs demonstrates that Whisker can successfully test
Scratchprograms, and automatically achieves an average of 95.25 % code coverage. This opens up
new possibilities to support learners of programming in their struggles. This summary refers to the
article Ş Testing Scratch Programs Automatically Ť [SKF19 ] published at the 27th ACM SIGSOFT
International Symposium on Foundations of Software Engineering 2019.
1 Introduction
Block-based programming languages [ Ba17 ] like Scratch[Ma10 ] engage young learners
with computer programming. At the time of this writing, almost 50 million users have signed
up to Scratchand have publicly shared almost as many Scratchprojects, and there
are many similar programming languages and environments. An important advantage for
young learners is that it is only possible to assemble the blocks that represent programming
statements in syntactically valid ways, thus eliminating the need to remember syntactic
subtelties. Programs, however, can nevertheless be functionally incorrect, and nothing about
the block-based approach makes it easier to identify and correct functional mistakes than in
regular programming languages. In fact, the Scratchprogramming environment offers
little support to debug Scratchprograms, and the visual arrangement of scripts can easily
get confusing with increasing program size, making it very hard to check and Ąx programs.
Our aim is to enable automated analysis of Scratchprograms. To this purpose, we
introduce an automated testing framework as a prerequisite to enable dynamic analysis,
for example in order to locate bugs or provide suggestions and feedback to learners. An
immediate application considered in this paper is the role of a teacher, who needs to identify
faulty programs in classroom and during grading. A study on real student programs shows
that automated test generation can achieve high code coverage on these programs, and the
automated tests highly correlate with manual grading results.
1Universität Passau, Lehrstuhl für Software Engineering II, Innstrasse 33, 94032 Passau
cba doi:10.18420/SE2020_42Michael Felderer (Hrsg.): SE 2020,
Lecture Notes in Informatics (LNI), Gesellschaft für Informatik, Bonn 2020 1392 Whisker: An Automated Testing Framework for S cratch
InScratch, programs control different objects ( sprites ) that are represented and interact
on a graphical stage. Programs are created by visually combining blocks that represent
syntactical elements of the language, such as control-Ćow structures. Only blocks that lead
to syntactically valid programs can be combined. The stage and each of the sprites can
contain several scripts. An event-based programming model is used, and many of the scripts
represent event handlers (e.g., message broadcasts, sprite collisions, user input).
A test consists of user events (e.g., mouse clicks and key presses) as well as a speciĄcation
of the expected behaviour. In our Whisker testing framework, tests are operationalized
in JavaScript, and test execution wraps the Scratchvirtual machine in order to provide
events to the program under test, as well as to check the speciĄed properties. Automated
tests can be written manually in JavaScript, or generated automatically by Whisker .
In a study with 37 student implementations of the same program, we demonstrate that
automated tests show a strong correlation of 0.893 (p-value < 0.001) with the grading points
assigned manually by a teacher. Using a set of 24 popular programming projects frequently
used in programming education, we demonstrate that Whisker can achieve an average
statement coverage of 95.25% with its automated test generation.
3 Conclusions
Our experiments demonstrate that Whisker tests can be used to automatically test and
grade Scratchprograms. An important next step is support for deriving speciĄcations,
for which we are investigating ways to infer them from executions on a model solution.
Furthermore, we envision many further applications of automated tests. The educational
nature of Scratchinteractions would beneĄt from the dynamic analysis enabled by a
testing framework like Whisker . Applications range from supporting learners with fault
localization to producing hints and repairs automatically. To support this area of research, the
latest version of Whisker is available as open source at github.com/se2p/whisker-main .
Bibliography
[Ba17] Bau, D.; Gray, J.; Kelleher, C.; Sheldon, J.; Turbak, F. A.: Learnable programming: blocks
and beyond. Commun. ACM, 60(6):72Ű80, 2017.
[Ma10] Maloney, J.; Resnick, M.; Rusk, N.; Silverman, B.; Eastmond, E.: The Scratch Programming
Language and Environment. TOCE, 10(4):16:1Ű16:15, 2010.
[SKF19] Stahlbauer, Andreas; Kreis, Marvin; Fraser, Gordon: Testing Scratch Programs Automati-
cally. In: Proceedings of the 2019 27th ACM International Symposium on the Foundations
of Software Engineering. ACM, pp. 165Ű175, 2019.140Andreas Stahlbauer, Marvin Kreis, Gordon Fraser