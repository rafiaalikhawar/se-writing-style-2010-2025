ProbabilisticModel CheckingofPerturbedMDPs
with Applications to Cloud Computing
Yamilet R. Serrano Llerena
National Universityof Singapore
Singapore
yserrano@comp.nus.edu.sgGuoxinSu
Universityof Wollongong
Wollongong, Australia
guoxin@uow.edu.auDavidS.Rosenblum
National Universityof Singapore
Singapore
david@comp.nus.edu.sg
ABSTRACT
Probabilisticmodelcheckingisaformalverificationtechniquethat
has been applied successfully in a variety of domains, providing
identification of system errors through quantitative verification of
stochastic system models. One domain that can benefit from prob-
abilisticmodelcheckingiscloudcomputing,whichmustprovide
highly reliable and secure computational and storage services to
large numbers ofmission-criticalsoftware systems.
Forreal-worlddomainslikecloudcomputing,externalsystem
factorsandenvironmentalchangesmustbeestimatedaccuratelyin
theformofprobabilitiesinsystemmodels;inaccurateestimatesfor
themodelprobabilitiescanleadtoinvalidverificationresults.Toad-
dresstheeffectsofuncertaintyinprobabilityestimates,inprevious
workwehavedevelopedavarietyoftechniquesfor perturbation
analysisofdiscrete-andcontinuous-timeMarkovchains(DTMCs
and CTMCs). These techniques determine the consequences of the
uncertaintyonverificationofsystemproperties.Inthispaper,we
presentthefirstapproachforperturbationanalysisofMarkovde-
cisionprocesses(MDPs),astochasticformalismthatisespecially
popularduetothesignificantexpressivepoweritprovidesthrough
the combination of both probabilistic and nondeterministic choice.
Our primary contribution is a novel technique for efficiently
analyzingtheeffectsofperturbationsofmodelprobabilitiesonver-
ificationofreachabilitypropertiesofMDPs.Thetechniqueheuristi-
callyexploresthespaceof adversaries ofanMDP,whichencodethe
differentwaysofresolvingtheMDP’snondeterministicchoices.We
demonstratethepracticaleffectivenessofourapproachbyapplying
itto twocasestudiesofcloud systems.
CCS CONCEPTS
·Mathematicsofcomputing →Markovprocesses ;·Theory
of computation →Verification by model checking ;·Soft-
ware and its engineering →Formal software verification ;
Modelchecking ; ·Networks → Cloud computing;
KEYWORDS
cloudcomputing,Markovdecisionprocesses,perturbationanalysis,
probabilisticmodelchecking, uncertainty
Permissionto make digitalor hard copies of allorpart ofthis work for personalor
classroom use is granted without fee provided that copies are not made or distributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
on the first page. Copyrights for components of this work owned by others than ACM
mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,orrepublish,
topostonserversortoredistributetolists,requirespriorspecificpermissionand/ora
fee. Request permissions from permissions@acm.org.
ESEC/FSE’17, September 4ś8, 2017, Paderborn, Germany
©2017 Associationfor Computing Machinery.
ACM ISBN 978-1-4503-5105-8/17/09...$15.00
https://doi.org/10.1145/3106237.3106301ACMReference format:
Yamilet R. Serrano Llerena, Guoxin Su, and David S. Rosenblum. 2017.
Probabilistic Model Checking of Perturbed MDPs with Applications to
Cloud Computing. In Proceedings of 2017 11th Joint Meeting of the European
SoftwareEngineeringConferenceandtheACMSIGSOFTSymposiumonthe
Foundations of Software Engineering, Paderborn, Germany, September 4ś8,
2017(ESEC/FSE’17), 11pages.
https://doi.org/10.1145/3106237.3106301
1 INTRODUCTION
Probabilistic model checking is a formal verification technique
that aims to verify systems that exhibit stochastic behavior [ 2,
19]. It is a mature verification technology with many available
tools,suchasPRISM[ 20].Probabilisticmodelcheckinghasbeen
appliedsuccessfullyinavarietyofdomains,providingidentification
of system errors through quantitative verification of properties
(typically expressed in PCTL) against stochastic system models
(typicallyexpressedinsomevariantof aMarkov model).
One domain that can benefit from probabilistic model check-
ing is cloud computing, which has matured extensively and has
experienced great success over the last several years [ 36]. Cloud
systemsmustprovidehighlyreliableandsecurecomputationaland
storageservices to large numbers of mission-criticalsoftware sys-
tems in highly stochastic environments. In particular, they support
dynamicandelasticprovisionofstorageandcomputeservicesin
environmentsthatendureintermittentconnectivity,andvariable
reliability and availability [ 26,36]. Recent studies [ 17,18,23ś25]
havedemonstratedthatquantitativeverificationviaprobabilistic
model checking can provide cloud administrators with an effec-
tivewayofanalyzingoperations,resources,andthereliabilityof
providedservices.
Traditionalstochasticformalismsarelimitedbytheiruseof con-
stant-valuedprobabilities.Thislimitstheeffectivenessofprobabilis-
ticmodelcheckingforreal-worlddomainssuchascloudcomputing,
becausetheprobabilitiesthatrepresentcertainsystemquantities
such as reliability, fault-proneness and so on, are unknown a priori
andmustbedeterminedempiricallythroughobservationsofthe
system or from the experience of domain experts. Estimating these
probabilities accurately is complicated by the fact that they may
changeovertimeduetothestochasticnatureofthemodeledsys-
tem. They may be affected by unpredictable environmental factors
suchasfailures,disastersandworkloadspikes.Consequently,un-
certainty about model probabilities can lead to invalid verification
results.
For the reasons outlined above, in order to support accurate and
effective probabilistic verificationof reliableand secure cloud ser-
vices for system providers and users, it is necessary to understand
454ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany YamiletR. Serrano Llerena, Guoxin Su,andDavidS.Rosenblum
theeffectofuncertaintyontheprobabilisticverificationofcloudcom-
putingsystems .This paperaimstoenable cloudadministratorsto
verifyreachabilitypropertiesofcloudservicesinthepresenceof
such uncertainty.
In order to address the effects of uncertainty in probabilistic
verification, in previous work we have developed a variety of tech-
niquesforperturbationanalysisofdiscrete-andcontinuous-time
Markov chains (DTMCsand CTMCs).These techniques candeter-
minetheconsequencesoftheuncertaintyonverificationofsystem
properties [ 30ś32]. In this paper, we present the first approach
forperturbationanalysisofMarkovdecisionprocesses(MDPs),a
stochastic formalism that is especially popular due to the signifi-
cant expressive power it provides through the combination of both
probabilistic and nondeterministic choice. Our approach is applied
in three steps. First, we construct an MDP model that captures key
behavioral characteristics of interest of a cloud system, and we
specify the reachability properties the model must satisfy. Second,
weextendtheMDPmodeltoaParametricMarkovdecisionprocess
(PMDP), a parametric variant of an MDP, to model uncertainty
in the MDP’s probabilities. Third, we formally characterize the
worst-caseconsequencesoftheuncertaintyontheverificationof
thereachabilityproperties;inparticular,wecapturetheeffectof
uncertainty in the form of condition numbers , which express the
maximum variation to verification results as a linear function of
the perturbation of model probabilities. The main technical contri-
butionsofour approach are as follows:
(1)Wepresentanefficientheuristicalgorithmforexploringthe
space ofadversaries of a PMDP, which encode the different
waysofresolvingthePMDP’snondeterministicchoices.The
algorithm exploits the underlying graph of the PMDP in an
efforttoovercometheintractabilityofanalyzingthespace
ofadversaries exhaustively.
(2)We present a prototype implementation of our approach in
Python,whichisinterfacedwithPRISM[ 20]toextractthe
basic features ofan MDP model.
(3)Wepresentanexperimentalevaluationofourapproachon
two case studies of cloud systems. Our experiments indicate
thatourtechniqueisabletocomputeanaccurateestimation
oftheeffectoftheuncertaintyonthereachabilityverification
of an MDP regardless of the model size and with efficient
performance.
Theremainderofthepaperisorganizedasfollows.Section2pro-
videsamotivatingexampleofacloudcomputingsystem.Section3
recallsthenecessaryformalfoundationwithrespecttoMDPs,its
parametricvariantanditsreachabilityverificationinprobabilistic
modelchecking.WepresentourperturbationapproachinSection4.
Section 5 presents our algorithm for computing the maximum con-
dition number of an MDP. Section 6 presents our experimental
evaluationandresults.Section7discussesrelatedwork.AndSec-
tion8summarizesthemaincontributionsofthepaperanddiscusses
future work.
2 MOTIVATING EXAMPLE
Consider a real-life scenario in cloud service migration [ 18,34,35]
where the objective is to enable a user always to be connected
to the optimal cloud. Suppose we have a mobile network with a0,11,1
1,2
1,3
1,41,6
1,52,1
2,2
2,3
2,4
2,5
2,6
2,72,11
2,10
2,9
2,82,123,1
3,2
3,9
3,103,18
3,113,3
3,83,17
3,123,4
3,73,5
3,63,16
3,15
3,14
3,134,1
4,2
4,12
4,134,24
4,144,3
4,114,23
4,154,4
4,104,22
4,164,5
4,94,6
4,7
4,84,21
4,20
4,19
4,18
4,17
Figure 1:ATypical 3GPP Mobile Network.
sιs1 s3
2s3
3s1
4
miд
s2
4s2
3s2
21.0
1
3+x1
2
3+x21.0
1
3+x1
2
3+x21.0
1
3+x1
2
3+x21.0
1.0
1.0
1.0
1.0
1.01.0
1.0a1
a2
Figure 2:Mobile NetworkModeled as aMDP.
typical 3GPP network topology as illustrated in Figure 1, which
employstheconceptofFollow-MeCloud(FMC)[ 33]toprovideop-
timized, disruption-free cloud-based services for mobile users [ 34].
AsshowninFigure1,a3GPPnetworktopologytypicallyisdivided
intohexagonalcells.Forthesakeofsimplicity,weconsideratopol-
ogy ofN=5 rings of cells, where i,jindicates the j-th cell in ring
isuch that 0≤i≤N−1. Each cell is covered byone ofa number
of micro-clouds (MCs) that are interconnected with each other and
monitoredbythe FMC controller.
We wish to model the service migration decisions of the FMC
controller,whichdecidesineachtimeslotwhetheraservicecon-
sumedbyauseratsomeMCshouldbemigratedtoadifferent,more
optimalMC.A userstartsusingaserviceinthecellofring0(cell
0,1inFigure1).Thenineachtimeslot,theuserchoosesacellof
the next enclosing ring with equal probability, until eventually the
user reaches the last ring. Note that from ring 0, the user moves to
an adjacent cell in ring 1 with probability1
6, while from ring i≥1,
theusermovestoanadjacentcellinring i+1withprobability1
3(if
there are three choices of successor) or1
2(if there are two choices).
Figure 2 depicts the mobile network modeled as an MDP. For
simplicity,ratherthanmodeleachcellasastate,thestatesofthe
455Probabilistic Model Checking ofPerturbedMDPs
withApplicationsto Cloud Computing ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany
model represent groups of cells that induce similar behaviors. The
state space is S={sι,s1,s3
2,s2
2,s3
3,s2
3,s1
4,s2
4,miд}, withsιrepresent-
ing the initial state in which a user begins in ring 0 using a service
on some MC. For each state siorsj
iother than the initial state, the
userislocatedinring i,whiletheserviceisstillhostedonthesame
MC. In those other states, the FMC controller nondeterministically
choosesbetweentwoactionsÐeithertokeeprunningtheservice
onthesameMC,denotedasaction a1,ortomigratetheservicetoa
new, optimal MC, denoted as action a2. These actions are depicted
bysolidanddashedlinesinFigure2,respectively,andtheexecution
ofthe modelterminatesuponany migrationofthe service.
As shown in Figure 2, all cells of ring 1 can be aggregated into a
single state s1since the cells in ring 1 are isomorphic with respect
to future behaviors and are reached with equal probability from
thecellofring0.However,withinring1,theusermaymoveeither
directlytowardsałcorneržcellofthenetwork(illustratedasthe
greycellsinFigure1andthecoloredstate s2
4inFigure2),ortowards
some cell between the corners of the network. The resulting state
of the former kind of move is denoted s3
2(since the move is to a
cellinring2thatoffers3choicesofnewcellinring3),whilethe
resulting state of the latter kind of move is denoted s2
2(since the
moveistoacellinring2thatoffers2choicesofnewcellinring3).
Similar behavior is possible in the moves from rings 2 to 3 and 3 to
4,withcorresponding states inthe model.
Amongthevariouspropertiesofthisnetwork,supposeweare
interestedindetermining themaximumprobabilitythatamobile
user is served by the same MC until reaching one of the corners of
the network . In a real-world cloud environment, the movement
of the user through the cloud can be affected by external factors
(e.g., a power outage),environmental changes(e.g., an earthquake
thatcouldcauseserverstogodown),andsoon.Inourmodel,we
assume that such uncertainty in network conditions affects the
probabilisticchoiceofwhetherornottomovetowardthecornerof
the network. Therefore, it is important to determine the worst-case
consequenceoftheeffectofthisuncertainty ontheverificationofthe
above reachability property. The main contribution of this paper is
an approach for efficiently computing this worst-case effect.
In our model, we capture this uncertainty in the variables x1
andx2, which embody perturbations to the the probabilistic choice
between moves to states s3
iands2
i, respectively. We require only
thatx1+x2=0, in order to ensure that the probabilities over
thetwochoicessumto1.Ourapproachusesthesevariablesplus
an analysis of the structure of the MDP to compute a condition
number,whichasdescribedinSection4providesan estimateofthe
worst-case effectofthe perturbation.
Previous studies have proposed different perspectives to deal
withuncertaintyinprobabilisticverification.Sen etal.[29]intro-
duceintervalsforcharacterizingtheuncertaintyintransitionprob-
abilities and compute exact bounds for the verification of PCTL
properties. However, these exact bounds are point-wise, which
implies that whenever the bounds of the intervals are modified,
theverificationboundsmustberecomputed, makingreuseof the
intervals difficult.
An alternative approach is to compute a mathematical function
that defines the relationship between the uncertain probabilities
andtheverificationresults[ 8,10,15].Inthiscontext,asymptoticperturbation analysis of DTMCs provides efficient approximations
rather than exact bounds when the transition probabilities are
subjectto small perturbations [31,32].
ToleveragethisasymptoticapproachforMDPverificationand
computeasymptoticboundsontheeffectofperturbationonveri-
ficationresults,wemustsomehowanalyzethefullsetofDTMCs
inducedbyall memorylessadversaries oftheMDP(whichresolve
the nondeterministic choice in a state by selecting the same action
eachtimethestateisvisited).However,anexhaustiveanalysisof
an MDP has computational complexity proportional to the number
of adversaries it admits, which in general is exponential in the size
of the MDP. In this paper we present an efficient algorithm that
mitigates the intractabilityof an exhaustive analysis.
3 BACKGROUND
Thissectionpresentsthenecessarybackgroundforourapproach.
We first revisit the formal definition of MDPs and their parametric
extension,whichunderliesourperturbationanalysis.Wethenintro-
duce reachability verification of properties on MDPs as developed
inprevious studies[1, 5, 9, 12].
3.1 MarkovDecision Processes
For a countable set S, a discrete probability distribution on Sis
a function µ:S→[0,1]such that/summationtext.1
s∈Sµ(s)=1. The set of all
probability distributionover Sisdenoted Dist(S).
Definition3.1. MarkovDecisionProcess(MDP). AnMDPisatuple
M=(S,Act,Q,sι,AP,L)whereSisafinitesetofstates, Actisaset
ofactions, Q:S×Act×Dist(S)isaprobabilistictransitionfunction
such that ∀s∈S,∀a∈Act,/summationtext.1
s′∈SQ(s,a,s′)∈{0,1},sι∈Sis an
initialstate, APisasetofatomicpropositions,and L:S→2APa
labelingfunction.
LetAct(s)denote the set of enabled actions in state s, where
Act(s)..=/braceleftbig
a∈Act|Q(s,a,¯s)>0for some ¯s∈S/bracerightbig. For any state
s∈S,itisrequiredthat Act(s)/nequal∅and/summationtext.1
¯s∈SQ(s,a,¯s)=1forany
actiona∈Act(s)[2, 12].
For each state s∈S, there are two steps for determining its
successor state. First, a nondeterministic choice is made among
the actions Act(s). Second, assuming action a∈Act(s)has been
selected, a successor state ¯sis chosen randomly based on the prob-
ability distribution given by a, such that the probability of moving
fromsto¯sisgiven by Q(s,a,¯s).
Thesetof successorsstates ofs∈Swherea∈Act(s)isenabled
issucc(s,a)={¯s∈S|Q(s,a,¯s)>0}. Given a state set K⊆S, we
denote the set of output states of KasOut(K), whereOut(K)=
{¯s∈S\K|Q(s,a,¯s)>0for some s∈Sanda∈Act(s)}.
Paths.Aninfinitepath inanMDP Misanon-emptysequence
oftheform π=s0a0−−→s1a1−−→s2...wheresi∈S,ai∈Act(si)and
Q(si,ai,si+1)>0for alli≥0. We denote π(i)as the(i+1)thstate
inthepath π.Afinitepath ρ=s0a0−−→s1a1−−→...an−1−−−−→sn,|ρ|=n
denoting its length and last(ρ)=snits last state. The probability
measureofafinitepath ρ,denoted p(ρ),isdefinedastheproduct/producttext.1n−1
i=0Q(si,ai,si+1). We denote PathM,sandPathfin
M,sas the set
of all infinite and finite paths starting in state sofM, respectively.
456ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany YamiletR. Serrano Llerena, Guoxin Su,andDavidS.Rosenblum
ApaththroughanMDPrepresentsan execution (i.e.onepossible
behavior) ofthe model.
Executions. An execution of an MDP Mis an alternating se-
quenceofstatesandactionsendingwithastate.Formally,anexecu-
tionυ=s0a0s1a1...an−1snsuchthat siai−−→si+1for all0≤i<n.
Wedenote Act(υ)=a0...an−1asthesetofactionsintheexecution
υandp(υ)as the probability measure ofthe execution υ.
TotraceapathinanMDP M,wemustresolvethenondetermin-
istic choices that are presented in M. This resolution is performed
byanadversary ,alternativelycalleda scheduler orapolicyinthe
literature.
Definition3.2. MemorylessAdversary. AnadversaryofanMDP
M=(S,Act,Q,sι,AP,L)is a function A:Pathfin
M→Dist(Act)
such that A(ρ)(a)>0only ifa∈Act(last(ρ)). An adversary Ais
memorylessif A(ρ)dependsonlyon last(ρ),thatis,forany ρ,ρ′∈
Pathfin
Msuch that last(ρ)=last(ρ′),we have A(ρ)=A(ρ′).
A memoryless adversary Aalways selects the same action in
agivenstateindependentofwhichstateswerevisitedpreviously.
Therefore, Arestricts theset of paths, denoted as PathA
M,s, where
PathA
M,s⊆PathM,sandinducesaprobabilityspace ProbA
M,sover
thepaths PathA
M,s[16].Wedenote AdvMasthesetofallmemo-
rylessadversaries in M.
Definition 3.3. Sub-MDP. A sub-MDP of an MDP Mis a pair
of state and action sets (C,D)where (i) C⊆Sis non-empty and
the mapD:C→2Actis a function such that D(s)⊂Act(s)is
non-emptyforallstates s∈C,and(ii)s∈Canda∈D(s)implies
succ(s,a)⊆C.
3.2 ParametricMarkovDecision Processes
Previous studies [ 15,22] have used parametric Markov decision
processes(PMDPs)forexpressingnon-fixedtransitionprobabilities
in MDPs. We use PMDPs for capturing the presence of uncertainty
inthe probabilistictransitionsofMDPs.
Definition 3.4. Parametric Markov Decision Process (PMDP). A
PMDPbasedonMDP M=(S,Act,Q,sι,AP,L)isatuple M[x]=
(S,Act,Q[x],sι,AP,L)whereS,Act,sι,APandLare defined as
Definition 3.1, x=(x1,···,xm)is a vector of pair-wise distinct
symbolicvariableswhere mrepresentsthetotalnumberofsymbolic
variables,and Q[x]isaparametrictransitionprobabilityfunction
basedon Q.
The main difference between an MDP Mand its parametric
variant M[x]lies inthe extension of parameters and the definition
of the probabilistic transition function Q[x]. Informally, Q[x]is
obtained by associating variables from xwith some specificentries
ofQ.Inparticular,thedefinitionof Q[x]forourapproachwillbe
explained in Section 4. For the sake of our approach, similar to
the non-parametric case, we denote AdvM[x]as the set of optimal
adversaries ofaPMDP M[x].3.3 Reachability Verification in MDPs
A fundamental verification problem for quantitative analysis of
MDPs is to compute the probability of reaching a target set T⊆
S[2, 12].This property of probabilisticreachabilityisdenoted ♦T.
Definition 3.5. Reachability Probabilities. Given an MDP M, the
minimumandmaximumprobabilityofreachingasetoftargetstates
T⊆Sfroms, over all possible adversaries is defined as: pmin
M,s(T)=
infA∈AdvM{pA
M,s(T)},andpmax
M,s(T)=supA∈AdvM{pA
M,s(T)}
wherepA
M,s(T)=ProbA
M,s({π∈PathA
M,s|∃i·π(i)∈T}).
Definition3.6. Theminimumandmaximumprobabilityofreach-
ing a set of target states T⊆Sfrom state sunder its enabled
actiona∈Act(s)can be defined, in similar way to Definition 3.5,
aspmin
sa− →(T)=infA∈AdvM{ProbA
M,s(PathA
sa− →(T))},andpmax
sa− →(T)=
supA∈AdvM{ProbA
M,s(PathA
sa− →(T))}wherePathA
sa− →(T)={π∈
PathA
M,s|π(0)=s,A(s)=a,∃i·π(i)∈T}.
Adversariesthatachievetheminimum andmaximumprobabil-
ities defined in Definition 3.5 are called optimaladversaries, de-
noted asAdvminandAdvmaxrespectively. Similarly, Advmin
sa− →and
Advmax
sa− →denote the subsets of optimal adversaries that achieve the
probabilitiesinDefinition3.6.
Definition 3.7. Sets of Optimal Executions. Given the sets of opti-
maladversaries Advmin
sa− →andAdvmax
sa− →,wedefinethesetsofoptimal
executions from a state sand its enabled action a∈Act(s)as fol-
lows:
ϒmin
sa− →={υ|∀A′∈Advmin
sa− →,υ=sas1A′(s1)...sn}(1)
ϒmax
sa− →={υ|∀A′∈Advmax
sa− →,υ=sas1A′(s1)...sn}(2)
whereadversary A′:S+→Actsuchthat A(ss1s2...sn),∀ss1s2...
sn∈S+.
Thecomputationofreachabilityprobabilitiesisperformedintwo
steps. The first step analyzes qualitatively the underlying graph
of an MDP to identify sets of states for which the minimum or
maximum reachability probability is either 0or1. Second, these
sets are used to compute the quantitative minimum and maximum
reachabilityprobabilitiesusingsomestandardtechniquesuchas
value iteration, linear programming or policy iteration [ 12,21].
In practice, probabilistic model checkers such as PRISM [ 20] use
value iteration for their quantitative analysis. Value iteration is
an iterative numerical method that approximates the values of a
reachability probability up to some accuracy [ 2,12]. In this con-
text,Kwiatkowska etal.[21]developedanimprovedandefficient
version of the value iteration technique based on a decomposition
ofthemodelintoitsstronglyconnectedcomponents(SCCs).This
improvedversionoptimizes the verification speedfor MDPs.
4 PERTURBATION APPROACH
Inthissection,wepresentourperturbationapproachforestimating
theeffectofuncertaintyinthe reachabilityverificationofMDPs.
After modeling a cloud computing system as an MDP, we first
introduce uncertainty (small perturbations) to the MDP. Then, we
457Probabilistic Model Checking ofPerturbedMDPs
withApplicationsto Cloud Computing ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany
characterizeuncertaintyviasymbolicvariables,andwecapturethe
verification effect of uncertainty in the form of condition numbers.
4.1 Modeling Uncertainty
Inspired byprevious studies [ 11,31,32], we use a parametric vari-
antofanMDP Mformodelinguncertaintyinthenondeterministic
model. First, we define the parametric probabilistic transition func-
tionbyidentifyingactionsandprobabilistictransitionsthatmay
be affectedbyuncertain events.
Definition4.1. ParametricProbabilisticTransitionFunction. Given
a vectorx=(x1,...,xm)and a non-parametric function Q,Q[x]
is the parametric probabilistic transition function where ∀s∈S
anda∈Act(s),/summationtext.1
¯s∈SQ[x](s,a,¯s)=1and each entry Q[x](s,a,¯s)
ofQ[x]isdefinedas follows:
•Q(s,a,¯s),ifQ(s,a,¯s)∈{0,1},and
•Q(s,a,¯s)orQ(s,a,¯s)+xiwhere1≤i≤m,if
Q(s,a,¯s)/nelement{0,1}.
Through Definition 4.1, we can see that only transitions with
probabilitiesbetween,but not including, 0and1can beupdatedby
the appended variables. This is because transitions with probabili-
ties0or1arenotprobabilistic,andthusnotsubjecttoperturbations.
Basedon Q[x],westatethefollowingdefinitionandproposition:
Definition 4.2. Perturbed Entry. A perturbed entry Q[x](s,a,¯s)
isoftheform p(s,a,¯s)+xiwherep(s,a,¯s)/nelement{0,1}representsthe
non-symbolicpartoftheperturbedentryand xi∈xcapturesthe
presenceofthe uncertainty.
Proposition4.3. Givenavector x=(x1,...,xm),letIbeapar-
titionon{1,···,m}.Asub-vector I=(xj,...,xk)isanindependent
perturbedsub-vectorinthepartition Isuchthat 1≤j<k≤m.For
allI∈I,/summationtext.1
¯s∈SQ[x](s,a,¯s)=/summationtext.1
¯s∈Sp(s,a,¯s)+/summationtext.1
xi∈Ixifor some
s∈Sanda∈Act(s).
In words, Proposition 4.3 states that each element of xfalls
into anindependent perturbed sub-vector Iand all variables of
a sub-vector Iare used. Each sub-vector Igenerates a singleton
set of a perturbed action ActI={a∈Act|∃s,¯s∈S,∀xi∈
I,Q[x](s,a,¯s)=p+xi}and a set of perturbed states SI={s∈
S|∃¯s∈S,∃a∈Act(s),∀xi∈I,Q[x](s,a,¯s)=p(s,a,¯s)+xi}. It is
alwaysassumedthatthevector x=(x1,···,xm)iswithintheset
U..={x∈Rm|∀I∈I,/summationtext.1
xi∈Ixi=0,Q[x]≡Q}. Note that we
sayQ[x]≡Qwhen they have exactly the same non-zeroentries.
To illustrate our perturbation approach, consider a simple exam-
pleofaPMDPdepictedinFigure3.Fornow,ignorethedashedrect-
angles.Asthefigureshows,thestatespace SisS={s0,s1,s2,s3,s4,
s5,s6,s7,s8}wheres0is the initial state and the target set T={s7}.
The action set Actis given by a1,a2,a3,a4anda5, which are de-
pictedassolid,dashed,dotted,looselydashedandlooselydotted
lines respectively. The perturbation in the model is depicted by the
vectorx=(x1,x2,x3,x4,x5)whereeachvariableof xfallsintotwo
independentperturbedsub-vectors:(1) I1=(x1,x2)associatedwith
ActI1={a2}andSI1={s0,s1}, and (2)I2=(x3,x4,x5)associated
withActI2={a3}andSI2={s4}.s0 starts1
s2s3
s4s5
s6s7
s80.45±x1
0.55±x20.45±x1
0.55
±x20.6
0.41.0
1.01.0
0.2±x30.5±x4
0.3±x50.5
0.50.50.5
0.6
0.41.0
1.0 a1
a2
a3
a4
a5K1K2
K3
K4K5
K6 K7
Figure 3:AnIllustrative Example
4.2 EstimatingtheWorst-Case Effect
4.2.1 PerturbationCharacterizationofPMDPs. Wefirstcharac-
terizetheperturbationofPMDP M[x]andthereachabilityproperty
♦Tto be verified. Recall that pA
M,s(T)is the probability of reaching
a target set Tfrom state sunder the adversary Ain MDP M. In
this context, we formally define the exactdifference between satis-
fying a reachability property in a perturbed model M[x]and its an
associated unperturbed model Mas follows:
Definition4.4. ExactPerturbationCharacterizationFunction. Given
an MDP Mand its parametric variant PMDP M[x]with the tar-
getsetT,theexactperturbationcharacterizationfunctionfor M[x]
againstTisλ:U→[0,1]suchthat λ(x)=supA∈AdvM[x]/braceleftbig
pA
M[x],sι
(T)/bracerightbig
−supA∈AdvM/braceleftbig
pA
M,sι(T)/bracerightbig
,wherex∈U.
Definition 4.4reveals that for each set of values of the vector x,
it is possible to compute the exactdifference λ(x)between M[x]
andM.However,ourpurposeistocapturetheworst-caseeffect
ofxinM, for which we need to evaluate λ(x)for all combination
ofx.Then,weselectthe worst-caseconsequencebasedonthem.
Forthisreason,wedefinethe perturbationcharacterizationfunction
γagainsttheperturbed parameters xthatestimates themaximum
difference betweensatisfyinga reachability propertyin M[x]and
its an associated Mas follows:
Definition 4.5. Estimated Perturbation Characterization Function.
Given an MDP Mand its parametric variant PMDP M[x]with
thetargetset T,theestimatedperturbationcharacterizationfunc-
tion for M[x]againstTisγ:U→ [0,1]such that γ(x)=
supA∈AdvM[x]/braceleftbig
pA
M[x],sι(T)−pA
M,sι(T)/bracerightbig
,wherex∈U.
4.2.2 Maximum ConditionNumber. Inspired byprevious stud-
ies [31,32] and based on perturbation analysis, we use the concept
of condition numbers, which capture the sensitivity of verification
results to perturbed parameters. The maximum condition number
(MaxCN)measureshowmuchthecharacterizationfunction γ(x)
can change due to small perturbations. Let δ>0be a perturbation
distance. We assume δis a small positive number. We define the
MaxCNas follows:
458ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany YamiletR. Serrano Llerena, Guoxin Su,andDavidS.Rosenblum
Definition 4.6. Maximum Condition Number. Letδ>0be a
perturbationdistance.Themaximumconditionnumber,denoted
asκ,for the estimatedcharacterization function γagainstxis:
κ=lim
δ→0sup/braceleftBigγ(x)
δ|x∈U,∥x∥≤δ,δ>0/bracerightBig
(3)
Letρ1(x)=h·xbethelinearapproximationof γforsomevector
hsuchthat|h|=|x|.NotethattheexistenceofthelimitinEq. (3)
isguaranteedbythe fact that γisdifferentiable at 0[6].
Weformulatethatthecoefficientsofvector histheconcatenation
of all sub-vectors hI=(hj,...,hk)for allI∈Iand1≤j<
k≤m. We assume that the vector hpreserves the order after
theconcatenation.Inthiscontext,wealternativelyformulatethe
MaxCNofPMDP M[x]as follows:
Definition4.7. Leth+=max(hI)andh−=min(hI)bethelargest
andsmallestcoefficientsof hI.Let△hI=h+−h−bethemaximum
difference between all coefficients of hI. Then, the maximum con-
dition number κ=1
2.maxI∈I△hI.
The key point is to compute the largest h+and smallest h−
coefficients of each sub-vector I∈I. However, it may no be
feasible tocompute thesecoefficients byanalyzing all adversaries
in the PMDP model. To overcome this problem, we introduce a
heuristic method that analyzes the PMDP efficiently and computes
the MaxCNofthe model.
5 MAXCN ALGORITHM
Inthissection,wepresentouralgorithmicapproachthatcomputes
the maximum condition number of a PMDP, named as MaxCNAlg .
In the following, let M[x]=(S,Act,Q[x],sι,AP,L)be a PMDP
withtarget set T⊆Sandthe partition Iover the vector x.
Suppose we aim to compute the maximum condition number κ
of the PMDP depicted in Figure 3, based on Def. 4.7, we require an-
alyzingtheperturbedsub-vectors I1=(x1,x2)andI2=(x3,x4,x5),
anditscorrespondingcoefficientvectors hI1={h1,h2}andhI2=
{h3,h4,h5}.Notethatthecoefficient h1isrelatedtovariable x1,h2
to variable x2andsoon.
Let us first analyze the vector hI1={h1,h2}. To compute the
coefficients of hI1, we first need to detect the transitions associated
with variables x1andx2. In our example, as can be seen from
Figure 3, the transitions s0a2−−→s1ands1a2−−→s3are associated
withx1ands0a2−−→s2ands1a2−−→s4withx2. To determine the
valueofh1,wedependonthereachabilityprobabilitiesfromthe
successorsstates s1ands3tothetargetset T.Similarly, h2depends
on the reachability probabilities from states s2ands4toT. The
challenge here is to determine which probabilities (similarly which
adversaries)shouldbeassignedtothecoefficients h1andh2such
that they maximize △hI1.Our algorithm deals withthis challenge.
5.1 Sub-PMDPGenerator
Thebasicconceptofourapproachistogenerateasub-PMDP M∗=
(S∗,Act∗)thatcontainstherelevantinformationformaximizingthe
difference between the coefficients of a sub-vector I∈I, denoted
as△hI.
Inspired by a former method for computing reachabilityproba-
bilitiesinthenon-parametriccase[ 7,13,21],weanalyzetheunder-
lying graph of the PMDP by detecting the set of strongly connectedcomponents (SCCs)asaheuristicforselectingthesetofstatestobe
analyzed. The SCC-based decomposition of the graph is generated
byTarjan’salgorithm[ 27].Then,wedeterminethe reversedtopo-
logical order ζamong the set of SCCs such that Π={K1,...,KN}
whereNdenotes the number of SCCs in the PMDP. Kjwill appear
beforeKiinζifKidependson Kj.Wesaythat Kidependson Kj
ifSucc(Ki)∩Kj/nequal∅whereSucc(Ki)is the set of states that are
immediate successors ofstates in Ki.
Asanillustration,consideragainthePMDPshowninFigure3,
the dashes rectangles indicate the SCC-based decomposition in
ζ:K1={s8},K2={s7},K3={s3,s5,s6},K4={s4},K5={s1},
K6={s2}andK7={s0}.
In the following let I=(xj,...,xk)be the sub-vector to be ana-
lyzed and let s(xi)be the shorthand for representing the successor
state¯sof a perturbed entry Q[x]=p(s,a,¯s)+xi. Given the sub-
vectorI,wegenerateaSub-PMDPof M[x]foreachsuccessorstate
s(xi)∈S. This procedure is named as generatorSubPMDP and
depictedinAlgorithm 1.
Algorithm1: generatorSubPMDP (s(xi))
Input:A states(xi)∈S
1Π∗={K1,...,Kx}such that s(xi)∈KxandΠ∗⊆Π;
2M∗←Sub-PMDP(S∗,Act∗)whereS∗=Act∗=∅;
3forSCCK∈Π∗do
4S∗←K;
5Act(K)=/uniontext.1
s∈KAct(s) //Setof actionsof K;
6Act∗←Act(K);
7ifKis noMEC then
8 Actout(K)={a∈Act(K)|∃s∈K·succ(s,a)⊆
Out(K)} //Setof outgoing actionsof K;
9 Act+:=prune_actions( M∗,Actout(K));
10 Act∗←Act+//UpdateAct∗basedonAct+;
11returnSub-PMDP M∗
AscanbeseeninAlgorithm1, generatorSubPMDP (s(xi))first
computes the subset of SCCs to be analyzed, denoted as Π∗⊆
Π, where the successor state s(xi)belongs to the last SCC to be
analyzed (line 1). This step is important due to the facts that (a) an
SCC can be analyzed independently, as long as all of its successors
sethave beenalready analyzed,and(b) themethodonlyanalyzes
the relevantSCCs inthe bestcasescenario.
Second,generatorSubPMDP iteratesthroughallSCCsin Π∗.For
eachSCC, K∈Π∗,thealgorithmassigns Kandthesetofactions
ofKto the set of states S∗and the set of actions Act∗, respectively
(lines4-6).Third, generatorSubPMDP evaluateswhether Kisnot
amaximumendcomponent (MEC).Intheaffirmativecase, gener-
atorSubPMDP computes the set of outgoing actions of K(line 8)
andinvokesfunction prune_actions (M∗,Actout(K))(line9).This
function takes as input the current sub-PMDP M∗and the set
ofoutgoingactions Actout(K),andreturnsthesetofrelevantac-
tionsAct+.Theupdateof Act∗issubjectto Act+(line10).Finally,
generatorSubPMDP returns asub-PMDP M∗.
5.1.1 Pruning actions. Let us recall that each SCC can be an-
alyzed independently and our target is to find coefficients that
459Probabilistic Model Checking ofPerturbedMDPs
withApplicationsto Cloud Computing ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany
maximize△hI.Withthis inmind, we evaluate the set ofoutgoing
actions ofeachSCC,andwediscardactions thatdo notmaximize
△hI. This procedure is named as prune_actions and it takes as
input a sub-PMDP M∗and a set of outgoing actions of an SCC
K(Actout(K)).Thepseudocode of prune_actions isdescribedin
Algorithm 2.
Algorithm2: prune_actions( M∗,Actout(K))
Input:A Sub-PMDP M∗andasetofoutgoing actions
Actout(K)ofSCCK
1Act+←∅;
2foractiona+∈Actout(K)do
3¯S←succ(s,a+)for some s∈K;
4ϒ(¯S)=/braceleftBig
ϒmin
¯sa∗−−→∪ϒmax
¯sa∗−−→|∀¯s∈¯S,∀a∗∈Act∗(¯s)/bracerightBig
//Setof
optimalexecutions in M∗;
5T∗←(ϒ(¯S),¯S) //Buildanexecutiontree ;
6Ω(T∗)={ω1,...,ωm} //Setof branches T∗;
7Ω∗=argmaxω∈Ω(T)△p(ω)where
△p(ω)=pmax(ω)−pmin(ω);
8Act′={Act(υ)|∀ω∈Ω∗,∀(υ,p)∈ω}//Set of relevant actions
basedon Ω∗;
9Act+←Act′
10returnAct+
AsAlgorithm2shows,foreachoutgoingaction a+∈Actout(K),
prune_actions first computes the set of all successor states of state
s∈Kvia action a+, denoted as ¯S(line 3). Second, given the sub-
PMDP M∗andtheset ¯S,prune_actions computesthesetofoptimal
executions ϒ(¯S),asdefinedinDef.3.7(line4).Toreasonabout ϒ(¯S),
we buildan executiontree T∗definedas follows:
Definition5.1. ExecutionsTree. Givenasetofoptimalexecutions
ϒ(¯S)and the set of successors states ¯S, the execution tree T∗is a
rootedtree where:
•The root of T∗isadistinguishednode v∗=∅.
•The heightof T∗isequal to|¯S|+1.
•Everyinternalnode uisapair(υ,p),whereυisanexecution
inϒ(¯S)andpisthe probability measure of υ.
•Anodea=(υa,pa)istheparentofnode b=(υb,pb)ifonly
ifυb⊆υaorυa⊂υb.
•A branch ωofT∗is a path from v∗to a leaf node where
|ω|=|¯S|.
•The minimum and maximum probability of a branch ωis
defined as pmin(ω)=min{p|∀(υ,p)∈ω}andpmax(ω)=
max{p|∀(υ,p)∈ω},respectively.
After building the execution tree T∗,prune_actions computes
thesetof branchesof T∗,denotedas Ω(T∗)(line6).As aheuristic
for filtering the actions, the method selects the subset of branches
Ω∗⊆Ω(T∗)atwhich△p(ω)ismaximized(line7).Finally,itselects
the setofexisting actions inthe sub-set Ω∗(line8).
Figure4illustratestheexecutiontree withrespecttostate s1∈
K5and action a2∈Actout(K5). Given that succ(s1,a2)={s3,s4},
thefirst level of theexecution tree corresponds tostate s3and the∅
/parenleftBig
ϒmin
s3a1−−→∪ϒmax
s3a1−−→,0.6249/parenrightBig
/parenleftBig
ϒmin
s4a3−−→,0.1562/parenrightBig /parenleftBig
ϒmin
s4a4−−→,0.5/parenrightBigBranchω1 Branchω2
Figure 4:Example ofan Execution Tree
second level to state s4. The set of branches Ω(T∗)={ω1,ω2}, and
since△p(ω1)>△p(ω2)thesubset Ω∗={ω1}.Asaresult,theaction
a4ispruned.
5.2 Computing theMaximumDifference
The procedure MaxDiff, depicted in Algorithm 3, performs the
computationofthemaximumdifference △hIofacoefficientsub-
vectorhI.
Algorithm3: MaxDiff(I)
Input:A sub-vector I
1¯SI={¯s∈S|∀xi∈I,Q[x](s,a,¯s)=p(s,a,¯s)+xi}//Perturbed
successors states ;
2ϒI←∅;
3fors(xi)∈¯SIdo
4(S∗,Act∗)←generatorSubPMDP (s(xi));
5ϒI(s(xi))←/braceleftbig
ϒmin
s(xi)a∗−−→∪ϒmax
s(xi)a∗−−→|∀a∗∈Act∗(s(xi))/bracerightbig
;
6T←(ϒI,I) //Buildacoefficienttree ;
7Ω(T)={ω1,...,ωm} //Setof branches T;
8△hI=max{h+(ω)−h−(ω)};
9return△hI
MaxDifftakesasinputtheperturbedsub-vector Iandcomputes
the set of perturbed successors states, denoted as ¯SI, ofI(line 1).
Then,MaxDiff constructs a dictionary ϒIthat maps a successor
states(xi)to its set of executions (line 2). Next, MaxDiffiterates
through all perturbed successors states in ¯SI. For each successor
states(xi)∈¯SI, the function invokes generatorSubPMDP (s(xi))
which returns a sub-PMDP (S∗,Act∗)(line 4). It is important to
notice that the SCC-based procedure as introduced in the previous
sectioncontainsrelevantinformationfor the computationof △hI.
Basedon(S∗,Act∗),MaxDiffselectsthesetofoptimalexecutions
withrespectto s(xi)andstores intothe dictionary ϒI(line5).
After the analysis of the set of successors states ¯SIand the com-
putationofoptimalexecutionsthatproviderelevantinformation,
MaxDiffbuilds acoefficient tree,whichisdefinedas follows:
Definition5.2. CoefficientTree. Givenasetofoptimalexecutions
ϒIand the sub-vector I=(xa,...,xb), the coefficient tree Tis a
rootedtree where:
•The root of Tisadistinguishednode v∗=∅.
•The heightof Tisequal to|I|+1.
•Every internal node uisapair(vi,hi)where:
460ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany YamiletR. Serrano Llerena, Guoxin Su,andDavidS.Rosenblum
śviisatuplelistoftheform (s,a,¯s,υ)wheresisaperturbed
state,ais a perturbed action, ¯sis a perturbed successor
state and υisan execution.
śhiisthe coefficient relatedto the variable xi.
•A coefficient hi=/summationtext.1
(s,a,¯s,υ){pmax
M,sι({s})·Λ}where:
Λ= 
p(υ)
1−Q[x](s,a,s)ifQ[x](s,a,s)>0
p(υ) if¯s/nelementT∧Q[x](s,a,s)=0
1 otherwise
•Anodex=(vi,hi)istheparentofnode y=(vi+1,hi+1),if
only ifvi(υ)∩vi+1(υ)/nequal∅.
•A branch ωofTis a path from v∗to a leaf node where
|ω|=|I|.
•The largest and smallest coefficients of a branch ωare de-
finedash+=max(vi,hi)∈ω{hi}andh−=min(vi,hi)∈ω{hi},
respectively.
Aslast steps, MaxDiffevaluatesthesetofbranches Ω(T).Next, it
computes and returns the value of the maximum difference △hI
(lines6-9).
Another key point of our algorithm is the building of trees. The
executionandcoefficienttreesensuretogroupasetofprobabilities
generatedbythesamesetofexecutions.Inthisway,wecanidentify
the largestandsmallest coefficients ofasimilar setofadversaries.
5.3 Time Complexity
Theorem5.3. ThetimecomplexityoftheMaxCNAlgalgorithm
isO(y·|S|4·|Act|2).
Proof.Given a PMDP M[x]=(S,Act,Q[x],sι,AP,L)and the
vectorx=(x1,...,xm), letIbe a partition on{1,...,m}that
containsy<|x|sub-vectors. MaxCNAlg callsytimes the MaxDiff
function, which takes as input a sub-vector I∈Iand invokes
generatorSubPMDP function at most|S|times. To calculate gen-
eratorSubPMDP ,weanalyzeatmost |S|SCCs.ForeachSCC,we
invokeprune_actions whichcanbeachievedin O(|S|2·|Act|2)time.
Thus,consideringalltheseaspects,thecomplexityof MaxCNAlg is
O(y·|S|4·|Act|2).
6 EXPERIMENTALEVALUATION
In this section, we present two case studies of cloud computing
which were inspired by previous studies [ 3,18,34,35]. As we
present each case study, we describe briefly the MDP model, the
reachability property to be verified and the perturbed set to be
analyzed. For evaluation purposes, we have developed a prototype
implementationofouralgorithmsinPythonanduseditinconjunc-
tion with the probabilistic model checker PRISM [ 20] to extract
basic information about the MDP model. The prototype computes
themaximumconditionnumber(MaxCN)fortheMDPusingthe
algorithmpresentedintheprevioussections.Allourexperiments
havebeenconductedonamachinewith3.06GHzIntelCore2Duo
processorsand8GB RAM.
6.1 ServiceMigration Decision in Cloud
Computing
ThiscasestudyhasbeendescribedinSection2.Inshort,weanalyze
the service migration decision of an FMC controller that decidesTable 1:ExperimentalResults
ModelMDPData MaxCN
(κ)Time(sec)
♯S♯T♯Adv MaxCNAlg ExhAlg
M5,P1
0917320.1111 0.153.28
M5,P2 0.5 0.214.02
M5,P3 0.5 0.102.95
M8,P1
153220480.0102 141.06197.10
M8,P2 0.5202.42288.97
M8,P3 0.111 139.75199.05
whetheraserviceconsumedbyauserandhostedbyaparticular
micro-cloudshouldbemigratedtoadifferent,optimalmicro-cloud.
Thecloudcomputingservicesworkwithinatypical3GPPnetwork
topologyof Nringsofcells.Weperformedexperimentsforsystems
withnetworktopologyof N=5andN=8rings.Wemodeledeach
system as an MDP,where the state space Sis composedof 2N−1
states. The MDP models are denotedas M5andM8respectively.
We wish to verify the maximum probability a user is served by
only one micro-clouduntil
P1auserreachesone ofthe corner cellsofthe topology ;
P2auserreachesoneofthecellinthelastringbetweenthecorners ;
and
P3auserreachesone ofthe corners ofring ⌊N
2⌋.
As mentioned in Section 2, due to the nature of the cloud envi-
ronment and other external factors, the probabilistic transitions
of the model can be affected by small perturbations. We capture
the perturbations in variables x1andx2, which are attached to
theprobabilistic transitionsto states sj
ishown inFigure 2. For the
purposeofestimatingtheworst-caseconsequenceoftheeffectof
theseperturbations,wecomputetheMaxCNforeachmodel.These
experimental results are presentedinTable1.
AscanbeseenfromTable1,foreachmodelinstance,thefirst
four columns show the model and property being verified, plus
thesizeofthemodelintermsofitsnumberofstates,transitions
and(memoryless)adversaries.Theremainingcolumnsshowthe
MaxCN computed for the model and the running time (in seconds)
of our algorithm, denoted as MaxCNAlg . For the sake of evaluating
the performance of our algorithm, the last column gives the run-
ning time of an exhaustive algorithm, denoted as ExhAlg, which
exhaustivelyanalyzesthetotalsetofadversariesintheMDP. Ex-
hAlgcomputestheconditionnumberofeachadversaryandthen
returns the maximum of all computed condition numbers. As indi-
catedbythe boldfaced times,MaxCNAlg outperforms ExhAlgin
allcases.
As Table 1 shows, our experiments have been conducted on
a model with a significant number of adversaries. The number
of adversaries is a critical determinant of performance, since it
representsthesetofpathsandexecutionsthatthealgorithmsneed
to analyze.
Accordingtotherunningtimeofthetwoalgorithms,thetime
computedby MaxCNAlg isalwaysconsiderablysmallerthan Ex-
hAlg. Table 1 also reveals that the running times of the two al-
gorithms are consistent between models, in that the largest and
smallest running times of both algorithms correspond to the same
461Probabilistic Model Checking ofPerturbedMDPs
withApplicationsto Cloud Computing ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany
Table 2:Additional ExperimentalResults for M5
ModelδPrmax△Pr α
(×10−3) (×10−3)(×10−3)
M500.96296 - -
M5
110.96312 0.16±0.5
M5
220.96329 0.33±1.0
M5
330.96346 0.50±1.5
property. For example, the largest running times of ExhAlgand
MaxCNAlg correspondtoP2foreachmodel.Inasimilarway,there
existsacorrelationbetweenP1andP3.Itisimportanttomention
thattheperformanceofouralgorithmissubjecttotheperturbation
input,theunderlyinggraphoftheMDPandthemodelconnectivity.
Toevaluatewhetherourapproachprovidesanaccurateestimate
oftheworst-caseeffectofuncertaintyinthereachabilityverifica-
tionofMDPs,wecomputedtheperturbationestimategenerated
bytheMaxCNAlg algorithm.Forthispurpose,weconductedexper-
iments, depicted in Table 2, on the model M5and the reachability
property P2.
First, we constructed several non-parametric modelswith small
perturbationdistances,denotedas M5
j(j≥1),whicharesimplyin-
stancesof M5withvaluessuppliedforthesymbolicvariables.Sec-
ond, for each such perturbed model, we computed the actual maxi-
mumprobabilityforreachabilityproperty P2,denotedas Prmax
j.
Third,wecomparedtheseactualmaximumprobabilitiesagainstthe
maximumprobabilityfortheunperturbedmodel(withthesymbolic
variablessettozero),computedas △Pr=Prmax
j−Prmax.Lastly,
we calculated theestimate α=±κδasanestimatefor△Pr, which
thus provides an estimate of the worst-case effect of uncertainty
onP2dueto the perturbation.
As shown in Table 2, for each model the estimate αrepresents a
safe prediction of the worst-case effect. For example, for the model
M5
1,giventhat δ=1×10−3,thedifferencebetweentheactualprob-
abilitiesfortheperturbedandunperturbedmodelsis 0.16×10−3,
whichlieswithin the interval [0.96246,0.96346]estimatedby α.
The correlation between the probability verifications of the per-
turbed model Prmax
jand the perturbation estimate αis interesting
becauseitdemonstratesthattheincrementofthesevaluesissub-
ject to the perturbation distance. All these findings reveal that the
predictionoftheworst-caseeffectofuncertaintyinthereachabil-
ity verification of MDPs is captured by the maximum condition
number computedbyour approach.
Another key finding from our work is that the maximum condi-
tion number of P2is generated by a non-optimal adversary (which
doesnotproduceminimumandmaximumsatisfactionprobabili-
ties). This finding demonstrates that the worst-case effect of uncer-
tainty can be generated via adversaries other than those identified
asoptimalbyconventionaltechniques.Ingeneral,thisresultoffers
crucial information for further investigation.
6.2 Confidentialityin Cloud Computing
Inspired by Baldi et al.[3], we study the problem of confidential-
ity provided by data dispersal algorithms against an intruder in
thecloud.DatadispersalalgorithmsprovideamethodforstoringTable 3:ExperimentalData of Mcmodel
ModelδPrmax△Pr α
(×10−3) (×10−3)(×10−3)
Mc00.7839 - -
Mc
110.7833−0.6±1.81
Mc
220.7827−1.2±3.62
Mc
330.7821−1.8±5.43
informationindistinctslicesdispersedacrossmultipleserversin
differentlocations.
We model the behavior of a client that sends a sequence of n
slicestomdistinctserverseachhavingacapacityof cslices,and
an intruder that intercepts the traveling slices and reconstructs
themessagebody.Thesequenceof nslicesconstitutesamessage.
A client can select any server as a storage server with the same
probability.However,aclientcansendaslicetotheselectedserver
onlyiftheserverhasnotreacheditsfullcapacity.Otherwise,the
clienttries again, selecting anotherserver.
The intruder, called the slice attacker , intercepts every slice inde-
pendently from the previously intercepted ones. A slice attacker
needs to intercept at least kslices to reconstruct the message. The
probability that the attackerintercepts aslice successfully is p.
Due to the nature of cloud computing systems, the statistical
estimateof p,whichisassociatedwiththeperformanceofaslice
attacker,couldbeaffectedbysmallperturbations.Weinvestigate
theeffectoftheseperturbationson themaximumprobabilitythata
slice attackermanagesto reconstructamessage .
We model the system as an MDP, denoted as Mc, with the
followingparameters: n=3,m=2,c=3,k=2andp=0.7.The
MDPmodelsizeis 152statesand 373transitions.Thenumberof
adversaries is over 116×1010. In a manner similar to the previous
case study, we built three non-parametric models having a small
perturbationdistancefromtheunperturbedmodel.Theseperturbed
models are denotedas Mc
1,Mc
2andMc
3.
In order to evaluate our approach, we compute the maximum
condition number ofthe unperturbedmodelusing the MaxCNAlg
algorithm. Due to the large number of adversaries, we were un-
abletocompleteanysuccessfulrunof ExhAlgforaperformance
comparison.
Table 3 presents the perturbation estimates generated by our
approach,inamannersimilartoTable2.AscanbeseenfromTa-
ble 3, the maximum probability of the unperturbed model is 0.7839
and the probability of the perturbed models Mc
1,Mc
2andMc
3are
0.7833,0.7827and0.7821,respectively.Thesefindingsshowthat
theprobability ofa perturbed model issubject to the perturbation
distance.Theseresultsareconsistentwiththeexperimentaldata
ofthe previous casestudy.
We can observe in Table 3 that the estimates αprovide an ac-
curate estimate of the worst-case effect of the perturbations. For
instance, for the model Mc
3,αis±5.43, corresponding to the prob-
abilityinterval[0.77847,0.78933].
Theexperimentalresultsforbothcasestudiesshowaclearad-
vantageofouralgorithmovertheexhaustivealgorithm. MaxCNAlg
successfullyandefficientlycomputestheMaxCNofanMDPmodel
withoutanalyzingalladversaries.Likewise,theresultsdemonstrate
462ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany YamiletR. Serrano Llerena, Guoxin Su,andDavidS.Rosenblum
thatour approach providesan accurateestimate of the worst-case
effectofuncertainty onthe reachabilityverification ofMDPs.
7 RELATED WORK
In this section, we briefly discuss previous works related to the
research described in this paper, focusing on the existent works
onprobabilisticmodelcheckingofcloudcomputingsystemsand
studiesthatdealwiththeuncertaintyinthequantitativeverification
ofMDPs.
Recent studies have adopted probabilistic model checking with
thepurposeofanalyzingtheadvantagesandlimitationsofcloud
computingsystems.Forexample,Naskos etal.[23ś25]developedan
approach to enforcing elasticity (the most prominent advantage of
cloud computing) and the provisioning of cloud resources through
dynamicinstantiationandonlinequantitativeverificationofMDPs.
The authors demonstrated that quantitative verification at runtime
also could be beneficial for the management of requirements of
thecloud.Ontheotherhand,researchersatFujitsu[ 17]adopted
probabilistic model checking to construct a performance model of
concurrent live migrations in virtualized data centers. The authors
claim their approach will help cloud administrators to orchestrate
managementoperationsintheircloudsystems.Ourexperiments
complementtheseprevious studies.
In probabilistic model checking, there are previous studies on
Markovmodelswithuncertainties.Sen etal.[29]introduceInterval-
valuedDiscrete-timeMarkovChains(IDTMCs)forwhichtheexact
transition probabilities are given by a closed interval. The authors
consider two semantic interpretations for the uncertainty in the
transition probabilities of an IDTMC: One is Uncertain Markov
Chains (UMCs), a family of DTMCs whose transition probabilities
lie within the interval range given. The other is Interval Markov
Decision Processes (IMDPs), where the uncertainty is resolved
throughnondeterminism.Inaddition,theyintroduceverification
of PCTL properties on IDTMCs. In this context, Puggelli et al.[28]
present P-completeness complexity bounds for an extension of
IMDPs.
Despitethefactthatthescopeofourstudyisofflinequantitative
verification, other approaches, for example Calinescu et al.[4],
ensure that requirements are continuously satisfiedasthesystem
evolves using a combination of continual verification and online
updating of the verified models. Both techniques by their nature
provideadvantagesandlimitations.
Another study that deals with uncertainties in probabilistic
modelcheckingisgivenbyDaws[ 8].Hisstudypresentsalanguage-
theoreticapproachtosymbolicmodelcheckingofPCTLoverDTMCs,
introducing a parametric Markov chain formalism whose transi-
tion probabilities are viewed as letters in an alphabet of a finite
automaton. Hahn et al.[14,15] study the synthesis problem for
reachability and PCTL properties in a parametric version of MDPs,
improving the study of Daws. Similarly, Filieri et al.[11] develop a
mathematical framework for runtime probabilistic model checking,
presentingaparameterizedversionoftheGauss-Jordanelimination
algorithm to address the uncertainty problem in DTMC models for
reliabilityprediction.
Lastly, Su et al.[6,30ś32]introduce a mathematicalframework
for asymptotic analysis in the presence ofsmall perturbations tomodelprobabilities,whichrepresentuncertaintyforprobabilistic
verificationofDTMCsandCTMCs.ForDMTCs,theauthorspresent
a parametric variant of DTMCs for modeling the perturbation, and
theydefinetwoasymptoticbounds,namelyconditionnumbersand
quadraticbounds.Asdiscussedpreviously,itisimpracticaltoapply
thisapproachexhaustivelytotheanalysisofallDTMCsinducedby
adversaries of an MDP, due to the exponential computational com-
plexity.Inthiscontext,ourworkpresentsanefficientasymptotic
approachtoaddresstheeffectof uncertaintyintheverificationof
MDPs.Tothebestofourknowledge,nopreviouspublicationinthe
literature has addressed this problem using perturbation analysis.
8 CONCLUSIONS
In this paper, we present an approach for dealing with uncertainty
theprobabilisticmodelcheckingofMDPs.Ourmaincontributionis
aperturbationapproachthatestimatestheworst-caseconsequence
of the effect of uncertaintyÐwhich is expressed as small pertur-
bationstomodelprobabilitiesÐonthereachabilityverificationof
MDPs. We present an efficient algorithm that captures the effect
of uncertainty in the form of condition numbers, by analyzing the
underlyinggraphoftheMDPandasubsetofoptimalexecutions.
To evaluate theapproach, we implementeda prototype in Python
thatinteractswithPRISM[ 20].Weranexperimentsontwocloud
computing case studies, and the experimental results reveal that
ourapproachisabletoestimatethemaximumeffectofperturba-
tiononquantitativeverificationofreachabilitypropertiesofMDPs,
and it does so with good performance. This work advances the
state-of-the-art in perturbation analysis and probabilistic model
checking ofMDPs.
Thereareseveraldirectionsforfurtherstudy.First,wewillex-
plore efficient approaches for computing bounds through Monte
Carlosamplingofthesetofadversaries.Second,wewilldevelop
techniquesforcomputingperturbationboundsforotherkindsof
properties besides reachability properties such asthe full rangeof
PCTLproperties,rewardproperties,andsoon.
ACKNOWLEDGMENTS
Y.Serrano,G.SuandD.S.Rosenblumweresupportedinpartbythe
SingaporeMinistryofEducationundergrantsR-252-000-458-133
andMOE2015-T2-137-1,andbyagrantfromtheProfilePartnership
between Humboldt-Universität zu Berlin and the National Univer-
sityofSingapore.Y.SerranowassupportedinpartbyaResearch
Scholarship from National University of Singapore. G. Su was sup-
portedinpartbytheNationalNaturalScienceFoundationofChina
under grant 61502260. The authors thank Quang-Trung Ta, Lars
Grunske and Esteban Pavese for their valuable suggestions and
discussions about this research, and the anonymous referees for
theirinsightful comments.
REFERENCES
[1]Husain Aljazzar and Stefan Leue. 2009. Generation of Counterexamples for
ModelChecking of MarkovDecisionProcesses.In QEST. 197ś206.
[2]ChristelBaierandJoost-PieterKatoen.2007. PrinciplesofModelChecking . The
MITPress.
[3]Marco Baldi, Alessandro Cucchiarelli, Linda Senigagliesi, Luca Spalazzi, and
FrancescoSpegni.2016. ParametricandProbabilisticModelCheckingofCon-
fidentiality in Data Dispersal Algorithms. In International Conference on High
463Probabilistic Model Checking ofPerturbedMDPs
withApplicationsto Cloud Computing ESEC/FSE’17,September4ś8, 2017, Paderborn,Germany
Performance Computing & Simulation, HPCS 2016, Innsbruck, Austria, July 18-22,
2016. 476ś483. https://doi.org/10.1109/HPCSim.2016.7568373
[4]Radu Calinescu, Kenneth Johnson, and Yasmin Rafiq. 2013. Developing Self-
VerifyingService-BasedSystems.In 201328thIEEE/ACMInternationalConference
on Automated Software Engineering, ASE 2013, Silicon Valley, CA, USA, November
11-15, 2013 . 734ś737. https://doi.org/10.1109/ASE.2013.6693145
[5]RohitChadha,VijayAnandKorthikanti,MaheshViswanathan,GulAgha,and
YoungMinKwon.2011. ModelCheckingMDPswithaUniqueCompactInvariant
Set of Distributions.In QEST. 121ś130.
[6]Taolue Chen, Yuan Feng, David S. Rosenblum, and Guoxin Su. 2014. Per-
turbation Analysis in Verification of Discrete-Time Markov Chains. In CON-
CUR2014-ConcurrencyTheory-25thInternationalConference,CONCUR2014,
Rome,Italy,September 2-5,2014.Proceedings .218ś233. https://doi.org/10.1007/
978-3-662-44584-6_16
[7]Frank Ciesinski, Christel Baier, Marcus Größer, and Joachim Klein. 2008. Reduc-
tionTechniquesforModelCheckingMarkovDecisionProcesses.In FifthInter-
national Conference on the Quantitative Evaluaiton of Systems (QEST 2008), 14-17
September 2008, Saint-Malo, France . 45ś54. https://doi.org/10.1109/QEST.2008.45
[8]ConradoDaws.2005. SymbolicandParametricModelCheckingofDiscrete-time
Markov Chains. In Proceedings of the First International Conference on Theoretical
AspectsofComputing(ICTAC’04) .Springer-Verlag,Berlin,Heidelberg,280ś294.
https://doi.org/10.1007/978-3-540-31862-0_21
[9]KoushaEtessami,MartaZ.Kwiatkowska,MosheY.Vardi,andMihalisYannakakis.
2008. Multi-ObjectiveModelCheckingofMarkovDecisionProcesses. Logical
MethodsinComputer Science 4,4 (2008).
[10]AntonioFilieriandGiordanoTamburrelli.2013. ProbabilisticVerificationatRun-
timeforSelf-AdaptiveSystems.In AssurancesforSelf-AdaptiveSystems-Principles,
Models,and Techniques . 30ś59. https://doi.org/10.1007/978-3-642-36249-1_2
[11]AntonioFilleri,CarloGhezzi,andGiordanoTamburrelli.2011. Run-timeEfficient
Probabilistic Model Checking. In Proceedings of the 33rd International Conference
onSoftwareEngineering(ICSE’11) .ACM,NewYork,NY,USA,341ś350. https:
//doi.org/10.1145/1985793.1985840
[12]VojtechForejt, MartaZ. Kwiatkowska,GethinNorman,and DavidParker.2011.
Automated VerificationTechniquesfor Probabilistic Systems. In SFM. 53ś113.
[13]Lin Gui, Jun Sun, Songzheng Song, Yang Liu, and Jin Song Dong. 2014. SCC-
Based Improved Reachability Analysis for Markov Decision Processes. In Formal
Methods and Software Engineering - 16th International Conference on Formal
Engineering Methods, ICFEM 2014, Luxembourg, Luxembourg, November 3-5, 2014.
Proceedings . 171ś186. https://doi.org/10.1007/978-3-319-11737-9_12
[14]Ernst Moritz Hahn, Tingting Han, and Lijun Zhang. 2011. Synthesis for PCTL in
Parametric MarkovDecisionProcesses.In NASAFormalMethods . 146ś161.
[15]Ernst Moritz Hahn, Holger Hermanns, and Lijun Zhang. 2009. Probabilistic
Reachabilityfor Parametric MarkovModels. In SPIN. 88ś106.
[16]John Kemeny, James Snell, and Anthony Knapp. 1976. Denumerable Markov
Chains(2 ed.).Vol. 40. Springer-VerlagNewYork.
[17]Shinji Kikuchi and Yasuhide Matsumoto. 2011. Performance Modeling of
Concurrent Live Migration Operations in Cloud Computing Systems Using
PRISMProbabilisticModelChecker.In IEEEInternationalConferenceonCloud
Computing, CLOUD 2011, Washington, DC, USA, 4-9 July, 2011 . 49ś56. https:
//doi.org/10.1109/CLOUD.2011.48
[18]AdlenKsentini,TarikTaleb,andMinChen.2014. AMarkovDecisionProcess-
basedServiceMigrationProcedureforFollowMeCloud.In IEEEInternational
Conference on Communications, ICC 2014, Sydney, Australia, June 10-14, 2014 .
1350ś1354. https://doi.org/10.1109/ICC.2014.6883509
[19]MartaZ.Kwiatkowska,GethinNorman,andDavidParker.2005. Probabilistic
ModelCheckinginPractice:CaseStudieswithPRISM. SIGMETRICSPerformanceEvaluationReview 32,4 (2005), 16ś21.
[20]Marta Z. Kwiatkowska, Gethin Norman, and David Parker. 2011. PRISM 4.0:
Verificationof Probabilistic Real-Time Systems. In CAV. 585ś591.
[21]Marta Z. Kwiatkowska, David Parker, and Hongyang Qu. 2011. Incremental
QuantitativeVerificationfor MarkovDecisionProcesses.In DSN. 359ś370.
[22]RuggeroLanotte,AndreaMaggiolo-Schettini,andAngeloTroina. 2007. Paramet-
ricProbabilisticTransitionSystemsforSystemDesignandAnalysis. FormalAsp.
Comput.19,1 (2007), 93ś109. https://doi.org/10.1007/s00165-006-0015-2
[23]Athanasios Naskos, Emmanouela Stachtiari, Anastasios Gounaris, Panagiotis
Katsaros, Dimitrios Tsoumakos, Ioannis Konstantinou, and Spyros Sioutas. 2014.
Cloud Elasticity using Probabilistic Model Checking. CoRRabs/1405.4699 (2014).
http://arxiv.org/abs/1405.4699
[24]Athanasios Naskos, Emmanouela Stachtiari, Anastasios Gounaris, Panagiotis
Katsaros, Dimitrios Tsoumakos, Ioannis Konstantinou, and Spyros Sioutas. 2015.
DependableHorizontal ScalingBasedon ProbabilisticModelChecking.In 15th
IEEE/ACMInternationalSymposiumonCluster,CloudandGridComputing,CCGrid
2015,Shenzhen,China,May4-7,2015 .31ś40. https://doi.org/10.1109/CCGrid.2015.
91
[25]Athanasios Naskos, Emmanouela Stachtiari, Panagiotis Katsaros, and Anastasios
Gounaris.2015. ProbabilisticModelCheckingatRuntimefortheProvisioningof
Cloud Resources. In RuntimeVerification - 6thInternational Conference, RV 2015
Vienna,Austria,September22-25,2015.Proceedings .275ś280. https://doi.org/10.
1007/978-3-319-23820-3_18
[26]MohsinNazir.2012. CloudComputing:Overview&CurrentResearchChallenges.
IOSRJournal ofComputer Engineering 8,1 (2012), 14ś22.
[27]EskoNuutilaandEljasSoisalon-Soininen.1994. OnFindingtheStronglyCon-
nected Components in a Directed Graph. Inf. Process. Lett. 49, 1 (1994), 9ś14.
https://doi.org/10.1016/0020-0190(94)90047-7
[28]AlbertoPuggelli,WenchaoLi,AlbertoL.Sangiovanni-Vincentelli,andSanjitA.
Seshia. 2013. Polynomial-Time Verification of PCTL Properties of MDPs with
Convex Uncertainties. In Computer Aided Verification - 25th International Confer-
ence,CAV2013,SaintPetersburg,Russia,July13-19,2013.Proceedings .527ś542.
https://doi.org/10.1007/978-3-642-39799-8_35
[29]KoushikSen,MaheshViswanathan,andGulAgha.2006.Model-CheckingMarkov
Chains in the Presence of Uncertainties. In TACAS. 394ś410.
[30]Guoxin Su, Taolue Chen, Yuan Feng, and David S. Rosenblum. 2017. ProEva:
Runtime Proactive Performance Evaluation Based on Continuous-Time Markov
Chains.In Proceedingsofthe39thInternationalConferenceonSoftwareEngineering,
ICSE2017, Buenos Aires,Argentina, May 20-28, 2017 . 484ś495. http://dl.acm.org/
citation.cfm?id=3097426
[31] Guoxin Su and David S. Rosenblum. 2013. Asymptotic Bounds for Quantitative
Verificationof Perturbed Probabilistic Systems. In ICFEM. 297ś312.
[32]GuoxinSuandDavidS.Rosenblum.2014. PerturbationAnalysisofStochastic
Systemswith EmpiricalDistributionParameters. In ICSE. 311ś321.
[33]Tarik Taleb and Adlen Ksentini. 2013. Follow Me Cloud: Interworking Federated
Clouds and Distributed Mobile Networks. IEEE Network 27, 5 (2013), 12ś19.
https://doi.org/10.1109/MNET.2013.6616110
[34]Tarik Taleb, Adlen Ksentini, and Pantelis Frangoudis. 2016. Follow-Me Cloud:
WhenCloudServicesFollowMobileUsers. IEEETransactionsonCloudComputing
PP, 99(2016), 1ś1. https://doi.org/10.1109/TCC.2016.2525987
[35]Shiqiang Wang, Rahul Urgaonkar, Ting He, Murtaza Zafer, Kevin Chan, and
KinK. Leung.2015. Mobility-InducedService MigrationinMobileMicro-Clouds.
CoRRabs/1503.05141 (2015). http://arxiv.org/abs/1503.05141
[36]MahmoodZaigham.2014. CloudComputing:Challenges,LimitationandR&D .
Springer.
464