ALarge-ScaleEmpiricalReviewof
PatchCorrectnessCheckingApproaches
JunYang∗
UniversityofIllinois
Urbana-Champaign
UnitedStates
jy70@illinois.eduYuehanWang∗
UniversityofIllinois
Urbana-Champaign
UnitedStates
yuehanw2@illinois.edu
YilingLou†
FudanUniversity
China
yilinglou@fudan.edu.cnMingWen†
HuazhongUniversity
ofScienceandTechnology
China
mwenaa@hust.edu.cnLingmingZhang
UniversityofIllinois
Urbana-Champaign
UnitedStates
lingming@illinois.edu
ABSTRACT
AutomatedProgramRepair(APR)techniqueshavedrawnwideat-
tention from both academia and industry. Meanwhile, one main
limitationwiththecurrentstate-of-the-artAPRtoolsisthatpatches
passing all the original tests are not necessarily the correct ones
wanted by developers, i.e., the plausible patch problem . To date,
variousPatch-CorrectnessChecking(PCC)techniqueshavebeen
proposedtoaddressthisimportantissue.However,theyareonly
evaluatedonverylimiteddatasetsastheAPRtoolsusedforgen-
eratingsuchpatchescanonlyexploreasmallsubsetofthesearch
spaceofpossiblepatches,posingseriousthreatstoexternalvalidity
to existing PCC studies. In this paper, we construct an extensive
PCCdataset, /u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E (thelargestmanuallylabeledPCCdatasetto
ourknowledge),torevisitallninestate-of-the-artPCCtechniques.
Morespeci/f_ically,ourPCCdataset /u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E includes1,988patches
generatedfromtherecentPraPRAPRtool,whichleverageshighly-
optimizedbytecode-levelpatchexecutionsandcanexhaustivelyex-
ploreallpossibleplausiblepatcheswithinitslargeprede/f_inedsearch
space(includingwell-known/f_ixingpatternsfromvariouspriorAPR
tools). Our extensive study of representative PCC techniques on
/u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E hasrevealedvarious /f_indings,including:1)theassump-
tionmadebyexistingstaticPCCtechniquesthatcorrectpatches
aremoresimilartobuggycodethanincorrectplausiblepatchesno
longerholds,2)state-of-the-artlearning-basedtechniquestendto
suﬀerfromthedatasetover/f_ittingproblem,3)whiledynamictech-
niquesoverallretaintheireﬀectivenessonournewdataset,their
performancedropssubstantiallyonpatcheswithmorecomplicated
changesand4)theveryrecentnaturalness-basedtechniquescan
∗The/f_irsttwoauthorscontributedequallytothiswork.
†Correspondingauthors.
Permissionto make digitalor hard copies of allorpart ofthis work for personalor
classroomuseisgrantedwithoutfeeprovidedthatcopiesarenotmadeordistributed
forpro/f_itorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
onthe/f_irstpage.Copyrightsforcomponentsofthisworkownedbyothersthanthe
author(s)mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,or
republish,topostonserversortoredistributetolists,requirespriorspeci/f_icpermission
and/orafee.Requestpermissionsfrompermissions@acm.org.
ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA
©2023Copyrightheldbytheowner/author(s).PublicationrightslicensedtoACM.
ACMISBN979-8-4007-0327-0/23/12...$15.00
https://doi.org/10.1145/3611643.3616331substantiallyoutperformtraditionalstatictechniquesandcouldbea
promisingdirectionforPCC.Basedonour/f_indings,wealsoprovide
variousguidelines/suggestionsforadvancingPCCinthenearfuture.
CCSCONCEPTS
•Softwareanditsengineering →Softwareveri/f_icationand
validation ;Softwaretestinganddebugging ;
KEYWORDS
Patchcorrectness,Programrepair,Empiricalassessment.
ACMReferenceFormat:
JunYang,YuehanWang,YilingLou,MingWen,andLingmingZhang.2023.
ALarge-ScaleEmpiricalReviewofPatchCorrectnessCheckingApproaches.
InProceedingsofthe31stACMJointEuropeanSoftwareEngineeringConfer-
enceandSymposiumontheFoundationsofSoftwareEngineering(ESEC/FSE
’23),December3–9,2023,SanFrancisco,CA,USA. ACM,NewYork,NY,USA,
13pages.https://doi.org/10.1145/3611643.3616331
1 INTRODUCTION
AutomatedProgramRepair(APR)[ 17,23,47,84]aimsto/f_ixsoftware
bugswithminimalhumaninterventiontospeedupsoftwaredevel-
opment.RecentlyvariousAPRtechniqueshavebeenproposedand
extensivelystudiedinacademia[ 19,28,36,38,61,83]anddrawnwide
attentionfromtheindustry[ 6,41,45,57,58].AtypicalAPRtechnique
/f_irstgeneratesvariouscandidatepatchesbasedondiﬀerentstrate-
gies, such as template-based [ 28,35,36], heuristic-based [ 23,84],
constraint-based[ 17,47,77]andlearning-based[ 10,33,42]ones;
then,itvalidatesallthecandidatepatchesviasoftwaretesting[ 19,
23,42],staticanalysis[ 65],orevenformalveri/f_ication[ 8].Todate,
mostAPRsystemsleveragesoftwaretestingforpatchvalidation
duetothepopularityandeﬀectivenessoftestinginpractice.
Althoughtest-basedpatchvalidationhasbeenshowntobeprac-
tical,itsuﬀersfromthe testover/f_ittingissue –patchespassingall
thetests(i.e., plausiblepatches )maynotalwaysbecorrectforallin-
puts[55]becausesoftwaretestscanhardlycoverallpossibleprogram
behaviorsforreal-worldsystems.Therefore,thedevelopersarerec-
ommendedtomanuallyinspecttheplausiblepatchesto/f_indthe/f_inal
correctones.However,suchmanualinspectioncanbeextremelychal-
lengingandtimeconsuminggiventhelargenumberofpotentially
1203
ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA JunYang,YuehanWang,YilingLou,MingWen,andLingmingZhang
plausiblepatchesandcodecomplexityforreal-worldsystems[ 19].
Torelievetheburden,varioustechniqueshavebeenproposedtoau-
tomatePatch-CorrectnessChecking(PCC)–whilestatictechniques
inferpatchcorrectnessbasedonpatchedcodesnippetsanalysis[ 30,
68,70],dynamictechniquesrelyonruntimeinformationtodeter-
minepatchcorrectness[ 76,80].Inrecentyears,researchershavealso
leveragedtherecentadvancesindeepcodeembeddingforPCC[ 63].
WhileexistingPCCtechniqueshaveshownpromisingresults,
theyaremostlystudiedonlimitedPCCdatasets,sincetheAPRtools
usedforconstructingsuchdatasetscanonly exploreaverysmallpor-
tionofthepossiblepatchsearchspace andareappliedonalimitednum-
berofsubjects.First,theleveragedAPRtoolsoftenincorporateag-
gressivepatchpruningstrategiessoasto/f_ixmorebugsontheirstud-
iedsubjects,whichmakesthesetoolsonlyexploreasmallportionof
thepossiblepatchsearchspaceandmayfailto/f_ixbugsonothersub-
jects.Forexample,theseAPRtoolshavebeenshowntobeover/f_itting
tothestudiedsubjects,e.g., [ 16]showedthatthestudied11tools/f_ix
signi/f_icantlymorebugsinDefects4JV1.2thanotherbenchmarks.In
addition,thewidely-adoptedSimFix/CapGentools[ 23,70]canonly
/f_ix 0and2morebugsrespectivelyonanewerversionofDefects4J
with∼200morebugs[ 19].Inthisway,thepossibleplausiblepatches
arealsomissedbysuchAPRtools,andthusabsentintheresulting
PCCdataset.Second,duetotheeﬃciencyissue,moststudiedAPR
tools(e.g.,SimFix)terminatepatchexplorationassoonasthey/f_ind
the/f_irstplausiblepatch.Inthisway,alargenumberofpossibleplausi-
blepatchescanalsobemissedbysuchtechniques.Forexample,even
including21APRtools,thecurrentlargestmanuallylabeledPCC
dataset[66]onlyhas902patchesforDefects4JV1.2intotal.Third,
mostofthePCCdatasetsarebuiltonthepopularoldversionDe-
fects4JV1.2withalimitednumberofsubjects( i.e.sixsubjects),mak-
ingitunclearwhetherthe/f_indingscangeneralizetoothersubjects.
Inthispaper,weaimtorevisitnineexistingstate-of-the-artPCC
techniqueswithamoreextensiveandreal-worlddatasettomore
faithfullyevaluatetheireﬀectivenessinpractice.Tothisend,we
/f_irstconstructanextensivedataset, /u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E (datasetfor Practical
PatchCorrectnessChecking),forPCCbasedontherecentPraPR
repairsystem[ 19].WechoosePraPRgiventhefollowingreasons:(1)
itsprede/f_inedpatchsearchspaceislarge sinceitappliespopularwell-
known/f_ixingtemplatesfromvariouspriorAPRwork[ 3,53,60],(2)it
istheonlyavailableAPRtool(toourknowledge)thatcanexhaustively
exploretheentireprede/f_inedpatchsearchspace sinceitgeneratesand
validatespatchesbasedonitshighlyoptimizedon-the-/f_lybytecode
manipulation.Inthisway,PraPRcangenerateallplausiblepatches
withinitsclearlyde/f_inedpatchsearchspace,whichcanlargelyavoid
thedatasetover/f_ittingissue[ 19]asanidealcandidateforconstruct-
ingPCCdatasets.WeapplyPraPRtoboththewidelystudiedDe-
fects4JV1.2dataset[ 25]with395bugsandthelatestDefects4JV2.0
datasetwith11additionalsubjectsystemsand401additionalbugs.In
total,ourdataset /u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E contains1,988plausiblepatches,includ-
ing83correctpatchesand1,905over/f_ittingpatchesaftermanualla-
beling.Toourknowledge,thisisthelargestmanuallylabeleddataset
forPCC. Then,basedonournewdatasets,weperformanextensive
studyofpriorPCCtechniques,includingstate-of-the-artstatic[ 30,
62,68,70,71],dynamic[ 76,80],andlearning-based[ 63,81]PCCtech-
niques.Ourempiricalstudyrevealsvarious /f_indingsandprovidevar-
iousguidelines/suggestionsforfurtheradvancingPCCtechniques.
Overall,thispapermakesthefollowingcontributions:•Real-WorldDataset. Wecreatealarge-scalerealisticdataset,
/u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E , for PCC. To our knowledge, this is the /f_irst dataset
basedonexhaustivepatchsearchspaceexploration,aswellas
thelargestmanuallylabeledpatchdatasetforPCCtodate.
•ExtensiveStudy. Weperformanextensivestudyofstate-of-the-
artPCCtechniques,includingstatic,dynamic,andlearning-based
ones,onournewlyconstructeddataset.Intotal,ourexperiments
cost580CPUdays,includingstaticanalysis,codeembedding,test
generation,andtestexecutionforallpatcheswithinourdataset.
•PracticalImpacts. Ourempiricalstudyrevealsvarious results
thecommunityshouldbeawareof,aswellasprovidingvarious
practicalguidelinesforfuturePCCwork,e.g.,thedynamicPCC
techniquescannolongerworkforpatchesonmorecomplexand
real-worldbugsandshouldbelargelyimproved.
2 BACKGROUNDANDRELATEDWORK
In this section, we /f_irst introduce the background on automated
programrepairandpatchcorrectnesschecking,andthenmotivate
ourstudybysystematicallyrevisitingdatasetsusedintheliterature.
AutomatedProgramRepair. AutomatedProgramRepair(APR)[ 17,
23,28,36,47,61,83,84]aimsat/f_ixingbugswithminimalhuman
intervention.ResearchershaveproposedvariousAPRtechniques,
whichcanbecategorizedaccordingtohowpatchesaregenerated:(1)
Heuristic-basedAPR [32,54,84]leveragesheuristics toexplorethe
searchspaceofpatches;(2) Template-basedAPR [28,35,36]incorpo-
ratespatternssummarizedfromhistoricaldeveloperpatchestoguide
patchgeneration;(3) Constraint-basedAPR [17,47,77]leveragescon-
straint solving to directly synthesize patches; (4) Learning-based
APR[10,33,42,72,73,85]utilizeslearningtechniques,includingre-
centLargeLanguageModels(LLMs)[ 4,9,43,50,64,67],togenerate
patches.APRtoolsthenleveragesoftwaretesting[ 19,23,42],static
analysis[ 65],orevenformalveri/f_ication[ 8]tovalidatethepatches.
PatchCorrectnessChecking. MostAPRtechniquesrelyonsoft-
wareteststovalidatepatches,assumingthatpatchesthatpassalltests
arecorrect.However,thisassumptioncanbeproblematicastestsmay
notdetectallpossiblebugs.Toaddresstheissueofover/f_ittingpatches,
PatchCorrectnessChecking(PCC)[ 29]techniqueshavebeenpro-
posedtodiﬀerentiateover/f_ittingpatchesfromcorrectpatches.
There are two application scenarios for PCC techniques, with
oraclepatchinformation orwithout.Inthe oracle-based scenario,the
plausiblepatchesthatexhibitdiﬀerentlyfromtheoraclepatchare
deemedasover/f_itting. Notethat oracle-based PCCisusuallyused
forAPRexperimentation,andcannotbeappliedtoreal-worldbug
/f_ixingwheretheoraclepatchinformationisunavailable.Incontrast,
oracle-absent PCCcanidentifypotentialover/f_ittingpatcheswithout
oracle,thuscanbeappliedinreal-worldbug/f_ixing.Therefore,we
onlyfocusonthe oracle-absent techniques.
Accordingtowhetherdynamicpatchexecutioninformationis
required,traditionalPCCtechniquescanbecategorizedinto static
anddynamictechniques.Inparticular,statictechniquesleverage
static code features [ 30,68,70], pre-de/f_ined anti-patterns [ 62] or
evencodenaturalness[ 71]topredictpatchcorrectness.Dynamic
techniquesleveragerun-timeinformation,suchascrashormemory-
safety issues used in Opad [ 80] and test execution traces used in
Patch-Sim[ 76].Recently,researchershavealsostartedexploring
advancedmachinelearninganddeeplearningtechniquesforPCC.
1204ALarge-ScaleEmpiricalReviewofPatchCorrectnessCheckingApproaches ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA
Seminal research [ 81] characterizes patch code with pre-de/f_ined
features, while more recent work [ 11,63] directly encodes patch
codeviaembeddingmodels(e.g.,BERT[ 15])andlearnstopredict
theprobabilityofeachpatchesbeingover/f_itting.
ExistingPCCDatasets. Werevisittheexistingpeer-refereedlit-
eratureonautomatedprogramrepairandPCCbasedontheAPR
review[49]before2022,andsummarizethedatasetsusedintheir
evaluation.Table 1presentsthecharacteristicsofdatasetsusedin
existingwork. NotethatforthepatchesgeneratedbyAPRtools,
wecheckwhethertheearlystopmechanismisenabledduringAPR
procedureasshowninColumn“Earlystop”.Fromthetable,wecan
/f_indthatalthoughinvolvingvariousAPRtools,subjects,andpatches,
existingPCCdatasetscanstillbeinsuﬃcientforevaluatingPCC,
sincetheycanonlyexploreaverysmallportionofthepossiblepatch
searchspaceon limitedbugs duetothefollowingreasons.
First,existingdatasetsmainlyincludetheplausiblepatchesgener-
atedbyover/f_ittingAPRtools,whichincorporateaggressivepruning
strategiesandthuscouldonlyexploreasmallratioofpatchsearch
spaces.Asshowninrecentwork[ 16,19],mostexistingAPRtoolsare
over/f_ittingtotheDefects4JV1.2[ 25]benchmark.Themainreasonis
thatsuchAPRtoolsoftenleverageaggressiveandspeci/f_icpatchprun-
ingstrategiessoasto/f_ixmorebugs,whichcouldexploreasmallratio
ofpatchsearchspacesandmaysuﬀerfromthedataset-over/f_itting
issue[61].Forexample,therecentSimFix/CapGentools[ 23,70]can
only/f_ix0/2morebugsonadditional ∼200morebugs[ 19];also,11
APRtoolshavebeenshowntoperformsubstantiallyworseonother
benchmarksthanthewidely-usedDefects4JV1.2[ 16].Inthisway,
thepossibleplausiblepatchesthatshouldhavebeengeneratedare
missed,andthusabsentintheresultingPCCdataset.
Second, existing datasets only include the /f_irst one/fewplausible
patchesgeneratedbyAPRtoolsduetoeﬃciencyissue. Asshownin
thetable,mostAPRtools(e.g.,SimFix[ 23])employthe earlystop
mechanism,whichterminatespatchexecutionassoonasthey/f_ind
the/f_irstplausiblepatchforthesakeofeﬃciency.Therefore,existing
PCCdatasetmaymissalargenumberofpossibleplausiblepatches
thatcanbepotentiallygeneratedbytheseAPRtools.Accordingto
Nolleretal.[51],developersexpectAPRquickly(30-60min)generate
5-10patcheseachbug.Butamongthe16APRtoolsstudiedin [ 38],
themosteﬀectiveone,SimFix,setatimeoutof300minutesforeach
bugbutonlygenerated68patchesonDefects4JV1.2.Therefore,APR
toolsforpreviousdatasetsareneitherpracticalnoreﬃcient.Infact,
evenwith21APRtools,theexistinglargestmanuallylabeledPCC
dataset[66]hasonly902patchesforDefects4JV1.2;meanwhileasin-
gleAPR(i.e.,SequenceR[ 10])canonlygenerateatmost73patches.
Third,mostPCCdatasetsarebuiltonthepopularDefects4JV1.2(old
version)withonlysixsubjects,makingitunclearwhetherthe/f_indings
cangeneralizetoothersubjects(e.g.,thenewerversionDefects4JV2.0
with11moresubjects). Asshowninthetable,themajorityofexisting
PCCdatasetsaregeneratedfromthesubjectsinthemostwidely
usedbenchmarkDefects4JV1.2.Therefore,itremainsunknownhow
existingPCCtechniquesperformonpatchesfromothersubjects.
Toaddressthelimitationsabove,inthiswork,weconstructamore
extensiveandreal-worlddataset, /u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E ,soastorevisitallrepre-
sentativePCCtechniques.Inparticular,ourdataset /u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E isbuilt
ontheplausiblepatchesgeneratedbytherecentbyte-codelevelAPR
toolPraPR[ 19].WechoosePraPRsince1)its prede/f_inedpatchsearch
spaceislargesinceitappliespopularwell-known/f_ixingtemplatesfromvariouspriorAPRwork[ 3,53,60],and2)itisthebaselineAPR
toolthatcanexhaustivelyexploretheprede/f_inedpatchsearchspace
duetoitshighlyoptimizedon-the-/f_lybytecodemanipulation.Here,
theprede/f_inedpatchsearchspace referstoallthepossiblepatchesthat
anAPRtoolcouldtheoreticallygenerateforagivenbug(withallits
applicable/f_ixpatternsinallsuspiciousbuggylocations).Forexample,
thetemplate-basedAPRtoolsPraPRandTBarcouldgenerate3,704
and3,375patches(whicharetheprede/f_inedpatchspaceforPraPR
andTBar)withtheirownde/f_ined/f_ixpatternsforthebugChart-1,
respectively.An exhaustiveexploration meansthatallthepatchesin
theprede/f_inedpatchsearchspacearegeneratedandvalidatedbythe
APRtool.Typically,existingAPRtoolssuﬀerfromlargesearchspace
andtime-consumingnon-trivialvalidation,therefore,theycannot
aﬀordtheexhaustiveexplorationandadopttheearlyexitmechanism
tocontroltheexplorationcosts;whilePraPRistheonlytoolthatis
abletoperformtheexhaustiveexplorationsinceitshighlyoptimized
on-the-/f_lybytecodemanipulationsigni/f_icantlyacceleratesthepatch
validation.Inparticular,PraPRishighlyeﬃcient,becauseitdoes
notrequirecompilation(itdirectlygeneratespatchesonbytecode
level)anditcanvalidateabunchofpatchesinoneJVM.Forexample,
for the bug Chart-1, it only takes PraPR 149s in total to generate
& validate all the 3,704 patches while it would take TBar 34s for
evenvalidatingonesinglecompilablepatch.Inthisway,PraPRcan
generateallplausiblepatcheswithintheclearlyde/f_inedpatchsearch
space,whichotherAPRtoolsfailtoreach.Furthermore,inaddition
tothemostwidelyusedDefects4JV1.2dataset[ 25],wefurtherapply
PraPRtothemostrecentversionofDefects4Jdataset,i.e.,Defects4J
V2.0with11additionalsubjectsystemsand401additionalbugs.
3 DATASETCONSTRUCTION
3.1 Subjects
Ourdatasetsareconstructedwithpatchesgeneratedforthesubjects
inDefects4J[ 25]duetothefollowingreasons:1)Defects4Jcontains
hundredsofrealbugsforreal-worldprojectsandhasbecomethe
mostwidelystudiedAPRbenchmarkintheliterature,2)mostprior
PCCstudieswereperformedonDefects4J[ 25,63,66,74,76,82], thus
enablingamoredirect/faircomparisonwithpriorwork.Weinclude
allsubjectsfromDefects4JV1.2(with395bugsfrom6projects)since
itisthemostwidelyusedDefects4JversioninpriorAPRandPCC
work[25,63,66,68,70,74,76,82].Furthermore,wealsostudythelat-
estDefects4JV2.0,whichincludes11additionalprojectswith401ad-
ditionalbugs(17projectswith796bugsintotal),tostudythedataset
over/f_ittingissueofexistingPCCwork,i.e.,whetherthepriorPCC
experimentalresultscangeneralizetothenewerDefects4Jversion.
Pleaserefertoourwebsite[ 79]fordetailedstatisticsofsubjects.
3.2 PatchCollection
PlausiblePatchCollection. Foreachstudiedbuggyversionfrom
Defects4J,we/f_irstrunPraPRonittogenerateallpossibleplausible
patches(i.e.,thepatchespassingallthetests)inthebytecodelevel.We
furtherdecompilethesebytecode-levelplausiblepatchesintosource-
code-levelpatchessinceexistingPCCtechniquesworkatthesource-
codelevel.Wemakethefollowingeﬀortstoensurethedecompilation
processaspreciseaspossible.First,wecon/f_igurePraPRtoincludeall
therequireddebugginginformationintheresultingbytecode-level
patches. Second, we leverage the state-of-the-art decompiler JD-
Core[1]todecompilepatchedbytecode/f_iles.Third,weonlylocate
1205ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA JunYang,YuehanWang,YilingLou,MingWen,andLingmingZhang
Table1:DatasetsusedinexistingPCCwork
Work Studiedtechnique Scale RatioDatasetsource
(correct/over/f_itting) Subjectsource Patchsource Earlystop
Tanetal.[62]Anti-patterns 289 30/259 CoREBench[ 7],GenProg[ 32]AllfromAPRtools
GenProg,mGenProg[ 62],SPR[40],mSPR[62]4/4
Xinetal.[74] DiﬀTGen 89 10/79 Defects4JV1.2AllfromAPRtools
jGenProg,jKali,NPolandHDRepair4/4
Leetal.[30] S3 85 25/60 100bugsfrom62subjectsAllfromAPRtools
S3,Enumerative[ 56],CVC4[56],Angelix[ 48]4/4
Yangetal.[80] Opad 449 22/427 45bugsfrom7subjectsAllfromAPRtools
GenProg,AE[ 69],Kali[55],andSPR4/4
Xinetal.[68] ssFix 153 122/31Defects4JV1.2
excludeMockitoAllfromAPRtools
ssFix,jGenProg,jKali[ 46],Nopol,HDRepair[ 31],ACS5/5
Xiongetal.[76]Patch-Sim 139 29/110Defects4JV1.2
excludeClosure,MockitoAllfromAPRtools
jGenPro[ 46],Nopol[ 78],jKali,ACS[ 77],HDRepair5/5
Yeetal.[82] RGT 638 257/381 Defects4JV1.2AllfromAPRtools
ACS,Arja,CapGen,etc.,14toolsintotal10/14
Wenetal.[70]CapGen[ 70]202 28/174Defects4JV1.2
excludeClosure,MockitoAllfromAPRtools
CapGen0/1
Xinetal.[75]sharpFix[ 75]82 56/26Bugs.jar
127bugsfrom7projectsinBugs.jarAllfromAPRtools
sharpFix,ssFix[ 68]2/2
Tianetal.[63]Embedding-based 1,000 468/532 Defects4JV1.2778fromAPRtools
RSRepair-A[ 84],jKali,ACS,SimFix[ 23],TBar[37],etc.,17toolsintotal
232fromdeveloperpatches (*Supplementedtobalancethedataset)12/17
Wangetal.[66]12PCCtechniques 902 248/654 Defects4JV1.2AllfromAPRtools
jGenProg,DynaMoth[ 17],SequencR[ 10],etc.,21toolsintotal16/21
Linetal.[34] Cache 49,694 25,589/24,105 RepairThemAll[ 16],ManySStuBs4J[ 26]Over/f_ittingpatchesfromAPRtoolsandcorrectpatchesfromdeveloperpatches
jGenProg,jKali,Nopol,etc.,11APRtoolsintotalandhumanpatches11/11
Yeetal.[81] ODS 10,302 2,003/8,299 RepairThemAll,Defects4JV2.0developerpatchesOver/f_ittingpatchesfromAPRtoolsandcorrectpatchesfromdeveloperpatches
jGenProg,jKali,Nopol,etc.,11APRtoolsintotalandhumanpatches11/11
/u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E 9PCCtechniques 1,988 83/1,905 Defects4JV2.0AllfromAPRtools
PraPR0/1
thepatchedlineinthedecompiled/f_ile(notethatPraPRonlychanges
onelineonbytecodelevelpatches),andpatchtheoriginalbuggy
source/f_iletoobtainapotentialpatchatthislevel.Finally,weperform
thesanitychecktoensurethedecompiledsource-code-levelpatches
indeedpassallthetests.Finally,weobtain1,988plausiblepatches.
PatchCorrectnessIdenti/f_ication. Foreachplausiblepatch,we
thenmanuallydetermineitscorrectnessbycomparingittothedevel-
operpatch.Wefollowthelabelingprocedureinpreviouswork[ 38]
and the patches that satisfy the following criteria are labeled as
correct:(1)thepatchesaresyntacticallyidenticaltothedeveloper
patches,or(2)thepatchesaresemanticallyequivalenttothedevel-
operpatchesaccordingtotherulessummarizedbyexistingwork[ 38].
Duetospacelimits,thedetailedrulesarelistedonourwebsite[ 2].
Otherwise,thepatchesarelabeledasover/f_itting.Weinvolvethree
participantswith3+yearsJavadevelopmentexperienceintheman-
uallabelingprocedure:twoparticipants/f_irstlabeleachplausible
patchindividually,andathirdparticipant isthenintroducedtore-
solvethecon/f_licts. Theagreementratioofthe/f_irsttwoparticipantsis
98.99%,andthereare20outof1,988patches(1.01%)thatreceivecon-
/f_lictannotationsfromthetwoparticipants.Forthese20con/f_lictcases,
thethirdparticipantwould/f_irstre-checkwhethertheyfollowtheten
semantically-equivalentrules.Ifthecaseisnotcoveredbytherules,
he/she would determine the correctness of the plausible patches
basedontheprojectcontextaswellasthereferencetotheissuelink
orbugreport.Inthisway,amongallthe1,988newplausiblepatches,
83arelabelledascorrectand1,905labelledasover/f_ittingones.
4 STUDYDESIGN
4.1 ResearchQuestions
Basedonournewlyconstructeddatasets,werevisitallstate-of-the-
artPCCtechniquesviathefollowingresearchquestions:
•RQ1:Howdoes staticPCCperformonourdatasets?
•RQ2:Howdoes learning-based PCCperformonourdatasets?
•RQ3:Howdoes dynamicPCCperformonourdatasets?4.2 StudiedTechniques
Ourstudyselectsexistingstate-of-the-arttechniquesthatarede-
signedfororcanbeadaptedtothePCCtask.Speci/f_ically,theselected
techniquescanbebroadlycategorizedintothreecategories,includ-
ingstatic,dynamic,andlearning-based techniques.Weonlyinclude
thosetechniquesthatdonotrequiretheoracleinformation(i.e.,the
developerpatches)sincethepracticalusefulnessofthosetechniques
requiringtheoracleinformationiscompromised[ 66].
4.2.1 StaticTechniques. Wangetal.haveempiricallyinvestigated
theeﬀectivenessofstaticfeaturesextractedfromthreetools[ 66],
namelyssFix[ 68],S3[30]andCapGen[ 70],andthenutilizedsuch
featurestocheckpatchcorrectness.Weuseidenticalexperiment
settingsandmethodologytoassesspatchcorrectnessinnewdataset.
S3:S3proposedsixfeaturestomeasurethesyntacticandsemantic
distancebetweenpatchedcode andtheoriginalbuggycode[ 30].
Amongthem, ASTdiﬀerencing andcosinesimilarity areutilizedto
prioritizeandidentifycorrectpatches.Speci/f_ically,thesumofthese
featuresiscomputedasthesuspiciousnessscore.Patcheswithhigher
scoresaremorelikelytobeover/f_ittingaccordingtotheprevious
study[5]whichclaimscorrectpatchesaremoresimilartotheoriginal
buggycode,andthuspossessfewermodi/f_ications.Inaddition,weex-
cludetheotherthreefeaturesinthisstudyfollowingpriorwork[ 66].
Speci/f_ically, modelcounting andoutputcoverage areexcludedsince
theycannotbegeneralizedtoallthegeneratedpatches[ 66].Besides,
Anti-patterns utilizedinS3isexcludedheresinceweutilizeitasa
stand-alonetool,followingthepreviousstudy[ 66].
ssFix:ssFixfocusedonthetoken-basedsyntaxrepresentationof
codetoidentifysyntax-relatedcodefragmentstogeneratecorrect
patches.Speci/f_ically, structuraltokensimilarity andconceptualtoken
similarity arecalculatedtomeasurethesimilaritybetweenthebuggy
codeandpatchedcode.Similarto S3,thesumofthesefeaturesis
usedtorankpatches.Patcheswithhigherscoresarerankedhigher.
CapGen: CapGendesignedthreecontext-awarefeaturestopri-
oritizecorrectpatchesoverover/f_ittingones,namelythe genealogy
1206ALarge-ScaleEmpiricalReviewofPatchCorrectnessCheckingApproaches ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA
similarity ,variablesimilarity ,anddependencysimilarity respectively.
AlthoughsuchfeaturesarenotinitiallyproposedforPCC,theycan
stillbeadaptedtoassesspatchcorrectnessfromtheviewofstatic
features.Speci/f_ically,followingtheexistingstudy[ 66],theproduct
ofthesesimilarityscoresisusedtorankandprioritizepatches,and
patcheswithhigherscoresareconsideredmorelikelytobecorrect.
Fortheabovethreestatictechniques,weapplytheTop-Nstrategy
toidentifycorrectpatchesfollowingpriorwork[ 66].Speci/f_ically,the
Top-Nprioritizedpatchesarelabeledascorrectwhileothersasover-
/f_itting,whereNisthenumberofcorrectpatchesinourdatasetfollow-
ingpriorstudies[ 66].TomitigatetheeﬀectofN,wealsoshowtheav-
eragerankingofcorrectpatchesperbug(i.e.,denotedasAVR)toeval-
uatetheabilityofprioritizingcorrectpatches(detailedinSection 4.4).
Anti-patterns: Anti-patternsprovidesasetofgenericforbidden
transformationstohelpobtainprogrampatcheswithhigherqualities
withminimaleﬀort.ToapplytheseAnti-patternsonourowndataset,
we/f_irstmaptheAnti-patternstoPraPR’smutationrules[ 19]through
manualinspection.Iftherulesfallintoaspeci/f_icpattern,wedeem
thosepatchesgeneratedbythemutationruleasover/f_itting.Sucha
strategyisthesameasthatadoptedbytheexistingstudy[ 66].Inthis
way,weobservethatpatchesgeneratedbyPraPRmainlyfallinto
fourofthesevenanti-patterns,includingA1: Anti-deleteCFGExit
Node,A2:Anti-deleteControlStatement ,A5:Anti-deleteLoop-Counter
andA6:Anti-appendEarlyExit .Therefore,weclassifythepatches
thatfallintotheserulesasover/f_ittingandtheothersascorrect.
CodeNaturalness: Crossentropy[ 14]forcodemeasuresthenat-
uralnessofcodeagainstthecodelanguagemodel[ 20].Veryrecently,
researchershaveshownthatcodenaturalnessintermsofentropy
valuescomputedbyLLMscanhelprankpatchesforfasterprogram
repair[27,72].Furthermore,Xia etal.[71]demonstratedforthe/f_irst
timethatitispossibletousesuchentropyvaluestoperformpatch
correctnesschecking,i.e., correctpatchescanbemorenaturalthan
over/f_ittingpatches. However,thereisnocomprehensivestudyon
howsuchentropy-basedtechniquesperforminPCCdatasetstoour
knowledge.ForalistoftokensinthecorpusofLLM,themeanentropy
canbecalculatedasthenegativelogprobabilityofeachtokenas
/u1D45A/u1D452/u1D44E/u1D45B_/u1D452/u1D45B/u1D461/u1D45F/u1D45C/u1D45D/u1D466.alt=−/summationtext.1/u1D45B
/u1D456=1/u1D459/u1D45C/u1D454(/u1D45D/u1D461/u1D456)
/u1D45B,where/u1D461/u1D456referstotheithtokenofthe
sequenceand /u1D45D/u1D461/u1D456referstothemodelprobabilityoftoken /u1D461/u1D456.Similarly,
thesumentropycanbecomputedas /u1D460/u1D462/u1D45A_/u1D452/u1D45B/u1D461/u1D45F/u1D45C/u1D45D/u1D466.alt=−/summationtext.1/u1D45B
/u1D456=1/u1D459/u1D45C/u1D454(/u1D45D/u1D461/u1D456).
Patcheswithlowersumormeanentropiesareconsideredmore nat-
uralandwillberankedhigher.Inourevaluation,weusethemodel
CodeT5-large[ 67],andfollowthesameexperimentalsettingwith
priorwork[ 71].Forentropy-basedtechniques,weonlyuseAVR
(asdescribedinsection 4.4)toevaluatetheeﬀectivenessofpatch
rankingsincetheentropyisdependentonthecontextofbugsand
improperforcomparingpatchesacrossdiﬀerentbugs.
4.2.2 DynamicTechniques. Dynamictechniquescancapturetest-
ingbehaviorandresultforpatchassessment. Speci/f_ically,weinclude
SOTAtechniqueswidelystudiedintheliterature[ 66,76,80]:
Opad:Opad is designed based on the hypothesis that patches
shouldnotintroducenewcrashormemory-safetyproblems [80].There-
fore,anypatchviolatingthoserulesisregardedasover/f_itting.Note
thatOpadisoriginallydesignedforCprogramsutilizingfuzzing
techniquestogeneratenewtestcases.ToadaptitonJava,welever-
agetwostate-of-the-arttestgenerationtools,i.e., Evosuite[18]and
Randoop [52], to generate test cases based on the buggy version.Opadbasedon EvosuiteandRandooparedenotedasE-Opadand
R-Opadrespectively,followingthepreviousstudy[ 66].Speci/f_ically,
forEvosuiteandRandoop,wegenerate30testsuitesforeachbuggy
programwithatimebudgetof600secondsforeachtestsuiteutilizing
existingtestgenerationmoduleinDefects4Jframework.We/f_inally
successfullygenerate44,937testsuiteson796buggyprogramsin
total.Aftertestgeneration,we/f_irstrunthegeneratedtests(for/f_ive
times)ontheoriginalbuggyprogramstoremove/f_lakytests.After
that,weruntheremainingonesonthepatchedprograms.Ifany
crashoccursoranyexceptionisthrown,Opadwillidentifythepatch
asover/f_itting,otherwiseitwillidentifythepatchascorrect.
Patch-Sim: Patch-Simisasimilarity-basedPCCtoolutilizing
thetestsgeneratedbyautomatedtestgenerationtools(Randoopin
theoriginalstudy[ 76]andbothRandoopandEvosuiteinWang et
al.’sstudy[66])asthetestinputs.Itassumesthattestswithsimilar
executionsarelikelytohavesimilarresults.ThebasicideaofPatch-
Simisthat,ifthepatchedprogrambehavessimilarlyonthepassed
testsandbehavesdiﬀerentlyonthefailedtestscomparedwiththe
originprogram,thepatchtendstobecorrect.Patch-Simproposesto
calculatethesimilarityofprogramexecutionbehaviors(denotedas
patchdistance ),andthenclassi/f_iespatcheswithit.Notethatinthe
originalstudy,Xiong etal.usedRandooptogeneratetestsuites[ 76].
Besides,accordingtoWang etal.’sstudy[66],thetestsgeneratedby
RandoopperformbetterthanthosebyEvosuite.We,thus,choose
Randoopasthetestgenerationtoolinthisstudy.ToapplyPatch-Sim
on/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2, we generate 6,570 test cases for related projects in
totalbyourselves.Combiningwiththetestsuitesgeneratedbythe
existingstudy[ 66],weobtain10,404testcasesforPatch-Sim.
4.2.3 Learning-basedTechniques. BesidesthetraditionalPCCtools,
weincludenovellearning-basedembeddingtechnique(hereafterde-
notedasEmbedding ).WealsoincludeODSproposedbyYe etal.[81]
whichaimstolearnpatchcorrectnessviafeatureengineering.Lin et
al.[34]proposedCachewithsimilarideasbuttheirtoolsarecur-
rentlynotexecutableduetobrokenscriptsandincompleteartifacts.
Embedding: CodeEmbedding cantransformsourcecodeinto
distributedrepresentationsas/f_ixed-lengthvectorsbyutilizingsu-
pervisedmachinelearningalgorithms.Tian etal.initiallyproposed
utilizing code embedding techniques to identify correct patches
amongplausibleones[ 63].Tobespeci/f_ic,Tian etal.fedboththe
buggyandpatchedcodefragmentforeachpatchtoembeddingmod-
els(e.g.,BERT[ 15])toobtainembeddingvectors.Aftergenerating
theinitialvectors,theymergedthepairofvectorsforeachpatch
accordingtotheclassi/f_icationalgorithm[ 21].Withtheembedding
vectors,Tian etal.capturedthecrossedfeatures(e.g.,cosinesimilar-
ity)requiredintheclassi/f_ication.Intheend,thesefeatureswerefed
totheclassi/f_ierforidentifyingifthepatchiscorrectorover/f_itting.
Otherembeddingtechniques[ 11,12]mostlyfollowhighlysimilar
ideasandcannotoutperformTian etal.’swork[63].Therefore,we
utilize the best-performing model in Tian et al.’s study, denoted
asBERT-LR,astherepresentativeinthisstudyforfurtherinvesti-
gation.Speci/f_ically,weappliedthemodellearnedbytheBERT-LR
methodtoourdataset,toinvestigatehowitperforms.Followingthe
experimentalsettingasadoptedbytheexistingstudy,weutilizethe
datasetusedin[ 63]fortrainingandourcollectedbenchmarkfor
testing.Notethatwe/f_ilteredoutthoseoverlappingpatchesbetween
Tian’sandourdatasetsinthetrainingprocess.
1207ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA JunYang,YuehanWang,YilingLou,MingWen,andLingmingZhang
ODS:ODS(Over/f_itting DetectionSystem)extractsalargenumber
ofstaticcodefeaturesandleveragesensemblelearningbasedonde-
cisiontreestopredictpatchcorrectness[ 81].Foragivenpatch,ODS
extracts202codefeatures,including150codedescriptionfeatures
representingthecharacteristicsofthepatch’singredientsandits
contextatdiﬀerentgranularity,26repairpatternfeaturesencoded
withhumanknowledgeonrepairstrategiesand26contextualsyn-
tacticfeaturesthatencodethescopeandsimilarityinformationin
thesourcecode.ToevaluateODSinourdataset,wefollowtheexperi-
mentalsetupintheoriginalpaper[ 81].We/f_irstusethecodeanalyzer
providedbyODStoextractfeaturesofpatchesinourdatasetand
thenreusethemodeltrainedbytheauthorsforprediction.
4.3 StudiedDatasets
Table2:Thepatchdatasetsinthisstudy
SubdatasetID Subjects APRTools #Patch #Over/f_it #Correct
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2Defects4JV1.2 PraPR 1,311 1,264 47
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0Defects4JV2.0 PraPR 1,988 1,905 83
/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0Defects4JV2.0 PraPR+21tools 2,760 2,489 271
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0Defects4JV2.0 PraPR+21tools 542 271 271
4.3.1/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2.Wanget al.[66] collected patches on Defects4J
V1.2 from 21 APR tools, including 16 APR tools evaluated under
the same con/f_iguration by a previous study [ 38] and other well-
knownAPRtoolsthatwerenotincludedin[ 38],includingJAID[ 8],
SketchFix[ 22],CapGen[ 70],SOFix[ 39]andSequenceR[ 10].They
performedaplausibilitychecktoseewhethertheselectedpatches
areindeedplausibleanddiscardedothers.Finally,theyobtained902
patchesintotal,including248correctand654over/f_ittingpatches.
4.3.2/u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E .TheplausiblepatchescollectedfromSection 3.2
constituteourmainsubdataset /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0,with1,988plausiblepatches
generatedbyPraPRonDefects4JV2.0.Basedonthemaindataset,
wefurtherconstructthreesub-datasetsformorethoroughstudyof
PCCwork.Table 2presentsthedetails.
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2. Thisdatasetincludesall1,311plausiblepatchesgen-
eratedbyPraPRonDefects4JV1.2,separatedfromthemaindataset
tocomparewithpriorPCCstudiesonthesameDefects4Jversion.
/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0.ThoughPraPRcontainsoverlappingpatch/f_ixingpat-
ternswithmanyotherAPRtools,itisstillimportanttoconsider
patchesfromotherAPRtoolsformorecomprehensivePCCevalu-
ation.Hence,wefurthercombineour /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0withtheexisting
largestlabeleddatasetderivedfromAPRtools,i.e., /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2[66]that
includes902plausiblepatchesgeneratedby21otherAPRtools.After
carefullyremovingtheduplicatesbetween /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2andourdataset,
we/f_inallyobtain2,760plausiblepatchesinthismergeddataset.
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0.Table2showsthatthe /u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0datasetislargely
imbalanced with mostly over/f_itting patches. While PCC studies
frequentlyleverageimbalanceddatasets,wefurtherconstructabal-
anceddatasetbasedon /u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0formorethoroughevaluations.
Speci/f_ically, we keep all correct patches from /u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0and ran-
domlysamplethesamenumberofover/f_ittingpatches. Tomitigate
thebiasinrandomness,werepeattherandomsamplingprocessfor
tentimesandpresenttheaverageresultson /u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0.
Toourknowledge,thedatasetsnewlyconstructedinthisworkare
thelargestmanuallylabeleddatasetsforevaluatingPCC.Forexam-
ple,PraPRalonegenerates1,988plausiblepatcheswhiletheexistinglargestPCCdatasethasonly902plausiblepatches(Lin etal.[34]and
Yeetal.[81]havedatasetswith~50,000and~10,000patchesbutthey
arenotmanuallylabeled).Inaddition,mergingthepatchesgener-
atedbyPraPRwiththeexistingdatasetscouldfurtherformalarger
labeleddataset(i.e., /u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0).Thelargescaleofournewdatasets
iscreditedtothehigheﬃciencyandexhaustivesearchstrategiesof
PraPR,whichhelpcollectmanyplausiblepatchesthataremissed
bytheotherAPRtoolsduetotheireﬃciencyissuesortheirearly
termination.Forexample, PraPRalonegenerates39uniqueplausible
patchesfortheDefects4JbugMath-28,whiletheotherexisting21APR
toolsgenerate7plausiblepatchesintotal(5ofthemareunique) .The
mainreasoncouldbethatothertoolsearlystopafter/f_indingthe/f_irst
plausiblepatchwhilePraPRexhaustivelyexploresthewholesearch
space.Therefore,atleast34outofthe39plausiblepatchesgenerated
byPraPRarenotvisitedbytheexisting21APRtools.Weevaluate
theninePCCtechniquesonboth /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2and/u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E .Notethat
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2isusedasthebaselinedatasetfromthepreviousstudy[ 66].
4.4 Metrics
Followingtherecentworksonpatchcorrectnesschecking[ 63,66,
76,80],weevaluatePCCtechniquesagainstfollowingmetrics:
•TP:#oftrulyover/f_ittingpatchesidenti/f_iedasover/f_itting.
•TN:#oftrulycorrectpatchesidenti/f_iedascorrect.
•FP:#oftrulycorrectpatchesidenti/f_iedasover/f_itting.
•FN:#oftrulyover/f_ittingpatchesidenti/f_iedascorrect.
•Precision: =/u1D447/u1D443/(/u1D447/u1D443+/u1D439/u1D443).Denotedas /u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B .
•Recall:=/u1D447/u1D443/(/u1D447/u1D443+/u1D439/u1D441).Denotedas /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459.
•RecallofCorrect: =/u1D447/u1D441/(/u1D447/u1D441+/u1D439/u1D443).Denotedas /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450.
•PR-AUC: AreaUnderPrecision-RecallCurve[13].
•AVR:theAVerageRankingofcorrectpatchesforbugswhichhave
bothover/f_ittingandcorrectpatches.
•Correctpatchratio: =/u1D447/u1D441/(/u1D447/u1D441+/u1D439/u1D441).DenotedasCPR.
•Accuracy: =(/u1D447/u1D443+/u1D447/u1D441)/(/u1D447/u1D443+/u1D439/u1D443+/u1D447/u1D441+/u1D439/u1D441).DenotedasACC.
StudiessuggestthatPCCtechniquesshouldnotmistakenlyex-
clude correct patches [ 66,76,81], i.e., the FP should be as low as
possible.However,whenthedatasetisimbalanced( i.e.,mostlyover-
/f_ittingpatches), /u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B canbebiasedandoverratedsince /u1D439/u1D443is
oftenmuchsmallerthan /u1D447/u1D443,thusposingsigni/f_icanteﬀectstothe
/f_inalresults.Therefore,followingthepreviousworkonimbalanced
datasets [ 76], we further include the metric /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450(the ratio of
correctlyidenti/f_iedcorrectpatches)forcomplementaryfaircompar-
isons.Infact, /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450iscrucialsincerejectingacorrectpatchmay
causeabugtobeun/f_ixed.Besides,WealsoutilizethePR-AUC[ 13]
metrictoeliminatetheeﬀectscausedbyimbalanceddatasets[ 59].
Note that PR-AUC is not applicable for rule-based techniques
including Opad, Patch-Sim, Anti-patterns and ODS since the re-
sultsarediscrete(either0or1).Forthestatictechniques(S3,Cap-
Gen, ssFix and code naturalness) based on feature score ranking,
weleverageAVRtoshowtheiraveragerankingofcorrectpatches,
i.e., the smaller ranking is better. For example, given AVR a(b),a
istheaveragerankingofthe/f_irstcorrectpatchineachbugwhile
bis the average number of patches in each bug. Note that AVR
is calculated on the subset of bugs that have both over/f_itting and
correctpatches ,sincepatchrankingtechniqueswouldperformthe
same when there are only correct or over/f_itting patches. In addi-
tion,thenumbersofbugswithbothpatches/numbersofpatches
perbugare50/9.1( /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2),26/10.7( /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2),39/9.6(/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0),
1208ALarge-ScaleEmpiricalReviewofPatchCorrectnessCheckingApproaches ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA
76/12.9(/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0),respectively.Insummary,aneﬀectivePCCtech-
niqueshouldachievehigh /u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B ,/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459,/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450andPR-AUC,
withlowAVR.ForODSevaluationwereusetheirmetricswithtwo
additionalonesCPRandACCfollowingtheoriginalstudy[ 81].
4.5 ThreatstoValidity
Thethreatsto internalvaliditymainlylieintheimplementationof
studiedPCCtechniques.Toreducesuchthreats,wereuseexisting
implementationswheneverpossible,andhavecarefullyreviewed
allourcodeandscript.Inaddition,tomitigatethebiasinthepatch
correctnesslabeling,weinvolvemultipleparticipants,followwidely-
usedcriteriasummarizedfromexistingwork[ 38],andhavereleased
allourpatchesforpublicreview.Tomitigatethepotentialbiasofran-
domnessinsampling,werepeatthesamplingprocessfortentimes
andusetheaverageresults.Thethreatsto externalvalidityaremainly
concernedwiththegeneralizabilityofour/f_indings.Wemitigatethe
threatsfromasingleAPRtoolbyfurthermergingourdatasetswith
previousdatasets.Thethreatscanbefurtherreducedbyincluding
morenewbugs, e.g.,withthe GrowingBugs dataset[24]. Thethreats
toconstruct validitymainlylieinthemetricsusedinourstudy.To
mitigatethethreats,wehaveincludedallpopularmetricsforPCC,
including /u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B ,/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459,/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450,AVR,PR-AUC,CPRandACC.
5 RESULTANALYSIS
5.1 RQ1:StaticTechniques
5.1.1 StaticCodeFeatures. Forstudyingallthestaticcodefeatures,
wefollowthesameexperimentalsettingastherecentstudy[ 66].
Thedetailedexperimentalresultsforthethreestudiedtechniques
areshownin Table 3.Fromthetable,wecanobservethatcompared
withoriginalscoreson /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2,the/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459scoresallincreasewhile
the/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450scoresallsubstantiallydecrease onthe /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2and
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0datasets.Onedirectreasonisthatthetwonewdatasetsare
extremelyimbalanced(withmostlyover/f_ittingpatches).Meanwhile,
theextremelylow /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450scores(i.e.,only5%-20%ofcorrectpatches
areidenti/f_iedascorrect) stilldemonstratethatsuchtechniquescan
hardlybeusefulinpractice.ThePR-AUCscoresofallfeaturesfor
alldatasetsarebeloworaround50%.Taking /u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0datasetfor
example,twoofthefeaturesgetaPR-AUCscoreslightlyover50%
(the proportion of positive sample and the expected PR-AUC for
randomclassi/f_icationmodel)andoneofthemgetslessthan50%,
indicatingthatthesefeaturesarehardlyusefultoidentifyover/f_itting
patches.Theexperimentalresultsonthemorebalanced /u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0
and/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0datasetsfurthercon/f_irmthisobservation.Forexam-
ple,onthebalanceddataset /u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0,the/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450remainssimilar
to the prior study on /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2[66] (i.e.,∼45%), while the /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459
substantiallydropsover30percentagepointsforallthreestatictech-
niques(e.g.,78.7-46.5%forssFix).AVRisabettermetricforsimulating
actualeﬀortsofselectingonecorrectpatchfromplausiblepatches.
Fromthetables,wecanobservethatfor /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2dataset,developers
wouldexamine2.1 ∼2.8patchesonaverage(dependingonthecho-
sentechnique)untilthe/f_irstcorrectpatchisfound.However,when
PraPRdatasetisconsideredormergedwith /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2,theAVRsrise
to5.5∼8.2.Inotherwords,whenlargerpatchspaceisincluded,eﬀec-
tivenessofallsimilarity-basedstatictoolssigni/f_icantlydegradesand
thecosttoidentifycorrectpatchforeachbugsigni/f_icantlyincreases.
Tounderstandthereasonsbehindtheseresults,wefurtherinves-
tigatethedetailedrawpatchscorescomputedbydiﬀerenttoolsasTable3:Performanceofstaticfeaturesondiﬀerentdatasets
Dataset TPFPTNFN/u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450PR-AUC AVR
S3/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2517137111137 79.1%79.1% 44.8% 45.3% 2.8(9.1)
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2122242542 96.7%96.7% 10.6% 4.1%8.2(10.7)
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0182679479 95.9%95.9% 4.8% 5.0%7.2(9.6)
/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0225023932239 90.4%90.4% 11.8% 15.3%7.0(12.9)
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0120151120151 44.3%44.3% 44.3% 51.1%2.39(5.24)
ssFix/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2515139109139 78.7%78.7% 44.0% 43.8% 2.7(9.1)
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2122143443 96.6%96.6% 8.5% 8.7%6.8(10.7)
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0182679479 95.9%95.9% 4.8% 6.7%6.3(9.6)
/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0224224724247 90.1%90.1% 8.9%10.1%6.1(12.9)
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0126145126145 46.5%46.5% 46.5% 48.3%2.27(5.48)
CapGen/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2510144104144 78.0%78.0% 41.9% 46.2% 2.1(9.1)
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2122242542 96.7%96.7% 10.6% 14.9%7.4(10.7)
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0182778578 95.9%95.9% 6.0%11.4% 6.6(9.6)
/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0225323635236 90.5%90.5% 12.9% 16.9%5.5(12.9)
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0133138133138 49.1%49.1% 49.1% 54.8%1.98(5.20)
Table4:Averagescoresbasedonstaticfeatures
Patches ssFix S3CapGen
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0Correct 1.5210.60 0.37
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0Over/f_itting 1.5615.73 0.41
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2Correct 1.4911.71 0.44
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2Over/f_itting 1.3526.35 0.25
Developer 1.1640.64 0.26
showninTable 4.NotethatforssFixandCapGen,thescoresreveal
thesimilarity betweenthebuggycodeandthepatches;whilefor
S3,thescoresrepresentthe editdistance ofthepatches.Suchtech-
niquesaredesignedbasedonthewidely-acceptedassumptionthat
correctpatchesshouldbemoresimilartothebuggycode. Toinvestigate
thevalidityofsuchawidely-acceptedassumption,wesplitallthe
patchesintofourgroups: /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2correctpatches ,/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2over-
/f_itting patches ,/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2correct patches and/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2over/f_itting
patches.Furthermore,wealsoincludethe developerpatches forcom-
parison.AsshowninTable 4,ifwefocusonthedatasetof /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2,
theaveragescoresofcorrectpatchesforssFixandCapGenare10.37%
and76%higherthantheover/f_ittingpatchesrespectively.
Besides,theaveragescoreofthecorrectpatchesforS3is55.56%
lowerthanoftheover/f_ittingpatches.AMann-WhitneyUTest[ 44]is
conductedtoevaluatethesigni/f_icanceofthediﬀerenceanditshows
thatthep-valuesarerelatively 4.19∗10−7,3.00∗10−11and9.72∗10−9
forssFix,CapGenandS3respectively.Thatistosay,correctpatches
in/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2ingeneralsharehighersimilaritieswiththebuggycode
andintroducefewermodi/f_icationsthanover/f_ittingpatches.Suchre-
sultsactuallysupportthewidely-acceptedassumption,andcanalso
explainwhythesetoolsexhibitpromisingresultson /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2[66]
andtheiroriginalpublications[ 30,68,70].
However,suchanassumptionmightnolongerholdonourdatasets.
Speci/f_ically,on /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0,forssFixandCapGen,theaveragesim-
ilarityscoresoftheover/f_ittingpatchesareeven2.63%and10.81%
higherthanthoseofthecorrectpatches(thep-valuesare0.070and
0.106 respectively). Moreover, if we compare with correct devel-
operpatches,theaveragescoreofssFixonover/f_ittingpatchesin
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2isalso14.66%higherthanthatofdeveloperpatches(with
p-valueof 1.01∗10−11)whileaveragescoresofssFixandCapGenon
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0over/f_ittingpatchesare34.48%and57.69%higherthanthat
ofdeveloperpatches(withp-valuesof 1.42∗10−54and5.53∗10−12).
Suchresultsarecontradictorytothoseobservedmerelybasedon
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2[66]. For S3, despite the results observed on /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0
shareasimilartrendwiththoseon /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2,wecanstillobserve
contradictoryresultsifcomparedwithdeveloperpatches.Specif-
ically,theaveragedistancescoresofS3ondeveloperpatchesare
1209ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA JunYang,YuehanWang,YilingLou,MingWen,andLingmingZhang
54.23% higher in /u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2and 158.36% higher in /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0than
over/f_ittingpatches(p-valuesof 1.87∗10−25and4.92∗10−81).Wealso
investigatethediﬀerenceof8correspondingsub-featuresseparately
whichshowsimilartrend,presentedonourwebsite[ 79].
Finding1: Thewidely-acceptedassumptionmadebyexisting
similarity-basedstatictechniquesthatcorrectpatchesingeneral
sharehighersimilaritieswiththebuggycodeisnolongervalid
onournewdatasetwithexhaustivepatchgeneration.
Throughfurtherinvestigation,weobservethatonemajorissue
ofsimilarity-basedstatictechniquesisthattheycanproducediverse
similarityscoresforsemantic-equivalentpatches. Forinstance,List-
ing1showsasimpleexamplepatch.
1-if(this.rightBlock !=null) {
2+if(false) {
3 RectangleConstraint c4 =newRectangleConstraint...
Listing1:APraPRpatchreplacingconditionwith false
Table5:StaticPCConsemanticallyequivalentpatches
Chart-13-mutant-6 TokenStrct TokenConpt ASTDist ASTCosDist
mutateconditiontofalse 0.829 0.773 6 0.025
removewholeblock 0.344 0.419 51 0.097
Chart-13-mutant-6 VariableDist VariableSimi SyntaxSimi SemanticSimi
mutateconditiontofalse 3 0.5 0.245 0.011
removewholeblock 20 0.393 0.347 0.618
Thispatchsimplyreplacestheconditionalexpressionwith false,
which is semantically equivalent to removing the whole if block.
Thescoresgeneratedbythethreestatictechniquesaretotallydif-
ferent, as shown in Table 5. The “mutate condition to false” row
displaysthescoresoftheoriginalpatch, i.e.,replacetheconditional
expressionwith false,whilethe “removewholeblock”rowdenotes
thescoresofthesimpli/f_iedpatch, i.e.,simplyremovingthewhole
ifblock.Amongtheeightstaticfeatures,thesimilarityscoresof
ssFixfeaturesoforiginalpatcharesigni/f_icantlyhighercompared
with the simpli/f_ied patch ( i.e., the patch with the whole ifblock
removed)140.99%and84.49%respectively,whiletheeditdistance
scoresforS3oftheoriginalpatchhavemuchlowerscoresthanthe
simpli/f_iedpatch.ForCapGenfeatures,thescoresarealsocompletely
diﬀerentfromeachother.Thesecasesarefrequentlyobservedin
our dataset, i.e., a patch can be simpli/f_ied to its equivalent patch.
There are 54 mutating condition to false patches among the 1,311
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2patches,inadditiontootherpatcheswithsimilarpatterns.
Suchresultsprovidestrongerevidencethatmerelyconsideringthe
syntactic similarity is inadequate for PCC while more advanced
semantics-basedtechniquesshouldbeproposed.
Finding 2: All three studied static techniques can compute
totallydiﬀerentscoresforsemanticallyequivalentpatches,in-
dicatingthatfuturestaticPCCtechniquesshouldincorporate
moreadvancedsemanticsanalysis.
5.1.2 Anti-Pa/t_terns. Table6presentstheresultsofAnti-patterns[ 62]
onourfournewdatasetsanditsoriginalresultsinpreviouswork[ 66].
Fromthetable,wecanobservethatAnti-patternsperformssignif-
icantlyworseonPraPRpatchesbymisidentifyingalargerpropor-
tionofcorrectpatchesasover/f_ittingandomittingmoreover/f_itting
patches.Comparedtothepreviousdataset,Anti-patternsexhibitsboth lower /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450and/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459on/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2. Although /u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B
hasasuspectedimprovement,theactualcauseistheheavilyimbal-
anceddatasets,i.e.,theoverwhelmingnumberofover/f_ittingpatches
overthecorrectones.Actually,theresultsonthebalanceddataset
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0furthercon/f_irmtheworseperformance.
Table6:PerformanceofAnti-patterns
Datasets TPFPTNFN/u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459 /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.221937211435 85.55% 33.49% 85.08%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.217410371,090 94.57% 13.77% 78.72%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.036128551,544 92.80% 18.95% 66.27%
/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0559562151,930 90.89% 22.46% 79.34%
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.04156215230 42.27% 15.13% 79.34%
WefurtherlookedintotherootcauseofAnti-patterns’poorper-
formanceonourdatasetswithamisclassi/f_iedexamplegenerated
exclusively by PraPR and has not been included in any previous
dataset.Listing 2presentsanFNexamplethatAnti-patternsfailsto
/f_ilter.Theover/f_ittingpatchmakesasubtlemodi/f_icationbyremov-
ingthemethodinvocation calculateBottomInset (i.e.,onlyone
tokenchanged).Suchamodi/f_icationdoesnotfallintoanyexisting
Anti-patterns,thuscannotbeexcludedduringPCC.Actually,the
lossofeﬃciencyderivesfromtheoriginalintentionofAnti-patterns.
Anti-patternswasdesignedinitiallyto/f_ilteroutover/f_ittingpatches
that have major wrongness, instead of capturing subtle changes.
However,mostofthepatchesinourdatasetcontainsubtlechanges.
Meanwhile,otherAPRtoolsarealsopronetogeneratepatcheswith
subtlechangesinpractice.Asaresult,Anti-patternsisfacedwith
theriskofinsuﬃciencyinevaluatingPCCinfuturework.
1-doubleb=calculateBottomInset(h);
2+doubleb=h;
3area.setRect(area.getX()+l,
4area.getY()+t, w-l-r, h-t-b);
Listing2:Anover/f_ittingpatchmisclassi/f_iedbyAnti-patterns
Finding3: Derivingfromtheoriginalintention,Anti-patterns
performsmuchworseonourdatasetsduetoitslimitedcapa-
bilityofidentifyingsubtlechangesinpatches.Consideringthe
widespreadoccurrenceofsubtlechangesinallAPR-generated
patches,Anti-patternsmaynotbeagoodchoiceforevaluating
PCCinfuturework.
5.1.3 Naturalness-BasedTechniques. Table7showsinalldatasets,
bothSumEntropyandMeanEntropycanoutperformallthreestatic
techniques. The box plot of distribution of rankings is listed on
ourwebsite.Speci/f_ically,intermsofAVR,theSum/Meanentropy
outperformsthebestperformedstatictechniqueby11.21%/11.21%
(on/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2), 30.13%/31.31% (on /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2), 34.82%/25.40% (on
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0), 44.08%/36.79% (on /u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0) and 25.60%/25.79% (on
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0).Interestingly,ourresultsalsocon/f_irmpriorwork[ 71]
thatSumEntropyperformsslightlybetterthanMeanEntropyfor
PCC.ThereasonisthatSumEntropycalculatestheentiresequence
entropyforcodenaturalnesscomputation,andconsidersbothcode
naturalnessandlengthinformation.Toconclude,naturalness-based
techniquesshowgreaterpotentialinPCCandthisisthe/f_irst,toour
bestknowledge,evaluationofnaturalness-basedtechniquesonPCC
datasets.Weappealtothecommunitythatmoreattentionshould
bedrawnintothisdirection.
1210ALarge-ScaleEmpiricalReviewofPatchCorrectnessCheckingApproaches ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA
Table7:Performanceofcodenaturalness
AVR ssFix s3CapGen SumEntropy MeanEntropy
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2 2.72(9.1) 2.8(9.1) 2.14(9.1) 1.9(9.1) 1.9(9.1)
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.26.77(10.69) 8.15(10.69) 7.38(10.69) 4.73(10.69) 4.65(10.69)
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.06.26(9.64) 7.15(9.64) 6.62(9.64) 4.08(9.64) 4.67(9.64)
/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.06.12(12.87) 7(12.87) 5.49(12.87) 3.07(12.87) 3.47(12.87)
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.02.27(5.48) 2.39(5.24) 1.98(5.20) 1.49(5.26) 1.54(5.45)
Finding4: Naturalness-basedtechniquescansubstantiallyout-
performallstaticcodefeaturesinpatchranking,andSumEn-
tropyperformsslightlybetterthanMeanEntropy.
5.2 RQ2:Learning-basedTechniques
Table8:Performanceoftheembedding-basedtechnique
Datasets TPFPTNFN/u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459 /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450PR-AUC
/u1D447/u1D456/u1D44E/u1D45B/u1D4631.2 85141624 85.86% 77.98% 53.33% N/A
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2 8221527227 98.21% 78.36% 64.29% 11.86%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0 1,2202353433 97.52% 72.81% 59.21% 15.51%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0−/u1D4631.2398826206 96.14% 65.89% 52.94% 19.69%
5.2.1 Embedding Technique. Table8presents the results of the
embedding-based technique [ 63] on our datasets, i.e., /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2
and/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0. Since there is a large overlap between the train-
ingsetoftheembeddingtechniqueand /u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0//u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0,i.e.,
patchescollectedbyLiu etal.[38],wedonotconsider /u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0or
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0inthisRQ.Forcomparison,wealsopresenttheresultsof
theembedding-basedtechniqueinitsoriginalpaper(i.e., /u1D447/u1D456/u1D44E/u1D45B/u1D4631.2).
Wecanobservethatthe /u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B increasesinournewdatasets
whilethe /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459and/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450droponboth /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2and/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0.
Thedecreaseof /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459and/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450becomesevenlargerinthenewly
addedpatches,i.e., /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0−/u1D4631.2.Suchabnormalperformanceis
due to the heavily imbalanced dataset. Therefore, we should pay
more attention to PR-AUC, the metric which is least aﬀected by
theimbalanceddataset.Obviously,theembedding-basedtechnique
tendstoperformbadlyonPraPRpatcheswithPR-AUCtobeless
than20%onallournewdatasets.Furthermore,withthedatasets
tobegraduallymorebalancedthrough /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2,/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0and
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0−/u1D4631.2(i.e.,exclusivebugsin /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0),theperformanceof
/u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B ,/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459and/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450keepsdroppingwhilethePR-AUCin-
creases,whichindicatestheworseperformanceismorecredible.The
resultsfurthercon/f_irmsthattheembedding-basedtechniquesuﬀers
fromthedatasetover/f_ittingissue:itperformsworseonthepatchesof
subjectsthatarediﬀerentfromtrainingset.Thus,weencouragefu-
turelearning-basedPCCworktoconsideracross-datasetevaluation.
We then look into the potential reasons for such a decrement.
Theintuitionofembedding-basedPCCtechniquesisthatthecosine
similaritybetweentheembeddingvectorsofcorrectpatchesand
buggycodeshouldbelargerthanthecosinesimilaritybetweenthe
embeddingvectorsofover/f_ittingpatchesandbuggycode.Tian et
al.[63]showthatcorrect/over/f_ittingpatchesintheirdatasetper-
fectly follow such an assumption. However, this assumption no
longerholdsontheadditionalpatchesgeneratedbyPraPR.Figure 1
presentsthedistributionofthecosinesimilaritybetweentheembed-
dingvectorsofcorrect/over/f_ittingpatchesandbuggycodeonthe
originaldatasetintheembeddingwork[ 63](i.e.,/u1D447/u1D456/u1D44E/u1D45B/u1D4631.2)andour
datasetsbuiltonDefects4JV1.2andadditionalbugsinDefects4JV2.0
(i.e.,/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2and/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0−/u1D4631.2).Fromthe/f_igure,weobservethat
diﬀerentfromthepriorwork[ 63],correctpatchesandover/f_ittingpatchesshareveryclose distributionsofsimilarityscores onour
datasets,whichexplainswhytheembedding-basedtechniqueex-
hibitsworseperformanceonPraPRpatches.Furthermore,correct
patcheseventendtohavelowermediansimilaritythanover/f_itting
patcheson /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0−/u1D4631.2,demonstratingthattheassumptionmade
bytheembedding-basedworknolongerholdsonournewdataset.
Figure1:Similaritydistributionondiﬀerentdatasets
Finding5: Theassumptionthatthecosinesimilaritybetween
theembeddingsofcorrectpatchesandbuggycodeshouldbe
largerthanthatbetweentheembeddingsofover/f_ittingpatches
andbuggycodenolongerholds. Also,theembedding-based
techniquetendstosuﬀerfromthedatasetover/f_ittingissue.
5.2.2 ODS. Table9shows the result of ODS in our dataset. For
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2,wedirectlyreusetheresultsfrom [ 81].Itturnsoutthat
theperformanceon /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2and/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.0signi/f_icantlydropfor
/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450, CPR and ACC, e.g., CPR drops from ~84% to ~6%, which
meansalotofover/f_ittingpatches“escape”ODSandgetmisiden-
ti/f_iedascorrect.Similarly,the /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450dropsbecausemorecorrect
patchesareclassi/f_iedasover/f_itting.
Table9:PerformanceofODS
ODS TPFPTNFNprecision recall/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450F1CPRaccuracy
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2620661823490.38% 94.80% 73.39% 92.54% 84.26% 88.91%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.21034321422997.00% 81.87% 30.43% 88.79% 5.76% 80.06%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.02571933559296.51% 81.28% 27.34% 88.24% 5.58% 79.19%
1-doubleb=calculateBottomInset(h);
2+doubleb=trimWidth(h);
Listing3:Anover/f_ittingpatchthatescapesODS
Moreinterestingly,weevaluateODSondeveloperpatchesand
foundthattheFPrate(ratioofdeveloperpatchesidenti/f_iedasover-
/f_itting)is43.52%and41.56%ondeveloperpatchesv1.2andv2.0.To
/f_igureoutthepotentialreasonthattheperformancedrops,wecare-
fullycheckthefeaturede/f_initionsinODSandunderstandwhyPraPR
patchescanescapeODS.ODSde/f_ines202featuresintotal(inthree
groups).AccordingtothefeatureanalysisofODS[ 81],theorder
ofimportanceofthreegroupsoffeaturesis:ContextualSyntactic
Features (150) > Code Description Features (26) > Repair Pattern
Features(26).NotethatODSfeaturesarespeci/f_iccharacteristicsof
programslikewhetherthepatchvariablesarelocal,global,primitive,
etc.,orwhetherthere’scodemove.Forsingle-linereplacementrepair
toolPraPR,itnormallymakessimplechangelikereplacingavari-
able/constant/methodwithanotheroneofthesametypeaccording
1211ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA JunYang,YuehanWang,YilingLou,MingWen,andLingmingZhang
tothemutatorsde/f_inedin [ 19].Therefore,mostPraPRpatchesdo
notaﬀectthemajorityoftheODSfeaturesatall.
Listing3isanexamplepatchforbugChart-26showinghowPraPR
patchesescapeODS.PraPRgenerates103patchesforthisbugand23
ofthemareclassi/f_iedascorrectbyODS(whileactuallyonlytwoof
themarecorrect).11ofthemsimplyreplace calculateLeftInset
withotherAPIsandareallidenti/f_iedascorrectbyODS.Suchcases
producelargeamountofFNsandthusleadtoverylowCPR(~6%).
Finding6: FeaturesofODSaretooweaktoidentifyover/f_itting
patchesandmissalotofover/f_ittingpatchesinourdataset.Plus,
thehighFPrateondeveloperpatchesisunbearableforPCC.
5.3 RQ3:DynamicTechniques
5.3.1 Opad. Table10andTable 11respectivelyshowtheresultsfor
E-Opad(OpadwithEvoSuite)andR-Opad(OpadwithRandoop).
Table10:PerformanceofE-Opadondiﬀerentdatasets
E-Opad TPFPTNFN/u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459 /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2920248562 100.00% 14.07% 100.00%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.21480471,116 100.00% 11.71% 100.00%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.02672811,638 99.26% 14.02% 97.59%
/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.034422692,145 99.42% 13.82% 99.26%
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0482269223 96.00% 17.71% 99.26%
Table11:PerformanceofR-Opadondiﬀerentdatasets
R-Opad TPFPTNFN/u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459 /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2670248587 100.00% 10.24% 100.00%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.223812351,026 95.20% 18.83% 74.47%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4632.034615681,559 95.84% 18.16% 81.93%
/u1D440/u1D452/u1D45F/u1D454/u1D452/u1D4632.0408152562,081 96.45% 16.39% 94.46%
/u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.04415256227 74.58% 16.24% 94.46%
We can observe that except for R-Opad on /u1D435/u1D44E/u1D459/u1D44E/u1D45B/u1D450/u1D452 /u1D4632.0, Opad
achievesaprecisionover95%onallthedatasets,whiletheachieved
recallrangesfrom11.71%to18.83%.Thehighprecisionwithlow
recallachievedbyOpadisconsistentwithpreviousstudies[ 66,80].
Besides,the /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450alsosigni/f_icantlyoutperformsothertechniques
withrespecttoprecision.SuchresultsindicatethatOpadcaniden-
tifymostofthecorrectpatchesandrarelyclassi/f_iescorrectpatches
asover/f_ittingones. Inotherwords,theperformancedoesnotde-
grademuchinournewdatasets,andOpadismorestablethanstatic
techniques.Thisfallsintoourintuitionsincesuchdynamictools
basedontestgenerationconcernmoretowardscodesemanticsin-
steadofsyntacticelements.Meanwhile,similartothe/f_indingsfrom
priorwork[ 66],Opadachievesaratherlowrecallonourdatasets,
indicatingthatasubstantialratioofover/f_ittingpatchesarenotde-
tected.ThisisstillacriticalissueinPCCsincemanually/f_ilteringout
over/f_ittingpatchescanbeextremelycostlyfordevelopers[ 76].
Finding7: TheperformanceofOpadoveralltendstoremain
similaronournewdatasets,demonstratingtherobustnessof
suchdynamictechniques.Meanwhile,consistentwiththe/f_ind-
ingsinpriorwork,itachievesaratherlowrecallforincorrect
patches,whichcompromisesitspracticalusefulness.
ThoughtheprecisionachievedbyOpadisstillhighinournew
datasets,itcannolongerachieve100%preision,i.e.,afewcorrect
patchesaremisidenti/f_iedasover/f_itting.ThisisinconsistentwiththeresultsinpreviousstudiesforPCC[ 66,80].Motivatedbythis,wefur-
therinvestigatedtheFPcasesandmadethefollowingobservations.
1-if(property ==null) {
2-return this ;
3-}
4JsonFormat. Valueformat=findFormatO(serializers,property,handledType());...
Listing4:Acorrectpatchmisclassi/f_iedbyOpad
For instance, Listing 4shows a correct patch which is identi-
/f_iedasover/f_ittingbyOpad.Speci/f_ically,thispatchremovesa null
checkfor property .However,Opadisdesignedbasedonthetests
generatedontheoriginalbuggyprograms,thusbeingunawareof
suchsemanticchanges.Whensteppingintomethod findFormatO
(at line 4 ) from a test, property is null, which is unexpected to
thetestsgeneratedontheoriginalbuggyprogram.Consequently,a
NullPointerException wasthrownandin findFormatO ,andthus
Opadmis-identi/f_iedthispatchasover/f_itting.Manyothersimilar
caseshavebeenobservedforOpad.Thereasoncouldbethatsome
testsaregeneratedonthebuggyprograms,basedonsomeincorrect
contractsorpreconditions.Whenthesemanticsofaprogramchange,
thosepreconditionsmaynotholdandthusfailageneratedtest.
Finding8: TheeﬀectivenessofOpadmightdecayanditmight
mistakenlyidentifycorrectpatchesasincorrectwhenthese-
manticchangesofthepatchesbreakcertainconditions.
Sincedeveloperpatchesmightevenincurlargersemanticchanges,
wearecurioustoseewhethersuchcasesalsohappenondeveloper
patches. Unfortunately, there are no existing studies to our best
knowledge. However, this is an important study since APR tech-
niquescanpotentially/f_ixmorebugsandproducemoredeveloper
patches in the near future. As shown in Table 12, E-Opad and R-
Opadachieve /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450of86.06%and79.02%,respectively,whichis
signi/f_icantlylowerthanthatonotherdatasetsexceptfor /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2.
Speci/f_ically,OpadproducesmoreFPsandachieveslower /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450
comparedwithpreviousstudy[ 66,80].
Table12:Opad/Patch-Simondeveloperpatches
TP FP TN FN /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450
E-Opad 0 111 685 0 86.06%
R-Opad 0 167 629 0 79.02%
Patch-Sim 0 65 110 0 62.86%
1@@-483,9+483,8@@public static intformatLongOctalOrBinaryBytes (
2 ...
3 if(length <9) {...
4+ }else{
5+ formatBigIntegerBinary(value, buf, offset, length, negative);}
6-formatBigIntegerBinary(value, buf, offset, length, negative);
7 buf[offset] =(byte) (negative ?0xff:0x80);
8 returnoffset+length;
Listing5:Adeveloperpatchmisclassi/f_iedbyOpad
WefurthermanuallycheckedsomeFPcasesindeveloperpatches,
andListing 5isanexample.Speci/f_ically,thedeveloperpatchmoved
astatementintoan elseblockwithacondition length >= 9 .The
failingtestexpectsan IllegalArgumentException triggeredbyin-
validparametersof formatBigIntegerBinary .Theoriginalstate-
mentthrowingthatexceptionwasnotexecutedinthepatchedpro-
gram.Therefore,theprogramsteppedoverthatstatementandwhen
1212ALarge-ScaleEmpiricalReviewofPatchCorrectnessCheckingApproaches ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA
executingthenextstatement(line7),theparameter offsetis-1,
triggeringan ArrayIndexOutOfBoundsException .
Similartothepreviousexample,Opadisnotawareofsuchseman-
ticchangesandmisclassi/f_iedthatpatchasover/f_itting.Actually,Opad
couldproducemoreFPswhenthepatchesgetmorecomplicated, i.e.,
diﬀerentcodestructureorlogic.Thiscanbeanimportant/f_inding
sinceeventuallyAPRtechniqueswillbeconqueringmoreandmore
complicatedbugs,withmoreandmorecomplicatedpatches.
Finding 9: Opad performs worse on developer patches, and
shouldbeappliedwithcautionon(future)automatedAPRtools
thatcangeneratemorecomplicatedpatches.
5.3.2 Patch-Sim. Table13presentstheperformanceofPatch-Sim
onpreviousdatasets(i.e., /u1D44B/u1D456/u1D45C/u1D45B/u1D454/u1D4631.2fromitsoriginalpaper[ 76]and
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.2fromthepreviousstudy[ 66])andourdataset.Notethat
duetoanimplementationissue[ 76],Patch-Simdoesnotsupport
Defects4J V2.0 and subjects Closure and Mockito from Defects4J
V1.2.Hence,followingpriorwork[ 76],weonlyconsiderthepatches
supportedbyPatch-SimfromDefects4JV1.2.Overall,493over/f_itting
and10correctpatchesin /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2areused.
Table13:PerformanceofPatch-Simondiﬀerentdatasets
Datasets TPFPTNFN/u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459 /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450
/u1D44B/u1D456/u1D45C/u1D45B/u1D454/u1D4631.26202948 100.00% 56.36% 100.00%
/u1D44A/u1D44E/u1D45B/u1D454/u1D4631.224951186392 83.00% 38.85% 78.48%
/u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2210 37283 98.59% 42.60% 70.00%
Asshown inthetable 13,Patch-Simperformsmuchworseon
our dataset compared with initial /u1D44B/u1D456/u1D45C/u1D45B/u1D454/u1D4631.2results. For example,
Patch-Simachieves100% /u1D443/u1D45F/u1D452/u1D450/u1D456/u1D460/u1D456/u1D45C/u1D45B and/u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450onitsoriginaldataset,
whereasonPraPRpatches,bothmetricsaredegraded,aligningwith
previous/f_indings[ 66].Patch-Simisdesignedbasedonthe mildconse-
quenceassumption thatapassingtestshouldbehavesimilarlyonthe
correctpatchandthebuggycode.Therefore,thepatchsubstantially
changingthebehaviorofpassingtestswouldberegardedasover/f_it-
ting.Listing 6presentsasampleFPofPatch-Sim.Inthisexample,the
correctpatchmodi/f_iesthecondition,leadingtosigni/f_icantcontrol-
/f_lowchanges:onthebuggycode,somepassingtestscanenterthe if
blockandthenthrowtheexception,whereasonthepatchcodethese
testsskipthe ifblockandexceptionstatement.Therefore,Patch-
Simconsidersthebehaviorsofthesepassingtestschangedsubstan-
tially,andfurtherregardsthepatchasover/f_itting.However,correct
patchesarealsolikelytointroducelargebehavioralchangeswhereas
over/f_ittingpatchescanalsoinducetinyimpactonpassingtests.
1-if(fa*fb>=0.0) {
2+if(fa*fb>0.0D) {
3 throw new ConvergenceException...}
Listing6:Acorrectpatchmisclassi/f_iedbyPatch-Sim
Finding10: Theassumptionthatpassingtestsshouldbehave
similarlyoncorrectpatchcodeandbuggycodecaneasilybe
brokenwhenalargerpatchspaceisconsidered,especiallyforthe
correctpatcheswithnon-trivialmodi/f_icationsoncontrol/f_low.
Table12presentstheperformanceofPatch-Simon175 developer
patchesfromDefects4JV1.2wherePatch-Simcanbesuccessfully
applied.Interestingly,Patch-Simperformsevenworseondeveloperpatcheswitha /u1D445/u1D452/u1D450/u1D44E/u1D459/u1D459/u1D450ofonly62.86%,i.e.,mis-classifying37.14%cor-
rectpatchesasincorrect.Aftermanualinspection,we/f_indthatdevel-
operpatchesofteninvolvesophisticatedmodi/f_icationsandthuspass-
ingtestsbehaveverydiﬀerentlyfrombuggycode.Forexample,List-
ing7presentsadeveloperpatchwhichmis-identi/f_iedasover/f_itting
byPatch-Sim.Thepatchmodi/f_iesmultiplelines,andseveral if-else
statements.Thus,itsigni/f_icantlyaﬀectsthepathsofsomepassing
tests. In fact, it is prevalent that developer patches contain such
sophisticatedchanges,andthustheassumptionmadebyPatch-Sim
canbeeasilyviolatedondeveloperpatches.Suchresultsshowthat
futurePCCworkshouldexercisecomplexpatchessinceadvanced
APRtoolscangeneratemorecomplexpatchesinthenearfuture.
1-if(...&&index<seqEnd-1&&...) {
2+if(...&&index<seqEnd-2&&...) {...}
3+if(start==seqEnd) {
4+ return0;
5+}
6 ...
7-while(input.charAt(end)!=';')
8+while(end<seqEnd&&((input. charAt(end)>='0'&&input.charAt(end)<='9')
9+ || (input.charAt(end)>='a'&&input.charAt(end)<='f')
10+ || (input.charAt(end)>='A'&&input.charAt(end)<='F') ) )
11 ...
12+boolean semiNext =(end!=seqEnd) &&(input.charAt(end)==';');
13-return2+(end-start)+(isHex?1:0)+1;
14+return2+(end-start)+(isHex?1:0)+(semiNext ?1:0);
Listing7:Adeveloperpatchmisclassi/f_iedbyPatch-Sim
Finding11: Patch-Simmisclassi/f_ies30%correctpatchesasin-
correcton /u1D443/u1D45F/u1D44E/u1D443/u1D445/u1D4631.2andtendsperformevenworsewith38.14%
misclassi/f_ion rate on complicated developer patches. Our re-
sultsalsosuggestthatfuturedynamicPCCtechniquesshould
considermorecomplexpatchesforevaluation.
6 CONCLUSION
This paper constructed a comprehensive PCC dataset, /u1D443/u1D45F/u1D44E/u1D443/u1D44E/u1D461/u1D450/uni210E ,
for revisiting state-of-the-art PCC techniques. Our study has re-
vealedvariousinteresting/f_indings,suchas1)thesimilarity-based
assumptionsnolongerholdinthenewdataset,2)naturalness-based
techniques can substantially outperform static code features, 3)
embedding-basedtechniquesandfeatureengineering(ODS)canmis-
classifyalotofcorrectpatchesand4)performanceofdynamictech-
niquesremainstableinthenewdatasetbutwilldecaywhenhandling
patcheswithcomplexsemanticchanges(likedeveloperpatches).
These/f_indingsmaysavealotresearcheﬀortsfortheresearchcom-
munityandpointoutfuturedirections,likeleveragingLLMsforPCC
andincludingmorerealisticbugstoenhancediversityofthedataset.
DATAAVAILABILITY
Please see https://github.com/claudeyj/patch_correctness or our
archivedartifact[ 79].
ACKNOWLEDGMENTS
Wethankallthereviewersfortheirinsightfulcomments.Wealso
thankHeYefromKTH,YifengDing,StevenXiaandJiaweiLiufrom
UIUCfortheirhelp.ThisworkwaspartiallysupportedbytheNatu-
ralScienceFoundationundergrantsCCF-2131943andCCF-2141474,
the National Natural Science Foundation of China under grants
No.62002125andNo.61932021,theYoungEliteScientistsSponsor-
shipProgrambyCASTgrantNo.2021QNRC001,aswellasKwaiInc.
1213ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA JunYang,YuehanWang,YilingLou,MingWen,andLingmingZhang
REFERENCES
[1] 2023. JD-Core. https://github.com/java-decompiler/jd-core .
[2]2023. Patch manual inspection rules. https://github.com/claudeyj/patch_
correctness/blob/master/semantic_equivalence_rules.md .
[3] 2023. Pitesttool. https://github.com/hcoles/pitest .
[4]Loubna Ben Allal, Raymond Li, Denis Kocetkov, Chenghao Mou, Christopher
Akiki,CarlosMunozFerrandis,NiklasMuennighoﬀ,MayankMishra,AlexGu,
Manan Dey, et al .2023. SantaCoder: don’t reach for the stars! arXiv preprint
arXiv:2301.03988 (2023).
[5]MoumitaAsad,KishanKumarGanguly,andKaziSakib.2019. ImpactAnalysisof
SyntacticandSemanticSimilaritiesonPatchPrioritizationinAutomatedProgram
Repair.In ICSME2019 .328–332. https://doi.org/10.1109/ICSME.2019.00050
[6]SamuelBenton,XiaLi,YilingLou,andLingmingZhang.2021.OntheEﬀectiveness
of Uni/f_ied Debugging: An Extensive Study on 16 Program Repair Systems. In
ASE2020.AssociationforComputingMachinery,NewYork,NY,USA,907–918.
https://doi.org/10.1145/3324884.3416566
[7]MarcelBöhmeandAbhikRoychoudhury.2014. CoREBench:StudyingComplexity
ofRegressionErrors.In ISSTA2014 .AssociationforComputingMachinery,New
York,NY,USA,105–115. https://doi.org/10.1145/2610384.2628058
[8]Liushan Chen, Yu Pei, and Carlo A. Furia. 2017. Contract-based pro-
gram repair without the contracts. In ASE 2017 , Grigore Rosu, Massimil-
iano Di Penta, and Tien N. Nguyen (Eds.). IEEE Computer Society, 637–647.
https://doi.org/10.1109/ASE.2017.8115674
[9]MarkChen,JerryTworek,HeewooJun,QimingYuan,HenriquePondedeOliveira
Pinto,JaredKaplan,HarriEdwards,YuriBurda,NicholasJoseph,GregBrockman,
et al.2021. Evaluating Large Language Models Trained on Code. CoRR
abs/2107.03374(2021). arXiv: 2107.03374 https://arxiv.org/abs/2107.03374
[10]Z.Chen,S.Kommrusch,M.Tufano,L.Pouchet,D.Poshyvanyk,andM.Monperrus.
2021.SequenceR:Sequence-to-SequenceLearningforEnd-to-EndProgramRepair.
TSE47,09(sep2021),1943–1959. https://doi.org/10.1109/TSE.2019.2940179
[11]Viktor Csuvik, Dániel Horváth, Ferenc Horváth, and László Vidács. 2020.
UtilizingSourceCodeEmbeddingstoIdentifyCorrectPatches.In IBF2020.18–25.
https://doi.org/10.1109/IBF50092.2020.9034714
[12]ViktorCsuvik,DánielHorváth,MárkLajkó,andLászlóVidács.2021. Exploring
Plausible Patches Using Source Code Embeddings in JavaScript. In 2021
IEEE/ACMInternationalWorkshoponAutomatedProgramRepair(APR) .11–18.
https://doi.org/10.1109/APR52552.2021.00010
[13]JesseDavisandMarkGoadrich.2006. TheRelationshipbetweenPrecision-Recall
andROCCurves (ICML’06) .AssociationforComputingMachinery,NewYork,
NY,USA,8pages. https://doi.org/10.1145/1143844.1143874
[14]Pieter-TjerkDeBoer,DirkPKroese,ShieMannor,andReuvenYRubinstein.2005.
Atutorialonthecross-entropymethod. Annalsofoperationsresearch 134(2005),
19–67.https://doi.org/10.1007/s10479-005-5724-z
[15]JacobDevlin,Ming-WeiChang,KentonLee,andKristinaToutanova.2018. BERT:
Pre-trainingofDeepBidirectionalTransformersforLanguageUnderstanding.
CoRRabs/1810.04805(2018). arXiv: 1810.04805 http://arxiv.org/abs/1810.04805
[16]Thomas Durieux, Fernanda Madeiral, Matias Martinez, and Rui Abreu. 2019.
Empirical Review of Java Program Repair Tools: A Large-Scale Experiment
on 2,141 Bugs and 23,551 Repair Attempts. In ESEC/FSE 2019 (Tallinn, Esto-
nia). Association for Computing Machinery, New York, NY, USA, 302–313.
https://doi.org/10.1145/3338906.3338911
[17]ThomasDurieuxandMartinMonperrus.2016. DynaMoth:DynamicCodeSynthe-
sisforAutomaticProgramRepair.In 2016IEEE/ACM11thInternationalWorkshopin
AutomationofSoftwareTest(AST) .85–91.https://doi.org/10.1145/2896921.2896931
[18]Gordon Fraser and Andrea Arcuri. 2011. EvoSuite: Automatic Test Suite
Generation for Object-Oriented Software. In ESEC/FSE 2011 (Szeged, Hun-
gary). Association for Computing Machinery, New York, NY, USA, 416–419.
https://doi.org/10.1145/2025113.2025179
[19]AliGhanbari,SamuelBenton,andLingmingZhang.2019.PracticalProgramRepair
viaBytecodeMutation.In ISSTA2019 (Beijing,China).AssociationforComputing
Machinery,NewYork,NY,USA,19–30. https://doi.org/10.1145/3293882.3330559
[20]AbramHindle,EarlT.Barr,ZhendongSu,MarkGabel,andPremkumarDevanbu.
2012. OntheNaturalnessofSoftware.In ICSE2012 (Zurich,Switzerland).IEEE
Press,837–847.
[21]Thong Hoang, Hong Jin Kang, David Lo, and Julia Lawall. 2020. CC2Vec:
Distributed Representations of Code Changes. In ICSE 2020 (Seoul, South
Korea). Association for Computing Machinery, New York, NY, USA, 518–529.
https://doi.org/10.1145/3377811.3380361
[22]JinruHua,MengshiZhang,KaiyuanWang,andSarfrazKhurshid.2018. Towards
practical program repair with on-demand candidate generation. In ICSE 2018,
Gothenburg, Sweden , Michel Chaudron, Ivica Crnkovic, Marsha Chechik, and
MarkHarman(Eds.).ACM,12–23. https://doi.org/10.1145/3180155.3180245
[23]JiajunJiang,YingfeiXiong,HongyuZhang,QingGao,andXiangqunChen.2018.
ShapingProgramRepairSpacewithExistingPatchesandSimilarCode.In ISSTA
2018(Amsterdam, Netherlands). Association for Computing Machinery, New
York,NY,USA,298–309. https://doi.org/10.1145/3213846.3213871[24]Yanjie Jiang, Hui Liu, Nan Niu, Lu Zhang, and Yamin Hu. 2021. Extract-
ing Concise Bug-Fixing Patches from Human-Written Patches in Ver-
sion Control Systems. In ICSE 2021 (Madrid, Spain). IEEE Press, 686–698.
https://doi.org/10.1109/ICSE43902.2021.00069
[25]RenéJust,DarioushJalali,andMichaelD.Ernst.2014. Defects4J:ADatabaseof
ExistingFaultstoEnableControlledTestingStudiesforJavaPrograms.In ISSTA
2014(SanJose,CA,USA).AssociationforComputingMachinery,NewYork,NY,
USA,437–440. https://doi.org/10.1145/2610384.2628055
[26]Rafael-Michael Karampatsis and Charles Sutton. 2020. How Often Do Single-
StatementBugsOccur?TheManySStuBs4JDataset.In MSR2020 (Seoul,Republic
ofKorea).AssociationforComputingMachinery,NewYork,NY,USA,573–577.
https://doi.org/10.1145/3379597.3387491
[27]SophiaDKolak,RubenMartins,ClaireLeGoues,andVincentJosuaHellendoorn.
2022.PatchGenerationwithLanguageModels:FeasibilityandScalingBehavior.In
DeepLearningforCodeWorkshop .https://openreview.net/forum?id=rHlzJh_b1-5
[28]AnilKoyuncu,KuiLiu,TegawendéF.Bissyandé,DongsunKim,JacquesKlein,
Martin Monperrus, and Yves Le Traon. 2020. FixMiner: Mining Relevant Fix
PatternsforAutomatedProgramRepair. EmpiricalSoftw.Engg. 25,3(may2020),
1980–2024. https://doi.org/10.1007/s10664-019-09780-z
[29]Xuan-BachD.Le,LingfengBao,DavidLo,XinXia,ShanpingLi,andCorinaPasare-
anu.2019. OnReliabilityofPatchCorrectnessAssessment.In ICSE2019 (Montreal,
Quebec,Canada).IEEEPress,524–535. https://doi.org/10.1109/ICSE.2019.00064
[30]Xuan-BachD.Le,Duc-HiepChu,DavidLo,ClaireLeGoues,andWillemVisser.
2017. S3:Syntax-andSemantic-GuidedRepairSynthesisviaProgrammingby
Examples.In ESEC/FSE2017 (Paderborn,Germany).AssociationforComputing
Machinery,NewYork,NY,USA,593–604. https://doi.org/10.1145/3106237.3106309
[31]XuanBachD.Le,DavidLo,andClaireLeGoues.2016. HistoryDrivenProgram
Repair.In SANER2016 ,Vol.1.213–224. https://doi.org/10.1109/SANER.2016.76
[32]ClaireLeGoues,ThanhVuNguyen,StephanieForrest,andWestleyWeimer.2012.
GenProg:AGenericMethodforAutomaticSoftwareRepair. TSE201238,1(2012),
54–72.https://doi.org/10.1109/TSE.2011.104
[33]YiLi,Shaohua Wang,and TienN. Nguyen.2020. DLFix: Context-Based Code
Transformation Learning for Automated Program Repair. In ICSE 2020 (Seoul,
South Korea). Association for Computing Machinery, New York, NY, USA,
602–614. https://doi.org/10.1145/3377811.3380345
[34]Bo Lin, Shangwen Wang, Ming Wen, and Xiaoguang Mao. 2022. Context-
Aware Code Change Embedding for Better Patch Correctness Assessment.
ACM Trans. Softw. Eng. Methodol. 31, 3, Article 51 (may 2022), 29 pages.
https://doi.org/10.1145/3505247
[35]KuiLiu,AnilKoyuncu,TegawendéF.Bissyandé,DongsunKim,JacquesKlein,and
YvesLeTraon.2019. YouCannotFixWhatYouCannotFind!AnInvestigationof
FaultLocalizationBiasinBenchmarkingAutomatedProgramRepairSystems.In
ICST2019,Xi’an,China .IEEE,102–113. https://doi.org/10.1109/ICST.2019.00020
[36]Kui Liu, Anil Koyuncu, Dongsun Kim, and Tegawendé F. Bissyandé. 2019.
AVATAR:FixingSemanticBugswithFixPatternsofStaticAnalysisViolations.
InSANER2019,Hangzhou,China ,XinyuWang,DavidLo,andEmadShihab(Eds.).
IEEE,456–467. https://doi.org/10.1109/SANER.2019.8667970
[37]KuiLiu,AnilKoyuncu,DongsunKim,andTegawendéF.Bissyandé.2019. TBar:
RevisitingTemplate-BasedAutomatedProgramRepair.In ISSTA2019 (Beijing,
China). Association for Computing Machinery, New York, NY, USA, 31–42.
https://doi.org/10.1145/3293882.3330577
[38]KuiLiu,ShangwenWang,AnilKoyuncu,KisubKim,TegawendéF.Bissyandé,
DongsunKim,PengWu,JacquesKlein,XiaoguangMao,andYvesLeTraon.2020.
OntheEﬃciencyofTestSuiteBasedProgramRepair:ASystematicAssessment
of16AutomatedRepairSystemsforJavaPrograms.In ICSE2020 (Seoul,South
Korea). Association for Computing Machinery, New York, NY, USA, 615–627.
https://doi.org/10.1145/3377811.3380338
[39]Xuliang Liu and Hao Zhong. 2018. Mining stackover/f_low for program repair.
InSANER2018,Campobasso,Italy,March20-23,2018 ,RoccoOliveto,Massimil-
ianoDiPenta,andDavidC.Shepherd(Eds.).IEEEComputerSociety,118–129.
https://doi.org/10.1109/SANER.2018.8330202
[40]FanLongandMartinRinard.2015. StagedProgramRepairwithConditionSyn-
thesis.In ESEC/FSE2015 (Bergamo,Italy).AssociationforComputingMachinery,
NewYork,NY,USA,13pages. https://doi.org/10.1145/2786805.2786811
[41]Yiling Lou, Ali Ghanbari, Xia Li, Lingming Zhang, Haotian Zhang, Dan
Hao, and Lu Zhang. 2020. Can Automated Program Repair Re/f_ine Fault
Localization? A Uni/f_ied Debugging Approach. In ISSTA 2020 (Virtual Event,
USA). Association for Computing Machinery, New York, NY, USA, 75–87.
https://doi.org/10.1145/3395363.3397351
[42]ThibaudLutellier,HungVietPham,LawrencePang,YitongLi,MoshiWei,and
LinTan.2020. CoCoNuT:combiningcontext-awareneuraltranslationmodels
using ensemble for program repair. In ISSTA 2020, Virtual Event, USA, July
18-22, 2020 , Sarfraz Khurshid and Corina S. Pasareanu (Eds.). ACM, 101–114.
https://doi.org/10.1145/3395363.3397369
[43]PaulaMaddiganandTeoSusnjak.2023. Chat2VIS:GeneratingDataVisualisations
viaNaturalLanguageusingChatGPT,CodexandGPT-3LargeLanguageModels.
arXiv:2302.02094 [cs.HC]
1214ALarge-ScaleEmpiricalReviewofPatchCorrectnessCheckingApproaches ESEC/FSE’23,December3–9,2023,SanFrancisco,CA,USA
[44]H.B.MannandD.R.Whitney.1947. OnaTestofWhetheroneofTwoRandom
VariablesisStochasticallyLargerthantheOther. TheAnnalsofMathematical
Statistics18,1(1947),50–60. https://doi.org/10.1214/aoms/1177730491
[45]A. Marginean, J. Bader, S. Chandra, M. Harman, Y. Jia, K. Mao, A. Mols,
and A. Scott. 2019. SapFix: Automated End-to-End Repair at Scale.
InICSE-SEIP 2019 (Montreal, Quebec, Canada). IEEE Press, 269–278.
https://doi.org/10.1109/ICSE-SEIP.2019.00039
[46]MatiasMartinezandMartinMonperrus.2016. ASTOR:AProgramRepairLibrary
forJava(Demo).In ISSTA2016 (Saarbrücken,Germany).AssociationforComputing
Machinery,NewYork,NY,USA,441–444. https://doi.org/10.1145/2931037.2948705
[47]Matias Martinez and Martin Monperrus. 2018. Ultra-Large Repair Search
Space with Automatically Mined Templates: The Cardumen Mode of As-
tor. InSSBSE 2018, Montpellier, France (Lecture Notes in Computer Science,
Vol. 11036) , Thelma Elita Colanzi and Phil McMinn (Eds.). Springer, 65–86.
https://doi.org/10.1007/978-3-319-99241-9_3
[48]SergeyMechtaev,JooyongYi,andAbhikRoychoudhury.2016. Angelix:Scalable
MultilineProgramPatchSynthesisviaSymbolicAnalysis.In ICSE2016 (Austin,
Texas). Association for Computing Machinery, New York, NY, USA, 691–701.
https://doi.org/10.1145/2884781.2884807
[49]MartinMonperrus.2020. Thelivingreviewonautomatedprogramrepair. (2020).
[50]Erik Nijkamp, Bo Pang, Hiroaki Hayashi, Lifu Tu, Huan Wang, Yingbo Zhou,
SilvioSavarese,andCaimingXiong.2023. CodeGen:AnOpenLargeLanguage
ModelforCodewithMulti-TurnProgramSynthesis. arXiv: 2203.13474 [cs.LG]
[51]Yannic Noller, Ridwan Shariﬀdeen, Xiang Gao, and Abhik Roychoudhury.
2022. Trust Enhancement Issues in Program Repair. In ICSE 2022 (Pittsburgh,
Pennsylvania). Association for Computing Machinery, New York, NY, USA,
2228–2240. https://doi.org/10.1145/3510003.3510040
[52]Carlos Pacheco and Michael D. Ernst. 2007. Randoop: Feedback-Directed
Random Testing for Java. In OOPSLA 2007 (Montreal, Quebec, Canada).
Association for Computing Machinery, New York, NY, USA, 815–816.
https://doi.org/10.1145/1297846.1297902
[53]Mike Papadakis and Yves Le Traon. 2015. Metallaxis-FL: Mutation-Based
Fault Localization. Softw. Test. Verif. Reliab. 25, 5–7 (aug 2015), 605–628.
https://doi.org/10.1002/stvr.1509
[54]Yuhua Qi, Xiaoguang Mao, Yan Lei, Ziying Dai, and Chengsong Wang. 2014.
The Strength of Random Search on Automated Program Repair. In ICSE 2014
(Hyderabad,India).AssociationforComputingMachinery,NewYork,NY,USA,
254–265. https://doi.org/10.1145/2568225.2568254
[55]ZichaoQi,FanLong,SaraAchour,andMartinRinard.2015. AnAnalysisofPatch
PlausibilityandCorrectnessforGenerate-and-ValidatePatchGenerationSystems.
InISSTA2015 (Baltimore,MD,USA).AssociationforComputingMachinery,New
York,NY,USA,24–36. https://doi.org/10.1145/2771783.2771791
[56]Andrew Reynolds, Morgan Deters, Viktor Kuncak, Cesare Tinelli, and Clark
Barrett. 2015. Counterexample-Guided Quanti/f_ier Instantiation for Synthesis
inSMT.In ComputerAidedVeri/f_ication ,DanielKroeningandCorinaS.Păsăreanu
(Eds.).SpringerInternationalPublishing,Cham,198–216.
[57]RiponK.Saha,YingjunLyu,HiroakiYoshida,andMukulR.Prasad.2017. ELIXIR:
EﬀectiveObjectOrientedProgramRepair.In ASE2017 (Urbana-Champaign,IL,
USA).IEEEPress,648–659. https://doi.org/10.1109/ASE.2017.8115675
[58]SeemantaSaha,RiponK.Saha,andMukulR.Prasad.2019. HarnessingEvolution
forMulti-HunkProgramRepair.In ICSE2019 (Montreal,Quebec,Canada).IEEE
Press,13–24. https://doi.org/10.1109/ICSE.2019.00020
[59]Takaya Saito and Marc Rehmsmeier. 2015. The Precision-Recall Plot Is
More Informative than the ROC Plot When Evaluating Binary Clas-
si/f_iers on Imbalanced Datasets. PLOS ONE 10, 3 (03 2015), 1–21.
https://doi.org/10.1371/journal.pone.0118432
[60]DavidSchulerandAndreasZeller.2009. Javalanche:EﬃcientMutationTestingfor
Java.InESEC/FSE2009 (Amsterdam,TheNetherlands).AssociationforComputing
Machinery,NewYork,NY,USA,297–298. https://doi.org/10.1145/1595696.1595750
[61]EdwardK.Smith,EarlT.Barr,ClaireLeGoues,andYuriyBrun.2015. IstheCure
WorsethantheDisease?Over/f_ittinginAutomatedProgramRepair.In ESEC/FSE
2015(Bergamo,Italy).AssociationforComputingMachinery,NewYork,NY,USA,
532–543. https://doi.org/10.1145/2786805.2786825
[62]Shin Hwei Tan, Hiroaki Yoshida, Mukul R. Prasad, and Abhik Roychoudhury.
2016. Anti-PatternsinSearch-BasedProgramRepair.In FSE2016(Seattle,WA,
USA). Association for Computing Machinery, New York, NY, USA, 727–738.
https://doi.org/10.1145/2950290.2950295
[63]HaoyeTian,KuiLiu,AbdoulKaderKaboré,AnilKoyuncu,LiLi,JacquesKlein,
andTegawendéF.Bissyandé.2021. EvaluatingRepresentationLearningofCode
ChangesforPredictingPatchCorrectnessinProgramRepair.In ASE2020 (Virtual
Event,Australia).AssociationforComputingMachinery,NewYork,NY,USA,
981–992. https://doi.org/10.1145/3324884.3416532
[64]ImmanuelTrummer.2022. CodexDB:SynthesizingCodeforQueryProcessing
fromNaturalLanguageInstructionsUsingGPT-3Codex. Proc.VLDBEndow. 15,
11(jul2022),2921–2928. https://doi.org/10.14778/3551793.3551841
[65]RijnardvanTonderandClaireLeGoues.2018.StaticAutomatedProgramRepairfor
HeapProperties.In ICSE2018 (Gothenburg,Sweden).AssociationforComputing
Machinery,NewYork,NY,USA,151–162. https://doi.org/10.1145/3180155.3180250[66]Shangwen Wang, Ming Wen, Bo Lin, Hongjun Wu, Yihao Qin, Deqing Zou,
Xiaoguang Mao, and Hai Jin. 2020. Automated Patch Correctness Assess-
ment: How Far are We?. In ASE 2020, Melbourne, Australia . IEEE, 968–980.
https://doi.org/10.1145/3324884.3416590
[67]Yue Wang, Weishi Wang, Sha/f_iq R. Joty, and Steven C. H. Hoi. 2021. CodeT5:
Identi/f_ier-aware Uni/f_ied Pre-trained Encoder-Decoder Models for Code Un-
derstanding and Generation. CoRRabs/2109.00859 (2021). arXiv: 2109.00859
https://arxiv.org/abs/2109.00859
[68]Westley Weimer, Zachary P. Fry, and Stephanie Forrest. 2013. Lever-
aging Program Equivalence for Adaptive Program Repair: Models and
First Results. In ASE 2013 (Silicon Valley, CA, USA). IEEE Press, 356–366.
https://doi.org/10.1109/ASE.2013.6693094
[69]WestleyWeimer,ZacharyP.Fry,andStephanieForrest.2013. Leveragingprogram
equivalenceforadaptiveprogramrepair:Modelsand/f_irstresults.In 201328th
IEEE/ACMInternationalConferenceonAutomatedSoftwareEngineering,ASE2013,
SiliconValley,CA,USA,November11-15,2013 ,EwenDenney,Tev/f_ikBultan,and
AndreasZeller(Eds.).IEEE,356–366. https://doi.org/10.1109/ASE.2013.6693094
[70]Ming Wen, Junjie Chen, Rongxin Wu, Dan Hao, and Shing-Chi Cheung. 2018.
Context-AwarePatchGenerationforBetterAutomatedProgramRepair.In ICSE
2018(Gothenburg,Sweden).AssociationforComputingMachinery,NewYork,
NY,USA,1–11. https://doi.org/10.1145/3180155.3180233
[71]Chunqiu Steven Xia, Yuxiang Wei, and Lingming Zhang. 2023. Auto-
mated Program Repair in the Era of Large Pre-Trained Language Mod-
els. InICSE 2023 (Melbourne, Victoria, Australia). IEEE Press, 1482–1494.
https://doi.org/10.1109/ICSE48619.2023.00129
[72]ChunqiuStevenXiaandLingmingZhang.2022. LessTraining,MoreRepairing
Please:RevisitingAutomatedProgramRepairviaZero-ShotLearning.In ESEC/FSE
2022(Singapore,Singapore).AssociationforComputingMachinery,NewYork,
NY,USA,959–971. https://doi.org/10.1145/3540250.3549101
[73]ChunqiuStevenXiaandLingmingZhang.2023. KeeptheConversationGoing:
Fixing162outof337bugsfor$0.42eachusingChatGPT. arXiv: 2304.00385 [cs.SE]
[74]Qi Xin and Steven P. Reiss. 2017. Identifying Test-Suite-Over/f_itted Patches
through Test Case Generation. In ISSTA 2017 (Santa Barbara, CA, USA).
Association for Computing Machinery, New York, NY, USA, 226–236.
https://doi.org/10.1145/3092703.3092718
[75]Qi Xin and Steven P. Reiss. 2019. Better Code Search and Reuse for Better
Program Repair. In GI 2019(Montreal, Quebec, Canada). IEEE Press, 10–17.
https://doi.org/10.1109/GI.2019.00012
[76]Yingfei Xiong, Xinyuan Liu, Muhan Zeng, Lu Zhang, and Gang Huang. 2018.
Identifying Patch Correctness in Test-Based Program Repair. In ICSE 2018
(Gothenburg,Sweden).AssociationforComputingMachinery,NewYork,NY,
USA,789–799. https://doi.org/10.1145/3180155.3180182
[77]YingfeiXiong,JieWang,RunfaYan,JiachenZhang,ShiHan,GangHuang,andLu
Zhang.2017. Preciseconditionsynthesisforprogramrepair.In ICSE2017,Buenos
Aires,Argentina,May20-28,2017 ,SebastiánUchitel,AlessandroOrso,andMartinP.
Robillard(Eds.).IEEE/ACM,416–426. https://doi.org/10.1109/ICSE.2017.45
[78]JifengXuan,MatiasMartinez,FavioDemarco,MaximeClement,SebastianR.Lame-
las Marcote, Thomas Durieux, Daniel Le Berre, and Martin Monperrus. 2017.
Nopol:AutomaticRepairofConditionalStatementBugsinJavaPrograms. IEEE
Trans.SoftwareEng. 43,1(2017),34–55. https://doi.org/10.1109/TSE.2016.2560811
[79]Jun Yang, Yuehan Wang, Yiling Lou, Ming Wen, and Lingming Zhang. 2023.
ESEC/FSE’23Artifactfor"ALarge-ScaleEmpiricalReviewofPatchCorrectness
CheckingApproaches". https://doi.org/10.5281/zenodo.8267827
[80]Jinqiu Yang, Alexey Zhikhartsev, Yuefei Liu, and Lin Tan. 2017. Bet-
ter test cases for better automated program repair. 831–841. https:
//doi.org/10.1145/3106237.3106274
[81]He Ye, Jian Gu, Matias Martinez, Thomas Durieux, and Martin Monper-
rus. 2019. Automated Classi/f_ication of Over/f_itting Patches with Statically
Extracted Code Features. CoRRabs/1910.12057 (2019). arXiv: 1910.12057
http://arxiv.org/abs/1910.12057
[82]He Ye, Matias Martinez, and Martin Monperrus. 2021. Automated Patch
AssessmentforProgramRepairatScale. EmpiricalSoftw.Engg. 26,2(mar2021),
38pages. https://doi.org/10.1007/s10664-020-09920-w
[83]Jooyong Yi, Shin Hwei Tan, Sergey Mechtaev, Marcel Böhme, and Abhik Roy-
choudhury.2018. ACorrelationStudybetweenAutomatedProgramRepairand
Test-SuiteMetrics.In ICSE2018 (Gothenburg,Sweden).AssociationforComputing
Machinery,NewYork,NY,USA,24. https://doi.org/10.1145/3180155.3182517
[84]YuanYuanandWolfgangBanzhaf.2020. ARJA:AutomatedRepairofJavaPro-
gramsviaMulti-ObjectiveGeneticProgramming. IEEETransactionsonSoftware
Engineering 46,10(2020),1040–1067. https://doi.org/10.1109/TSE.2018.2874648
[85]QihaoZhu,ZeyuSun,Yuan-anXiao,WenjieZhang,KangYuan,YingfeiXiong,
andLuZhang.2021. ASyntax-GuidedEditDecoderforNeuralProgramRepair.
InESEC/FSE2021 (Athens,Greece).AssociationforComputingMachinery,New
York,NY,USA,13pages. https://doi.org/10.1145/3468264.3468544
Received2023-02-02;accepted2023-07-27
1215