CodeRecommendationforExceptionHandling
TamNguyen
AuburnUniversity
Auburn, Alabama, UnitedStates
tam@auburn.eduPhong Vu
AuburnUniversity
Auburn, Alabama, UnitedStates
lenniel@auburn.eduTungNguyen
AuburnUniversity
Auburn,Alabama, UnitedStates
tung@auburn.edu
ABSTRACT
Exception handling is an effective mechanism to avoid unexpected
runtime errors. However, novice programmers might fail to handle
exceptions properly, causing serious errors like system crashing or
resource leaking. In this paper, we introduce FuzzyCatch, a code
recommendationtoolforhandlingexceptions.Basedonfuzzylogic,
FuzzyCatch can predict if a runtime exception would occur in a
givencodesnippet and recommend codeto handle thatexception.
FuzzyCatch is implemented as a plugin for Android Studio. The
empiricalevaluationsuggeststhatFuzzyCatchishighlyeffective.
For example, it has top-1 accuracy of 77% on recommending what
exceptiontocatchina trycatch blockandof70%onrecommending
what method should be called when such an exception occurs.
FuzzyCatch also achieves a high level of accuracy and outperforms
baselines significantly on detecting and fixing real exception bugs.
CCS CONCEPTS
Â·Softwareanditsengineering â†’Developmentframeworks
andenvironments ;Softwarelibrariesandrepositories ;Soft-
ware maintenance tools .
KEYWORDS
ExceptionHandling, Code Recommendation, Bug Fixing
ACMReference Format:
TamNguyen,PhongVu,andTungNguyen.2020.CodeRecommendation
for Exception Handling. In Proceedings of the 28th ACM Joint European Soft-
ware Engineering Conference and Symposium on the Foundations of Software
Engineering (ESEC/FSE â€™20), November 8Å›13, 2020, Virtual Event, USA. ACM,
NewYork, NY, USA, 12pages.https://doi.org/10.1145/3368089.3409690
1 INTRODUCTION
Exceptions are unexpected errors occurring while a program is
running.Ifnothandledproperly,exceptionscouldleadtoserious
problems such as system crashes or resource leaks. For example,
when a program tries to parse an integer from a string but the
stringdoes not representavalid number,a NumberFormatExcep-
tionexception occurs. If the program ignores that exception and
continues to read, it will crash. Thus, effective exception handling
isimportantinsoftwaredevelopment.Apriorstudy[ 38]reports
Permissionto make digitalor hard copies of allorpart ofthis work for personalor
classroom use is granted without fee provided that copies are not made or distributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
on the first page. Copyrights for components of this work owned by others than ACM
mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,orrepublish,
topostonserversortoredistributetolists,requirespriorspecificpermissionand/ora
fee. Request permissions from permissions@acm.org.
ESEC/FSE â€™20, November 8Å›13, 2020, Virtual Event, USA
Â©2020 Associationfor Computing Machinery.
ACM ISBN 978-1-4503-7043-1/20/11...$15.00
https://doi.org/10.1145/3368089.3409690thatcorrectlyhandlingexceptionscouldimprove17%intheper-
formanceofsoftware systems.
Most modern programming languages provide built-in support
for exception handling. For example, in Java, we can wrap a try
blockaroundacodefragmentwhereanexceptionmightoccurand
addacatchblocktohandlethatexception.However,programmers
have to determine themselves what code fragment to protect with
thetryblock,whatexceptiontypetohandleinthe catchblock,and
what to react when such an exception occurs.
Learning to handle exceptions properly is often challenging
duetoseveralreasons.First,modernsoftwaredevelopmentrelies
stronglyonAPIlibraries.AnAPIlibraryoftendefinesmanyspecific
exception types and exception handling rules. For example, in Java
SDK, class FileNotFoundException is defined for the â€™file not foundâ€™
exception. When such an exceptionhappens,the software system
could react by notifying users about the error and writing the
relevantinformation (timestamp, filename, caller, etc.)to asystem
logfor future debugging.
However,amajorAPIlibraryoftenconsistsofalargenumber
ofcomponents.Forexample,theAndroidapplicationframework
contains over 3,400 classes, 35,000 methods, and more than 260
exceptiontypes[ 22].Thus,itisverydifficulttolearnandmemorize
what methodcould causewhat exceptionandwhatto reactwhen
aparticularexceptionoccurs.Secondly,popularAPIlibrariesare
oftenupgradedquickly.Forexample,in10yearsfrom2008to2018,
28majorversionsofAndroidSDKhavebeenreleased.Thelatest
versionofJavaSDKisJDK12isreleasedin3/2019.Eachofthose
major versions often includes very large changes, which could
introduce newexceptions andnewrulesfor exception handling.
Most importantly, the documentation for exception handling is
generallyinsufficient.Kechagia etal.[19]foundthat69%ofmethods
in Android SDK have undocumented exceptions and 19% of the
crashes could have been caused by insufficient documentation.
Coelhoet al.[9] found that documentation for many explicitly
thrown runtime exceptions (or often called unchecked exceptions)
israrelyprovided.
Moderncodeeditorscanenforcecatchingofcheckedexceptions.
Forexample,inJava, FileNotFoundException isacheckedexception.
Thus, when a new FileInputStream object is created to read from a
file, Eclipse will ask the programmer to catch the FileNotFoundEx-
ception(orthrowit). However, such support is not available for
runtime (unchecked) exceptions like IllegalArgumentException . In
addition, popular codeeditors cannot suggestthe reactionswhen a
checkedoruncheckedexception happens.
In this paper, we introduce FuzzyCatch, a code recommendation
plugin for Android Studio with advanced support for exception
handling.Basedonfuzzylogicruleslearnedfromthousandsofhigh-
quality programs publicly available in app stores, FuzzyCatch can
predict if a runtime exception potentially occurs in a code snippet.
1027
ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Tam Nguyen, PhongVu, andTung Nguyen
Then, as the programmer requests, it can generate the try-catch
statementwith catchblockcontainingcodetocatchthatexception
andrecover from it.
The key idea of FuzzyCatch is based on the observation that
exception handling can be expressed by two general programming
rules: i)if call method ğ‘šthen catch an exception ğ‘’; and ii)if an
exception ğ¸occursthenperformaction ğ‘Ÿtoreact.Forexample,ifyou
call the method Activity.unregisterReceiver then you have to catch
anIllegalArgumentException . Or, if you call the Integer.parseInt
thenyouhavetocatchan NumberFormatException .And,whenan
SQLiteDatabase occurs,youcallmethod Cursor.close asasimple
reactionto close the resource.
FuzzyCatch learns such rules from a large collection of high-
qualitycode.Forexample,assumethatnoavailabledocumentation
specifiesthatifwecallmethod ğ‘š,weneedtocatchanexception
of typeğ¸. However, we observe from thousands of high-rated apps
in Google Android Appstore that whenever ğ‘šis called, 90% of the
times an exception of type ğ¸is also caught. Such a high level of
co-occurrence suggests a rule that if we call ğ‘š, we should catch
ğ¸.However,because those rulesare likely imperfect,fuzzy logicis
usedtorepresentandcombinethem.Thedetailsofourapproach
are presentedinSection 3.
Wehaveconductedseveralexperimentstoevaluatetheuseful-
nessandeffectivenessofourtool.Wecollectedadatasetcontaining
over21 million methodsfromover13,000highlyratedmobileapps
inGoogleAndroidAppstore.The10-foldcross-validationofFuzzy-
Catch on this dataset are promising. FuzzyCatch has the top-1
accuracyof77%forrecommendingexceptiontypes.Thatmeans,
in 77% of the cases, the first exception type that FuzzyCatch rec-
ommends catching is the one used by app developers. The top-1
accuracyofrecommending reactioncode isof70%.
We collected a second dataset of 1,000 real exception related
bugs. In its strictest mode, FuzzyCatch flags 734 cases (73%), i.e.,
suggestingtheyneedexceptionhandling.Initsloosestmode,Fuzzy-
Catchflags821cases(82%).However,theloosestmodewouldmake
around35%unwantedwarningsoncodethatprogrammershave
never added exception handling code. The strictest mode would
makeonly7%ofunwantedwarnings.Onthetaskofrecommending
handlingactions,FuzzyCatchprovidesmeaningfulrecommenda-
tionsinroughly65%ofthebugfixesandoutperformsthebaselines
significantly.Our evaluation are presentedinSection 5.
The key contributionsofour paper include:
â€¢Anovelapproachbasedonfuzzylogicforexceptionhandling
code recommendation
â€¢A plugin for Android Studio implemented that approach for
Java andAndroid mobileapp development
â€¢An extensive evaluation ofour approach andour tool.
2 MOTIVATION EXAMPLES
Although,mostmodernprogramminglanguagesprovidebuilt-in
support for exception handling. Programmers still have to deter-
mine themselves what code fragment to protect with the tryblock,
whatexceptiontypetohandleinthe catchblock,andwhattoreact
whensuchanexceptionoccurs.Thepreviousstudies[ 13,31]shows
thatprogrammersmighteasilyforgetto handleanexception that
potentially occurs in a code snippet. Such mistakes could causeserious issues to the developing app, i.e. crashing. For example,
Figure9(Section5)showsaseriousbugcausedbynotcatchinga
RuntimeException .
Furthermore,thestudiesalsosuggestthatinpractice,noviceand
even experienced programmers might not always handle excep-
tionsproperly.Forexample,Figure 1showsanexceptionrelated
bugfixintheWordPressmobileapp.Theprogrammercallsmethod
Activity.unregisterReceiver() with variable mediaUpdate passed as
itsargument.Atruntime,thiscallcausesan IllegalArgumentExcep-
tionandcrashesthemobileapp.Thiserrorisfixedbya trycatch
block that handles that exception. However, the catchblock has no
code.Althoughthisbugfixmakestheappnotcrashagain,itisa
badprogramming practiceto catch an exception anddo nothing.
- unregisterReceiver(mediaUpdate);
+ try {
+     unregisterReceiver(mediaUpdate);
+ } catch (IllegalArgumentException e) { }
Figure 1:AnExample ofSwallowing an Exception
Figure2showsanotherexceptionrelatedbugfixof Cursorob-
ject.Inthisexample,anexceptionoccurswhenusing Cursorobject.
To handle this bug, the programmer added a try-catch block to
cover the code portion that uses the Cursorobject, and returned
nullinthecatchblock.Thisactionofhandlingmayleadtomem-
ory leak bugs. After exception occurs and the function returns,
theCursorobjectstilllivesandholdssystemresourcesuntilitis
collected by the garbage collector. This may prevent other parts of
theprogramtoaccesstheresources.Theproperwaytohandlethis
exception is calling closemethod on the cursorobject before the
returnstatement.The closemethodwillreleaseresourcesthathold
bythe cursor objectbefore the function lost the reference to it.
. . .
+ try {
     if (cursor.getCount() == 0) {
         return null;
     } else {
         cursor.moveToFirst();
         return new Pair<>(cursor.getLong(), cursor.getString(1));   
     }
+ } catch (Exception e) {
+    return null;
+ }COMMIT MESSAGE: "catch exception when reading message id 
from database ."
Figure 2:AnExceptionRelated Bug Fix
Theexamplesindicatethe needexceptionhandlingrecommen-
dationtoolsforprogrammers.Suchprogrammingtoolscouldwarn
programmers about potential exceptions that might occur in the
code andassist programmers to handle the exceptions correctly.
3 APPROACH
Inthissection,wediscussthekeytechniquesofFuzzyCatch.We
willstartbyintroducingXRank,afuzzylogicsystemtorankand
suggest exception types to catch given a piece of code. Then we
describe XHand, a fuzzy logic system for recommending repairing
actions when aparticular exception occurs inthat pieceof code.
1028Code Recommendation forExceptionHandling ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
3.1 Recommending Exception Types
We formulate the problem of recommending exception types as
the following: Given a code snippet ğ¶, determine of the runtime
exception(s) ğ‘’with a highpossibility to occur when ğ¶is executed.
Ourkeyideatosolvethisproblemistolearnfromtheexception
handling code already written in high-quality software systems.
We firstcollectalargecollectionofhigh-quality code ğ·. Foreach
methodğ‘šcalledinğ¶,welookatalleverycallof ğ‘šinğ·.Ifthose
callsoftenassociatewithcatchinganexception ğ‘’thenitislikely
that calling ğ‘šcould cause ğ‘’. Since there might be several methods
calledinğ¶andseveralexceptions associatingwiththemin ğ·, we
needto combine andrank thoseexceptions.
This is an example from our experiment data. As discussed in
detail in Section 5, we collected roughly 13,000 highly-rated An-
droid mobileapps. Inthose apps, we found38,218 calls tomethod
Integer.parseInt . Among them, 12,469 calls (32.6%) appear in try-
catchblocks catching NumberFormatException . And this is the
exceptionmostco-occurredwith Integer.parseInt .Thus,evenwith-
outdocumentation,wecaninferthat calling Integer.parseInt could
causeNumberFormatException .Ofcourse,JavaAPIdocumentation
comfirmsthat.
Similarly, we found that, among 23,406 method calls to Cur-
sor.moveToFirst , 8,159 calls (34.8%) co-occur with catching SQLi-
teException . That means,we could infer thatthemethodcall Cur-
sor.moveToFirst might cause SQLiteException . This is also con-
firmed by Android API documentation. Of course, calls to Inte-
ger.parseInt andCursor.moveToFirst oftenalsoco-occurwithcatch-
ingException andThrowable ,the mostgeneralexception inJava.
Now,assumethataprogrammeriswritingacodesnippetcon-
tainingacallto Cursor.moveToFirst toreaddatafromadatabase
queryandacallto Integer.parseInt toparsesuchdata.Theabove
exception handling rules learned from high quality code suggest
him/hertocatch NumberFormatException andSQLiteException (or
the more general ones Exception andThrowable ). However,those
rules areimperfect (e.g., recommending to catch NumberFormatEx-
ceptionisapplicable for only 32.6% ofcalls to Integer.parseInt ).
Inthispaper,weaddressthatissueviafuzzylogic.Wedeveloped
XRank,afuzzylogicsysteminFuzzyCatchtorankandrecommend
exception types. Basically, XRank contains a collection of rules Å‚if
callğ‘šthencatch ğ‘’Å¾,inwhich ğ‘šisanmethod(e.g., Integer.parseInt )
andğ‘’isanexceptiontype(e.g., NumberFormatException ).Because
thoserulesare imperfect,eachrulehas aconfidence level ğœ‡ğ‘š(ğ‘’).
XRank uses fuzzy sets to represent those rules. For each method
ğ‘š,ğ‘‹ğ‘šisdefinedas Å‚thesetofexceptionstocatchwhencalling ğ‘šÅ¾.As
afuzzyset, ğ‘‹ğ‘šhas amembership function ğœ‡ğ‘š()whichcalculates
membership score ğœ‡ğ‘š(ğ‘’)for every available exception type ğ‘’.
In traditional fuzzy logic systems, membership functions are de-
fined by domain experts. However, in FuzzyCatch, we define mem-
bership functions empirically, i.e., the membership scores ğœ‡ğ‘š(ğ‘’)
is estimated from the training data (a repository of high-quality
code). The key assumption is that the more ğ‘šandğ‘’co-occur in
high-qualitycode writtenbyprofessional programmers,the more
confidencethatifwecall ğ‘š,weshouldcatch ğ‘’(becauseprofessional
programmersoftendothat).Therefore, ğœ‡ğ‘š(ğ‘’)iscalculatedbased
on theco-occurrenceof ğ‘šandğ‘’in thetrainingdata.Assume that
ğ‘›ğ‘šis the number of calls to ğ‘šandğ‘›ğ‘š,ğ‘’is is the number of calls toTable 1:Membership Scores
Integer.parseInt (ğ‘›ğ‘š=38,218) ğ‘›ğ‘š,ğ‘’ğœ‡ğ‘š(ğ‘’)
NumberFormatException 12,469 0.326
Exception 5,496 0.144
Throwable 687 0.018
IllegalArgumentException 470 0.012
JSONException 427 0.011
Cursor.moveToFirst (ğ‘›ğ‘š=23,406) ğ‘›ğ‘š,ğ‘’ğœ‡ğ‘š(ğ‘’)
SQLiteException 8,159 0.349
Exception 4,288 0.183
SQLException 460 0.020
Throwable 410 0.018
SQLiteFullException 216 0.009
MediaPlayer.getDuration (ğ‘›ğ‘š=1,152) ğ‘›ğ‘š,ğ‘’ğœ‡ğ‘š(ğ‘’)
IllegalStateException 105 0.091
Exception 44 0.038
Throwable 7 0.006
IllegalArgumentException 5 0.004
SecurityException 2 0.002
Byte.parseByte (ğ‘›ğ‘š=145) ğ‘›ğ‘š,ğ‘’ğœ‡ğ‘š(ğ‘’)
NumberFormatException 17 0.117
Exception 8 0.055
JSONException 3 0.020
Throwable 3 0.020
NoSuchElementException 2 0.013
ğ‘šinalltry-catch blockscatching ğ‘’,then:
ğœ‡ğ‘š(ğ‘’)=ğ‘›ğ‘š,ğ‘’
ğ‘›ğ‘š(1)
Formula1impliesthat thevalueof ğœ‡ğ‘š(ğ‘’)is between [0,1]. Ta-
ble1lists the top five exception types to catch for several methods
andtheirmembershipscoresestimatedfromourexperimentdata.
We could see that for Integer.parseInt ,NumberFormatException
isthe top-1exceptiontype, co-occurringwith 32.6%of itsmethod
calls. The next one is the general exception type Exception , co-
occurringwith14.4%.Theremainingexceptiontypeshavemuch
lower scores.
XRank utilizes the fuzzy sets ğ‘‹ğ‘šfor two tasks: assessing if a
givencodesnippet needs a try-catch block and rankingexception
types to catch in that block. To do that, for each method ğ‘š, it first
calculates ğœŒğ‘š, theexception risk ofğ‘š, which is the total possibility
thatcalling ğ‘šwouldcauseanexception.Because ğ‘‹ğ‘šisthefuzzy
set representing the possibility that calling ğ‘šwould cause each
exception ğ‘’, the exception risk ğœŒğ‘šis calculated as the total weight
ofğ‘‹ğ‘š:
ğœŒğ‘š=|ğ‘‹ğ‘š|=/summationdisplay.1
ğ‘’ğœ‡ğ‘š(ğ‘’) (2)
Table2lists the exception risk of three methods in Table 1. We can
seethatamongthethreeofthem, Cursor.moveToFirst istheriskiest,
e.g.,nearly60%ofitscallsassociatedwithcatchinganexception.
In contrast, just 14% of calls to MediaPlayer.getDuration associate
withcatchingan exception, thus, its exception riskismuchlower.
1029ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Tam Nguyen, PhongVu, andTung Nguyen
Table 2:ExceptionRisk Scores
Method ğ‘›ğ‘šğœŒğ‘š
Cursor.moveToFirst 23,406 0.578
Integer.parseInt 38,218 0.512
MediaPlayer.getDuration 1,152 0.141
Fuzzylogic systemsoftenuselinguistic conceptsandvariables
to make them easier to use and understand for the domain experts
and end-users of those systems. To make FuzzyCatch easier to use
forprogrammers,weclassifythemethodsintodifferentriskclasses
basedontheirexceptionriskscores.Assumethat ğ›¼1,ğ›¼2,andğ›¼3are
respectivelythe20%,30%,and50%percentileofallexceptionrisk
scores.Then,ifmethod ğ‘šhasğœŒğ‘š>ğ›¼1(i.e.,ğ‘šisthetop-20%among
allmethods),itisclassifiedas Å‚VERYRISKYÅ¾ .Ifğ›¼1â‰¥ğœŒğ‘š>ğ›¼2(ğ‘š
is not in top-20% but in top-30%), it is classified as Å‚RISKYÅ¾. And if
Ifğ›¼2â‰¥ğœŒğ‘š>ğ›¼3(ğ‘šis not in top-30% but in top-50%) it is classified
asÅ‚LESS RISKYÅ¾ . The remaining methods are considered as not
risky andignored.
In the IDE (Android Studio), we color-code method calls with
their risk levels. For example, calls of Å‚VERY RISKYÅ¾ methods like
Cursor.moveToFirst are colored RED. Calls of Å‚RISKYÅ¾methods
(likeInteger.parseInt ) are colored ORANGE. Calls of Å‚LESS RISKYÅ¾
methods(like IntegerMediaPlayer.getDuration )arecoloredYEL-
LOW.Callsofothermethodsare unchanged.
We could see that for a single method call to ğ‘š, the exception
riskğœŒğ‘š(which iscorrespondinglycolor-coded asvisual guidefor
programmers) and the membership scores in the fuzzy set ğ‘‹ğ‘šare
sufficient to suggest if a try-catch block is needed and to recom-
mend exceptions to catch in such a block. For example, a call to
Cursor.moveToFirst shouldberecommendedwitha try-catch block
(because it is classified as Å‚VERY RISKYÅ¾ to cause an exception).
Then, the topexception to catch when calling Cursor.moveToFirst
should be SQLiteException .
However,programmersoften do not write try-catch block for
each single call. We are more likely to write a try-catch block for a
code snippet which might contain several method calls. Thus, to
combine exception handling rules of all those method calls, XRank
alsouses afuzzylogic approach.
Let us discuss an example first. Assume that a code snippet ğ¶
contains a call to Cursor.moveToFirst to read data from a database
queryandacallto Integer.parseInt toparsesuchdata.Then,because
both of them have high exception risk, the code snippet also has
high risk of causing exceptions. Two most potential exceptions are
SQLiteException (fromcalling Cursor.moveToFirst andNumberFor-
matException (from calling Integer.parseInt ). Thus, a programmer
might write a tryblock around the code snippet and two catch
blocks for those two exceptions. However, he/she might also write
a simpler solution by using only a catchblock catching Exception ,
which generalizes both NumberFormatException andSQLiteEx-
ceptionandalsohashighmembershipscoresinthefuzzysetsof
exceptions of both Cursor.moveToFirst Integer.parseInt . In other
words,whentwomethods Cursor.moveToFirst andInteger.parseInt
are called together, the potential exceptions are combined from
those for each of that method. In fuzzy logic, this combination is a
fuzzyunion.In general, assumethat ğ¶containsğ‘˜method calls ğ‘š1,ğ‘š2...,ğ‘šğ‘˜.
Letğ‘‹ğ¶be the fuzzy set of exceptions should be caught for ğ¶, then
ğ‘‹ğ¶isthe union ofallfuzzysetsof exceptions for ğ‘š1,ğ‘š2...,ğ‘šğ‘˜:
ğ‘‹ğ¶=ğ‘‹ğ‘š1âˆªğ‘‹ğ‘š1âˆª...âˆªğ‘‹ğ‘šğ‘˜ (3)
Becauseğ‘‹ğ¶is a fuzzy set, it has a membership function ğœ‡ğ¶. The
union operation in fuzzy logic is defined via calculating ğœ‡ğ¶from
ğœ‡ğ‘š1...ğœ‡ğ‘šğ‘˜. There are several formula for fuzzy union, we use the
following one:
ğœ‡ğ¶(ğ‘’)=1âˆ’ (1âˆ’ğœ‡ğ‘š1(ğ‘’)) Ã— (1âˆ’ğœ‡ğ‘š2(ğ‘’)) Ã—...Ã— (1âˆ’ğœ‡ğ‘šğ‘˜(ğ‘’))(4)
Similarly, we also calculate the exception risk of the whole code
snippetğ¶as the following:
ğœŒğ¶=1âˆ’ (1âˆ’ğœŒğ‘š1) Ã— (1âˆ’ğœŒğ‘š2) Ã—...Ã— (1âˆ’ğœŒğ‘šğ‘˜)(5)
Forexample,assumethat ğ‘’isException ,ğ‘š1isCursor.moveToFirst ,
andğ‘š2isInteger.parseInt . From Table 1,ğœ‡ğ‘š1(ğ‘’)=0.183,ğœ‡ğ‘š2(ğ‘’)=
0.144. Thus, ğœ‡ğ¶(ğ‘’)=1âˆ’ (1âˆ’0.183)(1âˆ’0.144)=0.301. This
membership score is higher suggesting that Exception is more
likely tobe used in the catchblock when both methods are called.
Similarly, from Table 2,ğœŒğ‘š1=0.578,ğœŒğ‘š2=0.512. Thus, ğœŒğ¶=
1âˆ’ (1âˆ’0.578)(1âˆ’0.512)=0.794. This exception risk is higher
suggesting that when both methods are called, it is higher possible
that an exception willoccur,whichisintuitivelyplausible.
Insummary,XRankrecommendsforagivencodesnippet ğ¶as
thefollowing.First,itcalculatestheexceptionrisk ğœŒğ¶.IfğœŒğ¶exceeds
the user preset risk level (e.g., VERY RISKY withğœŒğ¶>ğ›¼1), then
itcalculates ğœ‡ğ¶(ğ‘’)foreveryavailableexceptiontype ğ‘’andranks
themdescendingly.FuzzyCatch presents thetopexceptionsin the
ranked list to the programmer. When he/she selects one exception,
FuzzyCatch will generate a try-catch block around code snippet ğ¶.
3.1.1 Improvements. To improve the prediction accuracy, we in-
corporate several programming language features to the XRank
model.First,weobservethatexceptionshavehierarchicalstructure.
For instance, in Java, all Exceptions andErrorsare sub-classes of
Throwable ,allruntime exceptionsare sub-classesof RuntimeEx-
ception,andRuntimeException isasub-classof Exception .With
thehierarchicalstructure,programmerscanuseasuper-classex-
ception in any catchblock of its sub-class exception. For example,
inFigure 9,theprogrammercoulduse Exception inthecatchblock
insteadofitssubclass RuntimeException .InXRank,weincorporate
this hierarchical property by modifying the value of ğ‘›ğ‘š,ğ‘’in the
Equation1.Anytime ğ‘šappearsina tryblockwhile ğ‘’appearsinthe
corresponding catchblock,inadditiontoincreasethevalueof ğ‘›ğ‘š,ğ‘’
by 1, we also increase the value of ğ‘›ğ‘š,ğ‘’â€²by a weighted value ğ‘¤ğ‘’â€²if
ğ‘’â€²is a super-class of ğ‘’.ğ‘¤ğ‘’â€²could be calculated as the frequency of
ğ‘’â€²inallcatchblocks:
ğ‘¤ğ‘’â€²=ğ‘›ğ‘’â€²/summationtext.1ğ‘›ğ‘’(6)
Mostmodernobject-orientedprogramminglanguagessupport
polymorphism.Overloadingmethodsisoneformofpolymorphism
in which methods within a class can have the same name if they
have different parameter lists. For example, the Integerclass has
two methods for parsing numbers that have the same name par-
seInt(Strings) andparseInt(Strings,intradix) .Thelatermethod
has anadditional parameter for radix.These overloading methods
oftenperformsimilartasks,thus,theyarelikelytothrowsimilar
1030Code Recommendation forExceptionHandling ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
//Usage 1
try {
  httpConnection.openConnection();
  httpConnection.setRequestProperty();
  ...
  httpConnection.connect();
} catch (IOException e){
  in = httpConnection.getErrorStream();
  ...
}//Usage 2
try {
  httpConnection.getInputStream();
  httpConnection.getHeaderField();
  ...
} catch (IOException e){
  int responseCode =  httpConnection.getResponseCode();
  httpConnection.disconnect();
  ...
}
Figure 3:HandlingExceptions forHttpURLConnection
exceptions. Furthermore,the later method in theexample appears
much less than the method parseInt(String s) . Thus, learning rules
forparseInt(String s, int radix) could be challenging due to lack
of data. We improve the prediction accuracy of XRank by group-
ing overloading methods together and consider each group as one
methodwhen learningthe model.
Finally, Table 1also shows the fuzzy set of the API method
Byte.parseByte . We can see that although parseByte is similar
toparseIntandparseLong , the statistics of parseByte are small
becauseitappearsmuchlessthantheothermethods.Thus,learning
rules for parseByte could be challenging due to lack of data. To
solve this problem, we group methods with the same aspect and
learn the usage rules for the group. In our implementation, we
manuallyidentify5groupsofsimilarAPImethods:numberparsing
(parseInt, parseLong,... ), cursor reading ( getInt, getLong,... ), bitmap
decoding( decodeByteArray,decodeResource,... ), SQLiteDatabase
(getVersion, getPath,... ), text formatting ( format, formatNumber,
formatFileSize,... ).
3.2 Recommending Exception Reaction
In addition to recommending what exception to catch, FuzzyCatch
also recommends codeto react when such an exception occurs by
writteninthe catchblock.Figures 9and10illustratecodeexamples
withdifferentwaystowritethecodetoreactwhenanexception
occurs.InFigure 9,theprogrammeraddsthecodethatcreatesanew
objectwithadifferentparameter.InFigure 10,theprogrammeradds
the code to retrieve the error stream from the HttpURLConnection
whentheexceptionoccurs.Weconsiderthenon-reactioninFigure 1
as abadpractice.
The reaction code written in the catchblock can be large and
complicated. However, Nguyen et al.[31] suggests that in most
cases,programmersoftencallonlyonemethodforeachobjectsuch
asprintStackTrace for anException object,closefor anSQLite-
Database object, or disconnect for anHttpURLConnection object.
Weconsidercreatinganewobject(suchas Datenow=newDate() )
as calling aspecial method new.Similarly, assigning a valueto an
object(suchas in=httpConnection.getErrorStream() )islikecalling
aspecialmethod assign.
Therefore,FuzzyCatchrecommendscodeinthe catchblockby
consideringallobjectsappearinginthe tryblockandprovidinga
ranked list of methods to call for that object. XHand is the fuzzy
logic systemresponsible to generatethat rankedlist.
OneobservationwhendevelopingXHandisthatthemethod ğ‘Ÿto
call for reactiondepends on the method call and potentially cause
the exception in the tryblock. For example, consider two usages of
aHttpURLConnection in Figure 3. In the first usage, the exception
mayoccurwhileusingthe HttpURLConnection forconnectingtoaserver via connectmethod. In this situation, we would want to get
theerrorstreambycalling getErrorStream togetinformationabout
the errorfor furtherprocessing.In thesecondusage,theobjectis
alreadyconnectedtotheserverbutthereadtimeoutexpirescausing
an exception. In this situation, the exception handler, we would
want to getthe response code anddisconnectfrom the server.
Thus, the keyidea of XHand istolearn the fuzzy rule "if callğ‘š
in thetryblock then call ğ‘Ÿin thecatchblock to react or recover" . For
example,asinFigure3, SQLiteDatabase.delete iscalledinthe try
block, thus, SQLiteDatabase.close is called in the catchblock to
release resources.
Thus,similartoXRank,wealsodefineinXHandforeachmethod
ğ‘šafuzzyset ğ‘…ğ‘šofmethodstocallforreactiontoexceptionpossibly
causedbycalling ğ‘š.Itsmembership function ğœˆğ‘šisdefinedas:
ğœˆğ‘š(ğ‘Ÿ)=ğ‘›ğ‘š(ğ‘Ÿ)
ğ‘›ğ‘š(7)
In thisformula, ğ‘›ğ‘šis againthe numberof callsof ğ‘šandğ‘›ğ‘š(ğ‘Ÿ)is
the number of times ğ‘šis called in a tryblock and ğ‘Ÿis called in the
corresponding catchblock.
Sometimesthemethodcallforreactiondependsontheoccurring
exception.Forexample,iftheexceptionis Exception ,thenprogram-
mers usually call its method printStackTrace orgetMessage . In
other words, XHand also needs to learn the fuzzy rule "if exception
ğ‘’occursthencall ğ‘Ÿtoreactorrecover" .Thus,foreachexception ğ‘’,
we also define a fuzzy set ğ‘…ğ‘’of methods to call for reaction if ğ‘’
occurs.Itsmembership function ğœˆğ‘’isdefinedas:
ğœˆğ‘’(ğ‘Ÿ)=ğ‘›ğ‘’(ğ‘Ÿ)
ğ‘›ğ‘’(8)
Inthisformula, ğ‘›ğ‘’isthenumberoftimes ğ‘’appearsina catchblock
ğ‘šandğ‘›ğ‘’(ğ‘Ÿ)isthe number of times ğ‘Ÿiscalledinthat catchblock.
Then,similarto XRankwhenacodesnippet ğ¶callsğ‘˜methods
ğ‘š1,ğ‘š2...,ğ‘šğ‘˜and catches exception ğ‘’. Letğ‘…ğ¶be the fuzzy set of
methods should be called for reaction, then ğ‘…ğ¶is the union of
all fuzzy sets ğ‘…ğ‘š1,ğ‘…ğ‘š2...,ğ‘…ğ‘šğ‘˜andğ‘…ğ‘’. Its membership function is
definedas:
ğœˆğ¶(ğ‘Ÿ)=1âˆ’ (1âˆ’ğœˆğ‘š1(ğ‘Ÿ)) Ã— (1âˆ’ğœ‡ğ‘š2(ğ‘Ÿ)) Ã—...Ã— (1âˆ’ğœˆğ‘’(ğ‘Ÿ))(9)
Finally,foreachobject ğ‘œinğ¶,ifğ‘Ÿâˆˆğ‘…ğ¶isamethodcallablefor ğ‘œ
(e.g.,ğ‘Ÿisamethodof ğ‘œ,orğ‘Ÿcanaccept ğ‘œasanargument),itwillbe
added to a list. The list is ranked descendingly by the membership
scores andpresentedto the usersof FuzzyCatch.
4 SYSTEMIMPLEMENTATION
In this section, we discuss the implementation and usage of Fuzzy-
Catch. Currently available at rebrand.ly/exassist, it is released as a
pluginofIntelliJIDEAandAndroidStudio,twopopularIDEsfor
Java programs andAndroid mobileapps.
4.1 Design Overview
Figure4shows the design overview of FuzzyCatch. It has a) two
modulestoextractAPIusagemodelsfromsourcecodeandbyte-
code,b)onemoduletoextractexceptionhandlinginformationfrom
those usage models, c) two modules to train XRank and XHand
from those extracted data, and d) two modules using the trained
fuzzylogicsystemsto recommendcodeforcatching andreacting
to exceptions. Letusdescribe thosemodulesinmore detail.
1031ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Tam Nguyen, PhongVu, andTung Nguyen
Android 
BytecodeCurrent 
Editing Code
Bytecode GROUM 
ExtractorSource Code 
GROUM Extractor
API Usage 
Models
API Exception 
Usage Extractor
API 
Exception 
UsagesAPI Usage 
Extractor
API UsagesAPI Usage 
Model
XRank Learner
XHand LearnerException Types 
Recommender
Repairing Actions 
RecommenderXRank 
Models
XHand 
Models
Figure 4:DesignOverview ofFuzzyCatch
4.1.1 GROUM Extractor. FuzzyCatch employs an extension of
GROUM (Graph-based Object Usage Model) presented in [ 1] to
representtherawAPIusageswithexceptions.Ithasamoduleto
extractGROUMsfromthebytecodeofAndroidappsinthetrain-
ingdataset.ItalsohasasimilarmoduletoextractGROUMsfrom
the code being written, which are used for its two tasks of rec-
ommending exception types and repairing actions. The extracting
algorithms could be foundat [ 28Å›30].
4.1.2 APIExceptionUsageExtractor. BecauseXRankandXHand
aretrainedfromusagesofAPIobjectsandmethodcallsinexception
handling code, FuzzyCatch has a module named API Exception
UsageExtractor to extractfrom those usagesfrom GROUMs.This
moduletraverseseachsub-graphofaGROUMrepresentinga try-
catchblock and extracts all API method calls and the catching
exception.Thetemporalorderanddatadependencybetweenthose
APImethodcallsarealsoextracted.Themodulethenstoresthat
information as an API exception usage.
4.1.3 XRank and XHand Learners. These modules are responsi-
ble for training XRank and XHand systems from the extracted
APIexception usages. They count therawoccurrences ğ‘›ğ‘š,ğ‘›ğ‘š(ğ‘’),
ğ‘›ğ‘š(ğ‘Ÿ)...,computemembershipscores ğœ‡ğ‘š(ğ‘’),ğœˆğ‘š(ğ‘Ÿ)...andexception
riskscores ğœŒğ‘š.(See Section 3for details).
4.1.4 Exception Types Recommender. This module provides the
recommendations on unchecked exception types for a selected
code snippet ğ¶. It first extracts the set of API method calls that
appeared in the under-editing code. Then, it utilizes XRank to
computeexceptionriskscoresforeachcallandmakethemcolor-
coded in the IDE (e.g., red for VERY RISKY method calls). The
programmer can use the color-code to select the code snippet of
his/herinterestforexceptionhandling.Oncethecodeisselected,
XRank is used to calculate the membership scores of exceptions
towardsmethodcallsappearingintheselectedcode.Top-ranked
exceptions are addedto the recommendation list.
Figure 5:ExceptionWarningsby FuzzyCatch
4.1.5 RepairingActionsRecommender. Thismoduleprovidesthe
recommendations for repairing actions in exception handling code.
It extracts the set of API method calls in the tryblock the catching
exception ğ‘’. It then groups API method calls by objects. All API
methodcallsinagroupofanobjecthavedatadependencywiththat
object.ItusestheXHandsystemtorecommendrepairingactions
for each object given the API method calls in the tryblock. Finally,
itcombinesallthepredictrepairingactionstoproducethefinalrec-
ommendation. Note that,FuzzyCatch convertsspecial operations
on objects like null check, assignments as pseudo method calls (e.g.
Cursor.CHECK_NULL, String.ASSIGN_ZERO ). When generating
code,Cursor.CHECK_NULL isgeneratedas: if(cursor!=null) .
4.2 Usage
In this section,we presenthow touse FuzzyCatchin practice.Fig-
ure5showsacodeexample.Assumeaprogrammeriswritingcode
to open and get data from a database. She first opens a SQLite-
Database andassignsittovariable sqliteDB.Shethenrunssome
SQLcommandstoupdatethedatabase.Next,shecreatesaquery
that returns a Cursorobject and uses that Cursorobject to retrieve
data to alistnamed bookTitles .
Whiletheprogrammer is writing thecode,FuzzyCatchutilizes
XRanktoaccesstheexceptionrisksandcolor-codeitsmethodcalls.
Forexample,thecalls cursor.moveToFirst andcursor.moveToNext
are red-flagged, bookTitles.add is orange-flagged. That makesthe
programmer aware that the code is dealing with database and call-
ingCursorâ€™smethodsmightcause uncheckedexceptions (runtime
exceptions)atruntime.(WithoutFuzzyCatch,thebuilt-inexception
checkerinAndroidStudioonlysupportsadding checkedexceptions ,
thus, does not helpherto make appropriate action inthis case).
Now,theprogrammerinvokesFuzzyCatchbyselectingthecode
snippet that she wants to check for exception then pressing Ctrl
+ Alt + R . In Figure 6, FuzzyCatch is invoked for a code snippet
reading data from database with the Cursorobject. It suggests
a ranked list of unchecked exceptions with SQLiteException at
the top. If the programmer chooses this exception, FuzzyCatch
willwrapthecurrentlyselectedcodewitha try-catch blockwith
SQLiteException inthecatchexpression.
Figure7demonstrates theusageofFuzzyCatchinrecommend-
ingexceptionrepairingactions.Afteraddinga try-catch blockwith
SQLiteException forthecodeinthepreviousscenario,theprogram-
mer wantsto performrecoveryactions.Toinvoke FuzzyCatch for
this task, she moves the cursor to the first line of the catchand
pressesCtrl + Alt + H . In the example, FuzzyCatch detects that
1032Code Recommendation forExceptionHandling ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
Figure 6:RecommendingExceptionTypes
Figure 7:RecommendingRepairingActions
theCursorobject should be closed to release all of its resources
and making it invalid for further usages. It also suggests to set
bookTitles equalsnullto indicate the error while collecting data
fromcursor. If the programmer chooses the recommended actions,
FuzzyCatchwillgeneratethecodeinthe catchblockasinthefigure.
Tosavespace,weshowboththerecommendationandgenerated
code inasame window.
5 EMPIRICALEVALUATION
We conductedseveral experiments to evaluate the effectiveness of
FuzzyCatchonrecommendingexceptionhandlingcodeforAndroid
andJavaAPIs.Allexperimentsareexecutedonacomputerrunning
Windows 10 with Intel Core i7 3.6Ghz CPU, 8GB RAM, and 1TB
HDDstorage.
5.1 Data Collection
The source code of most Android apps is not publicly available.
With few apps with source code available, training FuzzyCatch
from existing mobile app projects would be difficult and insuffi-
cient.Thus,wedecidedtotrainourmodelswithAndroidbytecode.
Table3summaries our dataset for training the models. In total, we
downloaded and analyzed 13,463 top free apps from the Google
PlayStore.Wefetchedalistoftopfreeappsfromallthecategories
oftheappstore.Then,weonlydownloadedappswithanoverall
rating of at least 3 (out of 5), based on the assumption that the
high-rating apps would have high code quality, and thus, would
have better exception handling code. Since Android mobile apps
are distributed as .apkfiles, our crawler unpacked each .apkfile
and keptonly its .dexfile, whichcontains thebytecode ofthe app.
Thetotalstoragespaceforthe .dexfilesofthedownloadedappsare
around165GB.Afterparsingthose .dexfiles,weobtainedabout21
million classes.
Next,wedevelopedabytecodeanalyzerthatanalyzedeachclass
and looked for all methods in the class to build GROUM models.Table 3:Data Collection
Numberofapps 13,463
Numberofclasses 21,527,731
Numberofmethods 26,235,142
Numberofbytecodeinstructions 741,912,624
Spacefor storing .dex files 165.0 GB
Numberofexceptiontypes 261
NumberofAPImethods 64,685Accuracy (%)
0102030405060708090100
Top-K1 2 3 4 5
XRank Baseline
Accuracy (%)
0102030405060708090100
Top-K1 2 3 4 5
XHank Baseline
Figure 8:Recommendation Accuracy
Since an Android mobile app is self-contained, its .dexfiles con-
tainthebytecodeofallexternallibrariesituses.Thatleadstothe
duplication of the bytecode of shared libraries. To remove that
duplication, our bytecode analyzer maintains a dictionary of the
analyzedmethodsandanalyzedeachofthemonlyonce.Intheend,
weanalyzedover26million uniquemethodswhichhaveintotal
nearly 740 million bytecode instructions. They are used to train
XRankandXHand,producingfuzzylogicrulesfor261exception
types and64,685methodsinJava andAndroid APIs.
5.2 Experiments on Android Bytecode
Weconsiderthebytecodeofthedownloadedappsastheevaluation
dataset and use 10-fold cross-validation to evaluate the accuracy of
FuzzyCatchonthem. Wedividetheminto10folds,eachcontains
roughly1400apps.Ateachiteration,wechooseafoldfortesting
and the remaining for training. The final results are averaged from
10 iterations.
For each try-catch block in the code of the testing apps, we
evaluatedif FuzzyCatchcan recommendthe actualexception and
reaction method calls in the catchblock given the method calls
in thetryblock. For example, if the code actually catches ğ‘’and
ğ‘’is also in the top- ğ‘˜list recommended by FuzzyCatch then it is
anaccurate recommendation for catching exceptions. Similarly,if
foranobject ğ‘œ,thecodecallsmethod ğ‘Ÿforrecovery,and ğ‘Ÿisalso
in the top- ğ‘˜recommended by FuzzyCatch then it is an accurate
recommendation for reactionto exceptions.
To measure the effectiveness of FuzzyCatch, we compared it
with a simple baseline. Because no other approaches have been
proposedforthisrecommendationproblem,wedesignthebaseline
as a simple approach based on the frequency of catching exception
types and reaction calls. That is, we count the number of times
an exception (or a repair call) appear in all try-catch blocks in
1033ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Tam Nguyen, PhongVu, andTung Nguyen
thetrainingdata. Then,theexceptions(orrepair calls) are ranked
descendinglybytheirfrequenciesandrecommendedassuch.For
example, Exception is the top-1 exception recommended by this
approach.And closeisthetop-1methodrecommendedtocallfor
repairing (orrecover) a Cursorobject.
Figure8shows theexperimentresults(the leftchart for XRank
and the right chart for XHand). From the figure, we can see that
bothXRankandXHandhaveconsistentlyhighlevelsofaccuracy.
For example, XRank has top-1 accuracy of 77% and top-5 accu-
racyof92%.ForXHand,theyare69%and87%.Also,bothmodels
significantly outperform the baselines.
5.3 Experiments on Real Exception Bugs
Weconductedtwomoreexperimentstoevaluateontheeffective-
nessofFuzzyCatch ondetecting andfixing real exception bugs.
5.3.1 DataCollection. Inthissection,wedescribebrieflyourdataset
of exception handling bugs and fixes. We focus on bugs that are
caused by not catching exceptions in the code. For convenience,
wedefinedthosebugsas exceptionbugs .The fixfor thosetypes
of bugs iscalled exceptionbugfixes . We first collecteda dataset
consists of several large open-source Android projects. For each
project,wecheckedoutitssourcecoderepositorytoretrieveallthe
code and commits. We developed an extraction tool to identify the
bugfixesfromthecommitsandissuesofthoseprojects.Next,we
manually inspected all the bug fixes to identify exceptionbug fixes.
Finally,wewereabletocollectadatasetof1,000exceptionbugfixes.
Thestepstoidentifytheexceptionbugfixesandcollectthedataset
are described in detail in [ 31]. Figure9shows an exception bug fix
inour dataset.The dataset isavailable at rebrand.ly/ExDataset.
- postContent = new SpannableStringBuilder(
-                                mEditorFragment.getSpannedContent());
+ try {
+     postContent = new SpannableStringBuilder(
+                                mEditorFragment.getSpannedContent());
+ } catch (RuntimeException e) {
+     // A core android bug might cause an out of
+     // bounds exception, if so we'll just use the current editable
+     // See https://code.google.com/p/android/issues/detail?id=5164
+     postContent = new SpannableStringBuilder(
+         StringUtils.notNullStr((String) mEditorFragment.getContent()));
+ }COMMIT MESSAGE: "ï¬x #2695: re-introduce a workaround we were 
using in previous versions"
Figure 9:AnExceptionBug Fix
5.3.2 DetectingExceptionBugs. Bycalculatingexceptionriskscores
ofmethodcallsandcodesnippets,FuzzyCatchcouldwarnprogram-
mers of missing exception handling code, i.e., it could detect ex-
ception related bugs. For example, if a method call having a Å‚VERY
RISKYÅ¾exception risk score is not covered by a try catch block,
FuzzyCatchcanwarntheprogrammerofapotentialexceptionbug
andrecommendsan exception to catch.
To evaluate FuzzyCatch on such warnings, we manually applied
FuzzyCatch for the 1,000 exception bugs that we collected. We run
FuzzyCatch on the buggy code version and check if FuzzyCatch
produceswarnings.Then,wecomparetheexceptionrecommended
byFuzzyCatchandtheactualexceptioncaughtinthefixedversion.
The three risklevels are definedthe same as inSection 3.1.Table 4:Recommendation Results for1,000 ExceptionBugs
Risk level VERYRISKY RISKY LESSRISKY
Correctwarning 734 783 821
Top-1 Accuracy 547(75%) 587(75%) 601(73%)
Top-3 Accuracy 593(81%) 618(79%) 646(80%)
Table4liststheresults.IfwesetFuzzyCatchtothestrictestmode,
i.e.,onlywarningonmethodcallswith â€™VERYRISKYâ€™ exceptionrisk
levelthenitproducedwarningsfor734outof1,000bugs(73.4%).
In the loosest mode, i.e., warning on all method calls with â€™LESS
RISKYâ€™exception risk level and higher, then it produced warnings
for 821outof1,000 bugs(82.1%).
The prior experiment on Android bytecode shows that Fuzzy-
Catch does not always recommend the exception actual used by
the programmers. Forexample, the top-1 recommendation for Inte-
ger.parseInt isNumberFormatException . However, inmany cases
the programmers actuallyusethe more general Exception .Thus,
it is similarly in this experiment. In 734 cases that FuzzyCatch
warns of potential exception bugs in its strictest mode, the top-1
recommendedexception isactually usedin547cases(74.5%).
When using FuzzyCatch, there could be a case in which the tool
flagsawarningonamethodthattheprogrammerdoesnotwant
to addtry-catch block or catch an exception. We defined those
cases as Å‚unwanted warningsÅ¾. To evaluate if FuzzyCatch produces
unwanted warnings,we selected 100 codesnippets from the latest
versionofoursubjectsystems.Weonlyselectedcodesnippetsofat
least 10 lines of code and having no try catch block added through
thewholeprojecthistory.Weassumedthatsuchcodesnippetswill
not need exception handling code. Thus, if FuzzyCatch produces a
warning (of missing exception handling) for such a code snippet, it
willbeanunwantedwarning.Inareal-world,large-scalesystem,
itisnearlyimpossibletoproveorverifythatapieceofcode ğ¶is
free of bugs. So we did not have a reliable method to determine
ifğ¶doesnotneeda try-catch statement.Weinsteadlookedatits
revisionhistory.Becausethesubjectsystemshavealonghistory
(somehaveupto28,000revisions), ifapieceofcodehasnotbeen
enclosed by a try-catch statement throughout such long history
then we could reasonablyassumethat itdoes not need.
Inthestrictestmode,FuzzyCatchproduced8unwantedwarn-
ings (out of 100 code snippets). In the loosest mode, FuzzyCatch
produced 35 unwanted warnings. Thus, this is a balanced trade-off.
Iftheprogrammerwantstohighercodequality(i.e.,fewerexcep-
tionbugs),heneedstospendmoretimeonFuzzyCatchwarnings
to determineif its warnings andrecommendations are necessary.
Inaddition,addingatry-catchstatementmakesthecodesafer.
The expected loss for an Å‚unwanted warningÅ¾ is much smaller
than a bug caused by a missing try-catch statement. Thus, we
conservatively call recommendations of FuzzyCatch Å‚unwanted
warningsÅ¾ because programmers have not yet wanted to use them
ratherthanÅ‚falsepositivesÅ¾meaningthoserecommendationsare
strictlywrong.
5.3.3 RepairingExceptionBugs. Inthisexperiment,weevaluate
theeffectivenessofFuzzyCatchinrecommendingrepairingactions
for real exception bug fixes. Not all of the exception bug fixes
1034Code Recommendation forExceptionHandling ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
Table 5:Results inRecommendingRepairingActions
FuzzyCatch Barbosa et al.CarMiner
# offixes 437 437 437
# ofmatches 287(65%) 126(28%) 196(44%)
contains handling actions, for example, the fixer could add code
to swallow exceptions, add loggingmessages, or re-throw another
exception.Weselectasubsetofthe1,000exceptionbugfixeswhich
includesalltheexceptionbugfixesthatcontainhandlingactions
byprogrammersinthe catchblock.Ineachbugfixofthesubset,
developersperformedatleastonerepairingaction(i.e.amethod
call, an assignment, etc.) in the exception handling code. Figure 10
shows an example of a bug fix in the subset. In the bug fix, the
developer performed three method calls and one assignment to set
valuefor postContent .Intotal,thereare437outof1,000exception
bugfixeshavehandlingactions,thus,weevaluateFuzzyCatchon
this subset.
Foreachbugfixinthedataset,weinvokedFuzzyCatchtorec-
ommendrepairingactionsandcomparetherecommendationresult
withthecorrespondingfix.Iftherecoveryactionsrecommended
by FuzzyCatch exactly match with the fix, we count as a match.
Otherwise,we considerthe caseas amiss.
TofurtherevaluatetheeffectivenessofFuzzyCatch inthis task,
we compare our tool with two existing approaches presented in [ 4,
37]. Barbosa et al.[4] proposed a technique that uses exception
types, method calls, and object types as heuristic strategies to iden-
tify and recommend relevant code examples with current handling
codeunderediting.Althoughtheapproachdoesnotprovideactual
recommendations, the examples that it suggests could be used as a
guide for programmers to fix an exception bug. Thus, we evaluate
the baseline as follows: if at least one of the top-5 relevant code
examplesrecommendedbythebaselinematcheswiththefix,we
count as a match, otherwise, we consider the case as a miss. We
re-implementedthe techniqueusing the sameconfigurationspre-
sented in the work. As the approach requires a corpus of real code
examples, not bytecode, we implemented it with a dataset contains
the source code of 1,514 Android projects listed on the FDroid app
repository1.Thelistofalltheprojectsinthedatasetcouldbefound
atrebrand.ly/ExDataset.Rahman etal.[33]proposedanotherap-
proachthatrecommends exceptionhandlingcodeexamplesfroma
numberofGitHubprojects.Themethodisdifficulttoimplement
as it requires to collect 9 complex code features from each code
exampleandtoestimate12weightingparametersusingmachine
learning.Wecontactedtheauthorbutwecouldnotcompiletheir
code or collect their training and experiment data. Thus, we did
not compare the result withtheirwork.
WealsocompareourmethodwithCAR-miner[ 37],anapproach
thatusesassociationminingtechniquestomineassociationrules
betweenmethodcallsof tryandcatchblocksinexceptionhandling
code. The model was used to detect bugs related to exceptions.
The mined rules have a form (ğ‘†ğ‘›,ğ‘†ğ‘’)in which ğ‘†ğ‘›is the set of all
methods in a tryblock while ğ‘†ğ‘’is the set of repairing methods in a
catchblock.ğ‘†ğ‘’could be used as the recommendation on handling
1https://f-droid.org/actions.Were-implementCAR-minerwiththesamesettingsthat
were used in the original paper on the same Android bytecode
dataset as FuzzyCatch.
Table5shows the evaluation result of FuzzyCatch and the base-
line for the task. In a total of 437 exception bug fixes, the recom-
mendations of FuzzyCatch match the fixes of developers in 287
cases.Overall,FuzzyCatchcouldprovidemeaningfulrecommen-
dations in roughly 65% of the bug fixes. The first baseline only
matches the fixes of developers in 126 (28%) cases. The association
miningtechniqueCAR-minerperformsbetterwith196cases(44%).
Overall,theresultofFuzzyCatchoutperformsthebaselinemethods
substantially.
- InputStream in = new BufferedInputStream(
-                       httpURLConnection.getInputStream());
  InputStream in = null;
+ try {
+    in = new BufferedInputStream(
+                       httpURLConnection.getInputStream());
+ } catch (Exception ex) {
+    in = httpURLConnection.getErrorStream();
+ }COMMIT MESSAGE: â€œ Merge pull request #937 from garvankeeley/bug-
network â€
Figure 10:AnExample ofHandlingan Exception
For demonstration, Figure 10shows an exception bug fix in
which the three techniques have different recommendation results.
Inthisexample,FuzzyCatchrecommendscalling getErrorStream on
httpURLConnection object and an assignment for the InputStream
object. The result exactly matches the code of the programmer
as shown in the figure. CAR-Miner mined (getInputStream, dis-
connect) as a association rule, thus, it suggests calling the method
disconnect instead of getErrorStream , which is incorrect. While,
the code examples provided by the first baseline did not provide
any meaningfulrecommendations.
6 DISCUSSIONS
Inthissection,wediscussseveralaspectsofFuzzyCatchinmore
detail. From machine learning perspective, FuzzyCatch is a simple
ensemble approach to three classification problems: Given code
snippet C, (1) predict if it needs an enclosing try-catch, which
is a binary classification problem; (2) predict what exception to
catch, which is a multi-class prediction problem with classes are
all exception types; (3) predict what method to call in the catch
block, which is a multi-class predict problem with classes are all
APImethods.FuzzyCatchlearnsandpredictslikeNaiveBayes[ 16]
but more flexibly. Because fuzzy membership functions are not
probability distribution functions, FuzzyCatch does not need to
assume the independence of predictors or normalize/summationtext.1
ğ‘’ğœ‡ğ¶(ğ‘’)=1.
WecouldconsiderFuzzyCatchisabigcodepoweredfuzzylogic
systemspecially designed for thesoftware engineering domain. It
represents exception handling knowledge as fuzzy logic rules. It
usesfuzzysettheorytomodelandapplythoserules,andusesfuzzy
unionoperationstocombinethoserules.Inthetraditionalfuzzy
logicsystem,variablesareoftencontinuoussuchas Temperature,
Densityorlinguisticlike LOW,VERYLOW .Themembershipfunc-
tions are often manually defined by domain experts with functions
1035ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Tam Nguyen, PhongVu, andTung Nguyen
such as triangular ortrapezoidal. In FuzzyCatch, variables are dis-
crete,i.e.methods,exceptions,andthemembershipfunctionsare
estimatedautomaticallyfrom millions ofcode examples.
FuzzyCatchistrainedfromadatasetcontainsover13,000highly
rated Android apps. We assume that FuzzyCatch can learn com-
mon,statisticallysignificantprogrammingpatternsfromitshuge
collection of code. Also, it isreasonable tobelieve that the dataset
containshigh-qualitycode,thus,betterexceptionhandlingcode,
becauseitcontainsappsthataredevelopedandfrequentlyupdated
by top software companies, e.g. Google, Facebook, which employs
the best software engineers in the world. They are used daily by
millionstobillionsofusersworldwide,anyerrorsarelikelydiscov-
eredand reportedquickly.Ourempiricalevaluationalsoconfirms
that FuzzyCatchcan be used effectively to detect and fix exception-
handling bugs.
7 THREATS TO VALIDITY
Thethreattointernalvalidityincludeserrorswhenweidentified
and evaluated exception bug fixes. Firstly, we might incorrectly
identify bugfixes. To reduce this threat, we could apply more pat-
terns (e.g. adding more filter keywords) when identifying bug fixes
fromcommits.Secondly,wemightincorrectlyidentifyexception
bug fixes from the bug fixes. As the evaluation process is manually
carried out by three researchers, there are might be errors when
reporting results due to human errors. The threat could be reduced
byaddingmore people to our labellingandevaluation process.
The threat of external validity includes our selected projects for
labeling exception bugsand fixes. Although we analyzed medium
tolargeAndroidprojects,thenumberofexceptionbugsandfixes
fromtheselectedprojectsmaystillbelimited.Toreducethisthreat,
more exceptions bugs and fixes shall be collected to increase the
reliability of our results. In our evaluation, other measures such as
precisionandrecallshouldbeintroduced.Wecouldnotcompute
such measures due to the fact that we do not have Å‚negativeÅ¾ ex-
amples in the test set, i.e. the code examples that are not needed to
catchexceptions.Givenapieceofcode,itisimpossibletodetermine
thatthecodewillneverthrowsanexception.Thus,wecouldnot
collection theseâ€˜negativeÅ¾examples.
8 RELATED WORK
Exceptionhandlingrecommendationhasbeenstudiedinseveral
researches[ 2,4,5,14,26,27,33].Barbosa etal.[4]proposedaset
ofthreeheuristicstrategiesusedtorecommendexceptionhandling
code.Rahman etal.[33]proposedacontext-awareapproachthat
recommendsexceptionhandling codeexamples fromanumber of
GitHubprojects.Filho etal.[14]proposedArCatch,anarchitectural
conformancecheckingsolutiontodealwiththeexceptionhandling
designerosion.Lieetal.[ 23]proposedanapproach,namedEXP-
SOL, which recommends online threads as solutions for a newly
reportedexception-relatedbug.Kistneretal.[ 20]builtatoolthat
reveals possible sources of exceptions in the code. This tool also
provides project-specific recommendations and detects common
bad exception handling practices. Montenegro et al. [ 27] proposed
anÅ‚exceptionpolicyexpertÅ¾toolwhichalertsdevelopersaboutpol-
icy violations and can suggest possible handlers for the exceptions.Li et al. [21] devised a methodthat automatically recommends ex-
ception handling strategies, based on program context. To the best
of our knowledge, FuzzyCatch is the first code recommendation
toolavailablethatactuallyrecommendsandgeneratesexception
catchingandhandling code as aplugin of IDEs.
Thereexistseveralmethodsforminingexception-handlingrules.
WN-miner[ 39]andCAR-miner[ 37]areapproachesthatuseassoci-
ationminingtechniquestomineassociationrulesbetweenmethod
callsoftryandcatchblocksinexceptionhandlingcode.Bothmod-
elsareusedtodetectbugsrelatedtoexceptions.Zhong etal.[40]
proposed an approach named MiMo, that mines repair models for
exception-related bugs. Approaches based on association rule min-
ing mines only most frequent rules, i.e. rules that satisfy certain
supportandconfidence.Thus,rulesinvolvingrareexceptionsor
methods with lower support and confidence are undiscoverable.
FuzzyCatch also aims to mine programming patterns for exception
handling. However, FuzzyCatch represents those patterns using
fuzzysetsandcombinesthemusingfuzzylogic,makingithighly
robust and scalable. For example, FuzzyCatch can learn fuzzy logic
rulesforraremethods(showninSection3.1)andmineaverylarge
code repository for patterns.
Exception handling has been studied extensively in software en-
gineeringresearch[ 3,6,8Å›13,17Å›19,24,25,31,32,35].Wemention
hereseveralnotablestudies.Sena etal.[35]presentsanempirical
studytoinvestigatetheexceptionhandlingstrategiesadoptedby
Javalibraries.Ebert etal.[13]presentedanexploratorystudyon
exception handling bugs by surveying of 154 developers and an
analysisof220exceptionhandlingbugsfromtwoJavaprograms,
Eclipse and Tomcat. Similarly, Nguyen et al.[31] performed an em-
piricalstudyonnearly300exception-relatedbugsandfixesfrom10
mobile apps. Coelho et al.[9] performed a detailed empirical study
onexception-relatedissuesofover6,000Javaexceptionstacktraces
extracted from over 600 open-source Android projects. Padua et
al.[11]studiedexceptionhandlingpracticeswithexceptionflow
analysis.Kechagia etal.[17]investigatedtheexceptionhandling
mechanismsofthe Android APIs.
There are several researches focus on the global impact of ex-
ceptions[ 7,15,34,36].Robillard etal.[34]studiedthecurrentJava
exception handling mechanism. They argued that exceptions are a
globaldesignproblem,andexceptionssourcearedifficulttopredict
in advance. Cacho et al.[7] presented an aspect-oriented model
for exception handling. Different from these approaches, Fuzzy-
CatchfocusesonhandlingexceptionsÅ‚locallyÅ¾byrecommending
programmers to add try-catch blocksandhandling actions.
9 CONCLUSIONS
Exceptionsareunexpectederrorsoccurringwhileanapplication
isrunning.Learningtohandleexceptionscorrectlyisoftenchal-
lenging due to the fast-changing nature of API libraries and frame-
works,andtheinsufficiencyofAPIdocumentation.Weproposetwo
techniques based on fuzzy logic for learning and recommending
exception types and repairing actions for exception handling code.
Based on the proposed techniques, we have developed FuzzyCatch,
acoderecommendationtoolforexceptionhandling.Ourevaluation
shows that FuzzyCatch can effectively learn exception handling
patterns andprovidehighly accuraterecommendations.
1036Code Recommendation forExceptionHandling ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
REFERENCES
[1]Sven Amann, Hoan Anh Nguyen, Sarah Nadi, Tien N. Nguyen, and Mira Mezini.
2019.InvestigatingnextStepsinStaticAPI-MisuseDetection.In Proceedingsofthe
16th International Conference on Mining Software Repositories (Montreal, Quebec,
Canada)(MSRâ€™19) .IEEEPress,265Å›275. https://doi.org/10.1109/MSR.2019.00053
[2]Eiji Adachi Barbosa and Alessandro Garcia. 2018. Global-Aware Recommen-
dations for Repairing Violations in Exception Handling. In Proceedings of the
40th International Conference on Software Engineering (Gothenburg, Sweden)
(ICSE â€™18) . Association for Computing Machinery, New York, NY, USA, 858.
https://doi.org/10.1145/3180155.3182539
[3]E.A.Barbosa,A.Garcia,andS.D.J.Barbosa.2014. CategorizingFaultsinExcep-
tion Handling: A Study of Open Source Projects. In 2014 Brazilian Symposium on
SoftwareEngineering . 11Å›20. https://doi.org/10.1109/SBES.2014.19
[4]Eiji Adachi Barbosa, Alessandro Garcia, and Mira Mezini. 2012. Heuristic Strate-
giesforRecommendationofExceptionHandlingCode.In Proceedingsofthe2012
26th Brazilian Symposium on Software Engineering (SBES â€™12) . IEEE Computer
Society, USA,171Å›180. https://doi.org/10.1109/SBES.2012.22
[5]E.A.Barbosa,A.Garcia,M.P.Robillard,andB.Jakobus.2016.EnforcingException
HandlingPolicieswith a Domain-Specific Language. IEEE Transactions on Soft-
wareEngineering 42,6(2016),559Å›584. https://doi.org/10.1109/TSE.2015.2506164
[6]Magiel Bruntink, Arie van Deursen, and Tom TourwÃ©. 2006. Discovering Faults
in Idiom-based Exception Handling. In Proceedings of the 28th International Con-
ferenceonSoftwareEngineering (Shanghai,China) (ICSEâ€™06) .ACM,NewYork,
NY, USA,242Å›251. https://doi.org/10.1145/1134285.1134320
[7]Nelio Cacho, Fernando Castor Filho, Alessandro Garcia, and Eduardo Figueiredo.
2008. EJFlow:TamingExceptionalControlFlowsinAspect-OrientedProgram-
ming.InProceedingsofthe7thInternationalConferenceonAspect-OrientedSoft-
wareDevelopment (Brussels,Belgium) (AOSDâ€™08) .AssociationforComputing
Machinery,NewYork,NY,USA,72Å›83. https://doi.org/10.1145/1353482.1353492
[8]H.Chen,W.Dou,Y.Jiang,andF.Qin.2019. UnderstandingException-Related
Bugs in Large-Scale Cloud Systems. In 2019 34th IEEE/ACM International Confer-
enceonAutomatedSoftwareEngineering(ASE) .339Å›351. https://doi.org/10.1109/
ASE.2019.00040
[9]Roberta Coelho, Lucas Almeida, Georgios Gousios, and Arie van Deursen. 2015.
Unveiling Exception Handling Bug Hazards in Android Based on GitHub and
Google CodeIssues.In MSR.https://doi.org/10.1109/MSR.2015.20
[10]Roberta Coelho, Lucas Almeida, Georgios Gousios, and Arie van Deursen. 2015.
Unveiling Exception Handling Bug Hazards in Android Based on GitHub and
Google Code Issues. In Proceedings of the 12th Working Conference on Mining
Software Repositories (Florence, Italy) (MSR â€™15) . IEEE Press, Piscataway, NJ, USA,
134Å›145. http://dl.acm.org/citation.cfm?id=2820518.2820536
[11]G.B.d.PÃ¡duaandW.Shang.2017. RevisitingExceptionHandlingPracticeswith
ExceptionFlow Analysis.In 2017IEEE 17th International Working Conferenceon
Source Code Analysis and Manipulation (SCAM) . 11Å›20. https://doi.org/10.1109/
SCAM.2017.16
[12]GuilhermeB.dePÃ¡duaandWeiyiShang.2018.StudyingtheRelationshipBetween
Exception Handling Practices and Post-release Defects. In Proceedings of the 15th
InternationalConferenceonMiningSoftwareRepositories (Gothenburg,Sweden)
(MSR â€™18) . ACM, New York, NY, USA, 564Å›575. https://doi.org/10.1145/3196398.
3196435
[13]Felipe Ebert, Fernando Castor, and Alexander Serebrenik. 2015. An Exploratory
Study on Exception Handling Bugs in Java Programs. J. Syst. Softw. 106, C (Aug.
2015),82Å›101. https://doi.org/10.1016/j.jss.2015.04.066
[14]Juarez L. M. Filho, Lincoln Rocha, Rossana Andrade, and Ricardo Britto. 2017.
Preventing Erosion in Exception Handling Design Using Static-Architecture
Conformance Checking. In Software Architecture .https://doi.org/10.1007/978-3-
319-65831-5_5
[15]C.FuandB.G.Ryder.2007. Exception-ChainAnalysis:RevealingExceptionHan-
dlingArchitectureinJavaServerApplications.In 29thInternationalConference
onSoftwareEngineering(ICSEâ€™07) .230Å›239. https://doi.org/10.1109/ICSE.2007.35
[16]TrevorHastie,RobertTibshirani,andJeromeFriedman.2001. TheElementsof
Statistical Learning . SpringerNew YorkInc. https://doi.org/10.1007/978-0-387-
84858-7
[17]MariaKechagia,MariosFragkoulis,PanosLouridas,andDiomidisSpinellis.2018.
TheExceptionHandlingRiddle:AnEmpiricalStudyontheAndroidAPI. Journal
ofSystemsand Software 142(04 2018). https://doi.org/10.1016/j.jss.2018.04.034
[18]MariaKechagia,TusharSharma,andDiomidisSpinellis.2017. TowardsaContext
Dependent Java Exceptions Hierarchy. In Proceedings of the 39th International
Conference on Software Engineering Companion (Buenos Aires, Argentina) (ICSE-
C â€™17). IEEE Press, Piscataway, NJ, USA, 347Å›349. https://doi.org/10.1109/ICSE-
C.2017.134
[19]Maria Kechagia and Diomidis Spinellis. 2014. Undocumented and Unchecked:
Exceptions That Spell Trouble. In Proceedings of the 11th Working Conference on
MiningSoftwareRepositories (Hyderabad,India) (MSR2014) .ACM,NewYork,NY,
USA,312Å›315. https://doi.org/10.1145/2597073.2597089
[20]F.Kistner,M.BethKery,M.Puskas,S.Moore,andB.A.Myers.2017. Moonstone:
Support for understanding and writing exception handling code. In 2017 IEEESymposiumonVisualLanguagesandHuman-CentricComputing(VL/HCC) .63Å›71.
https://doi.org/10.1109/VLHCC.2017.8103451
[21]Y. Li, S. Ying, X. Jia, Y. Xu, L. Zhao, G. Cheng, B. Wang, and J. Xuan. 2018.
EH-Recommender: Recommending Exception Handling Strategies Based on
ProgramContext.In 201823rdInternationalConferenceonEngineeringofComplex
Computer Systems (ICECCS) . 104Å›114. https://doi.org/10.1109/ICECCS2018.2018.
00019
[22]Mario Linares-VÃ¡squez, Gabriele Bavota, Carlos Bernal-CÃ¡rdenas, Massimiliano
DiPenta,RoccoOliveto,andDenysPoshyvanyk.2013. APIChangeandFault
Proneness:AThreattotheSuccessofAndroidApps.In Proceedingsofthe20139th
Joint MeetingonFoundationsofSoftware Engineering (SaintPetersburg,Russia)
(ESEC/FSE2013) .ACM,NewYork,NY,USA,477Å›487. https://doi.org/10.1145/
2491411.2491428
[23]X. Liu, B. Shen, H. Zhong, and J. Zhu. 2016. EXPSOL: Recommending Online
ThreadsforException-RelatedBugReports.In 201623rdAsia-PacificSoftware
EngineeringConference(APSEC) .25Å›32. https://doi.org/10.1109/APSEC.2016.015
[24]Cristina Marinescu. 2011. Are the Classes That Use Exceptions Defect Prone?. In
Proceedings of the 12th International Workshop on Principles of Software Evolution
and the 7th Annual ERCIM Workshop on Software Evolution (Szeged, Hungary)
(IWPSE-EVOLâ€™11) .AssociationforComputingMachinery,NewYork,NY,USA,
56Å›60.https://doi.org/10.1145/2024445.2024456
[25]H. Melo, R. Coelho, and C. Treude. 2019. Unveiling Exception Handling
Guidelines Adopted by Java Developers. In 2019 IEEE 26th International Con-
ference on Software Analysis, Evolution and Reengineering (SANER) . 128Å›139.
https://doi.org/10.1109/SANER.2019.8668001
[26]T. Montenegro, H. Melo, R. Coelho, and E. Barbosa. 2018. Improving developers
awareness of the exception handling policy. In SANER.https://doi.org/10.1109/
SANER.2018.8330228
[27]T. Montenegro, H. Melo, R. Coelho, and E. Barbosa. 2018. Improving developers
awareness of the exception handling policy. In 2018 IEEE 25th International
Conference on Software Analysis, Evolution and Reengineering (SANER) . 413Å›422.
https://doi.org/10.1109/SANER.2018.8330228
[28]Tung Thanh Nguyen, Hoan Anh Nguyen, Nam H. Pham, Jafar M. Al-Kofahi, and
TienN.Nguyen.2009. Graph-basedMiningofMultipleObjectUsagePatterns.
InProceedingsofthethe7thJointMeetingoftheEuropeanSoftwareEngineering
Conference and the ACM SIGSOFT Symposium on The Foundations of Software
Engineering (Amsterdam, The Netherlands) (ESEC/FSE â€™09) . ACM, New York, NY,
USA,383Å›392. https://doi.org/10.1145/1595696.1595767
[29]TamTheNguyen, Hung VietPham, PhongMinhVu, andTungThanh Nguyen.
2015. Recommending API Usages for Mobile Apps with HiddenMarkovModel.
InAutomated Software Engineering (ASE), 2015 30th IEEE/ACM International
Conference on .https://doi.org/10.1109/ASE.2015.109
[30]TamTheNguyen, Hung VietPham, PhongMinhVu, andTungThanh Nguyen.
2016. LearningAPIUsagesfromBytecode:AStatisticalApproach.In Proceedings
ofthe38thInternationalConferenceonSoftwareEngineering (Austin,Texas) (ICSE
â€™16).AssociationforComputingMachinery,NewYork,NY,USA,416Å›427. https:
//doi.org/10.1145/2884781.2884873
[31]Tam The Nguyen, Phong Minh Vu, and Tung Thanh Nguyen. 2019. An Em-
piricalStudyofExceptionHandlingBugsandFixes.In Proceedingsofthe2019
ACMSoutheastConference (Kennesaw,GA,USA) (ACMSEâ€™19) .Associationfor
ComputingMachinery,NewYork,NY,USA,257Å›260. https://doi.org/10.1145/
3299815.3314472
[32]JulianaOliveira,NelioCacho,DeiseBorges,ThaisaSilva,andFernandoCastor.
2016. AnExploratoryStudyofExceptionHandlingBehaviorinEvolvingAndroid
andJavaApplications.In Proceedingsofthe30thBrazilianSymposiumonSoftware
Engineering (MaringÃ¡, Brazil) (SBES â€™16) . Association for Computing Machinery,
NewYork, NY, USA,23Å›32. https://doi.org/10.1145/2973839.2973843
[33]M. M. Rahman and C. K. Roy. 2014. On the Use of Context in Recommending
Exception Handling Code Examples. In 2014 IEEE 14th International Working
Conference onSourceCodeAnalysisand Manipulation . 285Å›294. https://doi.org/
10.1109/SCAM.2014.15
[34]Martin P. Robillard and Gail C. Murphy. 2000. Designing Robust Java Programs
with Exceptions. SIGSOFT Softw. Eng. Notes 25, 6 (Nov. 2000), 2Å›10. https:
//doi.org/10.1145/357474.355046
[35]DemÃ³stenes Sena, Roberta Coelho, UirÃ¡ Kulesza, and Rodrigo BonifÃ¡cio. 2016.
UnderstandingtheExceptionHandlingStrategiesofJavaLibraries:AnEmpirical
Study. In Proceedings of the 13th International Conference on Mining Software
Repositories (Austin, Texas) (MSR â€™16) . Association for Computing Machinery,
NewYork, NY, USA,212Å›222. https://doi.org/10.1145/2901739.2901757
[36]HinaShah,CarstenGÃ¶rg,andMaryJeanHarrold.2008.VisualizationofException
HandlingConstructstoSupportProgramUnderstanding.In Proceedingsofthe
4thACMSymposiumonSoftware Visualization (Ammersee,Germany) (SoftVis
â€™08).AssociationforComputingMachinery,NewYork,NY,USA,19Å›28. https:
//doi.org/10.1145/1409720.1409724
[37]Suresh Thummalapenta and Tao Xie. 2009. Mining Exception-handling Rules As
SequenceAssociationRules.In Proceedingsofthe31stInternationalConferenceon
Software Engineering (ICSE â€™09) . Washington, DC, USA. https://doi.org/10.1109/
ICSE.2009.5070548
1037ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Tam Nguyen, PhongVu, andTung Nguyen
[38]Westley Weimer and George C. Necula. 2004. Finding and Preventing Run-
time Error Handling Mistakes. In Proceedings of the 19th Annual ACM SIGPLAN
ConferenceonObject-orientedProgramming,Systems,Languages,andApplications
(Vancouver, BC, Canada) (OOPSLA â€™04) . ACM, New York, NY, USA, 419Å›431.
https://doi.org/10.1145/1028976.1029011
[39]WestleyWeimerandGeorgeC.Necula.2005. MiningTemporalSpecifications
forErrorDetection.In Proceedingsofthe11thInternationalConferenceonToolsandAlgorithms fortheConstruction andAnalysis of Systems (TACASâ€™05) .Berlin,
Heidelberg. https://doi.org/10.1007/978-3-540-31980-1_30
[40]Hao Zhong and Hong Mei. 2018. Mining repair model for exception-related bug.
Journal of Systems and Software 141 (2018), 16 Å› 31. https://doi.org/10.1016/j.jss.
2018.03.046
1038