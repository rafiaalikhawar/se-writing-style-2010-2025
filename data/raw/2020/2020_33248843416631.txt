Trace-Checking Signal-based Temporal Properties:
A Model-Driven Approach
Chaima Boufaied
University of Luxembourg
chaima.boufaied@uni.luClaudio Menghi
University of Luxembourg
claudio.menghi@uni.luDomenico Bianculli
University of Luxembourg
domenico.bianculli@uni.lu
Lionel Briand
University of Luxembourg
University of Ottawa
lionel.briand@uni.luYago Isasi Parache
LuxSpace SÃ rl
Isasi@luxspace.lu
ABSTRACT
Signal-based temporal properties (SBTPs) characterize the behav-
iorofasystemwhenitsinputsandoutputsaresignalsovertime;
they are very common for the requirements specification of cyber-
physical systems. Although there exist several specification lan-
guagesforexpressingSBTPs,suchlanguageseitherdonoteasily
allow the specification of important types of properties (such as
spikeoroscillatorybehaviors),orarenotsupportedby(efficient)
trace-checking procedures.
In this paper, we propose SB-TemPsy, a novel model-driven
trace-checking approach for SBTPs. SB-TemPsy provides (i) SB-
TemPsy-DSL, a domain-specific language that allows the specifi-
cationofSBTPscoveringthemostfrequentrequirementtypesin
cyber-physical systems, and (ii) SB-TemPsy-Check, an efficient,model-driven trace-checking procedure. This procedure reduces
theproblemofcheckinganSB-TemPsy-DSLpropertyoveranex-
ecution trace to the problem of evaluating an Object Constraint
Language constraint on a model of the execution trace.
We evaluated our contributions by assessing the expressiveness
ofSB-TemPsy-DSLandtheapplicabilityofSB-TemPsy-Checkusing
a representative industrial case study in the satellite domain. SB-
TemPsy-DSL could express 97% of the requirements of our case
study and SB-TemPsy-Check yielded a trace-checking verdict in
87%ofthecases,withanaveragecheckingtimeof 48.7s.Fr oma
practical standpoint and compared to state-of-the-art alternatives,
our approach strikes a better trade-off between expressiveness and
performanceasitsupportsalargesetofpropertytypesthatcanbe
checked, in most cases, within practical time limits.
CCS CONCEPTS
â€¢Software and its engineering â†’Software verification and
validation; Specification languages.
Permission to make digital or hard copies of all or part of this work for personal or
classroom use is granted without fee provided that copies are not made or distributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
on the first page. Copyrights for components of this work owned by others than ACMmustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,orrepublish,topostonserversortoredistributetolists,requirespriorspecificpermissionand/ora
fee. Request permissions from permissions@acm.org.
ASE â€™20, September 21â€“25, 2020, Virtual Event, Australia
Â© 2020 Association for Computing Machinery.
ACM ISBN 978-1-4503-6768-4/20/09...$15.00
https://doi.org/ 10.1145/3324884.3416631KEYWORDS
tracechecking,run-timeverification,temporalproperties,specifi-
cation patterns, model-driven, cyber-physical systems, signals
ACM Reference Format:
Chaima Boufaied, Claudio Menghi, Domenico Bianculli, Lionel Briand,
and Yago Isasi Parache. 2020. Trace-Checking Signal-based Temporal Prop-
erties: A Model-Driven Approach. In 35th IEEE/ACM International Con-
ference on Automated Software Engineering (ASE â€™20), September 21â€“25,
2020, Virtual Event, Australia. ACM, New York, NY, USA, 12 pages. https:
//doi.org/10.1145/3324884.3416631
1 INTRODUCTION
Trace checking is a run-time verification [6] technique that uses
anautomateddecisionproceduretocheckproperties(basedona
systemâ€™s requirements) ontraces representing system executions.
Trace-checkingtoolsareusedforsoftwareverification&validation
(V&V) activities as test oracles [ 38] and run-time monitors [ 46].
In this paper we consider a specific subset of trace-checking tools,
whichcanbedefinedusingtheconceptsrecentlyintroducedina
taxonomy for run-time verification tools [26]:
â€¢supporting explicit, declarative, temporal specifications, i.e.,
tools that require users to formally express the requirements to be
checked,usingadeclarativespecificationformalismthatallowsfor
expressing constraints over time;
â€¢deployedatthe offlinestage,i.e.,toolsthatrunafterthesystem
has finished its execution, which has been recorded in traces;
â€¢yielding a verdictasoutput, i.e., an indication (e.g., a Boolean
value)ofwhethertheinputtracesatisfiesthepropertybeingchecked.
Insuchtools,therequirementstocheckareexpressedusinga
declarative specification formalism such as (temporal) logic-based
ordomain-specificlanguages.Temporallogic-basedlanguages(e.g.,
LTL, MTL, MLTL [ 34], QTL [30]) provide mathematical-based con-
structs to express arbitrarily complex requirements using a basic
set of temporal operators. Domain-specific languages (DSLs) for
temporal specifications (e.g., PROPEL- DNL[ 47], StructuredEng-
lish Grammar for real-time specifications [ 33], Temporal OCL [ 32],
OCLR[18],VISPEC-graphicalformalism[ 31],TemPsy[ 19],TemPsy-
AG [10],ProMoboBox-propertylanguage[ 39],FRETISH[ 29])pro-
vide a set of predefined constructs that concisely capture certain
typesofrequirementsthatare specificto acertaindomain,possibly
relying on property specification patterns [ 2,13,21]. In terms of
applicabilityforrequirementspecifications, logic-basedlanguages
typically require a strong mathematical background, limiting their
10042020 35th IEEE/ACM International Conference on Automated Software Engineering (ASE)
adoptionamongpractitioners.Ontheotherhand,DSLsaremoreac-
cessible for domain experts since they make available, as first-class
constructsinthelanguage,concepts (orpatterns)thatarespecific
tothedomain.Forexample,tworecentempiricalstudies[ 14,15]
provideevidencethathigh-levellanguagesbasedonpropertyspeci-
ficationpatternsresultintoahigherlevelofunderstandabilitythan
logic-based languages like LTL.
Typically,forbothtypesofspecificationlanguages,theexpres-
siveness of the language is inversely related to the efficiency of
thecorrespondingtrace-checkingprocedure.Therefore,themain
challenge facedwhen defining atrace-checking approach suitable
for industrial contexts, is finding a reasonable trade-off between
these two conflicting aspects.
In this work, we consider the problem of trace-checking re-
quirements expressed in terms of signal-based temporal properties
(SBTPs).SBTPscharacterizethebehaviorofthesystemwhenitsin-
putsandoutputsaresignalsovertime;theyareusedinavarietyofcyber-physicalsystem(CPS)domains,includingaerospace,automo-tive,anddefense[
41].AnexampleofanSBTP,comingfromourcase
studyinthesatellitedomain,is:â€œThevelocityofthesatellitealongthe
X-axis shall oscillate with a maximum amplitude of 8000km/hand
a maximum period of 180minâ€, where â€œthe velocity of the satellite
along the X-axisâ€ isa signal. This property requires the systemto
ensure that the signal exhibits an oscillatory behavior with certain
parameters (in this case, the â€œamplitudeâ€ and the â€œperiodâ€). SBTPs
areusually evaluatedon tracesthat arecollected byrecording the
valuesofsignalsovertime.Traceentriescanberecordedatfixed
or variable sampling rates, meaning that trace entries are recorded
attimeinstantsthatareseparatedbyfixedorvariable-timeinter-
vals, respectively. System and software engineers have to assess,
either manually or by means of tools, whether the recorded traces
satisfy or violate the system requirements. Although there exist
severallogic-based(e.g.,STL[ 36],STL*[12],SFO[4],RFOL[ 38])
and domain-specific [ 7] languages that have been proposed in the
literature toexpress SBTPs,such languageseither donot support
thespecificationofimportanttypesofproperties[ 11],orarenot
supported by (efficient) trace-checking procedures [4, 12].
In this paper, we propose SB-TemPsy, a trace-checking approach
forSBTPsthatstrikesagoodbalanceinindustrialcontextsasitcan
beefficientlytrace-checkedandcoversthemostimportanttypes
of properties in practice across CPS domains. SB-TemPsy provides:
â€¢SB-TemPsy-DSL, a domain-specific language that allows the
specificationofSBTPscoveringthemostfrequentrequire-
ment types in CPS domains;
â€¢an efficient trace-checking procedure, implemented in a pro-
totype tool called SB-TemPsy-Check.
SB-TemPsy-DSL is a pattern-based specification language. It has
been defined in collaboration with system engineers in the satel-lite domain and supports the specification of the most common
typesofSBTPsinCPS,recentlyidentifiedinataxonomy[ 11].SB-
TemPsy-DSLdiffersfromthepattern-basedspecificationlanguages
for temporal properties mentioned above, since it is tailored to
express SBTPs. Its syntax provides constructs that allow engineers
to specify in a simple and precise way complex signal-based be-
haviors such as spikes and oscillations, without requiring a strong
theoretical background in logic-based languages for SBTPs.Our trace-checking procedure is based on the idea of model-
driven trace checking, originally proposed by Dou et al . [19]for
the verification of temporal properties based on Dwyer et al . [21]â€™s
specification patterns (and thus not supporting SBTPs). Using a
model-driventracecheckingapproach,we reducetheproblemof
checkinganSB-TemPsy-DSLpropertyoveranexecutiontraceto
the problem of evaluating an Object Constraint Language (OCL)
constraint,thatissemanticallyequivalenttotheSB-TemPsy-DSL
property,onamodeloftheexecutiontrace.Wemadethischoice
sinceOCLisastandardizedconstraintspecificationlanguagede-
finedbyOMG[ 43]and,asaresult,issupportedbyamaturecon-
straintcheckingtechnology,suchastheconstraintcheckerincluded
inEclipseOCL[ 22].Basedontheseobservationsandtheencour-
aging efficiency results reported in the literature for model-driven
trace checking approaches [ 10,19], we surmised that this choice
wouldallowthedevelopmentofatrace-checkingtoolabletoana-
lyzecomplexrequirementsonreal-worldexecutiontraceswithin
practical time limits. The evaluation of this conjecture was part of
our empirical investigation.
We evaluated our solution by assessing the expressiveness of
our specification language SB-TemPsy-DSL and the applicabilityof our trace-checking tool SB-TemPsy-Check to a representativeindustrial case study in the satellite domain; we also comparedthem to state-of-the-art approaches. Using SB-TemPsy-DSL, wecould express 98 out of 101 requirements of our case study. SB-
TemPsy-DSL was considerably more expressive than STL, which is
supported by publicly available trace-checking tools. Furthermore,
inmostcases( â‰ˆ87%),SB-TemPsy-Checkcompletedtheverification
of these requirements on industrial execution traces within a settime-out of two hours, which we deemed practical based on the
developmentcontextofourcasestudy.Overall,theresultsofour
empiricalinvestigationshowthatSB-TemPsyrepresentsaviable
trade-offbetweenanexpressivespecificationlanguageforSBTPs
(SB-TemPsy-DSL) and an efficient trace-checking procedure (SB-
TemPsy-Check).Furthermore,theresultssuggestthatSB-TemPsy
could be combined with existing approaches efficiently supporting
STL. In this way, we show we can make optimal use of a given
verification budget while avoiding most time-outs by relying on
thebesttooloptiondependingonthetypeofthecheckedproperty.
The rest of this paper is organized as follows. Section 2 presents
our case study in the satellite domain and discusses the motiva-tionsforthiswork.Section3explainsthenotationandtheback-
groundconceptsusedintherestofthepaper.Section4provides
an overview of SB-TemPsy, further detailed in section 5 (whichpresents SB-TemPsy-DSL) and in section 6 (which presents our
model-driventracecheckingprocedureimplementedinSB-TemPsy-Check). Section 7 reports on the empirical investigation of our con-
tributions. Section 8 discusses related work. Section 9 concludes
the paper and provides directions for future work.
2 CASE STUDY AND MOTIVATIONS
LuxSpace [ 35], our industrial partner, has developed, in collabora-
tion with ESA [ 24] and ExactEarth [ 25], a maritime micro-satellite
tocollectAIS(automaticidentificationsystem)trackinginforma-
tion from vessels operating on Earth and to relay those data to the
ground.
1005Throughoutthesatellitedevelopment,ourpartnerfollowsdif-
ferentdevelopmentphases.Thisworkissetinthecontextofthe
design phase (i.e., phases Bâ€“C in the satellite domain [ 23])1, which
includesseveralactivities,suchasthedefinitionofthesystemre-
quirementsandinterfaces,thedefinitionofthespacecraft,payload,
launcher and ground segment, and the design and development of
the on-board satellite software (OBSW).
The OBSW is a complex mission-critical software component,
which includes several modules that control and monitor the oper-
ationsandthephysicalbehaviorofthesatellite.Itsmainmodules
are theon-board data handling (controlling the satellite platform
and payload, andcollectingand storingthe data),the electric power
system(regulatingthepowerofthesatellite),the telemetryandtele-
command (receivingtele-commands fromand sendingdata tothe
ground), the thermal control (ensuring that each component of the
satellite remains within its operational temperature ranges), and
theADCS - attitude determination and control system (estimating
and regulating the satellite attitude).
V&VplayacrucialroleduringthedevelopmentoftheOBSW,
given the complexity of the physical behavior being controlled by
the OBSW, and the various hardware components (e.g., sensors
and actuators) and software modules involved. For example, a typ-
ical V&V step is an in-depth testing of the ADCS module of the
OBSW [37, 38].
Attheverylaststageofthedevelopment,testingisperformed
ontheactualhardware-basedfacilitiesandinvolvesallthesoftware
modulesoftheOBSW.Asinmanyothercyber-physicaldomains,
our industrial partner relies on a multi-purpose simulator [ 44] that
supportstestexecutionbothontheactualhardwarecomponentsofthesatelliteandonsoftwarestubsreplacingsuchcomponents.Thisfeatureallowsdeveloperstoanticipatetestingactivities,whenhard-
ware components are not yet available, and to reduce the risk of
hardware damages, by running high-risk test cases relying on sim-
ulation andthusensuring beforehandthere isno unexpectedand
harmfulbehavior.DuringOBSWtesting,aspecificconfigurationofthesatellite(software/hardwarecomponents)isloadedonthesimu-latorforeachtestcase;then,thesatellitebehavioroveragiventimeissimulatedanddataarecollectedintraces
2.Duetothecomplexity
of thephysical modelsinvolved during simulation,itself resulting
from the complex physical behavior being controlled by OBSW,
the time to complete a simulation and generate the corresponding
trace is on the order of several days.
In the current practice, LuxSpace engineers are using ad hoc
solutions to inspect whether these traces satisfy the system re-quirements. In the case of the OBSW, requirements are complex
propertiesconstrainingthebehaviorofaninputoroutputsignal
(e.g.,intermsofthetypeofoscillationsallowed);wewillpresent
examples of these properties in section 3.2.
Inthiscontext,themainchallengeistoautomatethecheckingof
system requirements (expressed as complex SBTPs) on simulation
traces, by means of an efficient offline run-time verification (i.e.,
trace-checking) procedure.
1We remark that our solution can also be applied in phases Dâ€“E.
2Note that simulation is used in its broad sense, generally indicating a simulation
scenario. As such, a simulation also considers the case in which all the hardware
components of the satellite are in place.Although this case study is set in the satellite domain, it is in
many ways representative of other complex cyber-physical do-mains, where the behavior being controlled involves convolutedphysical dynamics (such as the satellite attitude) and the system
requirements are therefore expressed as complex properties on the
shape of the input and output signals (e.g., spikes and oscillations).
3 BACKGROUND
3.1 Traces
Asimulationtrace,yieldedattheendofthesimulation,containsen-
trieswiththevalueofasubsetofthesignalsandthesimulationtime
at which they were recorded.More precisely, let ğ‘†={ğ‘ 1,ğ‘ 2...ğ‘ ğ‘›}
beasetofsignals.Weusethesymbol ğ‘‡toindicatethesequence
ğ‘‡=(ğ‘¡1,ğ‘¡2,...,ğ‘¡ğ‘š)containing the progressive simulation times
associated with theentries ofa simulation trace. We also use ğ‘ ğ‘–=ğ‘£
to denote a record assigning the value ğ‘£âˆˆRto signalğ‘ ğ‘–. LetAbe
theuniverseofallpossibleassignmentsforthesignalsin ğ‘†.Atrace
ğœ‹is a tuple /angbracketleftğ‘‡,ğ‘“/angbracketright, withğ‘‡defined as above and ğ‘“:ğ‘‡â†’2A.A n
entry is a tuple /angbracketleftğ‘¡,ğ‘“(ğ‘¡)/angbracketrightthat contains the simulation time ğ‘¡âˆˆğ‘‡at
whichtheentrywassampled,andasetofrecords ğ‘“(ğ‘¡)thatspecify
thevaluesofthesignalsattime ğ‘¡.Wesaythatasignal ğ‘ isassigned
a valueğ‘£at timeğ‘¡if there exists a record (ğ‘ =ğ‘£)âˆˆğ‘“(ğ‘¡), forğ‘¡âˆˆğ‘‡.
We now introduce some useful notations used in the rest of the
paper. Let ğœ‹=/angbracketleftğ‘‡,ğ‘“/angbracketrightbe a trace, ğ‘ be an arbitrary element of ğ‘†
(i.e., a signal) and ğ‘¡âˆˆğ‘‡be a simulation time. The initial value of
ğ‘ ,denotedby init(ğœ‹,ğ‘ ),isğ‘£ifğ‘£isthevalueassignedto ğ‘ through
thefirstassignmentperformedon ğ‘ inğœ‹;weassumethatsuchan
initialassignmentalways exists,aspartof theinitializationofthe
simulation.The last-seenvalue ofğ‘ attimeğ‘¡,denotedby last(ğœ‹,ğ‘ ,ğ‘¡),
isthevalue ğ‘£if(1)ğ‘ isassigned ğ‘£attimeğ‘¡or(2)ğ‘ wasassigned ğ‘£in
themostrecentassignmentto ğ‘ inğœ‹atasimulationtimepreceding ğ‘¡
or (3)ğ‘£is equal to init(ğœ‹,ğ‘ )ifğ‘ still has notbeen assigned a value
since theinitialization. The next-seen value ofğ‘ at timeğ‘¡,denoted
bynext(ğœ‹,ğ‘ ,ğ‘¡),isthevalue ğ‘£if(1)ğ‘ isassigned ğ‘£attimeğ‘¡or(2)ğ‘ 
isassigned ğ‘£inthefirstassignmentto ğ‘ inğœ‹atasimulationtime
ensuingğ‘¡.
3.2 Signal-based temporal properties (SBTPs)
CPS requirements are specified using SBTPs. In this section, we
presentâ€”with examples from our case studyâ€”the main types of
SBTP proposed in a recent taxonomy [11].
DataAssertion.It specifiesa constrainton thevalueof asignal.
Example (pDA): The beta angle shall vary between +90Â°andâˆ’90Â°.
Spike. It is a large increase or decrease of the value of a signal.
Whenitrepresentsanincreaseofthesignalvalue,aspikeischar-
acterizedbythreeextrema,showninFigure1a:alocalmaximum
ğ‘2surrounded by two local minima ğ‘1andğ‘3. A spike behavior
can be characterized in terms of two features: the width, defined
as|t3âˆ’t1|;theamplitude,definedas max(ğ‘1,ğ‘2),whereğ‘1isthe
amplitudeofthefirst-halfofthespikeshape ğ‘1=|ğ‘£2âˆ’ğ‘£1|andğ‘2is
the amplitude of the second-half of the spike shape ğ‘2=|ğ‘£3âˆ’ğ‘£2|.
Example (pSK): The beta angle shall show a spike with an amplitude
less than90Â°.
Oscillation.Itisarepeatedvariationovertimeofthevalueofa
signal.Anoscillationoccurswhenthesignalvalueswingsfromoneextremumtotheadjacentextremumofthesametype,bytraversing
1006t1t2 t3v3v1v2
ğ‘1ğ‘2
ğ‘3ğ‘1 ğ‘2
width
timesignal value
(a)t3 t5vlvuğ‘1
ğ‘2ğ‘3 ğ‘5
ğ‘4p2pAmpperiod
timesignal value
(b)
Figure 1: Main features (adapted from [11]) used to charac-
terize (a) a spike and (b) an oscillatory behavior
anextremumoftheothertype.Forinstance,infigure1bonecan
see an oscillation when the signal goes from ğ‘1toğ‘3(two peak
points)through ğ‘2(avalleypoint),andanotheronewhenthesignal
goes from ğ‘3toğ‘5throughğ‘4. An oscillation can be characterized
in terms of the period, which is the time required to perform a
completeoscillation(e.g., ğ‘¡5âˆ’ğ‘¡3),andthe peak-to-peakamplitude
(p2pAmp),whichisthedifferencebetweentwoadjacentextrema
(e.g.,ğ‘£ğ‘¢âˆ’ğ‘£ğ‘™). Example (pOS): The velocity ofthe satellite along the
X-axisshalloscillatewithamaximumamplitudeof 8000km/hour
and a maximum period of 180min.
RiseTime.Itisaconstraintonthe(transient)behaviorofasignal,
whileitreachesâ€”possiblymonotonicallyâ€”atargetvalue.Itsdual
is called â€œfall timeâ€. Example (pRT): The X-current of the sun sensor
shall rise monotonically reaching the value of 3650ÂµA.
Overshoot. It specifies a maximum value, above the target value,
that a signal can reach when overshooting (i.e., when the signal
exceeds its target value); its dual is called â€œundershootâ€.
Example (pOV): The X current of the sun sensor shall overshoot
3650ÂµAby at most 50ÂµA.
Order Relationship (Response). It captures the responsepattern
proposed by Dwyer et al . [21]. It expresses a constraint over the
sequenceofapairof causeandeffectevents,possiblywithatem-
poraldistancebetweenthetwo.Example(pOR): IftheSafeMode
ConvergenceStatusisequaltoâ€œB-dotConvergedmodeâ€,thenitshould
become equal to â€œSun Acquired modeâ€ within at most 20 minutes.
4 THE SB-TEMPSY APPROACH
Model-driven trace checking [19] is an approach that reduces the
problem of checking a temporal property ğœ™over a trace ğœ‹to the
problemofevaluatinganOCLconstraint,thatissemanticallyequiv-
alent toğœ™, on a model of the trace (equivalent to ğœ‹).
Inthispaper,wepresentourmodel-drivenapproach, SB-TemPsy,
for trace checking of SBTPs. We have decided to follow a model-
driven paradigm for trace checking because OCL is a standardized
constraint specification language defined by OMG [ 43] and, as a
result, is supported by a mature constraint checking technology,suchastheconstraintcheckerincludedinEclipseOCL[
22].Fur-
thermore,existingapproachesformodel-driventracechecking(for
checking linear temporal logic properties [ 19] and properties with
temporalaggregations[ 10])havebeenshowntoyieldencouraging
efficiency results. Hence, we surmise that choosing a model-driven
approachallowsthedevelopmentofatrace-checkingtoolabletoanalyzeSBTPsonreal-worldexecutiontraceswithinpracticaltime
limits;wereportontheempiricalinvestigationofthisconjecture
in section 7.
Our SB-TemPsy approach is illustrated in figure 2; it takes as
input a trace ğœ‹and a property to check ğœ™; it returns a Boolean
verdict,indicatingwhether ğœ‹satisfiesorviolatesproperty ğœ™.The
traceğœ‹recordsthevaluesofsignalssampledatdifferentsimulation
times, as discussed in section 3.1. The property ğœ™represents a
requirementofaCPS,expressedusingoneofthetypesofSBTPs
illustrated in section 3.2.
Wehavedefinedanexpressive,pattern-baseddomain-specific
language to ease the specifications of such requirements as SBTPs.
Thelanguage,called SB-TemPsy-DSL (Signal-BasedTemporalProperties
madeeasy),hasbeendefinedincollaborationwithLuxSpacesys-
tem engineers. It draws inspiration from TemPsy [ 19]â€”an existing
pattern-basedlanguageforthespecificationoftemporalpropertiesâ€”and supports the specification of the most common types of SBTPsinCPS(e.g.,spike,oscillation),recentlyidentifiedinataxonomy[
11]
and presented in section 3.2.
SB-TemPsy-DSLdiffersfromexistingpattern-basedspecification
languages for temporal properties (such as PROPEL - DNL [ 47],
Structured English Grammar for real-time specifications [ 33], Tem-
poral OCL [ 32], OCLR [ 18], VISPEC - graphical formalism [ 31],
TemPsy[19],TemPsy-AG[ 10],ProMoboBox-propertylanguage[ 39]),
since it is tailored to express SBTPs. Furthermore, differently from
existinglogic-basedspecificationlanguagesforSBTPs(e.g.,STL[ 36],
STL* [12], RFOL [38], SFO [4]), SB-TemPsy-DSL enables practition-
ers tospecify ina preciseway keyrequirements ofCPS (whichin
many cases are not supported by the aforementioned languages,
see [11]), without requiring a strong theoretical background.
Ourapproachfortracechecking,calledSB-TemPsy-Checkand
implemented in a prototype tool, includes two main steps: pre-
processing,whichpreparesthetracefortheverification,and model-
driven trace checking, which computes the verification verdict.
Pre-processing.Asdiscussedinsection3.1,thetrace ğœ‹isobtained
by recording the values of a set of signals sampled at differentsimulation times; therefore, at a given simulation time, a signal
maybeunassigned.Thepre-processingstepanalyzesthetrace ğœ‹=
/angbracketleftğ‘‡,ğ‘“/angbracketrightandgenerates,usinganinterpolationfunction ğœ‚,anewtrace
Â¯ğœ‹=/angbracketleftğ‘‡,Â¯ğ‘“/angbracketrightthatincludesassignmentstosignalsforthesimulation
times at which such signals were unassigned in ğœ‹. We discuss
function Â¯ğ‘“, the interpolation function ğœ‚, and the pre-processing
step in more detail in section 6.1.
Model-driven trace checking. This step (detailed in section 6.3)
checkswhether property ğœ™(expressed in SB-TemPsy-DSL)holds
overthetrace ğœ‹by(a)convertingthepre-processedtrace Â¯ğœ‹intoan
instanceofatracemeta-model;(b)evaluatinganOCLconstraint
semantically equivalent to ğœ™over the model of Â¯ğœ‹.
5 THE SB-TEMPSY-DSL LANGUAGE
5.1 Syntax
The syntax of SB-TemPsy-DSL is shown in figure 3; optional items
areenclosedinsquarebrackets;thesymbol |separatesalternatives.
Aproperty(non-terminal ğœ™) is defined using a scope(non-terminal
sc) or as a Boolean expression over other properties.
1007Pre-processing
SB-TemPsy 
Model-Driven
Trace-checking
Mpre-processed 
trace
Veriï¬cation
VerdictProperty
(SB-TemPsy-DSL )TraceSB-TemPsy-Check 
ğ€ ğ€
ğœ™_
Figure 2: Overview of SB-TemPsy
Ascopeoperatorconstrainsa pattern(non-terminal p)tohold
withinagiventimeintervaldelimitedeitherbyabsolutetimein-
stants (denoted by, t,t1, and t2) or by events, i.e., occurrencesof a
pattern, (denoted by p,p1, and p2). For example, the â€œ between t1
and t2pâ€ scope operator specifies that pattern pholds between
thetimeinstants t1andt2.ThescopeoperatorssupportedbySB-
TemPsy-DSLareinspiredbythoseproposedbyDwyeretal . [21]
(globally ,before,after,between and ): they support not only
events(i.e.,intheformofoccurrencesofapattern)butalsoabsolute
timeinstantsasscopeboundaries.Furthermore,SB-TemPsy-DSL
includes a punctual scope (at) to reference a specific time instant.
A pattern specifies a constraint on the behavior of one or more
signals.Forexample,patternâ€œ exist oscillations in swith p2pAmp
v1period v2â€ specifies that the value of signal sshows an oscil-
latory behavior with a peak-to-peak amplitude (denoted by the
keyword p2pAmp) equal to value v1and a period (denoted by the
keyword period) that is equal to value v2; it corresponds to the
property type â€œoscillationâ€ discussed in section 3.2.
Acondition (non-terminal c)isalogicalpredicateonasignal s(of
the form â€œ sâˆ¼vâ€, withâˆ¼âˆˆ {<,>,=,â‰ ,â‰¤,â‰¥}) or a logical expression
over predicates.
Belowweshowhowtheexamplepropertiesfromourcasestudy,
presentedinEnglishinsection3.2,canbeexpressedinSB-TemPsy-
DSL (for simplicity, we omitted the corresponding scopes):
pDA assert (s1 >= -90 and s1 <= 90)
pSK exists spike in s2with amplitude <9 0
pOS exist oscillations in s3with p2pAmp <= 8000
with period <= 10800
pRT s4rises monotonically reaching 3650
pOV s4overshoots 3650 by50
pOR if assert (s5 == 1) then
assert (s5 == 2) within at most 120
5.2 Formal Semantics
Figure 4 presents the formal semantics of SB-TemPsy-DSL. Thesemantics is defined over a pre-processed trace
Â¯ğœ‹=/angbracketleftğ‘‡,Â¯ğ‘“/angbracketright, with
ğ‘‡=(ğ‘¡1,ğ‘¡2,...,ğ‘¡ğ‘š); optional items are enclosed in square brackets
withaGreeklettersubscript.Weusethenotation ğ‘“ğ‘(ğ‘¡,ğ‘ )todenote
the value ğ‘¥assigned to signal ğ‘ at timeğ‘¡in the pre-processed trace
Â¯ğœ‹=/angbracketleftğ‘‡,Â¯ğ‘“/angbracketright,i f(ğ‘ =ğ‘¥)âˆˆÂ¯ğ‘“(ğ‘¡)forğ‘¡âˆˆğ‘‡. We omit the semantic
definition of language elements for which the dual is available
(i.e., fall time vs rise time, Overshoot vs Undershoot) and whose
semantics can be easily derived.Property ğœ™::=ğœ™1andğœ™2|ğœ™2orğœ™1|notğœ™|sc
Scope sc::=globally p|before tp|after tp|attp|before p1p
after p1p|between t1and t2p|between p1and p2p
Pattern p::=assert c|sbecomesâˆ¼v|ifp1then[withinâŠ²âŠ³t]p2|
exists spike in s[with[widthâˆ¼v1][amplitude âˆ¼v2]]|
exist oscillations in s[with[p2pAmpâˆ¼v1][periodâˆ¼v2]]|
srises[monotonically ]reaching v|
sfalls[monotonically ]reaching v|
sovershoots [monotonically ]v1byv2|
sundershoots [monotonically ]v1byv2
âŠ²âŠ³::=exactly|at most|at least
Condition c::=c1and c2|c1orc2|notc|sâˆ¼v
t,t1,t2âˆˆR;v,v1,v2âˆˆR;âˆ¼âˆˆ {<,>,=,â‰ ,â‰¤,â‰¥};
sis a signal in ğ‘†or a mathematical expression over the signals in ğ‘†
Figure 3: SB-TemPsy-DSL syntax
Conditions areconstraintsonsignalsthatshouldholdpunctually,
i.e., in a specific time instant ğ‘¡âˆˆğ‘‡. We use the notation Â¯ğœ‹,ğ‘¡|=cto
indicatethatcondition choldsinthepre-processedtrace Â¯ğœ‹attimeğ‘¡.
For example, the predicate sâˆ¼vholds at time ğ‘¡if the value ğ‘“ğ‘(ğ‘¡,ğ‘ )
assigned to signal sat timeğ‘¡satisfies the predicate ğ‘“ğ‘(ğ‘¡,ğ‘ )âˆ¼v.
Patternsare evaluated over a time interval [ğ‘¡ğ‘™,ğ‘¡ğ‘¢], whereğ‘¡ğ‘™,ğ‘¡ğ‘¢âˆˆ
ğ‘‡andğ‘¡ğ‘™<ğ‘¡ğ‘¢. We use the notation Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=pto indicate that
pattern pholdsinthepre-processedtrace Â¯ğœ‹withinthetimeinterval
[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]. The semantics of the spike and oscillation patterns rely on
theauxiliarypredicates uni_m_min,uni_sm_min,uni_m_max,and
uni_sm_maxdefinedinTable1.Thesepredicatesevaluatetotrueif,
withinagiventimeinterval,thesignalhasanextremum(minimum
ormaximum)anditsvaluechangesinacertainway(seecolumn
â€œDescriptionâ€ in Table 1 for the complete description). For example,
in the case of the oscillation pattern, the semantics requires the
signaltoexhibitamaximumfollowedbyaminimumfollowedbyamaximum,orviceversa(seealsosection3.2).Inaddition,inthefirst
case, the value of the signal shall increase strictly monotonically
(1) before the first maximum and (2) between the minimum and
the second maximum, and shall decrease strictly monotonically
(1) between the first maximum and the minimum and (2) after the
second maximum.
Alsoscopesare evaluated over a time interval [ğ‘¡ğ‘™,ğ‘¡ğ‘¢]. For ex-
ample,thesemanticsoftheâ€œ between t1andt2pâ€scopeoperator
evaluates pattern pin the time interval [t1,t2].
The semantics of a propertyis defined by evaluating the satis-
faction of a scope scwithin the time interval [ğ‘¡1,ğ‘¡ğ‘š], whereğ‘¡1and
ğ‘¡ğ‘šare,respectively,thefirstandlastsimulationtimeinthetime
sequence ğ‘‡of the pre-processed trace Â¯ğœ‹. The semantics of prop-
erties obtained by composing other properties through Boolean
operators follows the standard semantics of such operators.
Finally,wedefinethesemanticsforcheckinganSB-TemPsy-DSL
property over an input trace. Let ğœ‹be a trace, ğœ‚be an interpola-
tionfunction,and ğœ™beanSB-TemPsy-DSLproperty.Wesaythat
thetrace ğœ‹satisfiestheproperty ğœ™(whenusingtheinterpolation
function ğœ‚in the pre-processing), denoted by ğœ‹|=ğœ‚ğœ™, if the pre-
processed trace Â¯ğœ‹obtained from ğœ‹using theinterpolation function
ğœ‚is such that Â¯ğœ‹|=ğœ™.
1008Table 1: Definition of predicates uni_m_max,uni_sm_max(predicates uni_m_min,uni_sm_minare the dual)
Predicate Mathematical Formulation Description
uni_m_max(Â¯ğœ‹,ğ‘ ,ğ‘¡,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]) ğ‘“ğ‘(ğ‘¡,s)=ğ‘¥andâˆ€ğ‘¡1âˆˆ[ğ‘¡ğ‘™,ğ‘¡ğ‘¢],ğ‘“ğ‘(ğ‘¡1,s)<ğ‘¥and
âˆ€ğ‘¡1,ğ‘¡2âˆˆ[ğ‘¡ğ‘™,ğ‘¡],ifğ‘¡1<ğ‘¡2thenğ‘“ğ‘(ğ‘¡1,s)â‰¤ğ‘“ğ‘(ğ‘¡2,s)and
âˆ€ğ‘¡1,ğ‘¡2âˆˆ[ğ‘¡ğ‘™,ğ‘¡],ifğ‘¡1<ğ‘¡2thenğ‘“ğ‘(ğ‘¡1,s)â‰¥ğ‘“ğ‘(ğ‘¡2,s)Thevalue ğ‘¥ofsignalğ‘ attimeinstant ğ‘¡istheminimumvalueassigned
toğ‘ withintheinterval [ğ‘¡ğ‘™,ğ‘¡ğ‘¢].Furthermore,thevalueof ğ‘¥changes
accordingtoaunimodalfunction,i.e.,foreverytimeinstantin [ğ‘¡ğ‘™,ğ‘¡]
the value of ğ‘ is monotonically increasing and for every time instant
in[ğ‘¡,ğ‘¡ğ‘¢]the value of ğ‘ is monotonically decreasing.
uni_sm_max(Â¯ğœ‹,ğ‘ ,ğ‘¡,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢])ğ‘“ğ‘(ğ‘¡,s)=ğ‘¥andâˆ€ğ‘¡1âˆˆ[ğ‘¡ğ‘™,ğ‘¡ğ‘¢],ğ‘“ğ‘(ğ‘¡1,s)<ğ‘¥and
âˆ€ğ‘¡1,ğ‘¡2âˆˆ[ğ‘¡ğ‘™,ğ‘¡],ifğ‘¡1<ğ‘¡2thenğ‘“ğ‘(ğ‘¡1,s)<ğ‘“ğ‘(ğ‘¡2,s)and
âˆ€ğ‘¡1,ğ‘¡2âˆˆ[ğ‘¡ğ‘™,ğ‘¡],ifğ‘¡1<ğ‘¡2thenğ‘“ğ‘(ğ‘¡1,s)>ğ‘“ğ‘(ğ‘¡2,s)As above, except that for every time instant in [ğ‘¡ğ‘™,ğ‘¡]the value of
ğ‘ isstrictlymonotonicallyincreasingandforeverytimeinstantin
[ğ‘¡,ğ‘¡ğ‘¢]the value of ğ‘ isstrictlymonotonically decreasing.
PropertyÂ¯ğœ‹|=scâ‡”Â¯ğœ‹,[ğ‘¡1,ğ‘¡ğ‘š]|=sc
ConditionÂ¯ğœ‹,ğ‘¡|=sâˆ¼vâ‡”ğ‘“ğ‘(ğ‘¡,ğ‘ )âˆ¼v
Â¯ğœ‹|=ğœ™1andğœ™2â‡”(Â¯ğœ‹|=ğœ™1)and(Â¯ğœ‹|=ğœ™2) Â¯ğœ‹,ğ‘¡|=c1andc2â‡”(Â¯ğœ‹,ğ‘¡|=c1)and(Â¯ğœ‹,ğ‘¡|=c2)
Â¯ğœ‹|=ğœ™1orğœ™2â‡”(Â¯ğœ‹|=ğœ™1)or(Â¯ğœ‹|=ğœ™2) Â¯ğœ‹,ğ‘¡|=c1orc2â‡”(Â¯ğœ‹,ğ‘¡|=c1)or(Â¯ğœ‹,ğ‘¡|=c2)
Â¯ğœ‹|=notğœ™â‡”(Â¯ğœ‹/negationslash|=ğœ™) Â¯ğœ‹,ğ‘¡|=notcâ‡”(Â¯ğœ‹,ğ‘¡/negationslash|=c)
Absolute
ScopeÂ¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=globally pâ‡”Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=p
EventScopeÂ¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=before p1pâ‡”âˆ€ğ‘¡1,ğ‘¡2,ğ‘¡ğ‘™<ğ‘¡1<ğ‘¡2â‰¤ğ‘¡ğ‘¢,Â¯ğœ‹,[ğ‘¡1,ğ‘¡2]|=p1
Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=before tpâ‡”ğ‘¡ğ‘™â‰¤tâ‰¤ğ‘¡ğ‘¢andÂ¯ğœ‹,[ğ‘¡ğ‘™,t]|=p andâˆƒğ‘¡3,ğ‘¡4,ğ‘¡ğ‘™<ğ‘¡3<ğ‘¡4<ğ‘¡1,Â¯ğœ‹,[ğ‘¡3,ğ‘¡4]|=p
Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=after tpâ‡”ğ‘¡ğ‘™â‰¤tâ‰¤ğ‘¡ğ‘¢andÂ¯ğœ‹,[t,ğ‘¡ğ‘¢]|=p Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=after p1pâ‡”âˆ€ğ‘¡1,ğ‘¡2,ğ‘¡ğ‘™<ğ‘¡1<ğ‘¡2â‰¤ğ‘¡ğ‘¢,Â¯ğœ‹,[ğ‘¡1,ğ‘¡2]|=p1
Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=between nandmpâ‡”ğ‘¡ğ‘™â‰¤n<mâ‰¤ğ‘¡ğ‘¢ andâˆƒğ‘¡3,ğ‘¡4,ğ‘¡2<ğ‘¡3<ğ‘¡4<ğ‘¡ğ‘¢,Â¯ğœ‹,[ğ‘¡3,ğ‘¡4]|=p
andÂ¯ğœ‹,[n,m]|=p Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=between p1andp2pâ‡”âˆ€ğ‘¡1,ğ‘¡2,ğ‘¡3,ğ‘¡4,ğ‘¡ğ‘™â‰¤ğ‘¡1<ğ‘¡2<ğ‘¡3<ğ‘¡4â‰¤
ğ‘¡ğ‘¢,
Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=attpâ‡”âˆƒğ‘¡:ğ‘¡ğ‘™â‰¤tâ‰¤ğ‘¡ğ‘¢andÂ¯ğœ‹,[t,t]|=p/parenleftbigÂ¯ğœ‹,[ğ‘¡1,ğ‘¡2]|=p1and[ğ‘¡3,ğ‘¡4]|=p2/parenrightbigâ‡’Â¯ğœ‹,[ğ‘¡2,ğ‘¡3]|=p
Data AssertionPattern Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=assert câ‡”âˆ€ğ‘¡âˆˆ[ğ‘¡ğ‘™,ğ‘¡ğ‘¢],(Â¯ğœ‹,ğ‘¡|=c)
Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=sbecomesâˆ¼vâ‡”âˆƒğ‘¡âˆˆ(ğ‘¡ğ‘™,ğ‘¡ğ‘¢],/parenleftbigğ‘“ğ‘(ğ‘¡,s)âˆ¼vandâˆ€ğ‘¡1âˆˆ(ğ‘¡ğ‘™,ğ‘¡),/parenleftbigğ‘“ğ‘(ğ‘¡1,s)/notsimilarv/parenrightbig/parenrightbig
SpikePatternÂ¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=exists spike in s/bracketleftbig
with[widthâˆ¼v1]ğ›½[amplitude âˆ¼v2]ğ›¾/bracketrightbig
ğ›¼â‡”âˆƒğ‘¡1,ğ‘¡2,ğ‘¡3âˆˆ[ğ‘¡ğ‘™,ğ‘¡ğ‘¢],ğ‘¡1<ğ‘¡2<ğ‘¡3,/parenleftBig
(uni_m_min(Â¯ğœ‹,ğ‘ ,ğ‘¡1,[ğ‘¡ğ‘™,ğ‘¡2])anduni_sm_max(Â¯ğœ‹,ğ‘ ,ğ‘¡2,[ğ‘¡1,ğ‘¡3])anduni_m_min(Â¯ğœ‹,ğ‘ ,ğ‘¡3,[ğ‘¡2,ğ‘¡ğ‘¢]))or
(uni_m_max(Â¯ğœ‹,ğ‘ ,ğ‘¡1,[ğ‘¡ğ‘™,ğ‘¡2])anduni_sm_min(Â¯ğœ‹,ğ‘ ,ğ‘¡2,[ğ‘¡1,ğ‘¡3])anduni_m_max(Â¯ğœ‹,ğ‘ ,ğ‘¡3,[ğ‘¡2,ğ‘¡ğ‘¢]))/bracketleftBig
[and|ğ‘¡3âˆ’ğ‘¡1|âˆ¼v1]ğ›½/bracketleftbig
andmax/parenleftbig/barex/barexğ‘“ğ‘(ğ‘¡1,s)âˆ’ğ‘“ğ‘(ğ‘¡2,s)/barex/barex,/barex/barexğ‘“
ğ‘(ğ‘¡2,s)âˆ’ğ‘“ğ‘(ğ‘¡3,s)/barex/barex/parenrightbigâˆ¼v2/bracketrightbig
ğ›¾/bracketrightBig
ğ›¼/parenrightBig
Oscillation
PatternÂ¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=exist oscillations in s/bracketleftbig
with[p2pAmpâˆ¼v1]ğ›½[periodâˆ¼v2]ğ›¾/bracketrightbig
ğ›¼â‡”âˆƒğ‘¡1,ğ‘¡2,ğ‘¡3,ğ‘¡4,ğ‘¡5âˆˆ[ğ‘¡ğ‘™,ğ‘¡ğ‘¢],ğ‘¡1<ğ‘¡2<ğ‘¡2<ğ‘¡3<ğ‘¡4<ğ‘¡5,/parenleftBig
(uni_sm_min(Â¯ğœ‹,ğ‘ ,ğ‘¡2,[ğ‘¡1,ğ‘¡3])anduni_sm_max(Â¯ğœ‹,ğ‘ ,ğ‘¡3,[ğ‘¡2,ğ‘¡4])anduni_sm_min(Â¯ğœ‹,ğ‘ ,ğ‘¡4,[ğ‘¡3,ğ‘¡5]))or
(uni_sm_max(Â¯ğœ‹,ğ‘ ,ğ‘¡2,[ğ‘¡1,ğ‘¡3])anduni_sm_min(Â¯ğœ‹,ğ‘ ,ğ‘¡3,[ğ‘¡2,ğ‘¡4])anduni_sm_max(Â¯ğœ‹,ğ‘ ,ğ‘¡4,[ğ‘¡3,ğ‘¡5]))/bracketleftBig/bracketleftbig
and/barex/barexğ‘“ğ‘(ğ‘¡2,s)âˆ’ğ‘“ğ‘(ğ‘¡3,s)/barex/barexâˆ¼v1and/barex/barexğ‘“
ğ‘(ğ‘¡3,s)âˆ’ğ‘“ğ‘(ğ‘¡4,s/parenrightbig|âˆ¼v1/bracketrightbig
ğ›½[and(ğ‘¡4âˆ’ğ‘¡2)âˆ¼v2]ğ›¾/bracketrightBig
ğ›¼/parenrightBig
Rise Time
PatternÂ¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=srises[monotonically ]ğ›¼reaching vâ‡”âˆƒğ‘¡âˆˆ(ğ‘¡ğ‘™,ğ‘¡ğ‘¢],/parenleftBig
ğ‘“ğ‘(ğ‘¡,s)â‰¥vandâˆ€ğ‘¡1âˆˆ(ğ‘¡ğ‘™,ğ‘¡),/parenleftbigğ‘“ğ‘(ğ‘¡1,s)<v/parenrightbig
/bracketleftbig
andâˆ€ğ‘¡2âˆˆ(ğ‘¡ğ‘™,ğ‘¡),âˆ€ğ‘¡3âˆˆ(ğ‘¡2,ğ‘¡],/parenleftbigğ‘“ğ‘(ğ‘¡2,s)<ğ‘“ğ‘(ğ‘¡3,s)/parenrightbig/bracketrightbig
ğ›¼/parenrightBig
OvershootPattern Â¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=sovershoots [monotonically ]ğ›¼v1byv2â‡”âˆƒğ‘¡âˆˆ(ğ‘¡ğ‘™,ğ‘¡ğ‘¢],/parenleftBig
ğ‘“ğ‘(ğ‘¡,s)â‰¥v1andâˆ€ğ‘¡1âˆˆ(ğ‘¡,ğ‘¡ğ‘¢],/parenleftbigğ‘“ğ‘(ğ‘¡1,s)â‰¤v1+v2/parenrightbig
[andâˆ€ğ‘¡2âˆˆ(ğ‘¡ğ‘™,ğ‘¡),âˆ€ğ‘¡3âˆˆ(ğ‘¡2,ğ‘¡],/parenleftbigğ‘“ğ‘(ğ‘¡2,s)<ğ‘“ğ‘(ğ‘¡3,s)/parenrightbig/bracketrightbig
ğ›¼/parenrightBig
Order
Relationship
PatternÂ¯ğœ‹,[ğ‘¡ğ‘™,ğ‘¡ğ‘¢]|=ifp1then[within(exactly|at most|at least )t]ğ›¼p2â‡”âˆ€ğ‘¡1,ğ‘¡2âˆˆ[ğ‘¡ğ‘™,ğ‘¡ğ‘¢],ğ‘¡1<ğ‘¡2,/parenleftBig
Â¯ğœ‹,[ğ‘¡1,ğ‘¡2]|=p1â‡’
âˆƒğ‘¡3,ğ‘¡4âˆˆ[ğ‘¡2,ğ‘¡ğ‘¢],ğ‘¡3<ğ‘¡4,/parenleftbigÂ¯ğœ‹,[ğ‘¡3,ğ‘¡4]|=p2/bracketleftbig
and(ğ‘¡3âˆ’ğ‘¡2)/dblbracketleftâŠ²âŠ³/dblbracketrightt/bracketrightbig
ğ›¼/parenrightbig/parenrightBig
whereâŠ²âŠ³âˆˆ{exactly,at most,at least }and/dblbracketleftâŠ²âŠ³/dblbracketrightis defined such that /dblbracketleftexactly/dblbracketrightâ‰¡â€˜=â€™,/dblbracketleftat most/dblbracketrightâ‰¡â€˜<=â€™,/dblbracketleftat least /dblbracketrightâ‰¡â€˜>=â€™
t,t1,t2âˆˆR;v,v1,v2âˆˆR;âˆ¼âˆˆ {<,>,=,â‰ ,â‰¤,â‰¥};sis a signal in ğ‘†or a mathematical expression over the signals in ğ‘†;scis a scope; pis a pattern.
Figure 4: SB-TemPsy-DSL formal semantics
6 SB-TEMPSY-CHECK
In this section, we present the main steps of and the artifacts used
within SB-TemPsy-Check. Section 6.1 describes the pre-processing
step, Section 6.2 illustrates the meta-model of the pre-processed
trace, and Section 6.3 explains how the OCL constraint solver is
used to perform trace checking.
6.1 Pre-processing
Thepre-processing step converts the original simulation trace, in
which signal values are recorded at different simulation times, to a
new trace in which signal values are recorded for every entry.Ourconversionreliesonaninterpolationfunctiontogenerate
themissingsignalvalues.Moreprecisely,let ğœ‚:RÃ—Râ†’Rbean
interpolationfunctionoverrealvalues,and ğ‘†andğœ‹be,respectively,
the set of signals and the simulation trace as defined in section 3.1;
thepre-processed trace obtained from ğœ‹=/angbracketleftğ‘‡,ğ‘“/angbracketrightand denoted by Â¯ğœ‹
isdefinedas Â¯ğœ‹=/angbracketleftğ‘‡,Â¯ğ‘“/angbracketright,whereÂ¯ğ‘“isafunctionsuchthatforall ğ‘¡âˆˆğ‘‡
andforall ğ‘ âˆˆğ‘†,theassignment (ğ‘ =ğœ‚(last(ğœ‹,ğ‘ ,ğ‘¡),next(ğœ‹,ğ‘ ,ğ‘¡)))âˆˆ
Â¯ğ‘“(ğ‘¡).Intuitively,inthepre-processedtrace,ateverytimeinstant
ğ‘¡ğ‘–the value of signal ğ‘ is the interpolation between the last-seen
value and the next-seen value of ğ‘ atğ‘¡ğ‘–. Note that this definition is
compatible with the case in which signal ğ‘ is actually assigned a
valueğ‘£intherecordsampledattime ğ‘¡ğ‘–.Indeed,insuchacaseboth
function lastand function nextyieldğ‘£, and we have ğœ‚(ğ‘£,ğ‘£)=ğ‘£.
1009* *TraceEntry
simulationTime: DoubleRecord
signalID: String
value: Double
Figure 5: UML Class Diagram of the Trace Meta-model
Users can choose different interpolation functions (e.g., piecewise
constant,linear,cubic)dependingonthedomainofthevaluesof
the signals, and their expected variation over time. We discuss the
choice of the interpolation for our case study in section 7.
Beforedoingthisconversion,ourpre-processingstepalsoper-
formssomefilteringonthetrace.Atracecontainsrecordsformany
signals;however,apropertytobechecked onthetracemayrefer
to only a subset of these signals. Hence, we remove from the trace
all the entries that do not contain any record with a signal referred
to by the property to be checked.
6.2 Trace Meta-model
Our trace meta-model of the pre-processed trace is an extension
of the one proposed by Dou et al .[19], tailored to the CPS domain
tosupport(i)SBTPs and(ii)traceentriesrecordingthe valuesof
several signals at a certain time instant.
Thetracemeta-modelincludesthebasicentitiesthatareused
to represent a trace when a new instance is created from a tracefile. These entities are accessed by the OCL functions during the
model-driven trace checking step.
Themodel,depictedinFig.5withaUMLclassdiagram,contains
aTrace, which is composed of a sequence of Entrys. AEntryhas
anattributerepresentingthesimulationtimeatwhichtherecord
has been sampled, and contains one or more Records (one for
each signal). A Recordhastwoattributes,representingthesignal
identifier and its value.
6.3 Model-driven Trace Checking
Our model-driven trace checking procedure checks whether an
SB-TemPsy-DSLproperty ğœ™holdsoveratrace ğœ‹byevaluatingan
OCL constraint semantically equivalent to ğœ™over a model (i.e., an
instance of the trace meta-model described in section 6.2) of the
pre-processed trace Â¯ğœ‹(derived from ğœ‹). This check is done using a
standard OCL checker, such as Eclipse OCL.
Inputpreparationphase.First,ourapproach(1)buildsaninstance
Â¯ğœ‹objof the trace meta-model from the pre-processed trace Â¯ğœ‹and
(2) translates the property ğœ™into an OCL constraint ğœ™OCL. The
translation from SB-TemPsy-DSL properties to OCL constraints is
syntax-directed and covers all the constructs of SB-TemPsy-DSLdefined in figure 3. As an example, below we illustrate the OCL
function(showninfigure6)correspondingtothe oscillation pattern.
Thisfunctiontakesasinputatrace,anobjectrepresentingthe
parametersoftheoscillationpattern,andtheboundsofthetrace
interval on which the pattern should be evaluated. Notice that the
OCL variables tlandtucorrespond to the variables ğ‘¡ğ‘™andğ‘¡ğ‘¢used
inthedefinitionofthesemanticsoftheoscillationpatterninfig-
ure4.Thefunctionfirstsavesthevalueofthepatternparameter
s(signal name) in the corresponding variable s(line 2), which is
used inside the expression at lines 6â€“7. This expression encodesthe semantics of the pattern presented in figure 4. For instance,lines 3â€“5 constrain the existence of five trace entries el1,el2,el3,
el4andel5suchthattheyhaveconsecutivesimulationtimes.In
addition, lines 6â€“7 express the presence of consecutive maxima
and minima according to the semantics presented in figure 4. Func-
tions isLMinandisLMaximplement functions uni_sm_minand
uni_sm_maxdescribed in section 5.2. In addition, line 8 checks the
optional constraints (on the peak-to-peak amplitude and/or the
period) associated with the pattern.
Constraint evaluation phase. The second and final phase uses
the OCL checker to evaluate the constraint ğœ™OCLon the object
Â¯ğœ‹obj,denotedby eval(Â¯ğœ‹obj,ğœ™OCL).Theresultofthisevaluationisa
Boolean value that corresponds to the verdict of checking property
ğœ™overtrace ğœ‹.Moreformally,wehavethat ğœ‹|=ğœ‚ğœ™ifandonlyif
eval(Â¯ğœ‹obj,ğœ™OCL)yieldstrue.
Correctness. The correctness of our procedure (intuitively) fol-
lows from these observations. The semantics of SB-TemPsy-DSLpresented in section 5.2 depends on the interpolation function
selectedbytheuser.Moreprecisely,givenauser-selectedinterpola-
tion function ğœ‚, the semantics specifies that property ğœ™is satisfied
on traceğœ‹, i.e.,ğœ‹|=ğœ‚ğœ™, if the pre-processed Â¯ğœ‹trace obtained using
the interpolation function ğœ‚satisfies the property ğœ™, i.e.,Â¯ğœ‹|=ğœ™.
Since (i) the Â¯ğœ‹objobject is built from Â¯ğœ‹, which is obtained from
thepre-processingstepdescribedinsection6.1usingthe ğœ‚inter-
polation function, and (ii) the OCL constraint ğœ™OCLis obtained
fromğœ™withaone-to-onemappingfromtheformalsemanticsde-
fined in figure 4, our procedure is correct, i.e., the verdict returned
byourtrace-checkingprocedureisconsistentwiththesemantics
presented in Section 5.2.
Time complexity. The time complexity of our procedure depends
on the size of the trace and on the OCL definitions for the different
constructs of SB-TemPsy-DSL. The evaluation of constructs like
â€œconditionâ€, â€œpropertyâ€ and â€œabsolute scopeâ€ does not depend on
the size of the trace since â€œconditionâ€ is evaluated at a specific
timeinstant,â€œpropertyâ€isevaluatedatthefirsttimeinstant,and
â€œabsolutescopeâ€isevaluatedbysettingthevaluesofthetimebound
wherethepatternisevaluated.Theevaluationofthe assertvariant
of the â€œdata assertionâ€ construct is linear in the size of the trace.
The evaluation of all the other constructs is polynomial in the size
of the trace. For example, the encoding of the oscillation patternpresented in Listing 6 contains five nested existential operators,
leading to a procedure with a time complexity of O(|Â¯ğœ‹|5).
In light of these complexity results, we defined an alternative,
semantically equivalent OCL definition, which relies on an opti-mized usage of OCL collections, specialized for each construct.Morespecifically,theoptimizationreplacestheuseoffirst-order
quantifierswithcollectionoperations,inparticular iterateexpres-
sions. Thanks to these optimizations, the complexity of evaluating
theâ€œdataassertionâ€,â€œspikeâ€,â€œoscillationâ€,â€œrise/falltimeâ€,andâ€œover-
shoot/undershootâ€ patterns is linear in the size of the trace; the
complexityofevaluatingtheâ€œeventâ€scopeandâ€œorderrelationshipâ€
patternisstillpolynomialinthesizeofthetrace.Weusedthisal-
ternative OCL definition for our empirical investigation (section 7).
7 EVALUATION
In this section, we report on the evaluation of our contributions.First, we evaluate our specification language SB-TemPsy-DSL in
10101def: checkPatternOscillation(trace: OrderedSet (trace::TraceElement), pattern::Oscillation , tl: Real ,tu: Real ):Boolean =
2let s: String = pattern.s in
3trace-> exists (el1,el2| tl<= el1.simulationTime and el1.simulationTime < el2.simulationTime
4 trace-> exists (el3,el4| el2.simulationTime < el3.simulationTime and el3.simulationTime < el4.simulationTime
5 trace-> exists (el5 | el4.generationTime < el5.generationTime and el5.generationTime <=tu and
6 ( (isLMax(trace ,el2,el1,el3,s) and isLMin(trace,el3,el2,el4,s) and isLMax(trace,el4,el3,el5,s))
7 or(isLMin(trace,el2,el1,el3,s) and isLMax(trace,el3,el2,el4,s) and isLMin(trace,el4,el3,el5,s)))
8 and checkFeatures(trace,el1,el2,el3,el4,el5,pattern ))))
Figure 6: OCL function for the oscillation pattern of SB-TemPsy-DSL
terms of expressiveness, and compare with state-of-the-art spec-
ification languages. Second, we evaluate the performance of the
implementationofourmodel-driventracecheckingapproachSB-
TemPsy-Check,andcompareittoastate-of-the-arttoolfortrace
checkingofSBTPs.Inbothcases,aspropertiestoexpressandcheck,
we consider the requirements of our industrial case study (see sec-
tion 2). Summing up, we evaluated our contributions by answering
the following research questions:RQ1
To which extent can SB-TemPsy-DSL express requirements ofreal-world, industrial CPS applications and how does it com-pare with state-of-the-art specification languages in terms of
expressiveness? (section 7.1)
RQ2Can SB-TemPsy-Check verify SBTPs on real-world executiontraces within practical time and how does it compare with a
state-of-the-art tool? (section 7.2)
RQ1focusesonthe expressiveness ofSB-TemPsy-DSL,whereasRQ2
focusesonthe applicability (inindustrialsettings)ofSB-TemPsy-
Check.
7.1 Expressiveness of SB-TemPsy-DSL
To answer RQ1, we assessed the suitability of SB-TemPsy-DSL
for expressing the requirements of our industrial case study. Wealso triedto expressthe same requirements with state-of-the-art
specificationlanguagesforSBTPs,i.e.,STL[ 36]andSFO[ 4],and
compared the result with that of SB-TemPsy-DSL.
OBSW Requirements. We defined 101 requirements, expressed in
English,throughaseriesofmeetings(cumulativelylastingabout
80 hours) with a senior software engineer leading the development
of the OBSW. The engineer defined the requirements and also
validated the corresponding SB-TemPsy-DSL properties written by
two of the authors.
Results.Outofthese101requirements,wecouldexpress98inSB-
TemPsy-DSL.Inthevastmajorityofthecases,thetranslationfrom
English to SB-TemPsy-DSL was straightforward; only in two cases
we had to rephrase the original requirement into an equivalent
form that could then be mapped to SB-TemPsy-DSL. Out of the
threerequirementsthatwecouldnotexpressinSB-TemPsy-DSL,
two were constraints on the number of occurrences of a certainsignal pattern (e.g., spike behavior) and would have required acounting/aggregate operator [
45]; the other requirement was a
constraint on the signal value in two consecutive time instants,
which would have required a modality for referring to the value of
asignalinaprevioustimeinstant.WeplantoextendSB-TemPsy-
DSL with these constructs as part of future work.
Table2showstheoccurrencesofthevariousscopes(left-hand
side)andpatterns(right-handside)ofSB-TemPsy-DSLacrosstherequirementsofourcasestudy.Thepatterndistributionisinline
with the findings of a recent taxonomy of SBTP [ 11], in which
data assertion ( assertpattern in SB-TemPsy-DSL) is the most
represented pattern type, followed by the order relationship ( if
theninSB-TemPsy-DSL).The globally andatscopesarethemost
used; we observed they are usually combined with data assertions
to specify invariants that should hold during the entire simulation
and conditions that should hold at specific time instants.
Using state-of-the-art specification languages, out of the 101
requirements,wecouldexpress59inSTLand101inSFO.Thelower
numberofrequirementsexpressibleinSTLisduetothelackofa
modality that allows for referring to (and comparing) signal values
at different time instants. Such a modality would be required to
specifyspike,oscillation,rise/falltime,andovershoot/undershoot
patterns.Ontheotherhand,STLcanexpressdataassertionsand
alsoorderrelationshipproperties,wheninthelattertheâ€œcauseâ€and
â€œeffectâ€ sub-properties are data assertions (as it was the case in our
case study) or (recursively) other order relationship sub-properties.
SFOallowsustoexpressall101requirements,thankstoitssupport
for first-order quantification. Theseexpressiveness results for STL
andSFOareinlinewithpreviousfindings[ 11],whichassessedthe
expressiveness of STL and SFO (and STL*) with respect to different
types of SBTPs.
The answer to RQ1 is that, when using SB-TemPsy-DSL, we
could express 98 out of 101 requirements of a real-world, indus-trial system in the satellite domain. This result shows the highexpressiveness of SB-TemPsy-DSL for specifying SBTPs of CPS.
When compared with state-of-the-art logic-based specification lan-
guages,SB-TemPsy-DSLcouldexpressmanymorerequirements
thanSTL,sinceSTLcannotexpressspike,oscillation,rise/falltime,
and overshoot/undershoot patterns. Nevertheless, SB-TemPsy-DSL
is slightly less expressive than SFO (98 vs. 101). However, thereis no tool support for SFO trace-checking. While we could have
implemented such a tool, it would have likely exhibited low perfor-
mancesincethetimecomplexityoftrace-checkingSFOformulae
is exponential in the number of quantifiers, function symbols and
length of the SFO formula, as well as in the length ofthe trace [ 4].
Ontheotherhand,asdiscussedinsection6,thetimecomplexity
of the trace-checking procedure for SB-TemPsy-DSL is polynomial
inthelengthofthetracefortheâ€œorderrelationshipâ€patternand
theâ€œeventâ€scope,andislinearinallothercases.Suchalowertime
complexity is likely to result in wider applicability in industrial
contexts;wewillexperimentallyinvestigatetheperformanceofour
trace checking approach for SB-TemPsy-DSL in the next section.
1011Table2:OccurrencesoftheSB-TemPsy-DSLscopes(left)and
patterns (right) in the requirements of the case study
Scope Type #Req
globally 74
before 1
after 9
at 28
between 9Pattern Type #Req Pattern Type #Req
assert 91 rises 3
becomes 9 falls 7
if then 31 overshoots 3
oscillations 24 undershoots 5
spike 3
7.2 Applicability of SB-TemPsy-Check
To answer RQ2, we assessed the applicability of SB-TemPsy-Check
on execution traces from our industrial case study. Furthermore,
we also comparedâ€”in terms of applicability of the trace check-
ing procedureâ€”SB-TemPsy-Check with Breach [ 17], a state-of-the-
art (offline) trace checking tool for SBTPs expressed in STL. We
choseBreachamongothersimilartoolslistedinarecentsurvey[ 5]
(i.e., AMT[ 42] andS-TaLiRo[ 1]), becauseAMT 2.0,in contrastto
Breach, is not publicly available, and also because Breach has been
shown [17] to be faster than S-TaLiRo.
Dataset.Our dataset consists of 18 traces provided by our indus-
trial partner. These traces have been obtained by simulating the
behavioroftheOBSWindifferentscenarios,withasimulationtime
rangingapproximatelyfromonehourto 18h.Theirsize(innumber
of entries) ranges from 41844 to 1202241 entries ( avg=389771,
StdDev=393718);thecorrespondingfilesizerangesfrom â‰ˆ1.7MB
toâ‰ˆ58.9MB (avgâ‰ˆ17.6MB,StdDevâ‰ˆ19.4MB).
Methodologyandsettings. Ourdatasetcontainstracesrecorded
while a satellite system was tested in different environmental con-
ditions (see section 2); the entries in each trace contain only sig-nals whose behavior was relevant to the specific test performed.
Consequently,foreachtraceinthedataset,ourindustrialpartner
indicated which properties had to be checked, based on the signals
recordedinthetraceandthesignalsreferredtointheproperties.
Overall, we ran SB-TemPsy-Check over 217 distinct combinations3
of traces and properties.
Thefinaltracesize(innumberofentries)rangedfrom12to13068
entries (avg=6187,StdDev=4456); the corresponding file size
ranged from â‰ˆ255Bt oâ‰ˆ4.7 MB (avgâ‰ˆ0.4MB,StdDevâ‰ˆ0.8MB).
WeconfiguredSB-TemPsy-Checktouse linearinterpolation as
interpolation function for the pre-processing step (see section 6.1).
We chose this function since it is relatively simple and produces
reasonablygoodapproximationsofthesignalbehavior,suitablefor
checking typical SBTPs (e.g., oscillation, spike).
AsforthecomparisonwithBreach,weusedversion1.7(installed
onMatlabversion2018a)andonlyranthetoolforthe59properties
that could be expressed both in SB-TemPsy-DSL and in STL (see
section 7.1). Overall, we ran Breach over 110 distinct combinations
of traces and properties.
Wecarriedouttheexperimentsononenode(usingfourcores)
of the HPC facilities of the University of Luxembourg [ 48]. Each
run(checkingadistinctcombinationofatraceandaproperty)was
repeated 10 times, to account for variations in the performance of
theHPC.Wesetthetimeoutofeachrunto 2h,whichisarelatively
shortandpracticaltimewhencomparedtothetime(intheorder
3We also removed 13 combinations in which the trace had less than 10 entries.ofseveraldays)takenbythe OBSWsimulatortogenerateatrace
inourdataset(seesection2).Thetotalwall-clocktimetorunallthe experiments was
â‰ˆ12 days, reduced to about three days by
exploitingtheparallelizationmechanismsoftheunderlyingHPC
infrastructure.
In total, we measured the execution time over 2170 runs for
SB-TemPsy-Checkandover1100runsforBreach.Theexecution
timeofSB-TemPsy-CheckwasmeasuredusingtheUnix timeutility
forthepre-processingstepandthe System.currentTimeMillis()
method(fromtheJavalibrary)fortheinvocationoftheOCLchecker;
the execution time of Breach was measured using the ticandtoc
functions of the stopwatch timer integrated within Matlab.
Results.SB-TemPsy-Checkyieldedaverdictwithinthetimeoutin
â‰ˆ87%oftheruns(1884outof2170).Onaverage,SB-TemPsy-Check
took5.98s(min=0.35s,max=103s)for thepre-processing and
48.7s(min=0.18s,max=7076.8s)forthetracecheckingthrough
the OCL solver. Overall, SB-TemPsy-Check took less than 10sto
check properties (i) whose pattern is different from â€œorder relation-
shipâ€, and (ii) whose scope is of type â€œabsoluteâ€; such properties
account for â‰ˆ99% of the completed runs (1870 out of 1884).
Intheremaining286runs( â‰ˆ13%)inwhichSB-TemPsy-Check
didnotfinishwithinthetimeout,thepropertytobeverifiedcon-
tainedeitheraninstanceoftheâ€œorderrelationshipâ€patternoran
â€œeventâ€scope.Asdiscussedinsection6.3,checkingthesetypesof
propertieshasatimecomplexitythatispolynomialinthelength
of the trace. We remark that SB-TemPsy-Check was still able toreturn a verdict in 14 out of the 300 runs in which the propertycontained the aforementioned pattern type or scope type; in all
thesecases,thetracedidviolatethepropertyandtheviolationwas
found before the timeout.
Asforthe1100runsthatcheckedoneofthe59propertiesthat
couldbeexpressedbothinSB-TemPsy-DSLandinSTL(andthus
could be checked by Breach), Breach finished within the time-out in 100% of the runs, with an average execution time of
0.01s
(min=0.006s,max=0.15s); SB-TemPsy-Check finished within
the timeout in â‰ˆ97% of the runs (1064 out of 1100). For these
runs, SB-TemPsy-Check took on average 85.28s(min=0.18s,
max=7076.8s). For the remaining â‰ˆ3% of the runs in which
SB-TemPsy-Checkdidnotfinishwithinthetimeout, theproperty
tobecheckedcontainedanâ€œorderrelationshipâ€pattern;thesame
observationsmadeaboveaboutthecomplexityofcheckingsuch
properties apply also here.
In terms of execution time, when considering the â‰ˆ97% runs in
whichbothSB-TemPsy-CheckandBreachterminatedwithinthe
timeout, though SB-TemPsy-Check was slower than Breach, it was
able to yield a verdict within 10sfor all the properties (i) whose
patternisdifferentfromâ€œorderrelationshipâ€,and(ii)whosescopeis
of type â€œabsoluteâ€; such properties account for the vast majority of
thecompletedruns(1050outof1064, â‰ˆ99%).Thiscostisreasonable
giventhatSB-TemPsy-Checksupportstheverificationofamuch
larger set of property types than Breach.
Summingup,theanswertoRQ2isthat,in87%oftherunsSB-
TemPsy-Check could complete within practical time limits (i.e.,
thetimeoutdeterminedbasedonthedevelopmentcontextofour
casestudy)theverificationofSBTPs(expressedinSB-TemPsy-DSL)
over industrial traces, with an average checking time of 48.7s.W e
deemthistimetobereasonableforpracticalapplications,sinceitis
1012ordersofmagnitudelowerthanthetimeneededforsimulationand
tracegeneration(asdiscussedinsection2).Inotherwords,itallows
engineerstointegrateSB-TemPsy-Checkwithinthedevelopment
processatanegligiblecost.Furthermore,thoughSB-TemPsy-Check
wasslowerthanBreach,itwasalwaysabletoyieldaverdictwithin
10sinâ‰ˆ99%ofthecases,despitesupportingtheverificationofa
much larger set of property types.
7.3 Discussion and Threats to Validity
The results of our empirical investigation show that SB-TemPsy
representsaviabletrade-offbetweenanexpressivespecificationlan-
guage for SBTPs (SB-TemPsy-DSL) and an efficient trace-checking
procedure(SB-TemPsy-Check).UsingSB-TemPsy-DSL,wecould
express98outof101requirementsofanindustry-gradeCPS.SB-
TemPsy-DSL was considerably more expressive than STL, which is
atemporallogicforSBTPssupportedbypubliclyavailabletrace-
checkingtools.Furthermore,SB-TemPsy-Checkcompletedtheveri-ficationoftheserequirementsonreal-worldexecutiontraceswithinpracticaltimelimits(determinedbasedonthedevelopmentcontext
of our case study) in â‰ˆ87% of the runs. This also confirms our
conjecture that a model-driven approach is a viable solution for
trace checking of SBTPs.
SupportinganexpressivespecificationlanguagelikeSB-TemPsy-
DSL comes with a performance loss in terms of the trace checking
procedure. For the 59 requirements of our case study that couldbe expressed in STL, in
â‰ˆ97% of the runs in which SB-TemPsy-
Check terminated, it was slower than Breach but it was able to
yield a verdict within 10sforâ‰ˆ99% of the cases. Furthermore, dif-
ferently from SB-TemPsy-Check, Breach always terminated within
the timeout.
Basedon theaboveobservations, takingadvantageof thecom-
plementary strengths of both approaches, we propose to combine
SB-TemPsyandBreach.SB-TemPsy-DSLpropertiesthatcanalsobeexpressedinSTL(i.e.,logicalexpressionsofdataassertions)should
becheckedwithBreach,sinceityieldsbetterperformance.More
complex SBTPs (which cannot be expressed in STL) should thenbe checked with SB-TemPsy-Check, since it is the only tool that
canefficientlyverifythem.Overall,thiscomplementaryusageof
the two verification tools would significantly reduce the execution
time and number of timeouts of the trace checking procedure.
Asmentionedin Section 6.3,althoughourmodel-driventrace
checkingapproachiscorrect,theinterpolationfunctionusedinthepre-processingstepinfluencestheverdictsreturnedbySB-TemPsy-
CheckandBreach.Inpracticalscenarios,engineersmaywantto
consider different interpolations functions depending on the ex-pected signalsâ€™ behaviors. For this reason, we plan to (i) provideadditional interpolation functions, and (ii) allow the selection ofa different interpolation function for each signal. Engineers can
thenchoosetheinterpolationfunctionbasedonthetypeandthe
domainofthesignal,andontheirdomainknowledge.Sincesignals
usually represent the state either of some CPS software compo-
nentsoroftheirenvironment,engineersusuallyhaveaprecise,yetintuitive,understandingofhowthesesignalswillchangeovertime.
Therefore,theycaneasilyselectthemostappropriateinterpolation
function given their usage scenario.Threats to validity. In our evaluation, we used a set of require-
mentsandtracescomingfromoneindustrialcasestudyfromthe
satellite domain. Though the targeted system and requirementsare in many ways representative of what can be found in satel-
liteand othercyber-physicaldomainsâ€”wherethe behaviorbeing
controlled involves convoluted physical dynamics and the system
requirementsareexpressedascomplexSBTPsâ€”thiscouldinfluence
the generalization of our results.
Another threat to the validity of the evaluation results is the
presence of coding errors in the implementation of SB-TemPsy-
Check. We tried to mitigate it by thoroughly testing the tool.
Data availability. The supplementary material accompanying
this work is available at https://github.com/SNTSVV/SB-TemPsy.
8 RELATED WORK
Ourapproachisrelatedtoworkdoneintheareasof(i)specification
languagesforSBTPs,(ii)trace-checkingmethods,and(iii)model-
driven approaches for trace checking.
Specification languages. STL [36] has been one of the first logic-
based languages proposed for specifying SBTPs. STL* [ 12]i sa n
extension of STL with the signal-value freezing operator, whichbinds the value of a signal at a precise time instant. SFO [
4]i sa
first-order temporal logic for signals. Boufaied et al .[11]compared
the expressiveness of STL, STL*, and SFO analytically, based on
different formulations of the main types of SBTPs (see section 3.2);
incontrast,wehaveempiricallycomparedtheexpressivenessofSB-
TemPsy-DSL,STLandSFOaspartofourevaluation(section7.1),us-
ingpropertiesfromarepresentativeindustrialcasestudy.BakhirkinandBasset
[3]proposedanextensionofSTLwith(i)anewformof
untiloperator,(ii)supportforcomputableaggregatefunctionovera
sliding window, and (iii) formulae having the possibility of produc-
ing and manipulating real-valued output signals. These extensions
givethepossibilityofexpressingsomeSBTPpatterns(e.g.,stabiliza-tion, maximum/minimum value, linear increase, spike) without theneed for more expressing languages like STL* or SFO. Menghi et al
.
[38]haverecentlyproposedRFOL,alogicthatismoreexpressive
than STL and less expressive than SFO. We did not consider RFOL
since this work is focused on offline trace-checking, whereas RFOL
is supported by an online trace checker. SB-TemPsy-DSL is also
relatedtootherDSLsforexpressingtemporalproperties,suchas
PROPEL-DNL[ 47],StructuredEnglishGrammarforreal-timespec-
ifications [ 33], Temporal OCL [ 32], OCLR [ 18], VISPEC - graphical
formalism [ 31], TemPsy [ 19], SpeAR [ 28], TemPsy-AG [ 10], Pro-
MoboBox - property language [ 39], FRETISH [ 29]. The majority
of them is based on some property specification patterns [ 2,21];
noneofthemsupportSBTPs.Thecontractlanguageproposedby
Bernaerts et al . [7]is the closest to SB-TemPsy-DSL, since it is
pattern-based and has been developed for the CPS domain; how-
ever, it supports only STL-like properties, and thus cannot express
more complex behaviors such as spikes and oscillations.
SB-TemPsy-DSL supports the main types of SBTPs identified in
Boufaiedetal .[11]â€™staxonomy,whichalsoprovidesaformalization
of the properties in SFO. For SB-TemPsy, we have refined sucha formalization since our goal was to develop a trace-checkingprocedure for SB-TemPsy-DSL properties, rather than providinga mere formalization in a temporal logic. For example, our OCL
1013definitionoftheSB-TemPsy-DSLsemanticsusesdifferentpredicates
for determining the local extrema (see table 1), since they are more
appropriate (by requiring the signal value to change according to a
unimodalfunction)tomodelthesignalbehaviorinthecontextof
trace checking.
Trace-checking methods and tools. Among the temporal logics
for SBTPs discussed above, STL is supported by tools (such as
AMT[42],Breach[ 16],andS-Taliro[ 1])forofflinetracechecking;a
toolisalsoavailablefortheSTLextensionproposedin[ 3].Notools
are available for STL* and SFO. RFOL is supported by an online
trace-checking procedure (SOCRaTEs [ 38]). The contract language
proposed by Bernaerts et al . [7]is translated into STL and then
relies on Breach for verification.
Model-drivenapproachesfortracechecking.Model-driventrace
checkinghasbeenoriginallyproposedbyDouetal .[19]forthever-
ification of simple temporal properties. Dou et al .â€™s work has been
extended by Boufaied et al . [10]to support service provisioning
specificationpatterns[ 8,9]usingaggregateoperators.Inthiswork
wehaveappliedDouetal .â€™sideaofmodel-driventracecheckingin
the context of SBTP through the development of the SB-TemPsy
approach. The main differences with Dou et al. [19] are:
(i)TheSB-TemPsy-DSLlanguagehasconstructsspecifictothe
domain of SBTP, based on the property types proposed in
a recent taxonomy [ 11]; also, the scope operators, though
inspiredbyDwyeretal .[21]â€™swork,havebeentailoredtothe
domainofSBTP(e.g.,tosupportabsolutetimeinstants).On
theotherhand,theTemPsylanguage[ 19](anditspredecessor
OCLR[18])areonlybasedonDwyeretal .[21]â€™sspecification
patterns (and thus do not support SBTPs).
(ii)SB-TemPsy-Checkincludesapre-processingstep,todealwith
trace entrieswith missingsignal valuesand recordedbothat
fixed and at variable sampling rates.
(iii)SB-TemPsy-Checksportsanimprovedtracemeta-model,to
supporttraceentriesrecordingthevaluesofseveralsignalsat
a certain time instant.
(iv)ThemappingofthesemanticsofSB-TemPsy-DSLintoOCL
constraints is completely new, since it is based on the seman-
tics presented in section 5.2.
Tothebestofourknowledge,SB-TemPsyisthefirstapproachto
provide model-driven trace checking of SBTPs.
9 CONCLUSION AND FUTURE WORK
In this paper, we propose SB-TemPsy, a model-driven approach for
checkingsignal-basedtemporalproperties(SBTPs)onexecutiontraces of CPSs. SB-TemPsy includes SB-TemPsy-DSL, a domain-
specificlanguageforspecifyingSBTPsthatcoverthemostfrequent
requirement types in CPSs, and SB-TemPsy-Check, an efficient
trace-checking procedure that reduces the problem of checking an
SB-TemPsy-DSL property over a trace to the problem of evaluating
an OCL constraint on a model of the trace.
We evaluated SB-TemPsy by assessing the expressiveness of
SB-TemPsy-DSL and the applicability of SB-TemPsy-Check to a
representativeCPSinthesatellitedomain.Theresultsofourempir-icalinvestigationshowthatourapproachâ€”whencompared,fromapracticalstandpoint,tostate-of-the-artalternativesâ€”strikesabetter
trade-offbetweenexpressivenessandperformanceasitsupportsa much larger set of property types that can be checked, in mostcases, within practical time limits. Moreover, the results suggest
thatSB-TemPsycouldbecombinedwithexistingapproacheseffi-
cientlysupportingSTL.Inthisway,weshowwecanmakeoptimal
useofagivenverificationbudgetwhileavoidingmosttime-outsby relying on the best tool option depending on the type of the
checked property.
As part of future work, we plan to extend SB-TemPsy-DSL with
additional constructs, based on the expressiveness results of our
evaluation. Furthermore, we are going to develop alternative OCL
definitionsinSB-TemPsy-Check,optimizedtominimizethenumber
oftime-outswhencheckingspecifictypesofproperties.Also,we
plantoinvestigatehowdifferentimplementationsofSB-TemPsy-
Check (e.g., using an SMT-based encoding or another type of logic-
basedencodingrelyingontoolslikeR2U2[ 40])farewithrespect
to the one based on OCL. Finally, we plan to extend the output
returnedbySB-TemPsy-Checkincaseofviolationswithdiagnostic
information, inspired by existing work [20, 27].
ACKNOWLEDGMENTS
ThisworkhasreceivedfundingfromtheEuropeanResearchCoun-
cil under the European Unionâ€™s Horizon 2020 research and inno-
vation programme (grant agreement No 694277), from the Natural
Sciences and Engineering Research Council of Canada (NSERC)
undertheDiscoveryandCRCprograms,andfromtheUniversity
of Luxembourg (grant â€œMOVIDAâ€).
The experiments presented in this paper were carried out us-
ingtheHPCfacilitiesoftheUniversityofLuxembourg[ 48]â€”see
hpc.uni.lu.
The authors would also like to thank the anonymous referees
for their valuable comments and helpful suggestions.
REFERENCES
[1]Yashwanth Annpureddy, Che Liu, Georgios Fainekos, and Sriram Sankara-
narayanan. 2011. S-taliro: A tool for temporal logic falsification for hybrid
systems. In Proc. TACAS 2011. Springer, Berlin, Heidelberg, 254â€“257.
[2]Marco Autili, Lars Grunske, Markus Lumpe, Patrizio Pelliccione, and Antony
Tang.2015. AligningQualitative,Real-Time,andProbabilisticPropertySpecifi-
cation Patterns Using a Structured English Grammar. IEEE Trans. Softw. Eng. 41,
7 (2015), 620â€“638.
[3]AlexeyBakhirkinandNicolasBasset.2019. Specificationandefficientmonitoring
beyond STL. In Proc. TACAS 2019. Springer, Cham, 79â€“97.
[4]AlexeyBakhirkin, ThomasFerrÃ¨re,Thomas A.Henzinger, andDejanNiÄkoviÄ‡.
2018. TheFirst-orderLogicofSignals:Keynote.In Proc.EMSOFT2018.IEEEPress,
Los Alamitos, CA, USA, 1:1â€“1:10.
[5]Ezio Bartocci, Jyotirmoy Deshmukh, Alexandre DonzÃ©, Georgios Fainekos, Oded
Maler, Dejan NiÄkoviÄ‡, and Sriram Sankaranarayanan. 2018. Specification-based
monitoringofcyber-physicalsystems:asurveyontheory,toolsandapplications.
InLectures on Runtime Verification. Springer, Cham, 135â€“175.
[6]EzioBartocci,YliÃ¨sFalcone,AdrianFrancalanza,andGilesReger.2018. Introduc-
tiontoRuntimeVerification. In LecturesonRuntimeVerification-Introductory
and Advanced Topics. LNCS, Vol. 10457. Springer, Cham, Switzerland, 1â€“33.
[7]M.Bernaerts,B.Oakes,K.Vanherpen,B.Aelvoet,H.Vangheluwe,andJ.Denil.
2019. ValidatingIndustrialRequirementswithaContract-BasedApproach.In
Proc. MODELS 2019 (Companion)). IEEE, Los Alamitos, CA, USA, 18â€“27.
[8]Domenico Bianculli, Carlo Ghezzi, Cesare Pautasso, and Patrick Senti. 2012.
Specificationpatternsfromresearchtoindustry:acasestudyinservice-based
applications. In Proc. ICSE2012. IEEE, Los Alamitos, CA, USA, 968â€“976.
[9]Domenico Bianculli, Carlo Ghezzi, and Pierluigi San Pietro. 2013. The Tale ofSOLOIST: a Specification Language for Service Compositions Interactions. In
Proc. FACSâ€™12 (LNCS), Vol. 7684. Springer, Heidelberg, Germany, 55â€“72.
[10]Chaima Boufaied, Domenico Bianculli, and Lionel C. Briand. 2019. A Model-
drivenApproachtoTraceCheckingofTemporalPropertieswithAggregations.
JournalofObjectTechnology 18,2(2019),15:1â€“15:21. https://doi.org/ 10.5381/
jot.2019.18.2.a15
1014[11]ChaimaBoufaied,MarisJukss,DomenicoBianculli,LionelClaudeBriand,and
YagoIsasiParache.2019. Signal-BasedProperties:TaxonomyandLogic-based
Characterization. CoRRabs/1910.08330 (2019), 1â€“39. arXiv:1910.08330 http:
//arxiv.org/abs/ 1910.08330
[12]Lubos Brim, Petr DluhoÅ¡, David Å afrÃ¡nek, and Tomas Vejpustek. 2014. STL âˆ—:
Extending signal temporal logic with signal-value freezing operator. Information
and computation 236 (2014), 52â€“67.
[13]Kalou Cabrera Castillos, FrÃ©dÃ©ric Dadeau, Jacques Julliand, Bilal Kanso, and
Safouan Taha. 2013. A compositional automata-based semantics for property
patterns. In Proc. iFM 2013. Springer, Heidelberg, 316â€“330.
[14]Christoph Czepa, Amirali Amiri, Evangelos Ntentos, and Uwe Zdun. 2019.Modeling compliance specifications in linear temporal logic, event process-ing language and property specification patterns: a controlled experiment onunderstandability. Software and Systems Modeling 18, 6 (2019), 3331â€“3371.
https://doi.org/ 10.1007/s10270-019-00721-4
[15]C.CzepaandU.Zdun.2018. OntheUnderstandabilityofTemporalProperties
Formalized in Linear Temporal Logic, Property Specification Patterns and Event
Processing Language. IEEE Trans. Softw. Eng. 46 (2018), 1â€“13. doi: 10.1109/TSE.
2018.2859926.
[16]AlexandreDonzÃ©.2010.Breach,atoolboxforverificationandparametersynthesis
of hybrid systems. In Proc. CAV2010. Springer, Berlin, Heidelberg, 167â€“170.
[17]Alexandre DonzÃ©, Thomas FerrÃ¨re, and Oded Maler. 2013. Efficient Robust
Monitoring for STL. In Proc. CAV 2013. Springer, Berlin, Heidelberg, 264â€“279.
[18]WeiDou,DomenicoBianculli,andLionelBriand.2014. OCLR:aMoreExpressive,Pattern-basedTemporalExtensionofOCL.In Proc.ECMFA2014(LNCS),Vol.8569.
Springer, Heidelberg, Germany, 51â€“66.
[19]WeiDou,DomenicoBianculli,andLionelBriand.2017.AModel-DrivenApproach
to Trace Checkingof Pattern-based Temporal Properties. In Proc. MODELS2017.
IEEE Computer Society, Los Alamitos, CA, USA, 323â€“333.
[20]Wei Dou, Domenico Bianculli, and Lionel Briand. 2018. Model-Driven TraceDiagnostics for Pattern-based Temporal Specifications. In Proc. MODELS 2018.
ACM,NewYork,NY,USA,278â€“288. https://doi.org/ 10.1145/3239372.3239396
[21]Matthew B.Dwyer, GeorgeS. Avrunin,and JamesC. Corbett.1999. Patternsin
propertyspecificationsforfinite-stateverification.In Proc.ICSEâ€™99.ACM,New
York, NY, USA, 411â€“420.
[22]Eclipse. 2020. Eclipse OCL Tools. https://projects.eclipse.org/projects/modeling.
mdt.ocl.
[23]ESA. 2020. Building and testing spacecraft. https://www.esa.int/Science_
Exploration/Space_Science/Building_and_testing_spacecraft
[24] ESA 2020. The European Space Agency (ESA). https://www.esa.int/[25] exactEarth 2020. exactEarth. https://www.exactearth.com/[26]
YliÃ¨s Falcone, Srdan Krstic, Giles Reger, and Dmitriy Traytel. 2018. A Taxonomy
for Classifying Runtime Verification Tools. In Proc. RV 2018 (Lecture Notes in
Computer Science), Vol. 11237. Springer, Cham, 241â€“262.
[27]ThomasFerrÃ¨re,OdedMaler,andDejanNiÄkoviÄ‡.2015. TraceDiagnosticsUsing
TemporalImplicants.In Proc.ATVA2015 (LNCS),Vol.9364.SpringerInternational
Publishing, Cham, 241â€“258.
[28]AaronW.Fifarek,LucasG.Wagner,JonathanA.Hoffman,BenjaminD.Rodes,
M. Anthony Aiello, and Jennifer A. Davis. 2017. SpeAR v2.0: Formalized PastLTL Specification and Analysis of Requirements. In Proc. NFM 2017. Springer
International Publishing, Cham, 420â€“426.
[29]Dimitra Giannakopoulou, Thomas Pressburger, Anastasia Mavridou, and Johann
Schumann.2020. GenerationofFormalRequirementsfromStructuredNatural
Language. In Proc. REFSQ 2020. Springer International Publishing, Cham, 19â€“35.
[30]K. Havelund, D. Peled, and D. Ulus. 2017. First order temporal logic monitoring
with BDDs. In Proc. FMCAD 2017. IEEE, Los Alamitos, CA, USA, 116â€“123.
[31]Bardh Hoxha, Nikolaos Mavridis, and Georgios Fainekos. 2015. VISPEC: A
graphicaltoolforelicitationofMTLrequirements.In Proc.IROS2015.IEEE,Los
Alamitos, CA, USA, 3486â€“3492.
[32]BilalKansoandSafouanTaha.2013. TemporalConstraintSupportforOCL.In
Proc. SLE 2012 (LNCS), Vol. 7745. Springer, Berlin, Heidelberg, 83â€“103.
[33]Sascha Konrad and Betty H. C. Cheng. 2005. Real-time specification patterns. In
Proc. ICSE â€™05. ACM, New York, NY, USA, 372â€“381.
[34]Jianwen Li, Moshe Y Vardi, and Kristin Y Rozier. 2019. Satisfiability checking for
mission-time LTL. In Proc. CAV2019. Springer, Cham, 3â€“22.
[35] Luxspace 2020. Luxspace. https://luxspace.lu/[36]
OdedMalerandDejanNickovic.2004. Monitoringtemporalpropertiesofcon-
tinuous signals. In Formal Techniques, Modelling and Analysis of Timed and
Fault-Tolerant Systems. Springer, Berlin, Heidelberg, 152â€“166.
[37]Claudio Menghi, Shiva Nejati, Lionel C. Briand, and Parache Yago Isasi. 2020.
Approximation-RefinementTestingofCompute-IntensiveCyber-PhysicalMod-
els: An Approach Based on System Identification. In Proc. ICSE 2020. ACM, New
York, NY, USA, 1â€“12.
[38]Claudio Menghi, Shiva Nejati, Khouloud Gaaloul, and Lionel C. Briand. 2019.
Generating Automatedand OnlineTest Oracles forSimulink Modelswith Con-
tinuousandUncertainBehaviors.In Proc.ESEC/FSE2019.ACM,NewYork,NY,
USA, 27â€“38.[39]B.Meyers,H.Vangheluwe,J.Denil,andR.Salay.2020.AFrameworkforTemporal
Verification Support in Domain-Specific Modelling. IEEE Trans. Softw. Eng. 46, 4
(2020), 362â€“404.
[40]Patrick Moosbrugger, Kristin Y. Rozier, and Johann Schumann. 2017. R2U2:Monitoring and Diagnosis of Security Threats for Unmanned Aerial Systems.
FormalMethodsinSystemDesign 51(April2017),31â€“61. https://doi.org/ 10.1007/
s10703-017-0275-x
[41]Shiva Nejati, Khouloud Gaaloul, Claudio Menghi, Lionel C. Briand, StephenFoster, and David Wolfe. 2019. Evaluating model testing and model checking
forfindingrequirementsviolationsinSimulinkmodels.In Proc.ESEC/FSE2019.
ACM, New York, NY, USA, 1015â€“1025.
[42]Dejan NiÄkoviÄ‡, Olivier Lebeltel, Oded Maler, Thomas FerrÃ¨re, and Dogan Ulus.
2018. AMT2.0:QualitativeandQuantitativeTraceAnalysiswithExtendedSignal
Temporal Logic.In Proc.TACAS2018.Springer InternationalPublishing, Cham,
303â€“319.
[43]OMG.2012. ISO/IEC19507(OCLv2.3.1). http://www.omg.org/spec/OCL/ISO/
19507/PDF.
[44]Yago Isasi Parache, Aleix Pinardell, Antonio MÃ¡rquez, Christophe Molon-Noblot,
Alexander Wagner, Marc Gales, and Miroslav Brada. 2019. The ESAIL Multi-
purposeSimulator. PosterattheWorkshoponSimulationandEGSEforSpace
Programmes (SESP 2019).
[45]Nicolas Rapin. 2016. Reactive Property Monitoring of Hybrid Systems with
Aggregation. In Proc. RV2016 (LNCS), Vol. 10012. Springer, Cham, 447â€“453.
[46]CÃ©sar SÃ¡nchez, Gerardo Schneider, Wolfgang Ahrendt, Ezio Bartocci, Domenico
Bianculli,ChristianColombo,YliÃ¨sFalcone,AdrianFrancalanza,SrdanKrstic,
JoÃ£oM.LourenÃ§o,DejanNickovic,GordonJ.Pace,JosÃ©Rufino,JulienSignoles,
Dmitriy Traytel, and Alexander Weiss. 2019. A survey of challenges for runtime
verification from advanced application domains (beyond software). Formal
MethodsSyst.Des. 54,3(2019),279â€“335. https://doi.org/ 10.1007/s10703-019-
00337-w
[47]R. L. Smith, G. S. Avrunin, L. A. Clarke, and L. J. Osterweil. 2002. PROPEL: an
approach supporting property elucidation. In Pro. ICSE 2002. IEEE, Los Alamitos,
CA, USA, 11â€“21.
[48]S.Varrette,P.Bouvry,H.Cartiaux,andF.Georgatos.2014. Managementofan
AcademicHPCCluster:TheULExperience.In Proc.ofthe2014Intl.Conf.onHigh
Performance Computing & Simulation (HPCS 2014). IEEE, Los Alamitos, CA, USA,
959â€“967.
1015