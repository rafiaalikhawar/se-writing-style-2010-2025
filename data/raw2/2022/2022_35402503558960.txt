Sometimes YouHavetoTreattheSymptoms: Tackling Model
Driftin an Industrial Clone-and-Own SoftwareProductLine
Christof Tinnes
Siemens AGśTechnology, München,
GermanyWolfgang Rössler
Siemens Mobility GmbH, München,
GermanyUwe Hohenstein
Siemens AGśTechnology, München,
Germany
TorstenKühn
Siemens Mobility GmbH, München,
GermanyAndreasBiesdorf
Siemens AGśTechnology, München,
GermanySvenApel
SaarlandUniversity, Informatics
Campus, Saarbrücken, Germany
ABSTRACT
Many industrial software product lines use a clone-and-own ap-
proachforreuseamongsoftwareproducts.Asaresult,thedifferent
productsintheproductlinemay driftapart ,whichimpliesincreased
efforts for tasks such as change propagation, domain analysis, and
qualityassurance.Whilemanysolutionshavebeenproposedinthe
literature,theseareoftendifficulttoapplyinareal-worldsetting.
Westudythisdriftofproductsinaconcretelarge-scaleindustrial
model-driven clone-and-own software product line in the railway
domain at our industry partner. For this purpose, we conducted in-
terviewsandasurvey,andweinvestigatedthemodelsinthemodel
historyof thisproject. We foundthat increasedefforts are mainly
caused by large model differences and increased communication
efforts. We argue that, in the short-term, treating the symptoms
(i.e., handling large model differences)can helpto keep effortsfor
software product-line engineering acceptable Ð instead of employ-
ingsophisticatedvariabilitymanagement.Totreatthesymptoms,
weemployasolutionbasedonsemantic-liftingtosimplifymodel
differences.Usingtheinterviewsandthesurvey,weevaluatethe
feasibility of variability management approaches and the semantic-
liftingapproach in the context ofthis project.
CCSCONCEPTS
·Softwareanditsengineering →Softwaredevelopmentmeth-
ods;Software product lines ;Software configuration manage-
mentand versioncontrol systems .
KEYWORDS
model-driven engineering, software evolution, software product
lines
ACM ReferenceFormat:
ChristofTinnes,WolfgangRössler,UweHohenstein,TorstenKühn,Andreas
Biesdorf,andSvenApel.2022.SometimesYouHavetoTreattheSymptoms:
Tackling Model Drift in an Industrial Clone-and-Own Software Product
Line.InProceedingsofthe30thACMJointEuropeanSoftwareEngineering
ESEC/FSE ’22,November 14ś18, 2022, Singapore, Singapore
©2022 Copyright held bytheowner/author(s).
ACM ISBN978-1-4503-9413-0/22/11.
https://doi.org/10.1145/3540250.3558960Conferenceand Symposium on theFoundations of SoftwareEngineering (ES-
EC/FSE’22),November14ś18,2022,Singapore,Singapore. ACM,NewYork,
NY, USA, 12pages.https://doi.org/10.1145/3540250.3558960
1 INTRODUCTION
Softwareproduct-lineengineering [41]aimsatdevelopingafamily
ofsoftwareproductsbyreusingsoftwareartifactsaswellaspro-
cesses across the family. There are several software product-line
engineering methodologies [2,44], ranging from simple cloning of
artifactsacrossproducts(clone-and-own)toplatformswithbuilt-
invariabilitysupport,whichallowtogenerateproductsbasedon
a configuration (i.e., a feature selection). Depending on various
factors(e.g.,thenumberofproducts),itmakessensetofavorone
approachoveranother [14,30,41,44].Forexample,theoverhead
for establishing and using a platform will only pay off when the
platformisusedforalargernumberofproducts [41].Itisimportant
tonotethatthereuseofartifactsinsoftwareproductlinesisnot
limited to source code, but can also include other artifacts, such as
documentation,requirements,andmodels [ 3,4,7,35,39,55].
Many industrial software product lines have been grown or-
ganically, using some form of managed cloning (clone-and-own
withsomeformofclonemanagementinplace) [14,44].Asaconse-
quence,changeshavetobepropagatedfromoneproducttoanother.
This is often done manually and therefore time-consuming and
error-prone [30].Akeychallengeoftheevolutionofclone-and-own
softwareproductlinesisthatproductstendtodriftapart [28,58].
Thisleadstoariskoflosingthebenefitsofreuseifeffortsrelated
tocloningandmergingexceedthe savings ofreuse.
Inthis experience paper, we report ona model-drivensoftware
productline(i.e.,modelsaretheprimaryartifacts)intherailway
domainatourindustrypartner,whichemploysaformofmanaged
cloning. In particular, we study the divergence of models in this
setting.Weobservedthatqualityassurance,changepropagation,
and domain analysis are the main drivers for increased effort (or
costs), due to the cloning approach Ð an observation consistent
with the literature [14,30,45]. Nevertheless, these activities are
indispensable. Especially for safety-relevant parts of the system, a
thoroughqualityassuranceofthechangesmadetothesystemis
critical to decrease the risk of failing software qualification, which
in turn leads toan increase in time-to-market.
Common to all of these activities is the analysis of differences
between products or between a product and the common platform.
In large software product lines, the models and also the differences
betweenmodelseasilybecome huge.We found that,indeed, large
model differences are a major symptom of the drift at our industry
ThisworkislicensedunderaCreativeCommonsAttribution-ShareAlike4.0
InternationalLicense.
1355
ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore Christof Tinnes, Wolfgang Rössler, Uwe Hohenstein, TorstenKühn,Andreas Biesdorf,andSvenApel
partner.Itisincreasinglydifficulttoidentifycommonalitiesthatcan
beliftedtoacommonplatformorpropagatedacrossproducts.Many
small but uncritical changes, such as model element renamings,
make model differences unnecessarily verbose and confusing. For
example,inourcasestudy,renamingapackageleadstothechange
of the fully qualified name of subordinated elements and therefore
to plenty offine-grainedchanges inthe modeldifference.
A solution to the divergence problem might be to migrate to
a platform-based approach [14,30,44]. This is not only a time-
consumingtask,butthereisalsoariskoflosingflexibilitytocre-
ate new products. Moreover, the independence of products in a
clone-and-ownsoftwareproductlineissometimesdesiredtoavoid
unintended side effects [14,30]. In general, many of the assump-
tionsmade byplatform approachesareoften notcompatiblewith
real-worldconstraintssuchasorganizationalstructureswithina
company. An alternative to platform-based approaches is to utilize
featuretracesinabottom-upmannerforchangepropagationand
thecomposition of newproducts [18,28].Unfortunately,state-of-
the-art tools are not mature yet (e.g., scalability to large product
lines has not been shown yet) and are not available for model
artifacts.
Whileitisdesirableinthelongtermtosystematicallymanage
variability,itisimperativeintheshorttermtołtreatthesymptomsž
of a clone-and-own approach. That is, we need to reduce the effort
required for critical activities such as quality assurance, change
propagation, and domain analysis. For this purpose, we have com-
binedsemanticlifting [27]witharecentapproachforeditoperation
mining[54],toeffectivelysimplifylargemodeldifferencesatour
industry partner. The idea of this semantic lifting approach is to
compress the differences, that is, to combine many fine-grained
differences intohigher-level, reusablechangepatterns.
Basedonsemi-structuredinterviewsandaquestionnairesurvey,
weexplorethemeritsandbarriersofplatform-basedapproaches,
bottom-up approaches, and the semantic lifting approach in the
contextofdrift between products inan industrialsetting.
In asummary,we make the following contributions:
•Wereportonacasestudyandchallengesrelatedtomodeldrift
in a real-world industrial clone-and-own software product
line in the railway domain with more than 200 engineers,
300GB ofartifacts, andover 7years ofhistory.
•Weconductedinterviewsandasurveywithpractitionersin
this projectto
śverify the presence of model drift in this real-world case
study,
śstudy symptoms andcauses for the modeldrift,
śevaluatewhetherapproachesproposedintheliteraturecan
be appliedandwhether amigrationwouldbe feasible,
śevaluateabottom-upapproachbasedonsemanticlifting
and pattern mining to mitigate one of the major symptoms
ofmodeldrift, that is, large modeldifferences.
•We find that major symptoms of model driftare largemodel
differencesaswellasincreasedcommunicationefforts,mainly
for tasks such as quality assurance, change propagation, and
domain analysis. There are several causes, most prominently
anincreasingmodelsizeaswellasmissingtoolsupportfor
several variability-related tasks. Worse, available approachescannot be applied because the cost and risk of a migration
wouldbetohigh,existingtoolsarenotmature,andcritical
features are missing. A semantic lifting approach can help to
mitigate challenges relatedto large modeldifferences.
2 STATEOFTHE ART
Supporting andmanagingmodelevolution,for example, support-
ing collaborative work on models, versioning of models, or quality
assurance of the models has been studied extensively in the litera-
ture[1,6,26,29,34,37,43,53].ThestudiesbyStraetenetal. [53],
Kahliletal. [29],andPaigeetal. [37]provideanextensiveoverview.
Whereas modelevolutionresearchisfocusingonthe evolution
inthetemporaldimension ,thesoftwareproduct-lineengineering
community is interested in differences in the product dimension . In
the literature,severalalternativesandapproachescomplementary
to clone-and-own are proposed. In what follows, we will recapture
the clone-and-own approach, describe the problem of the so called
unintentionaldivergence inclone-and-own,anddescribepossible
solutions proposed in the literature. Furthermore, we provide an
overviewofindustrialclone-and-owncasestudies.
2.1 Clone-and-Own
Clone-and-own [14,28,30,44,45]describes the ad-hocprocess of
cloning existing products and developing the cloned products inde-
pendentlyfromeachother.Therehasbeenadebateinthesoftware
product-lineengineeringcommunityaboutwhetheraclone-and-
own approach should be discouraged or not [14,24,28]. Never-
theless,as amatter offact [14,28,44],clone-and-own approaches
are used in the industrial practice. In many cases utilizing clone-
and-own approaches, there exists a single product which has to be
modifiedslightlytosatisfytheneedsofothercustomers.Cloningis
then an available mechanism, which can be rapidly used to satisfy
this customers needs. Often it is not known in advance whether an
existing product will evolve into a family of products. Therefore, it
ishardtoassesswhethertheinitialefforttosetupaplatformfor
theproductfamilywillpayoffinthelongrun [41].Anobservation
madebyBergeretal. [8]isłthatnoneofoursubjectsexercisespure
clone&own, but that variants already use variation pointsž. This
observationis alsotrueforour railwaycasestudy, wheretrainset
platforms alsohave someinternal variability (see Section 3).
Acommonissuerelatedtotheclone-and-ownapproachistheun-
intentionaldivergencebetweentheproducts [28,48].Unintentional
divergence describes the increasing difference between products
intheproductfamily.Therearemultiplepossiblereasonsforthis
divergence, for example, missing reuse opportunities (e.g., com-
monalities are not identifiedduring domainanalysis), noisedue to
differences in the implementation of features in different products,
or even the increased complexity of the individual products as a
consequenceoftheevolutionoftheproducts.Inthecontextofa
model-driven product line, we will refer to model drift as a specific
instanceofunintentionaldivergence inmodelartifacts.
2.2 Platform Approaches
One solution to the divergence problem is to migrate the cloned
product line to a 150% platform [14,30,44]. There are only a few
1356SometimesYou Have to Treat the Symptoms: TacklingModel Drift in anIndustrial... ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore
tools that support 150% platform approaches for model-driven soft-
wareproductlines. SuperMod [49]reliesonso-called filteredediting
andfeature ambitions , which a user can select when committing
changes.The MagicDraw Product Line Engineering Plugin is
more mature, but the user has to explicitly model the variability
for every (variable) model element. In contrast to 150% platform
approaches,whereaproductisgeneratedbyselectingasubsetof
the functionality implemented in the 150% platform, compositional
approaches [3,17,22,40,46]have been proposed in the literature.
For example, Apel et al. [3]propose an approach to compose a
specific product by superimposing model fragments ; typically one
model fragmentper feature. Jayaraman etal. [22]describe aUML
composition language based on graph transformations for reusing
features. Another compositional approach is delta modeling [46],
whereaproductiscomposedoutofa coremodel (avalidproduct)
and multiple delta-models that encapsulate modifications to the
coremodel.Delta-modelsarenotnecessarilyinone-to-onecorre-
spondence with features. Elrad etal. [17]propose an approach for
aspect-orientedmodellingtoseparatecrosscutting-concernsand
core functionalityinUMLmodels.
Amigrationfromaclone-and-ownapproachtoaplatformap-
proachisnotonlytime-consuming,butthereisalsoariskoflosing
flexibility to create new products, and the independence of the
products in a clone-and-own software product line is sometimes
desiredto avoid unintendedsideeffects[ 14,30].
2.3 Bottom-up ProductLineEngineering
Someauthors observe that,withanincreasingnumberof products,
maintenance efforts for a clone-and-own approach will rapidly
grow[14,28,38,57],buttheyalsoacknowledgethat,insomeset-
tings (e.g., a small number of products), a cloning approach is vi-
able[24,28,38,41]. Furthermore, many industrial product lines
startwithasingleproduct,anditisnotclearatthebeginning,how
many products there will be in the future or how long the product
linewillbe usedat all[ 14,27].
For this reason, approaches supporting variability management
inclone-and-ownproductlineshavebeenproposed [18,28].The
basic idea is to utilize feature traces in a bottom-up manner for
changepropagationandthe composition ofnew products. Some
authorspropose variationcontrolsystems [18,25,31,49,51],which
aim at unifyingversioncontrolandvariability management1.
2.4 IndustrialClone-and-Own CaseStudies
Some authors study clone-and-own in multiple-case studies (i.e.,
havingmorethanoneconcretesubjectproject).Forexample,Rubin
etal.[44]evaluateaframeworkformanagingcollectionsofrelated
productsbasedonthreeindustrialcasestudies.Dubinskyetal. [14]
study cloning practices in six industrial clone-and-own software
productlines.Morerecently,Krügeretal. [30]comparecostand
costfactorsofclone-and-ownandplatform-orientedreuseinindus-
trialsettingsusingaliteraturereviewandinterviewswithinone
company.Bergeretal. [8]studythestateofadoptionofasystem-
atic variability management in twelve industry case studies across
severaldomains.Whilethisresearchcomparesplatform-oriented
1Somevariationcontrolsystemsinternallymaintain150%model,andthereforebelong
to the categoryof platform approaches.researchandclone-and-ownorinvestigatesatransitionfromclone-
and-owntoamoresystematicvariabilitymanagement,westudy
theconcretechallengeofdriftbetweenproductsinoneconcrete
industrialclone-and-ownsoftware product line.
There are also single-case studies in an industrial context, for
example, Jepsen et al. [23]or Weston et al. [56]focusing on the
extractive adoption of software product lines. Other single-case
studies compare platform-based and clone-and-own approaches,
forexample,Echeverríaetal. [15]compareeffectiveness,efficiency,
andsatisfaction ofclone-and-own anda platform-basedapproach
in a controlled experiment. A comprehensive list of case studies
using extractive adoption is given by the ESPLA catalog [32]. To
thebestof ourknowledge,there isnowork studyingdriftbetween
products inan industrialsetting.
3 RAILWAYCASE STUDYSETTING
In this section, we describe the setting of our case study that we
conductedwithour industry partner.
Our industry partner offers a wide range of trains from small
commuter rails to high-speed trains. Their trains include a lot of
software componentsthat providevariousfunctionality, fromheat-
ing, ventilation, and air conditioning (HVAC) systems, to highly
safety-relevant systems such as the drive control system. The soft-
ware components consist mainly of SCL code2. Over the years, our
industry partner’s code bases have become large and complex. For
thisreason,theengineeringteamthatisresponsibleforthetrain
softwaredecidedin2014tofollowa model-drivenengineering (MDE)
methodology.Thiseasesthedocumentationofthetrainsoftware
andmaintainstraceabilitybetweenrequirementsandsoftwarecom-
ponents.The team ofaround 200engineers uses MagicDraw [21]
astheirmodellingenvironment,becauseitisanindustry-proven
tool, supports modelling in the modelling language used in this
project (i.e., SysML), and is capable of handling large models. As
afurtherbenefitofMDE,largepartsofthesoftwarecomponents’
sourcecodearegeneratedoutoftheSysMLmodels.Forcodegener-
ation,MagicDraw models are transformedintoEclipse Modeling
Framework (EMF) models [52], which are then transformed into
SCLsourcecodecomponents.ThereasontouseEMFinaninter-
mediate step is the availability of tooling and libraries from the
EMF ecosystem. Code generation is a one-way process, that is, no
round-tripengineeringisperformed.
At the time of the study, the model base consisted of approxi-
mately 300GB of artifacts (including image data for diagrams). The
overallmodelfortheentiretrainsoftwareisdividedinto122weakly
coupledsubmodels,whichareevolvedandversionedindependently
fromeachother.Forinstance,thereisonesubmodelforHVACand
anothersubmodelfor drive andbreakcontrol.
The traindomain isahighlyregulated domain, sothe software
is subject to qualification and certification requirements according
toIEC61508 [20],EN50126 [10],EN50657 [12],andEN50129 [11].
Maintainingrequirementstraceabilityandexhaustivedocumenta-
tionisthereforerequired,and followingamodel-drivenapproach
helps to automate many of the documentation related tasks. In
Table1,we give an overviewof the projectsetting.
2Aka.structuredtext;ablock-structuredIEC61131-3language,mainlydesignedfor
programmable logic controllers.
1357ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore Christof Tinnes, Wolfgang Rössler, Uwe Hohenstein, TorstenKühn,Andreas Biesdorf,andSvenApel
Sincemanyofthesoftwarecomponentsshallbereusedacross
different trainsets such as commuter rail, light rail, and high-speed
trains, the software is developed as a software product line. The
artifacts are versioned in a repository with one branch per train-
set, called trainset platform . There is also a platform, called the
commonplatform ,whichholdsthetype-independentpartsofthe
modelsandtheonesthatcanbeconfigured/adjustedinthetrain-
specificbranches.Thecommonplatformisevolvedbyfollowingan
extractivesoftwareproductlineadoptionpath [2],thatis,newly
developedfeaturesandreusablepartsare(manually)identifiedand
regularlymergedintothecommonplatform(seeFigure 1).Common
functionalityisevolvedinthecommonplatformandpropagatedto
trainsetplatforms,ifdesired.Furthermore,fixesorchangestothe
modelsforthetrainsettypeshavetobepropagatedtothecommon
platform andtrainsettypes that use the affectedparts.
In general, changeandfeature propagation hastobe performed
carefully, since parts of the software system might have been qual-
ified already and must not be modified thereafter. Several times
permonth,for qualityassurance purposes,thecommonplatform
and trainset platform branches are compared in the modelling tool
MagicDraw andmanuallychecked.Incompatibleorincomplete
changeshavetobebeidentifiedduringthesechecks.Somechanges
might even cause serious problems if merged into the common
platformandthereforeneedtobeidentifiedandfixed.Furthermore,
based on the model differences, a domain analysis is performed by
adomainexpertto identifycommonalitiesand reuseopportunities.
Table1:Projectcontextforourrailwaycasestudy.Themodel
size is given in number of model elements (attributes not
included). Model differences are between a trainset platform
andthecommonplatformandinclude changed attributes.
Number of Train Sub- Avg.model Avg.number Artifact Age
developers types models size of differences size
200 8 122 24.627 63.096 300GB 7 yrs
4 SEMANTICLIFTINGTO REDUCETHE
COMPLEXITYOFMODEL DIFFERENCES
As a consequence of unintentionaldivergence,large model differ-
ences (e.g., thousands to hundreds of thousands of changes) can
increasetheeffortsintasks,suchaschangeandfeaturepropagation,
quality assurance, or domain analysis. The large model differences
leadtoincreasedeffortsforthesetasks.Otherthancommonvari-
ability management approaches, we were therefore interested in
the feasibility of a treatment of the large model differences, that is,
atreatment ofthe symptoms ofunintentionaldivergence.
Inthissection,wedescribeanapproachtoreducethecomplexity
of model differencesthat isbased on semanticlifting [27]and edit
operationmining [54].Semanticliftingisnotaproductlineengi-
neeringapproachbutameansforhandlinglargemodeldifferences.
4.1Model Transformations and Edit Operations
Theapproachpresentedhereisbasedoneditoperations [27].An
editoperation representsamodelingoperationthatauserofamod-
eling tool can perform on a model. We consider edit operations
asaspecialkindofmodeltransformation [9,16,33].Modeltrans-
formationsareacentralandubiquitouselementinmodel-drivenengineering [33,50]. The concept of edit operations, which are en-
dogenous(i.e.,sourceandtargetmeta-modelareequal),in-place
(i.e., the output of the model transformation overrides the input
model)modeltransformations,canbeformalizedbygraphtrans-
formations on typed graphs. We refer the readers to the work of
Biermanetal. [9]andEhrigetal. [16]fordetails.Notethat,since
onemodelrevisionistheresultoftheapplicationofeditoperations
to the previous model revision, every model difference between
two model revisions can be described as a (partially) ordered set of
edit operations. In this context, we also speak of change patterns
when we refer to editoperations.
4.2 Description oftheApproach
Thehigh-levelideaofourapproachistosimplifythepresentationof
model differences and to provide further insights for the user. This
canspeeduptaskssuchaschangepropagation.Weapproachthe
problemoflargemodeldifferencesbyreducingthełperceivedžsize
ofthemodeldifference.Thisisrealizedbygroupingfine-grained
differences tohigher-level (semantic)changes.Thesechangescan
also be classified or tagged (e.g., a change can be a violation) to
supportthearchitectordeveloperduringanalysisandqualityas-
surance related tasks.Furthermore, higher-level changes can help
inthe identification ofcommon functionalities.
Technically,weachievethisbyasemanticliftingofthemodel
differences. As shown by Kehrer et al. [27], a set of defined edit
operations(orhigh-levelchanges,inourcase)canberecognizedin
a model difference, and each model difference can be expressed in
termsofthesehigh-levelchanges.Inthissemanticliftingapproach,
high-levelchangesaredefinedby editrules,whichareanexecutable
form of edit operations. Edit rules are then lifted to recognition
rules, which can be applied to a model difference to group the
low-levelchangesinthemodeldifferenceinto semanticchangesets .
Furthermore, if low-level changes are contained in more than one
change set, a heuristic is applied to select only disjoint change sets.
Largerchangesetsarepreferredoversmallerones.Theresultof
lifting is a difference containingall original changes grouped into
disjointsemanticchangesets.Forexample,achangepatternthatwe
observe quite often in the models from our case study in Section 3
isaconnectorandtwoportsaddedbetweentwoexistingpartsin
an SysML internal block diagram (see Figure 2). This high-level
change comprises 17 low-level changes. For many tasks related
tothemodeldifferences,itwillbesufficienttoseethishigh-level
information andonly drilldownif necessary.
Inasubsequentstep,filterscanbeappliedtothelifteddifferences,
whichisespeciallyhelpfulforqualityassurance.Somechangeswill
be less interesting, while others will be more interesting. For ex-
ample, a renaming operation might be less interesting than adding
interfacesbetweencomponents.Filteringthesekindsofchanges
improves the clarity of the model difference, especially since these
changes will typically be scattered across the model difference.
Furthermore,illegalchangescanbehighlightedinthemodeldif-
ferences bytaggingcertaineditoperations.
A difficulty of this approach is that the high-level changes have
to be known and defined as input to the semantic lifting step. This
requires a deep knowledge of the modeling language’s meta-model
1358SometimesYou Have to Treat the Symptoms: TacklingModel Drift in anIndustrial... ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore
Figure1:Schematicrepresentationofmodeldriftbetweentrainsetplatformsandcommonplatformintherailwayproductline.
Figure 2:Results of thesemantic liftingof aconnectorthat
isadded between acomponentandasubsystem.
(i.e., SysML, in our case) and the underlying paradigm of the trans-
formation language. Some of the high-level changes might even be
project-specific. Moreover, some of the changesare a form of tacit
knowledge [42], and it will be hard for domain experts to external-
ize this knowledge. Leaving the definition of high-level changes
totheengineersoftheprojectcausesalargeoverhead,whichwe
want to avoid. In our previous work, we therefore developed an
recommendersystem, Ockham,whichisabletominehigh-level
change patterns from model repositories [54]. The tool is based
ontheso-called minimumdescriptionlengthprinciple [19],which
statesthatthebest model(in ourcase, a set ofchangepatterns) to
explain a dataset(in our case, model differences from the model
repository) is the one that provides the best compression of the
data.Ockham considerstheproblemofautomaticallyidentifying
semanticchangesetsfromagraphminingperspective.Themining
of high-level changes is done in 5 steps. In Step 1, we compute
modeldifferenceforsuccessivemodelrevisions.InStep2,webuild
so called simple change graphs for these model differences. Simple
change graphs are labeled directed graphs that break the (typically
large)modeldifferencesintoasetofsmallerconnectedcomponents.InStep3, frequentsubgraphmining [13]isappliedtothissetofcon-
nected components for a large number of model differences. Step 4
usesacompressionmetrictofilterforthełrelevantžsubgraphsand
torankthesubgraphsfortheoutputoftherecommendersystem.
In thelast step, Step 5, executable edit operations forthe semantic
lifting approach [ 27]are computedfrom the labeledgraphs.
In our previous work, we have shown our automatically discov-
eredchangepatternsarerelevantandhelpinameaningfulmanner.
Detailsofthisrecommendersystemcanbefoundelsewhere [54],
and we show there that the edit operations discovered by Ockham
are meaningfulfor the models from the casestudy inSection 3.
Compared to the original semantic lifting approach [27], our
combined approach automatically recommends meaningful edit
operations forlifting model differences. Moreover,edit operations
can be classifiedfor efficient filtering of large differences.
4.3 Putting thePiecesTogether
The engineering team at our industry partner uses MagicDraw
for their SysML models, but there is an export to EMF. Many tools,
such as code generation tools, are based on EMF. The approach
presentedhere alsobuildson top of anłintermediatež EMF model.
Forsemanticlifting,weuse SiLift[27],whichuses SiDiff[47]for
computingstructuraldifferences.Forthedefinitionandexecutionof
therecognitionrules, SiLiftusesHenshin [5].SiLiftoutputsalist
ofchangesandsemanticchangesets(seeFigure 2),whichcanthen
be filtered and sorted.For the edit operation recommendation,we
useOckham[54],whichuses SiDifftocomputemodeldifferences
andGaston[36]for frequentsubgraph mining. Ockham outputs
the recommendededitoperations as Henshin rules.
5 CASE STUDY
In this section, we report on our case study conducted with our
industry partner. We analyze the symptoms of model drift, influ-
encing factors, andpossible solutions.
1359ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore Christof Tinnes, Wolfgang Rössler, Uwe Hohenstein, TorstenKühn,Andreas Biesdorf,andSvenApel
Table 2:Overview oftheinterviewees.
Role Scope Experience (level)
Systemengineer Singlemodel Entry-level
Systemengineer Singlemodel Intermediate
Tool support Cross-cutting Intermediate
Chiefarchitect Cross-cutting Senior
Headoftool development Cross-cutting Senior
5.1 Research Questions
To better understand the model drift, our goal is to answer the
following research questions. RQ 1 ś RQ 3 study the problem side,
whileRQ4andRQ5study the solution side:
RQ 1:Can model drift be observed in this product line and how is
itperceivedbythe developers?
RQ 2:Whatare symptoms ofmodeldrift?
RQ 3:What are causes of model drift and large model differences?
RQ4:Canexistingsolutions(i.e.,bottom-upapproachesandplatform-
basedapproaches) to the modeldrift be applied?
RQ5:Canthe semanticlifting approachsupportthe engineersin
handling large modeldifferences?
5.2 StudySetup andConduct
Semi-structured interviews: To get a first impression of the
modeldriftchallengeinthisproject,weconductedsemi-structured
interviewswithfiveengineersoftheproject(seeTable 2),among
them the head of the tool development team and one of the lead
architects. Three of the participants were working with more than
one of the products of the product line and two of the participants
did contribute to a single product. The interviews lasted 45 ś 60
minutes. The interview had three sections: Challenges in clone-
and-ownproductlineengineering,unintentionaldivergence,and
variability management solutions. In the last section, we presented
the approach form Section 4and asked the participants for their
feedback regardingtechnical, organizational, aswellaseconomic
feasibility.We askedonly open-ended questionsand didnot have
any further constraints except covering the three sections men-
tionedabove.
Questionnaire Survey: We then used the input from the semi-
structuredinterviewinthedesignofaquestionnaire.Weconducted
a web-based3questionnaire survey with 9 project employees of
theprojectfromSection 3.Thequestionnairewasdistributedvia
a mailing list of the architects of the project. Therefore the ma-
jority of the recipients were architects and developers involved
in architectural decisions. The survey had four sections; the first
section asked the interviewees about their role and experience, the
secondaboutevolutionandtrendsoftheproject,thethirdabout
model differences in the project, and the last one about solution
ideasandtheirfeasibility.Wegaveanintroductionintothetopic
andshortlysummarizedvariabilitymanagementsolutions.Wealso
explained the semantic-lifting approach. All together, we asked 27
questions. Since a majority of the employees are German speak-
ing,weaskedallthequestionsinGerman.Thequestionnairewas
sent to 17 candidates and 9 filled out the questionnaire. 5 of the
3We used Microsoft Forms, since it is easily accessible and employees at our industry
partnerarefamiliar with thistool.respondentswerearchitects,while4oftherespondentswerede-
velopers.Theprojectexperienceoftherespondentsrangedfrom
1-2 years to more than 6 years. The questionnaire is available at
https://forms.office.com/r/WRvUNQisuR .
Repositorydata: Toalsogetquantitativeinsights,wegotac-
cess to the SysML models in the project. The repository used is the
Teamwork Server , which is the default solution for collaborative
developmentin MagicDraw .Thereisoneprojectforeachofthe
submodelsandtherepositoryholdstheentirehistoryforeachof
the submodels and all trainset platforms as well as the common
platform. Table 1shows the number of submodels, trainset plat-
forms,aswellastheaveragesizeofthemodels.Wealsousedthe
datainthisrepository,toexemplaryvalidate statementsmade by
interviewees andsurvey respondents.
To answer the research questions, we use the input from the
semi-structuredinterviews,theresultsfrom thequestionnaire,as
well as insightsfrom the models inthe modelrepository.
5.3 Results
Semi-structured interviews. During the interviews, four out of
fiveinterviewpartnersmentionedchallengesrelatedtolargemodel
differenceswhenaskingaboutgeneralchallengesintheirproject.
For example, they stated that during the propagation of changes
from one product variant to another variant, the model differences
canbehardtounderstandbecauseofchangesconcurrentlymade
byotherdevelopers.Oneoftheinterviewpartnersdidnotmention
challenges related to the variability at all. When we asked about
thetasks androlesintheproject, itturnedoutthat shewas mainly
involvedintheevolutionofasingleproductandnotinanyactivities
related to variability management. As major drivers for variability,
differences in hardware as well as different customer requirements
have been mentioned.
All interviewees ruled out a migration to a platform-based prod-
uctlineengineeringapproach,becauseofmigrationefforts,risks,
and immature tooling. Furthermore, there are less than a dozen
of product variants, and therefore the effort for maintaining the
platformpossiblywouldexceedthebenefits.Bottom-upapproaches
are conceptuallymore realistic,butthere exists nomature tooling
yetand,asaprerequisite,thevariabilityhastobeknownexplicitly,
whichisnot yetthe caseintheir setting.
The most time-consuming tasks for the interviewees are variant
synchronization tasks (e.g., change propagation). Merging appears
to be difficult because it is hard to define what belongs to a feature
and what does not. There are many interfaces between different
submodels, which further complicates merging. Computing the
differencesthemselvesisalreadytime-consumingandtakes15to
30minutespermodeldifference.Worse,manyfine-grainedchanges,
suchasrenamingoperations,makethemodeldifferenceshardto
read. This is also the case for frequently performed refactorings
that are introduced because the models are adapted to new tooling.
Whenweexplainedsemanticliftingtotheinterviewees,fourout
offiveparticipantsstatedthatasemanticliftingapproachhasto
potential speed-up several of their activities in the project. For
example, the analysis of model differences for review purposes
could be supportedandirrelevantchanges can be filteredout.
1360SometimesYou Have to Treat the Symptoms: TacklingModel Drift in anIndustrial... ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore
Questionnaire. All of the answers were optional, but most of
the 9 participants of our industry partner answered to all of the
closed-endedquestions.Wealsoreceived10answerstoopen-ended
questions.
78% of the respondents said they observe a drift between the
different products. All of them see model drift even among the
5 biggest challenges in the project. 63% of the respondents say
that,withoutasolution,seriousproblemsmightarise;27%ofthe
respondentssay that asolution willincreasethe efficiency.
As symptoms of model drift, respondents report increasingly
large model differences (78%), increasedeffort for change propaga-
tion (67%), increasing numbers of inconsistencies (56%), increasein
communicationefforts(44%),increaseinfeatureinteractionbugs
(22%), and increased effort for domain analysis (33%). Furthermore,
for89%oftherespondents,modeldifferencesplayaroleinsomeof
their tasks in the project, for 33% even a significant role. While for
only 22% of the survey participants model differences between two
revisionswithinoneproductvariantcanbechallenging,78%ofthe
respondents experience model differences between two product
variantsaschallenging.Fortheserespondents,differencesplaya
role and can be challenging during the following tasks: reviews
(88%),changesandbugfixesbetweentwovariants(100%),anddo-
main analysis (88%). One of the participants pointed out that, even
inrequirementsengineering(requirementsarealsopartofmodels),
unintendeddivergenceisachallenge.
Ascausesofthemodeldrift,alloftherespondentsmentioned
different hardware of the products and parts of the architecture
not being reused, 33% even report a significant influence of not
reusing parts of the architecture. 67% think that it is difficult to
defineandunifyfeaturesacrossmultipleproductsandevolution
of the single products has been mentioned by 50%. According to
the respondents, large model differences are also caused by the
size of the models themselves (78%), missing explicit variability
information (67%), missing tool support for filtering and cherry-
picking of model differences (100%), and no distinction between
architectural (i.e.,refactorings) andfunctional evolution (78%).
In Figure 3, we show a violin chart of the Likert scale data for
the survey participants’ opinions about 150% platform approaches,
bottom-up approaches, and the semantic lifting approach. The
plots shows their opinions along several dimensions: whether the
approaches are suitable to provide improvement regarding the
modeldriftchallenge,whethertheadvantagesofutilizingtheseap-
proaches would outweigh the cost and risk of development and mi-
gration,whetherthecurrenttoolingwouldsupporttheapproaches,
whether the approaches are organizationally and technically feasi-
ble,andwhether tooling for theseapproachesisknownalready.
Repository data. In order to also quantify the model drift, we
computed the model differences between the common platform
and the trainset platform for a selection of submodels and trainset
platforms and three time regions (we can not take time points,
because we do not have revisions at the same time points for all
of the submodels). Figure 3shows a violin plot of the size of the
modeldifferences.Inthisplot,wegroupedthedifferencesintothree
groups(Spring2022,Spring2021,Winter2019).Evenmore,ifwe
considerasingletrainsetplatformandasinglesubmodel,wecan
observe an increaseinthe size ofthe modeldifference.Wealsomadespecificobservationsinthemodelhistories,specif-
ically withthepurposeof cross-validatingsome of the statements
oftheinterviewandsurveyparticipants.Forexample, wecansee
thatthereareentiremoduleswiththesamepurposethatarenot
reused but evolve independently for each of the trainset platforms.
Wealsoseethatrefactorings,suchasrenamingsorchangingthe
structureinthepackagehierarchycanobfuscatemodeldifferences.
For example, the renaming of a root package will lead to a change
inthefullyqualifiedname ofallsubpackages.Alsoweencountered
submodel revisions for which computing the model differences
usingMagicDraw failed because of a memory limit. We will re-
fertospecificobservationslikethesedirectlyinthediscussionin
Section5.4.
5.4 Discussion
Inthissubsection,weusetheresultsfromtheexperimentstoan-
swer the researchquestionsfrom Section 5.1.
RQ 1: Model drift. Four out of five participants of the semi-
structured interviews as well as 78% of the survey participants
stated that they experience model drift and that model drift is a
serious challenge. As can be seen from Figure 3, in terms of the
size of model differences, the common platform and the trainset
platformexperienceadrift.Thetimeforcomputingthedifferences
of the latest models in MagicDraw was 25min, on average, on a
LenovoP51withanIntelCore ™i7-7820HQCPUand10GBRAM
for the MagicDraw Java Application.
Summary: Model drift is perceived as serious challenge
fortherailwayscasestudy.Modeldriftismanifestedinthe
modelhistoriesandisalsoperceivedbyamajorityofthe
engineers from our interviewsandquestionnaire.
RQ2:Symptomsofmodeldrift. Accordingtotheinterviewsas
wellasthequestionnaire,changepropagation,domainanalysis,and
qualityassurancearetasksthathavebecomeincreasinglychalleng-
ing because of the model drift. This ismainly because of the huge
size of modeldifferences involved in these activities. For example,
for the heating, ventilation, and air conditioning model (i.e., one
of the 122 submodels), MagicDraw presents 81.000 differences be-
tweenonetrainsetplatformandthecommonplatform.Thisinduces
considerableeffortforanalysistasksandvariantsynchronization
tasks (e.g., change propagation). For instance, in our interviews,
the engineers at our industry partner confirm that, on average,
the analysis for quality assurance purposes takes 30 minutes per
submodel.Giventhatoftenmultiplesubmodelshavetobeanalyzed
on a regular basis Ð often several times per month Ð this leads
to significant efforts and costs. Furthermore, the risk of making
mistakes,forexample,missingatouched sealedcomponent (i.e.,a
component which is marked as unmodifiable), raises. If disallowed
changesarediscoveredonlylateintheprocessśatworstduring
softwarequalificationśthisleadstodelaysinthedevelopmentpro-
cess which, in the end, leads to delayed delivery of the products to
customers and penalties by customers. Another symptom of model
drift are increased communication efforts, which were reported by
44%ofthe participants.
1361ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore Christof Tinnes, Wolfgang Rössler, Uwe Hohenstein, TorstenKühn,Andreas Biesdorf,andSvenApel
(a) Violin chart of the opinionsabout bottom-up approaches,platform approaches,and
the semantic liftingapproach.Likertscoresrangefrom 1 (=Disagree) to 5 (=Agree).
(b) Violineplotshowingthenumberofchangesperdifference
between common platform and trainset platforms.
Figure 3:Left:Comparisonofthesolutionapproaches. Right: Modeldrift inthetrend ofthe modeldifferencesize.
MissingreuseopportunitiesÐduetothesheernumberofdiffer-
ences Ð further accelerates the drift between the different trainset
platforms. This causes redundant work for the different trainset
platforms.Accordingtooneofthesurveyparticipants,łrebasingof
aproducttoanewversionoftheparentplatformisnotpossiblefor
monthsbecausethediffsaresolargethattoolcrashesreproducibly,ž
which then leads to some of the work been done multiple times or
even newduplicatesbeing created.
Besides the sheer number of changes, changes may be scattered
acrosstheentiremodeldifference.Asanextremeexample,recently
the engineering languagehas been changed from German toEng-
lish. In total, more than 7.5%(or 98486 changes in total) of the
changes are related to renaming refactorings. For some of the anal-
ysis tasks (e.g., reviews), these changes are irrelevant, but the mod-
ellingtooldoesnotprovidefiltersforthesechanges.Forothertasks,
suchasdomainengineering,itwouldbehelpful,toclassifythese
changes and merge them contiguously instead of being intermixed
withothertypes ofchanges (e.g.,functional changes).
Summary: Large model differences and increased com-
municationefforts are the main symptoms for model drift
experiencedatourindustrypartner.Findingcommonalities
or reuse opportunities in these large differences has also
become challenging. Mostly tasks such as change propa-
gation,domainanalysis,andqualityassuranceseem tobe
affectedbythe drift.
RQ3:Causesofmodeldriftandlargemodeldifferences. Wefound
the following drivers for modeldrift andlarge modeldifferences.
Hugemodels: Accordingtotheinterviewees,onereasonforthe
enormoussizeofmodeldifferencesisthe sizeofthemodels them-
selves.Themodelsgrewsteadilyinsizeoverthelastsevenyears.
Theaveragesizeis24.627objects,whereanobjectisaninstanceof
aclassinthemeta-model.Thatis,attributesandreferencesarenot
evenincludedinthiscount.Thereasonisthatthetrainsoftwareand
system is modeled with a high degree of detail. Various additionalinformation is provided, for example, requirements traceability or
organizational information.
Duplicated architecture: In the model repositories, we found
parts of the models that seem to have a similar purpose but are
modelledindividuallyforeverytrainsetplatform.Theseduplicated
parts appear in every model difference and also inflate the number
of changes in these differences. Different hardware used for the
differenttrainsetplatformsappearstobeoneofthemaindrivers
for inducing new variability and duplicated parts of the models.
The interviews and survey support this finding. One of the survey
respondents said that łunder time pressure, often only a single
solution is sought for the concrete problem in the concrete project
instead ofasolution suitable for the platform.ž
Implicit variability: Many of the problematic changes that
are typically found during quality assurance are related to missing
explicit constraints related to variability. For example, there are
componentswhichmustnotbemodifiedinoneofthetrainsetplat-
forms. Because this information is often implicit, trainset platform
engineers sometimes change parts of a model where actually no
change should occur. Missing variability information increases the
size of the model differences: Features that are only part of the
platform but not present in a specific train type will be always
showninamodeldifference,eventhoughtheymightnotberele-
vant. Likewise, features that are only part of the specific trainset
platformsbutirrelevanttotheplatformshouldbeexcludedfrom
theplatformwhenmergingtraintypechanges.Fortaskssuchas
extractingcommonalities,suchfeaturesareofspecialinterest.This
extractionwouldbeeasierifonlyproduct-specificfeaturesarecom-
pared across the different train types, that is, explicit variability
should be usedfor isolatedfeature development.
Missing tool support: Especially for domain analysis, a model
differencebetweenatrainsetplatformandthecommonplatform
orbetweentwotrainsetplatforms is computed.Inthedifferences,
there will be many changes that are not relevant for the domain
analysis. One limitation of MagicDraw is that it does not support
filtering model differences. Even given a concrete feature mapping,
1362SometimesYou Have to Treat the Symptoms: TacklingModel Drift in anIndustrial... ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore
MagicDraw doesnotprovideanyfilteringfunctionalityout-of-the
box.Thisisalsopartlyrelatedtothefactthatthereisnocommonly
acceptedwaytoexpressvariabilityinSysMLmodels.Theengineers
at our industry partner not only need support for Boolean features
but also numeric and topological features. Furthermore, Magic-
Drawonlysupportstwo-wayandthree-waymergingtopropagate
the changes between branches. Merging aims at including as many
changesaspossible,whileindifferentvariants,somedifferencesare
desired[28].Cherry-picking changes(i.e.,onlyselectingchanges
betweentwoconsecutiverevisions)wouldsupportchangepropa-
gation,but MagicDraw doesnotsupportcherry-pickingasofnow.
Onofthesurveyrespondentsmentionedthatłpoortoolsupport
for taking over simple changes leads to the same changes being
broughtinindividually andthusonlybeingthesame,butnotthe
sameelements,sothattechnicallyfurtherdiffsarise.žInourreposi-
torydata,wecanalsoseetheseduplicatedblocks,whichwillshow
upinthe modeldifferences.
Classification of changes: Model differences typically show
manyfine-grainedchanges.Someofthesefine-grainedchangesbe-
long to higher-level changes,but they are not grouped together in
thepresentationofmodeldifferences.Thisincreasesthełperceivedž
size of the model differences. Another challenge that increases the
complexityofmodeldifferencesisthelackofadistinctionbetween
architecturalevolution(i.e.,refactoring)andfunctionalevolution.
Forexample,correctingatypoinacomponentnameispresented
inasimilarwaytotheuseraschangingaconnector.Anotherexam-
plearemoverefactorings,forexample,apackageismovedinthe
containmenthierarchy,orgraphicalchangesindiagrams.Asone
of the survey respondents states, ł[...] semi-automatic changes (ex-
ample:upper/lowercaseofelements)leadtoHUGEdiffs,sothatno
manual diff (and merge) is possible for a long time.ž These changes
are typically scattered across a model, and they are ubiquitous. For
some activities, such as quality assurance, it would be helpful to
distinguishthesechanges from other,more importantchanges.
Summary: Largemodelstogetherwithalackofsupport
for explicit variability as well as missing tool support for
filteringmodeldifferencesresultinlargenumbersofmodel
differencesthathavetobeanalyzed.Therefore,itisincreas-
inglydifficulttoreusepartsofthesystemacrossmultiple
trainset platforms. Parts of the models can not be reused
even though they have a similar purpose. These factors
cause the variants driftingapart over time.
RQ 4: Solution approaches. During our interviews and in the
survey, we identified several hindrances using existing solution
approaches(seeSection 2.2andSection 2.3),whichwediscussin
this subsection w.r.t. possible solution approaches.
Platform approaches: Our interviewees and survey partici-
pants mentioned several barriers to use 150% platform approaches.
Most prominently, platform approaches can not be used because of
thecostandriskofamigration.Atourindustrypartner,thereisal-
readyasignificantamountofmodellingdatathatwouldhavetobe
migrated. One of the participants of the interview mentioned that
łmany of the developers think in terms of concrete products and
not the entire product linež. This also shows that a migration frompure clone-and-own to a (150% platform) software product line ap-
proachwillfaceorganizationalhindrances.Furthermore,thereisno
variabilitymodellingapproachthatsupportsBooleanconstraints,
numeric constraints, as well as also topological constraints. One of
thesurveyparticipants evensaidthatłthestructuralvariabilityis
solargethatitcannotbemodelledusinga150%platform.žSome
mentioned that such an approach could be useful as a basis (which
is also a goal of current efforts) but some of the differences will be
toospecialandneedindividualsolutions.
Bottom-up approaches: According to our interviews, a sup-
port for understanding the variability and commonalities between
the different trainset platforms is clearly desirable. Nevertheless,
according to interviews and survey, approaches proposed in the
literature are not mature enough. For example, as for the 150%
platformapproaches,thereisnoapproachthatsupportsBoolean
constraints,numericconstraints,andtopologicalconstraints.Ad-
ditionally, variationcontrol systems proposed for models(e.g., Su-
perMod[49])havenotyet beenevaluatedinanindustrialsetting.
Thisiscomplicatedbythefactthatthereisnouniversallyaccepted
standardfor expressing variability inmodelinglanguages[ 8].
Typically, bottom-up approaches make use of traces between
featuresandimplementation artifacts.Automatically reverse engi-
neeringthefeaturetracesinthisproductlineisnotfeasible.This
is not only because of non-Booleanconstraints, but also because of
thesizeofthemodels(andthereforescalabilityissues),andbecause
these approaches discover many merged feature candidates that
contain more than one feature. Furthermore, there are not enough
products available to discover a useful set of feature candidates.
In general, the łdevelopment of methodology and tooling in the
domainwouldbe ofenormous complexityž,according to asurvey
respondent. Nevertheless, the engineering team at our industry
partnerdevelopedanapproachtofeaturetraceability,andtheman-
ualincorporationofexplicitvariabilityinformationintothemodels
is an ongoing activity. Still, there are only a few feature traces yet
whichcould be used.
Summary: Commonvariabilitymanagementsolutionspro-
posedintheliteraturearenotapplicabletothesettingatour
industrypartner.Thisismainlyduetoimmaturityofthe
available tooling, but also because many approaches make
simplifying assumptions, not taking real-world and organi-
zationalconstraintsintoaccount.Amigrationtoanother
approach comes withhigh costsandrisk,inany case.
RQ 5: Semantic lifting. While platform-based and bottom-up ap-
proachesarenot(yet)applicableinthissetting,theresultsfromthe
interviews and the questionnaire survey suggest that the semantic
liftingapproachfromSection 4appearstobesuitabletosupport
the engineers inhandling large modeldifferences.
Having a semantic change log for model differences łhas already
beenhypothesizedasavaluablesolutioninaworkshopž,according
tooneoftheinterviewparticipants.Fouroutoffiveinterviewees
stated that using higher-level change patternsin the presentation
ofmodeldifferenceswouldsupportmanytasks,suchasmerging
features, filtering the differences during reviews, identifying illegal
changesinmodeldifferences,andunderstandingmodeldifferences
1363ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore Christof Tinnes, Wolfgang Rössler, Uwe Hohenstein, TorstenKühn,Andreas Biesdorf,andSvenApel
in general. The remaining participant did not perform any tasks
where the current size of the model difference was considered as a
problem. Two interviewees, who were responsible for propagating
changesbetweenthecommon platformandtrainsetplatformsde-
scribedthemergeprocessasoneoftheirbiggestchallenge:since
theył[...]workwithseveralworkersintheproject,itisalsovery
time-consuming[duringmerge]tofilteroutwhatmyownchanges
were. [...] Usually several points in the model are affected by a
small change Ð external interfaces, software, product structure,
physicalstructuresÐsotherearechangedelementsineveryfolder,
so to speak.ž Grouping related changes can support here as well.
Twooftheintervieweesmentionedthatchangepatternscouldalso
be used to easier recognize complex refactorings in model differ-
ences. In earlierwork4, it hasbeenshown that, in this productline,
recommended edit operations for the semantic lifting achieve a
compressionratioofabout 4.0,onaverage(withoutfiltering yet).
The current tooling does not support such an approach natively
but, according to one of the interview participants, it would be
possibletodevelopapluginfor MagicDraw .Unlikethebottom-up
approaches, semantic lifting appears to be more feasible from a
technical viewpoint (see Figure 3). Nevertheless, one of the survey
participants is also concerned that the ł[...] current lack of expe-
rience in that field, could be an obstacle in the development of a
production-ready solution.ž
Interviewandsurveyparticipantsatourindustrypartner
largely support the hypothesis that a semantic lifting ap-
proach mitigates challenges arising from the model drift.
Thehypothesisisfurthersupportedbytheobservationthat
thedifferencescanindeedbecompressedusingsemantic
liftinginthisproductline.Nevertheless,thereareconcerns
that the production-ready implementation of a semantic
lifting approach can be challenging.
5.5 Threatsto Validity
Thepurposeofthisworkistoreportonaconcretelarge-scaleprod-
uctlineinanindustrialsetting.Wedonotclaimthegeneralizability
tootherlarge-scaleproductlineshere,althoughwestronglybelieve
thatsimilarchallengesexistinmanyindustrialsettings.Thisisalso
suggested by the work of Dubinsky et al. [14]and Rubin et al. [44].
Athreat tointernalvalidityiscausedbyoursetupof theinter-
views and the questionnaire. We had no control group, because
we only had asmallgroupof participants. Nevertheless,inpartic-
ular regarding the existence of the drift, we used three different
methods(interviews,survey,andrepositorydata)tovalidatethe
presences of an unintentional divergence. Furthermore, we did not
evaluatethesemanticliftingapproachinalong-termapplicationat
ourindustrypartner.Forfuturework,weneedtoputtheapproach
to the acid test bylettingthe engineers work withthe tooling.
A threat to external validity is that we only used a small sample
of engineers from the project for our interviews and in the survey.
Nevertheless, the engineers participating in the interviews and the
4An extension of [54]is currently under review and available as preprint at https:
//www.researchsquare.com/article/rs-1558716/v1surveywereinvolved intoarchitecturaldecisionsorhadanother-
wiseleadingrole.Wealsousedonlyasubsetofallsubmodelsinthe
project for our repository analysis. Anyhow, because the results
of interviews, survey, and the repository analysis are consistent,
weareconfidentthatourresultsholdfortheentireproject.Also,
many results were evident from a small sample set, for example,
we could find the drift for allsingleproducts inthe sample.
6 CONCLUSION AND OUTLOOK
Inthispaper,wereportonastudyonmodeldriftinanindustrial
large-scale model-driven clone-and-own software product line. We
conducted semi-structured interviews, a questionnaire survey, and
we analyzed the model repository to understand model drift in
this product line. We found substantial model drift that impairs
several tasks, such as change propagation, domain analysis, and
quality assurance. The main reason is that these tasks are based
onlargemodeldifferencesthathavetobeanalyzedmanuallyby
engineers.Wefoundthatsolutionsdescribedintheliteratureare
oftennotapplicableinareal-worldsetting,forexample,filtering
modeldifferencesforcertainfeaturesrequiresarigorousmodelling
of variability in the models and existing tools miss some critical
functionality,forexample,handlingstructuralvariability.Instead
of addressing variability management as one of the root causes for
large model differences, we also studied the alternative route of
addressing large model differences directly. Based on our obser-
vations,weproposedaconcretesolutiontomitigatetheproblem
by summarizing the model differences in terms of higher-level
change patterns that are automatically derived from model reposi-
tories based on the idea that meaningful patterns are the ones that
compressesmodel differences.In thecontext oftheprojectatour
industrypartner,thisideaappearstoholdtrue.Ourmixedmethods
studyprovidesevidencethatsemanticliftingcansupportengineers
in tackling large model differences. The approach is orthogonal to
variability management solutions. For example, even using vari-
abilitymanagementsolutions,modeldifferencescanstillbelarge
(e.g.,becauseofthesizeofthemodelsormissingtoolsupportfor
filtering modeldifferences properly).
Other existing solutions to support software product-line en-
gineering related tasks require explicit variability in the models.
Establishing a bottom-up,managed cloning productline engineer-
ingisalong-termtargetatourindustrypartner.Theengineering
team at our industry partner is currently working on making vari-
abilityexplicitbycreatingexplicitmappingsfromfeaturestomodel
elements. As a long-term solution, it is conceivable to use this vari-
ability information, for instance, to propagate changes between
trainset platformsorforfilteringofmodelsand modeldifferences.
While in the long-run it is imperative to establish a working
variabilitymanagementapproach,intheshort-term,treatingsymp-
tomsofunintentionaldivergencecansupportengineersandavoids
costsandriskofmore costlysolutions.
ACKNOWLEDGEMENTS
We thank all the participants of the survey and the interviews
as well as all reviewers for their valuable feedback. Apel’s work
has been supported by DFG grant AP 206/14-1 and DFG Grant
389792660 as part ofTRR 248śCPEC.
1364SometimesYou Have to Treat the Symptoms: TacklingModel Drift in anIndustrial... ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore
REFERENCES
[1]KerstinAltmanninger,KerstinKappel,AngelikaKusel,WernerRetschitzegger,
Martina Seidl, Wieland Schwinger, and Manuel Wimmer. 2008. AMOR ś To-
wards Adaptable Model Versioning. In Proceedings of the International Confer-
ence on Model Driven Engineering Languages and Systems (MODELS) - Inter-
national Workshop on Model CoEvolution and Consistency Management . 55ś60.
https://doi.org/10.1.1.159.3404
[2]SvenApel,DonS.Batory,ChristianKästner,andGunterSaake.2013. Feature-
Oriented Software ProductLines - Conceptsand Implementation . Springer. https:
//doi.org/10.1007/978-3-642-37521-7
[3]SvenApel,FlorianJanda,SalvadorTrujillo,andChristianKästner.2009. Model
superimposition in software product lines. In International Conference on Theory
andPracticeofModelTransformations .Springer,4ś19. https://doi.org/10.1007/978-
3-642-02408-5_2
[4]Sven Apel, Christian Kastner, and Christian Lengauer. 2009. Featurehouse:
Language-independent, automated software composition. In 2009 IEEE 31st Inter-
nationalConferenceonSoftwareEngineering .IEEE,221ś231. https://doi.org/10.
1109/ICSE.2009.5070523
[5]ThorstenArendt,EnricoBiermann,StefanJurack,ChristianKrause,andGabriele
Taentzer.2010. Henshin:Advancedconceptsandtoolsforin-placeEMFmodel
transformations.In ProceedingsoftheInternationalConferenceonModelDriven
EngineeringLanguagesandSystems(MODELS) .Springer,121ś135. https://doi.
org/10.1007/978-3-642-16145-2_9
[6]Thorsten Arendt and Gabriele Taentzer. 2013. A tool environment for qual-
ity assurancebased onthe EclipseModeling Framework.In Proceedingsofthe
InternationalConferenceonAutomatedSoftwareEngineering(ASE) .IEEE/ACM,
141ś184. https://doi.org/10.1007/s10515-012-0114-7
[7]Don Batory, Jacob Neal Sarvela, and Axel Rauschmayer. 2004. Scaling step-
wise refinement. Transactions on Software Engineering 30, 6 (2004), 355ś371.
https://doi.org/10.1109/TSE.2004.23
[8]ThorstenBerger,Jan-PhilippSteghöfer,TewfikZiadi,JacquesRobin,andJabier
Martinez.2020. Thestateofadoptionandthechallengesofsystematicvariability
management in industry. Empirical Software Engineering (2020).https://doi.org/
10.1007/s10664-019-09787-6
[9]EnricoBiermann,ClaudiaErmel,andGabrieleTaentzer.2012. Formalfoundation
of consistent EMF model transformations by algebraic graph transformation.
Software and Systems Modeling 11, 2 (2012), 227ś250. https://doi.org/10.1007/
s10270-011-0199-7
[10]CENELEC/EN.2001. 50126:Railwayapplications-Thespecificationanddemonstra-
tion ofReliability . Technical Report. CENELEC/EN.
[11]CENELEC/EN. 2003. 50129: Railway applicationśCommunications, signaling and
processingsystemsśSafetyrelatedelectronicsystemsforsignaling . TechnicalRe-
port.
[12]CENELEC/EN. 2012. 50128: Railway applications-Communication, signalling and
processing systems-Software for railway control and protection systems . Technical
Report. CENELEC/EN.
[13]DianeJCookandLawrenceBHolder.2006. Mininggraphdata . JohnWiley&
Sons.
[14]YaelDubinsky,JuliaRubin,ThorstenBerger,SlawomirDuszynski,MartinBecker,
and Krzysztof Czarnecki. 2013. An exploratory study of cloning in industrial
software product lines. In Proceedings of the European Conference on Software
Maintenance and Reengineering (CSMR) . IEEE, 25ś34. https://doi.org/10.1109/
CSMR.2013.13
[15]Jorge Echeverría, Francisca Pérez, José Ignacio Panach, and Carlos Cetina. 2021.
AnempiricalstudyofperformanceusingClone&OwnandSoftwareProduct
Linesinanindustrialcontext. InformationandSoftwareTechnology 130(2021).
https://doi.org/10.1016/j.infsof.2020.106444
[16]Hartmut Ehrig, Ulrike Prange, and Gabriele Taentzer. 2004. Fundamental theory
for typed attributed graph transformation. In Lecture Notes in Computer Science ,
Vol. 3256.161ś177. https://doi.org/10.1.1.1067.9010
[17]TzillaElrad,OmarAldawud,andAtefBader.2002. Aspect-orientedmodeling:
Bridgingthegapbetweenimplementationanddesign.In InternationalConference
onGenerativeProgrammingandComponentEngineering .Springer,189ś201. https:
//doi.org/10.1007/3-540-45821-2_12
[18]StefanFischer,LukasLinsbauer,RobertoE.Lopez-Herrejon,andAlexanderEgyed.
2016. Avisionforenhancingclone-and-ownwithsystematicreusefordeveloping
softwarevariants. LectureNotesinInformatics(LNI),Proceedings-Seriesofthe
Gesellschaft fur Informatik (GI) P252 (2016), 95ś96. https://doi.org/20.500.12116/
741
[19]Peter D. Grünwald and Abhijit Grunwald. 2007. The minimum description length
principle. MITPress. https://doi.org/10.5555/1213810
[20]IEC.2010. 61508:FunctionalSafetyofElectrical/Electronic/ProgrammableElectronic
Safety-relatedSystems . Technical Report. IEC.
[21]No Magic Inc. 2021. MagicDraw website . Retrieved September 20, 2021 from
https://www.magicdraw.com/
[22]Praveen Jayaraman, Jon Whittle, Ahmed M Elkhodary, and Hassan Gomaa. 2007.
Model composition in product lines and feature interaction detection usingcritical pair analysis. In Proceedings of the International Conference on Model
Driven Engineering Languages and Systems (MODELS) . Springer, 151ś165. https:
//doi.org/10.1007/978-3-540-75209-7_11
[23]Hans Peter Jepsen, Jan Gaardsted Dall, and Danilo Beuche. 2007. Minimally
Invasive Migration to Software Product Lines. In Proceedings of the Software
ProductLineConference(SPLC) .203ś211. https://doi.org/10.1109/SPLINE.2007.30
[24]Cory J Kapser and Michael W Godfrey. 2008. łCloning considered harmfulž con-
sidered harmful: patterns of cloning in software. Empirical Software Engineering
13,6 (2008), 645ś692. https://doi.org/10.1007/s10664-008-9076-6
[25]Christian Kästner, Salvador Trujillo, and Sven Apel.2008. VisualizingSoftware
Product Line Variabilities in Source Code. In Proceedings of the Software Product
LineConference (SPLC) . 303ś312. https://doi.org/10.1.1.143.2730
[26]Timo Kehrer. 2015. Calculation and Propagation of Model Changes based on
User-Level Edit Operations: A Foundation for Version and Variant Management in
Model-DrivenEngineering . Ph.D. Dissertation. Universityof Siegen.
[27]Timo Kehrer, Udo Kelter, and Gabriele Taentzer. 2011. A rule-based approach to
thesemanticliftingofmodeldifferencesinthecontextofmodelversioning.In
ProceedingsoftheInternationalConferenceonAutomatedSoftwareEngineering
(ASE). ACM/IEEE, 163ś172. https://doi.org/10.1109/ASE.2011.6100050
[28]TimoKehrer,ThomasThüm,AlexanderSchultheiß,andPaulMaximilianBittner.
2021. BridgingtheGapBetweenClone-and-OwnandSoftwareProductLines.
InProceedings of the International Conference on Software Engineering (ICSE) .
IEEE/ACM,21ś25. https://doi.org/10.1109/ICSE-NIER52604.2021.00013
[29]Amal Khalil, Juergen Dingel, and Canada Kl. 2013. Supporting the Evolution
of UML Models in Model Driven Software Development: A Survey Technical
Report 2013-602 Schoolof Computing , Queen’s University. February(2013).
[30]JacobKrügerandThorstenBerger.2020. Anempiricalanalysisofthecostsof
clone- and platform-oriented software reuse.In Proceedings of the Joint European
SoftwareEngineeringConferenceandSymposiumontheFoundationsofSoftware
Engineering (ESEC/FSE) . 432ś444. https://doi.org/10.1145/3368089.3409684
[31]LukasLinsbauer,ThorstenBerger,andPaulGrünbacher.2017. Aclassification
of variation control systems. ACM SIGPLAN Notices 52, 12 (2017), 49ś62. https:
//doi.org/10.1145/3136040.3136054
[32]JabierMartinez,WesleyK.G.Assunção,andTewfikZiadi.2017.ESPLA:ACatalog
ofExtractiveSPL AdoptionCaseStudies.In Proceedingsof theSoftwareProduct
LineConference (SPLC) . ACM,38ś41. https://doi.org/10.1145/3109729.3109748
[33]Tom Mens and Pieter Van Gorp. 2006. A taxonomy of model transformation.
ElectronicNotesin TheoreticalComputerScience 152,1-2(2006),125ś142. https:
//doi.org/10.1016/j.entcs.2005.10.021
[34]Tom Mens, Michel Wermelinger, Stéphane Ducasse, Serge Demeyer, Robert
Hirschfeld,andMehdiJazayeri.2005. Challengesinsoftwareevolution.In 8th
InternationalWorkshoponPrinciplesofSoftwareEvolution(IWPSE’05) .IEEE,13ś22.
https://doi.org/10.1109/IWPSE.2005.7
[35]Andreas Metzger and Klaus Pohl. 2014. Software product line engineering
and variability management: achievements and challenges. In Proceedings of
the Conference on Future of Software Engineering (FOSE) . ACM, 70ś84. https:
//doi.org/10.1145/2593882.2593888
[36]Siegfried Nijssen and Joost N. Kok. 2005. The Gaston tool for frequent subgraph
mining.Electronic Notes in Theoretical Computer Science 127, 1 (2005), 77ś87.
https://doi.org/10.1016/j.entcs.2004.12.039
[37]Richard F Paige, Nicholas Matragkas, and Louis M Rose. 2016. Evolving models
in Model-Driven Engineering: State-of-the-art and future challenges. Journal of
SystemsandSoftware 111(2016),272ś280. https://doi.org/10.1016/j.jss.2015.08.047
[38]TristanPfofe,ThomasThüm,SandroSchulze,andInaSchaefer.2016. Synchro-
nizing software variants with VariantSync. In Proceedings of the Software Product
Line Conference (SPLC) . ACM, 329ś332. https://doi.org/10.1145/2934466.2962726
[39]Christopher Pietsch, Timo Kehrer, Udo Kelter, Dennis Reuling, and Manuel
Ohrndorf. 2015. SiPLśA Delta-Based Modeling Framework for Software Product
Line Engineering. In Proceedings of the International Conference on Automated
SoftwareEngineering(ASE) .IEEE,IEEE,852ś857. https://doi.org/10.1109/ASE.
2015.106
[40]Christopher Pietsch, Udo Kelter, Timo Kehrer, and Christoph Seidl. 2019. Formal
foundations for analyzing and refactoring delta-oriented model-based software
product lines. In Proceedings of the Software Product Line Conference (SPLC) .
207ś217. https://doi.org/10.1145/3336294.3336299
[41]Klaus Pohl, Günter Böckle, and Frank Linden. 2005. Software Product Line En-
gineering:Foundations,Principles,andTechniques . Springer. https://doi.org/10.
1007/3-540-28901-1
[42]MichaelPolanyi.1958. PersonalKnowledge:TowardsaPostCriticalPhilosophy .
Universityof ChicagoPress.428pages.
[43]LouisMathewRose.2011. StructuresandProcessesforManagingModel-Metamodel
Co-evolution . Ph.D. Dissertation. Universityof York.
[44]JuliaRubin,KrzysztofCzarnecki,andMarshaChechik.2013. Managingcloned
variants: A framework and experience. In Proceedings of the Software Product
Line Conference (SPLC) . ACM, 101ś110. https://doi.org/10.1145/2491627.2491644
[45]JuliaRubin,AndreiKirshin,GoetzBotterweck,andMarshaChechik.2012.Manag-
ingforkedproductvariants.In ProceedingsoftheSoftwareProductLineConference
(SPLC). ACM,156ś160. https://doi.org/10.1145/2362536.2362558
1365ESEC/FSE ’22, November14ś18, 2022,Singapore, Singapore Christof Tinnes, Wolfgang Rössler, Uwe Hohenstein, TorstenKühn,Andreas Biesdorf,andSvenApel
[46]Ina Schaefer. 2010. Variability Modelling for Model-Driven Development of
SoftwareProductLines. VaMoS10(2010), 85ś92.
[47]Maik Schmidt and Tilman Gloetzner. 2008. Constructing difference tools for
modelsusingtheSiDiffframework.In ProceedingsoftheInternationalConference
on Software Engineering (ICSE): Companion Proceedings . ACM/IEEE, 947ś948.
https://doi.org/10.1145/1370175.1370201
[48]ThomasSchmorleizandRalfLämmel.2014. Similaritymanagementviahistory
annotation. SATToSE (2014), 45.
[49]FelixSchwägerl.2018. VersionControlandProductLinesinModel-DrivenSoftware
Engineering . Ph.D. Dissertation.
[50]Shane Sendall and Wojtek Kozaczynski. 2003. Model transformation: The heart
and soul of model-drivensoftware development. IEEESoftw. 20,5 (2003), 42ś45.
https://doi.org/10.1109/MS.2003.1231150
[51]Stefan Stănciulescu, Thorsten Berger, Eric Walkingshaw, and Andrzej Wąsowski.
2016. Concepts,operations,andfeasibilityofaprojection-basedvariationcontrol
system.In ProceedingsoftheInternationalConferenceonSoftwareMaintenance
and Evolution(ICSME) . IEEE,323ś333. https://doi.org/10.1109/ICSME.2016.88
[52]Dave Steinberg, Frank Budinsky, Ed Merks, and Marcelo Paternostro. 2008. EMF:
eclipsemodelingframework . Pearson Education.
[53]Ragnhild Van Der Straeten, Tom Mens, and Stefan Van Baelen. 2009. Challenges
in model-driven software engineering. In Lecture Notes in Computer Science ,
Vol. 5421.35ś47. https://doi.org/10.1007/978-3-642-01648-6_4[54]ChristofTinnes,TimoKehrer,Joblin.Mitchell,UweHohenstein,AndreasBiesdorf,
and Sven Apel. 2021. Learning domain-specific edit operations from model
repositorieswithfrequentsubgraphmining.In ProceedingsoftheInternational
Conference on Automated Software Engineering (ASE) . ACM/IEEE. https://doi.
org/10.1109/ASE51524.2021.9678698
[55]BirgitVogel-Heuser,ChristophLegat,JensFolmer,andStefanFeldmann.2014.
Researchingevolutioninindustrialplantautomation:Scenariosanddocumenta-
tion of the pick and place unit . Technical Report. Institute of Automation and
Information Systems, TechnischeUniversitätMünchen.
[56]Nathan Weston, Ruzanna Chitchyan, and Awais Rashid.2009. A framework for
constructing semantically composable feature models from natural language
requirements. In Proceedings of the Software Product Line Conference (SPLC) . 211ś
220.https://doi.org/10.5555/1753235.1753265
[57]Kentaro Yoshimura, Dharmalingam Ganesan, and Dirk Muthig. 2006. Assess-
ing merge potential of existing engine control systems into a product line. In
InternationalWorkshoponSoftwareEngineeringforAutomotiveSystems .61ś67.
https://doi.org/10.1145/1138474.1138485
[58]ShuruiZhou,BogdanVasilescu,andChristianKästner.2019. Whatthefork:A
studyofinefficientandefficientforkingpracticesinsocialcoding.In Proceedings
of the Joint European Software Engineering Conference and Symposium on the
FoundationsofSoftwareEngineering(ESEC/FSE)(ESEC/FSE2019) .ACM,NewYork,
NY, USA,350ś361. https://doi.org/10.1145/3338906.3338918
1366