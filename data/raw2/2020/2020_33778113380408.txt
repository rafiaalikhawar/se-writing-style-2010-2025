Studying the UseofJava Logging Utilities inthe Wild
Bo
yuanChen
York University
Toronto, Canada
chenfsd@cse.yorku.caZhenMing (Jack)Jiang
York University
Toronto,Canada
zmjiang@cse.yorku.ca
ABSTRACT
Softwareloggingiswidelyusedinpractice.Logshavebeenused
for a variety of purposes like debugging, monitoring, security com-
pliance, and business analytics. Instead of directly invoking the
standardoutputfunctions,developersusuallyprefertouselogging
utilities(LUs)(e.g., SLF4J),whichprovideadditionalfunctionalities
likethread-safetyandverbositylevelsupport,toinstrumenttheir
source code. Many of the previous research works on software
logging are focused on the log printing code. There are very few
worksstudyingtheuseofLUs,althoughnewLUsareconstantly
being introduced bycompanies andresearchers. In thispaper,we
conductedalarge-scaleempiricalstudyontheuseofJavaLUsin
the wild. We analyzed the use of 3 ,856 LUs from 11,194 projects
inGitHubandfoundthatmanyprojectshavecomplexusagepat-
ternsforLUs.Forexample,75.8%ofthe large-sizedprojectshave
implemented their own LUs in their projects. More than 50% of
theseprojectsuseatleastthreeLUs.Weconductedfurtherquali-
tative studies to better understand and characterize the complex
use of LUs. Our /f_indings show that diﬀerent LUs are used for a
varietyofreasons(e.g.,internationalizationofthelogmessages).
Some projects develop their own LUs to satisfy project-speci/f_ic
loggingneeds(e.g.,de/f_iningtheloggingformat).Multipleusesof
LUs in one project are pretty common for largeandvery large -
sized projects mainly for context like enabling and con/f_iguring the
logging behavior for the imported packages. Interviewing with 13
industrialdevelopersshowedthatour/f_indingsarealsogenerally
trueforindustrialprojectsandareconsideredasveryhelpfulfor
themtobettercon/f_igureandmanagetheloggingbehaviorfortheir
projects. The /f_indings and the implications presented in this paper
will be useful for developers and researchers who are interested in
developingandmaintainingLUs.
KEYWORDS
empirical software engineering,logging code,logging practices;
ACMReference Format:
BoyuanChenandZhenMing(Jack)Jiang.2020.StudyingtheUseofJava
LoggingUtilitiesintheWild.In 42ndInternationalConferenceonSoftware
Engineering(ICSE’20),May23–29,2020,Seoul,RepublicofKorea. ACM,New
York, NY, USA,12pages. https://doi.org/10.1145/3377811.3380408
Permissionto make digitalor hard copies of allorpart ofthis work for personalor
classroom use is granted without fee provided that copies are not made or distributed
forpro/f_itorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
onthe/f_irstpage.Copyrights forcomponentsofthisworkownedbyothersthanthe
author(s)mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,or
republish,topostonserversortoredistributetolists,requirespriorspeci/f_icpermission
and/or afee. Request permissionsfrom permissions@acm.org.
ICSE’20, May 23–29,2020, Seoul, Republic ofKorea
©2020 Copyright heldby the owner/author(s). Publication rightslicensed to ACM.
ACM ISBN 978-1-4503-7121-6/20/05...$15.00
https://doi.org/10.1145/3377811.33804081 INTRODUCTION
Execution logs (a.k.a., logs) have been used widely in practice for a
varietyofpurposes(e.g.,systemmonitoring[ 53,62],failurediag-
nosis [79,80], and business analytics [ 6,41]). Logs are generated
duringruntimebytheoutputstatementsthatdevelopersinsertinto
thesourcecode.Insteadofdirectlyinvokingthestandardoutput
functionslike System.out.print ,developersprefertoinstrument
their systems using logging utilities (LUs) (e.g., SLF4J[64] for Java
andspdlog[65] for C++) due to additional functionalities like
thread-safety (synchronized logging in multi-threaded systems),
data archival con/f_iguration (automated rotation of the log /f_iles),
andverbosity levels (controlling the amount of logsoutputted).
Unlike many of the software engineering tasks (e.g., code refac-
toring[15]andreleasemanagement[ 28]),therearenowell-de/f_ined
guidelines for software logging. Recently, there have been many
researchworksdevotedtotheareaofwhere-to-log(decidingthe
appropriateloggingpoints)[ 11,16,80,85,87],what-to-log(provid-
ing suﬃcient execution context in the logging code) [ 25,38,82],
and how-to-log (developing and maintaining high quality logging
code) [9,10,39,40,81]. However, all of these works focus on im-
provingthequalityoflogprintingcode(e.g., LOG.info(/quotedbl.VarUser /quotedbl.Var
+ username + /quotedbl.Var authenticated/quotedbl.Var) ).Thereareonlytworesearch
works on the migration [ 33] and the con/f_iguration [ 86] of the LUs.
Itis important to study the use of LUs dueto these three reasons:
Measuring the Adoptions of the LUs : Although there are al-
ready many LUs available (e.g., [ 1,42,43,64]), new LUs are contin-
uously introduced by companies (e.g., Flogger from Google [ 19])
and researchers (e.g., NanoLog [ 78] and Log++ [ 48]). It is not clear
whether theseLUs are adoptedandusedinthe wild.
Understanding the Complex Use of the LUs : Incorporating
multipleLUs inone project may causevarious issues during com-
pilation[ 45,66],deployment[ 50,68],andruntime[ 26,27]).How-
ever,manysoftwaresystemsstillusemorethanoneLUsintheir
projects[76].Forexample, Hadoop,whichisaverywell-maintained
popularopensourceBigDataplatform,containsnotonlysixexter-
nal LUs (Apache Commons Logging ,java.util.logging ,Log4j
1.x,Log4j 2,SLF4J,Jetty logging )andimplementstheirown
LUintheirproject. IntelliJ Idea ,whichisaverypopularIDE,
uses12LUsintheirproject.Itisimportanttostudythisphenomena
in order to suggest best practices for the system developers and to
identifyfuture directions for the LU designers andresearchers.
Assessing the Impact of LUs on the Logging Code : On one
hand, the structure of logging code is a result of adopting cer-
tain LUs.For example,itisgenerally recommendedtospecify the
logging needs as rules via Aspect Oriented-Programming (AOP)
constructsto improve system modularity [35] and use centralized
logging[30]tosupportinternationalization(a.k.a.,outputtingthe
logmessagesindiﬀerenthumanlanaguages).Ontheotherhand,
extra care are needed in order to cope with the complex use of LUs
3972020 IEEE/ACM 42nd International Conference on Software Engineering (ICSE)
ICSE ’20, May 23–29, 2020,Seoul,Republicof Korea Bo yuan Chen andZhenMing (Jack)Jiang
inoneproject.Forexample,manyprojectsnowadaysreuseexisting
functionalitiesbyimportingthird-partypackages,whichalsouse
LUs.However,thereisnoempiricalstudytoassesstheimpactof
the logging code due to the use of the LUs.
Inthispaper,wehaveperformedalarge-scaleempiricalstudy
ontheuseofJavaLUsinthewild.WefocusonJava,becauseitis
currentlyrankedasthemostpopularprogramminglanguageinthe
world basedon the TIOBEindex [ 73]. Many popularsoftware sys-
tems(e.g.,Android-basedmobileapplications[ 54,69],IDEs[13,29],
webservers[ 3,59],andBigDataplatforms[ 2,24])areimplemented
inJavaandloggingisprelevantinthesesystems[ 8,83].Wehave
examined11,194opensourceJava-basedprojectsinGitHub,which
uses 3,856 LUs. We have uncovered four important /f_indings and
implications.Toensuretheusefulnessandgeneralizabilityofour
/f_indings from open source systems, we also interviewed 13 in-
dustrial developers on the use of LUs. We summarize our main
contributionsand/f_indingsas follows:
•Thisisthe/f_irstempiricalstudyonthecomplexuseofLUs
in the wild.
•3,856 LUs are currently being used by 11,194 projects in
GitHub.ThenumberofusedLUsincreasesasthesystems
growbigger,aslarger-sizedprojectsusuallyreuseexisting
functionalitiesbyimportingthird-partypackages,whichalso
use LUs. Many projects also implement their own LUs to
satisfy project-speci/f_ic needs. Our /f_indings raise developers’
awareness onthe complexity of theLUs in their systems as
well as the need to manage these LUs to better monitor and
debug systems’runtime behavior.
•Inadditiontothequantitativestudy,wehavealsoconducted
a qualitative study to understand and characterize the ratio-
nalesbehindthecomplexuseofLUsfordiﬀerentprojects.
Such results can guide researchers to propose more general
logging solutions for variouslogging context.
•Tosupportindependentveri/f_icationorfurtherresearchon
the use of Java LUs, we have provided a replication pack-
age[70]inthispaper.Thispackagecanbeusefulforother
researcherswhoareinterestedinstudyingandimproving
the logging practices.
PaperOrganization. Therestofthispaperisorganizedasfollows.
Section 2 provides an overview of our approach and describes our
studied projects. Section 3 and 4 quantitatively and qualitatively
studytheuseoftheLUsinthewild.Section5explainsourinter-
view process anddescribes ourobservations. Section 6discusses
the signi/f_icance of our /f_indings and presents some future work.
Section7describestherelatedworks.Section8explainsthethreats
to validity andSection 9concludes the paper.
2 OVERVIEW
In this section, we will provide an overview of our approach to
empiricallystudyingtheuseofJavaLUsinthewildanddescribe
our studiedprojects.
2.1 OurApproach
Wefollowedamixed-methodsapproachcharacterizedbyasequen-
tial explanatory strategy [ 12] to analyze the use of LUs. We /f_irst
extractedthesourcecodefrompopularJava-basedGitHubprojects(Section 2). Then we performed a quantitative study on measuring
the degree of adoption of diﬀerent LUs as well as comparing the
numberofusedLUsacrossdiﬀerentprojects(Section3).Wealso
tracked the number of projects which also implement their own
LUs.Afterwards,weperformedaqualitativestudy(Section4)by
manuallystudyingtheuseofLUsamongdiﬀerentprojects.Since
our study is performed on open source projects, we also cross-
validatedour/f_indingsbyinterviewing13experienceddevelopers
whowork oncommerical systems(Section 5).
2.2 Studied Projects
To studytheuse ofJavaLUs inthewild, we focused on analyzing
Java-basedprojectsfromGitHub.GitHubiscurrentlythelargest
codehostingsitewithmorethan100millionprojectsasofApril
2019[17].WebuiltalocalGHTorrent[ 20]databasefromtheMySQL
dump.Thisdatabase,whichwaslastupdatedon2019-06-01,con-
tainsthemetainformationofaprojectsuchasthecorresponding
GitHub URL, the project name, and the main programming lan-
guage(s). We extracted a list of GitHub URLs for all the Java-based
projectsfor post-processing.
We further /f_iltered the list of GitHub projects to avoid potential
perils in our analysis [ 34]. One GitHub project may be forked or
clonedbyothers,whosesourcecodecanbeidenticalorverysimilar
totheorignalone.Thiswouldintroducenoiseintoourstudy.Hence,
we only selected projects which are neither a fork nor a clone of
other projects. Furthermore, the number of stars that a project has
indicatesitspopularity.Similartopriorworks[ 5,36,58],wefurther
/f_ilterd the list of projects to ensure they have at least 30 or more
stars. We endedup with25 ,611 Javaprojects. We downloadedthe
sourecodeforthemostrecentreleasesoftheseprojectsbyinvoking
the GitHubAPIs.
3 QUANTITATIVE STUDY
In this section, we /f_irst analyzed the selected projects to identify
thelist of LUs thatare used.Then we measured the degree of LUs
whichareadoptedandused.Finally,wecomparedtheuseofLUs
among diﬀerentprojects.
3.1 Identifying LUs in Each Project
Wedevelopedaheuristic-basedtechniquetoidentifyLUsineach
project.First,weexcludedJava/f_iles,whichwereeitherina test
folder or containing the keyword of “test” in their /f_ile names, as
they are probably not related to the core features of the projects
under study. Then we used JDT [ 31] to parse the remaining Java
/f_ilestoidentifya listof importedstatementsand functioninvoca-
tions for eachJavaclass.We made sure these imported classes are
used by checking if there is one or more methods been invoked
in that class. We further /f_iltered the list of import statements in
each Java class, so that only packages or Java classes whose names
contain patterns like “logging”, “logger” or “.log.” were kept. These
packagesorclassesareconsideredasLUs.ForlogginginAspect-
Oriented Programming (AOP), we /f_irst identi/f_ied Java /f_iles with
import statements that contain “aspectj”. Since AspectJ can do
more thanlogging, we subsequently parsed the Java /f_iles to check
whether they use any ofthe LUs identi/f_iedbythe above rules.
398Studying the Use of Java LoggingUtilities in the Wild ICSE ’20, May 23–29, 2020,Seoul,Republic of Korea
If a project used more than one LUs and their package names
weresimilar,wemergedthemasoneLU.Forexample,ifthefollow-
ingtwoLUs, Foo.Bar.Baz.ConsoleLogger andFoo.Bar.Baz.File
Logger,wereidenti/f_iedinoneproject,wemergedthemintoone
LU (Foo.Bar.Baz).
Toverifythecorrectnessofourheuristic-basedtechnique,we
randomly sampled 441 /f_iles and manually examined the identi-
/f_ied LUs. Our technique yield an precision of 96%. Some of the
Java classes are misclassi/f_ied as LUs as the identi/f_ied log-related
Java classes did not implement log printing functions. For exam-
ple,LoggerProvider.java intheNinjaframework[ 46]wasnot
considered as an LU, since this class did not provide any log print-
ing functions other than a utility function that returns an SLF4J
logging object.
3.2 MeasuringtheAdoptionsofLUs
We further classi/f_ied the size of these projects into the following
/f_ivebinsbasedontheirnumberofJavaclassesusingthede/f_initions
from [47]. Table 1 shows the results. For example, there are a total
of761large-sizedprojects,whosenumberofJavaclassesisbetween
1,000 and 5,000. Among them, 728 projects (a.k.a., 95 .7%) adopt
oneor moreLUs.Thereis acleartrend ofincreasingadoptionsof
LUs as the size of the projectsgetbigger.
Forthesubsequentstudies,weremovedalltheprojectswhich
didnotuseanyLUs,sincetheyarenotrelevanttothispaper.We
alsoexcludedtheprojectswhosesizewas verysmall,asmanyof
them are not considered as useful projects (e.g., trial projects for
self-studying,andcollectionsofcodesnippets).After/f_iltering,there
were11,194Javaprojectsremaining,whichused3 ,856distinctLUs.
Table 1: Measuring the Adoptions of LUs Among the Java-
based GitHubprojects.
Bins Total# of % ofProjects
(#
ofclasses) Projects Used LUs
Very Small [0,20) 11,390 43.2%
Small [20,100) 7,781 72.5%
Medium [100,1000) 5,576 84.3%
Large [1000,5000) 761 95.7%
Very Large [5000 ,∞) 103 97.1%
Total 25,611 63.1%
3.3 ComparingtheUse ofLUs AmongProjects
Depending on where these LUs were implemented, we further
classi/f_ied the list of used LUs in each project as External LU (ELU) s
orInternal LU (ILU) s. It is an ELU, if the implementation of this
LU is not inside the project under study. Otherwise, it is an ILU.
For example, Hadoopuses /f_ive diﬀerent ELUs: Apache Commons
Logging,java.util.logging ,Log4j 1.x ,Log4j 2,SLF4J,Jetty
logging and implements its own ILU, which is mainly used for
auditingpurposes.Table2showstheresultsofthepercentageof
projectsthatuseELUs,ILUs,orboth.Forexample,amongallthe
728Large-sized projects that used LUs, 95 .3% of them are ELUs,
75.8%ofthemimplementedtheirownILUsintheirprojects,and05101520 mall✁edium✂arge✄☎✆✝ ✂arge
Size ✞✟ ✠ ✡☛ ☞✌ ✞ ✍☛✎ ✠Number of LUs
✏
✑
✒
✓
✔
✕
✖
✗
✘
✙
✚
✛
✜
✢
✒
✘
✣
Figure1: TheDistritbutionsoftheNumberofAdoptedLUs
in
Each ProjectGrouped by the Sizeofthe Projects.
71.2% used bothtypes of LUs. Overall, there are 866 ELUs used by
11,194 projects. 26.7% of the studied projects have implemented
their ownILUs.
ThepercentageofprojectsthatadoptedELUsandILUsshown
inthesecondandthethirdcolumnsincreasesasthesizeofprojects
increases. When comparing the LUs within the same bins, there
arealwaysmore projectsusingELUsthanILUs.However,almost
allofthe verylarge -sizedprojectsimplementedtheirownLUs.The
combineduseofILUsandELUsalsoincreasedramaticallyasproject
sizes become largeorverylarge.
Table 2: Comparing the Complexity of the Uses of LUs
Among Projects.
Project %ofProjectsUsing
Size (E
LU ILU Both )
Small (97.2% 12.7% 9.9%)
Me
dium (95.3% 34.6% 29.9%)
Large (95.3% 75.8% 71.2%)
Very Large (97.0% 92.0% 89.0%)
Total (96.3% 26.7% 23.0%)
We further examined the number of LUs that were used in each
project. For each project, we counted the number of LUs, which
included both ELUsand ILUs.We grouped projects based on their
sizesandvisualizedtheirdistributionsusingboxplotsinFigure1.
The width of the boxplot is proportional to the number of projects
in that group. Since there are much more small-sized projects in
ourstudy,itisthewidest.Thereddashedlineconnectsthemedian
points for eachbin. The medianusagefor the small-sizedprojects
is one. It increases as the size of the project increases. For the very
large-sized projects, the median number of LUs used is four. The
project that adopts the biggestnumber of LUs is within the group
ofverylarge -sizedprojects. It isan enterprise webplatform ([ 57]),
in which21 LUs are used!
399ICSE ’20, May 23–29, 2020,Seoul,Republicof Korea Bo yuan Chen andZhenMing (Jack)Jiang
We conducted a Kruskal-Wallistest [ 37]to statistically checkif
their distributions are identical. The p-valuewas smaller than 0.05,
whichindicatedstatisticallysign/f_icantdiﬀerencesamongthedis-
tributions of LUs across diﬀerent project sizes. This clearly demon-
strates the complexityof the use of LUs in our studiedprojects.
The/f_indingsinourquantitativestudiesmotivatedustoconduct
the subsequent qualitative studies (Section 4) to /f_igure out the
rationales behindthem.
Findings: (1)Thereare3,856LUs,ofwhich866areELUs,being
usedbyover11,000projects.(2)96.3%ofthestudiedprojectsadopt
atleastoneELUand26.7%adoptatleastoneILU.(3)Astheproject
sizebecomes larger, moreLUs willbeintegrated intothe project.
This isespeciallythe casefor largeandverylarge -sizedprojects.
Implications: The LUs are used widely among diﬀerent Java
projects.However,asthesizeoftheprojectincreases,thecomplex-
itityoftheuseofLUsalsoincreases.MultipleLUsareusedinmany
of themediumtovery large -sized projects. This is contradictive
to the common understanding of developers [ 71,74,76,77] and
researchers[ 33],asonlyahandfulofpopularJavaLUs(e.g., Log4j
1.x,Log4j 2,and SLF4J) are comparedanddiscussed.
4 QUALITATIVE STUDY
In this section,we conducteda qualitativestudy onthe useof the
LUs.Wemanuallyexaminedtheirsourcecodeinordertoanswer
the following RQs:
•RQ1:WhataretheexternalLUsbeingusedinthewild?
AsshowninSection3,therewere866ELUsbeingusedby
11,194 projects. The goal of this RQ is to characterize the
rationales of diﬀerentELUs.
•RQ2:WhydodevelopersimplementILUsintheirprojects?
26.7% ofthe studiedprojects have implementedtheir own
internal LUs. This is especially the case for the largeorvery
large-sizedprojects,inwhich75.8%and 92.0% ofthemcon-
tainILUs.ThegoalofthisRQistoextracttheproject-speci/f_ic
logging needsby studyingthe use of ILUs.
•RQ3: How are multiple LUs used in the wild? Manyof
the studied projects, especially for the largeorvery large -
sized projects, use multiple LUs. The goal of this RQ is to
characterizetheusagecontextassociatedwithusingmultiple
LUs inone project.
4.1 RQ1: WhataretheexternalLUs beingused
in thewild?
In this RQ, we will characterize the rationales behind the use of
individualELUs.ForeachELU,wecalculatedthenumberofprojects
that adopted it. We sorted ELUs by their popularities (a.k.a., the
numberofprojectsthatusedthem)andselectedthetop-100most
popular ELUs,whichare used by95%of the studiedprojects.
Foreachofthese100ELUs,wemanuallyexaminedtheonline
documentation, release notes, and blog posts for these ELUs to un-
derstandtheirfeaturesandcapabilities.Thenwestudiedthesource
codeoftheprojectswhichusedthemtoextracttheirusagecontext.
Our /f_indings are summarized in Figure 2. Generally, there are four
reasons behind the use of ELUs: (1) General-purpose logging, (2)
LU interactions, (3) Internationalization, and(4) Modularization.4.1.1 General-purposeLogging. General-purposelogging refersto
themostcommonloggingusagecontext,whichrequires:(1) ver-
bositylevels,whicharetocontroltheamountoflogmessageout-
putted;(2) con/f_igurations,whichareusedtospecifyvariousoptions
and policies to format and output the logs; and (3) thread safety,
which is to ensure the logs are recorded in sequence for a multi-
threadedsystem.
Amongthetop-10most popular LUs, 8are forgeneral-purpose
logging.SixELUs( SLF4J,Log4j 1.x ,Log4j 2,java.util.logging ,
Apache Commons Logging ,andLogBack)areconsideredasgeneral-
purpose LUs for desktop or server-based systems and two ELUs
(android.util.Log and Timber [ 72]) are general-purpose LUs for
Android-based systems. As shown in Figure 2, a log printingfunc-
tionfromageneral-purposeELUgenerallyconsistsoffourparts:
theloggingobject( LOG),theverbositylevel( debug),thestatictexts
describingtheloggingcontext( /quotedbl.Varparsing File/quotedbl.Var ),andthedynamic
contents revealingthe runtimeinformation (file).
Among all the desktop or server-based ELUs, SLF4Jis the most
popular ELU due to its improved performance and compatibility
withotherLUs[ 71,74,76].TherearemanyAndroidprojects(4 ,477)
in our study. Most of them are small-sized projects that used the
defaultELUfrom Android SDK (i.e., android.util.Log).
4.1.2 LU Interactions. LU interactions concerns about con/f_igurat-
ingandcontrollingtheloggingbehaviorfortheimportedpackages.
Many Java-based projects are built on top of existing packages,
many of which contain ILUs. In order to con/f_igure and control the
logging behavior for one imported package, developers have to in-
voketheloggingAPIsfromthispackage.Forexample,161projects
use theokhttp3 [52] to send and receive data from network. In
order to enable logging for the okhttp3 package, developers of
thebitcoin-wallet project[7],whichisaBitcoinpaymentapp
forAndroid,invokesthe addInterceptor methodfrom okhttp3’s
ILU as shown in Figure 2. 83 out of the top-100 ELUs in this study
are used for thisreason. Hence, LU interactions is the main reason
why there are somanyELUsusedin the wild.
4.1.3 Internationalization. Internationalization concernsaboutadapt-
ingthelogstootherhumanlanguages(e.g.,GermanorChinese).In
ordertosupportinternationalization,developers/f_irstneedtocreate
a centralized /f_ile, which stores a list of pre-de/f_ined log message
templates.Eachofthelogmessagetemplatecomprisesfourparts:
the verbosity level, the parameterized string, the logging methods,
andthe messageID.
The third row of Figure 2 shows one such example. This code
snipeetisfrom Hibernate-ORM ,whichisapopularObject-Relational
Mapping(ORM)framework.Insidethecentralized/f_ile, CoreMessage
Logger.java ,therearetwoannotations( @LogMessage and@Message )
for each logging method and the message ID. @LogMessage con-
tains a key/value pair, which de/f_ines the verbosity level ( level
= WARN) of this log message. @Message provides the parameter-
izedstring,whichcontainsthestatictexts( I/O reported cached
file could not be found )andplaceholdersforparameters %s.
The message ID is an integer, that can be used to uniquely identify
thislogmessage.Theloggingmethodwhichimplementsthislog
messageis cachedFileNotFound .Ittakesintwoparameters:the
/f_ilepathandtheerrormessage.Inordertooutputthislogmessage,
thecachedFileNotFound methodneedstobeinvoked.Thecode
400Studying the Use of Java LoggingUtilities in the Wild ICSE ’20, May 23–29, 2020,Seoul,Republic of Korea
Rationales%of Top-
100 ELUs% of 
ProjectsTop 2 LUs 
(
where applicable)Code Examples
General-
Purpose12% 89.9%androi  .util.Log (1)
SLF4J(2)
LU Interactions 83% 14.3%okhttp3.logging.HttpLog
gingInterceptor (8)
io.netty.handler.logging.
LoggingHandler (11)
Internationaliza
tion4%1.0%JBoss Logging (15)
org.glassfish.jersey.
logging (29)
Modularization 1% 1.7% AOP Logging (1 ✁)static final Logger LOG = LoggerFactory.getLogger (Configuration.class );
...
LOG.debug("parsing File " + file);
Coniguration.java (Hadoop, using SLF4J)
@Around("execution(* org.unitedinternet.cosmo.service .
ContentService.getRootItem
(..)) &&" + "args(user)")
public Object checkGetRootItem( ProceedingJoinPoint pjp, User user)
throws Throwable {
LOG.debug("in checkGetRootItem(user)");
...
public class StandardContentService implements ContentService {
...
public HomeCollectionItem
getRootItem(User user) ...SecurityAdvice.java (cosmo using AOP Logging)
StandardContentService.java (cosmo using AOP Logging )@LogMessage(level = WARN)
@Message(value = "I/O reported cached file could not be found : %s : %s", 
id = 23)
void cachedFileNotFound
(String path, FileNotFoundException error);
...
catch ( FileNotFoundException
e ) {
log.cachedFileNotFound( serFile.getName(), e );
}CoreMessageLogger.java (Hibernate -ORM, using JBoss Logging)
CacheableFileXmlSource.java (Hibernate -ORM, using JBoss Logging)HttpLoggingInterceptor loggingInterceptor = new HttpLoggingInterceptor();
...
final OkHttpClient.Builder
httpClientBuilder = new OkHttpClient.Builder();
...
httpClientBuilder.addInterceptor (loggingInterceptor);
Constants.java (bitcoin -wallet, using okhttp3.logging.HttpLoggingInterceptor )
Figure 2: The Rationales Behindthe Use of Top-100 Most Used ELUs.
snippetin CacheableFileXmlSource.java showsoneexampleof
how this log message can be invoked during runtime. It is used
within acatch blockto handle an exception.
To translate the log messages into diﬀerent human languages,
developers need to create a translation property /f_ile and de/f_ine
internationalized labels for each log message. For example, the
property/f_ile log_en_FR.properties wouldcontainalltheFrench
labels for allof the above English logmessages.
The most common ELU for Internationalization is JBoss Log-
ging[30].AlthoughtherearethreeotherELUs,whichalsosupport
this usage context,they are just wrappers of the JBoss Logging.
4.1.4 Modularization. Modularization concerns about improving
the modularity of the logging code. Logging code is a cross-cutting
concern, as it inter-mixes with the feature code. Only one ELU,
AOP-based logging, is used for this reason. AOP is a programming
paradigm, which is designed to improve modularity by reducing
theamountofcross-cuttingconcerns[ 35].Loggingisconsidered
as one of its common use cases.
In order to perform AOP-based logging, developers need to pro-
vide rules through aspect /f_iles. A typical aspect /f_ile consists of
pointcuts and advice. A pointcut is to de/f_ine the point of execution
where thecross-cutting concern (e.g. logging)needs to be applied.
An advice is the additionalcode (e.g.logging code) instrumented.Figure 2 shows a real-world example from cosmo, a calendar
server that implements CalDAV protocol. The /f_ile Security
Advice.java istheaspect/f_ile.Theinstrumentedpoints(pointcuts)
arede/f_inedthroughtheannotation.Inthisexample,theannotation
@Around means both the beginning and the end of the methods
will be instrumented. The value within the brackets specify the
instrumentedmethods.Inthisexample,anymethodswiththename
getRootItem withinpackage org.unitedinternet.cosmo.serv
ice.ContentService and parameter type as userwill be instru-
mented. The instrumented code (advice) is de/f_ined via method
checkGetRootItem .Itcontainsalogprintingstatementwiththe
message in checkGetRootItem and the user name. The code
snippet in StandardContentService.java shows how a log mes-
sage is actually generated. This class implements the interface
ContenService , which is within the speci/f_ied package. It contains
a method getRootItem , of which the parameter is user. There-
fore,thismethodquali/f_iesthepre-de/f_inedinstrumentedruleabove.
Hence,duringruntime,theaboveloggingstatmentwillbeexecuted
while entering and exiting this method. In general, only 2% of our
studied projects adopted AOP-based logging. This matches with
previous empirical studies [ 4,51], which indicated the very limited
use ofAOPin the wild.
401ICSE ’20, May 23–29, 2020,Seoul,Republicof Korea Bo yuan Chen andZhenMing (Jack)Jiang
Findings: TherearefourmainreasonsbehindtheuseofELUs:(1)
General-purpose logging, (2) LU interactions, (3) Internationaliza-
tion, and (4) Modularization. Majority of the projects use ELU for
general-purposelogging.83outofthetop-100mostlyusedELUs
areusedfor LUinteractions.SomeELUsprovideuniquefeatures
likeinternationalization andmodularization,buttheyareonlyused
by avery small number of projects.
Implications: Many ELUs are used, as developers need to enable
andcon/f_iguretheloggingbehaviorfortheimportedpackages.It
is important to manage these LUs to better monitor and debug
systems’ runtimebehavior. An existing study [ 23] showsthat log
con/f_igurations are one of the main source of errors for Java-based
projects.Unfortunately,onlyonetool[ 86]is developedtodetect
invalid loggers in the con/f_iguration /f_iles. To eﬀectively monitor
anddebugsystems’behavior,developersneedto/f_igureouthow
tocon/f_igure theloggingbehavior for theimportedpackages and
how to interact these LUs with the LUs in their own projects.
Hence,techniquestorecovertheloggingarchitectureandconduct
automaticcon/f_iguration are needed.
4.2 RQ2: Why do developersimplement ILUs
in
their projects?
It is not clear why many projects have still implemented their ILUs
eventhere are 866ELUs available in the wild. To investigate the ra-
tionalesbehindthis,outof2 ,990projectswhichhaveimplemented
ILUs, we randomly selected 341 of them for close manual examina-
tion.Thiscorrespondstoacon/f_idencelevelof95%withacon/f_idence
interval of±5%. We used the strati/f_ied samplingtechnique[ 21]to
ensurerepresentativesamplesareselectedfromprojectsofdiﬀer-
entsizes.Theportionofthesampledprojectswithindiﬀerentsized
projectsisequaltotherelativeweightofthetotalnumberofthe
projects with that size. For example, there are a total of 721 small-
sizedprojectswhichcontainILUs.Hence82(721
2990×341)small-sized
projectsare selected.
Foreachselectedproject,wecarefullystudiedhowtheirILUsare
being used by reading through the source code. We also examined
the relevant commit logs, issue reports, and pull requests [ 22] to
lookfortherationalesonwhyILUsareimplemented.Intheend,we
haveidenti/f_iedthreeproject-speci/f_icloggingneedsasshowninFig-
ure 3: (1) De/f_ining the logging format, (2) Compatibility with other
LUs, and(3) Easeof con/f_iguration anddependency management.
4.2.1 Defining the Logging Format. Log messages are generally
loosely structured, which contain free formed texts. Many projects
de/f_inetheirownformatofthelogmessages,sothattheycanbeau-
tomaticallyparsedandanalyzed.Forexample,the Hadoopproject
introducesauditlogginginordertosatisfythesecuritycompliance
requirements. The format of the auditing logs vary across diﬀerent
Hadoopcomponents.Forexample,in hadoop-common component
showninFigure3,aninterface( KMSAuditLogger )is/f_irstde/f_ined
withamethod logAuditEvent ,whichde/f_inestheauditingmethods
tobeinvoked.Tofacilitatecodereuse, SimpleKMSAuditLogger im-
plements this interface by using the adapter pattern. It implements
thelogAuditEvent method by invoking the infomethod from
anSLF4Jlogger object. The logAuditEvent method contains a
switchstatement,inwhichdependingontheactualevent,diﬀerentauditlogswillbeoutputted.Theresultingauditlogsaremuchmore
structuredcomparedtotheregularlooselyde/f_inedlogmessages.
Other ILUs like Cassandra ’sStatusLogger also fall into this case.
4.2.2 Compatibility with other LUs. Many of the studied projects
can be packaged and used by other projects. For reusable pack-
ages, it is preferred to be /f_lexible and compatible with diﬀerent
ELUs,asdevelopersalwayswanttousethemostup-to-dateLUsin
theirprojects.SinceLUmigrationsrequirehighmanualeﬀortsand
are error-prone [ 33], developers usually implement their ILUs to
separate the coupling of their logging code withthe LUs.
Vert.x[75] is a popular tool-kit for building reactive applica-
tionsontheJVM.Itreceivesmorethan 10,000starsonGitHub.It
suppports four general purpose Java ELUs: java.util.logging ,
Log4j 1.x ,Log4j 2,andSLF4J.Thisfunctionalityisrealizedby
implementing the strategy design pattern to unify the APIs among
these four ELUs. These four ELUs do not share the same set of ver-
bositylevels.Therefore,theILUneedstoprovideauni/f_iedinterface
(LogDelegate ) for their logging methods. The LogDelegate inter-
facede/f_inesasetofcommonloggingAPIs(e.g., info,error).Sepa-
rateimplementationclassesareintroducedtowraparoundthefour
popular general purpose ELUs: java.util.logging ,Log4j 1.x ,
Log4j 2, andSLF4J. Figure 3 shows a code snippet for JULLogDel
egate, which adapts the functionalities of java.util.logging to
the common interfacede/f_ined by LogDelegate . To implement the
errormethod, it calls the logmethod along with the verbosity
levelSEVEREandthe variable message fromjava.util.logging.
4.2.3 Ease of Configuration and Dependency Management. One of
the common errors associated with logging is the con/f_iguration
ofLUs[23].Themaincauseofthisisduetocomplexdependency
structures[ 26,27,45,50,66,68].Hence,about29.3%oftheILUsare
implemented to ease the con/f_iguration and dependency manage-
ment issues. They are usually built from the ground up using only
thestandardJDKlibrariesandarenotdependentonanyELUsto
minimizetheeﬀorttomanagedependencies.Figure3showsoneex-
ample.Thiscodesnippetisfrom Slick2D,whichisa2DJavagame
library. This ILU is designed to be lightweighted and easy to use. It
logsthecompleteerrorinformationwithtimestampstotheconsole.
Findings: There are three project speci/f_ic needs, which lead to
the implementation of ILUs: (1) de/f_ining the logging format, (2)
compatibility with other LUs, and (3) ease of con/f_iguration and
dependency management. Among these three needs, de/f_ining the
logging format is the most common one. 55 .3% of the sampled
projectsimplementedILUsforthisspeci/f_icneed.Asthesizeofthe
projects grow larger, more projects implement ILUs to satisfy the
needsofcompatability withother LUs.
Implications: Althoughmorethan20%ofthesampledprojects
implemented theirown ILUs from theground up. These ILUs are
mainlyusedinternallyfordebuggingpurposes.Theyareusually
not intended to be used by other projects, since they might not
satisfythegeneralloggingneeds(e.g.,notthread-safe).Additional
tools and techniques need to be developed to automatically warn
developers whoimportedpackages whichimplement ILUs.
402403ICSE ’20, May 23–29, 2020,Seoul,Republicof Korea Bo yuan Chen andZhenMing (Jack)Jiang
KieRuntimeLogger logger=KieServices.Factory.get().
getLoggers().newFileLogger (session,"log/correlation
");
(b)CorrelationExample.java( pen✁ ✂✄,usingKieRuntimeLogger)pipeline.addLast("logger", new LoggingHandler(LogLevel.INFO ));
(a)InboundConnectionInitiator.java(Cassandra,using NettyLoggingHandler)
Figure5: AnExampleofusingMultipleLUsfor interaction
with
LUs from theimported packages.
import org.apache.maven.plugin.logging.Log ;
...
public File 
resolveById(String id, Log log)
throws MojoFailureException {
...
log.debug("Resolving artifact " + id + " from ”
+ projectRepositories);
Dependency31Helper.java (karaf)
Figure 6: An Example of using Multiple LUs for managing
the
logging contents.
4.3.1 Interaction with LUs from the imported packages. Many Java-
basedsoftwaresystemsusethirdpartypackages,whichalsocontain
LUs. In order to have full observability of the resultingsystems,it
is important to enable logging across all the components.Figure 5
showstwodiﬀerentexamplesonhowtocon/f_igureorenablelogging
for the imported packages. However, due to the API variabilitiy of
these LUs, diﬀerent techniques are needed in order to enable or
con/f_igure their logging behavior. For example, Nettyuses event-
basedprogramming.Toenabletheloggingofthe Nettypackage,
theCassandra developer needs to add the LoggingHandler . In
order to enable logging for Kie, theOpenNMSdeveloper needs to
create a new logger to output the logs to a /f_ile. The more third
partypackagesareused,themoreinteractionstherearewiththe
LUs from these imported packages. This is one of the main reasons
whymany largeorveryLarge -sizedprojectsusemoreLUsthanthe
smallersizedprojects.
4.3.2 Managing the logging contents. In addition to con/f_iguring
andenablingtheloggingbehaviorfortheimportedpackages,some-
timesthestudiedprojectsalsousetheLUsfromtheimportedpack-
agesforadditionallogging.Thisismainlytoensuretherelevant
loggingcontentsarestoredinthesamelocation. Mavenisapopular
tool to build and manage Java projects. The core of Mavenconsists
ofasetofplugins.Eachpluginisreponsibleforaparticularfunc-
tionality.Forexample, clean,whichisusedtocleanupthebuild
arti/f_icats, and compiler , which is used to compile Java sources,
are two default plugins. During execution, the logs generated from
these plugins will be redirected to the same storage location. If
other projects intend to develop Mavenplugins, they are advised to
use the LUs from Mavento generate build related logs [ 49], so that
Maven-related information can be aggregated to one centralized
location, which is easy to analyze and archive. Figure 6 shows one
such example. On one hand, karafuses their own LU to record
system-speci/f_ic information. On other hand, it uses the LU from
Mavento recordbuildrelatedlogs.
4.3.3 Forma/t_ting logging messages across diﬀerent components. In
somecases,oneLUmaynotsatisfyalltheloggingneedsforonefor (InstanceStatus status : instanceStatusList) {
if (INSTANCE_RUNNING !=
status.getInstanceState
().getCode()){
LOGGER.debug("Instances are up but not
all of them are in running state.");
return false; 
}       
}
ASGroupStatusCheckerTask.java(cloudbreak)
Figure 7: An Example of using Multiple LUs for de veloper
convenience.
project. For example, as shown in Figure 3, HadoopusesSLF4J
forgeneratingexecutionlogs,whichareusedfordebuggingand
monitoring purposes. It also uses ILU to generate audit logs to
satisfy security requirements.
4.3.4 Developer convenience. Some of the top-100 projects use
AOP-basedlogging.However,thedevelopersalsoincludelogging
code,whichisinstrumentedusinggeneral-purposeELUs.Thisis
mainly due to developer convenience. For example, cloudbreak
uses AOP-based logging, but it also uses SLF4J. Figure 7 shows one
such example. Since checking the instance state is a very localized
concern,itis much fasterto instrumentwith thegeneralpurpose
LUthanAOP-basedlogging.SimilarcasesalsoapplytoLUs,which
are used for internationalization. For example, Hibernate uses the
JBoss logging to support internationalization. However, instead of
putting the log messages into the centralized /f_ile, the developer
chose to place their log message along with the feature code for
debugging purposes.
Findings: Thereare fourusage contextsbehindthe useof multi-
ple LUs in one project: (1) interaction with LUs from the imported
packages;(2)managingtheloggingcontents;(3)formattinglog-
ging messages across diﬀerent components; and (4) developer
convenience.Exceptfor developerconvenience,thepercentageof
these usage contextsincreasesas the projectsizes increase.
Implications: Loggingisconsideredasacross-cuttingconcern,
as the logging code scatters across the entire system and inter-
mixeswiththefeaturecode.Tocopewiththischallenge,AOPis
introduced.However,AOPcannotbeusedtosatisfythecurrent
logging needs, due to their inconvenience on specifying localized
logging context. More importantly, for large-scale projects which
usemanythirdpartypackages,itisnecessarytoenableandcon-
/f_igure the logging behavior for these imported packages in order
togainfullobservabilityoftheentiresystems.Themanagementof
the logging behavior for these packages is rather complex and in-
troduces another form of cross-cutting concerns. Further research
is urgently needed to develop tools or techniques to automatically
manage andmodularize such concerns.
5 INTERVIEWS
Although we have analyzed 425 Java-based projects, our study
focuses on Java-based open-source projects in GitHub. In order to
assess the generalizability of our /f_indings, we conducted a semi-
structured inteview with 13 experienced industrial developers. We
decidedtoconductsemi-structuredinterviewsinsteadofsurveysso
404Studying the Use of Java LoggingUtilities in the Wild ICSE ’20, May 23–29, 2020,Seoul,Republic of Korea
thatwecaninteractwiththeparticipantsinamore/f_lexibleway.For
example, we have prepared a set of questions before-hand. During
the interview, we sometime asked follow-up questions based on
participants’ answers onthe /f_ly [32].
5.1 Participants
Similar to [ 60], the participants are from the authors’ personal con-
tacts.Allofthemareworkingatlarge-scalesoftwarecompanies.
Thedevelopmentexperienceoftheparticipantsrangesfromoneto
eight years. The types of projects that participants are working on
vary from server-side projects (9), frameworks (3), and client appli-
cation (1). All these projects have been widely used by millions of
usersworldwide.Theprogramminglanguagesthattheparticipants
use daily include Java, PHP,C++, C#,Python,andGo.
5.2 Findings
All of the participants have inserted, deleted, updated logging code
in their development activities. It reaﬃrms that software logging is
apervasive practice[8].
5.2.1 Cross-validationofourfindings. Wepresentedour/f_indings
ontherationalesbehindtheuseofELUsandILUs,aswellasthe
usage context for multiple LUs. Then we asked the participants:
(1) whether their projects adopt one or more of the studied LUs;
(2) whether our characterized usage context and the logging needs
wouldbe usefulfor them; and(3) ifthere areany additionalinfor-
mation to add or comment on.
Someparticipantsmentionedthattheydidadoptoneormoreof
thestudiedLUsinthispaper.However,therationales(e.g.,JBoss-
stylelogging)isabitdiﬀerent.Allparticipantsfeltthatthe/f_indings
and code examples from this study can help them better con/f_igure
andmanage the logging behaviorfor their projects.
•ELUs:Allparticipantsacknowledgedthatthegeneral-purpose
logging is the most commonly used logging need. However,
they also acknowledge the challenges on co-evolving the
loggingcodewiththerapidlychangedfeaturecode,asthe
logging code is inter-mixed with the feature code. Although
theparticipantsaggreedthatAOP-basedloggingisagreat
idea, only two of the interviewed participants used AOP-
basedloggingintheirprojects.Thisismainlydueto(1)high
learning curve of a diﬀerent programming paradigm, (2) dif-
/f_icult to translate logging concerns into rules (a.k.a., advice),
and(3) lack of automatedsupport for legacylogging code.
Comparedtoopen-sourceprojects,thereisamuchhigher
portion of industrial projects (7/13) that adopted the LUs
that centralize the log messages (a.k.a., JBoss-style logging).
Oneparticipantmentionedthatinadditiontointernation-
alization,thecentralizedlogging-stylecan:(1)improvethe
accuracyand thespeedofthelog processingtask[ 88];and
(2) attach additional meta information (e.g., issue resolution
strategies) withthe message ID for better/f_ield support.
•ILUs: The participants mentioned that the choice of LUs
weredecidedbythesoftwarearchitectsorseniordevelopers.
Once the LUswere set up,only under very rare cases that
theywillmigrateormodifyLUs.Noneofthemhavedirectly
modi/f_iedtheexistingLUs.Weaskedtheparticipantswhat
type of LUswere used in theirprojects.Threeof themsaidthey directly use open source LUs such as Log4j[42] (Java)
andlog4net[44](C#).TherestofthemuseILUsincluded
in their project. The rationales behind implementing ILUs
are similar to our /f_indings from the open sourceprojects.
•The use of Multiple LUs : The participants are surprised
abouttheuseofmultipleLUs.Fiveofthemdidnotrealize
the need to do this until we presented our /f_indings. They
complained about the challenges on debugging and moni-
toring theirprojects, whichusemanythird-partypackages.
By leveraging our /f_indings and code examples, they can en-
able and manage the logging behavior from these imported
packages, which will greatly improve the observability of
the overallsystems.
5.2.2 Beyond Logging. Five participants mentioned that they have
integrated tracing tools (e.g., opentracing [ 55]) or Application Per-
formanceMonitoring(APM)tools(sentry[ 61],Google/f_irebase[ 14],
etc.)intotheirsystems.Theyappliedthesetoolstoreplacesomeof
theloggingfunctionalitiessuchascrashreportingandcollectionof
thepro/f_ilingdata.Unlikelogging,mostofthesetoolsdonotneedde-
velopers to arbitrarily write code to record the desired information.
For example, one participant mentioned that they adopted Spring-
sleuth [67]. It is a distributed tracing tool which can automatically
recordtheinteractionsbetweenmultipleSprintBootmicroservices.
Thesetoolspre-instrumentoutputstatementstorecordinformation
such as RPC calls and stack traces, and they need minimum con/f_ig-
urationeﬀorts.Theparticipantsalsomentionedthatalthoughthese
tools are useful, they still cannot completely replace the needs for
software logging in theirprojects.
6 DISCUSSIONS
Logs have been used extensively in practice. Instead of invoking
outputfunctionslikeSystem.out.println,developersprefertouse
logging utilities (LU) to instrument their systems. This paper cate-
gorizesthecomplexuseofLUsinthewildandpresentsmultiple
implications which are useful for developers and researchers. In
this section, we will discuss the signi/f_icance of our /f_indings and
present somefuture work.
6.1 Complex Use ofLUs
There are generally four reasons to use LUs: (1) general-purpose
logging,(2)LUinteractionswithimportedpackages,(3)internation-
alizationofthelogmessages,and(4)modularizationofthelogging
code. Larger projects tend to use multiple LUs in one project to sat-
isfyoneormoreofthefollowingusagecontext:(1)interactionwith
LUsfromvariousimportedpackages,(2)managingtheloggingcon-
tents,(3)formattingloggingmessagesacrossdiﬀerentcomponents,
and(4)developerconvenience.Manyprojectsalsoimplementtheir
own LUs to satisfy project speci/f_ic needs like de/f_ining the logging
format, compatibility,and easeofcon/f_igurationand dependency
management. Such /f_indings would be useful for developers and
researchers who are interested in developing and maintaining LUs:
•Our /f_indings raise developers’ awareness that their systems
can contain multiple LUs due to the imported packages. It is
importanttomanagetheseLUstobettermonitoranddebug
systems’runtime behavior.
405ICSE ’20, May 23–29, 2020,Seoul,Republicof Korea Bo yuan Chen andZhenMing (Jack)Jiang
•Toeﬀectivelymonitoranddebugsystems’behavior,develop-
ersneedto/f_igureouthowtocon/f_iguretheloggingbehavior
for the imported packages and how to interact these LUs
with the LUs in their own projects. Hence, techniques to
recover the logging architecture are needed.
•ToensureQoS,bestpracticesandanti-patternsformanag-
ingLUsareneeded,particularlyinthefollowingareas:(1)
selecting the appropriate default verbosity levels for LUs for
good observability with low overhead; and (2) correlating
logging information acrossdiﬀerentLUs in one project.
•In addition to common LUs (e.g., Log4j or SLF4J), many
projects also use additional ELUs orimplement ILUs. These
LUs are project-dependent and require implementation/-
maintenance eﬀort. The /f_indings in the paper can guide
researchers to propose more general techniques to satisfy
such logging needs.
6.2 BeyondLUs
Certain/f_indingsinthispapermaybeapplicabletootherutilities.
It is important to study the use of diﬀerent utilities in the wild due
to:(a)multipleutilities(e.g.,database/testingframeworksandadli-
braries)withsame/similarfunctionalitiescanbeusedinoneproject;
and(b)cross-cuttingconcerns(e.g.,logging,analyticsandsecurity)
areimplementednotonlyintheprojects’codebutalsointheim-
ported packages. Eﬀectively managing such concerns is an open
problem, which is important for development and maintenance of
such systems[18, 84].
7 RELATED WORK
In this section, we discuss tworealtedresearchareas.
7.1 Empirical Studies on Logging Practices
There are no well-established logging guidelines inneither indus-
trial[16,56]noropensourcesystems[ 8,63,81].Hence,itisimpor-
tant to derive best practices and common mistakes by studying the
currentloggingpractices.Shangetal.[ 63]foundthattheamount
of logging code is correlated with the amount of post-release bugs.
Kabinna et al. [ 33] studied the logging library migrations for 33
Apache-based Java projects. They found that migrating logging
libraries requires high manual eﬀorts and is error-prone. Zhi et
al. [86] conducted an exploratory study on the con/f_iguration as-
pectsof the LUs.
Our work is diﬀerent from the above studies in the following
threeaspects:(1)thispaperisthe/f_irststudyontheuseofLUs,which
includesbothELUs(a.k.a.,logginglibraries)aswellasILUs.(2)The
scaleofourstudyismuchbiggerthanthepreviousones,aswehave
studiedover11,194Java-basedGitHubprojects,whichuses3,856
LUs. (3) Diﬀerent from all of the above works, which are mainly
quantitative studies, we have performed both the quantitative and
the qualitative studiesonthe use of Java-basedLUs.
7.2 ImprovingtheQuality oftheLogging Code
This area can be further divided intothree parts: (1) where-to-log,
(2) what-to-log,and(3) how-to-log.
•where-to-log isrelatedtotheproblemofselectingappropri-
ateloggingpointsinthesourcecode.Fuetal.[ 16]proposedadata-miningbasedapproachtoautomaticallyextractthe
important attributes which aﬀect the locations of the log-
ging points. Zhu et al. [ 87] proposed a machine-learning
basedtechniquetolearncommonloggingpointsbasedon
the code structures. Yuan et al. [ 80] proposed a program-
analysis based method toadd logging points for debugging
purposes.Dingetal.[ 11]proposedaconstraintsolvingbased
methodtoselecttheoptimalloggingpointswhichincurmin-
imumperformanceoverheadwhilekeepingthemaxmium
runtime information. Zhao et al. [ 85] came up with a tool
Log20, which automatically places the logging points under
certain overheadthreshold.
•what-to-log isrelatedtotheproblemofprovidingcomplete
runtime information in the logging code. Yuan et al. [ 82]
proposed a program analysis based approach to add addi-
tionalvariablesintoexistingloggingstatementssothatmore
complete execution paths can be recovered, thus improving
thediagnosability.Heetal.[ 25]characterizedthestatictexts
insideloggingstatementsfor10Javaand7C#projects.They
providedanNLP-baseddescriptiongeneration tooltoauto-
maticallygeneratestatictextsinlogging statements.
•how-to-log isrelatedtotheproblemofdesigningandmain-
taininghighqualityloggingcode.Yuanetal.[ 81]partially
studiedtheinconsistentverbositylevelproblemthrougha
clone based approach. Li et al. learned from code changes
in history to predict just-in-time logging code changes [ 39]
andtosuggestthemostapproapriateverbositylevels[ 38]
through machine learning-based approaches. Chen et al. [ 9]
summarizedsixtypesofanti-patternswithinloggingstate-
ments andproposed a tool to automaticallydetect them. Li
et al. [40] proposed an automated tool to detect duplicate
loggingcodesmells.Chenetal.[ 10]proposedanapproach
to extract the Logging-Code-Issue-Introducing changes.
Our study lies within the category of how-to-log , but diﬀers
with the above works in the sense that our focus is on the LUs
instead of the log printingcode.
8 THREATS TO VALIDITY
In this section, we willdiscuss the threatsto validity.
8.1 External Validity
We conducted our study only on 11,194 Java-based open source
projects. We cross-validated our /f_indings by interviewing with in-
dustrialdevelopers.Althoughourapproachcanbeeasilyadapted
toanotherstudyontheuseofLUs,our/f_indingmaynotbegeneral-
izable to projectswritten in otherprogramming languages.
8.2 InternalValidity
In our study, we removed all of the very small -sized projects, since
only a small fraction of them use LUs and most of them are trial
projects for self-studying and collections of code snippets. We also
removedforkedprojects,sincetheyarelikelyduplicationsofthe
base ones. We also removed unpopular projects which contain few
stars. This practice is similar to many of the previous empirical
studiesonGitHub-based proejcts[5, 36, 58].
406Studying the Use of Java LoggingUtilities in the Wild ICSE ’20, May 23–29, 2020,Seoul,Republic of Korea
8.3 Construct Validity
In our study, we used a heuristics-based approach to count the
adoptions of LUs. We made our best eﬀorts to avoid bringing in
anyfalsepositives.Throughmanualveri/f_icationoftherandomly
selectedsamples,our approach yieldsan precision of96%.
9 CONCLUSION
In this paper, we conducted a large-scale empirical study on the
use of Java LUs in the wild. We studied 11 ,194 Java-based projects
in the GitHub. These projects use 3 ,856 LUs. Our /f_indings suggest
thatthecomplexityoftheuseofLUsincreasesastheprojectsizein-
creases. Although many projects only use LUs for general-purpose
logging, the actual logging needs vary from project to project. The
main reason behind multiple use of LUs is to enable or manage the
loggingbehavior of the imported packages. Many projects choose
toimplementtheirownILUmainlyforde/f_iningtheproject-speci/f_ic
formatoftheirloggingcode.The/f_indingsandtheimplicationspre-
sentedinthispaperwillbeusefulforLUdesignersandresearchers
as well as systemdevelopers.
REFERENCES
[1]ApacheCommonsLogging.2019. https://commons.apache.org/proper/commons-
logging/. Last accessed:07/23/2019.
[2] Apache Hadoop.2019. https://hadoop.apache.org/. Last accessed:08/22/2019.
[3] Apache Tomcat. 2019. http://tomcat.apache.org/. Last accessed:08/22/2019.
[4]SvenApel,DonBatory,Sven Apel,andDon Batory.2008. HowAspectJis used:
An analysis of eleven Aspectj programs. Journal of Object Technology (JOT)
(2008).
[5]Lingfeng Bao, Xin Xia, David Lo, and Gail C. Murphy. 2019. A Large Scale Study
ofLong-TimeContributorPredictionforGitHubProjects. IEEETransactionson
SoftwareEngineering (TSE) (2019).
[6]Titus Barik, Robert DeLine, Steven Drucker, and Danyel Fisher. 2016. The Bones
oftheSystem:ACaseStudyofLoggingandTelemetryatMicrosoft.In Companion
Proceedings of the 38th International Conference on Software Engineering (ICSE-C),
2016.
[7]Bitcoin Wallet. 2019. Bitcoin Wallet app for your Android device. https://github.
com/bitcoin-wallet/bitcoin-wallet. Last accessed: 08/23/2019.
[8]BoyuanChenandZhenMing(Jack)Jiang.2016. Characterizingloggingpractices
in Java-based open source software projects – a replication study in Apache
SoftwareFoundation. EmpiricalSoftwareEngineering (EMSE) (2016).
[9]Boyuan Chen and Zhen Ming (Jack) Jiang. 2017. Characterizing and Detect-
ingAnti-patternsintheLoggingCode.In Proceedingsofthe39thInternational
Conference onSoftwareEngineering (ICSE),2017.
[10]Boyuan Chen and Zhen Ming (Jack) Jiang. 2019. Extracting and studying the
Logging-Code-Issue- Introducing changes in Java-based large-scale open source
softwaresystems. EmpiricalSoftwareEngineering (EMSE) (2019).
[11]Rui Ding, Hucheng Zhou, Jian-Guang Lou, Hongyu Zhang, Qingwei Lin, Qiang
Fu,DongmeiZhang,andTaoXie.2015. Log2:ACost-awareLoggingMechanism
forPerformanceDiagnosis.In Proceedingsofthe2015UsenixAnnualTechnical
Conference (ATC),2015.
[12]Steve Easterbrook, Janice Singer, Margaret-Anne Storey, and Daniela Damian.
2008.Selecting EmpiricalMethodsfor SoftwareEngineering Research.
[13]Eclipse Java IDE. 2019. . https://www.eclipse.org/ide/. Last accessed: 08/22/2019.
[14]Firebase. 2019. A mobile and web application development platform . https:
///f_irebase.google.com/. Last accessed:08/23/2019.
[15] MartinFowler,KentBeck,JohnBrant,WilliamOpdyke,andDonRoberts.1999.
Refactoring: Improving the Design of Existing Code. Addison-Wesley Longman
Publishing Co., Inc.
[16]Qiang Fu, Jieming Zhu, Wenlu Hu, Jian-Guang Lou, Rui Ding, Qingwei Lin,
DongmeiZhang,andTaoXie.2014. WhereDoDevelopersLog?AnEmpirical
Study on Logging Practices in Industry. In Companion Proceedings of the 36th
InternationalConferenceonSoftwareEngineering (ICSE-C), 2014.
[17] GitHubfeatures. 2019. https://github.com/features. Last accessed:07/29/2019.
[18]MathieuGoeminneandTomMens.2015. Towardsasurvivalanalysisofdatabase
framework usage in Java projects. In Proceedings of 31st International Conference
onSoftwareMaintenance and Evolution(ICSME), 2015.
[19]GoogleFlogger.2019. AFluentLoggingAPIforJava. https://github.com/google/
/f_logger. Last accessed:07/23/2019.[20]Georgios Gousios. 2013. The GHTorrent dataset and tool suite. In Proceedings of
the 10thWorking Conference onMiningSoftwareRepositories(MSR),2013.
[21]Jiawei Han. 2005. Data Mining: Concepts and Techniques . Morgan Kaufmann
PublishersInc.,San Francisco, CA, USA.
[22]Ahmed E. Hassan and Richard C. Holt. 2004. Using Development History Sticky
Notes to Understand Software Architecture. In Proceedings of 12th International
Workshop onProgramComprehension(IWPC),2004,.
[23]MehranHassani,WeiyiShang,EmadShihab,andNikolaosTsantalis.2018. Study-
ing and detecting log-related issues. Empirical Software Engineering (EMSE)
(2018).
[24]HBase.2018. ApacheHBase. https://hbase.apache.org. Lastaccessed:01/29/2018.
[25]Pinjia He, Zhuangbin Chen, Shilin He, and Michael R. Lyu. 2018. Character-
izing the Natural Language Descriptions in Software Logging Statements. In
Proceedingsofthe33rdACM/IEEEInternationalConferenceonAutomatedSoftware
Engineering (ASE), 2018.
[26]How to enable logging in dubbo? 2019. https://blog.csdn.net/JDream314/article/
details/44620767. Last accessed: 08/21/2019.
[27]How to enable logging in Jetty. 2019. https://stackover/f_low.com/questions/
25786592/how-to-enable-logging-in-jettyt. Last accessed:08/21/2019.
[28]JezHumbleandDavidFarley.2010. ContinuousDelivery:ReliableSoftwareReleases
Through Build, Test, and Deployment Automation. Addison-Wesley Professional.
[29]IntelliJIDEA.2019. https://www.jetbrains.com/idea/. Lastaccessed:08/22/2019.
[30]JBossLogging.2019. https://developer.jboss.org/wiki/JBossLoggingTooling. Last
accessed:07/16/2019.
[31]JDT Java Development Tools. 2019. https://eclipse.org/jdt/. Last accessed:
07/23/2019.
[32]Brittany Johnson, Yoonki Song, Emerson Murphy-Hill, and Robert Bowdidge.
2013. WhyDon’tSoftwareDevelopersUseStaticAnalysisToolstoFindBugs?.
InProceedingsofthe35thInternationalConferenceonSoftwareEngineering(ICSE),
2013.
[33]Suhas Kabinna, Cor-Paul Bezemer, Weiyi Shang, and Ahmed E. Hassan. 2016.
Logging Library Migrations: A Case Study for the Apache Software Foundation
Projects.In Proceedingsofthe13thInternationalConferenceonMiningSoftware
Repositories(MSR),2016.
[34]EiriniKalliamvakou,GeorgiosGousios,KellyBlincoe,LeifSinger,DanielGer-
man, andDaniela Damian. 2014. ThePromises and Perilsof Mining GitHub.In
Proceedingsofthe11thWorkingConferenceonMiningSoftwareRepositories(MSR),
2014.
[35]GregorKiczales,JohnLamping,AnuragMendhekar,ChrisMaeda,CristinaLopes,
Jean-MarcLoingtier, and John Irwin.1997. Aspect-orientedprogramming.
[36]PavneetSinghKochhar,DinushaWijedasa,andDavidLo.2016. ALargeScale
StudyofMultipleProgrammingLanguagesandCodeQuality.In Proceedingsofthe
23rd International Conference on Software Analysis, Evolution, and Reengineering
(SANER),2016.
[37]William H. Kruskal and W. Allen Wallis. 1952. Use of Ranks in One-Criterion
Variance Analysis. Journal of the American Statistical Association (JASA) (1952).
[38]Heng Li, Weiyi Shang, and Ahmed E. Hassan. 2017. Which Log Level Should
DevelopersChooseforaNewLoggingStatement? EmpiricalSoftwareEngineering
(EMSE)(2017).
[39]Heng Li, Weiyi Shang, Ying Zou, and Ahmed E. Hassan. 2017. Towards just-
in-time suggestions for log changes. Empirical Software Engineering (EMSE)
(2017).
[40]Zhenhao Li, Tse-Hsun Chen, Jinqiu Yang, and Weiyi Shang. 2019. DL/f_inder:
characterizing and detecting duplicate logging code smells. In Proceedings of the
41st InternationalConference onSoftwareEngineering (ICSE),2019.
[41]JimmyLinandDmitriyRyaboy.2012. Scalingbigdatamininginfrastructure:the
twitter experience. SIGKDD Explorations 14,2 (2012), 6–19.
[42]Log4J. 2019. A logging library for Java. http://logging.apache.org/log4j/1.2. Last
accessed:07/23/2019.
[43]LOG4J2.2019.ApacheLog4j2.http://logging.apache.org/log4j/2.x. Lastaccessed:
07/23/2019.
[44]log4net. 2019. log4net A logging library for .NET. https://logging.apache.org/
log4net/. Last accessed:07/23/2019.
[45]Loggingdependencycon/f_licts.2019. https://cloud.tencent.com/developer/ask/
121135. Last accessed:08/21/2019.
[46]LogProvider in Ninja. 2019. https://github.com/ninjaframework/ninja. Last
accessed:08/22/2019.
[47]CristinaLopesandJoelOssher.2015. HowScaleAﬀectsStructureinJavaPro-
grams. In Proceedings of the 2015 ACM SIGPLAN International Conference on
Object-OrientedProgramming,Systems,Languages,andApplications(OOPSLA),
2015.
[48]Mark Marron.2018. Log++Logging fora Cloud-nativeWorld.In Proceedingsof
the14thACMSIGPLANInternationalSymposiumonDynamicLanguages(DLS),
2018.
[49]Maven plugin development guide. 2019. http://maven.apache.org/guides/plugin/
guide-java-plugin-development.html. Last accessed:08/23/2019.
[50]Multiple logging implementations found in Spring Boot. 2019. https:
//stackover/f_low.com/questions/52911393/multiple-logging-implementations-
407ICSE ’20, May 23–29, 2020,Seoul,Republicof Korea Bo yuan Chen andZhenMing (Jack)Jiang
found-in-spring-boot. Last accessed:08/21/2019.
[51]FreddyMunoz,BenoitBaudry,RomainDelamare,andYvesLeTraon.2013. Usage
andTestabilityofAOP:AnEmpiricalStudyofAspectJ. InformationandSoftware
Technology (IST) (2013).
[52]OkHttp-anHTTPclientforAndroid,Kotlin,andJava.2019. https://github.com/
square/okhttp. Last accessed:08/23/2019.
[53]Adam Oliner, Archana Ganapathi, and Wei Xu. 2012. Advances and Challenges
in Log Analysis. Communications ofACM (2012).
[54]Omni-Notes: note-taking application for Android. 2019. https://github.com/
federicoiosue/Omni-Notes. Last accessed:08/21/2019.
[55]Opentracing:vendor-neutralAPIsandinstrumentationfordistributedtracing.
2019. https://opentracing.io/. Last accessed:07/23/2019.
[56]Antonio Pecchia, Marcello Cinque, Gabriella Carrozza, and Domenico Cotroneo.
2015. IndustryPracticesandEventLogging:AssessmentofaCriticalSoftwareDe-
velopmentProcess.In CompanionProceedingsofthe37thInternationalConference
onSoftwareEngineering (ICSE-C), 2015.
[57]Liferay Portal. 2019. Liferay Portal - an open source enterprise web platform.
https://github.com/liferay/liferay-portal. Last accessed: 08/22/2019.
[58]BaishakhiRay,DarylPosnett,PremkumarDevanbu,andVladimirFilkov.2017.
A Large-scale Study of Programming Languages and Code Quality in GitHub.
Communications ofthe ACM (2017).
[59] Red HatWild/f_ly. 2019. https://wild/f_ly.org/. Last accessed:08/22/2019.
[60]Mohammed Sayagh, Noureddine Kerzazi, Bram Adams, and Fabio Petrillo. 2018.
Software Con/f_iguration Engineering in Practice: Interviews, Survey, and System-
atic LiteratureReview. IEEE Transactions onSoftwareEngineering (TSE) (2018).
[61]Sentry - cross-platformapplicationmonitoring, witha focus on errorreporting.
2019. https://sentry.io. Last accessed:08/23/2019.
[62]Weiyi Shang, Zhen Ming Jiang, Bram Adams, Ahmed E. Hassan, Michael W.
Godfrey, Mohamed Nasser, and Parminder Flora. 2014. An exploratory study of
theevolutionofcommunicatedinformationabouttheexecutionoflargesoftware
systems. Journal ofSoftware:Evolutionand Process(JSEP) (2014).
[63]WeiyiShang,MeiyappanNagappan,andAhmedE.Hassan.2015. Studyingthe
relationship between logging characteristics and the code quality of platform
software. EmpiricalSoftwareEngineering (EMSE) (2015).
[64]Simple Logging Facade for Java (SLF4J). 2019. https://www.slf4j.org/. Last
accessed:08/12/2019.
[65]spdlog - Very fast, header-only/compiled, C++ logging library. 2019. https:
//github.com/gabime/spdlog. Last accessed:07/23/2019.
[66] Spring Boot pull request 4341. 2019. https://github.com/spring-projects/spring-
boot/issues/4341. Last accessed:08/21/2019.
[67]SpringCloudSleuth.2019. https://spring.io/projects/spring-cloud-sleuth. Last
accessed:08/23/2019.
[68]StackOver/f_low: Disable Logback in SpringBoot. 2019. https://stackover/f_low.com/
questions/23984009/disable-logback-in-springboot/23991715. Last accessed:
08/01/2019.
[69]Telegram-acloud-basedinstantmessagingservice.2019. https://github.com/
DrKLO/Telegram. Last accessed:08/21/2019.
[70]The replicationpackage. 2020. https://www.eecs.yorku.ca/~chenfsd/resources/
icse2020_replication.zip. Last accessed: 01/26/2020.
[71]The State of Logging in Java. 2019. https://stackify.com/logging-java/. Last
accessed:08/21/2019.
[72]Timber-aloggerwithasmall,extensibleAPIwhichprovidesutilityontopof
Android’s normal Log class. 2019. https://github.com/JakeWharton/timber. Last
accessed:08/23/2019.
[73]TIOBEIndexforAugust2019.2019. https://www.tiobe.com/tiobe-index/. Last
accessed:07/23/2019.
[74] Ultimate Guideto Logging. 2019. https://www.loggly.com/ultimate-guide/java-
logging-basics/. Last accessed:08/21/2019.
[75]Vert.x - a tool-kit for building reactive applications on the JVM. 2019. https:
//github.com/eclipse-vertx/vert.x. Last accessed:08/23/2019.
[76]What’s Up with Logging in Java? 2019. https://stackover/f_low.com/questions/
354837/whats-up-with-logging-in-java. Last accessed:07/23/2019.
[77]Why not use java.util.logging? 2019. https://stackover/f_low.com/questions/
11359187/why-not-use-java-util-logging. Last accessed: 07/23/2019.
[78]StephenYang,SeoJinPark,andJohnOusterhout.2018. NanoLog:ANanosec-
ondScaleLoggingSystem.In Proceedingsofthe2018USENIXAnnualTechnical
Conference (ATC),2018.
[79]DingYuan,HaohuiMai,Weiwei Xiong, Lin Tan,Yuanyuan Zhou,and Shankar
Pasupathy. 2010. SherLog: error diagnosis by connecting clues from run-time
logs. InProceedings of the 15th International Conference on Architectural Support
for ProgrammingLanguages and OperatingSystems(ASPLOS),2010.
[80]DingYuan,SoyeonPark,PengHuang,YangLiu,MichaelM.Lee,XiaomingTang,
YuanyuanZhou,andStefanSavage.2012. BeConservative:EnhancingFailure
Diagnosis with Proactive Logging. In Proceedings of the 10th USENIX Conference
onOperatingSystemsDesignand Implementation(OSDI), 2012.
[81]DingYuan,SoyeonPark,andYuanyuanZhou.2012. CharacterizingLoggingPrac-
ticesinOpen-sourceSoftware.In Proceedingsofthe34thInternationalConference
onSoftwareEngineering (ICSE), 2012.[82]Ding Yuan,JingZheng, SoyeonPark,YuanyuanZhou,and StefanSavage. 2011.
ImprovingSoftware Diagnosability via LogEnhancement. In Proceedingsofthe
16thInternationalConferenceonArchitecturalSupportforProgrammingLanguages
and OperatingSystems(ASPLOS),2011.
[83]YiZeng,JinfuChen,WeiyiShang,andTse-Hsun(Peter)Chen.2019. Studying
thecharacteristicsofloggingpracticesinmobileapps:acasestudyonF-Droid.
EmpiricalSoftwareEngineering (EMSE) (2019).
[84]Ahmed Zerouali and Tom Mens. 2017. Analyzing the evolution of testing li-
brary usage in open source Java projects. In Proceedings of the 24th International
Conference onSoftwareAnalysis, Evolutionand Reengineering (SANER),2017.
[85]Xu Zhao, Kirk Rodrigues, Yu Luo, Michael Stumm, Ding Yuan, and Yuanyuan
Zhou.2017. Log20:FullyAutomatedOptimalPlacementofLogPrintingState-
mentsUnderSpeci/f_iedOverheadThreshold.In Proceedingsofthe26thSymposium
onOperatingSystemsPrinciples (SOSP), 2017.
[86]Chen Zhi, Jianwei Yin, Shuiguang Deng, Maoxin Ye, Min Fu, , and Tao Xie. 2019.
AnExploratoryStudyofLoggingCon/f_igurationPracticeinJava.In InProceedings
of the35th IEEEInternational Conference on Software Maintenanceand Evolution
(ICSME), 2019.
[87]Jieming Zhu, Pinjia He, Qiang Fu, Hongyu Zhang, Michael R. Lyu, and Dongmei
Zhang.2015. LearningtoLog:HelpingDevelopersMakeInformedLoggingDeci-
sions. InProceedings of the 37th International Conference on Software Engineering
(ICSE),2015.
[88]JiemingZhu,ShilinHe,JinyangLiu,PinjiaHe,QiXie,ZibinZheng,andMichaelR.
Lyu.2019. Toolsandbenchmarksforautomatedlogparsing.In Proceedingsof
the41stInternationalConferenceonSoftwareEngineering:SoftwareEngineeringin
Practice,(ICSE-SEIP),2019.
408