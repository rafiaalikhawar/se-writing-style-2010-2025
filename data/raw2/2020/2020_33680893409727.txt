Understanding and DiscoveringSoftwareConfiguration
Dependencies in Cloud and Datacenter Systems
QingrongChen
Universityof Illinois,USA
qc16@illinois.eduTeng Wang
NUDT, China
wangteng13@nudt.edu.cnOwolabiLegunsen
CornellUniversity, USA
legunsen@cornell.edu
Shanshan Li
NUDT, China
shanshanli@nudt.edu.cnTianyinXu
Universityof Illinois,USA
tyxu@illinois.edu
ABSTRACT
A large percentage of real-world software configuration issues,
such as misconfigurations, involve multiple interdependent config-
urationparameters. However,existingtechniquesandtoolseither
donotconsiderdependenciesamongconfigurationparametersÃ
termedconfiguration dependencies Ãor rely on one or two depen-
dencytypesandcodepatternsasinput.Withoutrigorousunder-
standingofconfigurationdependencies,itishardtodealwithmany
resultingconfigurationissues.
This paperpresentsourstudy of software configuration depen-
dencies in 16 widely-used cloud and datacenter systems, including
dependencieswithinandacrosssoftwarecomponents.Tounder-
stand types of configuration dependencies, we conduct an exhaus-
tive search of descriptions in structured configuration metadata
and unstructured user manuals. We find and manually analyze 521
configuration dependencies.We define five typesofconfiguration
dependencies and identify their common code patterns. We report
on consequences of not satisfying these dependencies and current
software engineeringpractices for handling the consequences.
Wemechanizetheknowledgegainedfromourstudyinatool,
cDep,whichdetectsconfigurationdependencies. cDepautomati-
cally discovers five types of configuration dependencies from byte-
codeusingstaticprogramanalysis.Weapply cDeptotheeightJava
andScalasoftwaresystemsinourstudy. cDepfinds87.9%(275/313)
of the related subset of dependencies from our study. cDepalso
finds448previouslyundocumenteddependencies,witha6.0%aver-
age false positive rate. Overall, our results show that configuration
dependenciesaremoreprevalentanddiversethanpreviouslyre-
ported and should henceforth be considered a first-class issue in
software configurationengineering.
CCS CONCEPTS
Â·Softwareanditsengineering â†’Softwareconfigurationman-
agement and version control systems ;Â·Computer systems
organization â†’Maintainability andmaintenance .
Permissionto make digitalor hard copies of allorpart ofthis work for personalor
classroom use is granted without fee provided that copies are not made or distributed
forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation
on the first page. Copyrights for components of this work owned by others than ACM
mustbehonored.Abstractingwithcreditispermitted.Tocopyotherwise,orrepublish,
topostonserversortoredistributetolists,requirespriorspecificpermissionand/ora
fee. Request permissions from permissions@acm.org.
ESEC/FSE â€™20, November 8Å›13, 2020, Virtual Event, USA
Â©2020 Associationfor Computing Machinery.
ACM ISBN 978-1-4503-7043-1/20/11...$15.00
https://doi.org/10.1145/3368089.3409727KEYWORDS
Configuration, dependency,cloud systems,datacentersystems
ACMReference Format:
Qingrong Chen, Teng Wang, Owolabi Legunsen, Shanshan Li, and Tianyin
Xu.2020.UnderstandingandDiscoveringSoftwareConfigurationDepen-
denciesinCloudandDatacenterSystems.In Proceedingsofthe28thACM
JointEuropeanSoftwareEngineeringConferenceandSymposiumontheFoun-
dationsofSoftwareEngineering(ESEC/FSEâ€™20),November8Å›13,2020,Virtual
Event, USA. ACM, New York, NY, USA, 13pages.https://doi.org/10.1145/
3368089.3409727
1 INTRODUCTION
1.1 Motivation
Software misconfigurations are among the major causes of failures
andperformanceissuesintodayâ€™slarge-scalesoftwaresystemsthat
are deployed in cloud and data centers [ 33,36,47,51,54,58,61,67,
89,92]. For example, misconfigurations are reported as the second
largest cause of service-level incidents in one of Googleâ€™s main
production services [ 36]; meanwhile, misconfigurations contribute
to16%ofservice-levelincidents[ 79]atFacebookandareconsidered
akey reliabilitychallenge at Facebook scale[ 58].
Besidestheprevalentandseveremisconfigurations,usersâ€™con-
figuration issues (e.g., difficulties in understanding configurations)
alsoresultinhighsupportcosts[ 34,35,87,92,96].Ithasbeenre-
portedthatconfigurationissuesarethedominantsourceofsupport
costsincurredbycloud anddatacentersoftware vendors[ 67,92].
Amongmisconfigurationsthatcausereal-worldproblems,23.4%Å›
61.2%involvemorethanoneconfigurationparameter[ 92].Further,
inthecaseswithmultipleparameters,theconfigurationparameters
havedependencies Ãthecorrectnessandeffectsofoneparameterâ€™s
valuedepends on other parameter values. In other words, the de-
pendentconfigurationparametersshouldbeconsideredtogether:
settingone ofthemcould affectthe others.
Dependencies among multiple configuration parameters have
beenidentified as a key source incomplexityanderror-proneness
of software configurations [ 90]. System users face not only the
enormous configuration space ofverymanyparameters,butthey
also have to understand thedependencies. Note that exhaustively
enumerating all possible dependencies leads to a combinatorial
explosion. To make matters worse, configuration dependencies
could also cross component boundariesÃa parameter defined in
one software component could depend on a parameter defined in a
different component (or even in a different project). As we show
(ÄŸ4), inter-componentconfigurationdependencies are not rare.
362
ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Q. Chen, T. Wang,O. Legunsen, S.Li, andT. Xu
Configuration Parameters:
P1: mapred.job.maxtaskfailures.per.tracker
P2: mapred.reduce.maxattempts
P3: mapred.map.maxattempts
Dependencies: 
P1 < P2 and P1 < P3 
Impact:
Violations of the dependencies will prevent failed 
tasks from trying on different nodes. No checking 
or enforcement is implemented in MapReduce. 
The dependencies were undocumented before 
version 2.0.2 . Configuration Parameters:
P1: dfs.namenode.heartbeat.recheck-interval
P2: dfs.heartbeat.interval
Dependencies: 
heartbeatExpireInterval = P1Ã—2 + P2 Ã—10000
(heartbeatExpireInterval is the period to wait 
for DataNode heartbeat )
Impact:
Many HDFS users were confused by the heart-
beat behavior and asked on the mailing lists
stating that â€œheartbeatâ€ does not work. Configuration Parameters:
P1: hbase.lease.recovery.dfs.timeout
P2: hbase.lease.recovery.pause
P3: dfs.client.socket- timeout
P4: dfs.heartbeat.interval
Dependencies: 
P1 >= P2 + P3 + P4 
Impact:
The violation of this dependency will put the 
lease recovery procedure into infinite loops. 
No checking or enforcement is implemented.MapReduceHBASE
HDFS HDFS(a) (b) (c)
Figure1:Examplesofproblematicconfigurationdependenciesfromcloudanddatacentersoftwareprojectsandtheirimpact:
(a) MapReduce; (b)HDFS, and(c)HBASE andHDFS. All these dependencieshave caused real-world issues [ 1Å›4].
Taming software configuration dependency through configura-
tion engineering and/or tooling is currently limited because the
understandingofreal-worlddependenciesisstillpreliminary.To
make progress, a comprehensive study of configuration dependen-
cies is needed. Better understanding would significantly benefit
existing configuration tooling(e.g., for misconfiguration detection
anddiagnosis),reliabilityengineering(e.g.,configurationcorrect-
ness rule engineering [ 37,49,79]), configuration testing [ 78,84],
andcustomer support anddocumentation [ 86,90,91].
A few misconfiguration detection and diagnosis techniques con-
sider configuration dependencies. However, all those techniques
rely ona prioriknowledge of only one or two dependency types
and/or their code patterns as inputs. Tools that implement those
techniques only cover a subset ofdependencies, and also overlook
several common and important dependency types and the corre-
sponding code patterns. A detailedcomparison isinÄŸ 8.
1.2 Contributions
This paper makes two main contributions. First, we make the first
attempt (to the best of our knowledge) to systematically study soft-
ware configurationdependenciesin modern cloud anddatacenter
software, for both intra- and inter-component dependencies. In
particular, wecomprehensivelystudyconfiguration dependencies
in 16 widely-used software projects across two different cloud and
datacenter software stacks: the Hadoop-based data analytics stack
and the OpenStack cloud computing infrastructure. We exhaus-
tively search the configuration dependency information described
in configuration metadata and manual pages of these projects, and
identify the types of configuration dependencies that exist. In total,
wediscover521configurationdependencies,including424intra-
component dependencies and 97 inter-component dependencies.
Wemanuallyanalyzeeachofthe521configurationdependencies
in depth, including their source code patterns, potential impact on
thesystemwhennotsatisfied,andexistingengineeringpractices
ofdependency checking, violation handling andlogging.
Basedonourstudy,wedefineandformalizefivetypesofcon-
figuration dependencies with the common code patterns that they
manifest.Thesecodepatternscanbeusedto automatically discover
configuration dependencies from code. Our study also reveals a
number of missing opportunities in software configuration design
andimplementationforimprovingsoftwarereliabilityandusability.Second, to discover configuration dependencies, we present a
tool named cDepthat mechanizes our understanding. cDepana-
lyzes Java bytecode of the software programs of interest and au-
tomatically identifies specific types of dependencies and the in-
terdependentparameters. cDepusesanovelandintuitiveideato
discover configurationdependencies. cDepfirstÅ‚colorsÅ¾ program
variables that store values of different configuration parameters
basedonstatictaintanalysisÃvariablesassociatedwithdifferent
parametershavedifferentcolors;avariablederivedfrommultiple
parameterscouldhavemultiplecolors.Then, cDepanalyzesthede-
pendenciesbetweenthecoloredvariablesbasedonthesourcecode
patternsfromourstudy. cDepshowsthatitisfeasibletoeffectively
discovervarioustypesofconfigurationdependenciesbothwithin
and across software components without the need to exhaustively
evaluate allpossible combinations.
Weimplement cDepontopoftheSootcompilerframework[ 32].
We apply cDepto the eightJava and Scala projectsin the Hadoop
stackfromourstudy. cDepfinds87.9%(275/313)oftheconfiguration
dependenciesinourmanuallycurateddatasetfromourstudy. cDep
alsofinds448previouslyundocumenteddependenciesandincursa
false-positiverateof6.0%.Running cDepontheHadoop-basedstack
ofeightlarge software systemstakes nomore than160minutes.
Overall, our results show that software configuration depen-
dencies are more common and diverse than previously reported
and should henceforth be considered a first-class issue in software
configuration design and implementation, in tooling for misconfig-
uration detection and troubleshooting, as well as in configuration-
aware testingandverification.
We have madethe datasets and cDeppubliclyavailable at:
https://github.com/xlab-uiuc/cdep-fse
2 BACKGROUND
We show motivating examples of problems due to configuration
dependencies,describe configurations and theirusage model,and
formally defineconfigurationdependencies.
2.1 Motivating Examples
Figure1showsthree real-worldexamplesofconfigurationdepen-
dencieswithinandacrossthewidely-usedsoftwareprojectsthatwe
studied.Wecanseethatsoftwareconfigurationdependenciescould
be complex and even across software components. Figure 1also
363UnderstandingandDiscoveringSoftware ConfigurationDependencies ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
showsthatfailurestounderstandorsatisfyconfigurationdepen-
denciescanhavenegativeimpacts.Infact,allthreedependencies
in Figure 1have had significant implicationson system reliability,
and have causedreal-world issues in the past. In particular, in Fig-
ures1(a)and(c),ifthedependenciesarenotsatisfied,thefailures
occurduringsystemrecoveryandcausedcatastrophicfailures[ 94].
Additionally, the configuration dependencies were not always well
documentedÃFigure 1(a)Ãand have repeatedly led to bad issues
experienced by many different usersÃFigure 1(b). In Figure 1(c),
the configuration dependency includes four configuration parame-
tersacrosstwodifferentcomponentsÃHDFSandHBaseÃfromtwo
separate software projects.
2.2 ConfigurationsandTheirUsage
Aconfigurationisamappingfromaparametertoitsvalue.Config-
urationsallowcustomizationofsystembehaviorwithoutmaking
changestothecode.Weassumethefollowingmodelofhowcon-
figurationsare usedinprograms.
Loading. Configurations are loaded by reading from an external
file or database and storing parameter values in program variables.
Mature projects have well-defined application programming inter-
faces(APIs)forloadingconfigurations[ 38,44,56,57,65,66,87,89].
AllprojectsevaluatedinthispaperhavesuchAPIs.Hadoopprojects
load configurations using getter methods that take a parameter and
returna value(e.g., getInt,getString ),declaredinwrapperclasses
forjava.util.Properties orapache.commons.Configuration .Open-
Stack projects use the configparser API, a part of the standard
Python library which provides getter methods (e.g., getintand
getboolean ). We found that tracking usages of getter methods is
effective for findingwhere parametervaluesare loaded.
Propagation and transformation. Once loaded, parameter values
maybepropagatedalongaprogramâ€™sdata-flowpathsusingassign-
mentstatementsandmaybetransformedusingarithmeticorstring
operations.Propagationiscommonly inter-procedural throughargu-
ments and return values or through message passing with sockets
orRemoteProcedure Calls(RPCs).
Usage.Eventually, parameter values are used in statements that
changeprogram behavior,e.g.,branchconditions orsystemcalls.
This model of configuration usage is the basis of our static anal-
ysisfordiscoveringconfigurationdependencies:itreasonsabout
interactions ofprogram variables thatstore parametervalues (ÄŸ 6).
2.3 ConfigurationDependencies
Conceptually,aconfigurationdependencyiseither(1) functional
if a parameter value is influenced by other parameter values, or
(2)behavioral ifasetofparametervaluescombinetoinfluencea
particularsystembehavior.
Wedefinea functionalconfigurationdependency asapair, (ğ‘€,ğ‘“).
Letğ‘ƒbe the set of all parameters. ğ‘€maps a parameter ğ‘âˆˆğ‘ƒ
to a non-empty set of parameters ğ‘„âŠ†ğ‘ƒif the value or scope
ofğ‘depends on a function ğ‘“of the value of parameters in ğ‘„.ğ‘“
is the function that computes the value of ğ‘from the values of
parameters in ğ‘„. For example, let ğ‘„={ğ‘1,...,ğ‘ğ‘›}. Then,(ğ‘â†¦â†’
{ğ‘1,...,ğ‘ğ‘›},ğ‘“)isaconfigurationdependencyifthevalueorscope
ofğ‘(ğ‘)is determined by ğ‘“(ğ‘(ğ‘1),...,ğ‘(ğ‘ğ‘›)), whereğ‘is a gettermethod.Weputthefunctionalconfigurationdependenciesinour
study intofourcategoriesbasedonwhat ğ‘“computes (ÄŸ 4.1).
Abehavioral configuration dependency is a function, ğ‘”:ğ‘…â†’
{true,false}which returns trueif there is a method in the pro-
gram that takes the set of values of parameters in ğ‘…âŠ†ğ‘ƒ, i.e.,
{ğ‘(ğ‘Ÿ1),...,ğ‘(ğ‘Ÿğ‘›)}as arguments and can return a non-zero exit code,
andfalseotherwise.Forexample,let ğ‘…={ip.address ,port.number },
andletconnect(a,b) beamethodintheprogramthatcreatesanet-
work connection at an IP address aon portb. Thenğ‘”(ğ‘…)=true
is a behavioral configuration dependency, because the system can
failifelementsin ğ‘…aremisconfigured,e.g.,iftheIPaddressdoes
not allowconnections onthe specifiedport number.
Wealso categorizeconfigurationdependenciesbasedonwhere
parametersaredefined,essentialforanalyzingsoftwarestackswith
multiple components. A functional configuration dependency is
intra-component ifallparametersin {ğ‘}âˆªğ‘„aredefinedinthesame
componentand inter-component ifğ‘¥,ğ‘¦âˆˆ ({ğ‘}âˆªğ‘„)suchthat ğ‘¥and
ğ‘¦are not definedinthe samecomponent.Similarly,a behavioral
dependencyisintra-componentifallparametersin ğ‘…aredefined
inthe same component,andinter-componentotherwise.
3 STUDYMETHODOLOGY
The key challenge in studying software configuration dependen-
cies lies in the fact that dependency information is neither usually
explicitly specified in code nor documented elsewhere. As the first
step towards a comprehensive understanding, we manually col-
lect a large dataset of configuration dependencies both within the
samecomponent(i.e.,intra-componentdependencies)andacross
inter-relatedcomponents(i.e.,inter-componentdependencies).
In this section, we describe our methodology for collecting con-
figurationdependencyinformationandforvalidatingandanalyzing
the collecteddata.
3.1 SoftwareSystemsStudied
To collect both intra- and inter-component configuration depen-
dencies, we studied software systems in two widely-used cloud
anddatacenterstacks:theHadoop-baseddataanalyticsstackand
OpenStack for cloud computing. Both stacks contain a number
of independent but inter-related open-source software systems.
The Hadoop stack includes 17 components for data processing and
analytics,aswellasunderlyingservicesforclustermanagement,
scheduling,storage,coordination,etc.Similarly,OpenStackconsists
of 33 components for computing, storage, networking, imaging,
etc.,whichcan be usedfor building cloud computing platforms.
Table1givesashortdescriptionofthe16componentsthatwe
studied: eight components from Hadoop (Hadoop Common [ 14],
HDFS[16],YARN[ 28],HBASE[ 13],Alluxio[ 9],ZooKeeper[ 29],
MapReduce[ 20],andSpark[ 25])andeightcomponentsfromOpen-
Stack(Nova[ 23],Swift[26],Neuron[ 21],Keystone[ 18],Glance[ 12],
Placement [ 24], Ironic [ 17], and Cinder [ 10]). Each component is a
stand-alone project but is typically used with other components to
composelarge-scaledistributedsystems.Wechosethese16projects
becausetheyarewidely-usedandstudied;theirconfigurationde-
sign and implementation represents the state-of-the-art in modern
cloud systems, andeach one exposes manyconfiguration parame-
ters,as showninTable 1.
364ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Q. Chen, T. Wang,O. Legunsen, S.Li, andT. Xu
Table 1:Studied software systemsandtheir descriptions.
Project Lang. Desc. LOC # Param.HadoopHCommon [ 14] Java Hadoop corelib/runtime 268K 320
HDFS[16] Java Distributed filesystem 644K 431
Yarn [28] Java Resource management 639K 397
HBase[13] Java Distributed database 755K 202
Alluxio[9] Java In-memorystorage 459K 332
ZooKeeper [ 29] Java Distributed coordination 105K 51
MapReduce[ 20] Java Dataprocessing 220K 202
Spark[25] Scala MLand data processing 586K 348OpenStackNova [23] Python Computeservice 365K 708
Swift[26] Python Object storage 216K 405
Neutron[ 21] Python Networking service 223K 222
Keystone[ 18] Python Authentication 105K 202
Glance[12] Python Image management 62K 193
Placement[ 24] Python Resource tracking 15K 22
Ironic [17] Python Machineprovisioning 123K 509
Cinder [10] Python Block storage 364K 769
3.2 Data CollectionandAnalysis
Ideally,configurationdependencieswouldbecollectedautomati-
cally,e.g.,byusingprogramanalysis.However,thatwasdifficult
forusbecausetherewasnopriorstudyofthetypesofconfigura-
tiondependencies.Therefore,asdescribedinÄŸ 3.2.1,wemanually
collected configuration dependencies based on two text-based data
sources(henceforth,textsources)wheredependencyinformationis
sometimesdocumented: configurationmetadata (e.g.,inXMLbased
default configuration files) and user manuals . While text sources
donotdocumentthecompletesetofconfigurationdependencies,
they provideastarting point.
Weareawarethatusermanualsandotherdocumentsoftenmiss
important information [ 50,53,66,73,86]. In fact, our automated
tool,cDep,finds many undocumented configurationdependencies
(ÄŸ6). We are also aware that text sources could be outdated or even
incorrect [ 50,53,66,73,86]. So, we do not treat the dependen-
cies that we collect from text sources as ground truths. Rather,
we manually validated every collected configuration dependency by
understanding how thedependencyoccursin thecode (ÄŸ3.2.2).
3.2.1 CollectingConfigurationDependencies. Wedescribeourheuris-
ticsforexhaustivelysearchingforpotentialconfigurationdepen-
denciesinthetwotextsources.Weprioritizedcompletenessover
precisionÃourheuristics-basedtextanalysisiseffectiveindiscover-
ing configuration dependencies but also introduces false positives.
False positives are acceptable at this stage; all collected data are
subsequentlymanuallyinspectedandvalidated.Ourdatacollection
does not differentiate intra- vs. inter-component dependencies. We
identify any interdependent configuration parameters which could
come from one ormultiple components.
CollectingPotentialConfigurationDependenciesfromStructured
ConfigurationMetadata. All16softwaresystemsthatwestudied
manage structured descriptions and other metadata about configu-
ration parameters, which are organized in different forms, e.g.,
manual entries [ 8,22,30,31] and default (XML) configuration
files[11,15,19,27].Ideally,thedescriptionofaconfigurationparam-
eter should mention its dependencies on other parameters (if any)
butwerarelyfoundsuchconfigurationdependencyinformationin
thesestructuredconfigurationmetadata.Weusethefollowingheuristictosearchforpotentialconfigu-
ration dependencies:ifthe description ofone parametermentions
anotherparameter,thereisalikelydependencybetweenbothpa-
rameters.Weimplementthisheuristicbysearchingforotherpa-
rameters in the description of each parameter. Note that the search
is not limited to strict string matching on parameter names; we im-
plement fuzzy search using a series of natural language processing
techniques,includingtokenization,lowercaseandcamel-casefilter-
ing,andstemming.Aspreviouslypointedout[ 52,88,97],textual
descriptions may not contain the exact strings of parameter names,
but maycontain similar textthat describes parameters.
Collecting Potential Configuration Dependencies from Unstruc-
tured Manual Pages. Configuration dependencies are sometimes
alsodescribedinunstructuredmanualpages(e.g.,[ 5Å›7]).Weuse
thefollowingheuristictoidentifypotentialconfigurationdepen-
dencies from unstructured texts: if two parameters are mentioned
in the same paragraph, they may be dependent and we liberally
track them as such. We record the paragraph and the manual page
for further validation. Note that for manual pages, we search for
exact parameternames.
3.2.2 Validation and Analysis. We validate each potential configu-
ration dependency by inspecting each portion of text that contains
a likely configuration dependency. We filter out any false posi-
tivesthatweencounter.Eachcaseisinspectedbytwoinspectors
(co-authorsofthispaper).Oneinspectorfirstmanuallyexamined
eachdependencyindetail,withthegoaltoanswerthesequestions:
(1) Whatare thedependent parameters? (2) Isit anintra-or inter-
componentdependency?(3)Howaretheseparametersdependent?
Thesecondinspectorthenmanuallyverifiedalltheresultsfromthe
firstinspector.Intheend,wehad521dependenciesandcategorized
themby the typesin ÄŸ 4. Two inspectors spentsixmonths validat-
ing.Foreachofthe521validatedconfigurationdependencies,we
further analyze the source code to answer three other questions:
(4)Whatarethecodepatternsexhibitedbydifferentdependency
types?(ÄŸ4.1,ÄŸ4.2)(5)Howareconfigurationdependencyviolations
checkedinsourcecode?(ÄŸ 5.1)(6)Howaredetectedviolationsof
configurationdependencies handledinsourcecode? (ÄŸ 5.2)
4 CONFIGURATION DEPENDENCYTYPES
We define four types of functional configuration dependencies that
we found, provide examples, and describe commonly-occurring
code patterns. We neither imposed a taxonomy ex antenor de-
fined types admissible by the definition in ÄŸ 2.3but which do not
occurinourdataset.Wealsoprovidemoredetailsandexamples
ofbehavioralconfigurationdependencies.Lastly,wedescribethe
resultsofcategorizingtheconfigurationdependenciesinourdata
setaccording to the types describedinthis section.
4.1 TypesofFunctionalDependencies
RecallfromÄŸ 2.3thatafunctionalconfigurationdependency isonein
whichaparametervalueisinfluencedbyotherparametervalues,
definedasapair (ğ‘€,ğ‘“).ğ‘€mapsadependentparameter ğ‘totheset
of parameters ğ‘„={ğ‘1,...,ğ‘ğ‘›}such that the scope or value of ğ‘(ğ‘)
isdeterminedby ğ‘“(ğ‘(ğ‘1),...,ğ‘(ğ‘ğ‘›)),whereğ‘looksupparameters
and returns values. The type of ğ‘€is the same in all functional
365UnderstandingandDiscoveringSoftware ConfigurationDependencies ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
configurationdependencytypesdefinedbelow; ğ‘“varies.Forbrevity,
we will sometimes write ğ‘„for[ğ‘(ğ‘1),...,ğ‘(ğ‘ğ‘›)],the list of values
of the parameters in ğ‘„. Although ğ‘„has one element in all but four
of 521configuration dependencies thatwe found, below we give
generaldefinitionsinwhich ğ‘„isamulti-elementset.
4.1.1 Control Dependency. In a control dependency, whether a
dependent parameter ğ‘value can be used or not depends on the
value of other parametersÃ ğ‘“(ğ‘„)determines whether ğ‘is in scope.
Example. The most common form of control dependency that
we found is that {ğ‘1,...,ğ‘ğ‘›}enables or disables the execution of
the only parts of code where ğ‘is used. That is, ğ‘(ğ‘)is used only
whenğ‘(ğ‘1) âˆ§...âˆ§ğ‘(ğ‘ğ‘›)istrue. In a concrete example from HDFS,
ğ‘=rpc.metrics.percentiles.intervals andğ‘„={rpc.metrics.qu
antile.enable} .ğ‘„controls whether to measure percentile latency
as aRPC metric, ğ‘specifiespercentiles to measure.
Code Patterns. Essentially, a control dependency occurs when
control flows to all uses of ğ‘(ğ‘)are guarded by ğ‘„. We found two
control dependency code patterns: (1) Branch condition. Branching
dependson ğ‘„andthedependentparametervalue ğ‘(ğ‘)isusedin
only one branch. The following code snippet shows the control
dependency of the example described above, in which the value of
rpc.metrics.quantile.enable (inrpcQuantileEnable ) controls the
use ofrpc.metrics.percentiles.intervals â€™svalue(in intervals ).
1if(rpcQuantileEnable ) {
2rpcQueueTimeMillisQuantiles = newMutableQuantiles[ intervals ];
3for(inti = 0; i < intervals; i++) { ... }
4}
(2)Object creation. ğ‘„is used to initialize an object and ğ‘(ğ‘)is only
usedinsidethecreatedobject.Thefollowingcodesnippetshowsan
exampleofsuchpatternfromHDFS.Thevalueof dfs.datanode.ava
ilable-space-volume-choosing-policy.balanced-space- preferenc
e-fraction isonlyusedwhenthevalueof dfs.datanode.fsdataset
.volume.choosing.policy isAvailableSpaceVolumeChoosingPolicy ,
sincetheformerparameterisonlyusedinsidetheclass AvailableS
paceVolumeChoosingPolicy1.
1VolumeChoosingPolicy <...> blockChooserImpl =
2ReflectionUtils.newInstance(conf.getClass(
3"dfs.datanode.fsdataset.volume.choosing.policy" ), ...);
4
5public class AvailableSpaceVolumeChoosingPolicy <...>
6implements VolumeChoosingPolicy{
7balancedPreferencePercent = conf.getFloat(
8"dfs.datanode.available-space-*.balanced-space-preference-fraction" ,...);
9... }
4.1.2 DefaultValueDependency. Thedefaultvalueofthedepen-
dent parameter ğ‘is a function of ğ‘„if and only if ğ‘is not currently
assignedavalue:
ğ‘(ğ‘)=/braceleftBigg
â„(ğ‘(ğ‘1),...,ğ‘(ğ‘ğ‘›)),ifğ‘(ğ‘)==null
ğ‘(ğ‘), otherwise(A)
wherenullmeans that aparameterisnot mappedto avalue.
1dfs.datanode.available-space-volume-choosing-policy.balanced-space-p
reference-fraction is abbreviated to savespace.Example. In one HDFS example, ğ‘=dfs.namenode.edits.dir ,
ğ‘„={dfs.namenode.name.dir }andâ„is the identity function. dfs.n
amenode.edits.dir anddfs.namenode.name.dir specifythe filesys-
temlocationstostorenametablesandtransactions,respectively.
The latter serves as the defaultvalueof the former.
Code Patterns. Two code patterns that matched the cases in (A):
(1)In-file substitution. One parameter value is explicitly used as the
default value for the dependent parameter in the configuration file,
as showninthe following example.
1<name> dfs.namenode.checkpoint.edits.dir </name>
2<value>${ dfs.namenode.checkpoint.dir }</value>
(2)In-code substitution . During execution, if the value of the depen-
dentparameteris null,itissettothevalueofanotherparameter.
An example:
1public static List<URI> getNamespaceEditsDirs(...){
2if(editsDirs .isEmpty()) { //dfs.namenode.edits.dir
3 return getStorageDirs(conf, "dfs.namenode.name.dir" );
4}
5}
WheneditDirs (storing the value of dfs.namenode.edits.dir ) is
empty(i.e.,notset),thevalueof dfs.namenode.name.dir isreturned.
4.1.3 OverwriteDependency. Whenmultiplecomponentsareused
together, some values for parameters defined in one component
maybeoverwrittentobeconsistentwiththeparametervaluesin
anothercomponent.Hence,inanoverwritedependency,atsome
point after ğ‘was initialized, ğ‘(ğ‘)=â„(ğ‘(ğ‘1),...,ğ‘(ğ‘2)). Overwrite
dependencies in our data set are often inter-component dependen-
ciesandcrashescanoccurwhenanexpectedoverwritedependency
doesnothold.However,usersmaynotbeawareofoverwritede-
pendencies,sotherecanbeconfusionastowhythesystemdoes
not use the parametervaluesthat usersset.
Example. An example overwrite dependency from YARN and
HDFShad ğ‘=dfs.client.retry.policy.spec ,ğ‘„={ğ‘}whereğ‘=y
arn.resourcemanager.fs.state-store.retry-policy-spec ,andâ„as
theidentityfunction. ğ‘definesthetimeoutsandretriesforHDFS
clients;YARNusesHDFSasadistributedfilesystemandoverwrites
ğ‘withits ownparameter ğ‘.
Code Patterns. We identified two code patterns: (1) Explicit over-
writes.The variable holding the dependent parameterâ€™s value is
directly re-assigned. The following code snippet shows the over-
writedependency describedabove,
1retryPolicy = conf.get(
"yarn.resourcemanager.fs.state-store.retry-policy-spec" , ...);
2conf.set( "dfs.client.retry.policy.spec" , retryPolicy);
inwhichthe getandsetmethodsareusedtoreadandoverwrite
configuration values, respectively. (2) Implicit overwrites. Multiple
parametersareusedtosettheenvironmentalvariablesanddifferent
environmentalvariablespossessdifferentprioritieswhichformthe
overwritingrelationimplicitly.Thefollowingshowsan example
from MapReduce:
1log4jPropertyFile = conf.get( "mapreduce.job.log4j-properties-file" );
2vargs.add( "-Dlog4j.configuration=" +log4jPropertyFile);
3logLevel = conf.get( "yarn.app.mapreduce.am.log.level" );
366ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Q. Chen, T. Wang,O. Legunsen, S.Li, andT. Xu
4vargs.add( "-Dhadoop.root.logger=" + logLevel + ",CRLA" );
The environment variable log4j.configuration set bymapreduce
.job.log4j-properties-file implicitly has higher priorities over
the environment variable hadoop.root.logger set byyarn.app.map
reduce.am.log.level . Thus,mapreduce.job.log4j-properties-fil
eoverwrites yarn.app.mapreduce.am.log.level .
4.1.4 Value Relationship Dependency. The value of the dependent
parameter ğ‘is constrained by the values of parameters in ğ‘„. We
observed three kinds of such constraints: (1) Numeric. ğ‘(ğ‘)=(ğ´1Â·
ğ‘(ğ‘1)â‹„...â‹„ğ´ğ‘›Â·ğ‘(ğ‘ğ‘›))+ğœ€,whereâ‹„isanyarithmeticoperator, ğ´1,...,ğ´ğ‘›
are numeric coefficients, and ğœ€is a positive or negative constant,
orzero.(2) Logical.ğ‘â€²(ğ‘)=ğ‘â€²(ğ‘1)â—¦...â—¦ğ‘â€²(ğ‘ğ‘›),whereâ—¦meansany
logical operator and ğ‘â€²is a special getter method that returns true
orfalsedependingon thevalueof anon-boolean ğ‘ğ‘–orğ‘(ğ‘1)ifğ‘ğ‘–
isboolean.Itmeansthelogicalvalue ğ‘â€²(ğ‘)shouldbeequaltothe
logicalvalueof ğ‘â€²(ğ‘1)â—¦...â—¦ğ‘â€²(ğ‘ğ‘›).(3)Set.ğ‘(ğ‘) âŠ†ğ‘(ğ‘1)âŠ™...âŠ™ğ‘(ğ‘ğ‘›),
whereâŠ™canbeanysetoperator.Failure tosatisfytheconstraints
of value relationship dependencies can cause abnormal program
behavior,including exit/abort, exceptions,and performance degra-
dation.Constraintsinavaluerelationshipdependencyarechecked
duringcomponentstartup orduringexecution.
Example. In an Alluxio numeric value relationship dependency,
ğ‘=alluxio.master.worker.threads.max ,ğ‘„={ğ‘}whereğ‘=allux
io.master.worker.threads.min ,andğœ€â‰¥0.ğ‘andğ‘definethemax
andmin valuesofthe thread poolsize;hence ğ‘â‰¥ğ‘.
Code Patterns. Commonly, (1) numeric value relationship depen-
dencies constrain a parameter value to not be greater (respectively,
less) than a max(respectively, min) value specified by another
parameter.The following showsan example from Alluxio,
1mMinThreads=conf.getInt( "alluxio.master.worker.threads.min" );
2mMaxThreads=conf.getInt( "alluxio.master.worker.threads.max" );
3Preconditions.checkArgument(
4 mMaxThreads >= mMinThreads, ...);
(2)Logicalvaluerelationshipdependenciesareoftenusedtospecify
that parameters need to be simultaneouslyenabled. The following
showsan example from Spark,
1if(dynamicAllocationEnabled ) { //spark.dynamicAllocation.enabled
2ExecutorAllocationClient =>
3Some(newExecutorAllocationManager(...)
4}
5private [spark] classExecutorAllocationManager(
6private def validateSettings(): Unit = {
7 if(!conf.get( "spark.shuffle.service.enabled" ) && !testing)
8 throw new SparkException( "...")
9}
10}
Ifspark.dynamicAllocation.enabled (storedin dynamicAllocatio
nEnabled )istrue,Sparkwillcreatean ExecutorAllocationManager
object which requires spark.shuffle.service.enabled to betrue.
Otherwise, an exception will be thrown. In short, spark.dynamicAl
location.enabled andspark.shuffle.service.enabled have to be
enabled at the same time. (3) As the name implies, set relationship
dependenciesareoftenusedtoenforcethatthevalueofoneparam-
etermustbethesubsetofvaluesspecifiedbyanotherparameter.
The following showsan example from YARNandMapreduce.1Collection<String> shuffleProviders = conf.getStringCo llection(
2"mapreduce.job.shuffle.provider.services" );
3Collection<String> auxNames = conf.getStringCollection (
4"yarn.nodemanager.aux-services" );
5for(String shuffleProvider: shuffleProviders)
6if(auxNames.contains(shuffleProvider)) {
7 ...
8}else{
9 throw new YarnRuntimeException();
10}
Variable auxNames, which stores yarn.nodemanager.aux-services
must be a subset of shuffleProviders , which stores mapreduce.job
.shuffle.provider.services ;otherwise,aruntimeexceptionwill
be thrown.
4.2 BehavioralDependencies
In abehavioral configuration dependency , there is no dependent
parameter ğ‘whosevalueorscopedependsonthevaluesofother
parameters.RatherthevaluesofmultipleparametersÅ‚co-operateÅ¾
toinfluencesomebehaviorofthesystem.Morespecifically,aset
of parameters ğ‘ƒ={ğ‘1,...,ğ‘ğ‘›}have a behavioral dependency if
they are used together in the same operation (such as a library call,
systemcallormethodcall),suchthatchangingthevalueofsome
ğ‘âˆˆğ‘ƒcan alteracomponentâ€™s behavior.
Example. AnexamplebehavioraldependencyinHadoop Com-
mon isconnect(A, B) , whereğ‘ƒ={ğ´,ğµ},ğ´=fs.ftp.host and
ğµ=fs.ftp.host.port .Changing ğ´butnotğµ(andviceversa)could
resultinanattempttoconnecttoanIPaddressataportthatisnot
allowing connectionsÃthe effectof ğ´isboundedby ğµ.
Code Patterns. The code patterns for behavioral dependencies
are (1) The library/system/methodcallhas ğ‘ƒas arguments,e.g.,
1String host = conf.get( "fs.ftp.host" );
2intport = conf.getInt( "fs.ftp.host.port" );
3client.connect(host, port);
(2)The resultof an arithmeticoperationonelements in ğ‘ƒisan ar-
gumenttothelibrary/system/methodcall.AnexamplefromHDFS,
1editLogRollerThreshold =
2conf.getLong( "dfs.namenode.checkpoint.txns" ) *
3conf.getFloat( "dfs.namenode.edit.log.autoroll.multiplier.threshold" );
4
5nnEditLogRoller = newDaemon( newNameNodeEditLogRoller(
editLogRollerThreshold ,...));
6nnEditLogRoller.start();
dfs.namenode.edit.log.autoroll.multiplier.threshold determines
the threshold, which in turn determines when an active node rolls
its own edit log; dfs.namenode.checkpoint.txns controls after how
many transactions a checkpoint will be created. These parameters
are multiplied to obtain the threshold for rolling logs. They control
howthe function start()works.
4.3 One-offCodePatterns
We identify 30 configuration dependencies which fall in one of
the dependency types defined in ÄŸ 4.1and ÄŸ4.2, but do not have the
commoncodepatternsdescribedinÄŸ 4.1andÄŸ4.2. Amongtheseone-
off cases, 90% (27/30) are value relationship dependencies, while
367UnderstandingandDiscoveringSoftware ConfigurationDependencies ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
Table 2: The number of dependency types for intra- and
inter-componentdependenciesinHadoopandOpenStack.
Hadoop OpenStack
Dependencies Intra Inter Intra Inter
Control 125 20 118 0
ValueRelationship 46 54 60 3
Overwrite 5 11 0 0
DefaultValue 32 6 18 0
Behavioral Dependency 11 3 9 0
Table 3: the number of intra- and inter-component configu-
rationdependenciesfoundineachsystem.inter-component
dependencies count one for each component involvedÃthe
sum of unique inter-component dependencies is therefore
half ofthesum ofthenumberofinvolved components.
Hadoop OpenStack
Component Intra Inter Component Intra Inter
HCommon 38 36 Nova 65 0
HDFS 46 26 Swift 11 0
Yarn 46 57 Neutron 17 1
HBase 14 11 Keystone 42 1
Alluxio 10 8 Glance 16 2
Zookeeper 4 9 Placement 1 0
MapReduce 28 27 Ironic 28 2
Spark 33 14 Cinder 25 0
Total 219 94 Total 205 3
10% (3/30) are behavioral dependencies; 76.7% (23/30) are intra-
componentand23.3% (7/30)are inter-component.
Weprovidetwoexamples.Thefirstexampleinvolvesparameters
dfs.hosts anddfs.hosts.exclude in HDFS. The former specifies
alloweddatanodeaddresses,whilethelatterspecifiesblockeddata
nodeaddresses.Thatis,theintersectionofvaluesspecifiedbythese
two parameters should be empty. However, from inspecting the
code, we did not find how they are related. A second example, also
in HDFS, involves the parameters, dfs.namenode.replication.mi
nanddfs.namenode.safemode.replication.min . Both parameters
control replication numbers: the former controls the replication
number in normal mode while the latter controls the replication
number in safe mode. Thus, the latter should be larger than the
former(tobesafe),butthereisnocodetocheckthisdependency.
Our future direction is to infer those logical dependencies that
miss structural dependencies in code using other types of coupling
measures (e.g.,evolutionary coupling [ 46]).
4.4 Results ofGrouping Dependenciesby Type
Tables2and3showtheresultsofgroupingtheconfigurationde-
pendenciesinourstudyoftextsourcesbythetypesdiscussedin
ÄŸ4.1and ÄŸ4.2. We highlight four main observations from Table 2,
which shows the intra- and inter-component configuration depen-
dencies of various types in Hadoop and OpenStack. First, majority
(95.6%) of configuration dependencies that we studied are func-
tional. Second, control dependencies are the most common form
of (functional) configuration dependencies, comprising 50.5% of
the 521dependenciesthatwe studied.Third,acrossalldependency
types, there are many more intra-component dependencies thaninter-component dependencies, as expected (parameters should be
usedmoreinsidethecomponentsinwhichtheyaredefined).We
further investigatedthe inter-component dependenciesand found
thatthecomponentsthatinteractedthemostwereMapReduceand
YARNwith22inter-componentdependencies.Finally,OpenStack
hasmuchfewerinter-componentdependenciesthanHadoopbe-
causecomponentsinOpenStackaremuchlooselycoupledÃeach
componentprovidesindependentservicesandusesRESTfulAPIs
tocommunicate.Hence,inbuilding cDep,wedecidedtofocuson
Java, inorder to discover dependencies inHadoop.
Table3shows how many intra-component dependencies and
inter-componentdependenciesareineachofthe16softwaresys-
tems that we evaluate. A key observation is that every software
in our evaluation contains a configuration dependency, suggest-
ing that configuration dependencies are widespread. Onaverage a
component has 33 configuration dependencies. Even though Place-
mentisthesmallestcomponentwithonly22parameters,ithasone
configurationdependency.
Weremindreadersthatthepopulationoftheconfigurationde-
pendencies presented in Tables 2and3should be taken with the
specific systemsandour methodology inmind.
4.5 Discussion
4.5.1 Variables in Dependencies. The majority of configuration
dependencies only involve configuration values read from con-
figurationfile,whilesomeconfigurationdependenciescouldalso
includevariableswhosevaluescanonlybeevaluatedatruntime.
The following code snippet (from a value relationship dependency)
illustrates the latter:
1// "mapreduce.map.memory.mb"
2Resource capability = getPerAllocationResource();
3// "yarn.nodemanager.resource.memory-mb" - allocated_m emory
4Resource available = total_memory -allocated_memory
5if(available > capability)
6return new ContainerAllocation(pendingAsk, ALLOCATED);
7else
8return ContainerAllocation.LOCALITY_SKIPPED;
inwhich capability storestherequestedmemory(setby mapreduce
.map.memory.mb ),whileavailable storesthetotalavailablememory,
total_memory (set byyarn.nodemanager.resource.memory-mb ). The
variable available can only be evaluatedat runtime.
4.5.2 Dependencies that we do not cover. In this paper, we mainly
focus on configuration dependencies that are formed in software
programs. We do not consider configuration dependencies that are
formedexternally inthe deployment environment .
One such example is resource competition, in which different
configuration parameters refer to external resources, such as CPU,
memory, and operating system (OS) resources (e.g., IP addresses,
ports, and file descriptors). In other words, ğ‘andğ‘„(defined in
ÄŸ2.3)mustsatisfyexternalconstraintsenforcedbytheOS,virtual
machine, or hardware that deploys the software systems. Take the
example in ÄŸ 4.5.1;yarn.nodemanager.resource.memory-mb is con-
strained by the physical memory size and is competing with other
co-running systems sharing the same machine. Resource compe-
tition is difficult to capture within the target software, without
knowledgeofthedeploymentenvironment.Therefore,wedonot
considertheminthis paper.
368ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Q. Chen, T. Wang,O. Legunsen, S.Li, andT. Xu
5 DEPENDENCYHANDLING INPRACTICE
Inthissection,westudyhowconfigurationdependenciesare checked,
handled,andloggedinthesoftwareprogramswestudy.Wefocus
onlyonvaluerelationshipdependencytypes(ÄŸ 4.1.4)whichhave
clear definitions of violations which occur when parameter values
do not hold constraints. In principle, software programs should
rigorously check that dependencies hold, handle any violations,
andprovidefeedbackto the systemusers[ 73,86,87,89].
Wealsostudiedtheothertypesofdependencies,suchascontrol,
defaultvalue,andoverwritedependencies.Unfortunately,werarely
found checking code or feedback messages in the program. For ex-
ample,weobservethatonly13controldependencieshavechecking
code or feedback messages. Our analysis follows the practice of
source code inspection and violation injection [ 87,89]. For a target
configuration dependency, we start the system with crafted config-
uration values thatintentionally violate the dependency,and then
run workloads to exercise the code that uses the configurations;
meanwhile, we observe the system behavior and logs to determine
the impact ofthe violations.
5.1 Checking ConfigurationDependencies
Checking that configuration dependencies hold has significant im-
plications on the reliability, performance, and usability of software
systems[ 89].Withoutsystematicandproactivechecking,depen-
dency violations would manifest as runtime exceptions, error code,
failedassertions, orperformance issues(discussedinÄŸ 5.4).
Table4showsabreakdownofthethreeexecutionphasesduring
whichconfigurationdependencyischeckedinHadoopandOpen-
Stack: (1) checking at initialization time , (2)checking at runtime
(after initialization), and (3) no checks. Note that neither Å‚checking
at runtimeÅ¾ nor Å‚no checkÅ¾ is desirableÃthe former could raise
runtimeerrorswhilethe latter could degrade performance.
Observations. InTable4,mostdependencies(89%inHadoopand
71.4% in OpenStack) have logic in the code to check that they hold.
However, a significant percentage of dependencies (11% in Hadoop
and 28.6% in OpenStack) have no checking logicÃthe program
directly uses the dependent parameter evenwhen the dependency
isviolated,as exemplifiedinFigure 1(c).
Moreover, 43% and 39.7% of the cases in Hadoop and OpenStack
are checked after initialization, when it is often too late to prevent
orrecoverfromruntimeexceptionsorotherfailuresandanoma-
lous consequences [ 89]. The main reason is that not all modules
areneededatthesystemâ€™sinitializationphase;somemodulesare
created on demand. Thus, in those on-demand modules, the check-
ing code is only invoked when the module is created. Moreover,
some dependency cases involve dynamic variables which can only
be checkedat runtime,as describedinÄŸ 4.5.1.
5.2 HandlingDependency Violations
Weinvestigatehowdependencyviolationsdetectedbythechecking
logic (ÄŸ5.1) are handled. Table 5ashows handling logic in three
categories:(1) exceptions: theprogramdoesnotrecoverfromthe
violation;theviolationissimplyreported.Table 5areportson when
the exception is thrown, either at initialization time or runtime.
(2)correction: the program enforces dependencies by correctingTable 4: Checking practices of valuerelationship dependencies.
SW Stack Init Time Runtime NoCheck Total
Hadoop 46(46.0%) 43(43.0%) 11(11.0%) 100
OpenStack 20(31.7%) 25(39.7%) 18(28.6%) 63
Table 5: Handling practices and feedback on dependency viola-
tions.WeonlyincludecasesthathavecheckingcodeinTable 4ÃÅ‚no
checkÅ¾ cases arenothandled.
(a)Violationhandlingpractices of valuerelationship dependencies.
SW StackException Correction LoggingTotalInit Time Runtime w/log w/o log only
Hadoop 30 (33.7%) 6 (6.7%) 8 (9.0%) 32 (36.0%) 13 (14.6%) 89
OpenStack 18 (40.0%) 15 (33.3%) 3 (6.7%) 7 (15.6%) 2 (4.4%) 45
(b)Logging quality for violationsof valuerelationship dependencies.
SWStack Complete Partial Inadequate None Total
Hadoop 23 (25.8%) 17 (19.1%) 17 (19.1%) 32 (36.0%) 89
OpenStack 19 (42.2%) 10 (22.2%) 9 (20.0%) 7 (15.6%) 45
the violation; such correction could potentially lead to behavior
that is different from what the users expect, due to deviation from
the original parameter values set by users. Table 5aalso reports
whethertheprogramlogsitscorrectiveactionsasusernotifications,
(3)logging only: the program logs the dependency violation and
continues its executionwithoutinvokingany handling logic.
Observations. Only45%and22.3%dependencyviolationsarecor-
rectedinHadoopandOpenStack,respectively.Ofthesecorrected
violations, 80%(32/40) and 70%(7/10) do notprovide any logmes-
sages to users that parameter values were updated in Hadoop and
OpenStack,respectively.Theimplicationisthatthesoftwarethat
we studiedare missing manyopportunities to correct dependency
violations;theysimplythrowexceptions(40.4%ofcasesinHadoop
and 73.3% of cases in OpenStack) or log the violations (14.6% of
casesinHadoopand4.4%of casesinOpenStack).
5.3 Giving Feedbackon Dependency Violations
We systematically examined the quality of log/error messages pro-
ducedduringthehandlingofdependencyviolations(ÄŸ 5.2).Table5b
showsfourcategoriesoffeedbackqualitythatwefound:(1) Com-
plete:thelogmessagecontainsallparametersinthedependency
andalsodescribes the dependency,e.g.,
1Preconditions.checkArgument(mMaxWorkerThreads >=
mMinWorkerThreads, "alluxio.master.worker.threads.min" + " can
not be less than " +"alluxio.master.worker.threads.max" )
(2)Partial:the log message contains some but not all parameters in
thedependency.Itishardtounderstandthedependencydirectly
from the logmessage.The following isan example:
1if(recoveryEnabled ) { //mapreduce.jobhistory.recovery.enable
2storeClass = conf.getClass( "mapreduce.jobhistory.recovery.
store.class" );
3if(storeClass == null)
4 throw new RuntimeException( "Unable to locate storage class,
check mapreduce.jobhistory.recovery.store.class ");}
5}
369UnderstandingandDiscoveringSoftware ConfigurationDependencies ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
Table 6: Impact of violationsof valuerelationship dependencies.
SW Stack UsabilityStartup Runtime Perf. ServiceTotalFailure Failure Issues Degrad.
Hadoop 44(44.0%) 30(30.0%) 7 (7.0%) 12(12.0%) 7 (7.0%) 100
OpenStack 24(38.0%) 18(28.6%) 15(23.8%) 3 (4.8%) 3 (4.8%) 63
The message only pinpoints mapreduce.jobhistory.recovery.stor
e.class,butdoesnotmention mapreduce.jobhistory.recovery.en
able(stored in recoveryEnabled ) which can be disabled to fix the
exception.(3) Inadequate: thelogmessagecontainsnoparameter.
An example:
1try:
2scheme = CONF. enabled_backends [ store_id ]
3except KeyError:
4msg = _( "Store for identifier %s not found" ) % store_id
5raise exceptions.UnknownScheme(msg)
the log message will only tell users identifier is not found, while
tellingneitherparameternames.(4) Nomessage: Thismostlyoccurs
when the program overrides the configuration values to enforce
dependencies.
Observations. Majorityofdependencyviolationhandlinglogic
(74.2% in Hadoop and 57.8% in OpenStack) do not provide com-
plete logmessages. 55.1% oflogmessagesinHadoopand35.6%of
logmessagesinOpenStackare intheÅ‚inadequateÅ¾orÅ‚noneÅ¾cate-
gories.Theseresultssuggestthatlogenhancementtools[ 93,94,97]
could beenhanced withconfiguration dependencyinformation to
improve the qualityofthesemessages.
5.4 Consequences ofDependency Violations
Based on the analysis in ÄŸ 5.1ÃÄŸ5.3, we turn to the question, Å‚what
arethe(potential)consequences ofconfiguration dependencyvio-
lations?Å¾Wefindthatviolationsofconfigurationdependenciescan
haveseveralconsequences,including(1)runtimefailures(2)startup
failures, (3) performance issues (4) usability issues, and (5) service
degradation. Table 6shows a breakdown of these categories of
potentialconsequencesfor controlandvaluedependencies.
Usabilityissuesreferto systemsignoringoroverwritinguser-
inputtedconfigurationswithoutprovidinguserswithfeedback(e.g.,
logging). The typical cases are (1) changing a configuration param-
eter takes no effect due to not satisfying control dependencies, and
(2) the user-inputted configuration is overwritten to resolve depen-
dencyviolationswithoutfeedback.Althoughitkeepsthesystem
running, the overwritten value may not reflect usersâ€™ intention
whichinfluencesusability.Performanceissuesaredefinedbyper-
formance metrics and do not consider system feedback. We do not
have acasethat fitsinboth usabilityandperformance.
49.0% and 57.2% of consequences are severe (i.e., failures or per-
formance issues) for Hadoop and OpenStack, respectively. The
following code snippet from HDFS shows an example in which
aruntimeexceptionisthrownwhen dfs.replication islessthan
dfs.namenode.replication.min ,
1replication = conf.get( "dfs.replication" );
2minReplication = conf.get( "dfs.namenode.replication.min" );
3if(replication < minReplication)
4throw new IOException(...);Dependencyviolationscanalsoleadtoperformancedegradation.
For example, when mapreduce.map.cpu.vcores exceeds yarn.nod
emanager.resource.cpu-vcores , YARN will not grant more CPUs
to MapReduce, slowing down the system. Many dependency vi-
olations could potentially lead to usability issues as the software
eithersilentlyignoresoroverwritesuser-specifiedparameterval-
ues. As discussed in ÄŸ 2.1, configuration dependencies often lead to
user confusion and questions in reality. We also observe service
degradationsuch as logtruncation andstaledata.
6 AUTOMATED DEPENDENCYDISCOVERY
As discussed in ÄŸ 3.2.2, manual discovery of configuration depen-
denciesistime-consuming.Ittookus20personmonthstodiscover,
analyze, and validate the dependencies described in the documents
for the 16 software projects, despite extensive scripting (ÄŸ 3.2.1).
However, the understanding that we gained, including the defi-
nitionandsourcecodepatterns,inspiredourautomatedsolution
for discovering configuration dependencies. We present cDep, a
toolforautomaticallydiscoveringvarioustypesofconfiguration
dependencies by statically analyzing the target software programs.
cDepis built on the Soot compiler framework [ 32]. It analyzes
Java bytecode and thus works for both Java and Scala programs.
cDeptakes the bytecode of multiple programs as input and out-
putstheconfigurationdependenciesÃtheconfigurationparameters
involvedandthe dependency types.
6.1cDepDesign andImplementation
Intra-procedural 
taint tracking
Inter-procedural 
taint tracking
Dependency
pattern analysisLocating
config APIsJava bytecode
Dependency
informationColoring Pattern matching
Figure 2: Workflow
ofthecDeptool.The basic idea of cDepis intuitive.
cDepfirst Å‚colorsÅ¾ each program vari-
able that stores a configuration pa-
rameter value based on static taint
analysisÃvariables associated with
different parameters have different
colors and one variable could have
multiple colors if its value is derived
frommultipleparameters. cDepthen
analyzes the dependencies between
the colored variables using the source
codepatternssummarizedinÄŸ 4.Ifthe
variablesmatch thepatternsofaspe-
cific configuration dependency type,
cDeprecordsthecorrespondingcon-
figuration parameters and reports a
dependency between them. Figure 2
showsthe workflowof cDep.
6.1.1 Coloring. cDepcolorsprogram
variables based on an implementation of static taint analysis on
topoftheSootcompilerinfrastructure.Differentparameterscor-
respond to different taint colors. cDeptaint analysis is inter-
procedural (to track values across methods), field sensitive (con-
figurationvaluescouldbestoredinafieldofaclass),andcontext
sensitive (recording the calling context) (see the modelinÄŸ 2.2).
Theinitialtaintsarevaluesreadfromtheconfigurationgetter
APIsidentifiedby cDep(ÄŸ2.2).Taintsarethenpropagatedalongthe
data-flowpaths,throughassignments,arithmeticoperations,and
string operations, until they reach sink statements. cDepsupports
370ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Q. Chen, T. Wang,O. Legunsen, S.Li, andT. Xu
taint propagation through RPCs (Remote Procedure Calls) by map-
pingthecallerstubinterfacetothecalleeimplementation.Asink
statementonlyconsumestheparametervalue;itdoesnotfurther
propagate thevalue, e.g., by using the value as a branch condition
orpassingthevaluetoanexternallibraryorsystemcall.Wedonot
propagatetaintsvia allcontrolflows,toavoidover-tainting[ 74].
Wedo,however,analyze somecontrol-flowdependenciesoftainted
variables to identify dependency types such as control dependency
andlogical valuerelationship.
6.1.2 Pattern Matching. With colored variables, cDepsearches for
patternsdescribedinÄŸ 4todiscoverdifferenttypesofdependencies:
(1)Control dependency. If a branch condition uses variables from
parameters ğ‘„={ğ‘1,...,ğ‘ğ‘›}and the branch condition dominates
thesinkstatementsofaparameter ğ‘,thencDepreportsacontrol
dependencybetween ğ‘andğ‘„.cDepalsofinds,asanobjectcreation
pattern,if ğ‘„isusedtoinitializeanobjectwithinwhich ğ‘isused
(ÄŸ4.1.1). (2)Default value dependency. cDepleverages the semantics
of common configuration getter APIs in which the default value
needsto be providedas an argument,e.g.,
1<T> get(Class<T> class, String parameterName, T defaultValue);
Ifthedefaultvalueofparameter ğ‘istaintedbyotherparameters
inğ‘„, a default value dependency is found. Moreover, cDepchecks
the pattern in which ğ‘(ğ‘)is overwritten by parameters from ğ‘„,
after checking ğ‘is not set (i.e., NULLorisEmpty). (3)Overwritede-
pendency. cDepcapturesexplicitoverwritesandidentifiesallthe
configurationrewriteAPIs(intheformofsettermethods)asshown
inÄŸ4.1.3.Wedonothandleimplicitoverwrites,astheyarenotcom-
mon (0.96% in our dataset) and it requires cDepto understand
theparsingcodethatreadsthevaluesloadedintocorresponding
variables. (4) Value relationship dependency. For the numeric and
set values, cDepidentifies colored variables used in binary oper-
atorâ™¦ âˆˆ {â‰¤,â‰¥,<,>,=,â‰ }and set operations (e.g., contains). It
outputs the operators if the numeric/set relationship is enforced in
the program. cDepalso identifies tainted variables used in max/min
methods,whichindicatenumericvaluerelationships.Forlogical
values,cDepsearches for all tainted variables used in a logical
expression. (5) Behavioral dependency. cDepidentifies results of
applying arithmetic operators â™¦ âˆˆ {+,âˆ’,âˆ—,/}to tainted variables
which are then used in subsequent library/system/method calls.
These are output as behavior dependencies. Moreover, if tainted
parametersareusedinJavaâ€™scorelibraryAPIs,theyarealsooutput
as behaviordependencies.
6.2 Evaluation
We applied cDepto the eight Java and Scala software components
in the Hadoop-based stack (Table 1). Overall, cDepdiscovered 723
trueconfigurationdependenciesofthefivetargettypes,witha6.0%
averagefalsepositiverate.Thebreakdownbasedondependency
types is shown in Table 7. Two authors manually verified each
dependency discovered by cDepbased on the definition of the
dependencies(ÄŸ 4)andthecodelocationpointedby cDep;athird
author will be looped in, whenever the two inspectors needed
additionalopinionsforconsensus.Theverificationprocesswasthe
same as the processusedinour study,describedinÄŸ 3.2.2.Table 7: Evaluation results of applying cDepto the eight software
projects in the Hadoop-based stack (Table 1). TP and FP stand for
Trueand False Positives, respectively.
Dependencies Discovered Known TP NewTP FP
Control 372 143/145 (98.6%) 211 4.8%(18/372)
ValueRelationship 155 80/100(80.0%) 57 11.6%(18/155)
Overwrite 19 3/16 (18.8%) 16 0%(0/19)
Default Value 97 38/38 (100.0%) 59 0%(0/97)
Behavioral 126 11/14 (78.6%) 105 7.9%(10/126)
Overall 769 275/313 (87.9%) 448 6.0%(46/769)
Among the 723 true dependencies that cDepdiscovered, 448
were not in our dataset collected from the documents (ÄŸ 3)Ãwe
were not aware of these until cDepdiscovered them. There are
two reasons for the surprisingly large number of undocumented
dependencies.First,manyofthedependenciesarecontroldepen-
dencies and default value dependencies as shown in Table 7; those
dependencies do not lead to crashes or runtime exceptions. So, de-
velopersmaynotcarefullydocumentthemeventhoughtheycan
lead to usability problems. Second, there is currently no systematic
practice of discovering subtle configuration dependencies. Some
dependenciesareobviousbutmanyofthosediscoveredby cDepare
subtle and even counter-intuitive: we ourselves did not understand
somedependencies until we manually validatedthem.
Wereverse-checkedallthe448dependencycasesfoundby cDep
that were not included in our study. We find that 94.4% (423) of the
cases are not documented, while the rest 5.6% (25) are documented
but are missedinour data collection methods(ÄŸ 3).
Wealsoinvestigatedthe38falsenegativesand46falsepositives
fromcDep. As shown in Table 7,cDepidentified 87.9% (275 out of
313) of the dependencies in our dataset. There are three reasons
whycDepmissed the remaining 12.1%: (1) 14 dependencies do
not have commoncodepatterns as discussed inÄŸ 4.3Ãthe patterns
usedbycDepcannotcapturethosedependencies.(2)Someprojects
usead hocmeans to overwrite parameters instead of the standard
configuration APIs, which contributes to the 13 missing cases of
overwritedependencies.Forexample,HBASEusessubstringmatch-
ingtooverwriteZooKeeperparameters.(3)Theremainingcases
are dependencies that involve through external libraries, which
cDepdoes not analyze. The false positives are mainly caused by
over-taintingdueto cDepâ€™sanalysisnotbeingpath-sensitiveÃsome
variables should not be tainted as the variables will not store pa-
rametervaluesat runtime.
7 DISCUSSION
Eliminating configuration dependencies A solution to the complexity
caused by configuration dependencies is to eliminate them via bet-
ter configuration design. We believe that some dependencies are
not necessary but result from poor configuration design. For exam-
ple, the dependency between dfs.hosts anddfs.hosts.exclude in
ÄŸ4.3should be eliminatedÃif a host string is in both, it is unknown
whether it will be allowed or blocked. Also, min and max value de-
pendencies can be designed as values in a range type to help users
keep track of dependent parameters. On the other hand, many
dependenciesexistforgoodreasons,e.g., mapreduce.map.memory.mb
371UnderstandingandDiscoveringSoftware ConfigurationDependencies ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
andyarn.scheduler.maximum-allocation-mb bothcontrolmemory
allocationatdifferentlevels.So,itisimportanttoinvestigaterad-
ical new designs to eliminate unnecessary dependencies and to
effectivelymanage existing ones.
BetterHandling. Configurationdependenciesareoftennotsys-
tematicallyhandledw.r.t.checking,errorhandling,andfeedbackÄŸ 5.
Testing and analysis tools are needed to detect deficiencies in han-
dlingandtoimproveusabilityandreliabilityofconfigurablesoft-
ware.cDepcanprovidedependencyinformationtoenhancemis-
configurationinjectiontesting[ 87,97]configurationchecking/vali-
dation[37,49,70,71,79,89,95],andconfiguration-awaresoftware
testing[42,45,53,60,62Å›64,69,75Å›77].
Applying NLP to discover configuration dependencies. A potential
direction is to add NLP (Natural Language Processing) to discover
newtypesof configuration dependencies.Somedependenciescol-
lectedfrom documentsdonot have commonsource code patterns
(ÄŸ4.3) and would be hard to find using program analysis. Using
the definitions in ÄŸ 4, text features can be built with focus on de-
scriptions of dependencies. Recent work has shown promises of
applyingNLPtechniquestoinferconfigurationconstraints[ 83]but
do not consider configuration dependencies between multiple con-
figuration parameters. Further, data mining based methods can be
used to discover more dependencies from large-scale datasets [ 85].
ThreatstoValidity. Manuallyfindingconfigurationdependencies
fromtextsourcesiserrorprone,andwemaymissormis-classify
dependencies.Toreducethisrisk,twoinspectorsdouble-checked
theresults.Ourresultsmaynotgeneralizetoothersystems;weonly
studied (1) software for cloud and datacenter systems, and (2) soft-
ware with well defined configuration APIs. cDepcan only find
configurationdependencieswithcodepatternsthatwemanually
identified.Thus,wecannotclaimtohavefoundalltheconfigura-
tiondependenciesintheprojectsstudied.However, cDepproved
our concept, and showed that automatic configuration dependency
discovery isfeasible andshould be improvedmore inthe future.
8 RELATED WORK
The prevalence and severity of software misconfigurations have
driventhedesignanddevelopmentofanumberofdetectionanddi-
agnosistechniques[ 34,35,37,43,49,59,70,71,79Å›82,87,89,95,96].
Detectionaimsatdetectingmisconfigurationbeforedeployment,
while diagnosis identifies root-causes of misconfigurations that
causedfailures, performance issues,andincorrectresults.
Most existing techniques either implicitly assume or are ex-
plicitly scoped tofindmisconfigurations ofindividualparameters.
However,priorstudiesshowthat23.4%Å›61.2%ofreal-worldmis-
configurationsinvolvemultipleinterdependentconfigurationpa-
rameters[ 92].Inthosecases,eachparametervalueiscorrectiniso-
lation, butthe value combination violates dependency constraints.
Hence,techniquesforsingle-parametermisconfigurationscannot
deal effectively withproblems causedby configuration dependen-
cies.cDepis one step towards enhancing existing techniques to
make themreason aboutdependencies.
Afewpriorstudiesconsiderspecifictypesofconfigurationde-
pendencies[ 41,68,70,71,87,95].Mostoftheseapplymachinelearn-
ingordataminingtechniquestoinferthedependentparametersfromalargenumberofconfigurationfiles.As aprioriknowledge,
thesetechniquestakeconfigurationdependencytypesasinputs,ei-
theraslearningtemplates[ 68,95]oraslanguagegrammars[ 70,71].
Forexample,if ğ´islargerthan ğµinahundredofconfigurationfile,
thosetechniques inferavaluerelationship dependency, ğ´>ğµ.
Our work complements the above studies in the following three
aspects. First, we cover more dependency types (e.g., default value,
overwrite,andbehaviordependencies)whicharenotcoveredby
prior studies. Second, for control and value relationship dependen-
cies presented in [ 87], our study shows more diverse code patterns.
Third,nopriorworkprovidesformaldefinitionsofconfiguration
dependencies. By filling the knowledge gap, we believe that our
workcansignificantlyenhanceexistingtoolstolearnmoretypes
ofconfigurationdependencies.
cDepismostrelatedtoSpex[ 87].Spexattemptstoautomatically
discoverconfigurationdependenciesfromsourcecode,including
control dependencies, and numeric value relationships between
two parameters. cDepdiffers from Spex in at leasttwo aspects: (1)
cDepis able to discover more dependencies with different types
and different code patterns, benefiting from the systematic under-
standing of configuration dependencies in our study, and (2) cDep
isgenerictodependenciesamongmorethantwoparameters,while
Spex ishardcodedto two-parameter code patterns.
The notion of dependencies as a source of complexity has been
studiedinotherdomains.Forexample,dependenciesofnetwork
router configurations are considered a key source of complexity of
network management[ 39,40] and software productlines [ 48,55].
Ourworkfocusesonconfigurationdependenciesintroducedand
enforcedby softwareprograms ,not networks orproduct lines.
Prior work [ 72] has studied cross-stack configuration errors,
referredtoaserrorsinonecomponentcausedbymisconfigurations
of other components. The concept is fundamentally different from
configurationdependencies definedandstudiedinour paper.
9 CONCLUSION
This paper presents our study of, and tool for finding, configura-
tion dependencies within and across software components. We
definefive typesofconfigurationdependencies andidentifytheir
commoncodepatterns.Wealsoreportonexistingpracticesforhan-
dlingtheseconsequences,whichareoftendeficientand adhoc.Our
tool,cDepis effective: it discovers known dependencies with high
precisionandrecallandalsofinds448previouslyundocumented
configuration dependencies. These results show that configura-
tion dependencies are prevalent and diverse, that it is feasible to
automaticallydiscoverthem,andthattheyshouldhenceforthbe
consideredafirst-classissueinsoftwareconfigurationengineering.
Allthe data andthe cDeptoolare madepubliclyavailable at:
https://github.com/xlab-uiuc/cdep-fse
ACKNOWLEDGEMENT
We thank Xudong Sun, Sam Cheng, Jack Chen, and Elaine Ang for
usefuldiscussionsandpaperproofreading.XudongSunandWenyu
Wanghelpedvalidatethereproductionoftheartifactsforthepaper
rebuttal.Xuan Pengcontributedto the study of OpenStack.
372ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA Q. Chen, T. Wang,O. Legunsen, S.Li, andT. Xu
REFERENCES
[1]Apache Users Mailing List. heartbeat timeout doesnâ€™t work. http://mail-
archives.apache.org/mod_mbox/hadoop-user/201407.mbox/<53BA5D42.
7080202@oss.nttdata.co.jp> , 2014.
[2]ApacheUsersMailingList.blockreplication. http://mail-archives.apache.org/
mod_mbox/hadoop-user/201401.mbox/<201401011820424902125@jd.com> ,
2014.
[3]HBASE ISSUE 13200. Improper configuration can leads to endless lease recovery
during failover. https://issues.apache.org/jira/browse/HBASE-13200/ , 2015.
[4]MAPREDUCE ISSUE 4604. In mapred-default, mapreduce.map.maxattempts
& mapreduce.reduce.maxattempts defaults are set to 4 as well as mapre-
duce.job.maxtaskfailures.per.tracker. https://issues.apache.org/jira/browse/
MAPREDUCE-4604/ , 2015.
[5]HDFS Short-Circuit Local Reads. https://hadoop.apache.org/docs/r2.9.2/hadoop-
project-dist/hadoop-hdfs/ShortCircuitLocalReads.html , 2018.
[6]Hadoop in Secure Mode. https://hadoop.apache.org/docs/r2.9.2/hadoop-project-
dist/hadoop-common/SecureMode.html , 2018.
[7]TheYARNTimelineServer. https://hadoop.apache.org/docs/r2.9.2/hadoop-yarn/
hadoop-yarn-site/TimelineServer.html , 2018.
[8]Keystone configuration options. https://docs.openstack.org/keystone/stein/
configuration/config-options.html , 2019.
[9]Alluxio 1.8 - Overview. https://docs.alluxio.io/os/user/1.8/en/Overview.html ,
2019.
[10]OpenStack Docs (Stein) : OpenStack Block Storage (Cinder) documentation.
https://docs.openstack.org/cinder/stein/ , 2019.
[11]Hadoop Common Configurations. core-default.xml. https://hadoop.apache.org/
docs/r2.9.2/hadoop-project-dist/hadoop-common/core-default.xml , 2019.
[12]OpenStack Docs (Stein) : Welcome to Glanceâ€™s documentation! https://docs.
openstack.org/glance/stein/ , 2019.
[13]ApacheHBase2.2.1-ReferenceGuide. https://hbase.apache.org/book.html ,2019.
[14]Apache Hadoop 2.9.2 - Hadoop: CLI MiniCluster. https://hadoop.apache.org/
docs/r2.9.2/hadoop-project-dist/hadoop-common/CLIMiniCluster.html , 2019.
[15]HDFS Configurations. hdfs-default.xml. https://hadoop.apache.org/docs/r2.9.2/
hadoop-project-dist/hadoop-hdfs/hdfs-default.xml , 2019.
[16]Apache Hadoop 2.9.2 - HDFS Architecture. https://hadoop.apache.org/docs/r2.9.
2/hadoop-project-dist/hadoop-hdfs/HdfsDesign.html , 2019.
[17]OpenStack Docs (Stein) : Welcome to Ironicâ€™s documentation! https://docs.
openstack.org/ironic/stein/ , 2019.
[18]OpenStack Docs (Stein) : Keystone, the OpenStack Identity Service. https://docs.
openstack.org/keystone/stein/ , 2019.
[19]Hadoop MapReduce Configurations. mapred-default.xml. https:
//hadoop.apache.org/docs/r2.9.2/hadoop-mapreduce-client/hadoop-
mapreduce-client-core/mapred-default.xml , 2019.
[20]Apache Hadoop 2.9.2 - MapReduce Tutorial. https://hadoop.apache.
org/docs/r2.9.2/hadoop-mapreduce-client/hadoop-mapreduce-client-
core/MapReduceTutorial.html , 2019.
[21]OpenStack Docs (Stein) : Welcome to Neutronâ€™s documentation! https://docs.
openstack.org/neutron/stein/ , 2019.
[22]Nova configuration options. https://docs.openstack.org/nova/stein/
configuration/config.html , 2019.
[23]OpenStack Docs (Stein) : OpenStack Compute nova. https://docs.openstack.org/
nova/stein/ , 2019.
[24]OpenStackDocs(Stein):Placement. https://docs.openstack.org/placement/stein/ ,
2019.
[25] Spark2.4.0- Overview. http://spark.apache.org/docs/2.4.0/ , 2019.
[26]OpenStack Docs (Stein) : Welcome to Swiftâ€™s documentation! https://docs.
openstack.org/swift/stein/ , 2019.
[27]YarnConfigurations.yarn-default.xml. https://hadoop.apache.org/docs/r2.9.2/
hadoop-yarn/hadoop-yarn-common/yarn-default.xml , 2019.
[28]Apache Hadoop 2.9.2 - Apache Hadoop YARN. https://hadoop.apache.org/docs/
r2.9.2/hadoop-yarn/hadoop-yarn-site/YARN.html , 2019.
[29]ZooKeeper3.5.4-Administratorâ€™sGuide. http://zookeeper.apache.org/doc/r3.5.4-
beta/zookeeperAdmin.html , 2019.
[30]Ironic configuration options. https://docs.openstack.org/ironic/stein/
configuration/config.html , 2020.
[31]Neutron configuration options. https://docs.openstack.org/neutron/stein/
configuration/neutron.html , 2020.
[32] Soot: a JavaOptimization Framework. http://sable.github.io/soot/, 2020.
[33]G. Amvrosiadis and M. Bhadkamkar. Getting Back Up: Understanding How
EnterpriseDataBackupsFail. In Proceedingsof2016USENIXAnnualTechnical
Conference (ATCâ€™16) , June2016.
[34]M. Attariyan and J. Flinn. Automating Configuration Troubleshooting with
DynamicInformationFlowAnalysis. In Proceedingsofthe9thUSENIXConference
onOperatingSystemsDesignand Implementation(OSDIâ€™10) , October 2010.
[35]M.Attariyan,M.Chow,andJ.Flinn. X-ray:AutomatingRoot-CauseDiagnosis
of Performance Anomalies in Production Software. In Proceedings of the 10th
USENIXConferenceonOperatingSystemsDesignandImplementation(OSDIâ€™12) ,
October 2012.[36]L. A. Barroso, U. HÃ¶lzle, and P. Ranganathan. The Datacenter as a Computer: An
IntroductiontotheDesign ofWarehouse-scaleMachines (ThirdEdition) . Morgan
and ClaypoolPublishers, 2018.
[37]S.Baset,S.Suneja,N.Bila,O.Tuncer,andC.Isci.UsableDeclarativeConfiguration
SpecificationandValidationforApplications,Systems,andCloud. In Proceedings
of the 18th ACM/IFIP/USENIX Middleware Conference (Middlewareâ€™17), Industrial
Track, December 2017.
[38]F. Behrang, M. B. Cohen, and A. Orso. Users Beware: Preference Inconsistencies
Ahead. In Proceedingsofthe10thJointMeetingoftheEuropeanSoftwareEngineer-
ing Conference and the ACM SIGSOFT Symposium on the Foundations of Software
Engineering (ESEC/FSEâ€™15) , August 2015.
[39]T. Benson, A. Akella, and D. Maltz. Unraveling the Complexity of Network
Management. In Proceedings of the 6th USENIX Symposium on Networked System
Designand Implementation(NSDIâ€™09) , 2009.
[40]T.Benson,A.Akella,andA.Shaikh. DemystifyingConfigurationChallengesand
Trade-Offs in Network-based ISP Services. In Proceedings of 2011 Annual Confer-
enceoftheACMSpecialInterestGrouponDataCommunication(SIGCOMMâ€™11) ,
August 2011.
[41]W. Chen, H. Wu, J. Wei, H. Zhong, and T. Huang. Determine Configuration
Entry Correlations for Web Application Systems. In Proceedings of the 2016 IEEE
40th Annual Computer Software and Applications Conference (COMPSACâ€™16) , June
2016.
[42]M.B.Cohen,M.B.Dwyer,andJ.Shi. ConstructingInteractionTestSuitesfor
Highly-ConfigurableSystemsinthePresenceofConstraints:AGreedyApproach.
IEEE Transactions on Software Engineering (TSE) , 34(5):633Å›650, September 2008.
[43]Z.Dong,A.Andrzejak,andK.Shao. PracticalandAccuratePinpointingofConfig-
urationErrorsusingStaticAnalysis. In Proceedingsofthe2015IEEEInternational
Conference onSoftwareMaintenance and Evolution(ICSMEâ€™15) , September 2015.
[44]Z.Dong,A.Andrzejak,D.Lo,andD.Costa. ORPLocator:IdentifyingReadPoints
of Configuration Options via Static Analysis. In Proceedings of the 27th IEEE
International Symposiumon SoftwareReliability Engineering(ISSREâ€™16) ,October
2016.
[45]E. Dumlu, C. Yilmaz, M. B. Cohen, and A. Porter. Feedback Driven Adaptive
CombinatorialTesting. In ProceedingsoftheInternationalSymposiumonSoftware
Testingand Analysis(ISSTAâ€™11) , July2011.
[46]H. Gall, K. Hajek, , and M. Jazayeri. Detection of Logical Coupling Based on
ProductReleaseHistory. In Proceedingsofthe1998InternationalConferenceon
SoftwareMaintenance (ICSMâ€™98) , November 1998.
[47]H.S.Gunawi,M.Hao,R.O.Suminto,A.Laksono,A.D.Satria,J.Adityatama,and
K.J.Eliazar. WhyDoestheCloudStop Computing?LessonsfromHundredsof
Service Outages. In Proceedings of the 7th ACM Symposium on Cloud Computing
(SoCCâ€™16) , October 2016.
[48]G.Holl,D.Thaller,P.GrÃ¼nbacher,and C.Elsner. ManagingEmergingConfigu-
rationDependenciesinMultiProductLines. In Proceedingsof6thInternational
Workshop on Variability Modelling of Software-intensive Systems (VaMoSâ€™12) , Jan-
uary2012.
[49]P. Huang, W. J. Bolosky, A. Sigh, and Y. Zhou. ConfValley: A Systematic Con-
figurationValidationFrameworkforCloudServices. In Proceedingsofthe10th
ACMEuropean Conference inComputer Systems(EuroSysâ€™15) , April2015.
[50]A.Hubaux,Y.Xiong,andK.Czarnecki. AUserSurveyofConfigurationChal-
lengesinLinuxandeCos. In Proceedingsof6thInternationalWorkshoponVari-
abilityModellingofSoftware-intensiveSystems(VaMoSâ€™12) , January2012.
[51]W. Jiang, C. Hu, Y. Zhou, and A. Kanevsky. Are Disks the Dominant Contributor
for Storage Failures? A Comprehensive Study of Storage Subsystem Failure
Characteristics. In Proceedings of the 6th USENIX Conference on File and Storage
Technologies(FASTâ€™08) , February2008.
[52]D. Jin, M. B. Cohen, X. Qu, and B. Robinson. PrefFinder: Getting the Right
PreferenceinConfigurableSoftwareSystems.In Proceedingsofthe29thIEEE/ACM
International Conference on Automated Software Engineering (ASEâ€™14) , September
2014.
[53]D. Jin, X. Qu, M. B. Cohen, and B. Robinson. Configurations Everywhere: Im-
plications for Testing and Debugging in Practice. In Proceedings of the 36th
InternationalConference onSoftwareEngineering (ICSEâ€™14) , 2014.
[54] S. Kendrick. What Takes Us Down? USENIX;login: , 37(5):37Å›45,October 2012.
[55]H.-C.Kuo,J.Chen,S.Mohan,andT.Xu. SettheConfigurationfortheHeartofthe
OS:OnthePracticalityofOperatingSystemKernelDebloating. In Proceedingsof
the 2020ACMSIGMETRICS Conference (SIGMETRICSâ€™20) , June2020.
[56]M. Lillack, C. KÃ¤stner, and E. Bodden. Tracking Load-time Configuration Op-
tions. InProceedingsofthe29thIEEE/ACMInternationalConferenceonAutomated
SoftwareEngineering (ASEâ€™14) , September 2014.
[57]M.Lillack,C.KÃ¤stner,andE.Bodden. TrackingLoad-timeConfigurationOptions.
IEEE Transactions onSoftwareEngineering (TSE), Early Access , September 2017.
[58]B.Maurer. FailatScale:ReliabilityintheFaceofRapidChange. Communications
ofthe ACM , 58(11):44Å›49, November 2015.
[59]S. Mehta, R. Bhagwan, R. Kumar, C. Bansal, C. Maddila, B. Ashok, S. Asthana,
C. Bird, and A. Kumar. Rex: Preventing Bugs and Misconfiguration in Large
ServicesUsingCorrelatedChangeAnalysis. In Proceedingsofthe17thUSENIX
SymposiumonNetworkedSystemsDesignandImplementation(NSDIâ€™20) ,February
373UnderstandingandDiscoveringSoftware ConfigurationDependencies ESEC/FSE â€™20, November8Å›13,2020,VirtualEvent, USA
2020.
[60]T. Nguyen, U. Koc, J. Cheng, J. S. Foster, and A. A. Porter. iGen: Dynamic
Interaction Inference for Configurable Software. In Proceedings of the 24th ACM
SIGSOFTInternationalSymposiumonFoundationsofSoftwareEngineering(FSEâ€™16) ,
November 2016.
[61]D.Oppenheimer,A.Ganapathi,and D.A.Patterson. WhyDoInternetServices
Fail,andWhatCanBeDoneAboutIt?In Proceedingsofthe4thUSENIXSymposium
onInternet Technologiesand Systems(USITSâ€™03) , March2003.
[62]X. Qu. Configuration Aware Prioritization Techniques in Regression Testing. In
Proceedings of the 31st International Conference on Software Engineering (ICSEâ€™09) ,
May 2009.
[63]X.Qu,M. B.Cohen,and G. Rothermel. Configuration-AwareRegression Test-
ing: An Empirical Study of Sampling and Prioritization. In Proceedings of the
InternationalSymposiumonSoftwareTestingand Analysis(ISSTAâ€™08) , July2008.
[64]X. Qu, M. Acharya, and B. Robinson. Impact Analysis of Configuration Changes
for Test Case Selection. In Proceedings of the 22nd IEEE International Symposium
onSoftwareReliability Engineering (ISSREâ€™11) , November 2011.
[65]A.RabkinandR.Katz. PrecomputingPossibleConfiguration ErrorDiagnosis. In
Proceedingsofthe26thIEEE/ACMInternationalConferenceonAutomatedSoftware
Engineering (ASEâ€™11) , November 2011.
[66]A.RabkinandR.Katz. StaticExtractionofProgramConfigurationOptions. In
Proceedingsofthe33rdInternationalConferenceonSoftwareEngineering(ICSEâ€™11) ,
May 2011.
[67]A. Rabkin and R. Katz. How Hadoop Clusters Break. IEEE Software Magazine , 30
(4):88Å›94, July2013.
[68]V. Ramachandran, M. Gupta, M. Sethi, and S. R. Chowdhury. Determining
Configuration Parameter Dependencies via Analysis of Configuration Data from
Multi-tiered Enterprise Applications. In Proceedings of the 6th International
Conference onAutonomic Computingand Communications (ICACâ€™09) , June2009.
[69]E.Reisner,C.Song,K.-K.Ma,J.S.Foster,andA.Porter.UsingSymbolicEvaluation
to Understand Behavior in Configurable Software Systems. In Proceedings of the
32rdInternationalConference onSoftwareEngineering (ICSEâ€™10) , May 2010.
[70]M.Santolucito,E.Zhai,andR.Piskac.ProbabilisticAutomatedLanguageLearning
for Configuration Files. In Proceedings of the 28th International Conference on
Computer AidedVerification (CAVâ€™16) , July2016.
[71]M. Santolucito, E. Zhai, R. Dhodapkar, A. Shim, and R. Piskac. Synthesizing
Configuration File Specifications with Association Rule Learning. In Proceedings
of 2017 ACM SIGPLAN Conference on Object-Oriented Programming, Systems,
Languages, and Applications(OOPSLAâ€™17) , October 2017.
[72]M.Sayagh,N.Kerzazi,andB.Adams. OnCross-stackConfigurationErrors. In
Proceedingsofthe39thInternationalConferenceonSoftwareEngineering(ICSEâ€™17) ,
May 2017.
[73]M.Sayagh,N.Kerzazi,B.Adams,andF.Petrillo. SoftwareConfigurationEngi-
neering in Practice: Interviews, Surveys, and Systematic Literature Review. IEEE
Transactions onSoftwareEngineering (TSE), Preprint , 2018.
[74]E.J.Schwartz,T.Avgerinos,andD.Brumley. AllYouEverWantedtoKnowabout
DynamicTaintAnalysisandForwardSymbolicExecution(butMightHaveBeen
Afraid to Ask). In Proceedings of the 31st IEEE symposium on Security and privacy
(S&Pâ€™10), 2010.
[75]C. Song, A. Porter, and J. S. Foster. iTree: Efficiently Discovering High-Coverage
ConfigurationUsingInteractionTrees. In Proceedingsofthe34thInternational
Conference onSoftwareEngineering (ICSEâ€™12) , June2012.
[76]S.Souto,P.Barros,andR.Gheyi. BalancingSoundnessandEfficiencyforPrac-
tical Testing of Configurable Systems. In Proceedings of the 39th International
Conference onSoftwareEngineering (ICSEâ€™17) , May 2017.
[77]H. Srikanth, M. B. Cohen, and X. Qu. Reducing Field Failures in System Con-
figurable Software: Cost-Based Prioritization. In Proceedings of the 20th IEEE
InternationalSymposiumonSoftwareReliabilityEngineering(ISSREâ€™09) ,November
2009.
[78]X.Sun,R.Cheng,J.Chen,E.Ang,O.Legunsen,andT.Xu. TestingConfiguration
Changes in Context to Prevent Production Failures. In Proceedings of the 14th
USENIX Symposiumon Operating Systems DesignandImplementation (OSDIâ€™20) ,
November 2020.
[79]C. Tang, T. Kooburat, P. Venkatachalam, A. Chander, Z. Wen, A. Narayanan,
P. Dowell, and R. Karl. Holistic Configuration Management at Facebook. InProceedingsofthe25thACMSymposiumonOperatingSystemPrinciples(SOSPâ€™15) ,
October 2015.
[80]H.J.Wang,J.C.Platt,Y.Chen,R.Zhang,andY.-M.Wang. AutomaticMiscon-
figuration Troubleshooting with PeerPressure. In Proceedings of the 6th USENIX
ConferenceonOperatingSystemsDesignandImplementation(OSDIâ€™04) ,December
2004.
[81]Y.-M.Wang,C.Verbowski,J.Dunagan,Y.Chen,H.J.Wang,C.Yuan,andZ.Zhang.
STRIDER: A Black-box, State-based Approach to Change and Configuration
ManagementandSupport. In Proceedingsofthe17thLargeInstallationSystems
AdministrationConference (LISAâ€™03) , October 2003.
[82]C.Xiang,Y.Wu,B.Shen,M.Shen,H.Huang,T.Xu,Y.Zhou,C.Moore,X.Jin,
and T. Sheng. Towards Continuous Access Control Validation and Forensics. In
Proceedingsofthe2019ACMSIGSACConferenceonComputerandCommunications
Security(CCSâ€™19) , November 2019.
[83]C.Xiang,H.Huang,A.Yoo,Y.Zhou,andS.Pasupathy. PracExtractor:Extracting
Configuration Good Practices from Manuals to Detect Server Misconfigurations.
InProceedings of the 2020 USENIX Annual Technical Conference (ATCâ€™20) , July
2020.
[84]T. Xu and O. Legunsen. Configuration Testing: Testing Configuration Values as
Codeand with Code. arXiv:1905.12195 , July2019.
[85]T.XuandD.Marinov. MiningContainerImageRepositoriesforSoftwareCon-
figurations and Beyond. In Proceedings of the 40th International Conference on
SoftwareEngineering (ICSEâ€™18),NewIdeas and EmergingResults , May 2018.
[86]T. Xu and Y. Zhou. Systems Approaches to Tackling Configuration Errors: A
Survey.ACMComputingSurveys , 47(4),July2015.
[87]T.Xu,J.Zhang,P.Huang,J.Zheng,T.Sheng,D.Yuan,Y.Zhou,andS.Pasupathy.
Do Not Blame Users for Misconfigurations. In Proceedings of the 24th ACM
SymposiumonOperatingSystemPrinciples (SOSPâ€™13) , November 2013.
[88]T. Xu, L. Jin, X. Fan, Y. Zhou, S. Pasupathy, and R. Talwadker. Hey, You Have
Given Me Too Many Knobs! Understanding and Dealing with Over-Designed
Configuration in System Software. In Proceedings of the 10th Joint Meeting of the
European Software Engineering Conference and the ACM SIGSOFT Symposium on
the FoundationsofSoftwareEngineering (ESEC/FSEâ€™15) , August 2015.
[89] T. Xu, X. Jin,P. Huang, Y. Zhou,S. Lu,L.Jin, and S. Pasupathy. Early Detection
of Configuration Errors to Reduce Failure Damage. In Proceedings of the 12th
USENIX Symposiumon Operating Systems DesignandImplementation (OSDIâ€™16) ,
November 2016.
[90]T. Xu, V. Pandey, and S. Klemmer. An HCI View of Configuration Problems.
arXiv:1601.01747 , January2016.
[91]T. Xu, H. M. Naing, L. Lu, and Y. Zhou. How Do System Administrators Resolve
Access-DeniedIssuesintheRealWorld? In Proceedingsofthe35thAnnualCHI
Conference onHuman Factors inComputingSystems(CHIâ€™17) , May 2017.
[92]Z. Yin, X. Ma, J. Zheng, Y. Zhou, L. N. Bairavasundaram, and S. Pasupathy.
An Empirical Study on Configuration Errors in Commercial and Open Source
Systems. In Proceedings of the 23rd ACM Symposium on Operating Systems
Principles (SOSPâ€™11) , October 2011.
[93]D. Yuan, S. Park, P. Huang, Y. Liu, M. M. Lee, X. Tang, Y. Zhou, and S. Sav-
age. Be Conservative: Enhancing Failure Diagnosis with Proactive Logging.
InProceedingsofthe10thUSENIXConferenceonOperatingSystemsDesignand
Implementation(OSDIâ€™12) , October 2012.
[94]D. Yuan, Y. Luo, X. Zhuang, G. Rodrigues, X. Zhao, Y. Zhang, P. U. Jain, and
M.Stumm. SimpleTestingCanPreventMostCriticalFailures:AnAnalysisof
Production Failures in Distributed Data-intensive Systems. In Proceedings of
the 11th USENIX Conference on Operating Systems Design and Implementation
(OSDIâ€™14) , October 2014.
[95]J.Zhang,L.Renganarayana,X.Zhang,N.Ge,V.Bala,T.Xu,andY.Zhou. EnCore:
ExploitingSystemEnvironment andCorrelationInformationforMisconfigura-
tionDetection. In Proceedingsofthe19thInternationalConferenceonArchitecture
Support forProgrammingLanguagesandOperatingSystems(ASPLOSâ€™14) ,March
2014.
[96]S. Zhang and M. D. Ernst. Automated Diagnosis of Software Configuration
Errors. In Proceedingsofthe35thInternationalConferenceonSoftwareEngineering
(ICSEâ€™13), May 2013.
[97]S. Zhang and M. D. Ernst. Proactive Detection of Inadequate Diagnostic Mes-
sages for Software Configuration Errors. In Proceedings of the 2015 International
SymposiumonSoftwareTestingand Analysis(ISSTAâ€™15) , July2015.
374