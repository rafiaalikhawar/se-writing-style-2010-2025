fim faultinjection and mutation for simulink eziobartocci ezio.bartocci tuwien.ac.at tuwien vienna austrialeonardomariani leonardo.mariani unimib.it university ofmilano bicocca milan italy dejanni kovi dejan.nickovic ait.ac.at aitaustrianinstituteoftechnology vienna austriadrishtiyadav drishti.yadav tuwien.ac.at tuwien vienna austria abstract weintroducefim anopen sourcetoolkitforautomatedfaultinjection and mutant generation in simulink models.
fim allows the injection of faults into specific parts supporting common types of faultsandmutationoperatorswhoseparameterscanbecustomized to control the time of fault actuation and persistence.
additional flagsallowtheusertoactivatetheindividualfaultblocksduring testing to observe their effects on the overall system reliability.
we provide insights into the design andarchitecture of fim and evaluateitsperformanceonacasestudyfromtheavionicsdomain.
tool package and demo ccsconcepts softwareanditsengineering softwareverificationand validation .
keywords cyber physicalsystems faultinjection model baseddevelopment mutation simulink testing.
acm referenceformat eziobartocci leonardomariani dejanni kovi anddrishtiyadav.
.
fim faultinjectionandmutationforsimulink.in proceedingsofthe30th acmjointeuropeansoftwareengineeringconferenceandsymposiumonthe foundationsofsoftwareengineering esec fse november14 18 singapore singapore.
acm new york ny usa 5pages.
.
introduction safety criticalcyber physicalsystems cps mustbereliableboth innormalandunexpectedcircumstances.hence itisessentialthat suchcpscomplywithrelevantindustrialstandards suchasiso iec etc.
and that they conform to desired safety requirements.
esec fse november 14 18 singapore singapore copyright held bytheowner author s .
acm isbn978 .
cope with the complexity of modern cps researchers and practitionershaveadoptedamodel baseddevelopment mbd associatedwithalightverificationparadigmbasedonsimulationand testing.
the eco system centered around mathworks simulink istodaythe de factostandardformbdofcps.inthelastdecade the formal methods and control theory communities have developed more principledapproaches to simulation basedverification such as falsification testing this thread of research resulted in many publications we specifically mention papers on this topic that appearedin the recent past .
while methodslike falsification testinghave proved successful and effective in finding bugs in cps designs we observe that these methods are often evaluatedon a smallnumber ofexamples andin anad hocfashion.
the typical approach to systematically evaluate atestingstrategyistoanalyzeitseffectivenessindetectingbadsystembehaviorsinthepresenceoffaults .thisisachievedviafault injection andmutationtesting activitiesrecommendedbyindustrial safety standards especially in safety critical domains .
the main prerequisite for large scale mutation testing evaluations isamechanismforinjectingfaultsofdifferenttypesintothesystem model in an automated and programmatic fashion without humaninterventionduringtheinjectionprocess.tothebestofour knowledge there is no fault injection solution for simulink that satisfies all the identified requirements which explains the lack of systematic experiments ofcpstestingapproaches.
we remedy this situation by introducing fim faultinjection andmutation engine an open source tool for injecting faults into simulinkmodelsthatsatisfiestheaboverequirements.fimprovides thefollowingfeatures whichcanallbeconfiguredprogrammatically a rich fault model including sensor hardware and network faults as wellas alibrary ofmutation operators systematic injection ofafault in different parts ofamodel generatingmultiplecopiesoftheoriginalmodel withone fault injectedpermodelcopy or generating a single copy of the original model with all faults injectedintothat copy restriction offault injection tospecific parts ofthe model dynamic activation anddeactivation offaults.
relatedwork.
alargebodyoffaultinjectiontoolsandtechniques isavailableaccordingtothefaulttype thesystem under test sut and the injection method .
in particular there isaplethoraofpriorworkontoolsforfaultinjectioninsimulink thiswork islicensedunderacreativecommonsattribution4.0international license.
esec fse november14 18 singapore singapore eziobartocci leonardo mariani dejanni kovi anddrishtiyadav models but each has some caveats and limitations.
modifi and errorsim have a very limited choice of fault types and are not publicly accessible.
simultate offers an interactive user interface using python and matlab .
although practicalforbeginners aninteractiveinterfacecanbeablocking factor for scalable fault injection experiments that may require injecting hundredsor thousandsof faults.another related modelbasedfaultinjectionmethod supportstheinjectionoftypical faults but lacks an automated support for fault block placement in the sut.
compared to existing tools fim i integrates a richer variety of faults mutations see section ii supports automated fault injection via a transparent user interface that works directly in the matlab environment without any additional setup and iii providesscalablefaultinjection allowingthedesignofexperiments via configuration files that can be processed generating a large number ofmutants inseconds.
paper organization.
in section we provide insights into the architecture keyfunctionalitiesandtheworkflowoffim.section summarizes the usage of the tool.
in section we evaluate the performance of the tool on an example from the aerospace domain withsomeexperimental results andwe conclude insection .
fim design and implementation we first pinpoint several conceptual problems encountered during thedesignandimplementationoffim necessarytomotivateand understandits features specificities of simulink prior to designing the tool we identified the complexities in handling simulink models and thoroughlyunderstoodtheprogrammaticeditingofmodel components from lines to blocks.
we also comprehended the fundamentals of masking in simulink prior to designing arichfaultinjection library withparameterizedblocks.
we tried several injection strategies before implementing theinjectionmechanismastheadditionofnewblocks since itguaranteesthehighestlevelofcontrolwithnoissuesin its capability to observe andaltervariable values.
we focused on the possibility to do large scale experiments carefullydesigninganinterfacethatdoesnotrequireinteractions duringexperiments.
we considered several strategies to deal with a large set of injected faults finally supporting two complementary strategies generating many models with one fault each and generatingone modelwithallthe faultsincluded.
wenowguidethereaderthroughthetoolarchitectureandworkflow highlighting its key features.
figure 1shows the architecture offim whichconsistsofthreemaincomponents a faultlibrary afault injectionmodule and a fault configuration .
.
faultlibrary thefault library is a custom simulink library browserconsisting ofdifferentparameterizedblocksfordifferenttypesoffaultsand mutation operators listed in table .
fim allows the user to extend the library browser with other faults mutation operators.
the insertion or replacement of blocks depends on the type of fault fault injection library finjlib multimodel singl emodel ...1fault nfault n11fault nfault...sut ...sut sutfault injection fault configurationsut fault list output directoryfim n1 ...mutated mutated sut sutmutated sut fault tablefault enable list... figure overview offim.
specified by the user in the list of desired mutations fault list.
the faultblockscorresponding to faults intable 1indicateinsertion of the fault block while those related to block mutations indicate replacementoftherelevantblockbythespecifiedblockmutation operator.somefaultsandblockmutationsareillustratedinfigure .
thefaultsandmutationoperatorssupportedbyfimarerealistic typical and commonly observed in practice according to the available literature.
in particular the faults stuck at package drop bias offset noise time delay andbit flips arederivedfrom errorsim modifi simultate andfiblock .the faultsnegate invertandabsolute and block mutation operationsror lorandp2sarederivedfromsimultate .s2pand asrarestandardarithmeticoperatorreplacementsusedinmutation testing.
set poin t k pos2 set poin t1 pos2 1pid set poin t k pos21 noise 2set poin t1 pos21pid s2p mutationfault in line block mutation subsystem of the mutated sut subsystem of the original sut figure illustration of some faults mutations in a sut the injected faultblocks are highlighted inred .
eachfaultblockisimplementedasamaskedsubsystemwithdifferentblockparameters.eachfaultblockhasaflag fienableflag that enablestheusertoturnitonandoff.sincefimsupportsdeterministicfaults allfaultblockshavetheparameter faultoccurencetime to specify the time of fault actuation.
the block parameter faulteffect specifiesthefaulteffectwhichgovernsthefaultpersistencetime.
fimofferstwotypesoffaulteffects infinitetime thefaultblock produceserroneousoutputstartingfromthe faultoccurencetime until theend ofthe simulation and2 constant time fault occurs atfaultoccurencetime and persists for the duration specified by the block parameter faultduration .
the blocks corresponding to noise bias offset andpackage drop haveanadditionalblock 1717fim faultinjectionandmutationforsimulink esec fse november14 18 singapore singapore table faults andmutation operators.
type name description faultsnegate changes asignal uto u invert invertsanon zerosignal uto ifuis0 makes0to stuck at makesthe signal valuezero absolute changes asignal uto u noise adds aband limitedwhite noiseto the inputsignal basedonspecifiedfaultvalue i.e.
noisepower bias offset adds apredefined ve or ve offset bias valueto input stuck at the signal valuestucksat the last correctvaluebefore faultoccurrence time delay introduces adelay ofspecifiedduration bitflip bitwisenot operation onboolean signal package drop replaces the inputbythe specifiedfaultvalue blockmutationsror relationaloperator replacement lor logical operator replacement s2p sumto product mutation p2s product to summutation asr arithmetic sign replacement for2 inputsumblock parameter faultvalue forfaultvalueadjustment.theblocksrelated toror lorandasrhaveanotherparameter operatornum toselect therelevantoperator.infact thereisamappingbetweenvarious operators and the operator numbers more details can be found in the toolpackage .
.
faultinjection thefaultinjectionmodule isresponsibletoinjectfaultsbasedonthe desired mutations fault list .
for single model case i.e.
mutations withsingle model fim firstcreates acopy of thesut such that all the desired faults are injected in the copied file.
conversely formulti modelcase i.e.
mutationswithmultiplemodels fim createsacopyandinjectsasinglefaultinthecopiedfile.then this processcontinuesuntilallthedesiredfaultsareinjected s.t.there are multiple copies ofthe sut one faultinjectedper copy.
theadvantageofsingle modelovermulti modelmode istwofold a asingle modelisgeneratedandcompiled and b a mutatedsutwithallmutantsinasinglemodelpermitstheuserto investigatethesimultaneouseffectofmultiplefaults.theadvantage ofmulti modeloversingle modelisthesimplicityandsmall size ofthe individualmodels generated.
thefaultinjectionmodule exploitsthebasics ofprogrammatic editingofsimulinkmodelstoinjectfaultsinthemutatedsut.in essence it stores the information of line handles block handles source destination blocks and theirrespectiveports ina persistent cache.
this information is then used to inject the faults in the copied file.
while injecting faults the fault injection module automatically retainsthelogginginformationof thesignal s and improves the model layout to abide by modeling guidelines and enhance readability ofmodels.
onceallthedesiredfaultsareinjected the faultinjectionmodule generates a fault table .xlsx file to provide detailed informationoftheinjectedfaultblocks.moreprecisely the fault table provides the following details i name of the mutated sut ii the uniquenameofthefaultblockaddedinthesut iii thesubsystem within which the fault is injected iv the type of the fault or block mutation operator v full namesofthesource destination blockscorresponding to the line in which the fault is injected and vi the respective port numbers of the source destination.
such a detailed description of the injected faults will assist the user to identify the exactlocationofthefaultblockinthemutatedsut.notethateach injected fault block has a unique name which is later utilized by thefault configuration componentto controlits activation.
.
faultconfiguration based on the generated fault table the user can now configure the faults that must be used in an experiment.
fim allows the user toinputanotherconfigurationfile fault enable list whichisatable .csv or .xlsx file with fieldsto specify the block s to be activated along with the relevant fault parameters.
in accordance with the fault enable list thefaultconfiguration componentturns onthe respective fault blocks in the mutated sut and configures them for the specified fault parameters.
the fault block to be activated is specified by its unique identifier fault number in the fault table.
tool usage asaspecialrequirement fimrequiresalicensedmatlab and simulink installation which must be provided by the user.
we haveimplementedfiminmatlab r2020btoprovideacommandlineinterfacewhichpermitstheusertoinvokethetoolfromthe matlab commandprompt.inbothsingle andmulti model modes the tasks of fault injection andfault configuration are governedbydifferentcustomizedfunctions.inessence user defined configurationfiles andoutput directorysupervise thebehavior of fim inits entirety.
injecting faults.
as inputs fim takes a configuration file and the output directory.
usually the configuration file includes details of thesutandthe fault list.moreprecisely the fault list isatable withfieldstospecifythetargetfaultlocationandthedesiredtypeof fault mutation.
the target fault location can be specified using the names of source destination parent blocks or hierarchy levels of thesut therebygivingthefreedomtotheusertocontrolthefault 1718esec fse november14 18 singapore singapore eziobartocci leonardo mariani dejanni kovi anddrishtiyadav table faultinjection mutantgeneration timeforaecs.
target locationandfaultdetailsnfaultinjection time in seconds target fault type single model multi model controller subsystemwithparentblock leftcontrollaws bias offset .
.
plant actuators rightouter hydraulicactuator negate .
.
plant actuators leftouter hydraulicactuator hydraulicactuator asr .
.
controller right controllaws iocontrollaw s2p .
.
plant actuators rightinnerhydraulicactuator hydraulicactuator p2s .
.
controller right controllaws subsystem ror .
.
total .
.
injectionspace.asoutputs fimeitherproducesasinglemutated model or a set of mutated models depending on the mode selected i.e.
single multi model.also fimemitsthegenerated fault tableto the outputdirectory specifiedbythe user.
configuringfaults.
afterfaultinjection theusercanlookintothe generated fault table to identify the fault blocks which he wants to turn on.
for the fault configuration the user also needs to provide thefault enable list which specifies the faults that must be activatedinthenextrunandtheiractivationstrategy.asoutput the selectedfaultblocksareswitchedonandtherespectivefaultparametersareconfiguredaftertheexecutionofappropriatecommand dependingonthe single multi modelmode.
more details on the fault parameters and configuration parametersareavailableinourtoolpackage.the step by stepdemonstration of fim with detailed commands on two usage scenarios is also available online.
tool evaluation wepresentacasestudybasedontheaircraftelevatorcontrolsystem aecs fromtheavionics aerospacedomain .thissimulink modelconsistsofvarioushierarchicalsubsystemsincludingcontroller plant sensors etc.
the model takes the pilot command asthe inputvariablewhichgoverns thetwooutput variables the positions of left and right actuators .
further the model has different types of signals including real valued boolean and enumerated state machine variables.
a mutation in any of these signals mighttrigger afaultybehaviorinthe model.
toassesstheperformanceofourtool weconductedexperiments on the aecs for both single and multi model modes.
our experiments were performed on a macbook pro with apple m1 chip 16gbram macosbigsurwithmatlab r2020b.wesummarizethefaultinjectiontimes measuredbyaveragingoverten independent runs for the two modes in table .
columns target andfault type respectively indicate the target fault location and faulttype.column nshowsthenumberoffaultsinjected.notethat i ndepends on the structure of the target location and ii the faultgenerationtimedependsonthefaulttypeaswellasthetarget location.
the results show that the fault injection mechanism in single modelisfastandcomputationallylessexpensivecomparedtomulti model.fimtakes .
.
seconds onaverage to injectasinglefaultinthe single multi modelmodes.
basedonourfaultinjectionexperiments wereportthefollowingresults sincemulti modelismoreexpensive singlemodel might be the best option when efficiency is important.
nevertheless single model is large and messy and might be more difficult to visualize debug and analyze.
thus multimodelmayfacilitate the analysisof the results of faultinjection experiments.
contrarytothemulti modelscenario singlemodelisusefultostudyinterferenceamongmultiplefaults potentially activate at different times.
for synergistic benefits of both modes the user could start with the single model and then switch to the multi model mode to analyze the fault effects makingthe analysismore comprehensible andinterpretive.
conclusions we presented fim a toolkit for the automated injection of faults and generationof mutants whendealing with simulinkmodels.
a tester can control the activation of the fault blocks based on the task at hand.
further a tester is free to adjust the fault parameters for rigorous testing of the sut against failures to check its fault tolerance.
we speculate that fim can be an important step towards refiningtheoverallprocessofverificationofsafety criticalsystems.
verification experts and testers can reuse and repackage our existing open source toolkit according to their safety evaluation and testingneeds.theuserscanupdatethetoolby i makingappropriatemodificationsintheautomatedscriptsforfaultinjectionand configuration and ii enriching the fault library with additional faultsoperators as well as conditional andcascadedfaults.
atpresent fimcanautomaticallyandefficientlygeneratealarge numberofmodelswithfaultsinjected enablingscalablefaultinjection experiments.
we are currently working on enriching the toolwithfeaturesthatcanbeusedtosupportspecificapplication scenarios such as fine grained testing options.
our future work includesanempiricalstudytoinvestigatethecostandbenefitof large scalemutationtestinginsimulinkmodels.weenvisionthe extension of the tool to fault localization and failure explanation in safety criticalsystems.futureextensionsmayalsointegratefim with simulation based verification engines that encapsulate formal approachesfor safetyanalysis.