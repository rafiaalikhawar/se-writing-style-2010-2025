regminer mining replicableregression datasetfrom code repositories xuezhisong fudanuniversity china songxuezhi fudan.edu.cnyunlin shanghai jiaotonguniversity nationaluniversity ofsingapore china singapore llmhyy gmail.comyijianwu fudanuniversity china wuyijian fudan.edu.cn yifanzhang nationaluniversity ofsingapore singapore zyifan828 gmail.comsiang hwee ng nationaluniversity ofsingapore singapore sianghwee u.nus.eduxinpeng fudanuniversity china pengxin fudan.edu.cn jinsong dong nationaluniversity ofsingapore singapore dcsdjs nus.edu.sghong mei pekinguniversity china meih pku.edu.cn abstract inthiswork weintroduceatool regminer toautomatetheprocess ofcollectingreplicableregressionbugsfromasetofgitrepositories.inthecodecommithistory regminersearchesforregressions where a test can pass a regression fixing commit fail a regressioninducingcommit andpassapreviousworkingcommitagain.technically regminer identifies potential regression fixing commits fromthecodeevolutionhistory migratesthetestanditscode dependenciesinthecommitoverthehistory and minimizesthe compilation overhead during the regression search.
our experients show that regminer can successfully collect regressions over 147projectsin8weeks creatingthelargestreplicableregression dataset within the shortest period to the best of our knowledge.
inaddition ourexperimentsfurthershowthat regminercan constructtheregressiondatasetwithveryhighprecisionandacceptablerecall and theconstructedregressiondatasetisofhigh authenticityanddiversity.thesourcecodeofregminerisavailable at the minedregression datasetisavailableat andthedemonstration videois available at .
ccsconcepts softwareanditsengineering softwareevolution maintaining software software testing and debugging .
corresponding author esec fse november 14 18 singapore singapore copyright held bytheowner author s .
acm isbn978 .
miningcode repository bugcollection regression bug acm referenceformat xuezhisong yunlin yijianwu yifanzhang sianghweeng xinpeng jin songdong andhongmei.
.regminer miningreplicableregression dataset from code repositories.
in proceedings of the 30th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse november 14 18 singapore singapore.acm new york ny usa 5pages.
introduction regression bugs which make a working function fail often appear in software projects.
a typical regression bug can be formalized intoanobservationthatatestcase tcanpassaversion vpassbut failaversion vfail.researchershaveproposedmanytechniques forregression analysis specifically regression testing works e.g.
the detection of whether a new versioncanfailaworkingfunctionorwhattestcasescandiscover aregression bug .
regression localization works e.g.
the explanation why the new versionvfailcauses the failure and the location of the failure inducingchangesbetween vfailandvpass .
regression repairworks e.g.
thegeneration of afixing version fromvpassandvfailtopass the test t .
while the research works for regression bugs are emerging the community still lacks a scalable benchmark e.g.
defects4j to evaluatetheminasystematicway.ourinvestigationon14research worksfromtheyearof1999to2021 shows thatthemeannumberofevaluatedreal worldregressionsis16.
andthemedianis12.
.moreover differentbenchmarksareusedin different work making it difficult to compare their performance.
a large scale benchmark can largely mitigate the issue.
however the process of collecting and labelling a regression is very costly which requires to prepare a regression fixing thiswork islicensedunderacreativecommonsattribution4.0international license.
esec fse november14 18 singapore singapore xuezhisong yun lin yijianwu yifanzhang sianghwee ng xinpeng jin song dong andhongmei versionvfix aregression introducingversion vfail andaprevious workingversion vpass setupatleastone test casepassing vfix andfailingvfail andpassing vpass and isolateanenvironment where the bugcan be well replicated.
in this work we introduce regminer to automate the collection of runnable regression bugs from the code repository with zerohuman intervention.
regminer takes a set of code repositories as input and isolates a set of regressions with their running and replicableenvironmentasoutput.technically weconstructaregressionbysearchingincoderepositoriesforaregression fixing commitdenotedas rfc aregression inducingcommitdenotedas ric a working commit before ric denoted as wc and a test case denotedastsothattcanpassrfcandwc andfail ric.tothisend ourapproachaddressesthetechnicalchallengesof predicting the commits with larger potential as regression fixing commits identifying relevant code changes in a committo migrate through thecodeevolutionhistory adoptingthelibraryupgrades with the history and minimizing the compilation overhead and handling incompilable revisions.
more technical details are reported in our researchtrack work inissta .
weimplementregminertoolforminingregressionbugsfrom javaprojectssupportedbyeithermavenorgradle.weevaluateour approachwithaclose worldandanopen worldexperiment.inthe close worldexperiment regminerachieves100 precisionand56 recall on a benchmark consisting of regression bugs and nonregressionbugs.intheopen worldexperiment werunregmineron 147coderepositorieswithin8weeks.regminerreports1035regressionswhichconstructthelargestjavaregressiondatasettothebest of our knowledge.
our ablation study also shows the effectiveness andefficiencyofourtechnicaldesigns.thesourcecodeofregminer isavailableat themined regressiondatasetisavailableat andthe demonstration video is available at .
regminertool .
miningprocessdashboard figure 1shows the dashboard user interface to run the regressionbugminingprocessfrom the git repositories.
start resume and stop of the mining process.
on the up right cornerofthedashboard thereisa start buttonallowingtheusers tostarttheminingprocess.inaddition theusercanclickthe stop button to suspend the miningprocess and click the start button to resume the process.
mining progress.
once the mining process starts regminer visualizes twoprocesses progress of processing projects we show under the processed projects section the ratio of the number of the processed projectsover that ofthe totalprojects.
progress ofprocessingbug fixing commits weshow underthe processedbug fixingcommits sectiontheratioofthe number of the processed bug fixing commits over that of the total found bug fixing commits.
note that regminer will extract potentialbug fixingcommitsfromthecoderepositories along withtheirverifyingtestcaseswhichpassthecommitandfailthe commitbefore.theprocessverifieswhetherabug fixingcommitisaregression fixingcommit bysearchingforaworkingcommit where the test casecan pass.
timeline.
duringthe mining process we further allowthe users to investigate any of the found regression bugs on how it is found duringthesearchonthecommithistory.the timeline session shows stepwise search process to locate the working commit.
each point represents a visited commit during the search.
the green points represent the commits where the test case can pass the red points represent thecommitswhere thetestcasecanfail andthe grey points represent the commits which cannot be compiled.
the search process startswiththeregression fixing commit andends withtheworkingcommit.userscanreplaythesearchprocessby clicking the next and previous buttons.
.
regression details moreover theusercanfurtherinvestigatethecodeanditsdiff information.inaddition wecanalsorunthecommits i.e.
regressionfixing commit regression introducing commit and the working commit and show the runtime results in the console as shown infigure2.moredetailscanbeinvestigatedinourwebsite https regminer.github.io .
tool design figure3showsanoverviewoftheregminerdesign.regminertakes input as a set of code repositories a.k.a.
git repositories and generates regressionsformalized asa4 tuple reg test rfc ric wc whererfcrepresents a regression fixing commit ricrepresents a regression introducing commit wcrepresentsworking commit andtestrepresents a test case passing rfc failingric and passing wc.
the regminer framework consists of three high level modules repository parsing module the module parses the git repositoriesintoapoolofbugs i.e.
candidateregression for further mining.withasetofgitrepositories arepositoryparsingmodule first scans the bug fixing commits with regression potential.
specially the repository parsing module reports a set of tuplebug test bfc p where thetestcase testcanpass abug fixingcommit bfcandfailthecommitbefore bfc noted asbfc and the likelihood of bugturns out to be a regression.
note that the bug fixing commits with very low regression potential score pare discarded.
more details of the probability calculationcan be referredin .
commit validationmodule themoduleverifieseachbugin thecandidatebugpoolbywhetheritcanfindacommitbefore bfc 1wheretestcan pass.
during the search the module automaticallycompilestheproject mavenandgradleprojects aresupported migratesthetestcase tapreviouscommit and heuristicallylocatesthetargetcommitwithabalanceofefficiency andcompleteness.asaresult weconstructaregressionbugasa tuplereg test rfc ric wc wheretestcan passrfc failric andpasswc.
user interaction module the module provides an intuitive userinterfacebasedonthe mindedregressionbugdataset.
critical change recommendation given a regressionfixingcommitorregression introducingcommit weadopt state of the art delta debugging technique to recommend theircriticalchanges.
1712regminer mining replicableregressiondatasetfrom code repositories esec fse november14 18 singapore singapore figure user interface of regminer we show progressive information to mine regression bugs from predefined git projects.
figure2 userinterfaceofdetailsofanindividualregressionbug.usercanrunthetestcaseagainstthecommits versionsto checktheir runtime outputintheconsole.
changeannotation wefurthersupportuserstoconfirm the recommended critical changes and annotate the misreportedchanges.
bugsearch inaddition weintegrateakeyword basedsearch enginefor usersto lookfor theirinterestedregressionbugs e.g.
regarding concurrency socket io etc.
experiment webuildregminertominejavaregressions supportingmavenand gradleprojects.weevaluateregminerwiththefollowingresearch questions rq1 close world experiment whether regminer can mine regressionsfrom git repositories accurately andcompletely?
rq2 open world experiment whether regminer can continuously mine authentic regressions from real world git repositories?
howdiverseisour constructedregressiondataset?
rq3 ablation study how each component in regminer i.e.
regression potentialestimation testdependencymigration and validationeffortminimization contributetotheminingeffectivenessandefficiency?
results rq1 close world experiment.
we evaluate regminer in the close world experiment regarding precision and recall.
in thisstudy wemanuallycollect50regression fixingcommitsand 1713esec fse november14 18 singapore singapore xuezhisong yun lin yijianwu yifanzhang sianghwee ng xinpeng jin song dong andhongmei user interaction modulecode repository code repository code repository 1repository parsing module ...candidate bug pool regression datasetcritical change recommendationchange annotationbug search test case selection regressionpotential commit estimationcommit validation module project compilation test case migration regressionintroducing commit search commit producer commit consumer figure3 designofregminer aproducer consumerarchitecturetoprogressivelysearchfortheregressionbugs.follow up analysisisbuiltuponthecollectedregressionbugssuchascriticalchangerecommendation changeannotation andbugsearch.
table the overallperformanceofregressionretrieval approachclose world experimentopen world experiment precrectime h regtime h regminer .
.
.
.
regminer tdm .
.
.
.
regminer vem biset1.
.
.
.
non regression fixing commits from github repositories for the measurementofprecisionandrecall.toavoidbias weconstruct theregressionbenchmarkwithoutanyhelpofregminer.specifically we search for closed github issues each of which uniquely mentionsacommitasitssolution.then wefilterthoseissuesbased on its labels and description.
we prioritize the issues with labels as regression or bug orwithdescriptionwiththekeywordof regression .
then we confirm the real regressions by manually checking the evolution history for regression inducing commits andmigratingthetestcases.asaresult weconfirmed50regressions from java projects by this means.
by similar means we identified50 non regressionbugs.
we apply regminer on all the regression and non regression fixingcommitstomeasuretheprecisionandrecall.letthenumber of true regressions to be n n the number of reported regressionstobe m andthenumberofreportedtrueregressionsto bek the precision isk m the recall isk n. overall we achieve precision and56 recall.
results rq2 open worldexperiment.
regminerisdesignedto mineregressionsfromgitrepositorieswithzerohumanintervention.
in this experiment we collect git repositories from github and run regminer to mine regressions for weeks.
we evaluate regminerregardingtheauthenticityandthediversityofthemined regressions in both quantitative and qualitative manner.
overall regminer constructs a regression dataset consisting of regressions over the 147projectswithin 8weeks.
results rq3 ablationstudy.
inthestudy wedisableandenable thefunctionof testcase migrationand validation effort minimization respectively to evaluate their effectiveness.
table 1shows that the overall regression retrieval performance.
overall comparing to the baselines our solutions showtheireffectiveness.
related work researchershaveconstructedmanybugdatasetsinthecommunity.
many datasets are constructed from programming assignments andcompetitionssuchasmarmoset quixbugs introclass codeflaws etc.
open source projects e.g.
sir dbgbench defects4j bugsjs bugs.jar etc.
and runtime continuous integration scenarios e.g.
bears and bugswarm .
the most relevant dataset corebench which isaregressiondataset of70 c c regressions.
to automate the dataset construction dallmeier and zimmermann make the first attempt to construct bug dataset in a semiautomaticway.theyconstructthedatasetbylinkingthebugissues and commits.
zhao et.
al replicate bugs based on android bug reports.
recently ci continuous integration based techniques areemerging.bears andbugswarm constructthebug datasetbycollectingthebuggyandthepatchedversionsoncontinuousintegrationsystems.incomparison regmineristhefirst tool to mine regression bugs with fewer assumptions i.e.
we only require git repositoriessupportedbymaven orgradle .
conclusion and futurework we introduce regminer to automatically construct a regression dataset.
in the future we will enhance regminer by supporting manual correction of recommended critical changes and providing relevant apis from regminer to facilitate a variety of research experiments onsoftware testing debugging andrepair 21 .