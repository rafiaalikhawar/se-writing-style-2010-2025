taphsir towards anaphoric ambiguitydetection and resolution in requirements saad ezzini university ofluxembourg luxembourg saad.ezzini uni.lusallam abualhaija university ofluxembourg luxembourg sallam.abualhaija uni.lu chetanarora deakinuniversity australia chetan.arora deakin.edu.aumehrdad sabetzadeh university ofottawa canada m.sabetzadeh uottawa.ca abstract we introduce taphsir a tool for anaphoric ambiguity detection and anaphora resolution in requirements.
taphsir facilities reviewing the use of pronouns in a requirements specification and revisingthosepronounsthatcanleadtomisunderstandingsduring the development process.
to this end taphsir detects the requirements which have potential anaphoric ambiguity and further attemptsinterpretinganaphoraoccurrencesautomatically.taphsiremploysahybridsolutioncomposedofanambiguitydetection solution based on machine learning and an anaphora resolution solution based on a variant of the bert language model.
given arequirementsspecification taphsirdecidesforeachpronoun occurrence in the specification whether the pronoun is ambiguous or unambiguous and further provides an automatic interpretation forthepronoun.theoutput generatedbytaphsircan beeasily reviewedandvalidatedbyrequirementsengineers.taphsirispublicly available on zenodo .
ccsconcepts software and its engineering requirements analysis computing methodologies machine learning natural language processing .
keywords requirements engineering natural language requirements ambiguity naturallanguage processing machine learning bert acm referenceformat saad ezzini sallam abualhaija chetan arora and mehrdad sabetzadeh.
.
taphsir towardsanaphoric ambiguity detection and re solution inrequirements.in proceedingsofthe30thacmjointeuropeansoftware engineering conference and symposium on the foundations of software engineering esec fse november14 18 singapore singapore.
acm newyork ny usa 5pages.
esec fse november 14 18 singapore singapore copyright held bytheowner author s .
acm isbn978 .
introduction the overall success of a project depends to a large extent on the quality of requirements .
in particular ensuring the precision and consistency ofrequirements is paramount foravoiding major development risks such as time and budget overruns failure to meet customers needs and systems that are not trustworthy.
the requirements quality challenge is exacerbated by the fact that requirements are often written in natural language .
although natural language facilitates communication among different stakeholders textual requirements are highly prone to ambiguity.
at an earlystageofsoftwaredevelopment requirementsengineersspend considerabletimeandeffortinspectingrequirementsspecifications rss to identify various quality issues such as incompleteness inconsistency and ambiguity.
such inspections entirely manuallyisnotonlytime consumingbutcanalsobeerror prone since engineers may overlook unacknowledged ambiguity .
ambiguity isunacknowledgedwhendifferentindividualshavediverginginterpretations for the same requirement and yet each individual isconfidentabouttheirowninterpretation.insuchcases therequirementfromtheperspectiveofeachindividualisregardedas unambiguousandthusnotflaggedforfurtherdiscussion.compared to acknowledged ambiguity that is often discussed and resolved duringinspectionsessions unacknowledgedambiguitymaypropagate to later stages of development and lead to serious problems due tounconscious misunderstandings.
inthispaper weproposethetool taphsir standingfor towards anaphoric ambiguity detection and re solutioninrequirements.
inarabic taphsirmeans interpretation .taphsirfocuseson pronominal anaphoric ambiguity an ambiguity type that has been explored only to a limited extent in requirements engineering re .
there are noexisting tools in re to handle anaphoric ambiguity although thistype of ambiguity is prevalent in nlrequirements it is estimated that up to of industrial requirementsmaysufferfromanaphoricambiguity .taphsirimplements the best solution emerging from our multi solution study of anaphoric ambiguity in natural language requirements published in a technical paper at the 44th international conference onsoftwareengineering icse2022 .thisbestsolutionisahybrid one where feature based machine learning ml is used for detecting anaphoric ambiguity and a large scale language model lm fromthe bert family is usedforanaphoraresolution.
this work is licensed under a creative commons attributionnoncommercial .
internationallicense.
esec fse november14 18 singapore singapore ezzini abualhaija arora andsabetzadeh r1.
where records are stored on external folders the system shall enable the complete obliteration of records parts folders and groups of folders.
r2.
if records are stored on write once folders the system shall prevent access to them.myrs.txt review validate requirements engineerpython taphsir.py doc myrs.txt taphsir myrs detection.csv context detection pronoun r1.
where records are stored on external folders the system shall enable the complete obliteration of records parts folders and groups of folders.
r2.
if records are stored on write once folders the system shall prevent access to them.them ambiguousmyrs resolution.csv context pronoun resolution r1.
where records are stored on external folders the system shall enable the complete obliteration of records parts folders and groups of folders.
r2.
if records are stored on write once folders the system shall prevent access to them.them records figure application example oftaphsir.
comparedtoourearliertechnicalpaper wepresentinthis current paper an in depth practitioner oriented description of taphsir elaboratingthetool sarchitectureanditsengineering aswellashowend userscanusethetool.wefurtherdiscussthe accuracy of taphsir in detecting anaphoric ambiguity including unacknowledgedcases andresolvinganaphora.
taphsiraimstoreducethetimeandeffortthatrequirementsengineersspendinspectingtheuseofpronounsinanrs.toillustrate consider the example in figure .
the figure shows a requirements engineer reviewing the requirements in the file myrs.txt and using taphsir for automated analysis of pronominal anaphora in thatrs.thepronoun them inr2containsanaphoricambiguity since it is not clear whether the pronoun refers to the write once folders in r2 recordsonly in r1 or records parts folders and groups offolders altogether inr1 .
deciding about the exact interpretationhasanimpactonproperlyimplementingtherequirement.
taphsir defines a contextfor each pronoun occurrence.
this context iscomposed oftherequirement inwhichthepronounoccurs and the preceding requirement.
within this context the tool identifiesallnounphrases nps precedingthepronounascandidate antecedents .inourexample taphsirwillconsider inadditiontothosementionedabove thefollowingcandidateantecedents access obliteration system.taphsirthengoesthroughdifferent steps as we explain in the next section and produces an output file myrs.csv in figure .
this output lists all pronoun occurrences in the input rs and provides both the detection decision as well astheresolutionresult.wenotethattaphsircanrecommenda resolutionalsofor those pronounsthat are marked asambiguous since it applies two separate solutions for detection and resolution.
running taphsirin this examplerequires .
secondsto produce the results .
in the remainder of this tool demonstration paper we outline taphsir s main components.
we further discuss through the lens of unacknowledged ambiguity the evaluation of taphsir on a manually curateddataset damir .
tool architecture taphsirisausableprototypetoolforanaphoricambiguityhandling.thetoolrealizesatechnicalsolutionthatresultedfroman empirical examination of several alternative solutions .
figure2 shows an overview of taphsir architecture.
the tool is implemented in python .
.
below we discuss an end to endapplication ofthe toolgoing throughsteps 1 7of figure .
.
preparation priortousingthetool theuserneedstoperformsomepreliminary setup.todoso onecantypeinthefollowingonthecommandline python pip install r libraries.txt python m spacy download en core web sm thefirstcommandinstallstherequiredlibraries andthesecondone downloads en core web sm whichisneededforoperationalizing the natural language processing pipeline in spacy.
to be able to applythetool theuserfurtherneedstoensurethattheinputfile is in the right format.
taphsir expects as input a text file with the extension .txt containing a set of requirements or sentences .
.
reader this step parses the text of the input requirements specification preprocesses it using an nlp pipeline and identifies the requirements that should be subject to anaphoric ambiguity analysis.
the nlp pipeline consists of the following seven modules illustrated in figure2 i tokenizer splits the input text into tokens ii sentence splitterdemarcatesthesentencesinthetext iii part of speechtagger pos assignsapostagforeachtoken iv lemmatizeridentifies thecanonicalformofatoken v constituencyparseridentifiesthe structural units of sentences vi dependency parser defines the grammaticaldependenciesbetweenthetokensinsentences and vii semantic parser extractsinformation aboutwords meanings.
the output of this step is a set of triples each of which includes a i apronounoccurrence ii contextdefinedastherequirementin whichthepronounoccursandaprecedingrequirement recallfrom section1 and iii alikely antecedent tothatpronounoccurrence.
thenumberoftriplesdependsonthenumberoflikelyantecedents.
in figure there are three possible antecedents as discussed in section1 namely records parts folders and groups of folders records and write once folders .
following this this steps generatesthreetriplesassociatedwiththepronounoccurrence them whereeachtripleincludesonepossibleantecedent.thetripleswill further have the same context whichcombines r1andr2.
ml based anaphoric ambiguity detection our earlier work indicatesthat forthetaskofanaphoricambiguitydetection featurebased ml leads to better accuracy than language modeling and off the shelf nlp methods.
for anaphoric ambiguity detection we 1678taphsir towardsanaphoricambiguity detectionandre solutioninrequirements esec fse november14 18 singapore singapore loadertxtrs nltk .
spacy .
.
benepar .
.
stanza .
pydotplus .
.
nimbusml .
.
scikit plot .
.
imblearn .
tensorflow .
.
textblob .
.
sentence transformers .
.
openpyxl .
.
et xmlfile .
.
libraries.txt2ml based anaphoric ambiguity detection spanbert based anaphora resolution csvreaderlanguage features extraction features emebeddings extractioncontext pronoun antecedentclassifier 45mllf mlfe label encoder6context pronoun resolver7 c p antecedentspanbert output rs requirements specification lf language features fe features embeddings figure overview oftaphsir architecture.
employanensemblemlclassifierthatcombinestheresultsofaclassifiertrainedoverlanguagefeatures mllf andanothertrained over feature embeddings mlfe .
for training and applying ml classifiers we use scikit learn .
.
.
this component takes as inputasetoftriplesassociatedwithonethepronounoccurrence fromthepreviousstep andderivesasoutputafinallabelforthat pronoun ambiguous orunambiguous .
.
language featuresextraction this step extracts the different sets of learning features.
in our work wecollectedasetof45languagefeatures lfs fromthenlp and re literature.
these features capture the characteristics of the relationship between the pronoun and its likely antecedent e.g.
both agree in gender or number.
for extracting lfs we use spacy .
.
nltk .
stanza .
and corenlp .
.
.
the result of this step is a vector representing each input triple whereeachentryinthisvectoristheresultofcomputinganlf.for theexampleinfigure wewillgeneratethreevectorsrepresenting the lfs ofthe pronoun them andeachofits likely antecedents.
.
extractionoffeaturesembeddings thisstepextractsthefeatureembeddings fes foreachinputtriple.
fes are mathematical vectors that encapsulate the semantic and syntacticregularitiesofthesentence .inourwork weextract 768dimensionalfesfromthebertlanguagemodel .forthat we use the transformers library particularly the bert base cased model.
similar to the previous step the output of this step is a vector representing each input triple.
in a similar manner this step results inthree vectors for the example infigure .
.
classification in thisstep we pass thevectorrepresentation ofeachinputtriple totwopre trainedclassifiers namely mllfthatistrainedoverlfs andmlfetrainedoverfes.foreachtriple thetwoclassifiersindependentlypredictalabelasfollows correct conversely incorrect indicating that the antecedent refers conversely does not refer to thepronoun or inconclusive whentheanaphoricrelationcannotbe inferred.
we then apply a set of rules on the predicted labels for the triples associated with one pronoun occurrenceto conclude whether the pronoun is deemed ambiguous or unambiguous by each of the two classifiers.
the rules presented in the re literature considerthepredictionprobabilitiesproducedforeach possible antecedent.
finally wecombineinanensemblemannertheresultsofthetwo classifiers mllfandmlfetoderivethefinallabelforthepronoun i.e.
ambiguous or unambiguous .
if the two classifiers agree on the label e.g.
both conclude that the pronoun is ambiguous then this label will be the final one for that pronoun.
otherwise the label withthehighestprediction probability willbe selected.this ensemble learningmethodyieldsamore accurateprediction.
spanbert based anaphora resolution.
based on the empirical findings in our earlier work we know that for the task of anaphora resolution the spanbert language model outperforms alternatives.
consequently the resolution component in taphsirusesaspanbertmodelthatisfine tunedonacurated datasetfromrequirements.thedatasetwillbediscussedinthenext section.
we implement spanbert using the transformers .
.
library provided by hugging face and operatedinpytorch .thismodeltakesasinput fromthetriples generated in the first step only the pronoun and the context in which it occurs i.e.
disregards the likely antecedents .
as spanbertisoriginallytrainedtoextracttextspans spanbertinour workpredictsasoutputthelikelyantecedentforthepronounfrom its context.
.
encoder tobeabletousespanbertmodel theinputpairofcontextand pronounhastobeencodedintothesameformatasthetrainingdata that bert has been trained on.
to do so the input tuple is passed on to bert s tokenizer which adds two special tokens to representtheclassificationoutputand toseparatethecontext fromthepronounoccurrence.thetoken informsbertabout whichpronoun occurrence to analyze inthe given context.
1679esec fse november14 18 singapore singapore ezzini abualhaija arora andsabetzadeh .
resolver inthisstep wepassontheencodedinputtothefine tunedspanbert model and have the model predict the text span which likely representstheantecedentofthepronoun.spanbertcanpredict multiple such text spans with different probabilities indicating the likelihood of being the right antecedent.
if an antecedent is predictedwithahighprobability greaterthan0.
thenweconsider this as the resolutionresult for the pronoun.
.
output given an input rs the output of our tool is a csv file listing all pronoun occurrences in the input and for each occurrence providing the predicted label ambiguous or unambiguous and the most probableantecedent.
evaluation in this section we evaluate how accurately taphsir can detect unacknowledgedcasesofanaphoric ambiguityandbringthemto the attention ofthe requirements engineer.
.
datasetdescription in this section we use the curated dataset damir standing for datasetforanaphoricambiguityinrequirements .wecurated thisdatasetwiththehelpoftwothird partyannotatorswhounderwent half day training on ambiguity in requirements.
we collected 22industrialrequirementsspecificationscoveringeightdomains including satellite communications medicine aerospace security digitization automotive railway anddefence.
wepreprocessedthiscollectionandpreparedthelistoftriples a context a pronoun occurrence and a possible antecedent as explained in section .
the possible antecedents for a pronoun includeallofthenounphrasesprecedingthatpronoun .the annotators then examined each pronoun occurrence and its possibleantecedentconsideringthecontext inwhichtheyoccur and assigned a label correct incorrect orinconclusive with the same indicationsasexplainedinsection .wethenpost processedthe annotations and grouped them per pronoun occurrence as follows.
we mark a pronoun as ambiguous in two cases i if at least one annotator acknowledges the ambiguity of this pronoun by labeling one or more associated triples as inconclusive or ii if the same tripleassociatedwiththispronounreceivesdifferentlabelsfrom thetwo annotators e.g.
correctversusincorrect .
the formercase impliesacknowledgedambiguity andthelatterimpliesunacknowledgedambiguity.
asaresult damirdatasetcontainsatotalof737pronounoccurrences that are analyzed for anaphoric ambiguity.
about of these pronouns are deemed ambiguous by the annotators.
out of the ambiguous pronouns we identified with unacknowledgedambiguity i.e.
theannotatorsassumedthatthe pronounisunambiguousyethadtwodifferentinterpretationsfor that pronoun.
.
results andanalysis toassesshowtaphsirperformsindetectingunacknowledgedambiguity we run taphsir depicted in figure ondamirdataset.taphsir applies the an ensemble ml classifier for detecting ambiguityandspanbertforresolvinganaphoraasdiscussedin section2.ondamirdataset taphsirdetectsambiguouscases with a perfect recall of with a precision of while recommends automated resolution with an accuracy of .
the perfect recall implies that taphsir detects all unacknowledged ambiguous cases that were not explicitly marked by the human annotators as ambiguous.
theprecisionvalueindicatesthattherequirementsengineerwill investsomemanualeffortfilteringoutfalsepositives i.e.
falsely detectedambiguousrequirements.inthecontextofambiguityin re recallis oftenfavoredoverprecision .
achieving recall ensuresthatallrequirementssufferingfromallpotentiallyambiguous requirements will be brought to the attention of the engineers andfurther discussedat an early stage.
in a practical scenario where requirements engineers review requirements undertime pressure only therequirements that are found problematic by at least one engineer would be thoroughly discussed.
the engineers might not discuss those requirements which they could confidently interpret unaware of having multiple inconsistent interpretations.in conclusion we believethat taphsirhasapotentialinpracticesinceitperfectlydetectsalsothose requirementswithunacknowledgedambiguitywhichwouldgootherwiseunnoticedduringmanualinspectionsessions.thatsaid a userstudyisrequiredtoassessthepractical usefulnessof the tool.
conclusion we presented taphsir a tool for detecting anaphoric ambiguity and resolving anaphora in natural language requirements.
our current implementation reflects our findings in a multi solution study .
taphsir combines solutions basedon machine learning andlanguagemodels.wefurtherevaluatedhowwelltaphsircan detectunacknowledgedambiguitycases i.e.
thesituationwhere differentindividualsperceivearequirementasunambiguousbut in reality interpret the requirement differently.
our results show that taphsirdetectsallambiguousrequirements i.e.
recall includingunacknowledgedcases.
infuture weplantodoauserstudytoassesshowusefulistaphsirinpractice.anothertopicforinvestigationistousetaphsiras a bottom layer in a broader application in analyzing requirements e.g.
using the resolution results in an extracting domain model form arequirements specification.