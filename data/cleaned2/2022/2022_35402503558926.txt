coreqqa a compliancerequirements understanding using question answering tool sallam abualhaija sallam.abualhaija uni.lu university ofluxembourg luxembourgchetanarora chetan.arora deakin.edu.au deakinuniversity australialionelc.briand lionel.briand uni.lu university ofluxembourg luxembourg university ofottawa canada abstract we introduce coreqqa a tool for assisting requirements engineers in acquiring a better understanding of compliance requirements by means of automated question answering.
extracting compliance related requirements by manually navigating through alegal document is both time consumingand error prone.coreqqa enables requirements engineers to pose questions in natural language about a compliance related topic given some legal document e.g.
askingabout databreach .thetoolthenautomatically navigates through the legal document and returns to the requirements engineer alist oftext passages containingthe possible answers to the input question.
for better readability the tool also highlights the likely answers in these passages.
the engineer can then use this output for specifying compliance requirements.
coreqqa is developed using advanced large scale languagemodelsfrombert sfamily.coreqqahasbeenevaluated onfourlegaldocuments.theresultsofthisevaluationarebriefly presented in the paper.
the tool is publicly available on zenodo .
ccsconcepts software and its engineering requirements analysis computing methodologies informationextraction .
keywords requirementsengineering re regulatorycompliance natural languageprocessing nlp questionanswering languagemodels lms bert.
acm referenceformat sallamabualhaija chetanarora andlionelc.briand.
.coreqqa a compliancerequirementsunderstandingusingquestionansweringtool.
inproceedings of the 30th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse november 14 18 singapore singapore.
acm new york ny usa 5pages.
esec fse november 14 18 singapore singapore copyright held bytheowner author s .
acm isbn978 .
introduction with the growing reliance on personal data and confidential information softwaresystemsareincreasinglysubjecttocompliance against regulations to enforce necessary safeguards for informationprotectionandhumansafety .failingtocomplywith relevantregulationscanleadtolegal fiscalorreputationalimplications for an organization.
regulatory compliance is regarded as an essential yet challenging task by the requirements engineering re community .
in this paper we propose the tool coreqqa compliance requirements understanding using questionanswering .
coreqqa is motivated by actual practical needs considering that requirementsengineersarebeingincreasinglyinvolvedinsoftware compliance against relevant regulations e.g.
all software systems ineuropemust comply withgdpr regulation eu the european regulationon dataprotection privacy andpersonal datatransfer .manuallyhandlingcompliancerequirementsis tedious and error prone since requirements engineers have to read through entire legal documents.
such documents are usually hefty containcomplicatednaturallanguage nl structures frequently refer to external regulations and are not easy to peruse without legalexpertise .
an automated question answering qa tool such as coreqqa helps requirements engineers efficiently navigate through the compliance related content of legal documents.
qaisthe task of automatically finding the answer to a question posed in nl from a given text passage.
in our work we refer to a single text passage as a context span .
instead of reviewing long complex legaldocuments coreqqa enables requirements engineers toask a question about a compliance related topic and then returns a list of relevant context spans in which the answer is likely to be found.
this way coreqqa pinpoints the requirements engineers to the portions of the legal document where they need to invest theirefforts andtime.
we illustrate infigure the qaassistanceprovided bycoreqqatoarequirementsengineer whoisinterestedinunderstanding the regulations related topersonal data breach.
the example questionisspecificallyrelatedtotheprocessforhandlingpersonaldata breaches.theanswertothisquestionisminedinthegdprtext.
the legal obligations with regard to handling data breaches can have a significant impact on the software development process e.g.
sending notifications to different responsible agents within legally binding time constraints.
coreqqa assists the requirements engineer in retrieving relevant information to define the this work is licensed under a creative commons attributionnoncommercial .
internationallicense.
esec fse november14 18 singapore singapore sallam abualhaija chetanarora andlionel briand when the personal data breach is likely to result in a high risk to the rights and freedoms of natural persons the controller shall communicate the personal data breach to the data subject without undue delay .
... as soon as the controller becomes aware that a personal data breach has occurred the controller should notify the personal data breach to the supervisory authority without undue delay and where feasible not later than hours after having become aware of it ... the controller should communicate to the data subject a personal data breach without undue delay where that personal data breach is likely to result in a high risk to the rights and freedoms of the natural person in order to allow him or her to take the necessary precautions ... relevant context span what is the procedure for handling personal data breach?
requirements engineer relevant context span relevant context span requirements engineer regulation eu gdpr document figure example of coreqqa s qa assistance on gdpr .
respective compliance requirements for handling data breaches for the software system under development.
as we elaborate in section2 coreqqa returns as output the top n1relevant contextspansfromagiven legal documentandthe potential answers highlightedin the context spans.
coreqqa builds onlarge scale natural language processing nlp language models for solving the qa task also widely known as machine reading comprehension mrc task .
qa models for mrc generally assume that for each question the relevant context span containing the answer is knownapriori.developingapracticalqatoolwiththisrestriction is infeasible as requirements engineers have no means of knowing the exact context span with the correct answer in advance.
therefore incoreqaawefirstfindtop nrelevantcontextspans whichlikelycontaintheanswer.todoso wecomputethesemantic similarity between each context span in the legal document and the input question.
then we demarcate the answer to the input questionusing the qa models.
wefurtherobservethatinformationrelevanttoansweringthe question could be found in multiple non contiguous context spans i.e.
differentsectionsinthesamelegaldocument .forexample the top context spans selected in figure 1are all directly relevant for answering the question.
the first two spans retrieved from differentsectionsofthedocument explaintheprocessofcommunicating breachdetailstothedatasubject whilethethirdspanspecifieshow tocommunicatebreachdetailstothesupervisoryauthorities.thus byretrievingmultiplerelevantspans andfurtherhighlightingthe likelyanswers coreqqaenablestherequirementsengineerto specify a complete and precise set of compliance requirements.
we leave configuring the nparameter to the requirements engineer.
while selecting higher values of nentails more time and effort for 1nisaconfigurableparameterandisset n 3fortheexamplequestioninthefigurereviewingtheretrievedcontextspans webelievethatusingcoreqqa is still much more cost effective in practice than manually traversingthe entire legal document for the answer.
in the remainder of this tool demonstration paper we elaboratethearchitectureofthetool thedatasetthatwegeneratedfor developingcoreqqa as well as an end to endusage scenario.
tool architecture theend to endarchitectureofcoreqqaisillustratedinfigure2.coreqqaaimsatansweringagivenquestionposedbya requirementsengineerinnlonsomelegaldocument.below we elaboratethemainstepsofthetoolmarkedas1 3infigure .we implementedcoreqqa inpython3.
.
.
text preprocessing in the first step coreqqa parses the legal document and applies a simplenlp pipeline which is composedof tokenization and sentencesplitting.thetoolthenappliesasetofregularexpressions for normalizing the text e.g.
removing periods from the ending of acronyms art.
becomes art .themotivationfornormalizing the text is to improve the accuracy of sentence splitting.
we operationalize the nlp pipeline using nltk library and the re modulein python for regular expressions2.
in this step we further partitionthelegaldocumentintocontextspans.duetotechnical constraints of underlying qa models the maximum size of each context span is tokens.
to maintain coherence we split the document into paragraphs first and then check their size.
each paragraph fitting this size limitation is regarded as one context span.
otherwise we split the paragraph into half and check the size again.
this process is iteratively performed until size limitations are met.
the output of this step is the list of context spans representing the inputlegal document.
.
relevant context retrieval in the second step coreqqa computes the semantic similarity between the input question and each context span generated from the previous step.
we implement this step using the bert cross encoder bce modelavailableinthesentence transformer .
.
provided by hugging face3.
bce takes as input two text fragments andreturnsasoutputascorebetween0and1indicating how semantically similar the two fragments are with being identical.
to assess the relevance of the context span we first compute bcebetweenthequestionandeachsentenceinthecontextspan andthenassigntothecontextspanthemaximumscoreachieved by any sentence.
the intuition behind this computation strategy is thatonlyaportionofthecontextspanisexpectedtocontainthe likely answer to the inputquestion.
oncewecomputeascorepercontextspan werankthespansin descendingorder.wedothisusingthesortfunctionfrom pandas inpython4.theresultofthisstepisalistoftop nrelevantcontext spanstotheinputquestion.wekeepthevalue nasaparameter thatcanbeinitializedbytherequirementsengineer.thevalueof ndepends on the practical context in which coreqqa is applied.
1683coreqqa a compliancerequirements understandingusingquestion answeringtool esec fse november14 18 singapore singapore legal document requirements engineerquestion?
text preprocessing and partitioning1tokenizeationsentence splittingnormalizationregex .
context span generation context spansrelevant context spans contexts answers c1 a1 cn anpossible answers answer extractionanswer demarcatorroberta qa relevant context retrievalrankingselection similarity computation n bcereview 34final output representation figure overview oftheend to endarchitecture ofcoreqqa.
selectinglargevalues e.g.
entailsthattherequirementsengineerwillreviewmanycontextspanstogainabetterunderstanding ofthecompliancerequirementsassociatedwiththequestion.selecting small nvalues e.g.
entails less context spans to be reviewed butalsoahigherriskfortherightanswernottobefound inanyofthetop nrelevantspans.infigure weshowanexample oftop 3contextspansretrievedinthisstep.thedefaultvalueof the configurable parameter nis set to in coreqqa based on previous experiments .
.
answerextraction inthelaststep wepassonthetop ncontextspansdeemedrelevant in the previous step together with the input question to a pretrained qa model.
in our work we apply the transformers library toextractanswersforthegivenquestionusingtherobertaqa model roberta base squad2 distilled .
robertathenextractsfrom each context span a potential answer for the input question.
in figure1 wehighlighttheextractedanswersingreen.wenotethat theengineerhasaccesstothecontextspansalreadyintheprevious step.
thus this step is not essential for providing assistance to the requirementsengineerinunderstandingthequestionsrelatedto compliance requirements.
however highlighting the answer in the context span improves readability and leads to a more efficient reviewingprocess.inpractice whentheengineerselectsalarger numbern say10 itisthenadvantageoustodemarcatetheanswer automatically to help the engineer quickly navigate through the contextspans.
.
final outputrepresentation for presenting the final output of the tool to the requirements engineer we export for each question the top ncontext spans and the highlighted answers within these context spans as a microsoftworddocument.thedocumentalsoshowsforeachcontextspanaconfidencescore range0 1 oftheanswerhighlightedin the span.
this confidence score is automatically assigned to the extracted answer by the qa model.
we use the python docx library v0.
.
for exporting the output and visualizing highlighted answers in the relevant top ncontextspans.
evaluation coreqqahasbeenevaluatedonfourlegaldocuments wherein the question answer pairs were identified by two experts one expert in legal informatics and the other in requirements engineering .
in the following we describe the fourdocuments gdprorgeneraldataprotectionregulation eu 679isthe european privacy law that harmonises the data protection privacy andpersonaldatatransferrequirements .theexpertsidentified question answer pairs from the entire document.
the document waspartitionedin301contextspansbythe textpreprocessing step offigure .
directive eu is the european directive for regulating the supply of digital content or digital services and laying down rules for contracts between any trader and consumer of digital content or service .
the experts identified questionanswer pairs in this document and the document was split into 120contextspans.
directive eu istheeuropeandirectiveconcerningthe sale of goods .
directive eu complements directive eu asitformalisesthecontractsonthesaleofgoodsthat contain digital elements that require digital content or service.
for example theregulationsrelatedtothecontractsofthesmartphone arecoveredbydirective eu whereastheregulationsfor operating systems or apps on the smartphone might be covered by directive eu .
the experts identified question answer 1684esec fse november14 18 singapore singapore sallam abualhaija chetanarora andlionel briand pairsindirective eu andthedocumenttextwassplit into102contextspans.
luxembourg law of march is an amendment to numerous existing finance and banking related laws in luxembourg.
theamendmentwasintendedtosetduediligencemeasuresfora centralelectronicdataretrievalsystemrelatedtobankaccountsand safe depositboxesinluxembourg andwasasteptowardstackling moneylaundering .theexpertsidentified19question answer pairsinthislegaldocument.thedocumenttextwassplitinto23 contextspans.
to identify the most accurate similarity metric for context span retrieval wecomparedbce section .
withtf idfsimilarity ametriccommonlyusedinthenlpdomain.bcewassignificantly moreaccuratethantf idfinourexperiments.overall fromthe 107questionsoverthefourdocuments bceretrievesthecorrect context span for questions for the top 5spans .
in addition to roberta wefurtherevaluatedthreeqamodels namelybert albert electra for answer extraction section .
.
robertawasdeemedthemostaccurateasitcorrectlyextracted the answers for questions.
wealsoanalyzedthequestionswherecoreqqadidnothighly rankthecorrectcontextspan withintop orrobertamodeldid notextractthecorrectanswer.ouranalysisshowedthatgeneric questions such astheones formulated for definingorelaborating onalegalconcept werenotcorrectlyanswered.thisisbecausethe legaldocument orevenagivencontextspan wouldusuallycontain severalinstancesofsuchlegalconcept thusmisleadingboththe contextspanretrievalandanswerextractionstepsofcoreqqa.
wealsorealizedthatcomplicatedquestions e.g.
withcomposite conditions were difficult to answer for coreqqa.
lastbut not least coreqqa answers questions within reasonableexecutiontime.thus inshort ourevaluationindicatesthat coreqqaproducesaccurateresultsandisfitforusebyrequirements engineers in practice.
for answering one question from a legaldocument includinganaverageof 620sentences coreqqa requires atotalof seconds.
usagescenario inthissection wedescribeanend to endexampleillustrating howourtoolcanbeappliedinpracticebyarequirementsengineer.
letkoopaapp be a new system under development.
koopaapp is a gymfitnessappformaintainingusers workoutinformationand otherhealth relateddata.koopaappaccessespersonalinformation such as the location from other apps on the users smartphone.
duringthepandemic suchapplicationsoftenraisedconcernsabout privacy.
forexample several health applications were analyzedfor privacy relatedissuesinthe re literature .
arequirementsengineer daisy isinchargeofspecifyingthe koopaapprequirements includingcompliancerequirements.as an example we focus only on a subset of compliance requirements relatedtoprivacyanddataprotection.daisy asisoftenthecase in most software projects is not very familiar with the privacy regulations yet she knows well the functionalities and characteristicsofthekoopaapp.duringtheelicitationofrequirements daisy identifiesasetoffunctionalitiesthatmakeuseofpersonaldataandare thus subject to compliance.
some of these functionalities are relatedtothesecurityofcollectedpersonal data.we assumehere thatdaisyorherteamareawareoftherelevantlegaldocumentsfor theirproject.suggestingrelevantdocumentsisbeyondthescope ofcoreqqa.accountingtopossiblesecuritythreats daisyposes a question what is the procedure for handling a personal data breach?
using the coreqqa tool on the gdpr .
coreqqa inturnprovidesthe outputshowninfigure .
from the output of coreqqa daisy is able to formulate the followingcompliancerequirements prefixedwiththeid cr under the labelusers data breach .
notifyusersaboutthedata breach.
cr1.if a data breach is identified on the koopaapp server the koopaapp notifyservice shallinformthe affectedusers.
cr2.thekoopaapp notifyserviceshallemailtheaffecteduserson theregisteredemailaddressandstorethe userinformed response onthe server.
cr3.thekoopaapp notifyserviceshallnotifytheaffectedusers onthe app andstore the read response onthe server.
notifythecio aboutthe data breach.
cr4.if a data breach is identified on the koopaapp server the koopaapp notifyservice shall send an email to the chief information officer notifying the breach within hours of its occurrence.
the four compliance requirements fulfill the regulations providedinfigure .
conclusion wepresentedcoreqqa atoolforassistingrequirementsengineers in better understanding compliance requirements through question answeringbasedonregulatoryorlegaldocuments.coreqqa is developed using a manually created dataset that combines a joint effort of a requirements engineer and a legal expert over four diverse legal documents.
the tool is based on recent largescale language models that are pre trained for question answering.
specifically thetoolappliesthesentencebertcrossencoderfor retrievingthemostrelevanttextpassagesfromalegaldocumentfor a given question.
the tool further employs the roberta questionansweringmodelforhighlightingthelikelyanswerstothequestion inthe retrievedtextpassages.
in future we plantoconduct auserstudy toassesshow useful coreqqa isinpractice.