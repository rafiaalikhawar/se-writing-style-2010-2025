corms a github and gerrit based hybridcodereviewer recommendationapproachformoderncodereview praharpandya softwareengineeringresearchlab da iict gandhinagar india daiict.ac.insaurabh tiwari softwareengineeringresearchlab da iict gandhinagar india saurabh t daiict.ac.in abstract moderncodereview mcr techniquesarewidelyadoptedinboth open source software platforms and organizations to ensure the quality of their software products.
however the selection of reviewers for code review is cumbersome with the increasing size of development teams.
the recommendation of inappropriate reviewersfor codereviewcantake moretimeandefforttocompletethe taskeffectively.inthispaper weextendedthebaselineofreviewers recommendation framework revfinder to handle issues with newlycreatedfiles retiredreviewers theexternalvalidityofresults and the accuracies ofthe state of the art revfinder .
our proposed hybrid approach corms works on similarity analysis to compute similarities among file paths projects sub projects author information and predictionmodelstorecommendreviewersbasedon the subject of the change.
we conducted a detailed analysis on the widely used projects of both gerrit and github to compare our results with revfinder .
our results reveal that on average corms can achieve top top top and top accuracies and mean reciprocal rank mrr of .
.
.
.
and .
for the projects consequently improves the revfinder approach by .
.
.
.
and18.
respectively.
ccs concepts softwareanditsengineering softwarelibrariesandrepositories software notationsandtools keywords modern code review mcr reviewer recommendations data mining github gerrit acmreference format prahar pandya and saurabh tiwari.
.
corms a github and gerrit basedhybridcodereviewerrecommendationapproachformoderncode review.
in proceedingsofthe30th acmjoint europeansoftware engineering conferenceandsymposium on the foundationsof softwareengineering esec fse november14 18 singapore singapore.
acm newyork ny usa 12pages.
permissionto make digitalor hard copies of allorpart ofthis work for personalor classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acm mustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
esec fse november 14 18 singapore singapore associationfor computing machinery.
acm isbn ... .
introduction softwarecodereviewshelpthedevelopmentprocessinreducing overallcostsandhelpinknowledgetransfer.thereviewsonthe softwarecodeidentifiedlogicalerrorsandcodingruleviolations andassistedwiththeautomatedtools.thisreviewprocessisknown asmcr moderncodereview .themcrarenowadays used by both the organizations such as microsoft or google and by the open source software oss platforms such as github1 gerrit2orreview board3.
theexistingworkshighlightedthatselectionandassignmentof inappropriate reviewers downgrade the review process and quality ofthesoftwareproduct .thongtanunametal.
investigated reviews in gerrit open source system and found that 30 of the reviews have reviewer assignment issues.
as a result on average more days may require to complete it.
jiang et al.
also analyzed the pull requests in github and found .
of manualassignments.gerritandgithubarethetwowidelyusedoss platforms for performingcode reviews.
gerritreviewsuse reviewui4 whichprovidestoolsupporttoprovidemany functionalitiestomake thereviewprocesscomfortable andefficient.ingerrit developersfirstclonearepositoryandmake changes to fix bugs or implement new features.
when they are readywith thechanges theysubmitapullrequesttomergecode changes into the repository by providing a branch reference for thatrepository.then theycanmanuallyaddthereviewerorcan use the plugins5or6to add reviewers to the change automatically.
thereviewersthengetnotified.whenreviewersmakedecisions they have choices to vote from to .
vote denotes that the changerequestlooksgoodtothereviewerandisapproved.
1vote impliesthatthechangerequestisacceptabletothereviewer but someone else has to approve it.
vote denotes no score.
a score indicates that the reviewer would prefer not to submit this change.
vote implies that the reviewer decided to abandon this change request.achangemusthaveatleastone 2voteandno 2votes before submission.
figure shows the code review interface of a gerrit android project7.
this change request change id was reviewed on10thmarch2022.here wecannoticethatthe authorx added the reviewer reviewer c .
however he is not the actual reviewer so he added two more reviewers reviewer a andreviewer b and settings esec fse november14 18 singapore singapore praharpandya andsaurabhtiwari figure codereview interface ofgerrit removedhimselfasareviewerasheisnolongeranownerofthis project.finally the reviewera approvedthechangebyprovidinga vote.
the correct reviewer could be assigned to change requests without delay after their creation in an ideal scenario.
however it isnotanordinarycaseatthemoment.thepull basedmodelhas the potential to be more effective and enhancements in these areas.
github is also a widely used oss platform and supports pullbased development.
in github developers first fork a repository andmakechangestofixbugsorimplementnewfeatures.whenthe developersarereadywiththechanges theysubmitapullrequest to merge the changed code into the repository.
the submitted pull request then needs to be evaluated by the reviewer.
in github the reviewers are categorising into core members and commenters.
corememberstakethefinaldecisionforamerge whilecommenters help the code review process by providing their suggestions in comments.
ideally reviewers are assigned to pull requests right after the change requests.
however reviewers may find difficulties in prioritising the pull requests for some of the popular projects as theyreceivemanypullrequestsonadailybasis .sincereviewers aresupposedtobeassignedtopullrequestssoonaftertheircreation findingan appropriate reviewer can be time consuming.
figure2showsthecodereviewinterfaceofthe changeid of betterscientificsoftware project8ofgithubreviewedonjun8 .
here the author x proposed the change adding cc for ini for the bssw.io repositoryandrequestedareviewfromthe reviewer a. author x also assigned this request to assignee a .
in github anassigneeisinchargeofmergingthatpullrequestaftergetting commentsandchangerequestsfromothermaintainers.afterafew days authorxcommented hey reviewera sorryforanypressure.
willyouhaveachancetoreviewthisweek?
however hedidnotget any reply.
hence the author x put the comment asking is there anyone that has time to review my code?
.
after a few days another reviewer reviewerb approvedthe change.thus assigneea finally betterscientificsoftware bssw.io public adding cc for ini merged assignee a merged commits into from on jun conversation commits checks files changed 1code issues pull requests actions projects wiki master mcm86 04jun21 inclusive naming author x requested a review from reviewer a months ago author x assigned assignee a on jun author x commented on jun hey reviewer a sorry for any pressure.
will you have a chance to review this week?
if not i can re assign.
lemme know.
thx.
author x commented on jun is there anyone that has time to review this?
reviewer b approved these changes on jun view changes assignee a merged commit a2163df into on jun check passed view details master figure codereview interface ofgithub merged12commitsintothemainbranchfromtheforkedbranch created by author x. the pull request can be immediately assigned tothereviewerafterthecreationofthepullrequest.however it isnotthe caseatthemoment.recently githubfollowedaroundrobinandload balanceralgorithm for recommending reviewers9.
in this paper we propose a hybrid approach corms code reviewerrecommendationingithubandgerritbasedon machine learningand similarityanalysis forrecommendingactivereviewers in code review.
the approach considers both a similarity based approachandamachinelearning basedapproachforsolvingthe problem of recommending code reviewers.
a review process includes several fields while reviewing the code the subject of the change describesthedetailsofthechangeinaveryabstractform thefilelocation recordsthepathsofmodifiedfiles theauthorfield showstheownerinformation andtheproject sub project include theprojectandsub projectinformation .the cormsmakesuse ofallofthese fields.the cormsfirstbuildsa support vector machine svm modelbyanalyzingtextinthesubjectofthechange field of the reviews.
next cormsbuilds a similarity model by computing the similarity of the file paths author information and project sub project of thecurrent pull request separatelywith the file paths author information project sub project of all the pull requests historically studied by various developers.
we have computedthesimilarityofthesefieldsusingthefour stringcomparison techniques namely longest common sub sequence longest commonprefix longestcommonsuffix andlongestcommonsub string.
547corms a github andgerritbasedhybrid code reviewerrecommendation approachformoderncode review esec fse november14 18 singapore singapore next these svm and similarity models are combined to achieve betterperformance.ourworkaimstoimprovetheapproachproposed by thongtanunam et al.
revfinder10.
consequently we have formulatedtworesearchquestions rqs for the study.
rq1 how efficient is cormsin recommending reviewers for reviewing the code?
what is the performance of cormsin comparison withthe state of the art revfinder ?
rq2 how much improvement cormsgain with each newly addedfeature over state of the art revfinder ?
revfinder computes the similarities between the file paths to recommend code reviewers.ourproposedapproach corms also uses the same four string comparison techniques defined in the revfinder to compute similarities.
however cormsuses the more effective normalization technique for score propagation comparedtothe bordacount techniqueusedinstate of the art revfinder .
also the cormscomputes the similarities between project sub project and authors information with the file paths.
thecormsalsoincludesthesvmmodeltoexaminethetextual contentsinthe subjectofthechange fieldofreviewrequeststo recommendreviewers.the cormsthenmergesboththesvmand similaritymodeltorecommendthereviewerswithimprovedperformance.weevaluatetheperformanceofourapproachon20datasets collected from both gerrit and github platforms.
we mined and analyzed code reviews from to .
the evaluation wasdonebycomputingthevaluesoftop top top andtop accuraciesandmeanreciprocalrank mrr .next wecompare our experimental results with the revfinder and found that cormsachieves average top top top and top accuracies and mean reciprocal rank mrr of .
.
.
.
and .
for the projects which improves the performance of revfinder by44.
.
.
.
and18.
respectively.the individualmodelsof cormswhencombinedwiththe revfinder also positively improves the revfinder w.r.t the evaluation criteria andgenerateddataset.our contributionsare as follows we propose a hybrid approach corms which combines the svm model and similarity model to recommend active code reviewers.
we conduct experiments on the datasets of projects of both gerrit and github open source platforms and examine atotalof30 648reviewsofthem.
we find that cormsperforms better than the revfinder considering evaluation criteriaandadataset of20 projects.
the rest of the paper is organised as follows section presents the motivation behind proposing the approach.
section provides a brief description of mcr and presents existing literature.
section discusses our approach corms that extends revfinder .
section reports the results of our experiments.
the section also discusses threats to validity and our contributions.
section discusses study limitations and summarises our observations.
finally section presents the study conclusions future directions.
motivation atypicalreviewcontainsseveralfieldssuchasthesubjectofthe change filepaths authorsandreviewers.here thesubjectofthe field contains textual information explained in the abstract the author field specifies the owner of the change who submits the review.
the project field specifies details about the project and sub project under which the author has submitted the review and the file path field describes the locations of modified files in the change.
the last reviewed date specified the date when the review got completed.
we looked at several reviews from gerrit andmentionedonlyselectedreviewstodemonstratetheinsights.in this work we are more interested in investigating the relationship betweenauthorsandsub projectinformationwiththereviewers as existingstudiesrarelyintroducedthesefeaturesintotheirreviewer recommendationprocess.thus weusedgerritsearchapitosearch codereviewsfor thesamesub projectandthesameauthors.as a result we alsofoundsimilarities among reviewers.
tables1and2present reviews80832311and80830412from the open stack project of gerrit.
due to space limitations we present only the values of some fields in the reviews.
the change reviewed inreview 808323istoupdate tox constraints file forstable xena thechange in review808304 is to update .gitreview for stable xena.
we notice that these changes were from the same project subproject.
also all of these changes contain stable xena intheirsubjectfield andthesereviewsinvolvethesameauthors andsamereviewers.tables3 4and5representreviews83662913 and 83681415from the open stack project of gerrit.
the changereviewedinreview 836629istoremovethe tripleojob .
thechangereviewedinreview 798228istoremovethe tripleo job ofsteinasstable steinbranchforalltripleorepositorieswas moved to the end of life.
the change in review is to remove the tripleo job ofussurias stable ussuri branch for all tripleo repositories was moved to end of life.
we notice that all of these changes were from the same sub project puppet swift and the same authorproposedthesechanges.
table code review gerrit subject updatetox constraints fileforstable xena project subproject openstack python neutronclient author authorx reviewers reviewera reviewerb file path tox.ini table code review gerrit subject update.gitreviewforstable xena project subproject openstack python neutronclient author authorx reviewers reviewera reviewerb file path .gitreview observationsandimplications the followingobservations can be made by lookinginto the five code reviews the project sub project field information can help recommend appropriate reviewers.
the reviewer is more likely 548esec fse november14 18 singapore singapore praharpandya andsaurabhtiwari table code review gerrit subject removetripleo job project subproject openstack puppet swift author authory reviewers reviewerc reviewerd reviewere file path .zuul.yaml table code review gerrit subject steinonly removetripleo job project subproject openstack puppet swift author authory reviewers reviewerc reviewerf file path .zuul.yaml table code review gerrit subject ussuri only removetripleo job project subproject openstack puppet swift author authory reviewers reviewerc file path .zuul.yaml to review multiple changesfrom the same projects or subprojects.tables1and2showthechangerequestforthesame project openstack python neutronclient where the two differentreviewsofthesameprojectwereassignedtothesame reviewers reviewera andreviewerb .also changerequests shown in tables and are from the same sub project openstack puppet swift .
these three reviews were assigned to the same reviewer reviewer c .
thetextualcontentsinthesubject ortitle fieldgiveabstract information about the change and are good indicators to recommend suitable reviewers.
for example the content statedinthesubjectfieldofreviewsintables1and2specifies that the changes are from the stable xena branch.
the textualcontentsofthesubjectintables3 and5specify that the changes are madeto remove the tripleojob .
similar reviewers can review the review request from the sameauthorsastheyknoweachotherbecauseofpastcollaborations.fromtables1and2 wecanseethatthecode reviewsubmittedbythe authorx isreviewedbythesame reviewers reviewera andreviewerb .
tables3 4and show that the code review requests submitted by the author y were assignedto the same reviewer reviewer c .
the same reviewers should review the files stored in the samepaths.fromtables3 4and5 wecanseethatallthe codereviewrequestschangethefile .zuul.yaml andthus they were assignedto the same reviewer reviewer c .
backgroundand related work this section describes the background related to modern code review mcr andexisting mcrrecommendation techniques.
.
modern codereview figure3showstheworkingprocessofmcr.themcrprocessconsistsoftwophases reviewerplanningandsetupand code review.
the review planning and setup phase consist of steps.
in thepreparationstep theauthorprepareschangemetadatawithadescription providing extra details of the change.
next the reviewers areselected.finally reviewersreceivealertstoreviewthereviewernotificationstep.thecodereviewconsistsofthreemainsteps.in the code checking step the reviewer individually performs code checking.theymayalsointeractwiththeauthorandthemselvesin thereviewerinteractionstep.inthereviewerdecision reviewers decide on the change request which can be reworked accepted or rejected.mcrprocesshasfourroles author developer maintainer andcommenter.inrecentyears mcrgainedincreasingpopularity.
therefore tounderstandthecomprehensiveperspectiveofmcr davilaetal.
conductedasystematicliteraturereviewonmcrby identifying primary studies after applying search and selection criteria.
the benefits of code review are finding defects in both low levelandhigh leveldesign codeimprovementstohandle coding conventions with no defect identification alternative solutions knowledge transfer which gives another developer insightaboutcode teamawarenessandtransparencywiththe code and sharingcode ownership .
preparationreviewer selectionreviewer notification code checkingreviewer interactionreviewer decision re work accept rejectreviewer planning and setup code review figure workingofmoderncodereview mcr whilechallengesofcodereviewinclude understandingthe reason for the change familiarity with the code it takes more time to review files for the reviewers who are not familiar with the code dealing with understanding needs reviewers in general may try different paths like sending emails or talk in person for asking clarifications lax review means directly approves the changerequest codesizeandpoorquality delayedfeedbacks difficulties infinding proper reviewers lack ofdevelopers plan for knowledge sharing change request rejections and lackofavailable reviewing guidelines .
.
related work recommending reviewers is the most common support in mcr.
mostly recommendation techniques use a review history of the reviewersandtheirintereststobuildrecommendations.thefirst published technique is review bot which considers the line change history for recommending reviewers and recommends the same reviewers who have previously worked on the same lines.
however the reviewbot algorithmhas several issues.one iswith thenewlycreatedfilesthatdonothaveanylinechangehistoryand thuscannotbecorrectlyprocessedusingthisapproach.another problem is that most of the lines in the average project are only changedonce.therefore theaccuracyofresultsreturnedbythe reviewbot algorithmislimited.thongtanunametal.
proposed an approach revfinder which computes the similarity between the file paths.
the proposed work is now a baseline for evaluating mostreviewerrecommendationapproaches.however revfinder 549corms a github andgerritbasedhybrid code reviewerrecommendation approachformoderncode review esec fse november14 18 singapore singapore table technique platform source code data sets metrics used existingapproaches yeaross platformtechnique usedtestedprojectsavailability of datametrics top k mrrprecision recall reviewbot 2013reviewboard linechange history yes yes nono no revfinder 2015gerrit string comparison no yes yesno no tie 2015gerrit naivebayes no yes yesno no correct 2016github cosine similarity no yes yesyes yes coredevrec 2015github machine learning no yes yesno no comment network 2017github comment network no yes yesyes yes revrec 2018github cosine similarity no yes yesyes yes whoreview 2020gerrit evolutionary search no yes yesyes yes table featuresused incommonly used recommendation algorithms existingapproaches feature reviewbot revfinder tiecorrect coredevrec comm.
net revrec whoreview total filepath no yes yesno yes yes yes no social interaction no no nono yes yes no yes linechange history yes no nono no no yes no reviewer activeness no no yesno yes no yes no subject no no nono no no yes no libraries no no noyes no no no no commit messages no no yesno no no no no author no no nono no no no no reviewer workload no no nono no no no yes sub project no no nono no no no no total does not consider retired code reviewers and is also not able to recommendcode reviewers for newfiles.
another work correct code reviewer recommendation based oncross projectandtechnologyexperience proposedbyrahmanet al.
isbasedontheexpertiseofthereviewerswithsimilartechnologiesandexternallibraries.however thistechniquemaynot be effective when the project does not have external dependencies.
jiangetal.
proposedanapproach coredevrec automaticcore memberrecommendationforcontributionevaluation basedonmachine learning and uses support vector machine svm algorithm and considers file path information reviewer s activeness and social relationship.
however this social data is not directly available onsomeprojects apache mozilla orsomeoss platforms.
yueetal.
proposeda commentnetwork cn tocapturesimilar interests in social activities among developers and accordingly recommendappropriatereviewers.anotherapproach revrec considers the participation types to recommend reviewers for code review requests from the managerial and technical perspectives.
theproposed hybridapproachcombines similarity expertise and information retrieval methods to recommend reviewers.
whoreview approachusesamulti objectivesearch basedmethodfor maximizing the reviewer collaboration and expertise and minimizing reviewer workload.
it considers reviewers expertise by review frequency numberofcomments andrecency freshnessofcomments reviewers collaboration andreviewers workload.
in the paper do reviewer recommendations help developers?
the authors showed the need for more user centric approaches toreviewerrecommendations.xiaetal.
proposeda tiethat extends the state of the art revfinder by developing the hybrid approach.
the approach includes the commit message as a new feature and using a naive bayes classifier.
the authors tested theirresults on the four projects gerrit.in our proposed work we have consideredfeaturessuchasproject sub projectinformation subject of the change author information apart from file paths and reviewer activeness.
we built a hybrid approach to combine the proposedsimilaritymodelandthesvmclassifier.finally wetested the performance of revfinder with our approach cormson projectsofgerritandgithub.
we summarized the well known algorithms such as reviewbot revfinder tie correct coredevrec comment network revrec whoreview .
table represents the platforms techniques and metrics used the number ofprojectstestedforanalysisanddataavailability.table7shows the features used incommonly used recommendation algorithms.
thefeaturesarefilepath socialinteraction linechangehistory revieweractiveness subjectofthechange externallibraries technologies commit messages author reviewer workload and project subprojectinformation.
proposedapproach figure shows our proposed hybrid approach corms.
our approach consists of three modules the similarity model the svm model andthecontrollermodule.thedetailsofeachofthesteps ofthe modulesare as follows similaritymodel computesthesimilaritiesbetweenfilepathsalongwithsub projectandauthorinformation.
svmmodel takesthevectorizeddataoftextualcontentthe subjectofthe changeandpredicts the reviewers.
corms controller combines and normalizes the similarity and support vector machine svm model results and filtersoutthereviewersbasedonthereviewer sactiveness.
550esec fse november14 18 singapore singapore praharpandya andsaurabhtiwari mined datapre processed datavectorized data similarity modelsvm model corms controllerfiltered datatraining data testing data cormsadd more reviewers manually add reviewersfeature selection data cleaning subject remove stopwords remove puntuations word lemmatisation file paths authors sub project filter by activeness developer figure proposed hybrid approach corms .
data mining as shown in figure the first step includes the data gathered from mining gerrit or github repositories.
we created two mining algorithms oneformininggerritreviews andanotherformining githubreviews.ourminingalgorithmforgerritandgithubmines thereviewschronologically.weselectedpythontoimplementthese algorithms.wemined30 648reviewsfromgerritandgithub from which reviews from gerrit projects and reviews from githubprojects.
.
data pre processing asshowninfigure4 thesecondstepincludesthepre processed data.
from the mined data we extracted the features such as file path info all reviewer details subject of the change project sub project information last reviewed date authordetails changesizewhichisequivalenttoinsertedlines deletedlines and8 finalreviewersdetailswhovoted 2or 2by makinganimportantdecision.then weremovedthereviewsin whichthechanging sizewasequal tozero.wehave alsoremoved reviewsthathadstatus open or new andhadduplicatevalues.
next we built the reviewer workload dictionary containing the key value pair and the reviewer s total number of ongoing reviews.
weobservedthatthehighestworkloadwasassignedtobots.these botsarenotactualreviewersbutareusedtoverifythetests.hence we removedthesebots from our data.
.
naturallanguage processing nlp and vectortransformation asshowninfigure4 thethirdstepincludesthenlpandvector transformation of the textual content.
the subject of the change contains the textual contents thus it is the most important feature for understanding the developer s semantics and the reason for the change.
lowered case our first pre processing step includes loweringthe textual content.
removal of punctuation we removed all punctuation fromthestringusingthestringlibrary16.forexample for the string there is a tree near the river!
after removing allpunctuation we can get there isatree near the river .
removal of stop words we removed all stop words from the subject of the change using gensim library17.
for example afterremovingstop wordsforthesamestring wecan get there tree near and river .
stringlemmatization weusedstringlemmatizationto reduce the derivationally related forms to a common base formofaword.forinstance am are fallsinthesameclass b while car car s cars cars falls inthe same class car .
removalofcommonwords weidentifiedthemostcommonwordsfromthesubjectfieldbycreatingakey valuepair of each word used in the subject.
here the key represents theword andthevaluerepresentsthefrequencyoftheword usedintheentireproject.then wemanuallyselectedand removedsuchcommonwordsfromthesubjectofthechange field.these wordsare insert update delete add etc.
consequently we have ensured that the remaining words containmeaningfulinformationthroughwhichwecantrain andtest variousmachine learningmodels.
weusedthetf idfvectorizertotransformastringintonumeric vectors.
itcontains the following steps tokenization the first step to implementing tf idf is tokenization whereastringistokenizedintoabagofwords.
findtf idfvalues thetfvaluereferstotermfrequency andcan be calculatedas follows tf num ofinstancesof word winsentence s total num of wordsinsentence s 551corms a github andgerritbasedhybrid code reviewerrecommendation approachformoderncode review esec fse november14 18 singapore singapore idf refers to the inverse document frequency and can be calculatedas follows idf total no.ofsentences no.ofsentences that contain the wordw here theidfvalueofaworddependsuponthetotalnumber ofdocumentsthus itremainsthesamethroughoutallthe documents.onthecontrary tfvaluesforaworddifferfrom documenttodocument.forexample considertwosubject linesfromtables4and5 remove tripleojob from stein only remove tripleo job from ussuri only.
here the word ussuri in the second sentence occurs only once in that sentence andthetotalnumberof wordsinthesecond sentenceis6.hence thetf valuefortheword ussuri for the second sentence is .
also we have two sentences and theword ussuri occursinthesecondsentence.therefore the idfvalueofthe word ussuri is2 .
ourtrainingdataset i.e.
trainreviews determinesthetextvector dimensions.thesedimensionsvariesaccordingtothenumberof reviewsavailableintheprojectsusedforanalysis.bydefault the out of vocabulary oov wordsaregettingignoredbythetf idf model.however theoovwordscanalsobereplacedbytheclosest vocabulary wordbasedonlevenshtein distance18as well.
.
data splitting asshowninfigure4 thefourthstepincludesdatasplitting.finally we split the data into two parts data for training and data for testing.
we define this data as newreviews andtrainreviews .
newreviews arethereviewsforwhichwewanttopredicttheresults andtrainreviews are the reviews on which we can train the model.
here splitting wasdone inchronologicalorder.
.
similarity model asshowninfigure4 inthefifthstep oursimilaritymodelpredicts thereviewersusingthesamestringcomparisontechniquesusedin the state of the art revfinder .
however we extendeditto compute similaritiesbetweenprojectsorsub projectsandauthorinformation.
these code review similarity scores are then propagated to each of the reviewers.
in project or sub project information we onlyconsideredthesub project asprojectinformationismostly thesameingithubprojects.thus weremovedthatconstantvalues andonlyconsideredsub projectinformationaswewantedtobuild our approach for ageneralizedpurpose.
weimplementedthissimilaritymodelinpython.algorithm1 showsthealgorithmofoursimilaritymodel.ittakesthe newreview nrandalltrainreviews asinputandthenextractsthefile paths sub projects authors information from it.
it calculates the similarity score as the combination of all similarity scores of file paths sub projects and authors between each newreview and alltrainreviews.
for computing the similarities this algorithm uses the four string comparison techniques longest common sub sequence longestcommonprefix longestcommonsuffix andlongestcommon sub string.
our file paths and sub project features contain strings separatedby .
similarity model input nr newreview trainreviews output reviewers sortedlistof reviewers assignedwithscore procedure similarityprediction nr trainreviews computes similarity between newreview nr and all trainreviews subprojnr extractsubproj nr authornr extractauthor nr filesnr extractfiles nr whiletr trainreviews do compare withall trainreviews subprojtr extractsubproj tr filestr extractfiles tr authortr extractauthor tr reviewertr extractreviewers tr score dict whilefn filesnrdo whiletn filestrdo score score similarity fn tn end while end while score score similarity subprojnr subprojtr score score similarity authornr authortr normalizationfactor .
summationtext.1v score score score normalizationfactor whiler reviewertr do propagate similarity scores to reviewers involvedinatrainreviewtr reviewers reviewers score end while end while reviewers sortbyscore reviewers end procedure considertwofile paths org com v1 view layout relative r1 rlayout.xml and org com v2 view layout relative r2 rlayout.xml .
the length of the longest common prefix is org com .
the lengthofthelongestcommonsuffixis1 rlayout.xml .thelength oflongestcommonsub sequenceis6 org com view layout relative rlayout.xml .
the length of the longest common substringis3 view layout relative .wehaveconsideredauthor id forauthorinformation as theauthoriduniquely identifiesthe author and there is no meaning of computing similarities between the first name or last name of the authors.
thus if the author id is different i.e.100and102 thenthescorewillbe0foreachofthe four string comparison techniques.
if the author id is the same i.e.
and then the score will be for each of the four string comparison techniques.
finally thesimilaritymodelpropagatesthisscoretoallthereviewerswhoareinvolvedineach trainreviews usingnormalization methodsinsteadofusingthebordacount combinationmethod used in state of the art revfinder .
we defined normalization factor ofadictionary dictas follows normalizationfactor .
summationtext.1v dict 552esec fse november14 18 singapore singapore praharpandya andsaurabhtiwari where vis the values of dictionary dict.
for instance if we have a dictionary with a key value pair ofreviewer score then it sums allthevaluesofthescoreandmeasuresthenormalizationfactor by dividing this value by .
now for normalizing the scores of the reviewers itmultipliesallthereviewers scoreswiththenormalization factor in four dictionaries separately reviewer score dictionaryobtainedfromcomputingsimilaritiesusinglongestcommon sub sequence reviewer score dictionary obtained from computingsimilaritiesusinglongestcommonsub string reviewer score dictionaryobtainedfromcomputingsimilaritiesusinglongestcommon prefix reviewer score dictionary obtained from computing similarities using a longest common suffix.
it then combines all these dictionaries into the final reviewer s dictionary and sorts this set of reviewers based on their normalized scores in descending order.
the final output of this model is a set of reviewers with a score assigned to them.
our results showed that for each newly addedfeature oursimilaritymodelgreatlyimprovestheaccuracies ofstate of the art revfinder .
.
ensemble modeling as shown in figure our sixth step includes the ensemble techniquetopredictthesetofreviewersbasedontheselectedclassification algorithm.
we tested four classification algorithms of machine learning randomforest supportvectormachine svm knearest neighbour and multinomial naive bayes.
our results showed that svm gave the best results when used with the same settings for all the projectsofgerritandgithub.
algorithm2 svm classification model input trainvector trainrev testvector output reviewer procedure svmprediction trainvector trainrev testvector model fit trainvector trainrev reviewer model.predict testvector prediction using svm end procedure algorithm2showsthealgorithmoftheclassificationmodelused inourstudy.weimplementedthesvmclassificationmodel in pythonlanguage.thevectorizedrepresentationofthesubjectand reviewers of all train reviews is taken as input in our prediction model.themodelthenpredicts orrecommends anappropriate reviewerforagivenvectorizedrepresentationofthesubjectofa newreview.
.
cormscontroller asshowninfigure4 intheseventhstepoftheproposedapproach our corms controllerprocessallthe newreviews.
we implemented corms controller in python.
algorithm shows thealgorithm of our corms controller.it takes all newreviewsandtrainreviews asinput.thenitconstructsthereviewer activeness by extracting the closed date from all trainreviews and propagating these to all the involved reviewers.
this controller thensortsthisreviewer sactivenessbasedontheirlastreviewed date.thenitprocessesallthenewreviewsandpasseseachofthesealgorithm3 corms controller input newreviews trainreviews output reviewers sortedlistof reviewers assignedwithscore procedure hybridprediction newreviews whiletr trainreviews do cd extractcloseddate tr trainrev extractreviewers tr activeness update activeness trainrev cd end while activeness sortbylastrevieweddate activeness trainvector tfidf extractsubject trainreviews whilenr newreviews do testvector tfidf extractsubject nr revsim similarityprediction nr trainreviews revsvm svmprediction trainvector trainrev testvector reviewer revsim revsvm revfact .
summationtext.1v reviewer reviewer reviewer revfact whiler finalscore do ifactiveness 12then reviewers remove reviewer end if reviewers sortbyscore reviewers end while end while end procedure pre processedreviewstobothsimilarityand svmmodelstoobtain the following sortedlistofreviewers predictedbysimilaritymodel.
reviewer predictedbythe support vector machinemodel.
the corms controller then combines these two results and normalizesthemusingthesamenormalizationfactordefinedinthe similarity model and builds the combined list of a set of reviewers with a final score assigned to them.
it then filters the reviewers based on the reviewer s activeness .
we have chosen months as a thresholdtodistinguishbetweeninactiveandactivereviewers .
in other words we have filtered out all reviewers whose last reviewed period is more than months.
the final output of this modelisthe sortedlistof active reviewers.
experiments and results in this section we evaluate and report the results of the experimental study conducted to assess the performance of corms.
our experimental environment includes gb of gpu memory and gb ofram.
.
experimentalsetup we searched the top projects on github and gerrit and selected from gerrit and from github .
we selected more projects fromgithub byanalysing thecomments and commenters contributions to the project where the reviewer assignment problem was found.
we mined reviews from these selected projects of both gerrit and github from to .
for the processing 553corms a github andgerritbasedhybrid code reviewerrecommendation approachformoderncode review esec fse november14 18 singapore singapore table statistics ofthedata collected fromoss s.no.
project revi.
files re.
avg.
re.
go .
eclipse .
qt .
openstack .
android .
libreoffice .
unlegacy .
cloudera .
opencord .
chromium .
twbs .
joyent .
bssw .
14renovatebot .
shopify .
16nix community .
getsentry .
18fullstorydev .
nodejs .
h5bp .
of the textual content we use the gensim17library for removing stop wordsand wordnetlemmatizer libraryofnltk19forword lemmatizationand string16libraryforremovingthepunctuation.
the state of the art revfinder andtie used the datasets provided by thongatanunam et al.
which contain a total of reviews mined in time period .
these approaches have experimented with four projects of gerrit openstack libreoffice qt and4 android.theproposedapproach corms examinestheauthor sinformationandthesubjectofthechange information whichisnotavailableinthedatasetprovidedbythongatanunam et al.
.hence we createda new datasetbymining from both gerritandgithubplatforms.
statisticsofcollecteddata wehaveselected20projectstoanalyse corms and we selected ten projects from gerrit and ten projects fromgithub.ourselectedgerritprojectsare1 openstack libreoffice qt android go eclipse unlegacy cloudera opencord and chromium.
while our github projects are asfollows twbs joyent jquery4 nodejs shopify h5bp nix community bssw renovatebot fullstorydev.table8showsthestatisticsofthecollecteddatausedtoanalyse cormsfrom to .
the column revicorrespond to the total number of collected reviews including both the closed and open reviews.
the columns filescorrespond to the total number of modified files re.correspond to the total number of unique codereviewers and avg.re.
correspondtotheaveragenumberof code reviewers per review.
the first ten projects correspond to the projectsfrom gerrit andthe last tenprojectsbelong to github.
.
evaluationmetrics we evaluate the performance of the cormsby computing the top kpredictionaccuracyandthemeanreciprocalrank mrr commonly usedinmcrfor evaluation.
top k. if we have a sorted list of reviewers then top k accuracy denotes the percentage of reviewers present at the top k positions in this sorted list.
the top k accuracy is computed as follows top k accuracy summationtext.
r rispresent r k rev where revrefers to a set of reviews and ispresent r k returns ifatleastoneoftheactualreviewersriscorrectlyrecommended atthetop kposition otherwisereturns0.inthiswork wehave consideredkas1 5and10.thevalueofkisdirectlyproportional to the performance ofthe recommendation technique.
.
.
mean reciprocal rank mrr .
mrr corresponds to the averageofthereciprocalranksofasetofrecommendations.itdescribes themeanpositionoftheactualreviewerinthesortedlist.themrr iscomputedas follows meanreciprocal rank rev r r1 rank r slist r where revrefers to a set of reviews and rank r slist r returns the position of a reviewer r present in the sorted list slist.
hence the outcomeof rankwillbe0ifnoreviewersarepresentinthelist otherwise if the reviewer appears in the top positions then rank will be near to and if the reviewer appears far from the top then rankwillbe near to .
.
research questionsandanalysis here we present the results of an experimental study to answer the twoformulatedresearch questions rqs .
rq1 howefficientiscormsinrecommendingreviewersfor reviewing the code?
what is the performance of corms in comparisonwith thestate of the art revfinder?
motivation inthisrq weevaluatetheperformanceof corms in comparison with the state of the art revfinder .
as the better performance cormscan achieve the more benefits cormscan give to its users.
approach we compare cormswithrevfinder and evaluate themon20projectsofgerritandgithub andmeasurethemrr andtop k prediction accuracies k and1 .
results we defineimprovement as improve extendaccuracy origaccuracy origaccuracy table shows the accuracy comparison between the corms andstate of the art revfinder forthetop kandmrrvalues.here column rev correspondstotheaccuraciesof revfinder and ext corresponds to the extended accuracies of corms.
we observe thatcormsoutperformsstate of the art revfinder byasignificant margin.onaverageforthe20projects cormsachievestop top3 top top 10andmrraccuraciesof45.
.
.
.
and0.
whichimprovesthestate of the art revfinder by44.
.
.
.
and .
respectively.
here the improvement of accuracies of top k prediction reduces as the k value of topk increases.
the reason for that is greater the k value the more accuracywillbe there andthus improvement willbe less.
554esec fse november14 18 singapore singapore praharpandya andsaurabhtiwari table accuracycomparison cormsvsrevfinder top top top top mrr no project extrevimp extrevimp extrevimp extrevimp extrevimp go .
.
.
.
.
.
.
.
.
.
.
.
.
.
eclipse .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
qt .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
4openstack .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
android .
.
.
.
.
.
.
.
.
.
.
.
.
.
6libreoffice .
.
.
.
.
.
.
.
.
.
.
.
.
unlegacy .
.
.
.
.
.
.
.
.
.
.
.
.
cloudera .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
9opencord .
.
.
.
.
.
.
.
.
.
.
10chromium .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
twbs .
.
.
.
.
.
.
.
.
.
.
.
.
.
joyent .
.
.
.
.
.
.
.
.
.
.
.
.
bssw .
.
.
.
.
.
.
.
.
.
.
14renovatebot .
.
.
.
.
.
.
shopify .
.
.
.
.
.
.
.
.
.
.
.
.
.
16nix community .
.
.
.
.
.
.
.
.
.
.
.
.
.
getsentry .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
18fullstorydev .
.
.
.
.
.
.
.
.
.
.
.
.
nodejs .
.
.
.
.
.
.
.
.
.
.
.
h5bp .
.
.
.
.
.
.
.
.
.
.
.
avg .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
for gerrit we observe cormsachievesthe most improvement overstate of the art revfinder intheproject eclipse itimproves revfinder by204.
.
.
.
and55.
interms of top top top top and mrr accuracies respectively.
forgithub weobserve cormsachievesthemostimprovement overstate of the art revfinder intheproject shopify itimproves revfinder by100 .
.
.
and43.
interms oftop top top top andmrr accuracies respectively.
table performance of corms with normalization and bordacountscore propagation techniques bordacount normalization top .
.
top .
.
top .
.
top .
.
mrr .
.
table shows the evaluation of the performance of corms with two score propagation techniques borda count used intherevfinder andourproposedapproachuses normalization technique.
we can notice that for the projects cormswhen used with the normalization technique achieves the top andmrrvaluesof44.
.
.
.
and18.
respectively whichperformsbetterthanthebordacountcombinationtechnique.
rq2 howmuchimprovementcormsgainwitheachnewly added feature overstate of the art revfinder?
motivation in this rq we intend to investigate the improvement intheperformanceofcormsforeachnewlyaddedfeatureover therevfinder .
approach to answer rq2 we compare the results of the two prediction models of corms svm model and similarity modeltable11 measurementofaccuracygainforeachnewlyadded feature svmmodel subject similarity model file path subproject author overall top k gain .
.
.
mrrgain .
.
.
gerrit top k gain .
.
.
mrrgain .
.
.
github top k gain .
.
.
mrrgain .
.
.
withstate of the art revfinder .weevaluatetheseapproacheson 20projectsofgithubandgerritandrecordthetop kprediction accuracies andmrr values.
results we define accuracy gain as the difference between the accuracies of our models built over top of revfinder and stateof the art revfinder .
also we define top k gain as the average accuracygainoftop top andtop 1accuraciesofamodelfor all the projects w.r.t revfinder .
similarly we define the mrr gainastheaveragemrrgainofamodelforallthe20projectsw.r.t revfinder .
table presents the measure of accuracy gain for each newlyaddedfeature subject svm model predicting reviewers based onthe textualcontent subject whenaddedwiththe revfinder overall improvesthestate of the art revfinder intop kandmrr accuracies by7.
and6.
respectively.
sub project similarity model computing similarities of file paths and sub projects improves the performance of revfinder intop kandmrraccuraciesby8.
and7.
respectively.
author similarity model computing similarities of filepathsandauthorsimprovestheperformanceof revfinder in top kandmrraccuraciesby12.
and11.
respectively.
555corms a github andgerritbasedhybrid code reviewerrecommendation approachformoderncode review esec fse november14 18 singapore singapore state of the art revfinder consideronlythefile pathinformation.
hence it cannot be able to predict reviewers for the newly created file where no file path information is available.
corms considerotherfeaturessuchasauthors subjectofthechange and sub project details for predicting reviewers.
here we can observe that each of the newly added features sub projects authors and subjects of cormsimproves the performance of revfinder .
.
threatsto validity threats to construct validity refer to the selection of evaluation criteria.
we have used pre defined top k prediction accuracies and mrr commonly used to evaluate the effectiveness of mcr recommendationtechniques andvariousautomatedsoftwareengineeringtechniques .
hence the possibility ofevaluation biasisvery less.
threats to internal validity refer to the code selection and check forerror.wehavechecked tested debuggedourcode andensured itwouldrun.
however there isstillapossibilityoferrorsthatwe missed.also inthe cormsapproach thedataneedstobeupdated daily weekly ormonthlybasedontheorganization srequirements and the frequencies of new reviews updated on the project.
so our classificationmodelneedstobetrainedforeverynewdatacycle.
though carefullydone one can arguefor apotentialbiashere.
another threat external validity may be related to the generalizability of results.
mining data from open source repositories arechallenging especiallyfromgithub.forinstance ingithub weneedtomakemorenestedapi callstominecodereviewsand reviewerdetails complicatingthemining.however wecanmine manyreviewsinasingleapicallingerrit.wehaveanalyzed30 reviewsfrom20open sourceprojectsfor2020to2021fromboth gerritandgithubplatforms.
the currently used dataset20can be further improved by analyzingmorereviewsfromgerritandgithub.thisdatasetcontainsthe reviews minedfrom a totalof projectsfrom gerrit andgithub out of which we used projects in this paper to test the performance of cormsandrevfinder .
discussions a limitation of all such studies related to code reviewer recommendation isestablishing the groundtruth for evaluatingthe recommendation approach.
the reviewer who did the code review may not have been the best to review and finding out the best reviewerfromthesetofrecommendedreviewerswouldbeinteresting.
generally reviewers are categorised into maintainers or final reviewers and commenters.
to analyse whether corms recommends a wide range of reviewers or who is being recommended as reviewers commentersormaintainers weselectedfiveprojects alreadyusedintheexperimentalsetup fromgerritandgithub.
table shows the analysis ofthe number of predicted reviewers maintainers and commenters in revfinder andcormsfor the five projectsofgerritandgithub.thecolumn rev showsthetotal numberoftestedreviews.thecolumn pred revi showsthetotal number of predicted reviewers.
the column rf shows the results forrevfinder .thecolumn co showstheresultsfor corms.the column final shows the total number of maintainers or final andcommenters inrevfinder and corms pred revi final comm project revrf co rfcorfco openstack joyent nodejs fullstorydev getsentry reviewers .thecolumn comm showsthetotalnumberofcommenters.here wefoundthatourapproach cormsrecommends a wider range of reviewers than revfinder .cormsrecommends more maintainers or final reviewers than the revfinder .
both revfinder andcormspredicts more number of maintainers or final reviewers thanthe commenters.
this work s primary focus is accessing performance of corms for both gerrit and github oss platforms.
the proposed approach is a conceptual replication of revfinder and the primary contributionisimprovementsandamorecomprehensiverangeoftestingfor both oss platforms.
we highlighted how each of the newly added features projects sub projects author information subject for the approach positively improves the accuracy of revfinder in rq1 and rq2 .
our results also showed that the author s information is animportantfeatureandimprovestheoveralltop kaccuracyby .
.however infuture weplantoconductempiricalstudieswith developers reviewerstotesttheeffectivenessofcormsinpractice.
the run time performance of the corms is time consuming for a newreviewrequest.
the trainedmachinelearningsvmmodelin cormsissavedinafileandrestoredtoreusethetrainedmodel on the new data.
subsequently the similarity model metrics are computed by comparing each new review with all the trainreviews.
after combining both the models the reviewer prediction takes o n time for each new review request which is the same as therevfinder .
conclusion futurework weproposedahybridapproach corms whichworksonsimilarity analysis to compute similarities among file paths projects subprojects author information and prediction models to recommend reviewers based on the subject of the change.
we conducted a detailed analysis on the widely used projects of both gerrit and githubtocompare our resultswith the state of the art revfinder .
our results show that on average cormscan achieve top top top and top accuracies and mean reciprocal rank mrr of .
.
.
.
and .
for the projects which improves thestate of the art approach revfinder by44.
.
.
.
and18.
respectively.
it would be interesting to investigate the results of the combination of our approach with tie.
as the proposed methodology does not consider the workload issues and the effect of social collaborationsbetween thedevelopers hence plan toconsideritfor future work.
data availability all dataset created and used in the study for analysis is openly available onfigshare.
556esec fse november14 18 singapore singapore praharpandya andsaurabhtiwari