how practitioners expect code completion?
chaozheng wang the chinese university of hong kong hong kong china adf111178 gmail.comjunhao hu peking university beijing china junhaohu stu.pku.edu.cncuiyun gao the chinese university of hong kong hong kong china cuiyungao outlook.com yu jin tencent inc. guangzhou china lenajin tencent.comtao xie key lab of hcst pku moe scs peking university beijing china taoxie pku.edu.cnhailiang huang tencent inc. guangzhou china eraserhuang tencent.com zhenyu lei tencent inc. guangzhou china rainylei tencent.comyuetang deng tencent inc. guangzhou china yuetangdeng tencent.com abstract code completion has become a common practice for programmers during their daily programming activities.
it automatically predicts the next tokens or statements that the programmers may use.
code completion aims to substantially save keystrokes and improve the programming efficiency for programmers.
although there exists substantial research on code completion it is still unclear what practitioner expectations are on code completion and whether these expectations are met by the existing research.
to address these questions we perform a study by first interviewing professionals and then surveying practitioners from it companies about their expectations on code completion.
we then compare the practitioner expectations with the existing research by conducting a literature review of papers on code completion published in major publication venues from to .
based on the comparison we highlight the directions desirable for researchers to invest efforts toward developing code completion techniques for meeting practitioner expectations.
ccs concepts general and reference empirical studies computing methodologies artificial intelligence .
keywords code completion empirical study practitioner expectations corresponding author.
the author is also affiliated with peng cheng laboratory and guangdong provincial key laboratory of novel security intelligence technologies.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than the author s must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse december san francisco ca usa copyright held by the owner author s .
publication rights licensed to acm.
acm isbn .
.
.
.
reference format chaozheng wang junhao hu cuiyun gao yu jin tao xie hailiang huang zhenyu lei and yuetang deng.
.
how practitioners expect code completion?.
in proceedings of the 31st acm joint european software engineering conference and symposium on the foundations of software engineering esec fse december san francisco ca usa.
acm new york ny usa pages.
introduction code completion predicts code tokens or statements that programmers may input in their daily programming activities.
it aims to substantially save keystrokes and improve coding efficiency for programmers.
as reported by li et al.
with code completion programmers can averagely save .
keystrokes for completing a token.
code completion has become the most frequently used feature of modern integrated development environments ides and arouse increasingly high attention from both academia and industry .
the research of code completion has roughly progressed through three stages over time.
first traditional techniques of code completion adopt static analysis and ineffectively provide completion candidates according to pre defined rules which generally require non trivial manual efforts.
second machine learning ml based techniques such as n gram models are proposed to learn code statistics to improve completion accuracy.
with the development of deep learning dl various dl based techniques have been proposed to implicitly learn patterns in source code and achieve state of the art performance.
third some dl based techniques employ pre trained language models plms such as bert and gpt for code completion because plms are trained on large scale corpora and can encode a large amount of code related knowledge into their parameters.
besides accurately predicting next tokens plm based techniques can also perform well in predicting code statements.
to investigate what practitioner expectations are on code completion and whether these expectations are met by the existing research in this paper we follow a mixed method approach which includes three stages.
first we start with semi structured esec fse december san francisco ca usa chaozheng wang junhao hu cuiyun gao yu jin tao xie hailiang huang zhenyu lei and yuetang deng interviews with professionals with an average of .
years of working experience in software industry.
through the interviews we qualitatively investigate the state of code completion practices issues faced by our interviewees when using code completion tools and their expectations on code completion.
second we then perform an exploratory survey with practitioners from it companies to quantitatively validate our findings from the first stage.
third we conduct a literature review of research papers published in major venues from to and compare the techniques proposed in the papers against the practitioner expectations.
specifically we investigate the following four research questions rq1 what is the state of code completion practices?
this research question studies code completion practices including code completion tools and usage scenarios the scenarios that practitioners use code completion .
for completion tools participants indicate that they often use code completion in daily programming.
meanwhile participants indicate that built in tools in ides e.g.
tools built in pycharm are the most pervasively used code completion tools.
for usage scenarios to facilitate the investigation we broadly divide the scenarios into two categories according to the completion granularity including the token level e.g.
completing a single identifier and statement level e.g.
predicting code blocks .
on average participants express that they use token level completion whereas only participants express that they use statement level completion.
rq2 how important is code completion and what are the issues faced by practitioners when they use code completion?
in this research question we investigate how practitioners perceive the importance of code completion and study the issues faced by practitioners when they use code completion during programming.
for the importance perceived by the practitioners participants agree or strongly agree with the importance of code completion during programming.
for the issues of code completion only participants report no issues.
more than half of the participants consider erroneous completion andpainful tool installation as main issues.
rq3 what are practitioner expectations on code completion?
this research question focuses on practitioner expectations on different granularity levels of code completion techniques including token level and statement level completion.
we investigate the expectations from multiple aspects including usage scenarios evaluation metrics access to service online or offline completion effectiveness and efficiency .
on average and participants expect to use completion under token level and statement level scenarios respectively.
for token level completion participants expect that the results should appear fast.
more than of participants expect the tools to support the completion of identifiers apis and paths respectively.
most participants are satisfied if a suggestion is among the first three candidates.
for statementlevel completion more than of participants expect a tool to complete their current editing statement code skeleton and api arguments.
completion results are expected to appear in less than two seconds.
in addition completion tools are preferred to be locally deployed and installed easily.
rq4 how well does existing research satisfy the practitioner expectations?this research question investigates current code completion research.
we identify papers about code completion techniques among which and papers are about token level and statementlevel completion respectively where four papers can conduct both .
based on a literature review we conclude the overlapping and gap between techniques proposed by the existing research and the practitioner expectations.
for instance most of the proposed token level techniques focus on api recommendationandidentifier completion scenarios being consistent with the practitioner expectations.
however no papers have covered the path completion scenario a scenario valued by participants.
in addition we obtain some findings about the completion efficiency evaluation metrics and access to service.
our research aims to provide future research directions on code completion and help researchers consider the expectations of practitioners when studying code completion techniques.
in summary we make the following main contributions we shed light on practitioner expectations on code completion techniques.
we first interview professionals and then survey practitioners from it companies.
we investigate their opinions on code completion the scenarios that they use for code completion and their expectations on code completion techniques.
we comprehensively review papers on code completion published in major publication venues in software engineering and artificial intelligence fields from to .
then we compare the techniques proposed by the published papers with the practitioner expectations highlighting the aspects desirable to be improved to meet the practitioner expectations.
research methodology in this section we introduce our overall research methodology consisting of three main stages1as shown in figure .
stage .
interviewing professionals about their practices on code completion the issues that they have met and their expectations on code completion tools.
stage .
performing an online survey to validate our findings on the practitioner expectations produced by stage .
stage .
conducting a literature review to analyze whether and to what extent existing techniques have satisfied the practitioner expectations.
.
stage interviews the interview stage serves as a preliminary means to identify the factors related to practitioner expectations on code completion.
in this section we introduce the interviews from three aspects including the protocol interviewees and data analysis respectively.
.
.
protocol.
two authors of this paper conduct a series of inperson semi structured and in depth interviews based on an interview guide to explore the participants practices issues and expectations on code completion.
we continue our interviewing until no new aspects show up.
in the end we invite software 1the interviews and survey in stages and have been approved by the relevant institutional review board irb .
1295how practitioners expect code completion?
esec fse december san francisco ca usa stage interviews semi structured interview interview transcription open card sortingstage online survey questionnaire pilot survey online survey analysisstage literature review paper collection analyze the capabilities of proposed techniques rqsrq1.
practicesrq2.
importance and issuesrq3.
practitioner expectationsrq4.
gap analysis between research and expectationsquestions and descriptions on code completion figure overview of research methodology.
professionals in the interviews and each interview lasts minutes.
in each interview we first ask the interviewees some demographic questions about their background including job roles and working experience.
then we ask the interviewees to freely talk about what they regard as a desirable code completion tool and their expectations of code completion.
in the end we investigate their code completion practices and the issues that they have ever met.
.
.
interviewees.
we invite interviewees from the it industry.
the interviewees are working full time in different roles such as developers and testers.
eventually interviewees from seven it companies agree to participate in the interviews among which work in software development for software testing and for artificial intelligence research.
the working experience of our interviewees varies from years to years with the average working experience of .
years.
.
.
data analysis.
to analyze the interview results following the procedure in previous work the first author of this paper transcribes the interviews and uses nvivo to conduct open coding and generate opinion cards.
then another author verifies the summarized opinion cards and provides suggestions for improvement e.g.
removing the opinion cards that make too general comments on code completion.
after incorporating the suggestions the two authors of this paper separately analyze and sort the opinion cards into groups and label each group with a potential survey description.
to evaluate the level of agreement we calculate cohen s kappa coefficient i.e.
.
of sorting cards between the two authors.
the result indicates a substantial agreement between them.
the two authors discuss their disagreements to reach a common decision.
to reduce the bias of the two authors in sorting cards two other authors of this paper have also reviewed and confirmed the final set of survey descriptions and questions.
after the interviews we derive four code completion practices and six issues.
we summarize three and six usage scenarios for the practitioner expectations on token level and statement level code completion respectively.
furthermore we derive and factors that specifically affect the adoption of token level and statementlevel completion respectively and draw three other general factors of code completion tools.
figure example for illustrating the api argument recommendation scenario in the survey.
.
stage online survey based on the findings gathered during the interview process we conduct a large scale online survey to further investigate and validate the factors of code completion.
.
.
survey design.
the survey consists of different types of questions including single multiple choice likert scale options strongly disagree disagree neutral agree strongly agree and short answer questions.
for each question we add an i don t understand choice to filter the cases in which the participants do not understand our descriptions.
the survey consists of six parts demographics.
we first ask for demographic information of the participants including primary job roles and working experience.
code completion tools.
we ask the participants about the factors of code completion tools.
in particular we investigate the code completion tools they have ever used and their practices on using code completion tools.
code completion usage scenarios.
we investigate in what scenarios practitioners use code completion.
we summarize three scenarios for token level completion and six scenarios for statement level completion.
for each scenario we utilize a screenshot or gif for illustration with an example shown in figure .
the three token level completion scenarios include identifier completion completing the currently tying identifier such as variable names.
api recommendation recommending the api or function to be used such as recommending read csv when typing pd.
in python.
path completion completing the path of a referred file or directory.
the studied statement level scenarios include next statement prediction completing the next statement when finishing the last code statement.
completion of currently edited statement completing the currently edited code statement until the end of the statement.
for instance predict in range n when practitioners input for index in python.
api argument recommendation recommending the arguments to be used in the called function or api as shown in figure .
string completion completing the currently typing string such as logs.
skeleton prediction predicting the skeleton of the code statements to be used.
the scenario requires code completion techniques only to predict functional code and 1296esec fse december san francisco ca usa chaozheng wang junhao hu cuiyun gao yu jin tao xie hailiang huang zhenyu lei and yuetang deng table participants roles working experience role population 1y 3y 5y 10y 10y development ai model design testing architect project manager others leave the detailed values e.g.
string and constant for practitioners to fill in themselves.
block content prediction predicting the statements of a code block such as function and loop block.
importance.
we investigate how practitioners perceive the importance of code completion in this part.
code completion issues.
we investigate the issues faced by the participants during using the code completion tools such as erroneous completion high completion latency high resource consumption and concern about data leak .
practitioner expectations.
we study practitioner expectations on code completion tools of the two granularity levels i.e.
token level and statement level completion.
for each level we ask multiple aspects of the expectations including usage scenarios evaluation metrics access to service intranet internet or locally deployed completion effectiveness and efficiency .
besides we also investigate general aspects that affect practitioner likelihood to adopt code completion tools such as time consumption of tool installation .
at the end of the survey we allow our participants to choose to freely provide their comments advice and opinions about code completion and our survey.
to check participants perceptions about the survey length and clarity of questions we conduct a pilot survey with a small set of practitioners that are different from our interviewees and survey participants before large scale distribution.
after receiving feedback from the pilot survey we make minor modifications to the survey such as reducing the number of questions and incorporating additional images to illustrate usage scenarios resulting in the creation of a final version.
we utilize widely used questionnaire websites to distribute the survey and provide each participant with the opportunity to join a drawing for winning a shopping card.
.
.
participant recruitment.
we contact professionals working full time in it companies in our social networks and ask for their help complete and disperse the survey.
in particular we send invitations to professionals working in microsoft intel tencent alibaba and other it companies.
we finally receive survey responses in total with an average completion time of .
minutes.
among them we discard responses that are completed within two minutes.
the survey results presented in this paper are analyzed from the remaining valid responses.
an overview of the surveyed participants roles and their experience is depicted in table .
most participants are engaged in software development and have years of programming experience.
.
.
result analysis.
we analyze the results based on the question types.
for multiple choice and single choice questions we report the percentage of each selected option.
for likert scale questions we draw bar charts to illustrate the distributions of the likert scores.
for the open ended short answer questions we conduct a qualitative analysis of the results.
besides we drop i don t understand ratings that form a small minority less than of all the received ratings following previous work .
.
stage literature review for this survey we carefully collect papers from relevant international journals and conferences in three steps.
first we search the dblp publication database2using the keyword code comple and setting the default search action as combined dblp search.
since the dblp database uses the partial keyword matching strategy for searching the keyword code comple could stand for code complete code completion complete code code autocompletion and so on which we believe is comprehensive enough to cover a large part of the code completion papers.
the reason for choosing the dlbp database is that our literature review focuses on the paper published in major publication venues of software engineering artificial intelligence and human computer interaction fields.
these venues have already been collected in the dblp database thus we do not involve the more conventional databases.
second we manually filter the results by removing irrelevant papers by reading the title and abstract.
finally we retrieve additional papers by following