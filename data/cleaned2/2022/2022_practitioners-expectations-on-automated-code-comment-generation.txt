practitioners expectations on automated code comment generation xing hu school of software technology zhejiang university ningbo china xinghu zju.edu.cnxin xia zhejiang university hangzhou china xin.xia acm.orgdavid lo singapore management university singapore davidlo smu.edu.sg zhiyuan wan zhejiang university hangzhou china wanzhiyuan zju.edu.cnqiuyuan chen zhejiang university hangzhou china chenqiuyuan zju.edu.cnthomas zimmermann microsoft research seattle usa tzimmer microsoft.com abstract good comments are invaluable assets to software projects as they helpdevelopersunderstandandmaintain projects.h owever due tosomepoorcommentingpractices commentsareoftenmissing or inconsistentwith the sourcecode.
softwareengineering practitioners often spend a significant amount of time and effort reading andunderstandingprogramswithoutorwithpoorcomments.to counter this researchers have proposedvarious techniques toautomatically generate code comments in recent years which can not only save developers time writing comments but also help thembetterunderstandexistingsoftwareprojects.however itis unclear whether these techniques can alleviate comment issuesand whether practitioners appreciate this line of research.
to fillthis gap we performed an empirical study by interviewing and surveyingpractitionersabouttheirexpectationsofresearchincode commentgeneration.wethencomparedwhatpractitioners need and the current state of the art research by performing a literature review of papers on code comment generation techniques publishedinthepremierpublicationvenuesfrom2010to2020.from thiscomparison wehighlightedthedirectionswhereresearchers need to put effort to develop comment generation techniques that matter to practitioners.
keywords code comment generation empirical study practitioners expectations acm reference format xinghu xinxia davidlo zhiyuanwan qiuyuanchen andthomaszimmermann.
.
practitioners expectations on automated code comment generation.in the44thinternationalconferenceonsoftwareengineering corresponding author.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acmmustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
icse may pittsburgh pa usa association for computing machinery.
acm isbn ... .
pittsburgh pa usa.
acm new york ny usa pages.
introduction codecommentsareessentialpartsofsoftwareprojectsandprovide descriptive information about the functionality design rationale and usage of a code snippet .
they help practitioners use understand and maintain software projects .
well commented source code improves project readability and developerproductivity.despitetheintrinsicvalueofcodecommentsduringsoftware developmentandevolutionactivities thecreationandmaintenance of comments are often neglected.
to address these issues different approachesandtoolshavebeenproposedtogeneratecomments from source code automatically .
these techniques traditionally rely on manually crafted templatesandinformationretrieval ir techniquestogeneratecomments.template basedapproachesmainlyrelyonelaborateheuristicsandtemplatesfordifferenttypesofprogramstogeneratedescriptive comments .
however defining a template requires substantialhumaneffortandextensivedomainknowledge.ir based approachesmainly extracttermsfromsource codeandthenorganizethesetermsforgeneratingcomments .besides some studies generate comments by retrieving similar code snippetsand using their corresponding comments for comment generation .inrecentyears manyresearchershavetakenadvantageofdeeplearningtechniquestogeneratecommentsbylearningfromlarge publiclyavailablecoderepositories .these techniques apply neural machine translation models to learn to translate source code to comments .
despitenumerousstudiesoncodecommentgeneration unfortunately fewstudieshaveinvestigatedtheexpectationsofpractitionersonresearchincommentgeneration.itisunclearwhether practitionersappreciatethislineofresearch.eveniftheydo itis unclear whether they would adopt code comment generation tools what factors affect their decisions to adopt and their minimum thresholdsforadoption.thepractitioners perspectiveisimportant to help guide software engineering researchers to create solutions that satisfy developers.
in addition some gaps between practitioners expectations and research have not yet been investigated.
to gain insights into practitioners expectations on code comment generation we first conducted semi structured interviews ieee acm 44th international conference on software engineering icse authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa xing hu xin xia david lo zhiyuan wan qiuyuan chen and thomas zimmermann with16 professionalsfromvarious companies.throughthe interviews we qualitatively investigated the commenting practices and issues that our interviewees experienced in software development andtheirexpectationsoncodecommentgeneration.then wevalidated our findings through a survey answered by professional developersorotheritprofessionalsfrom26countriesacrosssix continents.afterthesurvey weperformedaliteraturereviewofthe state of the art papers.
we then compared techniques proposed in the papers against the criteria that practitioners have for adoption.
inparticular weinvestigatedthefollowingfourresearchquestions rq1 what is the state of code commenting practices and what are the issues?
thisresearchquestionstudiescodecommentingpracticesand issues that practitioners experienced during software development.
and of the survey respondents often write commentsand are often confused when reading code without comments respectively.
meanwhile and respondents considered lack of comments andgeneric comments as the main issues respectively.
rq2 are automated code comment generation tools usefulfor practitioners?
this research question investigates practitioners willingness toadoptcodecommentgenerationtechniques.
ofthesurvey respondents think code comment generation tools are worthwhile and essential for them.
of them agree that these tools can help themunderstandthesourcecode especiallyforexistingprojects with fewer comments and improve code readability.
rq3 whatarepractitioners expectationsoncodecommentgeneration tools?
thisresearchquestionfocusesoninvestigatingwhattocomment and where to comment for different granularity level comments thatpractitionersexpect andwhatfactorscanaffecttheiradoption of a comment generation technique.
most participants about expecttoolstogeneratemethod levelcomments.thecommentsshould include information about what the method does i.e.
functionality howtousethemethod and3 whythemethod exists i.e.
design rationale .
the most important locations to be commentedonincludecomplex tricky andnonself explanatory methods.theoptimallengthofageneratedcommentis2 3lines.
before adopting a code comment generation tool the generatedcomments should satisfy the amount of additional information i.e.
amount of information beyond what can be easily gleaned from scanning the source code content adequacy the amount of contentcarriedoverfromtheinputcodetothegeneratedcomments ignoring fluency of the text and conciseness.rq4 how close are the current state of the art studies tosatisfy practitioner needs and demands before adoption?
thisresearchquestioninvestigatesthecurrentstate of the art researchandcomparesthegapbetweenitandpractitioners expec tations.weidentified25papersthatproposedcodecommentgener ationtechniquesand17ofthemgeneratedmethod levelcomments.
mostpapersgeneratedcommentstodescribemethods functionality.however fewpapersgenerated commentswith howto use and why a method exists information.
in addition most papers focus on measuring the overlapped n grams between generated comments and human written comments while it is not preferred by a large majority of our respondents.
also no papers evaluate !
!
figure research methodology overview theamountofadditionalinformation inthegeneratedcomments which most practitioners expect.
ourresearchismeanttohelpresearcherstoconsidertheneedsof practitioners to continue the development of better code comment generationtechniquesthatcaneventuallyresultinhighadoption and satisfaction rate.
this paper makes the following contributions we interviewed professionals and surveyed practitioners frommorethan26countriestoshedlightonpractitioners expectations including their views on the importance of comment generation and their thresholds and reasons for adopting or not adopting such techniques.
we performed a literature review of papers published in the premier publication venues in software engineering and artificialintelligence communities in the last ten years.
then we comparedthecurrentstate of researchwithwhatpractitionerswant and highlighted what can be done next to meet practitioners needs and demands.
paperstructure section2describesthemethodologyofourstudy.
section3showstheresultsofourstudy.wediscusstheimplicationsofourresultsinsection4.section5discussesrelatedwork.section draws conclusions and outlines avenues for future work.
research methodology theoverviewofthemethodologyinourstudyisshowninfigure1 and consists of three stages.
stage interviews with professionals on their practices on commenting issues they face related to code comments and their expectations on code comment generation techniques.
stage anonlinesurveyforconfirmingandextending theconclusionsaboutcodecommentsbasedontheinterview.
stage performaliteraturereviewtoanalyzewhetherandtowhatextent current state of the art research has satisfied practitioners needs and demands.
the interviews and survey were approved by the relevant institutional review board irb .
.
stage interview theinterviewaimstounderstandcommentingpracticesandissues that professionals experience during software development and practitioners expectationsoncodecommentgenerationtools.this section presents the interview process.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
practitioners expectations on automated code comment generation icse may pittsburgh pa usa .
.
protocol.
the first author conducted a series of face to face semi structured in depthinterviews basedon aninterview guide toenableadetailedexplorationoftheparticipants viewsandexperiences.wedevelopedtheinterviewguidethroughabrainstorming process.weinvited16softwarepractitionerstoparticipateinthe interviews from it companies worldwide.
each interview took minutes.
in the remainder of the paper we denoted these interviewees as i1 to i16.
each interview had three parts.
in the first part we asked some demographicquestionsabouttheinterviewee sbackground e.g.
jobrole lengthofworkexperience andteamsize .inthesecond part weaskedopen endedquestionsaboutwhattheyconsidertobegood badcodecomments.thispartaimedtoallowtheinterviewees to speak freely about their opinions and experience without theinterviewer biasing their responses.
in the third part we askedthe interviewees to discuss the commenting practices and issuesthat they faced related to code comments.
we also asked about theimportanceofautomatedcommentgenerationtoolsandtheir expectations on these tools.
attheendofeachinterview wethankedintervieweesandbriefly informed them of our next plan.
.
.
interviewees.
we invited professionals from our networks in thesoftwareindustrywhowereworkingfulltimeindifferentroles e.g.
developersandarchitects toparticipateintheinterviews.we sent 20formal invitationsto invitepotential interviewees and interviewees agreed to participate in the interviews from ten it companiesworldwide.these 16interviewees hadanaverage of4.
years of professional experience in software development min max median .
sd .
.
.
.
data analysis.
thefirstauthoranalyzedtheinterviewsby transcribing them and then performed open coding to generatecodesoftheinterviewcontentsusingnvivoqualitativeanalysissoftware .
then the second author verified the initial codes createdbythefirstauthorandprovidedsuggestionsforimprovement.afterincorporatingthesesuggestions twoauthorsseparately analyzed the codes and sorted the generated cards into potential statements.
the overallcohen s kappa value between thetwo authors was .
which indicated substantial agreement between the them.
the two authors discussed their disagreements to reach a common decision.
to reduce bias from the two authors sorting the cards to form initial statements they both reviewed and agreedon the final set of statements.
eventually based on the results of the interviews we derived commenting practices commenting issues conclusions for tool importance conclusions for expectations on class method statement comment generation and factors that affect the adoption of code comment generation tools.
.
stage online survey to confirm the statements made by the interviewees i.e.
stage weconductedananonymousonlinesurveywithmoreparticipants.
thesurveyaimedtovalidateandquantifytheobservationsfrom our interviews.
.
.
design.
the survey included different types of questions e.g.
multiple choice questions short answer questions and ratingquestions in point likert scale strongly disagree to strongly agree .
we included the category i don t understand to filter respondents who do not understand our brief descriptions.
the survey consists of six sections demographics thesurveyfirstaskedfordemographicinformation about the participants including country area of residence primary job role experience in years and team size.
commenting practices this section investigated practitioners commenting practices during software development specifically their practices on writing and reading comments thecommenting distributions in different projects as well as the commenting review practices in practitioners teams.
commenting issues thissectionfocusedoncommentingissues that practitioners faced during software development including outdated comments too long comments and redundant comments in projects.
tool importance this section provided respondents with a brief description of code comment generation tools and asked themhowtheyperceivetheimportanceofsuchlineoftoolswith thefollowingstatements i essential iwillusethistoolevery day to help software development or code comprehension ii worthwhile i will use this tool to help software development or codecomprehension iii unimportant iwillnotusethistool iv unwise this tool will harm my or my team s productivity.
then we asked practitioners about the importance aspects e.g.
improving development efficiency and code readability .
practitioners expectations thissectioninvestigatedpractitioners expectationsonthesetools includingpreferredgranular itylevels i.e.
generatingclass level method level andstatementlevel comments .
then we asked what information should be included in generated comments the locations to be commented and preferred lengths for different level comments.
tool adoption this section asked respondents factors that affect their likelihood to adopt a code comment generation technique.
specifically we asked the minimum turing test rate the percentage of generated comments that are indistinguishablefrom human written comments by a human evaluator maximumrevisedrate thepercentageofthecontentinagenerated comment that is needed to be revised before adoption and minimum efficiency the time of a tool to give a recommendation .
attheendofthesurvey weallowedrespondentstoprovidefreetext comments suggestions and opinions about code commenting and our survey.
a respondent may or may not provide any final comments.
we piloted the preliminary survey with a small set of practitioners who were different from our interviewees and survey takers.
we obtained feedback on whether the length of the survey was appropriate and the clarity and understandability of the terms.
we made minor modifications to the preliminary survey based on thereceivedfeedbackandproducedafinalversion.notethatthe collectedresponsesfromthepilotsurveywereexcludedfromthe presented results in this paper.
tosupportrespondentsfromchina wetranslatedoursurvey to chinese before distributing it to them.
we chose to make our survey available both in english on google forms and in chinese on a popular survey website in china .
we chose to make our authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa xing hu xin xia david lo zhiyuan wan qiuyuan chen and thomas zimmermann table participants roles programming experience role population y y y y y development testing algorithm ml model design project manager architect others surveyavailableinchineseandenglishastheearlieristhemost spoken language and the latter is an international lingua franca.
.
.
participant recruitment.
we followed two steps to invite participants wecontactedprofessionalswithinoursocialnetworkfromit companiesandaskedtheirhelptodisseminateoursurvey.specifically wesent invitationstoourcontacts intencent microsoft alibaba google huawei and other companies encouraging themtodisseminateoursurveytosomeoftheircolleagues.by following this strategy we received responses.
we mined github repositories to extract their contributors public email addresses.
specifically we sought repositories with the toppopularopensourceprojects basedontheirnumberofstars .
we sent emails to potential developers with a link to our survey.
we aimed to recruit open source practitioners who have software development experience in addition to professionals workingin theindustry.out oftheseemails wereceivedeight automaticrepliesnotifyingusoftheabsenceofthereceiver two receivers replied that they would not answer any survey.
finally we received responses.
in total we received survey responses.
we discarded two incompletesurveysand13responseswithlessthantwominutes ofsurveycompletiontime.thedatareportedhereinwerefromthe remaining720validresponses.the720respondentsresidedin26 countriesacrosssixcontinents.thetoptwocountrieswherethe respondentscamefromwerechinaandunitedstates.anoverview ofthe surveyedparticipants andtheirexperience wasdepictedin table .
most participants were engaged in software development and had years of professional experience.
.
.
data analysis.
we analyzed the survey results based on the question types.
for multiple choice questions we reported the percentage of each option is selected.
in terms of open ended questions we analyzed the survey results qualitatively by inspecting responses.tounderstandtrendsinthelikert scalequestions we createdbarcharts manyofwhichareshownintheremainderof thispaper .wedropped idon tknow ratingsthatformasmall minority about of all ratings.replicationpackage.
theinterviewguideandquestionnaireused to run our study are available in our replication package .
.
stage literature review research papers about code comment generation techniques are usuallypublishedinsoftwareengineeringandartificialintelligence fields.therefore wewentthroughfullresearchpaperspublished inicse esec fse ase icpc saner msr icsme tse tosem emse acl ijcai iclr nips andaaaifrom2010to2020.we selectedpapersfromtheaboveconferencesandjournalsastheyare premierpublicationvenuesinsoftwareengineeringandartificial intelligenceresearchcommunities andstate of the artfindingsare published in these conferences and journals.figure comment practices and comment issues table the agreement rate of statement and in terms of practitioners experiences.
statementsexperiences y y y y y .
.
.
.
.
.
.
.
.
.
i often write comments during software development i m often confused when reading code without comments wereadthetitlesandabstractsofallpapersandjudgedwhether each of the papers proposes a new code comment generation techniquethatcanhelppractitionersgeneratecommentsduringsoftware development.
we included papers on ir based code comment generation e.g.
template based code comment generation e.g.
anddeep learning basedcodecommentgeneration e.g.
.
we excluded papers on other types of software documentationgeneration e.g.
commitmessagegeneration and empirical study on comment generation e.g.
.
foreachcodecommentgenerationpaper twoauthorsreadits content and analyzed the capabilities of the proposed technique in terms of the following factors granularity level what to comment where to comment and evaluation criteria respectively.
for example wei et al.
declared that they took the first sentence orlineinjavadocastheoutputoftheirproposedapproach thus we classified its length as one line.
if a paper did not declare the capabilities explicitly the two authors checked the contents and discussed its capabilities.
for example moreno et al.
proposed thefactory stereotype to generate comments for factory class thus we inferred that it satisfied the statement i.e.
commenting at classes with design patterns.
two authors discussed the differences in the capability analysis and confirmed the final result throughfurther paper reading.
among the selected venues we found no commentgenerationpaperinmsrandicsme.wewilldiscussthe literature review results in section .
.
results weexplaintheresultsofresearchquestionsthatinvestigatecomment generation techniques from the perspective of practitioners.
.
rq1 commenting practices and issues inrq1 weexploredcommentingpractices includingpractitioners practicesonwriting readingcommentsduringdevelopment quantity and quality of comments in their projects and the commentingreviewpracticesintheirteam.besides wealsoreported the main commenting issues that participants frequently face.
figure illustrates respondents rating of some statements related to commenting practices and issues.
.
.
commenting practices.
for developers wefindthatmore than82 participantsoften writecode commentsduring software authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
practitioners expectations on automated code comment generation icse may pittsburgh pa usa development.interestingly almostthesameproportionofparticipants areoftenconfusedwhenreadingcodewithoutcomments.althoughmostparticipantsoftenwritecomments thequantityofcommentsisstillnotenoughfordeveloperstoreadsource code.participants opinionsonwritingandreadingcodecomments arecontradictory.asoneparticipantinoursurveystated everyone wants others to write as many comments as possible but they don t want to write comments .
table illustrates the agreement rate percentageofagreeorstronglyagree ofstatements and interms ofpractitioners experiences.we can findthat there are no clear differences in writing comments for practitioners with different years of experience.
h owever junior practitioners are statisticallysignificantlymoreconfusedwhenreadingcodewithout comments with mann whitney wilcoxon test p value .
.
consideringsoftwareprojects only37 participantsindicate thatthere aremany high qualitycode commentsin theirprojects.
ononehand thequantityofcodecommentswaslimited onthe other hand lots of code comments had various issues making it difficultforparticipantstoinferusefulinformationfromcomments.
in addition of participants agreed that larger projects usually containedmuchhigherqualitycomments.theseprojectsusually neededteamcooperationandhigh qualitycommentscouldhelp toimprovecollaborativedevelopment.intermsofprojects highquality code comments were essential as participants stated in our survey commentsinprojectsareveryusefultounderstandthe code logic especially indispensable for facilitating project handover.
comments can facilitate project maintenance and fault location .
few teams conducted comment reviews during the code review eventhoughcommentqualitywasimportantfordevelopers and software projects.
without comment review issues in code comments cannot be captured in time.
in addition one participant pointedouttheimportanceofcommentsoncodereview as during the development process it is important but not urgent but it is necessary for code review.
for commenting practices participants mainly have two attitudes thumbs up altcommentsare necessary .mostdevelopersthoughtthatcomments were essential and should be provided along with the sourcecode.arespondentsharedher hisexperienceonworking with a legacy system to support the effectiveness of the code comments.
the system has a lot of comments in each program inwhichhundredsoflinesofcommentsaccompanyseveralcode lines.thissystemwasintroducedtohongkonginthe1980sand then moved to guangzhou and beijing.
thanks to the abundant evenredundant comments thelegacysystemisstillmaintainable being running for almost years and it is still the indispensable coresystemofacompany.
therespondentexpressedthattheir experiencemadethemrealizedthebenefitofwritingpropercode comments in the long term and made them optimistic about the future of the comment generation tools.
thumbs down altcommentsare unnecessary .afractionofdevelopersthought code comments were unnecessary and writing self explanatory code was much more important.
as a participant stated source codeisthebestcomments.itismoreimportanttowritecodethat iseasiertounderstand.maintainingthesourceandcommentsat the same time is time consuming and reduces efficiency.
figure tool importance and the importance factors light bulbfinding .
junior practitioners find it harder to read source codewithout comments.
thequantity andquality ofcommentsinsoftwareprojectsarelimitedandfewteamsconduct comment reviews.
.
.
commenting issues.
figure2showedrespondents ratingsof comment relatedissuestheyfacedduringsoftwaredevelopment.
and respondents considered lack of comments andgeneric comments asthemainissues respectively.withoutcodecomments practitioners tend to read the source code and resorted to external sources of information to understand the source code .
one participant stressed the issue by using her his personal experience withoutcodecomments thesourcecodeisnotonlyunreadablebyothers but also may not be understood by myself after a period of time .
genericcomment wasanotherissue duringsoftwaredevelopment.
participantscannotgetusefulinformationfromthecodecomments withoutmoredetails.
outdatedcomments wereperceivedasa frequent issue by almost half i.e.
of the surveyed practitioners.
thisissueoftenoccursduringsoftwaredevelopment.developers may forget or ignore the updates of comments when changing sourcecode .inconsistency betweencodeandcommentwere alsoperceivedasafrequentissuebypractitioners .
ofthe participants thought that redundant comment was a frequent issue.
asone participantstated themore noise theharder itisto notice valuableinformationincomments....redundantcommentsarefar lessintuitivethanlookingatthecode... intermsofthelengthofcode comments only16 ofparticipantsregardedtoolongcommentsasanissue.thisissuemayincreasethetimetounderstandthesourcecode asoneparticipantstressed toolongcommentsmayaffectthe efficiency and i prefer precise and concise comments.
light bulbfinding .
lack of comments and generic comments that do not provide much information are the most frequently encountered issues.
.
rq2 tool importance figure illustrated the percentages of ratings of various categories i.e.
essential worthwhile unimportant unwise and importance factors.
we could notice that most respondents i.e.
gave essential and worthwhile ratings.
around .
of respondents ratedcommentgenerationtoolasan essential toolandwoulduse it every day during software development.
we further investigated the factors that affected the importance of the code comment generation tools.
all factors received similar agreement from participants.
as shown in figure improving authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa xing hu xin xia david lo zhiyuan wan qiuyuan chen and thomas zimmermann code readability agreeorstrongly agree was the most important factor among all importance factors.
comment generation toolscouldhelptoimprovedevelopmentefficiency understandthe sourcecode andimprovecodereadability.asparticipantsstated automated comment generation tool can improve efficiency and productivity if the tool can automatically extract the meaning of the program it will greatly improve the efficiency of code comprehension and to a certain extent can assist in determining whether the program is correct ... it improves code readability and at the same time improve developers coding ability which can help developers write more logically clear code.
in addition a good comment generation tool could also help to check the consistency between code and comments supported by75 ofrespondents andcheckwhetheracodesnippetisselfexplanatory supported by of respondents .
inconsistency betweenthesourcecodeanditscommentwasacriticalissue.agood comment generation tool indicated that it could understand the meaning of the source code.
participants could check the consis tency by comparing the generated comments and existing comments.ontheotherhand awell generatedcommentalsoindicatedthatthegivensourcecodecouldbewellunderstoodbythemachine thus it was very self explanatory.
we also analyzed the reasons why participants thought the tool wasunwiseorunimportant 140participants .thereasonsgiven by them could be grouped into the following categories useless.
some participants thought this tool was not meaningful.asoneparticipantstated commentsofthissort which just restate what the code does in natural language are not useful.
they are redundant with the code itself which a programmer should be able to understand at this level on its own and once created theyriskbecomingoutofdateandinconsistentwiththe actual code.
comments are useful when they include the human insight that is not embodied in the code itself.
not trustworthy.
some participants doubt the accuracy of thetool.asoneparticipantstated thegeneratedcodecomments are probably incorrect and developers who do not write comments will not revise the generated comments.
it will further affect the readability of the code light bulbfinding .
ofthesurveyrespondentsthinkcodecomment generation tools have the potential to be useful for them.
while this finding does not show much these tools would actually help it shows that most developers do not outofhand dismisstheideaofcodegenerationasunneeded.
althoughmostparticipantsthoughtsuchacommentgeneration toolwasuseful fewofthemhadusedsuchatool.accordingtothe 16interviewees only3ofthemhaveusedsuchtoolstogenerate commentsordocumentationforsourcecode.thesetoolshelpthem to generate comment templates and they fill the comment content.
other interviewees have never heard of such comment generation toolsortechniques ...iusedatoolnameddoxygentogenerate documentation according to the comments and i never heard of a tool that can generate comments.
i7 i just used the tool built in the intellij to manage my comments.
when i typed it can generate a template and i write the comment in the template.
i11 figure4 thenumberofrespondentsspecifyingvariouspre ferred granularity levels figure expectations on class level comments .
rq3 practitioners expectations different comment generation techniques generate comments for different granularity levels e.g.
class method and statements.figure illustrated participants preferred granularity levels ongenerated comments.
among all participants and participants preferred generating class level method level and statement level comments respectively.
note that the percentages did not add up to since a respondent could indicate more than one preferred granularity level.
among the three granularity levels method level comments were the most needed comments to begeneratedandasmallnumberofparticipantsneedstatementlevelcomments.inthefollowingpartofthissection wewillreport practitioners expectationsonthesethreelevelsofgranularityof commentsfromdifferentaspects e.g.
whattocomment whereto comment andthe preferredlength.
whattocomment corresponds to the information that generated comments should include before participants adopt this tool.
where to comment corresponds to thelocationthatparticipantsexpectthetooltogeneratecomments.preferredlength aimstoinvestigatepractitionerspreferencesonthe lengths of generated comments.
light bulbfinding4.
method levelcommentsisthemostneededtype of comments.
a small part of participants expect tools to generate statement level comments.
.
.
rq .
expectations on class level comments.
figure illustratesparticipants expectationsonclasslevelcomments including what to comment and where to comment .
what to comment.
wenoticedthatthetop 3mostinformation needed to be commented was functionality how to use a class andtechnical debt.
of them expected the functionality was includedinthegeneratedcomments.functionalitydescriptionwasimportantfordevelopers asoneparticipantstated thecommentis the functionality description of the source code.
it can help developers to understand what the code does... .
the second top information washow to use a class which usually described the expected set up of using the class.
the technical debt such as todo comments authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
practitioners expectations on automated code comment generation icse may pittsburgh pa usa figure expectations on method level comments could be used to track problems developers saw and ideas in the class.
to comment on a class the workflow description was also important for developers and participants expected tools to generateworkflowdiagramsforthem.aclearworkflowdiagram could help developers organize and understand the business logicjustlikeonerespondentstressed forabusinessproject itismore importanttodescribetheworkflowdiagramandtheversionupdates.
theimplementation details received the least agreement among all statements.asoneparticipantstated ...ifthetoolisjusttranslating the code implementation logic there is no different from reading thesource code... .where to comment.
commentingatsuitablelocationswasimportantforcodereadabilityandcodecomprehension.commentingforclasseswithcomplexlogic receivedthemostagreements morethan respondents .accordingtointerviewees complexclasseswerechallengingtounderstandastheyusually havelongcodelength havemanyloopsandconditionalstatements e.g.
if switchstatements have many api invocations.
it is time consuming fordevelopers to read these classes and comments are essential forunderstanding.
the other three types of classes received similaragreements i.e.
and respondents agree that commentsareneededfor classeswithdesignpatterns utilityclasses and user defined exceptions respectively.
classes with design patterns usually had special solutions and algorithms.
utility classes providedmanymethodsformultipleotherclasses sharedcode and could be reused many times in a codebase.
they should be wellcommentedforeaseofcodereuse.
user definedexceptions should be commented the trigger conditions in exceptions.
light bulbfinding .
for class level comments functionality and how touseaclassarethemostimportantinformationthatparticipants expect automated comment generation tool to gener ate.
classes with complex logics and design patterns should be well commented.
.
.
rq .
expectations on method level comments.
figure illustrated participants expectations on method level comments.what to comment.
similar to expectations on class level comments functionality andhow to use a method were the top preferred information that should be included in method level com ments.
participants also provided the least support to comments documenting implementation details.
compared to class level comments fewer participants agreed to generate comments that included aworkflow diagram and highlight technical debt.
participantsagreedtogeneratecommentswith inputandoutput information.parametersandreturntypesweretwoimportantpartsoffigure expectations on statement level comments methods.generatingthe inputandoutput informationwashelpful for developers to call methods correctly.
participants expected a code comment generation tool to generate comments with thedesign rationale that included authors intent and why a method exists.asoneparticipantstated commentshavetobeinsightful and not just describing what the code is comments are meant to provide background to what the code is and why.
of allrespondentssupportedcommentsthatincluded examplecases.
examplecases providedconcretedetailsonhowamethodshould be used.where to comment.
similar to class level comments almost all respondents supported commenting complex methods.
the next important methods requiring comments were those that were non self explanatory supported by respondents .
the next important types of methods requiring comments were tricky method key logic or algorithm method and interfaces.
there was no clear winneramongthesethreetypesofmethods.
trickymethods e.g.
check numbers are equal or not using bitwise xor operators instead of comparison operators usually had special algorithms and othersmightbeconfusedbyauthors intentbehindthesourcecode.
key logic or algorithm methods were mainly for processing business logic and good comments were helpful.
commenting methods in interfaces was essential as they were often invoked by others.
commentingdeprecatedmethodswasalsoconsideredhelpful as supported by of the respondents .
light bulbfinding .
for method level comments information about functionality howtouse inputandoutput anddesignrationale are considered important.
a high proportion of respondentsexpectautomatedcommentgenerationtooltogeneratesuchpiecesofinformation.inotherwords commentsshould explain code from what how and why aspects.
all the differentkindsof methods exceptthedeprecatedmethods received a similar level of support from respondents.
.
.
rq .
expectations on statement level comments.
figure7 illustratedpractitioners expectationsonstatement levelcomments.
what to comment.
similar to class level comments and methodlevelcomments themostinformationshouldbeincludedwas functionalityanddesignrationale.theimplementationdetailswerealso theleastimportantamongallstatements.
techniquedebt andwarning e.g.
don tinputint typevalues receivedsimilaragreements.
where to comment.
of participants agreed to add comments oncomplex code statements.
participants expected this tool generatecommentsfor specialstatements.thesestatementsusually processedspecialbusinesslogic suchas astatementonlyaccepted authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa xing hu xin xia david lo zhiyuan wan qiuyuan chen and thomas zimmermann figure participants expectations on lengths for different granularity comments a evaluation criterion b effectiveness c minimum efficiency figure factors that affect practitioners likelihood toadopt a code comment generation technique.
strings with a special format.
hard coding andtricky statement received88 and89 agreements respectively.
and73 participants rated the regular expressions andlambda expressions that should be commented.
light bulbfinding7.
forstatement levelcomments mostrespondents requiresuchcommentstoinclude functionality anddesign rationale information.
all the types of statements except thelambdaexpressions statement receivedsimilarlevelof support from respondents.
.
.
rq .
preferred length.
figure8demonstratedpractitioners expectationsoncommentlengthofcommentsforcodeunits of different levels of granularity classes methods and statements .
wecouldobservethatmostrespondentssupport2 3linestobethe most suitable length.
for class level comments many participants also agreed to generate comments with lines.
light bulbfinding8.
expecttoolstogeneratecommentswith2 3lines for the three levels of granularity class method statement .
.
.
rq .
adoption factors.
figure illustrated factors that affectpractitioners likelihoodtoadoptacodecommentgeneration tool including evaluation criterion effectiveness and efficiency.
evaluation criteria.
we asked participants opinions on evaluating code comment generation tools.
we observed that the top 3preferredevaluationcriteriawere amountofadditionalinformation i.e.
amount of information beyond what can be easily gleaned from scanning the source code content adequacy i.e.
the amount of contentcarried over fromthe input codeto the generatedcomments and conciseness.
more than participants rated agree or stronglyagreeforthesethreecriteria.
participantscaredabout the fluency and grammaticality of the generated comments.
participants thought the similarity between machine generated commentsandhuman writtencommentswasimportant whilethe overlapped n grams between them received the least support .
effectiveness.
figure b showed the percentages of respondents who were satisfied with different rates.
the satisfaction rate would be80 ifatleast60 generatedcommentscouldpasstheturing test.ifthegeneratedcommentscontained60 contentofthesource code thesatisfactionratewouldbe80 .iftherevisedcontentin the generated comments was no more than the satisfaction ratewouldbe82 .comparedtowritingcomments ifaparticipant couldsave of timeusing thetools thesatisfaction ratewouldbe .efficiency.
figure c showed the maximum amount of time practitioners were willing to wait for a comment generation technique to provide a recommendation.
few respondents were willing to wait more than one minute for a comment generation technique to finish its computation in less than seconds.
.
rq4 current state of the art research at the end of our literature review process we totally identified papers from the premier publication venues in software engineeringandartificialintelligencecommunities.table3showedthe capabilitiesofthestate of the artcodecommenttechniques.the likertscorewastheaveragescoreofdifferentagreements strongly disagree score disagree scores neutral scores agree scores strongly agree scores .granularity level from table we could observe that only one paper i.e.
worked at class level which was the second most preferredoption.mostpapersworkedatthemethod levelgranularitythatwasthemostpreferredoption.severalpapersworkedat the statement level.
we provided more detailed information below class level comments only moreno et al.
proposed a class level comment generation technique.
this work generated functionalitydescriptionsforcomplexclasses e.g.
classthatcon sistsof accessorsandmutators and classeswithdesign patterns.
method level comments papers proposed approaches to generate comments for methods.
most of the proposed tools mainly generated functionality comments that described what a methoddoes.twopapersgeneratedcommentstodescribehowtouseamethod.inaddition threepaperscouldgeneratecomments to explain the design rationale and answer why a method exists.
althoughimplementationdetailswerenotpreferredbyalarge majorityofourrespondents fourpapersproposedtechniquestogeneratecommentswithimplementationdetails.onlyonepaper aimed to generate comments for complex methods i.e.
methods with many api invocations.
statement level comments therewerefourpapersgenerating comments for statements.
these tools generated comments thatdescribedthefunctionalityofstatements.amongthem two authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
practitioners expectations on automated code comment generation icse may pittsburgh pa usa table capabilities of current state of research.
statementlikert scorepapers whatto comment functionality .
how to use this class .28implementation details .43business background .79workflow diagram .69technical debt .88where to comment complex class .
user define d exception .09classwith design patterns .
class level comments utilityclasses .17whatto comment functionality .
how to use this method .
implementation details .
example cases .
input output .
designrationale .
workflow diagram .52technical debt .79where to comment complex method .
tricky method .18deprecated method .93key logic and algorithm method .24methods in interfaces .22nonself explanatory methods .
method level comments other whatto comment functionality .
implementation details .86designrationale .17technical debt .91warning .04where to comment complex statement .
harding coding .21tricky statement .28special statement .28lambda expression .93regularexpression .
statement le vel comments other 1line 3lines 5lines 5lines length other fluency and grammaticality .
contentadequacy .
conciseness .
similarity .
amountof additional information .
evaluation overlapped n grams .
papersaimedtogeneratecommentsforcomplexstatements e.g.
api invocation statements.
light bulbfinding9.
mostpapersgeneratecommentstodescribewhat a code snippet does e.g.
functionality and implementation details while a few papers describe how to use and whyit exists.
considering the types of code units that need to becommentedon moststudiesgeneratecommentsforall types of codeunits.
however commenting atthe right place is far better than commenting anywhere.
preferredlengths astable3showed mostproposedtoolsaimed to generate one line code comments.
only papers proposed tools togeneratedcommentswithmorethanoneline.however 3lines comments were supported by most participants.
light bulbfinding .
there isa greatdiscrepancybetweenthe current tools line and most practitioners expect lines on the length of comments.
evaluation wecouldfindthatmostpapersevaluatethequality of generated comments by computing the overlapped n grams betweengeneratedcommentsandhuman writtencomments suchas bleu meteor and rouge .
these criteria usually involvedautomatedevaluationofgeneratedcomments.unfortunately evaluatingoverlappedn gramswasnotpreferredbyalarge majority of our respondents.
no paper evaluated the amount ofadditional information beyond what can be easily gleaned fromscanning the source code which most respondents expected to be used to evaluate the generated comments.
there are and 3papersthatevaluatedtheeffectivenessoftheproposedtoolsin terms of content adequacy conciseness similarity and fluency and grammaticality respectively.
light bulbfinding11.
mostpapersfocusonmeasuringtheoverlapped n grams between generated comments and human written comments that is not preferred by a large majority of ourrespondents.
the criterion amount of additional information i.e.
amountofinformationbeyondwhatcanbeeasily gleaned from scanning the source code that practitioners valued most is ignored by all studies.
discussion .
implications our results highlight a number of points to be further discussed and several implications for the research community .
.
comment completion tools.
inadditiontogeneratingcommentsfromsourcecode manydevelopersalsoexpectatoolthat cancompletecommentswhiletheyarewritingcomments.oneconcernof practitionersaboutcomment generationtoolsis thatthey have to spend additional effort to check if the generated comments can express the source code.
in fact our participants mentioned this concern e.g.
i don t believe this tool can generate correct comments thusihavetodouble checkthegeneratedcomments.compared with writing comments myself the checking process is more timeconsuming.
i2 acommentcompletiontoolcanalleviatethisissue and developers can choose comment recommendations e.g.
the next token phrase and even sentence while writing comments.
it can not only speed upthe commenting process but also allow the developer to choose the content of the comments.
as one practitionerstated insteadofacommentgenerationtool iexpectatool that can complete comments during the development just like the code completion tools in ide.
in this way i can write comments more efficiently.
i2 .
.
identifying where to write comments.
according to the replyofourintervieweesandrespondentsofoursurvey toomany comments are also harmful to code readability and understanding.fromtheliteraturereview wecanobservethatmostpapersgeneratecommentsforanycodesnippetsexceptconstructorsor testcases .however respondentsexpecttoolstogenerate comments for complex and non self explanatory code instead ofany pieces of code.
they point out that it is unnecessary to gen erate comments for source code that is easy to understand.
it is challenging for existing techniques to generate accurate comments for a complex piece of code with long lengths many api invocations andmanyconditionalstatements.thus commentgeneration techniques should by improved to generate accurate comments for particular locations that practitioners expect.
.
.
describing why a code snippet exists.
inadditiontodescribing whata codesnippet doesand how touse it codecomments should describewhyacodesnippetexists i.e.
thedesignrationaleandtheintentofadeveloper.however fewstudiescangeneratecomments withthisinformation.thisisalsoanimportantfactorasoneparticipantstated agoodcommentexplains why not how.
acomputer authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa xing hu xin xia david lo zhiyuan wan qiuyuan chen and thomas zimmermann is not able to explain why.
only a human can do that.
to generate a comment automatically means that a program must understand the author sintent.thiswouldrequireartificialintelligence.
thus to improve the trustworthiness of comment generation techniques these techniques should have to mine the intent behind the source code.
.
.
evaluation criterion.
evaluation criterion is another important factor that should satisfy practitioners expectations.
existing studiesusuallyevaluatethegeneratedcommentsbycomparingthe generated comments with human written comments in terms of overlapped n grams such as bleu scores and rouge .
however theoverlappedn gramsistheleastimportantamongallevaluationcriteria.practitionersexpecttoevaluatetheamountofadditionalin formation whereasnoneofthecollectedpapershasmentionedthis metric.
in addition other metrics such as turing test passing rate revisedrate andtime savingrate arealsomissinginpublications.
.
.
detecting inconsistencies between comments and source code.
among all commenting issues we highlighted in our survey inconsistency between comments and source code is not the most frequentlyencounteredissues butisthemostseriousissue.accord ingtotanetal.
manysoftwarebugsarecausedbyamismatch between programmers intention and code s implementation.
from our survey respondents agree that a good comment generation tool can help to check the consistency between comments and code.
a tool that can detect inconsistency and recommend a good comment simultaneously is needed by practitioners.
.
.
checking if the source code is self explanatory.
writingselfexplanatory code is a common practice for developers.
during the developmentprocess developersusuallycheckifthecodeisselfexplanatory.i3stressedthatagoodcommentgenerationtoolcan also help her him to check the code automatically for me a commentgenerationtoolcouldnotonlyhelpmetowritecommentsand understandprograms butalsocancheckifmycodeisself explanatory.
if the generated comments can express my code it means that my code can be comprehended by machines thus indicates that the code is self explanatory.
i3 .
threats to validity itispossiblethatsomeofoursurveyrespondentsdonotunderstand code comment generation techniques or our questions well and thustheirresponsesmayintroducenoisetothedatathatwecollect.
to reduce this threat we drop responses submitted by people whoareneitherprofessionalsoftwareengineersnorparticipantsof open source projects.
we also drop responses by respondents who completethesurveyinlessthantwominutes.still wecannotfully ascertain whether participant responses are accurate reflectionsof their beliefs.
this is a common and tolerable threat to validity in many past studies about practitioners perceptions and expectations e.g.
which assume that the majority of responses truly reflectwhatrespondentstrulybelieve.anotherthreatisthatour participantsmaynotberepresentationsoftypicalsoftwareengineersandthatasresultourfindingsmaynotapplytoothers.since we surveyed employees of many software companies as well as open source we believe this is a minor threat for our study.
related work the two major lines of research related to our work are i developingtoolsandapproachestoautomaticallygeneratecodecommentsand ii empiricallyinvestigatingsoftwaredocumentationpractices.
.
automated code comment generation there has been much work proposing techniques to support the automatedgenerationofcodecomments.thesetechniquesvary frommanually craftedtemplates irtechniques to deep learning based models .
sridhara et al.
and moreno et al.
define heuristics and stereotypes to select the information and create summariesthrough manually crafted templates.
ir based approaches usually leverage ir techniques suchaslsiandvsm tochoosetoptermsfromgivencodesnippets.
some researchers retrieve a similar code snippet from a codebase and use its comment to generate comments.
many neural networkshavebeenproposedtogeneratecommentsbytraining on large scale code corpora in recent years.
iyer et al.
propose anencoder decoderframework togeneratecommentsfor c and sql statements.
inspired by the neural machine translation hu et al.
proposethedeepcomtogeneratecommentsforjavamethodsbytheseq2seqmodel.tointegratethestructure informationofthesourcecode huetal.
andleclairetal.
proposecombiningthesequentialastinformationandsemanticinformation togethertogeneratecomments.chenetal.
exploitedcomment categories to boost code summarization.
in addition some studies combinethesethreetechniques includes templates ir and neural networks.
.
studies on documentation practices studiesondocumentationpracticesarehighlyrelatedtothiswork .
some studies focused on empirical research of general software documentation aspects including tutorials logs and code comments .
table shows an overview ofempiricalstudiesonsoftwaredocumentationpractices.forexample aghajanietal.
analyzedtheissuesindifferenttypesof software documentation by mining open source software repositories and artifacts related to software documentation.
they also presentedpractitioners perspectivesonsoftware documentation bysurveyingsoftwarepractitioners.somestudiesinvestigateda specifictypeofdocumentation.forexample headetal.
investigatedtheinformationthatmaybemissingfromapidocumentation and provided an understanding of trade offs of improving miss ingdocumentationinheaderfiles.sohanetal.
anduddinet al alsoinvestigatetheapidocumentation.alsuhaibanietal.
conductaquestionnairewithsoftwaredeveloperstoanalyzethemethod names.safwan and servant investigatedhowdevelopersdecomposetherationaleofcodecommits.alsorelatedare studies that investigated comment types .
pascarella et al.
focus on analyzing the comment types that developers write in sourcecodefilesandautomatingclassifyingcodecomments.thesestudiesmainlyinvestigatedthedocumentationpracticesandissues.
in addition they are limited in analyzing what and where t o commentthatdevelopersexpectfordifferenttypesofcomments.
different from the afor ementioned prior works we not only reveal the issues with code comments but also provide detailed expectationsthatdevelopershavetoimprovethecommentgeneration authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
practitioners expectations on automated code comment generation icse may pittsburgh pa usa table summary of previous works on software documentation practices study artifacts methodology summary of findings fluri et al.
code comments investigationwiththreeopensourcesystemswhen code and comments coevolve both are changed in the same revision of comment changes are done in the samerevision as the associated source code change.
but code and comments rarely co evolve uddinet al.
api documentation questionnaire with software professionalsrespondentsprioritizedaddressingfivecontent relatedproblems including incompleteness ambiguity unexplained examples obsoleteness and inconsistency pascarella et al.
code comments exploratory investigation on six major java oss systemsclassify comments into inner categories and top categories and themost prominent category ofcomments summarizes the purpose of the code sohanet al.
usage examples in api documentationstudy with developers rest api client developers face productivity problems with usingcorrectdatatypes dataformats requiredhttpheaders and request body when documentation lacks usage examples.
headet al.
api documentation for c interviews with developers and api maintainersupdating documentation may provide only limited value fordevelopers while requiring effort maintainers don t want to invest.
safwan and servant code commits interviewswith20softwaredevelopers and questionnaire with developerssoftwaredevelopersdecomposetherationaleofcodecommits into separate components and the most frequent components are committer modifications and location.
aghajani et al.
softwaredocumentation qualitativelyanalyze878artifactsfrom open source software repositoriesbuilt163typesofdocumentationissuesandfrequentissuesrelated to the correctness up to dateness and completeness of the information reported in the documentation.
stapleton et al.
code comments humanstudyinvolving45bothuniversitystudentsandprofessionaldevelopersparticipants performed significantly better using human written summaries versus machine generated summaries.
aghajani et al.
softwaredocumentation questionnairewith146professionalsoftware practitionerscodecommentandcontributionguidelinewerethetwodocumentation types considered as more useful for the different tasks.
alsuhaibani et al.
method names questionnaire with software developersdevelopersaresupportiveofclearlyarticulatingmethodnamingstandardsandfeelithasapositiveimpacttocodecomprehension.
sondhiet al.
javadoc comments studymethoddocumentationandcommits logs of open source projects62 of the studied javadoc comments being dependent on other entities arafat and riehle code comments investigation on density of comments in open source software codesuccessfulopensourceprojectsfollowaconsistentpracticeof documenting their source code and the comment density is independent of team and project size.
nielebock et al.
code comments questionnaire with developers comments seem to be considered more important in previous studiesandbytheirparticipantsthantheyareforsmallprogramming tasks.
tools.
moreover we identify and present the gap between practitioners expectations and capabilities of existing tools proposed by variousstudies.ourfindingsshowthecodecommentgeneration tools have the potential to be useful for developers.
conclusion and future work codecommentgenerationisapopularareaofresearchinrecent years.
in this work we interviewed professionals and surveyed practitioners on commenting practices and issues they face and their expectations on code comment generation tools.
practitioners are enthusiastic about research in comment generationtechniques and expect tools to generate comments for different granularitylevels especiallyclassandmethodlevels .practitionersexpectacommentgenerationtosatisfyfactorsintermsofcomment content comment locations evaluation criteria effectiveness and efficiency.wealsocomparecapabilitiesofcurrentstate of researchin comment generation with practitioners expectation for adoptiontoidentifydiscrepancies.wepointoutthelimitationsofthe currentstate of researchandavenuesforfutureworktomakecode comment generation techniques well adopted by practitioners.
future studies could put more effort into generating comments at the rightlocationsinsteadofgeneratingcommentsforalltypesofcode units.besides studiescouldputmoreeffort intoinvestigatingtheevaluation criteria that practitioners valued most.