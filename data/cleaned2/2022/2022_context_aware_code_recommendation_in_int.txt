context awarecoderecommendationin intellij idea shamsaabid singaporemanagementuniversity singapore shamsaabid smu.edu.sghamidabdul basit prince sultan university riyadh saudi arabia hbasit psu.edu.sashafayshamail lahoreuniversityof management sciences lahore pakistan abstract developersspendalotoftimeonline searchingforcodetohelp them implement their desired features.
while code recommenders help improve developers productivity there is currently no supportforcontext awarecoderecommendationforopportunisticcode reuse on the go.
typical code recommendation systems provide recommendationsagainstasearchquery whereasacoderecommender that supports opportunistic reuse can recommend related code snippets that represent features that the developer may want toimplementnext.inthispaper wepresentanovelcontext aware feature drivenapiusage basedcoderecommender ca facer tool whichisan intellijideapluginthatleveragesadeveloper s development context to recommend related code snippets.
we considerthemethodshavingapiusagesinadeveloper sactiveproject as part of the development context.
our approach uses contextual datafromadeveloper sactiveprojecttofindsimilarprojectsand recommends code from popular features of those projects.
the popularfeaturesareidentifiedasfrequentlyoccurringapiusage based method clone classes.
from our experimental evaluation on120androidjavaprojectsfromgithub weobservea46 improvementofprecisionusingourproposedcontext awareapproach over a baseline system.
our technique recommends related code examples with an average precision p of and and a success rate of and for initial and evolved development stagesrespectively.
a video demonstrationof our tool isavailable at .
ccs concepts software and its engineering reusability information systems recommender systems .
keywords api usage code recommendation code reuse context aware methodclone structures software features thisresearchissupportedbytheministryofeducation singaporeunderitsacademic research fund tier award id moet32020 .
any opinions findings and conclusions or recommendations expressed in this material are those of the author s anddonotreflecttheviewsoftheministryofeducation singapore.thankstolahore universityofmanagementsciences lums ignitenationaltechnologyfundpakistan srg and prince sultan universityfor theirsupport.
permissionto make digitalor hard copies of allorpart ofthis work for personalor classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acm mustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
esec fse november 14 18 singapore singapore associationfor computing machinery.
acm isbn ... .
format shamsaabid hamidabdulbasit andshafayshamail.
.context aware coderecommendationinintellijidea.in proceedingsofthe30thacmjoint europeansoftwareengineeringconferenceandsymposiumonthefoundationsofsoftwareengineering esec fse november14 18 singapore singapore.
acm new york ny usa 5pages.
.
introduction context awarerecommendersystems cars aredesignedforvariousreal lifeapplicationdomains.thepurposeofcarsistogenerate more relevant recommendations by adapting them to a specific contextual situation of a user .
a context encapsulates the characteristicsofauser staskorthe goalsof auser .
various areas of software engineering make use of context to improveadeveloper sexperience.forcoderecommendation the context of a developer can be leveraged to provide better personalizedcoderecommendations.existingcontext awarecoderecommendationsystemshavebeenshowntosupportdevelopersincode completion andcodereuse 11 .however therearecurrentlynoexisting context aware systems that can provide code recommendations of multiple related features for opportunistic reuse.
code recommendationsystemscan facilitate opportunisticreuse byproviding code that represents features a developer may want to implement next .
opportunistic reuse enables rapid application development without the need to conduct multiple searches and thus enhancesdeveloper productivityandsaves time .
for example if alice is developing a music application one of the features her application must support is playing a given mediafile.thus alicemightsearchfor playmediafile anduse the returned code snippet in her code.
alice might then need to implement pausemediafile getcurrenttrackprogress checkif mediaplaying and handletouchevent features.currently fears canrecommendthenextmethodthatthedeveloperislikelyto implementbasedonasequenceofmethodswrittenbythedeveloper.
the recommendations are based on mining commit histories of thousandsof projects.ontheother hand the feature driven api usage based codeexamplesrecommender facer systemcan proactivelyrecommendcodeformultiplerelatedfeaturestosupport opportunisticcodereuse .weextendthefacertechnique toproviderelevantcoderecommendationsbasedonnotonlythe recentmethodsearchedandreusedbutallofthemethodsthatexist inadeveloper s code file being edited.
in this paper we present a novel context aware api based code recommendation tool ca facer for intellij idea that recommendsmethodbodiesthatarerelevantforreuseinanactiveproject of a developer.
the main idea of ca facer is to use contextual datafromadeveloper sactiveprojectfiletofindsimilarprojects 1647esec fse november14 singapore singapore shamsa abid hamid abdulbasit andshafay shamail andrecommendcodefrompopularfeaturesofthoseprojectsusing collaborativefiltering.afterminingadatasetofrawsourcecode we cluster similar functionalities based on similar api usages into apiusage basedmethodcloneclasses.wethenidentifycontextual datafromuser smethodsbymappingthemtothosecloneclasses.
ca facer uses a hybrid contextual modeling approach which includes a combination of pre filtering feature popularity based recommendation and finally post filtering.
from our experimental evaluationon120androidjavaprojects from github we observe a improvement of precision using our proposed context aware approach over facer.
the precision of recommendations is calculatedasthefractionofrecommendedmethodsthatbelongtothe setofgroundtruthmethods.ourtechniquerecommendsrelated code examples with an average precision p of and and asuccess rateof90 and forinitial andevolved contexts respectively.
overview ofapproach consider a user uworking on a project puwith the aim of implementing a set of features f f1 .... fn for the project.
let useruinput a query to a code search system swhich returns a set ofmatchingmethods m m1 .... mn fromacoderepository r. the methods that are part ofthe project puform the user s active developmentcontext c. givenauser sactivedevelopmentcontext candacoderepositoryr the aim of our system is to recommend a set of methods mrec mrec .. mrecn fromrwhich are likely to be an implementationforthesetoffeatures fsuchthat mrecx fxwhere denotes that the implementation of some method mrecxmaps to somedesiredfeature fx f. .
user context identification to take the context of a user into account we determine a mapping of the user methods muto a set of clone classes mccu u .... un mined as features in rsuch that mux ux where denotesthatausermethod muxmapstoamethodcloneclass ux mccu.
this is accomplished by searching for a method similartoeachusermethodfromthecoderepository.weparseauser s active code file and create a search query out of each user method and invoke facer s search engine to retrieve the top matching method with api usages.
a user method is assigned the method clone class identifier of the corresponding searched method.
it may bepossible thatamethodintheuser scontextdoesnot map to any existing method clone class in the repository and such a methoddoes not getincludedinthe user scontext.
.
getting featurerecommendations from contextually similar projects after identifying the contextual features cof the user s project wefilterouttheprojectsinthecoderepositorycontainingthose features as contextually similar projects pc.
we use their feature profilestomakepredictionsabouttheexistenceofotherrelevant features inthe user sproject.
we calculatethesimilarity oftheuser s projectand eachofthe projectspcandselectthetop10mostsimilarprojectsasneighbors of the user s project.
we compute the cosine similarity of user sprojectpuwitheachprojectin pcas showninequation sim pu p fc fp fc fp wherefpdenotes the set of features or method clone classes of projectpin inpcandfcdenotes the set of features or method clone classesofthe usercontext.
afterfindingcontextuallysimilarprojects werecommendthe popular features identified asthe frequentlyoccurringapi usagebased method clone classes across the projects.
the prediction scoresoflikelihoodofarepositoryfeature whichweidentifyas amethodcloneclass beingrelevanttotheuserproject puare calculatedbasedonacollaborativefilteringtechnique asshown inequation pred pu summationtext.
n nbr pu sim pu n n summationtext.
n nbr pu sim pu n wheren nbr p represents a neighbor of pu and n is a functionindicatingwhetherproject ncontainsmethodcloneclass .
we computepredictionscores for each candidate methodclone classoftheneighborprojectsandobtainthemethodcloneclasses with highest prediction scores above a certain threshold .
.
finally weapplypost filteringtofilteroutanyfeaturesthatmay already exist inthe user scontext.
.
recommending representativemethods wegetthetopnfeaturesandobtainrepresentativemethodsagainst eachmethodcloneclasstorecommendasetoftopnmethods.the representative method is chosen as the method with the highest api calldensity.
functionalityand ui we design and implement ca facer as a plugin for the intellijideforjavadevelopers.ca facerprovidesrelevantmethod recommendations intwostages.
stage1 methodsearchagainstquery adevelopercansearch for methods against an input query string.
the query string canbeajavacomment freetextorjavacodesnippet.the developer may choose to reuse and include the searched methodinthe currently active code file.
stage related method recommendations a developer can invoke ca facer to parse the context and get methods related to the methods that are written or reused by the developer in their currently active code file.
the methods recommendedinstage2implementdifferentfeaturesthat may be related to a developer s code file being edited and thus are potentialreuse candidates.
.
installationandsetup to setup and install ca facer a developer needs to download the ca facer plugin and a resources folder available online1.
the usercanfollowtheinstructionsinthereadmefiletocomplete the setupandinstallation.
1648context aware code recommendation in intellij idea esec fse november14 singapore singapore figure ca faceruser interface .
ca facerplugin usage once the plugin is installed in the intellij ide a new menu option titledfacerappearsonthemenubaroftheintellijide asshownin figure1.followingarethevariousactionsadevelopercanperform using the plugin plugin configuration a first time user needs to configure ca facer with the path to the resources folder using theconfiguration setup dialog.
the user can i clickon the facer menu option in the menu bar and select configure facer figure label or ii press ctrl key combination andthen enter the path.
triggeringmethodsearch adevelopercanwriteaquery in the ide s editor select the query text and invoke the pluginusingoneoftwomethods.theycan i clickonthe facer menu option in the menu bar and select enable facer figure label or ii press ctrl key combination.
a popup appears inside the editor next to the selectedtext.theusercanthenselecttheoption getfacer recommendations from the popup to get stage method recommendations corresponding to the selectedtext.
viewingfacertoolwindow whentheuserclickson theoption getfacer recommendations anewwindowfor the plugin appears docked in the ide.
there are two lists fordisplayingthenamesofrecommendedmethodsonthe leftsideofthetoolwindow.recommendationresultsfroma querysearcharedisplayedinthe queryresults list figure label whereas related method recommendations are displayed in the related methods list figure label .
a code view panel on the right side is used to display the code.smalliconsonthetoprightcornerofthetoolwindoware usedfor variousfunctionsas discussedhere.
viewing method bodies whena userdouble clickson a method name figure label and its body is displayed in thecode view panel in a new tab.
this allows opening multiple methodbodiesinmultiple tabsat the same time.
parsing the context when a user clicks on the parse contextmenu option from the facer menu figure label the ca facer system starts the context identification process.
after this step the user can use the c..button in thefacertoolwindowtogetcontextuallyrelevantmethod recommendations.
gettingrelatedmethods afterparsingthecontext when a user clickson the c..icon figure label displayed on thetoprightcornerofthe codeviewpanel therecommendation of contextually relevant methods gets invoked.
a list of methods related to the user s code context appears in the related methods list figure label .
copying code to copy a method body into the editor a user can either i press the key combination ctrl cto copy selected code to the system clipboard and manually copy at thedesiredlocationor ii clickonthe clipboard icon figure label which pastes the method body at the cursor position inside the editor.
viewingsourcefilecode theviewsourcefile figure1 label8 iconallowsadevelopertoviewthesourcecodeof thehostfileofamethodcurrentlyopenedinthe codeview panel.
the code for the file opens in a new tab in the code view panel figure1 label .
1649esec fse november14 singapore singapore shamsa abid hamid abdulbasit andshafay shamail table feature queries no.
featuredescription methodid category receivepaireddevicesname andaddress bluetoothchat updatelistofpairedbluetoothdevices bluetoothchat do discoveryofbluetoothdevices bluetoothchat send message overbluetooth bluetoothchat connectto a bluetoothdevice bluetoothchat createnewfolder file manager browseto fileor directory file manager movefile file manager putfileto cache file manager draw bitmap file manager setdata source formedia player musicplayer receivekeypress to startstoppause media musicplayer search forsong musicplayer downloadmusic musicplayer play music musicplayer saveforecastin database weather send http requestto get weather weather checkifnetwork connectionavailable weather checkandaddpermissions forlocationaccess weather createnewmemorycacheto storeweathericons weather evaluation the data of empirical evaluation is available online on github2.
thegoalofourevaluationistodetermineifintroducingcontextawarenesscanimprovetheperformanceoffacerforrecommendingrelevantrelatedcodeexamples.wealsoevaluatetheeffectof contextsizeontheprecisionofrecommendations.weusethesame dataset from our previous work .
applications are from four differentcategoriesofjava basedandroidapplications music player bluetooth chat weather and file management.
applicationsfromeachcategoryresultinatotalof120applications.
.
evaluationmethodology we adopt an off line automated evaluation methodology.
to test the precision of recommendations we need to simulate a user development context for input to our system and then we want to comparetherecommendationsagainstagroundtruth.wetakea setof 20feature queries.for eachquery we getasetofmatching methods from facer s stage code search.
we select a method mrthat bestimplementsthe desired feature and selectthe project to which itbelongs as atest project for our evaluation setup.this way weacquireasetof20testprojectspertainingto20methods selected against20 featurequeries.thetwentyqueriesare shown intable1.
fromeachtestproject wesimulateausercontext c andground truth g bysplittingmethodsimplementingfeaturesofaproject into two parts.
we test four context configurations to simulate both early and evolved development stages.
for context c1 we take the selected method mr and all those methods that belong to the same file to simulate the user written methods mu.
then we take the feature class identifiers for the selected method and the simulated user methods to define c1.
the ground truth g1 corresponding to this context configuration consists of all methods implementingfeaturesofatestprojectexceptthesetofmethods mu.
we define context configuration c2to represent an evolved development stage where almost half of the features of a project already implemented.
for c2 we use one half of features as the contextandthe otherhalfas the ground truth g2.
foreachofthe20testprojects weassumethatwehaveanexistingusercontext c andamethod mrwasrecentlyselectedfor reusebytheuser.ourcontext awaresystemthengeneratesaset ofrelatedmethodrecommendationsagainsttheuser scontext c and the selected method mr. since the test project comes from the repository we are aware of the feature class labels of the methods formingtheusercontext.therefore wedonotneedtoexplicitly performthecontextidentificationphaseofca facer.thefeature class label rofmrand feature class labels of other user context methods u i i ... n are input to ca facer to get top n relatedmethodrecommendations.foragivenquery ca faceralso takes into consideration recommendations generated by facer andreturns anintersectionsetofrecommendationsforimproved precision.
.2evaluation results of context aware facer for baseline facer under context c1and ground truth g1the p 5is0.
whereasweobservethatp 5ishigherwith0.94for ca facer.ca facerisabletoprovidepreciserecommendations withahighersuccessrateandmeanreciprocalrank.weperforman un pairedtwosampleswilcoxontest ontheprecisionofthe20 queriesontop5recommendationstotestournullhypothesiswhich assertsthatthemediansoftheprecisionvaluesforbaselinefacer andca facerareidentical.weobtainp values p .
p .002c1 andc2respectively which are all less than the significance level alpha .
.
this means that we can reject the null hypothesis and accordingly we can conclude that the performance of cafacerissignificantlybetterthanbaselinefacerwithoutcontextawareness.
thus we can say that our proposed ca facer does indeed improve the performance of baseline facer by a minimum of and amaximumof46 formakingcontext sensitive related methodrecommendations.
threats to validity theuseofasimulateddevelopmentcontextisathreattoconstruct validity.
to reduce this threat we create a development context from an actual project s file.
currently we use only projects from different categories which we download from github instead of an organization s source code.
we believe that our approach can be easily generalized to an actual organization setting where a localcoderepositoryexists.wehavealsoevaluatedca facerona largercollectionof1 114intellijpluginprojectsthatwedownloaded fromgithub.
ourinternal experimentsindicatethat ourtechnique scaleswell.
conclusions inthispaper wepresentacontext awarecoderecommendertool ca facer that uses api based contextual modeling to provide codeexamplesforopportunisticreuse.themainideaofca facer istoidentifymethodsinauser scontextasapi basedsoftwarefeatures.
the identified features are then used to find similar projects to recommend code from popular features of those projects.
our approachachieves94 precisionfortop5recommendationswith a90 successratefor an early developmentstage.
1650context aware code recommendation in intellij idea esec fse november14 singapore singapore