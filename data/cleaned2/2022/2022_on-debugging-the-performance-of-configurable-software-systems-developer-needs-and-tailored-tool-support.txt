on debugging the performance of configurable software systems developer needs and tailored tool support miguel velez carnegie mellon universitypooyan jamshidi university of south carolinanorbert siegmund leipzig university sven apel saarland informatics campus saarland universitychristian k stner carnegie mellon university abstract determining whether a configurable software system has a performance bugor itwas misconfiguredis oftenchallenging.
while there arenumerous debugging techniquesthat can supportdevelopers in this task there is limited empirical evidence of how useful thetechniquesaretoaddresstheactualneedsthatdevelopershave whendebuggingtheperformanceofconfigurablesoftwaresystems most techniques are often evaluated in terms of technical accuracy instead of their usability.
in this paper we take a human centered approach to identify design implement and evaluate a solution to supportdevelopersintheprocessofdebuggingtheperformance of configurable software systems.
we first conduct an exploratory study with developers to identify the information needs that developershaveduringthis process.subsequently wedesignand implement a tailored tool adapting techniques from prior work to supportthoseneeds.twouserstudies withatotalof20developers validateandconfirmthattheinformationthatweprovidehelpsdevelopers debug the performance of configurable software systems.
acm reference format miguelvelez pooyanjamshidi norbertsiegmund svenapel andchristian k stner.
.ondebuggingtheperformanceofconfigurablesoftwaresys tems developerneedsandtailoredtoolsupport.in 44thinternationalconferenceonsoftwareengineering icse may21 pittsburgh pa usa.acm newyork ny usa 13pages.
introduction developers often spend a substantial amount of time diagnosing a configurablesoftwaresystemtolocalizeandfixaperformancebug or to determine that the system was misconfigured .
this struggle is quite common when maintaining configurable software systems.
some empirical studies find that59percentofperformanceissuesarerelatedtoconfiguration errors percent of these issues require fixing the code ofwhich61percenttakeanaverageof5weekstofix andthat percent of patches in open source cloud systems and percent this work is licensed under a creative commons attribution international .
license.
icse may pittsburgh pa usa copyright held by the owner author s .
acm isbn .
main boolean commit boolean sync def main trans getopt transactions dups getopt duplicates database db new database trans dups init db new cursor .put this.commit this.sync def init database db .... this.commit db.trans ?
true false this.sync db.dups ?
true false .... class database boolean trans boolean dups def database boolean trans boolean dups this.trans trans this.dups dups class cursor def put boolean commit boolean sync if commit if sync synchronized ... ....what is the issue?
effect executing one configuration results in a 20x slowdown in this option configurable system why this issue occurs?
cause setting the options transactions and duplicates to true drastically increases the execution time of the method cursor.put .
transactions sets the value of commit and duplicates sets the value of sync.
when the variables are true the system synchronizes which is not required when inserting duplicate data using transactions.
the variables are initialized in main.init using the values of the options.
note that the options are passed through the database object created in main.main .
figure artificial example contrasting effects and causes when debugging the performance of configurable software systems.
ofquestionsinforumsarerelatedtoconfigurations .regardless of how developers find the root cause of the issue or misconfiguration performanceissuesimpairuserexperience which often result in long execution times or increased energy consumption .
when performance issues occur developers typically use profilers to identify the locations of performance bottlenecks .unfortunately locationswhereasystemspendsthemost time executing are not necessarily the sign of a performance issue.
additionally traditional profilers only indicate the locations of the effectofperformanceissues i.e.
whereasystemspendsthemost time executing for one configuration at a time.
developers are left to inspect the code to analyze the root cause of the performance issues and to determine how the issues relate to configurations.
withanexamplescenarioinfigure1 weillustratethekindof performance challenge that developers may face in configurable software systems and that we seek to support a user executes a configurationofthissystemwith50configurationoptions whichre sultsinan unexpected slowdown.the onlyvisibleeffect istheexcessiveexecutiontime.while insomesituations developersmight be able to change some options to work around the problem users mightnotknowwhichoptionscausetheproblem andmaywantto select certain options to satisfy specific needs e.g.
enable encryption useaspecifictransformationalgorithm orsetaspecificcachesize .inthesesituations developersneedtodeterminewhetherthesystemhasapotential bug ismisconfigured orworksasintended to ieee acm 44th international conference on software engineering icse icse may pittsburgh pa usa miguel velez pooyan jamshidi norbert siegmund sven apel and christian k stner determinethecauseofthepotentiallyproblematicperformancebehavior developerswouldneedtodebugthesystemand mostlikely theimplementation toidentifywhichoptionsorinteractionsinthis configuration of options are the root cause of theunexpected performancebehavior e.g.
thesystemworksasexpected setting a specific cache size results in a misconfiguration or setting the options transactions and duplicates to trueresults in a bug .
whenperformanceissuessuchasinourexampleoccur there arenumeroustechniquesthatdeveloperscouldusetodetermine whetherthereisaperformancebugorthesystemwasmisconfigured.inadditiontooff the shelfprofilers developers could use more targeted profiling techniques visualizeperformancebehavior searchforinefficientcodingpatterns useinformation flowanalyses ormodeltheperformanceofthesystems in terms of its options and interactions .
likewise developerscoulduseestablishedprogramdebuggingtechniques suchasdeltadebugging programslicing and statisticaldebugging forsomepartofthedebuggingprocess.
one reason why we cannot reliably suggest developers to use any oftheabovetechniquesisthatthereislimitedempiricalevidenceof how useful the techniques are to help developers debug the performanceofconfigurablesoftwaresystems thetechniquestypically solveaspecifictechnicalchallengethatisusuallyevaluatedinterms ofaccuracy notusability .hence wecouldonly atbest speculatewhichtechniquesmightsupportdevelopers needstodebugunexpected performance behaviors in configurable software systems.
in this paper we take a human centered approach t o identify design implement andevaluateasolutiontosupportdevelopers in the process of debugging the performance of configurable softwaresystems particularly insituationssuchasourexample in figure .
our human centered research design consists of three steps summarized in figure we first conduct an exploratory user studytoidentifythe informationneeds thatdevelopers havewhen debugging the performance of configurable software systems.
our study reveals that developers struggleto find relevant information to a identify influencingoptions the options or interactions causingan unexpected performance behavior b locate option hotspots the methods whereoptions affect the performance of the system and c tracethe cause effectchain howinfluencingoptions are used in the implementation to directly and indirectly affect the performanceofoptionhotspots.subsequently we designandimplement information providers to support developers needs adapting and tailoring global and local performance influence models cpu profiling andprogramslicing inatoolcalled glimps.finally we conduct two user studies to validateandconfirmthat the designed informationprovidersareusefultodeveloperswhendebuggingthe performanceofcomplexconfigurablesoftwaresystems interms of supporting their information needs and speeding up the process.
in summary we make the following contributions theinformationneeds influencingoptions optionhotspots andcause effectchain thatdevelopershavewhendebugging the performance of configurable software systems the design of information providers adapted from global and local performance influence models cpu profiling and program slicing to support the above needs identify information needs exploratory study developers medium sized system design information providers tailor information sources to support information needs validation study developers medium sized system confirmatory study developers complex system for debugging the performance of configurable software systemsevaluate usefulness of information providers figure overview of our human centered approach to support the information needs that developers have when debugging the performance of configurable software systems.
two empirical evaluations to demonstrate the usefulness of the designed information providers a prototype tool glimps that implements the designed informationproviderstohelpdevelopersdebugtheperformance of configurable software systems.
performance debugging in configurable software systems there is substantial literature on debugging the performance of software systems .
our goal is to support developers in the process of debugging the performance of configurablesoftwaresystems inparticular whendevelopersdonoteven know which options or interactions in their current configuration cause an unexpected performance behavior.
whenperformanceissuesoccurinsoftwaresystems developers need to identify relevant information to debug the unexpected performancebehaviors .forthistask inadditiontousing off the shelf profilers someresearchers suggest using more targeted profiling techniques and visualizations toidentifyandanalyzethelocationsof performancebottlenecks.alternatively someresearcherssuggest using techniques to search for inefficient coding patterns .
while these techniques are quite useful there is limited evidence of their usefulness when debugging the performance ofconfigurablesoftwaresystems particularly todeterminehow performance issues are related to options and their interactions.
in addition to performance debugging techniques there are several established program debugging techniques such as delta debugging program slicing and statistical debugging that can help developers isolate relevant parts of a systemtofocustheirdebuggingefforts.forthisreason thetechniques have been implemented in the backend of tools to help developers debug .
for example whyline combinesstaticanddynamicprogramslicingtoallowdeveloperstoask questionsaboutasystem soutput.whilethesetoolshavebeenevaluatedintermsoftheirtechnicalaccuracyandsomealsointermsof usabilitywithuserstudies thereislimitedevidenceofwhichand how these program debuggingtechniques canbe usedoradopted for debugging the performance of configurable software systems.
1572on debugging the performance of configurable software systems developer needs and tailored tool support icse may pittsburgh pa usa performanceissuesinconfigurablesoftwaresystems performance issuesareoftencausedbymisconfigurationsorsoftwarebugs both ofwhichimpairuserexperience.misconfigurationsareerrorsin which the system and the input are correct but the system does not behave as desired because the user selected configuration is inconsistentordoesnotmatchtheintendedbehavior .
by contrast a software bug is a programming error by a developerthat degrades a system s behavior or functionality .
regardlessoftherootcauseoftheunexpectedbehavior misconfigurationsorsoftwarebugs systemsoftenmisbehavewithsimilar symptoms such as crashes incorrect results and in terms of performance long execution times or increased energy consumption .
research has repeatedly found that configuration related performance issues are common and complex to fix in software systems .forexample hanandyu foundthat 59percentofperformance issuesconcernconfigurations 72percent of which involved one option and percent require fixing the code.
similarly krishna et al .
found that percent of performanceissues takean averageof 5weeksto fix and wanget al .
foundthat50percentofpatchesinopen sourcecloudsystems and percent of questions in forums are related to configurations and performance issues.
performance issues were primarily caused by incorrect implementation of configurations synchronization issues and misconfigurations.
debugging performance in configurable software systems similar todebuggingperformanceingeneral identifyingrelevantinformation is key when debugging unexpected performance behaviors in configurablesoftwaresystems.ideally developerswouldhaverelevant information to debug how performance issues are related to specific options and their interactions.
unfortunately there are situations in which developers only know the effectof an unexpected performancebehavior e.g.
alongexecutiontimeasinfigure1 .
inthesesituations developersneedtodebugthesystemtodeterminewhetherthesystemhasapotential bug ismisconfigured or works correctly but the user has a different expectation about the performance behavior of the system.
for these reasons our goal is tosupportdevelopersin findingrelevantinformation todebugunexpected performance behaviors in configurable software systems.
therearesomeresearchareasthataimtohelpdevelopersunderstandhowoptionsaffectasystem sbehavior.forinstance someresearchersarguethatinformation flowanalysescanhelpdevelopers understandhowoptionsaffectasystem sbehavior .
for example lotrack used static taint analysis to identify under which configurations particular code fragments are executed.whilethesetechniquescansolvespecificchallenges thereis limited evidence of the usefulness of these techniques particularly for debugging the performance of configurable software systems.
intermsofunderstandingperformance someresearcherssuggest that performance influence models can help developers debug unexpected performance behaviors as the modelsdescribeasystem sperformanceintermsofitsoptionsand their interactions.
for example the model a b cexplains theinfluenceoftheoptionsa b andc andtheirinteractionson the performance of a system in this example enabling c increases the execution time by seconds and enabling a and b together further increase the execution time by seconds.
some approaches alsomodeltheperformanceofindividualmethods whichcanbeusefultolocate whereoptionsaffectasystem sperformance.
however while performance influence models have been evaluatedintermsofaccuracy andoptimizing performance theyhavenotbeenevaluatedinterms of usability in particular to support developers needs when debugging the performance of configurable software systems.
contributions wetakeahuman centeredapproach to identify design implement and evaluate a solution to support developers whendebugging the performance ofconfigurable softwaresystems.wefirstconductanexploratoryuserstudyto identify theinformation needs that developers have when debugging the performance of configurable software systems.
afterwards we designandimplement information providers to support developers needs adaptingtechniquesfrompriorwork.finally weconduct avalidation userstudyanda confirmatory userstudytoevaluate that the designed information providers actually support developers informationneeds and speedupthepr ocess of debugging the performance of complex configurable software systems.
exploring information needs while there are numerous performance and program debugging techniques thereislimitedempiricalevidenceofhowusefulthe techniquesaretosupportdevelopers needswhendebuggingthe performance of configurable software systems.
hence we first investigatethe informationneeds thatdevelopershaveandtheprocess thattheyfollowtodebugtheperformanceofconfigurablesoftware systems.specifically weanswerthefollowingresearchquestions rq1 whatinformationdodeveloperslookforwhendebugging the performance of configurable software systems?
rq2 what is the process that developers follow and the activities that they perform to obtain this information?
rq3 what barriers do developers face during this process?
.
method weconductedanexploratoryuserstudyto identifytheinformation needsthat developers have when debugging the performance of configurablesoftwaresystems.usingzeller sterminology we wanttounderstand howdevelopers findpossibleinfectionorigins where options affect performance and analyze the infection chain what are the causes of an unexpected performance behavior when debugging the performance of configurable software systems.
study design.
we conducted the exploratory user study combining a think aloud protocol and a wizard of oz approach to observe how participants debug a performance issue for minutes weencourageparticipantstoverbalizewhattheyare trying to do i.e.
think aloud component while the experimenter plays the role of some tool that can provide performance behavior information such as performance profiles and execution time of specific configurations on demand i.e.
wizard of oz component thus avoiding overhead from finding or learning specific tools.
1573icse may pittsburgh pa usa miguel velez pooyan jamshidi norbert siegmund sven apel and christian k stner we decided to provide additional information to participants halfway through the study after we found in a pilot study with 4graduatestudentsfromourpersonalnetwork thatparticipants spend an extremely long time minutes in a relatively small system just identifying relevant options and methods.
to additionally explore how participants search for the cause of performance issues once they have identified options and methods we told participants after25minutes whichoptionscausetheperformance issue and the methods where the options influence performance.
in this way we can both observe how participants start addressing theproblemandanalyzehowoptionsaffecttheperformanceinthe implementation.
afterthetask weconductedabriefsemi structuredinterview to discuss the participants experience in debugging the system as well as the information that they found useful and would like to have when debugging the performance of configurable software systems.
due to the covid pandemic we conducted the studies remotely over zoom.
we asked participants to download and import thesourcecodeofthesubjectsystemtotheirfavoriteide toavoid struggles with using an unfamiliar environment.
we also asked participants to share their screen.
with the participants permission werecordedaudioandvideoofthesessionsforsubsequent analysis.
task and subject system.
based on past studies thathaveshownhowtime consumingdebuggingevensmallconfigurablesoftwaresystemsis wepreparedoneperformancedebuggingtaskforoneconfigurablesoftwaresystemofmoderatesizeand complexity.
we selected density converter as the subject system which transforms images to different dimensions and formats.
we selectedthisjavasystembecauseitismedium sized yetnon trivial withover49kslocand22binaryandnon binaryoptions andhas manyoptionsthatinfluenceitsperformancebehavior execution timeonthesameworkloadrangedfromfewsecondstoacouple of minutes depending on the configuration.
the task involved a user defined configuration that spends an excessive amount of time executing.
we introduced a bug caused by the incorrect implementationofoneoption representativeofbugsreportedinpast research the system was spending a long time to transformandoutputajpegimage .participantswereaskedtoidentify and explain which and how options caused the unexpected performance behavior.
we however did not explicitly tell participants that the performance problem was related to configurations.
participants.
we recruited graduate students and professional software engineers with extensive experience analyzing the performanceofconfigurablejavasystems.westoppedrecruiting whenweobservedsimilarinformationneedsandpatternsinthe debuggingprocess.weusedourprofessionalnetworkandlinkedin for recruiting.the graduatestudents hada medianof .5years of programming experience a median of years in java a median of years analyzing performance and a median of .
years working with configurable software systems.
the software engineers had amedianof13yearsofprogrammingexperience amedianof13 years in java a median of years analyzing performance and a median of years working with configurable software systems.analysis.
we analyzed transcripts of the audio and video recordingsofthedebuggingtaskandinterviewsusingstandardqualitative research methods .
the first author conducted the study and codedthesessionsusingopenanddescriptivecoding summarizing observations discussions and trends .
all authors met weekly todiscussthecodesandobservations.whencodeswereupdated previouslyanalyzedsessionswerereanalyzedtoupdatethecoding.
threatstovalidityandcredibility.
weobservehowdevelopers debugtheperformanceofasystemthattheyhadnotusedbefore.
developers who are familiar with a system might have different needsorfollowdifferentprocesses.whilereadersshouldbecareful whengeneralizingourfindings theneedshelpusidentifytheinformation that at the very least developers want to find when debugging the performance of unfamiliar configurable software systems.
conductingastudywithonesysteminwhichoneoptioncausesa performanceissuehasthepotentialtooverfitthefindingstothisscenario even though the scenario mirrors common problems in practice .whileourlaterstudyintentionallyvariessomeaspects of the design to observe whether our solutions generalize to other tasks generalizations about our results should be done with care.
.
results we observed that participants struggle for a long time looking for relevant information to debug the performance of the configurable subject system.
in fact no participant was able to finish debugging thesystemwithin50minutes!inwhatfollows wepresenttheinformation needs that participants had the process that they followed and the barriers that they faced during the debugging process.
rq1 information needs.
table lists the four information needs that we identified and the number of participants that recognizably demonstrated each need.
we refer to the information needs as influencingoptions optionhotspots cause effectchain and user hotspots.
the participants referred to these needs using varying terms.
when participants faced a non trivial configuration space they all tried to identify the influencingoptions the option or interaction causing the unexpected performance behavior.
more specifically theparticipantstriedtoidentify whichoptions intheproblematic configuration caused the unexpected performance behavior.
some participants tried locating optionhotspots the methods where options affect the performance of the system.
more specifically theparticipantstriedto locatewherethe effectofthe problematicconfigurationcouldbeobserved themethodswhose execution time increased under the problematic configuration.
when we told participants a which options cause the unexpected performance behavior i.e.
the influencing options and b themethodswheretheseoptionsinfluenceperformance i.e.
the optionhotspots allparticipantstriedtracingthe cause effectchain howinfluencingoptionsareusedintheimplementationtodirectly and indirectly affect the performance of option hotspots.
more specifically astheparticipants a knewwhichoptionswere causingan unexpected performance behavior and b had observed the effectofthoseoptionsonthesystem sperformance theparticipants triedtofindthe rootcause oftheunexpectedperformancebehavior.
1574on debugging the performance of configurable software systems developer needs and tailored tool support icse may pittsburgh pa usa table information needs activities and information sources for debugging the performance of configurable software systems.
information need description frequency activities frequency information source influencing options which options influence the performance of the system?
read options documentation global performanceinfluence modelsmeasure the performance of numerous configurations user hotspots what are the hotspots under the problematic configuration?
profile the system under the problematic configuration cpu profiling option hotspots where do options influence the performance of the system?
trace options in the implementation local performanceinfluence modelsanalyze the user hotspots source code inspect the user hotspots call stacks cause effect chain how are influencing options used in the implementation to directly and indirectly influence the performance of option hotspots?
analyze the option hotspots source code cpu profiling program slicinginspect the option hotspots call stacks use a debugger to analyze how the influencing options affect the values of the variables used in the option hotspots10 manually trace how influencing options are used in the implementation to directly and indirectly affect the performance of option hotspots19 someparticipantsalsolookedfor userhotspots themethods thatspendalongtimeexecutingundertheuser definedproblematic configuration.
however as we will discuss in rq2 these participantslooked forthis informationtrying tolocate optionhotspots i.e.
how options might affect the execution time of the expensive methodsunder the user defined configuration .
rq1 developerslookforinformationto identifyinfluencingoptions locateoptionhotspots and tracethecause effectchain of how options influence performance in the implementation.
rq2 process and activities.
table lists the activities that participants performed when looking for relevant information and thenumberofparticipantsthatperformedeachactivity.overall allparticipants compared theproblematic configurationto thedefault configuration to understand the causes of the unexpected performance behavior.
in particular the participants compared the valuesselectedforeachoptionandanalyzedhowthechangeswere affecting the performance of the system in the implementation.
whenlookingfortheinfluencingoptions theparticipantsmainly readdocumentationandexecutedthesystemundermultipleconfigurations primarily comparing executiontimes.withtheseapproaches the participants tried to identify which options in the problematic configuration were causing the unexpected behavior.
whenlookingforoptionhotspots theparticipantsmainly profiledthesystemundertheproblematicconfiguration andanalyzed thecallstacks andsourcecodeofhotspots tryingto locatethemethodswhereoptionsmight be affecting the performance of hotspots.
whenlookingforthecause effectchain someparticipantsanalyzedtheoptionhotspots sourcecode whereasothersusedadebugger trying to understand howthe influencing options are used intheimplementationtoaffecttheperformanceofoptionhotspots.
severalparticipantsalso compared thehotspots callstacks under theproblematicanddefaultconfigurations tryingtounderstand howtheinfluencingoptionsaffectedhowtheoptionhotspotswerecalled.ultimately allparticipantstriedto manuallytrace howtheinfluencingoptionswerebeingusedintheimplementationtodirectly and indirectly affect the performance of the option hotspots.
whileidentifyingtheinfluencingoptionsandlocatingtheoption hotspots is needed to trace the cause effect chain the order inwhichthefirsttwopiecesofinformationwasacquireddidnot affectthedebuggingprocess.forinstance nineparticipantsstarted looking for influencing options but gave up trying after a while.
then the participants looked for and were able to identify user hotspots.
six of these participants subsequently started looking for option hotspots i.e.
how options mightaffect the executiontime of the expensive methods under the user defined configuration .
rq2 overall developerscomparetheproblematicconfigurationto anon problematicbaselineconfigurationtounderstandthecauses of an unexpected performance behavior.
initially developers compareexecutiontimestoidentifyinfluencingoptions andanalyze call stacks and source code to locate option hotspots.
these two piecesofinformationarenecessarytotracethecause effectchainof howinfluencingoptionsareusedintheimplementationtodirectly and indirectly influence the performance of option hotspots.
rq3 barriers.
our participants struggled for a long time trying tofindrelevantinformationtodebughowoptionsinfluencetheperformanceofthesystemintheimplementation.mostparticipants discussedthe tediousandmanual processofexecutingmultiple configurations when looking for influencing options.
for instance only10outofthe19participantsidentifiedtheinfluencingoptions.
whilewe toldparticipantsthe system sexecutiontime underany configurationthattheywanted severalparticipantsmentionedthat finding the problematic option would have taken me hours.
mostparticipantsalsomentionedthestruggletolocateoption hotspots.
in fact no participant found any option hotspot!
several participants mentioned that locatingthese methods is challenging since options are not typically directly used in expensive methods.
1575icse may pittsburgh pa usa miguel velez pooyan jamshidi norbert siegmund sven apel and christian k stner the participants struggled the most when trying to trace the cause effect chain.
in fact no participant could establish the causeeffect chain even when our task consisted of tracing a singleinfluencing option and we explicitly told participants the influencing optionandtheoptionhotspotstheyneededtoanalyze.mostparticipantsmentionedthatmanuallytracingevenoneoptionthrough a relatively small system is error prone.
additionally some participants discussed that identifying differences in the option hotspots call stacks was difficult for determining whether the influencing optionswereaffectinghowtheoptionhotspotswerecalled.asmentioned by several participants variables used in option hotspots are often a result of several computations involving influencing options.sincetheinfluencingoptionsareusedinvariouspartsof the system tracing which paths to follow is very challenging.
rq3 developers struggle for a substantial amount of time looking for relevant information to identify influencing options locate option hotspots and trace the cause effect chain.
supporting information needs we aim to support developers in identifying influencing options locatingoptionhotspots andtracingthecause effectchain.tothis end we design information providers adapting information sources tosupporttheaboveneeds.weimplementthedesignedinformation providersinatailoredandcohesiveprototypecalled glimps which can assist developers to debug the performance of configurablesoftwaresystems.table1showswhichinformationneedsare supportedbytheinformationsourcesglobalandlocalperformanceinfluencemodels cpuprofiling andprogramslicingthatweadapt for designing information providers.
.
identifying influencing options tohelpdevelopersidentifytheinfluencingoptionsthatcausean unexpectedperformancebehavior weselectglobalperformanceinfluence models which describe a system s performanceintermsofitsoptionsandtheirinteractions.forinstance the model .
.
duplicates transactions .
evict .
temporary explains the influence of duplicates transactions evict and temporary and their interactions on the performance of berkeley db.
weadaptthisinformationsourcetodesignan informationprovider that shows developers influencingoptions specifically which and howdifferences betweenconfigurations e.g.
aproblematicanda non problematic configuration influence a system s performance.
in our implementation this information provider highlights the differences in the values of options selected between two configurations andshowstheinfluencing optionsbetweentheconfigurations.
if changes between the configurations are not shown then the changes do not influence the performance of the system.
global performance influence models are typically built by measuringexecutiontimeunderdifferentconfigurations .themodelscanbebuiltusingwhite boxtechniques machinelearning approaches or a brute force approach.
1anyperformance influencemodelisshownrelativetooneconfiguration e.g.
the default configuration which explains the impact of changes to that configuration.
in our tool developers can select that one configuration.
figure our tool highlights differences in the options selected between two configurations and shows the influencing options of the changes from one configuration to trianglerightsld another configuration.
details on these techniques are beyond the scope of this paper.
in our implementation we generate the models using white box techniques astheseapproachesfirstgeneratelocalperformanceinfluence models which our tool also uses to obtain the global model for the system .
example.
figure3showsascreenshotofourtoolhighlightingthe differencesoftheoptionsselectedbetweentwoconfigurations e.g.
anon problematicandproblematicconfigurations .ourtoolshows theinfluencing optionsbetweenthesetwo configurations.forinstance changingbothoptionsduplicatesandtransactionsfrom falsetotrueresultsinaninteractionthatincreasedtheexecution time by .
seconds.
based on this information most developers would consider duplicates and transactions as influencing options that are causing an unexpected performance behavior.
note that individual changes to duplicates and transactions didnotinfluencetheperformanceofthesystem onlythe interactionincreased the execution time.
additionally any other changes between the configurations replicated do not influence the performance of the system.
likewise the influence of temporary is not shown as both configurations selected the same value.
.
locating option hotspots after helping developers identify the influencing options we help developers locate the option hotspots where these options cause anunexpectedperformancebehavior.tothisend weselectlocal performance influencemodels .analogoustohowglobal performance influence models describe the influence of options andinteractions ona system sperformance localmodels describe the influence of options on the performance of individual methods .
hence local models indicate whereoptions affect the performance in the implementation .
for instance the local model ofamethod0 .
.
duplicates transactions explainsthe influenceof duplicatesandtransactionsontheperformance of the specific method rather than the entire system.
we adapt this information source to design another information provider that shows developers option hotspots specifically whereandbyhow much optionsinfluence theperformanceof the system.
in our implementation this information provider shows a themethodswhose performance is influenced by changes made 1576on debugging the performance of configurable software systems developer needs and tailored tool support icse may pittsburgh pa usa figure our tool shows option hotspots affected by influencing options as well as the influence on performance in each method.
between configurations e.g.
a problematic and a non problematic configuration and b the influence ofthechangesoneachmethod s performance.
localperformance influencemodelsareusuallybuiltwithwhitebox approaches as by products of global models .
in our implementation we generate local models using these approaches.
example.
figure shows as screenshot of our tool indicating the optionhotspots where the influencing options duplicates and transactionsaffectthesystem sperformance.notethattheinfluence on all methods equals the influence in the entire system seefigure3 .basedonthisinformation mostdeveloperswould consider cursor.put as an option hotspot the location where the effectof the influencing options is observed.
.
tracing the cause effect chain afterhelpingdevelopersidentifytheinfluencingoptionsandlocate theoptionhotspots wehelpdeveloperstracethecause effectchain.
to this end we select cpu profiling and program slicing.
.
.
cpu profiling.
weselectcpuprofilingtocollectthehotspot view of the problematic configuration and a non problematic configuration.thehotspotviewistheinverseofacalltree alistof allmethodssortedbytheirtotalexecutiontime cumulatedfrom all different call stacks and with back traces that show how the methods were called.
we adapt this information source to design another information provider that helps developers trace the cause effect chain specifically comparethehotspotviewoftwoconfigurations e.g.
a non problematic and a problematic configuration to help developers determine whether the influencing options affecthow option hotspots are called.
in our implementation this information provider highlights differences in the option hotspots execution time and call stacks.
cpuprofilescanbecollectedwithmostoff the shelfprofilers.
white box approaches that build global and local performanceinfluence models collect these profiles .
in our implementation we use the cpu profiles collected by these approaches.
example.
figure5showsascreenshotofourtool whichhelpsdevelopers trace the cause effect chain by highlighting differences in the option hotspots execution time and call stacks based on the influencingoptionsduplicatesandtransactions.forinstance the changes increased cursor.put s execution time but did not affect howthemethodwascalled.bycontrast filemanager.read isonly executedundertheproblematicconfiguration.thisinformationcan 2our tool also allows developers to select a single configuration to analyze individual local performance influence models.
3our tool also allows developers to analyze the cpu profile of one configuration.
figure our tool helps developers trace the cause effect chain by highlighting the differences in the option hotspots execution time and call stacks affected by influencing options.
while the call stacks of cursor.put are the same under both configurations filemanager.read is only called under the second configuration.
main.main ... cursor.put ... main.init ... database.init ... def init database db database.
checkfornullparam db.name dbname log.msg level.info db db.name open ... if db.replicated configreplicated ... ... this.cachemode db.cachemode this.commit db.trans ?
true false this.sync db.dups ?
true false if db.evict evictor.
init db.evictorthreads ... figure our tool helps developers trace the cause effect chain by displaying a method level dependence graph from the method where the influencing options are first loaded into the system green box to and option hotspot red box .
other relevant methods are shown in brown boxes.
when clicking on a box glimps opensthefilewiththemethodandhighlightsthestatementsofthe slice.
the position of the nodes in the graph left to right and top to bottom does not represent the order of execution of methods.
helpdevelopersunderstandhowtheinfluencingoptionsareused in the implementation to affect the option hotspots s performance.
.
.
program slicing.
weselectprogramslicing anapproachtocomputerelevantfragmentsofasystembasedon a criterion.
several debugging tools have been implemented on top of program slicers to help developers narrow down relevant parts of a system where developers should focus their debugging efforts.
we adapt this information source to design another information provider that helps developers trace the cause effect chain specifically tracking how influencing options are used in the implementation todirectlyandindirectly influence theperformanceof option hotspots.
in our implementation this information provider slices chops a system from where influencing options are first loaded into the system to the option hotspots and shows a a method leveldependencegraph and b highlightedstatements ofthe slice in the source code.
example.
figure6showsascreenshotofourtool whichhelps developers trace the cause effect chain by showing a method level 1577icse may pittsburgh pa usa miguel velez pooyan jamshidi norbert siegmund sven apel and christian k stner dependence graph from the mainmethod in which the influencing options duplicates and transactions are first loaded into the system to the option hotspot cursor.put .
the graph can help developerstrackdependencesacrossmethodsinthesystem.when clicking on a method on the graph our implementation opens the file with the method and highlights the statements in the slice suchasinfigure6.thehighlightedstatementscanhelpdevelopers trace the cause effect chain by tracking how influencing options are used in the implementation to directly and indirectly cause an unexpected performance behavior in option hotspots.
.
implementation weimplementedtheinformationprovidersinavisualstudiocode extension called glimps .
our prototype adapts global and local performance influencemodels cpu profiles anda program slicer.
the first three items are collected prior to debugging using aninfrastructurewheredevelopersconfigureandrunthesystem.
subsequently developersuse glimps toidentifyinfluencingoptions locate option hotspots and trace the cause effect chain.
glimps isagnostictotheinformationsourcesusedtoadaptand implementinformationproviders.infact glimps isentirelybuilt on existing infrastructure of information sources for global and localperformance influencemodeling cpuprofiling andprogram slicing.
thenovelty to glimps is inthedesignandintegration of information providers from multiple information sources into acohesiveinfrastructure and user interface which can help developers debug the performance of configurable software systems.
our implementation uses comprex to build the global and localperformance influencemodelsandusesjprofiler tocollect the cpu profiles.
ideally wewouldslicetheprogramdynamically asweareanalyzing a system s dynamic behavior and to avoid approximations in the results.
however after exploring various dynamic and static slicing research tools we settled on the state of the art static slicer providedbyjoana asitisthemostmatureoption.ourimplementationusesjoanatoslicethesystemfrominfluencingoptions tooptionhotspots usingafixed pointchopperalgorithm which first computes a backward slice from the option hotspots and then computes a forward slice on the backward slice from the influencing options .
for scalability and to reduce approximations we modified joana to consider code coverage under the problematic and a non problematic configurations.
evaluating usefulness of information providers weevaluatetheusefulness ofourdesignedinformationproviders tohelpdevelopersdebugtheperformanceofconfigurablesoftware systems.
specifically we answer the following research question rq4 towhatextentdothedesignedinformationproviders helpdevelopersdebugtheperformanceofconfigurablesoftware systems?
weanswerthisresearchquestionwithtwouserstudiesusingdifferent designs.
we first evaluate the extent that our designed information providers support the information needs that we identified inourexploratorystudy.tothisend weconducta validation study in which we ask the participants of our exploratory study to debug acomparable unexpected performance behavior using glimps on the same subject system sec .
.
afterwards we replicate the study intentionally varyingsomeaspectsofthedesigns theoretical replication toevaluatetowhichextentourinformation providersgeneralizeforamorecomplextaskwithaninteraction in a larger system.
specifically we conduct a confirmatory study in which we aska new set of participants to debug a more complex taskon amore complex subject system sec .
.
the validation and confirmatory studies together provide evidence that our information providers help developers debug the performance of complex configurablesoftwaresystems becausetheinformationproviders supportthe information needs that developers have in this process.
.
validating usefulness of information providers we first conducted a validation study to evaluate the extent that the designed information providers support the information needs that we identified in our exploratory study.
.
.
method studydesign.
weinvitedtheparticipantsfromourexploratory study after5months tosolveanotherprobleminthesamesystem butnowwiththehelpofourinformationproviders.thisdesigncan be considered as a within subject study where subjects perform tasksbothinthecontrolandinthetreatmentcondition specifically weconsiderourexploratorystudyasthe controlcondition inwhich participantsdebuggedasystem withoutglimps andconsiderthe new study as the treatment condition in which participants debug acomparable performance issue for minutes in the same subject system with glimps.
similar to the exploratory study we use think aloud protocol to identify whether our information providersactuallysupporttheinformationneedsthatdevelopers have when debugging the performance of the subject system.
prior to the task participants worked on a warm up task for minutes using glimps.
we tested the time for the warm up task as well as glimps s design and implementation in a pilot study with graduate students from our personal network.
afterthetask weconductedabriefsemi structuredinterview to discuss the participants experience in debugging the system as well as the usefulness of the information providers and to contrast their experience to debugging without the information providers.
due to the covid pandemic we conducted the studies remotely over zoom.participants used visualstudio code through their preferred web browser.
the ide was running on a remote serverandwasconfiguredwith glimps.weaskedparticipantsto share their screen.
with the participants permission we recorded audio and video of the sessions for subsequent analysis.
taskandsubjectsystem.
wepreparedacomparable butdifferent debugging task to the task in our exploratory study.
similar to the exploratorystudy thetaskinvolvedauser definedconfigurationin density converter that spends an excessive amount of time executing.weintroducedabugcausedbytheincorrectimplementationof one option the system was using a larger scale of the input image insteadofusingafraction .participantswereaskedtoidentifyand explainwhichandhowoptionscausedtheunexpectedperformance 1578on debugging the performance of configurable software systems developer needs and tailored tool support icse may pittsburgh pa usa behavior.incontrasttotheexploratorystudy theuser definedconfiguration bug and problematic option were different.
participants.
weinvitedtheparticipantsfromourexploratory studytoworkonourtask.afterconductingthestudywith 8participants weobserveda massiveeffectsize betweendebuggingwith andwithoutourinformationproviders correctlydebuggingwithin minutes compared to failing after minutes see sec.
.
.
.
hence we did not invite the remaining participants.
analysis.
we analyzed and compared transcripts of the audio andvideorecordingsoftheexploratoryandvalidationstudiesto measure the time participants spend working on the task and their success rates.
based on our exploratory study participants were required to identify influencing options locate option hotspots and trace the cause effect chain to correctly debug the system.
we also analyzed the interviews using standard qualitative research methods .thefirstauthorconductedthestudyandanalyzed thesessionsindependently summarizingobservations discussions and trends during the task and interviews.
all authors met weekly to discuss the observations.
threatstovalidityandcredibility.
weinvitedthesameparticipants and use the same subject system as in our exploratory study.
such a design might only validate the information needs when debugging performance in the selected subject system.
additionally the exploratory and validation studies were conducted months apart which might result in learning effects that help participants in the latter study.
furthermore there is the threat that the task in thevalidationstudyissimpler.whileourlaterstudyvariesthese aspects to observe whether our solutions generalize to other tasks generalizations about our results should be done with care.
.
.
results rq4 validating usefulness of information providers.
figure showsthetimethateachparticipantspentlookingforeachpieceof informationwhiledebuggingtheperformanceof densityconverter with treatment andwithout control glimps.overall allparticipantswhousedourinformationprovidersidentifiedtheinfluencing options located option hotspots and traced the cause effect chain and correctly explained the root cause of the performance issue in less than minutes.
by contrast the participants could debug theunexpected behaviorwithout ourinformationprovidersin minutes when they struggled to find relevant information.
all8participantswhousedourinformationprovidersidentified the influencing options and located the option hotspots in a few minutes.afterwards allparticipants tracedthecause effectchain and explained how the influencing options caused the unexpected performance behavior in the option hotspots.
whenthese8participantsdidnotuseourinformationproviders noparticipantfoundasinglepieceofinformationinthesametimeframe as they did when using our information providers.
in fact 4wedidnotconductastatisticalsignificancetest sincecomparingcompletionrates is obvious all participants correctly debugged with our tool but no participants correctly debugged without our tool comparing completion times cannot be done since nobody completed the task without our tool.
influencing options option hotspots cause effect chain timeout found information did not find information treatment used glimps control did not use glimpssystem density converter figure time looking for each piece of information when debugging performance with and without glimps.
the first participants who did not use glimps are the same participants who used our tool.
the data for the other participants who did not use glimps is included for reference.
duringa25 minutewindow only3participantsfoundtheinfluencing options and no participant foundany option hotspots.
furthermore asdescribedinourexploratorystudy evenwhenwe explicitly toldparticipants a the one influencing option that was causing the unexpected performance behavior and b the option hotspots whose execution times drastically increased as a result of the problematicoption noparticipantcouldtracethecause effectchainand find the root cause of the unexpected behavior within minutes.
after completing the task the participants discussed how the informationprovidershelpedthemdebugtheperformanceofthe system and contrasted their experience to debugging without our tool.
all participants mentioned that the information providers helpedthemobtainrelevantinformationfordebugging.theconsensus was that the information providers helped me focus on the relevant parts of the system to debug the unexpected performance behavior.the participantscontrasted thisexperienceto thestrugglesthattheyfacedwhendebuggingwithoutourtool.inparticular some participants remembered being lost on what methods to follow or knowing which parts of the program are relevant.
rq4 the validation study provides evidence that the designed informationproviderssupporttheinformationneedsthatweidentifiedinourexploratorystudy.specifically theinformationproviders supportdevelopers needsto a identifyinfluencingoptions b locate option hotspots and c trace the cause effect chain.
.
confirming usefulness of information providers aftervalidatingthatourinformationproviderssupporttheinformationneedsthatweidentified weconducteda confirmatory study to evaluate the extent that the information providers can potentiallygeneralizetosupporttheinformationneedsofdebuggingthe performance of complex configurable software systems.
1579icse may pittsburgh pa usa miguel velez pooyan jamshidi norbert siegmund sven apel and christian k stner .
.
method studydesign.
wereplicatedthevalidationstudy intentionally varyingsome aspects of the designs we used a between subject designwhere we ask a new set of participants to debug a more complex task on amore complex subject system all working on the same task but using different tool support .
with these variations we evaluate that the results and massive effect size in our previous studiesarenotdueto forexample asimplertaskorlearningeffects butrather thattheinformationprovidershelpdevelopersdebug theperformanceofcomplexconfigurablesoftwaresystems because the information providers support the needs that developers have in this process.
as in our prior study we conducted the confirmatory study using a think aloud protocol to compare how two new sets ofparticipantsdebugtheperformanceofacomplexconfigurable software system using different tool support in minutes.
the treatment group used glimps while the control group used a simple plugin which profiles and provides the execution time of thesystemunderanyconfiguration.thisinformationisthesame that we gave participants in our exploratory study using a wizard ofozapproach.forthisconfirmatorystudy however wedidnot usea wizardof ozapproach as wewanted bothgroups toaccess information for debugging using a tool and the same ide.
similar to our prior study participants worked on a warm up taskfor20minutesusingeither glimps orthesimplepluginto learn how to use the information providers or the components that provided performance behavior information respectively.
we tested the simple plugin s design and implementation in a pilot study with graduate students from our personal network.
as in our prior study we conducted a brief semi structured interview afterthetask todiscusstheparticipants experiencein debuggingthesystem.inparticular weaskedparticipantsinthe treatment group about the usefulness of the information providers and whether there was additional information that they would like to have in the debugging process.
similarly we asked participants in the control group for the information that they would like to have when debugging the performance of configurable software systems.
due to the covid pandemic we conducted the studies remotely over zoom.participants used visualstudio code through theirpreferredwebbrowser whichwasrunningonaremoteserver andwasconfiguredwith glimps andthesimpleplugin.weasked participants to share their screen.
with the participants permission werecordedaudioandvideoofthesessionsforsubsequent analysis.
task and subject system.
we prepared a more complex performancedebuggingtaskforamorecomplexconfigurablesoftware system than the task and subject system in our exploratory and validationstudies.similartotheprior studies thetaskinvolveda user definedconfigurationthatspendsanexcessiveamountoftime executing.participantswereaskedtoidentifyandexplainwhich and how options caused the unexpected performance behavior.
in contrasttothepreviousstudies weintroducedabugcausedbythe incorrect implementation of an interactionof two options the system spenta long timeinserting duplicate datausing transactions .
we selected berkeley db as the subject system for the followingreasons the system is implemented in java is open source and is more complex than density converter over 150k sloc and over binary and non binary options and the system has a complexperformancebehavior executiontimerangesfromacouple of seconds to a few minutes depending on the configuration .
participants.
we recruited graduate students independent of ourexploratoryandvalidationstudies withextensiveexperience analyzing the performance of configurable java systems.
when determining the number of participants for the control group wemadesomeethicalconsiderations whilealsoensuring thatweobtainreliableresults.inourexploratorystudy weobserved 19experienced researchersandprofessionalsoftwareengineerswho could not debug the performance of a medium sized system with a performancebugcausedbya singleoption within50minutes see figure .
with berkeley db we want to observe how participants debug the performance of a more complex system a significantly larger system in terms of sloc and configuration space size in whichtheunexpectedbehavioriscausedbyan interactionoftwo options.basedon a thefactthatwehave strongempiricalevidence that debugging the performance of configurable software systems without relevant information is frustrating and is highly likely to not be completed under minutes and b the massive effect sizeinourvalidationstudybetweendebuggingwithandwithout our information providers we decided to minimize the number of participantsthatweexpecttostruggleandfailtocompletethetask while stillhaving areasonable number participants in thecontrol group.
ultimately we randomly assigned out of the participants to thecontrolgroup makingsuretobalancethegroupsintermsof the participants debugging experience the median programming experience for both groups is years a median of .
years in java a median of .
years of performance analysis experience and a median of .
years working with configurable software systems.
analysis.
we analyzed transcripts of the audio and video recordingstomeasurethetimeparticipantsspendworkingonthetaskand theirsuccessrates.basedonourexploratoryandvalidationstudies participantsneededtoidentifyinfluencingoptions locateoption hotspots and trace the cause effect chain to successfully debug the system.
additionally we analyzed the interviews using standard qualitativeresearchmethods .thefirstauthorconductedthe studyandanalyzedthesessionsindependently summarizingobservations discussions and trends during the debugging task and the interviews.
all authors met weekly to discuss the observations.
threatstovalidityandcredibility.
whileweaimedtoincrease the complexity of the performance debugging task readers should be careful when generalizing our results to other complex systems.
our control group consisted of participants.
as argued previously wedidnotrecruitmoreparticipantsduetothestruggles thatweobservedinourexploratorystudyonasimplersystemand the massive effect size in our validation study between debugging with and without our information providers.
nevertheless readers should be careful when generalizing our results.
whilethecontrolgrouphadaccesstotheide sdebuggerand usedasimpleplugin wemightobtaindifferentresultsiftheparticipants had used other debugging tools and techniques.
1580on debugging the performance of configurable software systems developer needs and tailored tool support icse may pittsburgh pa usa influencing options option hotspots cause effect chain timeout found information did not find information treatment used glimps control used simple pluginsystem berkeley db figure time looking for each piece of information when debugging performance with different tool support.
.
.
results rq4 confirming usefulness of information providers.
figure shows the time each participant spent looking for each piece of information while debugging the performance of berkeley db with glimps treatment and the simple plugin control .
similar to our validation study all participants who used our information providers identified the influencing options located the option hotspots and traced the cause effect chain in less than minutes.
by contrast the participants who did not use our information providersstruggledfor60minutesandcouldnotdebugthesystem.
while working on the task we observed the participants in the treatmentgrouplookingforthesameinformationasintable1and using our information providers similarly to the participants in the validationstudy tofind information todebug thesubjectsystem.
likewise the participants in the control group struggled while performingthesameactivitiesasthoselistedintable1whentrying to identify the influencing options and locate the option hotspots.
after working on the task all participants discussed their experience in debugging the performance of the system using tool support.similartothediscussioninourvalidationstudy allparticipantsinthetreatmentgroupcommentedhowtheinformation providershelpedthemidentifyinfluencingoptions locateoption hotspots andtracethecause effectchain.likewise theparticipants whousedthesimpleplugindescribedsimilarstrugglesandbarriers as those mentioned in our exploratory study.
all participants in this group mentioned that identifying the influencing options that causetheexpectedbehavioris difficult andlocatingtheoption hotspots is challenging.
however none of the participants in this group commentedon tracingthe cause effectchain asthey never got to that point in the debugging process.
rq4 the confirmatory study provides evidence that the designed informationprovidershelpdevelopersdebugtheperformanceof complex configurable software systems because the information providers support the needs that developers have in this process.
5again we did not conduct a statistical significance test since comparing completion rates is obvious all participants in the treatment group correctly debugged the system but no participant in the control group did comparing completion times cannot be done since nobody in the control group completed the task.
conclusion weidentifiedtheinformationneeds influencingoptions option hotspots and cause effectchain thatdevelopershavewhendebugging the performance of configurable software systems.
subsequently we designed and implemented information providers adapted from global and local performance influence models cpu profiling andprogramslicing thatsupporttheaboveneeds.two user studies with a total of developers validate and confirm that our designed information providers help developers debug the performance of complex configurable software systems.