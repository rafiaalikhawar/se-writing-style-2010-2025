bcfa bespoke control flow analysis for cfa at scale ramanathan ramu1 microsoft redmond washington ramu.rm2013 gmail.comganesha b upadhyaya2 harmony mountain view california ganeshau iastate.edu hoan anh nguyen3 amazon seattle washinton nguyenanhhoan gmail.comhridesh rajan dept.
of computer science iowa state university ames iowa hridesh iastate.edu abstract many data driven software engineering tasks such as discovering programming patterns mining api specifications etc.
perform source code analysis over control flow graphs cfgs at scale.
analyzing millions of cfgs can be expensive and performance of the analysis heavily depends on the underlying cfg traversal strategy.
state of the art analysis frameworks use a fixed traversal strategy.
we argue that a single traversal strategy does not fit all kinds of analyses and cfgs and propose bespoke control flow analysis bcfa .
given a control flow analysis cfa and a large number of cfgs bcfa selects the most efficient traversal strategy for each cfg.
bcfa extracts a set of properties of the cfa by analyzing the code of the cfa and combines it with properties of the cfg such as branching factor and cyclicity for selecting the optimal traversal strategy.
we have implemented bcfa in boa and evaluated bcfa using a set of representative static analyses that mainly involve traversing cfgs and two large datasets containing thousand and million cfgs.
our results show that bcfa can speedup the large scale analyses by .
further bcfa has low overheads less than .
and low misprediction rate less than .
.
acm reference format ramanathan ramu1 ganesha b upadhyaya2 hoan anh nguyen3 and hridesh rajan.
.
bcfa bespoke control flow analysis for cfa at scale.
in 42nd international conference on software engineering icse may seoul republic of korea.
acm new york ny usa pages.
introduction data driven techniques have been increasigly adopted in many software engineering se tasks api precondition mining 1at the time this work was completed ramanathan ramu was a graduate student at iowa state university.2at the time this work was completed ganesha upadhyaya was a graduate student at iowa state university.3at the time this work was completed dr. hoan nguyen was a postdoctoral researcher at iowa state university.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
icse may seoul republic of korea association for computing machinery.
acm isbn .
.
.
.
usage mining code search discovering vulnerabilities to name a few.
these data driven se tasks perform source code analysis over different program representations like source code text abstract syntax trees asts control flow graphs cfgs etc.
at scale.
for example api precondition mining analyzes millions of methods that contain api call sites to capture conditions that are often checked before invoking the api.
the source code mining infrastructures have started supporting cfg level analysis to facilitate variety of data driven se tasks.
performance of source code analysis over cfgs heavily depends on the order of the nodes visited during the traversals the traversal strategy.
several graph traversal strategies exist from the graph traversal literatures e.g.
depth first post order reverse post order topological order worklist based strategies etc.
however the stateof the art analysis frameworks use fixed traversal strategy.
for example soot analysis framework uses topological ordering of the nodes to perform control flow analysis.
our observation is that for analyzing millions of programs with different characteristics no single strategy performs best for all kinds of analyses and programs.
both properties of the analysis and the properties of the input program influence the traversal strategy selection.
for example for a control flow analysis that is data flow sensitive meaning the output for any node must be computed using the outputs of its neighbors a traversal strategy that visits neighbors prior to visiting the node performs better than other kinds of traversal strategies.
similarly if the cfg of the input program is sequential a simple strategy that visits nodes in the random order performs better than a more sophisticated strategy.
we propose bespoke control flow analysis bcfa a novel source code analysis technique for performing large scale source code analysis over the control flow graphs.
given an analysis and a large collection of cfgs on which the analysis needs to be performed bcfa selects an optimal traversal strategy for each cfg.
in order to achieve that bcfa deploys a novel decision tree that combines a set of analysis properties with a set of graph properties of the cfg.
the analysis properties include data flow sensitivity loop sensitivity and traversal direction and the graph properties include cyclicity whether the cfg contains branches and loops .
there exists no technique that automatically selects a suitable strategy based on analysis and cfg properties.
since manually extracting the properties can be infeasible when analyzing millions of cfgs we provide a technique to extract the analysis properties by analyzing the source code of the analysis.
ieee acm 42nd international conference on software engineering icse icse may seoul republic of korea r. ramu et al.
we have implemented bcfa in boa a source code mining infrastructure and evaluated bcfa using a set of source code analyses that includes mainly control and data flow analyses.
the evaluation is performed on two datasets a dataset containing well maintained projects from dacapo benchmark with a total of 287k cfgs and an ultra large dataset containing more than 380k projects from github with a total of 162m cfgs .
our results showed that bcfa can speedup the large scale analyses by by selecting the most time efficient traversal strategy.
we also found that bcfa has low overheads for computing the analysis and graph properties less than .
and low misprediction rate less than .
.
in summary this paper makes the following contributions it proposes a set of analysis properties and a set of graph properties that influence the selection of traversal strategy for cfgs.
it describes a novel decision tree for selecting the most suitable traversal strategy using the analysis and the graph properties.
it provides a technique to automatically extract the analysis properties by analyzing the source code of the analysis.
it provides an implementation of bcfa in boa and a detailed evaluation using a wide variety of source code analyses and two large datasets containing thousand and million cfgs.
motivation consider a software engineering task that infers the temporal specifications between pairs of api method calls i.e.
a call to amust be followed by a call to b .
a data driven approach for inference is to look for pairs of api calls that frequently go in pairs in the same order at api call sites in the client code.
such an approach contains at least three source code analyses on the control flow graph cfg of each client method identifying