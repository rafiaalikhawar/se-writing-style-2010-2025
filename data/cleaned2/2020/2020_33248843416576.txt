no strings attached an empirical study of string related software bugs aryaz eghbali aryaz.egh gmail.com university of stuttgart germanymichael pradel michael binaervarianz.de university of stuttgart germany abstract stringsplaymanyrolesinprogrammingbecausetheyoftencontain complex and semantically rich information.
for example programmers use strings to filter inputs via regular expression matching to express the names of program elements accessed through some form of reflection to embed code written in another formal language and to assemble textual output produced by a program.
the omnipresence of strings leads to a wide range of mistakes that developers may make yet little is currently known about these mistakes.
the lack of knowledge about string related bugs leads to developers repeating the same mistakes again and again and to poor support for finding and fixing such bugs.
this paper presents the first empirical study of the root causes consequences and otherpropertiesofstring relatedbugs.wesystematicallystudy204string relatedbugsinadiversesetofprojectswritteninjavascript a language where strings play a particularly important role.
ourfindings include i that many string related mistakes are caused byarecurringsetofrootcausepatterns suchasincorrectstringliteralsandregularexpressions ii thatstring relatedbugshave adiversesetofconsequences includingincorrectoutputorsilent omission ofexpected behavior iii that fixing string relatedbugs oftenrequireschangingjustasingleline withmanyoftherequiredrepairingredientsavailableinthesurroundingcode iv thatstringrelated bugs occur across all parts of applications including thecore components and v that almost none of these bugs are detected by existing static analyzers.
our findings not only show the importance and prevalence of string related bugs but they help developerstoavoidcommonmistakesandtoolbuilderstotackle the challenge of finding and fixing string related bugs.
ccs concepts software and its engineering software defect analysis.
keywords strings software bugs string related bugs empirical study this work was supported by the european research council erc grant agreement and by the german research foundation within the concsys and perf4js projects.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation onthe firstpage.copyrights forcomponentsof thisworkowned byothersthan the author s mustbehonored.abstractingwithcreditispermitted.tocopyotherwise or republish topostonserversortoredistributetolists requirespriorspecificpermission and or a fee.
request permissions from permissions acm.org.
ase september virtual event australia copyright held by the owner author s .
publication rights licensed to acm.
acm isbn ... .
reference format aryaz eghbali and michael pradel.
.
no strings attached an empirical study of string related software bugs.
in 35th ieee acm internationalconferenceonautomatedsoftwareengineering ase september virtualevent australia.
acm newyork ny usa 12pages.
introduction programs are full of strings.
the reason why strings are so popular in programming is that they can express semantically richand complex information while providing maximum flexibility.for example programmers use strings to filter user provided in puts using regular expressions and to build textual outputs of a program.
strings also play an important role in dynamic programmingpatterns such asreflection likeaccessof anobjectproperty based on the property name.
to inspect manipulate and create strings mostprogramminglanguagesprovidearichsetofstring apis.finally stringsoftenalsoserveasaninterfacetootherformal languages e.g.
whenembeddingdatabasequeries shellcommands or document markup code via a string.
the prevalence of strings in programming leads to a wide range of possible string related mistakes.
when manipulating strings programmers may accidentally misuse some api use a wrong regularexpression orforgetaboutsomespecialstringvalue.whenembeddingcodeinanotherformallanguageintotheprogramviaastring programmersmaywritesyntacticallyincorrectcodeorrefer to non existing identifiers.
even when using simple string literals e.g.
torepresentfilepathsorenum likeproperties programmers mayeasilyintroducetyposorforgettoupdateastringwhenthe program evolves.
unfortunately most compilers and bug detection toolsareoflittlehelpbecausetheyrarelyreasonaboutthevalue of a string variable or how it relates to the rest of the program.
despite the omnipresence of strings and the various potential mistakes related to them little is currently known about string related bugs.
this lack of knowledge has several negative con sequences.
first developers are likely to repeat the same mistakesagainandagain.ifrecurringstring relatedbugpatternswere known developerscould derivebestpractices toavoid them.second creatorsof bug detectiontechniques e.g.
staticand dynamic analyses andofautomatedprogramrepairtoolsdonotknowwhat kinds of problems are most pressing.
third designers of apis and programminglanguages whomaywanttopreventsomeclasses of bugs by design can only guess what mistakes developers suffer from.
this paper presents the first empirical study of string related bugs in widely used real world software.
to address the lack of 35th ieee acm international conference on automated software engineering ase knowledge about this class of mistakes we ask the following research questions rq what are the main root causes of string related bugs?
rq what consequences do string related bugs entail i.e.
whatkinds ofmisbehaviordo theycauseandhow dothese bugs surface?
rq how do developers fix string related bugs?
rq what kinds of software components or parts of an application are most affected by string related bugs?
rq5 howeffectivearewidelyusedbugdetectiontoolsat finding string related bugs?
toaddressthesequestions wesystematicallystudystring related bugs in a diverse set of real world javascript projects.
choosing javascriptasthetargetlanguageismotivatedbythefactthatstrings playaparticularlyimportantroleinthislanguage.onereasonis that javascript is widely used in the web where strings are heavily used to manipulate websites and to send data over the network.
another reason is the dynamic nature of the language which motivatesdevelopers torepresent andmanipulate variousconcepts as strings includingreferencestoprogramelementsandevencode itself.wesystematicallygatherasetof204string relatedbugsfrom 13popularopen sourceprojects.
eachbugconsists oftheincorrect code the fix applied by the developers and some informal description of the problem.
beyond our study this dataset will support futureworkonstring relatedbugs e.g.
onfindingandfixingthese problems.
our main findings include the following thevastmajority .
ofstring relatedbugsarecaused by one or more recurring kinds of root causes.
these root causepatternswillguidefutureeffortstowardfindingstringrelated bugs.
themostprevalentrootcausesareincorrectstringliterals andincorrectregularexpressions and37 respectively making these two problems prime targets for bug detection techniques.
manybugscausetheprogramtoproduceincorrectoutput or to corrupt a file while only of the bugs leadtoanerrormessage i.e.
anobvioussignofmisbehavior.
theseresultsunderlinetheneedforclevertestoracles beyondgenericsignsofmisbehavior suchaserrormessages.
asignificantfractionofthebugs manifestonlyinsome environments e.g.
aspecificoperatingsystemorbrowser.
this finding motivates the automated analysis of code in different environments.
string related bugs affect all components of the studied software systems with of thebugs affecting thecore functionality of the project showing that string related bugs are an important class of problems.
mostbugs arefixedbymodifyingasinglelineofcode making them a promising target for automated program repair .
forasignificantfractionofthebugs allcodetokens required in the fix occur within the same file in the vicinity ofthefixlocation.moreover ofthebugshaveatleast oftheingredientsinthevicinity.theavailabilityofsuch repair ingredients will facilitate automated repairing efforts.
a widely used static code analyzer finds only one out of the studied bugs.
this result confirms an earlier finding thatstaticanalyzersmissmostbugs andshowsthatthis finding holds for string related bugs in particular.
in summary this paper contributes the first systematic study of string related bugs findings about the root causes consequences andotherpropertiesofthesebugs evidencethatdevelopersneedtoolstofindandfixstring relatedbugs adocumented dataset of bugs.
our dataset will be available as a reference pointforfutureworkonbestpracticesfordevelopers bugdetection tools automated repair tools and the design of string related apis and programming language features.
methodology .
scope to conduct a systematic study of string related bugs it is essential tohaveacleardefinitionofwhatbugsareconsideredstring related and which types of those bugs fall into the scope of this study.
we definethreecriteriaforselecting thesubjectsofourstudy which we describe and illustrate with examples in the following.
criterion bug.
the study focuses on bugs i.e.
problems in the sourcecodethatcausethefunctionalbehavioroftheprogramto diverge from the expected behavior.
the problems can range from codecrashesoveromittedbehaviortoincorrectoutputmessages.in contrast new features and any other kinds of code improvements e.g.
refactorings are not considered in the scope of this study.
criterion2 string onlyproblem.
wefocusonstring relatedbugs which we define as bugs that are possible only with strings or customstringwrappers.thiscriterionexcludesbugsthatcoincidentally involve a string value but that may just as well happen with another data type.
for example although the following examplefromthesocket.ioframeworkinvolvesstrings itdoesnot fulfill our criterion varorigin this.req.headers varorigin this.req.headers the reason is that forgetting to set a default value for a variable may happen for several other data types.
for example the above bug could also happen with a number that should be initializedto zero by default.
in contrast the following bug from the npmpackage manager is caused by a faulty regular expression i.e.
it cannot happen with a data type other than string u u.replace git ssh .replace git u u.replace git although comments in the code are sequences of characters and hence similar to strings we exclude fixes in comments fromthe study as comments are not strings.
thus this wrong type declaration in the mongoose tool ... param number val param string val ... 957or this typo in a comment that provides a code example in facebook s react framework ... var reactcomponentwithpurerender var reactcomponentwithpurerendermixin ... are not considered string related bugs.
criterion3 programminglanguagefile.
string relatedcodechanges may happen in documentation or configuration files.
the study focusesonbugsinprogramminglanguagefiles though because our goal is to gain insights for program analysis of code written in turing complete languages.
for example this criterion excludes version number changes in configuration files.
likewise if a json file contains some scripts it also is beyond the scope of this study.
forexample thefollowingincorrectcommandforrunningthetests of the socket.io framework is not considered in the study scripts test make test test mocha reporter dot slow 200ms bail .
data all widely used programming languages support strings.
we focus our study on string related bugs in javascript code which is motivatedbythreereasons.first javascripthasbecomeoneofthemost popularlanguages oftentimesevenreportedasthemostpopular language of all .
second javascript code covers a wide range of application domains.
while traditionally javascript has been mostlyusedforclient sidewebapplications ithasbecomepopular forserver sideapplications mobileapplications cloudapplications andmanyothers.asaresultofthefirsttwopoints therearemany open sourceprojectstostudy includingprojectsbackedbylarge software organizations such as facebook and mozilla and smaller community drivenprojects.third stringsplayanimportantrole in javascript perhaps even more than in other languages because theyareheavilyusedtomanipulatewebsites tosenddataoverthe network or to represent