ams generatingautomlsearchspacesfromweakspecifications jos p.cambronero massachusettsinstituteoftechnology cambridge u.s.a. jcamsan mit.eduj rgencito tuwien vienna austria massachusettsinstituteoftechnology cambridge u.s.a juergen.cito tuwien.ac.atmartinc.rinard massachusettsinstituteoftechnology cambridge u.s.a. rinard csail.mit.edu abstract weconsiderausagemodelforautomatedmachinelearning automl inwhichuserscaninfluencethegeneratedpipelinebyprovidingaweakpipelinespecification anunorderedsetofapicomponents fromwhichtheautomlsystemdrawsthecomponentsitplacesinto thegeneratedpipeline.suchspecificationsallowuserstoexpress preferencesoverthecomponentsthatappearinthepipeline forexampleadesireforinterpretablecomponentstoappearinthepipeline.
we present ams an approach to automatically strengthen weak specificationstoincludeunspecifiedcomplementaryandfunctionallyrelatedapicomponents populatethespaceofhyperparameters andtheirvalues andpairthisconfigurationwithasearchprocedure toproducea strongpipelinespecification afulldescriptionofthe searchspaceforcandidatepipelines.amsusesnormalizedpointwise mutualinformationonacodecorpustoidentifycomplementary components bm25asalexicalsimilarityscoreoverthetargetapi s documentation to identify functionally related components and frequencydistributionsinthecodecorpustoextractkeyhyperparametersandvalues.weshowthatstrengthenedspecificationscan producepipelinesthatoutperformthepipelinesgeneratedfromthe initialweakspecificationandanexpert annotatedvariant while producingpipelinesthatstillreflecttheuserpreferencescaptured intheoriginalweakspecification.
ccsconcepts softwareanditsengineering search basedsoftwareengineering automaticprogramming theoryofcomputation programspecifications.
keywords automated machine learning program mining search based software engineering acm reference format jos p. cambronero j rgen cito and martin c. rinard.
.
ams generating automl search spaces from weak specifications.
in proceedings of the 28th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse november 8 13 virtual event usa.
acm new york ny usa pages.
esec fse november 8 13 virtual event usa copyright held by the owner author s .
acm isbn .
introduction automatedmachinelearning automl promisesto democratizetheuseofmachinelearningtechniquesbyendusers allowing non experts access to a tool that has become standard fortacklingresearchandapplicationsacrossdomainsasdiverseas medicine finance andsoftwareengineering .automl toolstypicallytakeasinputatabulardatasetalongwithaclassificationorregressiontask i.e.predictaparticularcolumn andgenerate an optimizedcomposition of machine learning operators drawn fromatargetapi toproduceanexecutablepipeline.
atthecoreofautomltoolsliesearchproceduresthatgenerate andevaluatepossiblepipelinecandidates.undertheprevailingusagemodel theendusertreatstheautomltoolasablackbox whichproducesapipelinethatoutperformsothergeneratedcandidatesbasedonsomepredictiveperformancemetric e.g.f1score .
in this setting the end user has no direct way of influencing the pipelinechosenbythesystem.however ausermayneedtoexpress preferences beyondmaximizingapredictiveperformancemetric to satisfyconstraintssuchaspipelineinterpretability domain specific bestpractices anddatascalingconstraints forexample.
weproposetheuseofa weakpipelinespecification asawayto providepartialuserpreferencestotheautomltool.aweakpipeline specificationconsistsofanunorderedsetofapicomponentsthat theendusermaywanttoappearintheresultingpipeline.thisspecificationcanbeautomaticallyextendedtoproducea strongpipeline specification thatcapturesadditionalapicomponentsofinterest definesasetofhyperparametersandvaluestosearchover andasearch proceduretosamplecandidatepipelines.thestrengthenedpipeline specificationcantheninfluencetheoutputpipelineproducedbythe automltoolbyconstrainingthesearchspace.
forexample theusermightprovidethescikit learncomponent logisticregression as a weak specification.
strengthening this specificationcouldaddotherlinearmodels e.g.linearsvm would specifydifferenttypesofregularization e.g.l1 l2 andtheirweights andwouldincludethesearchprocedure e.g.geneticprogramming usedtosamplepipelines.thisproposedmodelofinteractionallows theendusergreatercontrolovertheeventualoutputpipeline withoutnegatingthekeyadvantageofautoml theuserneednotbean mlexpert.
weintroduceams figure asystemthatautomaticallystrengthensautomlsearchspacespecifications.tocarryoutthisstrengthening ams exploits information in a code corpus and the target api sdocumentation.first amsautomaticallyminespairsofcomplementaryapicomponentsfromtheselectedcodecorpus where twocomponentsarecomplementaryiftheyco occurfrequently.to formalizethisminingprocedure amsusesnormalizedpointwise 763this work is licensed under a creative commons attribution international .
license.
esec fse november8 virtualevent usa jos p.cambronero j rgencito andmartinc.rinard search procedure weak specification optimized pipelinedatasetfunctionally related api componentshyperparameters and values code corpus complementary api components api documentationstrong specification search figure ams system diagram.
system boundaries are depicted as a dashed line.
the user provides a weak specification which is automatically extended by ams to include complementary functionally related api components and keyhyperparametersandasetofpossiblevalues.
mutualinformation torigorouslycharacterizeco occurrencein probabilisticterms.theseminedassociationscanthenbeusedto extendtheinitialweakspecification.next amsidentifiesunspecifiedapicomponentsthatmaybefunctionallyrelatedtothoseinthe originalspecification.toreasonaboutcomponentsimilarity ams appliesbm25 apopularandeffectivemeasureoflexicalsimilarity overtheapi sdocumentation.withthismetric amscanidentify componentswiththehighestdegreeofrelationtothoseintheoriginalspecification.next giventhatmachinelearningpipelinesare knowntoexhibitdifferentperformancebasedonhyperparameter values amsusesfrequencydistributions estimatedfromthe selectedcodecorpus todefineahyperparametersearchspacefor eachcomponentintheextendedspecification.finally amspairs this component configuration with a search procedure which is usedtosamplecandidatepipelinesfromthegivenspace.
weempiricallyevaluateams spredictiveperformance interms ofmacro averagedf1score over9datasetsand15weakpipeline specifications.ourresultsshowthat withtwodifferentsearchprocedures amsproducespipelinesthatoutperformthepipelinesobtainedusingtheinitialweakspecificationandanexpert annotated versionoftheweakspecificationincludinghyperparametersand values.toquantifytheextentofoutperformance weusetheconcept ofawin.apipelinewinswhenitobtainsthehighestscoreonaspecification datasetcombination andsatisfiesaminimumpredictive scoredifferencetoruleoutcomparablescores.
whenusinggeneticprogrammingasasearchprocedure ams s specificationsresultin38winscomparedto12undertheweakspecificationextendedwithanexperthyperparameterspace.whenusing randomsearchasasearchprocedure ams sspecificationsresult in41wins comparedto 14wins under the weakspecificationextendedwithanexperthyperparameterspace.wealsofindthatthe pipelinesproducedusingams sspecificationqualitativelyreflect theinfluenceoftheweakspecification.
tosummarize thispapermakesthefollowingcontributions we present a novel approach to automatically strengthen pipelinespecificationsforautomltools allowingusersto influencethefinalgeneratedpipeline.ourapproachreliesonaprobabilisticcharacterizationofco occurringapicomponents lexicalsimilarityoveralternativecomponents api documentation andfrequencydistributionsforhyperparameterspaces.
weimplementthisapproach andshareourevaluationdataset inanopen sourcesystemcalledams1.
weevaluateamsusing9datasetsfromanexistingautoml paper 15weakpipelinespecifications andtwodifferent searchprocedures.ourresultsshowthatams sstrengthened specificationsproducehigherperformingpipelines.when usinggeneticprogramming amsspecificationsproduce38 winscomparedto12fromanexpert annotatedvariantofthe weakspecification and9fromtheoriginalweakspecification.
weseeasimilarnumberofwinswhencomparingapproaches usingrandomsearch.
wequalitativelyshowthatthedistributionofcomponents intheoutputpipelinesproducedusingamsspecifications reflecttheinfluenceoftheinitialweakspecification.
inthefollowingsectionswereviewthebackgroundonautoml section2 introducethenotionofpipelinespecifications section provideanillustrativescenariofortheuseofams section detail theapproachanddesignofams section presentexperimentalresults section providecontextonrelatedwork section outline possiblethreats section andconclude section .
automlbackground wefirstformallyintroduceautomlforclassification .letd d rn m nnbeadatasetcomprisedofamatrixof nobservations each withmrealcovariates andavectorof nnaturalnumberlabels.let h rn m nnbethetypeofapipelineprogramdefinedasacompositionofpreprocessingandlearningalgorithms implementedas apicomponentsinatargetlibrary alongwiththeircorresponding hyperparameter settings.
a pipeline takes a dataset and predicts labelsbasedoncovariates.let sbethesearchspaceofallpossible pipelineprograms.let e e h d rbeanevaluationfunction thatscorestheabilityofapipelinetosuccessfullypredictlabelsand generalizetounseenobservations e.g.cross validatedf1score .let cost c h d rbe a cost function that evaluates pipeline executiontimeonadataset d andb rbeasearchtimebudget.
thenautomlcorrespondstotheoptimizationproblem argmax h se h d s.t.
summationdisplay h scost h d b giventhatthepossiblespaceofpipelines sisexponentiallylarge it is impractical to evaluate every pipeline in swithin the given budgetb.effectiveautomlsystemswillthereforetypicallyhaveto performasearchoverthespace evaluatingonlyasubsetofpipelines.
theautomlsystemiterativelysearchesandevaluatespipelinesin s keepingtrackofitsestimateofthebestpipeline.
existingautomlsystemsemployavarietyofsearchstrategies to identify candidate pipelines.
these strategies include genetic programming bayesianoptimization reinforcementlearning program analysis basedsearch andrandomsearch .
764ams generatingautomlsearchspacesfromweakspecifications esec fse november8 virtualevent usa toimprovetheeffectivenessofthesestrategies systemsmayalso incorporatepriorknowledgeaboutpipelineperformanceorimpose additionalstructureonthecandidatepipelinesthatcanbegenerated.forexample anautomlsystemmaywarmstartthesearchby incorporatingpreviouslysuccessfulpipelines conditionon textualdatasetandalgorithmdescriptions manuallyconstrain thesubsetofalgorithmsavailableforpipelinedefinitions or constraintheshapeofpossiblepipelines .thelattertwoprovidewaystorestrictthetypeofpipelinesproduced however they requireuserinvolvementandexpertise.inthefollowingsection we presentanapproachthatbridgesthisgap.
pipelinespecifications thecurrentusagemodelforautomltypicallyemphasizesthelack ofuserinvolvement .underthismodel theuserpresentsthetool withtheirtargetdataset forwhichtheywanttolearnaclassification pipeline setssomecomputationalbudget runsthetool andaccepts thepipelineproducedbytheautomltool.inthiscontext theautomltoolreceivesnouserfeedback beyondtheinputdataset and theuserisunabletoinfluencethepipelinesconsideredbythesearch procedure.withoutanyformaluserfeedback theautomltoolisunableto1 exploitanyuserdomainknowledgeor2 provideapipeline thatsatisfiesanydesireduserconstraints e.g.interpretability .
mostexistingautomltoolsconstructapipelinebycomposing and configuring api components drawn from a higher level ml library suchasscikit learn .
definition3.
.
apicomponent.anapicomponent inthecontext ofourpaper referstoapubliclibraryfunctionorclassthatcanbe composedwithothercomponentstocreateanmlpipeline.most apicomponentsprovideadditionalconfigurationoptionsthrough theuseofoptional defaultparameters.
weproposetheuseof weakspecifications asawayforautoml userstoinfluencethepipelinesproducedbyautomaticallysubsettingtherelevantsetofapicomponents thusconstrainingthesearch spaceforcandidatesgeneratedbytheautomltool.
definition .
.
weak specification.
a weak specification is an unordered setofapicomponents atleastoneofwhichisaregressor ifperformingaregressiontask oraclassifier ifperforminga classificationtask .
byprovidingasetofapicomponentsauserprovides partial informationregardingwhattheywant specificallyasetofalgorithms e.g.classifiers preprocessors thatshouldbeconsideredforpipeline generation.wecallthistypeofspecification weakasitisincomplete alongfourkeydimensions itdoesnotspecifywhathyperparametersarerelevant itdoesnotspecifywhatvalueshyperparameterscantakeon otherrelevantapicomponentsmaybemissing itdoesnotspecifyanyorderorcompositionaloperatorsused togeneratenewpipelinesfromthesecomponents providingaweakspecificationallowsausertoexertinfluence onthefinalpipelineproduced whileatthesametimenotrequiringdeepapiormachinelearningexpertise astheydonothaveto manuallydetailthecompletespace.forexample ausercanenforce adegreeofinterpretabilityontheoptimizedpipelinebywritinga specificationwithasinglelinearmodel e.g.logisticregression .definition3.
.
strongspecification.let hcbeamapfromasubset ofhyperparametersforcomponent ctoacollectionofpossiblevalues.
letcbeamapfromcomponent itoitsrespective hi.letpbeasearch proceduretogeneratecandidatepipelines.astrongspecificationis atripleoftheform c h1 ... hn p .
a strong specification in effect defines a search space for an automltool.weproposethatthisspacecanbederivedfromthe weakspecification whichexpresses partial userpreferences.
in the following sections we detail our approach to automaticallystrengtheningweakspecificationstoinfluencetheautoml search process.
but first we introduce an illustrative scenario to demonstrateausecaseforams.
illustrativescenario wefollowthejourneyofaforensicscientistwhoisnotamachine learningexpertbutwantstoclassifyglassfragments .the forensicscientisthasahighlevelunderstandingofdifferentlearningandpreprocessingalgorithmsbutisnotawareofthevarious hyperparameters possiblevalues orothersuitablealgorithmsto consider.thescientisthasheardofautomlandthinksthismight be a suitable tool to explore pipelines.
however they have clear constraints notree basedensemblemodels asthepipelinesneed tobeeasilyinterpretable.unfortunately automltoolsareknown to often produce tree based ensemble models which are challengingtointerpret .
theyspentsometimeontheinternetandfoundarelatedtutorial thatdetailedascikit learn pipelinethatmayworkfortheiruse case case1intable .
thescientistwillusethisexamplepipeline withnohyperparametersorvalues asaweakspecification.toevaluatetheirprogress theywilluseanexistingclassificationdataset glass consistingofcontinuousmeasurementsfor7typesofglass.thescientist performs a random split for training testing and evaluates pipelinesusingmacro averagedf1score.
thescientiststartsbynaivelyrunningtheirspecificationdirectly asapipelinewithdefaulthyperparameters whichresultsinaninitial f1scoreof .
.nextthescientistusesthespecificationcomponents withdefaulthyperparameters asaconfigurationfortheautoml tooltpot whichusesgeneticprogrammingtogeneratecandidate pipelines.
applying tpot to the weak specification with nohyperparametersdefinedinthesearchspace resultsinabetter scoreof0.
.
afterconsultingwithamachinelearningcolleague thescientist setsupadefinedhyperparameterspace i.e.whichhyperparameters totuneandsetofpossiblevalues foreachcomponentinthespecification.thescientistthenappliesthesamegeneticprogramming searchtothenewconfiguration resultinginpipelinenumber3in table1.notethattheshapeoftheoptimizedpipelineisthesameas inthepriorstep butnowtheregularizationpenaltyanditsweight varies.thisstepraisedtheirscoreto0.
.
thescientistnowgoesbacktotheoriginalweakspecification andusesamstoautomaticallystrengthenthisweakspecification ratherthanmanuallyspecifyingthefullspace .amsextendsthe weakspecificationusingacodecorpusandtheapi sdocumentation.
applyingthesamesearchproceduretoams sspecificationnowresultsinthehighestscoreof .
.thefinalpipelineretainspolynomial 765esec fse november8 virtualevent usa jos p.cambronero j rgencito andmartinc.rinard features butreplacesthevariancethresholdselectorwithaselector basedonaspecifiedfalsepositiverate.thepipelinethenstacksa sgdclassifier withhingeloss anduseslogisticregressionwithan l1penalty toproducesparsecoefficients .thisembodiesthespirit oftheinitiallygivenspecification butsubstantiallyoutperformsthe restoftheapproaches.
table1 summaryofscenarioiterationsbasedonthe glass dataset showing the progression of score improvements.
notethatcomponentnamesareabbreviatedforbrevity.
pipeline description score 1polyfeatures minmaxscaler variancethreshold logisticregressioninitial naive weak specification as a pipelinewithdefaulthyperparameters.
.
2stackingestimator logisticregression logisticregressionapplying automl tool tpot genetic programming to the original specification without defining any hyperparameters.
.
3stackestimator logisticregression penalty l1 cost logisticregressionsameas butwithexpert definedhyperparameter space for regularization cost andpenalty.
.
4polyfeatures selectfpr stackingestimator sgdclassifier logisticregression penalty l1 cost applying genetic programming to the strong specification generated by our approach ams given the weak specification.
.
ams weintroduceams asystemthatautomaticallystrengthensweak pipelinespecificationsusinganexistingcodecorpus anapi sdocumentation andaplug insearchprocedure.figure 1showsadiagram ofthesystem.amstakestheuser sweakspecificationasinput.the systemfirstextendsthesetofapicomponentsconsideredinthe specification.toperformthisextension amsreliesonacodecorpus whichexercisesthetargetapi andontheapi snaturallanguage documentation.afterthespecificationhasbeenextended amsuses thecodecorpustoidentifykeyhyperparametersfortheapicomponentsinthespecificationandincludesetsofpossiblevaluestheycan takeon.amsthenpairsthissetofcomponentconfigurationswitha searchproceduretoproduceastrongspecification.thesearchprocedurecanthenbeusedtoiterativelysampleandevaluatecandidate pipelines resultinginafinaloptimizedpipeline.
wenowpresentdetailsoneachstepintheamssystem.
.
unspecified butuseful apicomponents amsfirstextendstheinitialspecificationwithadditionalcomponents whichtheusermaynothaveincluded.givenaspecification sandanewcomponent c cmaybeaddedto sifitsatisfiesoneof thefollowingtwoconditions ciscommonlyusedwithacomponent alreadyin s orccouldreplaceacomponentalreadyin s. thegoalofthefirstconditionistoidentify complementarycomponents.forexample ifaclassifierisoftenusedwithaparticular preprocessingstep wesaythesecomponentsarecomplementary.
thegoalofthesecondconditionistoidentify functionallyrelatedcomponents whicharealternativestoeachother.forexample two differentlinearclassifierswouldbeconsideredfunctionallyrelated.
amsreliesontwodifferentsourcesofinformationtoidentify componentsthatsatisfyeachoftheseconditions.wefirstaddress complementarycomponents.
.
.
complementary components.
to identify complementary components amsexploitsinformationfromacrowd sourcedcorpusofscripts whichexercisethetargetapi.eachscriptinthecorpus waswrittentotargetasingledataset thereforetwocomponents usedinthesamescriptmaybecomplementary.byusingacodecorpustoidentifysuchcomponents amscanautomaticallyproduce andupdateitsinventoryofcomplementarycomponentstoreflect currentmlpractices.
fromthecodecorpus thesystemextractsallscriptsthatcontain acalltoourtargetapilibraryandrecordsthesetofapicomponents usedineachscript.theintuitionisthatthesesetscanbeusedto measurethelikelihoodofcomponentsco occurring andthatcomplementarycomponentsmust bydefinition co occurmorefrequently.
formally wecomputethenormalizedpointwisemutualinformation npmi over the collection of all unordered pairs of co occurringapicallsinourcodecorpustoidentifycomplementary components.let xandybetworandomvariables representing possiblecomponents definedoverthethedomainofourtargetapi library.wedefinenpmifortwocomponents x xandy yas npmi x y log2 parenleftbigp x y p x p y parenrightbig log2 p x y wherep x isthefractionofpairswhereeitherelementis xdivided bythenumberofallpairs similarlyfor p y andp x y isthefraction ofpairs x y or y x dividedbythenumberofallpairs.
npmirangesbetween 1and1 where 1meansthecomponents never co occur means the components always co occur and meansthecomponentsareindependent.wecomputethenpmiover thesetofallpairsofco occurringcomponents i.e.apicomponents calledinthesamescript .eliminatingpairswithannpmilessthan orequaltozeroyieldspairsofvaryingdegreeofcomplementarity.
when given a weak specification we can identify all npmipositivepairsthatshareacomponentwiththespecification.foreach suchpair thenewpotentialcomponentcorrespondstotheelement inthepairthatisnotintheoriginalspecification.ifmorethanone componentintheoriginalspecificationsupports i.e.co occurswith anewcomponent wecomputeanaveragenpmi.foreachpossible newcomponent wecomputeaweightedsumoftheaveragenpmi andthefractionoforiginalspecificationcomponentsthatsupport it.theweightedsumbalancesaveragenpmiandsupportfraction basedonauser definedweight .wethentakethetop kcomp newcomponentsandaddthemascomplementarycomponentsto theoriginalspecification.algorithm 1describesthisprocedure.
.
.
functionally related components.
the goal of identifying functionallyrelatedcomponentsistoincludealgorithmalternatives inthespecification.forexample theuser sweakspecificationmay indicate that they are interested in using linear models but they mayhavenotexhaustivelylistedalllinearmodelalternatives.this taskraisesthechallengeofreasoningaboutthesemanticsofapi 766ams generatingautomlsearchspacesfromweakspecifications esec fse november8 virtualevent usa algorithm1 extractingcomplementarycomponents input acollection pofpairsofapicomponentsco occurringinacode corpus afunction npmithatcomputesthenormalizedpointwisemutual informationoftwoapicomponents aspecification s c1 ... cn a weight tocombinenpmiandsupportfraction andaninteger kcompforthemaximumnumberofcomplementarycomponentstotake.
output anewspecification s extendedwithatmost kcompnewcomponents.
procedure complementarycomponents mapfromco occurringpairtoaccumulatorlistofnpmiscores npmis forc s p1 p2 pdo if c p1 p2 p1 nelements p2 nelements then new p2ifc1 p1elsep2 accumulatethenpmiscore npmis npmis npmi p1 p2 computeaveragenpmiandsupportfraction combineusing tocreatescore scores n len s forcomp npmisdo vals npmis scores avg vals parenleftbiglen vals n parenrightbig s s gettopk scores kcomp components.ratherthanreasonaboutcomponentsemantics we relyonasimplernotionofsimilarity.
we would like to define a function sim c1 c2 that computes a scorefortwoapicomponents c1andc2 suchthatahigherscore correspondstohigherdegreeofsemanticsimilarity.givenacomponentci wecanthensortallpossiblecomponentsinourtargetapiin descendingorderbasedontheirsimilarityscorewithrespectto ci.
amsexploitsthefactthatthetargetlibraryhasnaturallanguage documentationforeachcomponent aspartofitsdeveloperdocumentation whichweassumedetailskeyaspectsabouttheirfunctionalbehavior.byminingtheapi sdocumentation amscanbe usedtoautomaticallyidentifyfunctionallyrelatedcomponentsin new target libraries or new versions of previously used libraries withouttheneedforextensiveexpertannotation.
wedefine sim c1 c2 tobecomputedoverthedocumentation2for c1andc2andinstantiateittoaclassicalrelevance similarityscoring technique bm25 .bm25 detailedbelow producesascorefor a document given a query and a corpus of documents.
a higher scoreindicatesahigherdegreeoflexicalcorrelationbetweenthe documentandthequery.
bm25 d q n summationdisplay iidf c qi f qi d k1 f qi d k1 parenleftbig b b len d avglen c parenrightbig wheredisadocument q q1 ... qn isaquerycomprisedof qi terms cisacorpusofdocuments and k1andbarescorehyperparameters3.
2weperformstandardpreprocessingofthedocumentationstringssuchastokenization stemming andextensionwiththepathofthegivencomponentinthelibrary smodule structure.
3we use the gensim bm25 implementation where k1 .5andb .75are implementation definedconstants.inoursetting thedocumentationforanexistingcomponentinthe weakspecificationcorrespondstothequery aparticularapicomponent sdocumentationcorrespondstothedocument andtheentirety oftheapi sdocumentationcorrespondstothedocumentcorpus.
amsuses simtoretrieve andappend thetop krelnewcomponentsforeachcomponentintheoriginalweakspecification i.e.
we donotconsideranycomplementarycomponentsaddedforpurposes ofthisprocedure .algorithm 2describesthisprocedure4.
algorithm2 extractingfunctionallyrelatedcomponents input acollection cofapicomponents amap mfromapicomponent todocumentation afunction simthatcomputesthebm25scorebetween aquerystringandadocument aspecification s c1 ... cn andan integerkrelforthemaximumnumberoffunctionallyrelatedcomponents totakepercomponentin s. output anewspecification s extendedwithatmost krelfunctionally relatedcomponentspercomponentintheoriginalspecification.
procedure functionallyrelatedcomponents setofemptyapicomponents extension forc sdo scored c sim m m forc cifc nelements ck gettopk scored krel extension extension ck s s extension .
identifyinghyperparametersandvalues machinelearningpractitionersoftenspendasignificantamount oftimenotjustchoosingpipelinecomponents butalsotuningthe hyperparametersassociatedwitheachcomponent.performancecan significantlyincreasebyidentifyingtheappropriatehyperparameter valuesforagivendatasetandpipeline .
amsreliesonthecorpusofscriptsthatmakecallstothetarget apitoidentifythesetofrelevanthyperparametersandpossiblevalues.thisdesignchoicehypothesizesthatanautomlsystemshould focus on tuning the set of hyperparameters and hyperparameter valuesthathumandevelopersfocusontuning.
foreachscriptinourcodecorpusthatimportsthetargetapi we parsethesourcecodeandidentifycallstoapiclassconstructors.
weextractthesetofoptionalargumentsineachconstructorcalland recordeachpairof argumentname argumentvalue asahyperparametersetting.thevaluerecordedcorrespondstoaconstantinthe constructorcall orpointstoanunknownplaceholder.
whengivenaspecification amstakeseachapicomponentand identifiesthesetoftop kparamshyperparameternamesobservedin theminedcodeforthatcomponent alongwiththetop kvalsvalues observedforeachofthenames.amsaddsthedefaultvalueforeach hyperparametertothesetofpossiblevalues obtainedbyintrospectingtheclassdefinition andthenemitsthisasthecorresponding hyperparametersearchspace.algorithm 3describesthisprocedure.
figure2showsaspecification originallyjust sklearn.linear model .logisticregression extendedwithacomplementarycomponent algorithm afunctionallyrelatedcomponent algorithm and hyperparametersandvalues algorithm .
4amsalsoexposesfunctionalitytolabelaweakspecificationcomponentas include byappending or exclude byappending indicatingthatitmustbeincluded orexcludedfromthestrengthenedspecification respectively.
767esec fse november8 virtualevent usa jos p.cambronero j rgencito andmartinc.rinard algorithm3 addingapicomponenthyperparametersandvalues input a mappfrom api components to hyperparameter names and frequenciesobservedincalls amap vfromhyperparameterstovalues andtheirfrequenciesobservedincalls aspecification s c1 ... cn an integerkparamsforthemaximumnumberofhyperparameterstoconsider percomponent andaninteger kvalsforthemaximumnumberofvalues perhyperparametertoconsider.
output anewspecification s withatmost kparamshyperparameters percomponentandatmost kvals includingdefaultvalue perhyperparameter.
procedure hyperparamsandvalues emptymapfromcomponenttohyperparameterspace s forc sdo params gettopk p kparams emptyconfigurationforcomponent c cconfig forp paramsdo values gettopk v kvals appenddefaultvalue ifnotincluded values values getdefaultvalue p cconfig values s cconfig sklearn .
linear model .
logisticregression c penalty sklearn .
feature extraction .
text .
tfidftransformer sklearn .
linear model .
sgdclassifier loss penalty figure a weak specification extended with one complementary component one functionally related components and two hyperparameters values per component plus a potentialdefaultvalue ifdifferent .
.
searchprocedure tofullysatisfythedefinitionofastrongspecification amsmust add in a specific search procedure to the extended specification.
amsallowstheuseofdifferentsearchprocedures whichcanbe pluggedintothesystem.inparticular thecurrentimplementationof amsexposesaplug ingeneticprogrammingsearchprocedure usingtpot andaconceptuallysimplerandomsearchprocedure implementedaspartofams scodebase.
.
.
geneticprogramming.
weusetpot ageneticprogrammingbasedautomltool asasearchprocedure.whenusingtpot weusethesearchspacedefinedbyamsastheconfigurationavailabletotheoptimizationprocess.
.
.
randomsearch.
ams simplementationincludesahierarchicalrandomsearchproceduretogeneratesequential i.e.apicomponentsarechainedinsequence pipelines.randomsearchisknownto performbetterforalgorithmconfigurationthanequallysimplealternativessuchasgridsearch andhasalsobeensuccessfullyapplied torelatedsoftwareengineeringareassuchasproductlineconfiguration .togenerateapipeline thesearchmodulesamplesadepth uptoabound thenforeachstepinthepipelineitsamplesanapitable npmi based association rules mined from our code corpus to identify complementary api components categorized by algorithmic role.
when both components in theassociationhavethesamerole weelideoneforbrevity.
ruletype rules meannorm.pmi sdnorm.pmi classifier .
.
classifier cluster .
classifier decomposition .
.
classifier featureextraction selection .
.
classifier preprocessor .
.
cluster decomposition .
.
cluster preprocessor .
cluster regressor .
.
decomposition featureextraction selection .
.
decomposition preprocessor .
.
decomposition regressor .
.
featureextraction selection .
.
featureextraction selection preprocessor .
.
featureextraction selection regressor .
.
preprocessor .
.
preprocessor regressor .
.
regressor .
.
componentfromtheconfigurationspecified.foreachhyperparameterinthechosencomponent sconfiguration thesearchsamplesa valueandsetsitinthatcomponent sconstructor.thesearchdistinguishesbetweenpreprocessingandclassifiercomponentstogeneratevalidcandidatepipelines i.e.thelaststepmustalwaysbeaclassifier .candidatepipelinesarecachedtoavoidre training evaluating pipelines however thereisnoefforttoexhaustivelysearchthespace andifapipelineisre sampledagivennumberoftimes 100inour implementation thesearchprocedureterminates.
evaluation wenowpresentourexperimentalresults whichevaluateindividual partsofoursystem rq1 rq3 rq5 andtheoverallperformanceof ams rq4 .first wecharacterizethecomplementaryapicomponentsextractedfromourcodecorpus rq1 .weevaluateams abilitytoretrievefunctionallyrelatedapicomponents rq2 .wethen characterizetheuseofhyperparametersandtheirvaluesinourcode corpus andevaluatethepossibilitiesforimprovingclassifierperformancebasedonthisinformation rq3 .weevaluateams sability toproducespecificationsthatresultinhigherperformance rq4 .
andfinally weexploretheimpactofthecodecorpussizeonams s minedhyperparametersandcomplementarycomponents rq5 .
forourevaluation weimplementedamsanditsevaluationin approximately5000linesofpython.weusescikit learn apopularpythonmachinelearninglibrary asthetargetapiforpipelines.
tominecomplementarycomponentsandidentifyhyperparameters values weusethemeta kaggle datasetasourcodecorpus.
themeta kaggledatasetcontainsover3300pythonscripts.
.
rq1 complementaryapicomponents amsmined285normalizedpmi npmi positiveassociationpairs fromourcodecorpus.theseassociationscover69differentcomponents .
ofallcomponentsinscikit learn .
table2detailsthedistributionofassociationsbasedonthealgorithmicroleofeachofthecomponents alongwiththeirmeanand standarddeviationnpmi.
768ams generatingautomlsearchspacesfromweakspecifications esec fse november8 virtualevent usa figure npmi based component extension can produce at least one complementary component for .
of our test observations with precision of approximately when kcomp .
toevaluatetheeffectivenessofthesenpmi basedcomponentextensions weconductthefollowingexperiment.wetakeeachscript inourcodecorpus andextractthesetofscikit learncomponents used.using10 foldcrossvalidation cv wesplitthiscollectionof componentsintoatrainingfoldandtestfold.weuseeachtraining foldtocomputenpmi andweusethecorrespondingtestfoldto evaluate.foreachset groundtruth inthetestfold wetakeeach componentindividuallyanduseitasaquerytermtoretrievethetop kcomp complementarycomponentsbasedonourapproach algorithm with .
.wethencomputeprecisionasthefractionofretrievedcomponentsthatarepresentinthefullgroundtruth componentset.notethatrecallisnotanappropriatemeasureof performanceforevaluatingcomplementarycomponents asrecall impliesourextensionsneedtobecomplete butbydefinitionwe willonlybeabletocovercomponentswithstrongco occurrence patterns.giventhis wefocusonprecision.
wefoundthat82.
ofthesetsinthetestfoldswerecovered i.e.
wewereabletoidentifyatleastonecomplementarycomponent .
forkcomp we found that our npmi based approach yields a precisionof60 .thisprecisiondeclinesasexpectedwhenweincreasekcomp withaprecisionofapproximately28 when kcomp .
basedontheseresults weconfiguredamstouse kcomp .figure3 summarizestheseresults.theselevelsofcomplementarycomponentretrievalsufficedforimprovedperformanceonourend to end benchmarks butfurtherimprovingcomplementarycomponentprecisioncoulddeliveradditionalgains.
.
rq2 functionallyrelatedapicomponents toevaluateams sretrievaloffunctionallyrelatedcomponents we manuallyannotatedourbm25 basedrankingofapicomponents foragivenquerycomponent.todetermineiftwocomponentswere functionallyrelated weoutlinedasetofconditionsthattheyshould satisfy.givenaspecificationcomponentq forquery andapossible extensioncomponentr forrelated wesaytheyarefunctionally relatediftheysatisfythefollowing rcouldreplaceqinapipelinewithoutraisinganexception forthesamedataset.
qandrbelongtothesameclassofoperators e.g.classifier regressor valuenormalizer decompositionalgorithm loss function .
top top top cutoff .
.
.
.
.
.
.
.
.8fraction functionally related approach embeddings bm25 randomfigure for randomly sampled query api components bm25 can retrieve close to and functionally relatedcomponentsbasedontop1 and10cutoffs.
if q r are classifiers regressors they must respect output shape constraints a multi task model can replace a single taskmodel butnotvice versa.
ifqis non linear rmustbealways non linearormust be non linearbasedonahyperparameter e.g.svmwitha linearkernel ifqisensemble based rmustbeensemble basedwithone exception rcanbenon ensemblebasedifitisrelated based ontheserules totheweakmodelclassensembledinq.
ifqisnotensemble based rmaybeensemble basedifituses aweakmodelclassrelatedtoqtocreateitsensemble.
tocarryoutourexperiment werandomlysampled50classes fromscikit learnandusedtheseasqueries.wechosetosample50 classesasthiscoversapproximately28 ofthecomponentsavailable inscikit learnandbalancedtheneedfordetailedmanualannotation.
foreachquery weretrievedthetop10apicomponentsbasedon ourbm25metric cosinesimilarityusingaveragedpre trainedneuralembeddings whichhavebeenshowntobeeffectivefortherelated taskofcodesearch and3 auniformrandommetric.weused tocomparetheuseofbm25withanotherunsupervisedapproach tosemanticsimilarity.weusedbertembeddingsderivedfroma scientifictextcorpus .weused asabaselinetocontrolforthe extenttowhichourtargetapi scikit learn mayhaveredundant componentsresultinginfunctionallyrelatedresultsthroughchance.
figure4presentsourresults.thebm25 basedrankingperformed comparably withnostatisticallysignificantdifference totheembeddingsbasedapproach.arandomrankingresultsinapproximately functionallyrelatedresults acrossthetop1 and10query results.incontrast bm25resultsincloseto72 and44 functionally related results across the same cutoffs respectively.
we optedtousebm25inams incontrasttotheneuralembeddings approach giventheircomparableperformanceandtheaddedadvantageofavoidingtheadditionalstoragerequirementsimposed byper tokenembeddings.
notethatwhileforpurposesofthisexperiment weallowfunctionallyrelatedcomponentstoincludeensembled variantsofnonensemble models in our tool implementation users can exclude ensemblesthroughasimplecommandlineflag.
whileweevaluatedfunctionally relatedapicomponentretrieval usingbm25andcosine similarityusingbertembeddings ams 769esec fse november8 virtualevent usa jos p.cambronero j rgencito andmartinc.rinard canuseotherinformationretrievalmetrics.wealsonotethatthe task of specification strengthening in the context of automl is relatedbutorthogonaltopureinformationretrieval.inparticular wegeneratea newsearchspaceconfigurationbasedonaweakspecification ratherthansearchingoverastored andpre enumerated setofconfigurations.
.
rq3 hyperparametersandvalues figure5characterizesthehyperparametertuningobservedinour codecorpus.inparticular wefoundthatover50 ofthecallstune i.e.explicitlysetavalueinthecall forunder20 ofthehyperparametersavailable 5a foraboutathirdofapicomponentstheset ofhyperparameterstunedissimilaracrosscalls 5b andforover ofthehyperparametersobserved usercallschoosefewvalues under10distinctvalues 5c .thisalignswithourintuitionthat humandeveloperstendtotuneasmallsetofhyperparameters these areconsistentacrossdatasets pipelines andtherearepopularvalues thatdeveloperschooseforeach.
todemonstratethepossibleimpactofhyperparametertuning weperformedthefollowingexperiment.wecollectedfivedatasets from the penn machine learning benchmarks pmlb .
the fivedatasetsarehealthcare relatedclassificationtasks.wecollected these5datasettobeindependentfromthoseusedinrq4.wethen identifiedthetop5mostcommonclassifiers5fromourcodecorpus.
foreachclassifier weextractedthetop3hyperparametersandtop values for each hyperparameter along with the default values.
weperformedgridsearchoverthesevaluestoevaluateallpossibleconfigurations.wethencomparedthebestmacro averagedf1 score fromthegridsearchwiththescoreobtainedunderthe defaultconfiguration.
figure6showsourresults.inalmostallcases thehyperparameter spacedefinedbythecodeexamplesinourcorpuscontainedasetting whichwouldhaveimprovedperformancewithrespecttothedefault configuration.fortheensemble basedclassifiers extratreesclassifierandrandomforestclassifier thisimprovementcouldhavebeen upto10 ontwoofthedatasets.
.
rq4 performanceofstrongspecifications ourperformanceexperimentscomparethefollowingapproaches weak spec.
runs an ordered version of the original weak specificationasapipelinedirectly.
weakspec.
search carriesoutaspecifiedsearchprocedure overthecomponentsdefinedintheweakspecification with defaulthyperparameters .
expert search usesthesetofhyperparameters valuesdefinedintpot sdefaultclassifierconfiguration foreach component in the specification and applies the specified searchprocedure.thischoiceofhyperparameterspacecorresponds to an expert automl developer identifying key hyperparametersandvalues.wealsoevaluatedwritingour ownhyperparameterspaceandfoundthatitperformedcomparablyorworse soweelideforbrevity.
5excluding svm which did not terminate within a reasonable computing budget withoutadditionaldatapre processingforthesedatasetstable components used to produce weak specification.
expert search uses tpot s pre defined hyperparameter searchspace foreachcomponent.
shortname component lr logisticregression rf randomforest dt decisiontree scale min maxvaluescaling poly extractpolynomialfeatures var variance basedfeatureselection pca pcadecomposition ams search appliesamstotheweakspecificationtoproduceafullsearchspaceandthenappliesthespecifiedsearch procedure.
fortheseexperiments weconsiderbothsearchproceduresavailableinams geneticprogrammingandrandomsearch.
table3presentstheindividualcomponentsusedtocreatethe weakspecificationsforourexperiments.wechosecomponentsthat coveredcommonmachinelearningoperations valuescaling featurederivation featureselection datasetdecomposition andvaried formsofclassification.foreachsuchcomponent wealsooutlinea subsetofhyperparametersidentifiedfortuningandtheirpossible values whichareusedinthe expert search approach.
weproduced15weakspecificationsbycombiningthefollowing5 pre processingweakspecificationswitheachofthethreeclassifiers lr rf dt asoutlinedintable no preprocessing scale poly scale poly scale var and poly scale pca var .
forourexperimentsweusedallclassificationdatasetsfromthe originaltpotpaper 9intotal.thesedatasetsare hill valleywith noise hill valley without noise breast cancer wisconsin car evaluation glass ionosphere spambase wine quality red and wine quality white.alldatasetsareavailablethroughpmlb .
ourexperimentsusedmacro averagedf1scoreasaperformance metric where a higher score corresponds to better performance.
eachsearchprocedureusesthissamescoremetricintheirinternal searchloop.foreachbenchmark dataset andsearchprocedurecombination wecarriedout5 foldcross validation cv witheachofthe approachesoutlinedpreviously.ineachcviteration thetraining foldisusedtofindanoptimizedpipeline andthetestfoldisused forevaluation.allapproacheswereprovidedabudgetof5minutes percviteration i.e.25minutesperdataset foreachspecification andapproachcombination .
weevaluateamswiththefollowingconfiguration aweakspecificationcanbeextendedwithatmost3complementarycomponents kcomp wherethenpmi supportfractionweighingparameteris setto0.
.
foreachspecificationcomponentweincludeup to4functionallyrelatedcomponents krel andwetunethetop 3hyperparameterspercomponent kparams bychoosingfrom the3mostcommonvaluesperhyperparameter kvals .weset thedepthboundfortherandomsearchprocedureto4.
figure7presentsacountofthewinsforeachapproachacross both searchprocedures .
an approach winswhen the average ofthe5 foldcvtest foldperformancemetricisthehighestacross approachesforagivendatasetandweakspecificationcombination 770ams generatingautomlsearchspacesfromweakspecifications esec fse november8 virtualevent usa .
.
.
.
.
.
ratio of hyperparameters tuned to available .
.
.
.
.
.
.0empirical cdf calls a fractionofhyperparameterstuned .
.
.
.
.
.
mean jaccard distance of parameters tuned across calls .
.
.
.
.
.
.
.0empirical cdf components b distancebetweensetsofhyperparameters unique values in calls .
.
.
.
.0empirical cdf component hyperparameters c uniquehyperparametervaluesused figure5 characterizinghyperparametertuninginourcodecorpus.
figure possible improvements in macro averaged f1 score by using hyperparameter settings in our code corpus comparedtotheperformanceusingdefaults.
andthescoreisatleast1 inabsoluteterms higherthanthenext bestscore.weintroducedaminimumperformancedifferencethresholdtoeliminatecaseswheremultipleapproachesperformroughly equallyonaspecification datasetcombination.wevariedtheminimumdifferencethresholdfrom1 to5 absolute andfoundthat amsobtainedmorewinsthanotherapproachesinallcases.
whenusinggeneticprogrammingasasearchprocedure wesee thatweakspec.
obtained6winscomparedto9winsfor weakspec.
search.underrandomsearch weakspec.
obtained1winand weak spec.
search obtained12wins.
expert search obtained12wins whenusinggeneticprogramming and14winswhenusingrandom search.underbothsearchprocedures usingamsproducedthemajorityofwins 38inthegeneticprogrammingexperimentsand41 intherandomsearchexperiments.
figure8presentsthedistributionofthetop 10scikit learnoperatorsasafractionofthetotalcountofoperatorsinpipelinesproduced bygeneticprogrammingusingams sstrengthenedspecification fortwodifferentweakspecifications.forcomparison runninggeneticprogrammingoverthefullsearchspace asdefinedintpot s defaultclassificationconfiguration producespipelineswhere60 ofthemhaveanensemble basedmodel oneofgradientboosting extratrees xgboost orrandomforest andatleastonepipeline genetic programming random search search 40number of wins approach weak spec.
weak spec.
searchexpert search ams searchfigure wins for each approach across experiments.
withinagivensearchprocedure anapproach winswhenit obtainsthehighestaverage5 foldcvtest foldperformance for a dataset and weak specification combination andthis score is at least higher in absolute terms than the next bestscore.
produced in of the datasets includes such a component.
the skewtowardsensemble basedmodelshasbeenobservedinother automltoolsaswell .byusingamsausercanrestricttheuse ofensemble basedmodels forexample ifdesired.
comparisontootherprogram miningbasedautomltools.
wealso compared ams to al .
al mines dynamic program traces to learnaprobabilisticmodelformlpipelinesandusesthistogeneratesequentialpipelines.akeyadvantageofamsisthatuserscan strengthenspecificationswithouttheneedtocollectanewcorpus thatreflectstheirinitialspecification.amscanalsomineinformationfromotherwiseun executableprogramsandwithoutaccessto theprograms targetdatasets whilealrequiresprogramexecution foritsdynamicanalysis.
tocomparealandams weconsidertheweakspecificationof scikit learncomponents6 logisticregression linearsvc standardscaler 6namesabbreviatedforbrevity 771esec fse november8 virtualevent usa jos p.cambronero j rgencito andmartinc.rinard extratreesclassifier randomforestclassifier gradientboostingclassifier stackingestimator standardscaler variancethreshold minmaxscaler maxabsscaler selectpercentile featureunion components .
.
.
.
.
of componentsspec polynomialfeatures minmaxscaler variancethreshold randomforestclassifier logisticregression sgdclassifier robustscaler featureunion kernelpca minmaxscaler standardscaler quantiletransformer ridgeclassifier variancethreshold components .
.
.
.
.
.
.
.
.
of componentsspec polynomialfeatures minmaxscaler pca variancethreshold logisticregression figure8 exampledistributionsofscikit learncomponents in pipelines produced by genetic programming based on amsstrengtheningoftheinitialweakspecification.
and run experiments on our datasets.
we use fold cv pair pipelinesbetweencvfoldsinordertoappropriatelyperformcomparisonsafterremovingpipelinesthatdon tsatisfytheweakspecification andthencomputewinsonthepairedpipelines.ifthepipeline forasystemdoesnotsatisfythespecification theothersystem s pipelineisassignedthewin.alistrainedonthecorpuspresented in whichisrestrictedtoprogramsithasalreadyexecutedand fromwhichithasextracteddynamictraces.
whenalistrainedonthesubsetofprogramsthatuseatleast oneweakspecificationcomponent andamsminesthissameset ofprograms wefindthatalcanproducepipelinesthat stilldeviate from the weak specification as the full program traces may containadditionalcomponents .21ofthe45pipelinesgeneratedbyal didnotsatisfytheweakspec whileallofamsdo.afterremoving specification violatingpipelines amsobtains29winsandalobtains9.whenamsistrainedonthefullamscorpus ams swins increase to and all pipelines continue to satisfy the specification andal sdecreaseto4.finally whenamsistrainedonthe amscorpusandalistrainedonthefullalcorpus withoutany specification relatedprogrampruning 26ofthe45alpipelinesdo notsatisfytheweakspecification.afterremovingthesepipelines amsobtains42winsandalobtains1win.
.
rq5 impactofcorpussize amsmineshyperparameters theircorrespondingvalues andcomplementarycomponentassociationrulesfromacorpusofcodeexamples.toevaluatetheimpactofvaryingcorpussizesonams we sampledfrom10 to90 in10 increments oftheoriginal3 scripts.werepeatedthissamplingfivetimespersamplingratio.for eachsampledcorpus weranams shyperparameterminingand complementarycomponentmining.
figure9ashowstheaveragefractionofhyperparametersmissing foragivencomponent withrespecttothehyperparametersfound throughthefullcorpus.forverysmallcorpora e.g.
330scripts asexpectedthereductioninhyperparametersminedcanbesubstantial.amoderatesizedcorpus e.g.
1650scripts coversmostof thehyperparametersfoundinthefullcorpus.
figure9bshowstheaveragereductioninpossiblehyperparametervalueswithrespecttothefullcorpus.ifwemine5possiblevalues forahyperparameterinthefullcorpus andwemine3possiblevaluesinadownsampledcorpus wesaythatisareductionof2possible values.weseethatforamoderatesizedcorpus e.g.
theaverage reductionisapproximatelyonepossiblevalueperhyperparameter.
figure9cshowsthedecreaseinnumberofcomplementarycomponentsmined whencomparedtothefullcorpus.smallcorpora oftheoriginalsize displaylargedecreasesinthenumberof associationrulesfound butmoderatesizedcorpora e.g.
mine approximately80 asmanyrulesasthefullcorpus.figure 9dshows thatformoderatedsizedcorpora therulesminedarerelativelysimilar approximately0.8jaccardsimilarity tothoseminedfromthe fullcorpus.
relatedwork automatedmachinelearning automl hasreceivedincreasedattentionintherecentpast.tpot usesgeneticprogrammingto automaticallyproducetree structuredclassificationandregression pipelinescomposedofscikit learn operators.autosklearn usessequentialmodel basedalgorithmconfiguration smac togeneratescikit learnpipelinesandtheirhyperparametersettings.
reinbo usesreinforcementlearningtogeneratepipelinecandidatesandbayesianoptimizationtotunetheirparameters.al learnsapipelinelikelihoodmodelfromdynamicprogramtracesand usesthistogeneratesequentialscikit learnpipelines withdefault hyperparametervalues.mlbazaar buildsupanautomlsystem throughalibraryofcomposableoperatorswithacleanandunified interface.
incontrasttothesesystems amsfocusesonprovidingautoml users with a simple way of influencing the pipeline generation process writingaweakspecification whichcanbeautomatically strengthened.thisusagemodelempowersuserstoinfluencepipeline generationonaper specificationbasis ratherthanrelyingondistributional characteristics of a pipeline corpus as in al on the developerpre definedsearchspacesintheoriginalautomltool as intpot reinboandautosklearn ormanuallyspecifyinganew completesearchspacethatreflectstheirpreferences asintpot s optionalconfigurationsormlbazaar stop downtemplates configurations .
search basedsoftwareengineering sbse providesageneral frameworkthroughwhichtodesignandanalyzeautomlsystems 772ams generatingautomlsearchspacesfromweakspecifications esec fse november8 virtualevent usa .
.
.
.
.
.
.
.
.
corpus sampling ratio .
.
.
.
.
.
.
.7fraction of hyperparameters missing per component a .
.
.
.
.
.
.
.
.
corpus sampling ratio .
.
.
.
.
.
.0reduction in hyperparameter values b .
.
.
.
.
.
.
.
.
corpus sampling ratio reduction in total number of mined rules c .
.
.
.
.
.
.
.
.
corpus sampling ratio .
.
.
.
.
.0rules jaccard similarity w.r.t full corpus rules d figure9 impactofdownsamplingthefullcorpus.
a showsthefractionofmissinghyperparameterspercomponent b shows the number of missing possible values per hyperparameter c shows the percent reduction in number of complementary componentassociationrule and d showsthejaccardsimilarityofthecomplementarycomponentrules.
withthelattereffectivelybeingainstanceoftheformer.sbsehas beensuccessfullyappliedtoproblemssuchasautomatedtestingof softwarewithlargetestsuites synthesizingequivalentmethod callsequences andoptimizingproductlineconfigurations among others.
ams allows users to approach automl in a greyboxsetting wheretheirweakspecificationcaninfluencethesearch process.
feedback of this form can enable an iterative process of refinement toobtainsolutionsthatsatisfyuserpreferences.
code corpora have enabled advances in various areas of softwareengineering.codeidiomsminedfromacorpuscanbeused toimproveprogramsynthesisandsemanticparsing aswell asenablingcontext sensitivedeveloperqueries .atasmaller scale automatedexampleextraction fromspecificscriptsallows allowsuserstoproduceminimalworkingsnippets.large scalecorporathatexerciseparticularapiscanbeusedtominepreconditions formethodcalls order basedspecificationsforchainingcalls coderepairpatterns anddrivesemanticcodesearch .
threatstovalidity we discuss potential limitations of this research based on design choices.inparticular wefocusonthreatstogeneralizability.first ourevaluationusesaparticularmlframework scikit learn .we believe this threat is mitigated by the fact that scikit learn is a widely adoptedmllibrary usedbyover92 000githubrepositories asofmarch2020.extendingamstootherpopularlibraries such astensorflow maybepossibleaslongasthesehavehighquality apidocumentation withrelevantkeywordsandexplanations and enoughonlineexamplesforacodecorpus7.
ourcodecorpus meta kaggle representsawiderangeofscripts writtenbydifferentuserstargetingdifferentdatasets.applyingams tosmallercodecorporamayimpactperformance.inourexperiments wefoundourcorpusofapproximately3 300scriptsdeliveredgood performance andourexperimentswithvaryingsizesofcodecorpus showthatamoderatesize approximately1650scripts candeliver reasonablyhighcoverageofhyperparametersandcomplementary components when compared to our full sized corpus.
further increasingthesizeofthecorpuscanhelpmitigatethisrisk.
weevaluatedtwosearchprocedures geneticprogrammingand randomsearch.othersearchproceduresmaypotentiallyfindpipelines 7e.g.asofapril28th202072 000sourcecodeprojectsongithubusedtensorflowwithdifferentcharacteristicsandperformance.however bothrandomandgeneticsearcharecommonlyusedmethodsinsearch based softwareengineeringandhaveshowngoodperformanceoverawide rangeofautomlproblems.thechoiceofevaluationdatasetscould alsoinfluenceourresults.weusedtheclassificationdatasetsfrom theoriginaltpotpaper whichhavealsobeenusedintheevaluation ofexistingautomlresearch .theweakspecificationsinour evaluationarenaturallyasampleofpossiblespecifications.however weaimedtoincorporatecommonoperationsandcomponentsin thesespecificationstoreflectstandardusage.
finally weakspecificationsmustincludeatleastonetask specific i.e.regression classification component.webelievesatisfyingthis requirementisfacilitatedbythewideavailabilityofonlineresources e.g.tutorials blogs describingbasiclibraryusage.
conclusion weintroducedanewusagemodelforautoml whereauserprovides asetofapicomponentsasaweakspecificationandthisspecification canbeautomaticallystrengthened.specificationsenableusersto exertcontrolandexpresspreferencesovertheresultingpipeline.we implementourstrengtheningapproach extendingthespecificationwithcomplementarycomponentsusingnormalizedpointwise mutualinformationonanexistingcodecorpus functionallyrelated componentsusingalexicalsimilarityscoreoverthetargetapi s documentation frequencydistributionsonconstructorcallsinthe codecorpustoextractkeyhyperparametersandvalues andasearch procedure intheamssystem.weevaluatedamson9datasets and15weakspecificationsusingtwodifferentsearchprocedures.
we show that the pipelines produced using ams s strengthened specificationsoutperformpipelinesproducedusingtheinitialweak specifications and variants of the initial specifications annotated withexpert definedhyperparameterspaces.