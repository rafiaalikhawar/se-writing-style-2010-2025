on the relationship between design discussions and design quality a case study of apache projects umme ayda mannan oregon state university corvallis oregon usa mannanu oregonstate.eduiftekhar ahmed university of california irvine irvine california usa iftekha uci.edu carlos jensen oregon state university corvallis oregon usa carlos.jensen oregonstate.eduanita sarma oregon state university corvallis oregon usa anita.sarma oregonstate.edu abstract open design discussion is a primary mechanism through which open source projects debate make and document design decisions.
however there are open questions regarding how design discussions are conducted and what effect they have on the design quality of projects.
recent work has begun to investigate design discussions but has thus far focused on a single communication channel whereas many projects use multiple channels.
in this study we examine 37apache projects and their design discussions the project s design quality evolution and the relationship between design discussion and design quality.
a mixed method empirical analysis data mining and a survey of 130developers shows that i .
of all design discussions occur in project mailing list ii both core and non core developers participate in design discussions but core developers implement more design related changes .
and iii the correlation between design discussions and design quality is small.
we conclude the paper with several observations that form the foundation for future research and development.
ccs concepts software and its engineering software development process management maintaining software designing software .
keywords design discussion design quality code smells empirical analysis acm reference format umme ayda mannan iftekhar ahmed carlos jensen and anita sarma.
.
on the relationship between design discussions and design quality a case study of apache projects.
in proceedings of the 28th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse november virtual event usa.
acm new york ny usa pages.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse november virtual event usa association for computing machinery.
acm isbn .
.
.
.
introduction good design is key to ensuring the performance robustness and maintainability of software .
to be able to create a high quality product developers need to not only be aware of the design of the system but also about the underlying design decisions.
if developers are unaware of the design decisions they can make changes contrary to what was intended setting others up for clashes which can degrade the overall design quality of the system .
design decisions are often decided and shared informally among developers of a project making it a key challenge to document and share design decisions .
this becomes a bigger challenge for open source software oss for several reasons.
first these projects are distributed involving s of developers who are geographically or temporally separated.
this means that purposeful discussions are the only way for developers to coordinate and build together.
second because of their often volunteer nature oss projects rarely produce updated design documents and in some cases lack formal design documentation altogether .
in such cases design discussions are the only form of design documentation.
recent work has started to investigate how oss developers discuss the design and how they find these design discussions later.
for example brunet et al.
and viviani et al.
examined how design discussions are embedded in pull request comments and how it can be difficult for developers to piece together these discussions.
researchers have also developed techniques for detecting design discussions from a single communication channel using machine learning ml techniques .
however we still have gaps in our understanding of how design discussions are conducted in oss projects what channels are used?
who participates in these discussions?
who implements design related changes?
answers to these questions are especially pertinent for oss projects since they are known to use different channels project mailing list issue tracking systems pull requests code etc.
to discuss their work.
design discussions fragmented across channels can make it difficult for developers to retrieve and reconcile the scattered pieces of design discussions.
this was indeed the case as one of the respondents in our survey of 130software developers mentioned discussions are fragmented between several systems and not structured for easy searching .
esec fse november virtual event usa umme ayda mannan iftekhar ahmed carlos jensen and anita sarma even if developers are able to find the design discussions it is yet unknown to what extent design discussions in oss relate to the design quality of the project.
without such knowledge oss projects might be discussing design under incorrect assumptions of how design decisions can be retrieved and used and researchers might miss opportunities for improving state of the art.
to the best of our knowledge no prior work has investigated how design discussions are fragmented across multiple oss channels and the relation between design discussions and design quality.
in this work we seek to understand two broad aspects of design discussions in oss projects rq1 how are design related discussion conducted in oss projects?
rq2 what is the relationship between design discussions and design quality in oss projects?
to answer our research questions we performed a mixed method empirical study of 37apache projects.
these projects use multiple communication channels according to their official documentation making them ideal candidates for our study.
we opted to investigate apache projects because these projects have welldocumented discussion procedures.
apache projects initiate discussions on mailing list and once decided on the high level design the discussion moves to issue tracking system and finally the code is submitted using a pull request where another round of discussion may occur .
we started by extracting design discussions from multiple channels developer mailing list issue tracking systems jira and bugzilla and pull requests .
this gave us a corpus of 922distinct discussions.
we then developed an ml classifier that can identify design discussions from either of the four aforementioned communication channels.
applying the classifier on our corpus we found that overall .
of all discussions touch on some design aspect.
we then validated our findings via a survey of 130developers from the apache projects.
finally we evaluated the association of design discussions with design quality.
design quality could mean different things to different people.
for example it could mean poor feature selection terrible ux design or bad architecture design.
while trying to identify a suitable metric for measuring design quality researchers have investigated different metrics such as coupling between object cbo coupling factor cof weighted method per class wmc and code smells .
we opted to use the occurrence of code smell as a proxy for poor software design quality since a large number of studies have used and validated code smells for the aforementioned purpose .
our paper makes the following contributions we present a first study investigating the relationship between design discussions and design quality.
we present the results of a survey of 130software developers examining the difficulties that developers face in locating and acting on design discussions in oss projects.
based on our results we outline implications for developers and researchers make suggestions for improving existing tools and guidelines to better support design discussion.
the paper is structured as follows section provides a review of prior research efforts.
in section we present our methodology the demographics of our corpus approach of mining discussions machine learning classifier to classify discussions data collection process and surveying developers for answering our intended research questions.
in section we present our findings.
section discusses the results and outlines implications for developers and researchers.
section concludes with a summary of the key findings and future work.
related work in the context of software engineering design is defined both as a process and an artifact .
researchers have investigated both aspects.
while investigating the process aspect researchers looked into how and where developers discuss the design.
previous studies show that in oss projects design discussions takes place in platforms like email communications issue trackers pull request etc.
brunet et al.
found that of the discussions are about design.
though many channels are available for discussion all prior studies focused on analyzing discussions in only one channel .
since many channels are available discussions can be fragmented and an in depth analysis involving all channels is required to gather a better understanding of how and when design discussions happen.
to the best of our knowledge ours is the first study analyzing multiple communication channels in this context.
researchers have also looked into the artifact aspect of design.
though oss projects share most of the information in written form it is very often to find an updated design document in a project s archive.
brunet et al.
examined popular projects from github and found that of these did not have any kind of design documents.
cherubini et al.
found that developers mostly convey design decisions through temporary drawings .
soria et al.
found that design knowledge generated during verbal meetings was not captured in the project archive.
researchers also found that design decisions are lost over time .
since design in oss is not well documented recovering it becomes difficult with time.
to help recover design decisions researchers have proposed many techniques.
one technique is recovering design by reverse engineering or inferring structural designs from code and logs .
antoniol et al.
showed that design could also be recovered by tracing links between code and documentation.
another study recovered architectural design from source code with commits and issues .
researchers have also applied ml based techniques to retrieve design discussions.
brunet et al.
applied a machine learning classifier to automatically label design related discussions .
viviani et al.
applied a classifier to automatically locate paragraphs in pull request discussions related to design.
mahadi et al.
trained a classifier on the dataset created by brunet et al.
and tested it on the dataset of viviani et al.
.
however both of the dataset include discussions only from pull requests.
our study builds a machine learning classifier that automatically labels design related discussion from different communication channels project s mailing lists issue tracking systems and pull requests .
different ways of measuring design quality have been investigated.
many researchers have used code smells to quantify design quality.
code smells are symptoms of poor design and implementation choices .
initially it was introduced to identify potential maintainability issues 544on the relationship between design discussions and design quality esec fse november virtual event usa in the software system however later on it has been associated with bugs and fault proneness .
researchers have also investigated how design quality evolves over time and found that small changes accumulating over time cause the design drift .
ahmed et al.
found that software design quality measured using code smell gets worse over time.
researchers have also studied the relationship between project activities and design quality and found that code reviews have a significant influence on reducing code smells.
however no studies are investigating the relationship between design discussions and design quality.
our study takes the first step towards filling this gap in research.
methodology the goal of this study is to understand how design discussions take place in oss projects and the relationship between design discussions and design quality.
in the following subsections we describe the pipeline we followed to collect process and analyze the data.
.
data collection .
.
project selection.
our overarching goal is to identify design discussions in oss projects and investigate their relationship with design quality.
we start by selecting 37apache projects written in java.
we selected apache projects because they use multiple communication channels mailing list issue tracking system pull request etc.
and have specific instructions for using these channels.
selecting random projects from github without a well documented discussion procedure would make it difficult to ensure that we have identified all communication channels.
since our goal was to understand how discussions are scattered across all channels identifying all channels is of the utmost importance.
we selected projects written in java since it is one of the most popular programming languages and there is more design quality code smell detection tools available for java than other languages .
we downloaded the git repositories for these projects to collect various information such as code smell project duration developer information etc.
table provides a summary of our selected projects.
table project statistics dimension max min average median line count .
.
duration weeks .
developers .
.
total commits80 .
.
total discussions117 .
.
.
discussion collection.
for these 37apache projects we found the list of communication channels used by them.
from the developer mailing list we collected 753emails as discussions.
we also collected discussions from bugzilla jira andpull requests .
the entire thread of interactions emailsgrouped by the subject header comments grouped by issue id was the analysis unit and considered a single discussion.
in total our initial data set contained 922of such discussions.
.
.
unit of measure selection.
to investigate how design discussions correlate with design quality over time we could use different ways of partitioning time.
some researchers have used releases as the unit of time others have used individual commits or discrete time units years months weeks days .
individual commits are the only level measure but would be too fine grained for our purpose.
thus similar to ahmed et al.
we selected the week as our unit of measure because it gives us enough detailed insight into the evolution of projects.
we then checked the distribution of commits across the projects history and found that the majority of the projects had an active history of 560weeks or less.
we cut off our analysis at 560weeks to prevent extremely long lived projects from skewing the results.
.
building the discussion classifier to answer our research questions we need to separate design discussions from other discussions.
as manual classification is not a practical option to classify 922discussions we use machine learning techniques.
we followed the protocol of brunet et al.
with some improvisations suggested by mahadi et al.
.
.
.
step manual classification of sample data.
to ensure that our manually labeled dataset contained discussions from all four channels we took the following steps an initial random selection of 500discussions from each channel so that each channel is represented and an additional random selection of discussions agnostic of the channel type.
in table column three represents the total number of discussions taken from each channel after these two steps.
this resulted in a total of 000discussions which were used to build and evaluate our ml classifier.
next two of the authors manually labeled 000discussions independently of the corpus .
we did not discuss any specific rules except for focusing on the structural design aspects of the code to classify the discussions.
this was to avoid bias in our independent classification of the discussions.
also our initial manual investigation of the discussions found that keywords used in design related discussions are diverse.
as a result only focusing on keywords would not capture all the design discussions.
therefore instead of focusing on keywords we focus on the semantics in the discussions.
while reading the discussion the researchers paid attention to discussion regarding structural design code architecture anything regarding the restructuring of code and such kinds of high level topics.
to remove subjectivity two researchers labeled each discussion either as a design or non design discussion.
then we calculated the inter rater reliability using cohen s kappa and found a kappa value of .
.
cohen s kappa is a statistic that assesses the degree of agreement between the codes assigned by two researchers working independently on the same sample .
values of cohen s kappa fall between and where indicates poor agreement and indicates perfect agreement.
according to the thresholds proposed by landis and koch kappa value of .88indicates an almost perfect agreement between the researchers.
545esec fse november virtual event usa umme ayda mannan iftekhar ahmed carlos jensen and anita sarma once the agreement was reached one author manually classified the rest of the sample data.
in our final sampled data discussions are design related and are non design related discussions.
table shows the distribution of manually classified sample discussions across channels.
table distribution of manually classified sample across different channels.
channeltotal discussiontotal sample discussion of design discussion of nondesign discussion mailing list bugzilla jira pull request total .
.
step natural language pre processing.
we followed some pre processing steps to clean the data before applying a machine learning classifier and used the nltk library for this.
we remove stop words and applied lemmatization to normalize the data.
we added some domain specific words in the stop word list that are not part of the predefined english stop words list .
for example we added name of the days in week name of the months special character sequence such as or etc.
the full list of stop words can be found in our companion website .
then we use lowercase letter conversion.
after removing stop words and the letter case conversion we used tf idf for vectorizing the natural language words into numerical vectors.
more specifically we used tfidfvectorizer provided by scikit learn.
.
.
step machine learning classifier.
using the manually classified corpus we train four different machine learning classifiers a multinomial naive bayes mnb a decision tree dt a support vector machine svm and a logistic regression lr .
we use python scikit learn library to implement the classifiers.
we used fold cross validation to train and evaluate the classifiers .
this validation approach randomly divide the manually classified data set into groups of equal size.
the first group is treated as a validation set and the classifier is fit on the remaining groups.
the mean of the executions is used as an estimation of classifier s accuracy.
fold cross validation has been recommended in the field of applied machine learning .
after fold cross validation we compared the classifiers using the area under the receiver operating characteristic curve auc .
auc returns a scores from 0to1to represent prediction performance of a classifier.
a classifier with an auc score higher than .5indicates that it is performing better than random chance.
an auc score above .7is often considered to have adequate classification performance .
we choose to use auc instead of f1score for comparing classifier performances for several reasons.
first it is independent of prior probabilities .
second auc is not biased by the size of test data.
finally auc provides a broader view of the performance of the classifier since both sensitivity and specificity for all threshold levels are incorporated in calculating auc .
table auc for classifiers classifier name auc decision tree .
logistic regression .
svm .
multinomial naive bayes .
table shows that the decision tree achieved the highest auc score of .86compare to other classifiers.
we therefore used the decision tree classifier to label the remaining discussions automatically.
we performed hyper parameter optimization using randomized search for all four classifiers before selecting the decision tree.
randomized search sets up a grid of hyper parameter values and selects random combinations to train the model and score on the validation data.
the number of search iterations is set based on time resources in our case it was .
we search for the optimal parameter settings using the scikit learn randomizedsearchcv function.
our hyper parameter grid for the best classifier decision tree includes max depth max features min samples leaf and criterion .
the final tuned decision tree parameters for our classifier were min samples leaf max depth max features criterion gini .
.
developer categorization to answer our research questions we needed to identify developers status in the project and their participation in the discussion.
we used the number of commits contributed by individual contributors in the code base as the criterion to classify a developer as core or non core of the project .
in order to calculate the status of developers we start by collecting developer names and corresponding email addresses from the project repository.
after so we noticed some miss matches.
for example multiple slightly different names with the same email addresses and same name with different email addresses.
in our data set of the developer names had this issue.
to identify the developers unique list we did a two way matching of name and email address.
first we identified all names attached to each email address and all email addresses attached to a name.
then we identify all unique pairs of names and email addresses.
we were able to match .
of email addresses with names.
next we categorized developers into core and non core groups according to their code contributions in the projects.
open source contribution follows a power law where of contributors are responsible for of the contributions .
we follow the same rule to identify the core and non core developers.
we consider a developer as coreif the developer is among the top of developers in that project calculated by the number of commits authored .
otherwise the developer is non core .
546on the relationship between design discussions and design quality esec fse november virtual event usa .
code smell collection to examine the relationship between design discussions and design quality we collected code smell an indicator of design quality for the37selected projects.
.
.
code smell detection tool selection.
we used infusion a commercial tool to identify code smells.
we selected infusion for several reasons first infusion detects a wide range of code smells .
as a commercial tool infusion is no longer available for download.
however there is an open source version of the tool called iplasma which is available.
it uses static code metrics to identify design related issues.
details of the metrics along with the definition of the code smells are provided in the companion website .
second a previous study by ahmed et al.
showed that infusion has a high precision of .
recall of .
and an f measure of .
.
also infusion scales well to large codebases.
finally many other studies used infusion as their code smell detection tool.
.
.
measuring code smells.
for each of the projects we collected code smells by running infusion on their codebase.
first we collected the number of code smells in each code smell category per week.
then we add all smells across all categories to collect total code smells for each project.
.
data analysis we calculated the number of design discussions and code smells for each project over 560weeks.
to compare these two time series first we normalized the data since the number of discussions and code smells will vary according to the size of the development team and project.
there are many ways of normalization and the most commonly used one is dividing the data by the lines of code.
however in our case dividing the number of discussions by total lines of code does not necessarily give us a meaningful measure.
instead we normalized both the number of design discussions per week and the number of code smells per week using the feature scaling which gives a score between and equation .
rescaled value x min x max x min x where x each data point.
min x the minimum among all the data points.
max x the maximum among all the data points.
our goal is to identify any correlation between two time series data which are the number of design discussions per week and the number of code smells per week.
we calculate the cross correlation between design discussions per week and count of code smells per week individually for each project for this purpose .
as the first step of time series analysis we start by checking if there are any visible trends.
if a time series exhibits a visible trend we need to remove the trend before further analysis.
this is called the detrending.
we applied the first differencing method to detrend both time series and after that we calculate the cross correlation.
.
survey to validate our findings from mining archival data we conducted an online survey of software developers working in apache projects.this section describes the survey design participant selection criteria pilot testing data collection and data analysis.
.
.
survey design.
we designed an online survey to identify the issues associated with accessing and implementing design related discussions using qualtrics survey system .
we gathered demographic information to understand the respondents backgrounds e.g.
number of years as a professional developer number of years contributing to open source project .
next we asked them how they conduct design related discussions in the oss project and what are the problems they faced while finding design related discussions.
we asked the respondents to rate their difficulty level of finding design discussions in each communication channel using a likert scale where the options are extremely easy somewhat easy neither easy nor difficult somewhat difficult extremely difficult .
we used multiple choice for some of the questions.
a text box option was provided for respondents in the multiple choice questions in case they wanted to share the reason behind their choice.
the survey instrument is available in the companion website .
.
.
participant selection.
for our survey we recruited software developers from the 37apache projects we analyzed.
to build our participants list we created the list of unique email addresses of individuals from the version control system.
in total we had unique email addresses on our list.
we selected a random sample of2 000for potential participants from the list and sent a targeted email inviting them to our survey.
.
.
pilot survey.
to help ensure the survey s validity we asked computer science professors and graduate students two professors and ph.d. students with experience in oss and survey design to review the survey.
to make sure that the questions were clear and complete we conducted several iterations of the survey and rephrased some questions according to their feedback.
we also focused on the time limit to ensure that the participants could finish it under minutes.
the survey was anonymous but at the end of the survey we gave the participants a choice to receive a summary of the study through email.
.
.
data collection.
after sending an invitation email to potential participants 980invites were delivered via qualtrics .
20failed to deliver likely due to invalid email addresses.
946of those emails bounced and we received 22automatic reply notifying the respondent s absence.
our final count of potential participants were .
according to the software engineering institute s guidelines for designing an effective survey when the population is a manageable size and can be enumerated simple random sampling is the most straightforward approach .
this is the case for our study with a population of 682software developers from the selected apache projects.
we received 110responses from 012email requests during first 10days.
then we sent a reminder email.
after the reminder we received 30more responses in the next 10days.
we sent out a second reminder email 10days after the first reminder and got 12additional responses.
in total we received 152responses from 012email requests .
response rate .
previous studies in software engineering field have have reported response rates between .
and .
.
we discarded 22partial responses which left us with 130responses .
response rate after excluding the 547esec fse november virtual event usa umme ayda mannan iftekhar ahmed carlos jensen and anita sarma partial responses .
our respondents software development experience varies from years to more than years with an average of .
years.
.
.
data analysis.
we collected the ratings our respondents provided for each question converted these ratings to likert scores from extremely difficult to extremely easy and computed the average likert score.
we also extracted comments and texts from the other fields by the survey respondents explaining the reasons behind their choices.
to further analyze the results we applied scott knott effect size difference esd test to group the difficulty level of finding design discussion in each channel into statistically distinct ranks according to their likert scores.
tantithamthavorn et al.
proposed esd as it does not require the data to be normally distributed.
esd leverages hierarchical clustering to partition the set of treatment means in our case means of likert scores into statistically distinct groups with non negligible effect sizes.
results we structure our study findings based on our research questions.
.
design discussions in oss projects rq1 as a first step we investigate how often and where oss contributors discuss design related matters rq .
what is the prevalence of design related discussion and which channels are used for such discussions?
to answer this research question we collected all discussions from developer mailing list issue tracking system jira and bugzilla and pull requests.
we built a machine learning classifier discussed in section .
that labeled .
discussions as design related out of 922total discussions.
some example of design discussions labeled by the classifier are i do not think this is by design.
i think it is so today because.
.
.
ui should be able to send this every time a call is made please open a jira for this .
i m really confused.
i have tried looking at the code but i got lost in the tangle of contexts containers wrapper valves dispatchers...and i gave up.
btw craig is there a design document anywhere for catalina?
.
did you guys ever come up with any sort of design document?
looking back at the last chatter we were still in a localfs wal capability .
next we analyze where these design discussions take place by grouping discussion by communication channel.
table shows the percentage of design discussions distributed across the three types of channels.
dev mailing lists contain the vast majority of design related discussions accounting for .
of the total design discussions from all channels with .
of the total discussions in that channel.
issue tracking comments were the next used communication channel with .
of all design discussions across all channels being conducted there and .
of issue tracker discussions being about design.
pull requests were the least used medium a scant .
of design related discussions being through pull request comments and .
of all pull request comments being about design.table channel wise design discussions.
communication channeldesign discussions of total design discussions dev mailing list .
issue tracking system .
pull requests .
survey triangulation our survey responses from 130developers confirm these findings which indicates that project mailing list and issue tracking system were the top two communication channels for discussing design.
project mailing list was considered the preferred channel by .
of the respondents whereas issue tracking system was the preferred choice for .
respondents see figure .
figure communication channels used by survey respondents observation design discussions in our selected projects appear across all channels but project mailing list is the top choice among developers to discuss design.
we also ask our participants to rate the difficulty of retrieving design discussion from the three communication channels.
to that end we presented the communication channels and asked the developers to rate them see section .
.
for details .
dev mailing lists ranked the most difficult and issue tracking system ranked the least difficult according to the scott knott esd test in terms of means of likert scores for all the respondents.
observation mailing list is the most difficult channel in terms of retrieving design discussions.
respondents from the survey mentioned that they often also use unofficial channels like personal emails verbal meetings etc.
for design related discussion.
in fact .
respondents mentioned using verbal meeting .
this is troubling since these conversations are not archived and inaccessible to others or for later review.
another .
mentioned personal email as a medium for design discussions in the project.
while this leaves some trace it is still not recorded in the project archives or available to the community reducing transparency of decision making in the project.
548on the relationship between design discussions and design quality esec fse november virtual event usa observation design discussions occur via both documented and undocumented channels.
rq .
who are involved in design discussions in the projects?
we answer this question by categorizing the developers into core and non core developers according to their amounts of code contribution to the project see section .
for details .
it is important to investigate this question because if design discussions in a project are controlled by a small core group of contributors it can leave out a large group of non core contributors.
in such a situation non core members may be unaware of design decisions and implications of these decisions on their proposed changes making these changes suboptimal or incompatible with the rest of the project.
in our dataset a majority of the design discussions were from the core group .
the non core group was responsible for .
design discussions.
at first glance it seems that non core groups are in the minority and unable to participate but recall that by definition non core groups have fewer overall code contributions which also translates to fewer instances of participation in discussions.
therefore we normalize the design discussion of each group with the total participation in discussions using the equation below.
rescaled value total design discussions by the group total discussions done by the group this normalization shows that the mean of design discussions by core developers is .
whereas the mean design discussions of the non core developers is .
.
these numbers indicate that after accounting for the amounts of contributions core members were more involved in the design discussions of the project.
while the difference between the groups is not statistically significant welch two sample t test p .
the effect size is small .
cohen s d .
survey triangulation in our survey we asked respondents who are more involved in design related decisions?
after defining core and non core groups.
of the respondents answered that both groups were involved in design related discussions in their projects see figure .a confirming our results showing that both groups are active in design discussions.
observation both core and non core developers participate in design discussions with some difference in the amount of contributions between the two groups.
rq .
who implements changes resulting from design discussions?
given that both core and non core developers participate in design discussions the next question is whether there are any differences in who makes changes resulting from these design discussions.
it is possible that non core developers participate in discussions but core developers who typically have longer tenure and have a broader view of the project serve as gatekeepers to design related changes.
to investigate this we first identified the assignee of each issue in the issue tracking systems jira and bugzilla .
in our data set 986issues were related to design discussions.
of these .
were assigned to core developers and .
figure percentage of survey responders describing participation of core and non core developers in a design discussion b implementing design discussion to non core developers.
we did not find any assignee for .
issues.
in the next step we linked the assigned issues to the commits in github so as to discount those issues that did not result in changes to the project and remain uncommitted to the version history .
out of12 006issues combined issues of core and non core we could link .
issues.
of these 228linked issues .
were authored by core developers and .
by non core developers.
we were unable to link .
issues due to the missing link problem .
to understand whether core developers were more involved in implementing design related changes we compared the mean number of design related changes by core developers with that of non core developers.
the results show that the two groups are significantly different welch two sample t test p .
with a medium effect size cohen s d of .
.
survey triangulation among the 130survey respondents reported that design discussions were implemented mostly by core developers see figure .b which triangulates our findings.
observation core developers are responsible for implementing a majority of design discussions despite core and non core developers participate equally in design discussions.
rq .
how do design discussions evolve?
when a project matures it is possible that it needs fewer design discussions as the design is already stable by then.
however on the other hand as the project grows adding new features may require more detailed discussions so as to ensure that different features are compatible.
additionally in the case of oss projects as the project matures and gains visibility more contributors join the project bringing with them fresh design ideas or needing to understand the core design decisions which can affect how design discussions occur in these projects.
we tracked the design discussion evolution of each project over a period of 560weeks.
first we analyze the overall design discussion trend across all 37projects we found that in most projects design discussions follow a decreasing trend and discussions start to drop after approximately weeks figure .
when comparing across projects three unique trends emerged.
figure presents examples 549esec fse november virtual event usa umme ayda mannan iftekhar ahmed carlos jensen and anita sarma of these trends using specific projects from our dataset.
table shows the percentage of projects in each design discussion trend category.
the first trend decreasing discussions includes projects where design discussions decrease as the project matures manifests in maven project.
the second trend constant discussions shows the amount of design discussions stay stable over time despite several peaks log4j is an exemplar of this trend.
increasing discussions trend includes projects where design discussions increase as seen in the project ant .
figure week wise average design discussions across all projects.
table number of projects in each design discussion trend category general trend number of projects decreasing .
constant .
increasing .
observation distinct patterns of design discussion trends exists but on an average design discussions decrease over time.
.
association between design discussions and design quality rq projects that discuss their design are likely to have fewer design quality issues.
however only discussing about it will not have any positive impact on the design quality of the project.
hence investigating the relationship between design discussions and design quality can help to inform the role of design discussions in improving or maintaining design quality.
we start by looking into the general trend of average code smell count across all projects.
figure shows the increasing trend of theaverage number of code smells across all projects.
this is similar to the findings of ahmed et.
al .
figure average code smell count per week across all projects.
since design discussions per week and code smell count per week both are time series data a time series analysis is required to identify the correlation between these two which is called crosscorrelation.
we do time series analysis individually for each project.
time series analysis requires a preprocessing step before the actual correlation analysis .
due to space limitations we report the results after each preprocessing step in the companion website .
next we calculate the cross correlation between these two time series design discussions per week and code smell count per week .
figure shows the result of this step for qpid project as an example.
from the figure we see that the highest correlation value is .
shown by the circled vertical line at lag of .
next we calculate the significance of correlation for each project.
a correlation is significant when the absolute value is greater than n k where nis the number of observations and kis the lag .
we found that 20out of the 37projects .
have statistically significant cross correlation between design discussions and code smells count.
however the cross correlation values are small maximum cross correlation is .34and the minimum one is .
.
we also looked into the lags between two time series and found that the length of the lag varies from to 22weeks between two time series.
but in most projects the lag between two time series is 13weeks.
due to space limitations we report the plots for each of the37projects in the companion website .
observation design discussions and design degradation are weakly correlated.
as design issues are always increasing and design related discussions are not helping project s design quality we wanted to check if any specific group of developers are responsible for adding design 550on the relationship between design discussions and design quality esec fse november virtual event usa figure week wise project s design discussion trend.
figure cross correlation values of two time series issues in the projects.
first we collect the total number of commits for each developer that has added or removed at least one code smell.
we normalized the number of commits that add or remove code smell for each developers using the following equation.
rescaled value total number of smell related commits total number of commits we found that .
of the commits by core developers and .
commits by non core developers added at least one code smell in the code base.
however we can see from figure that coredevelopers remove more code smells than they add whereas the opposite is true for non core developers.
figure adding removing code smells versus design discussion participation.
observation core developers are adding and removing more design issues in code base than non core developers.
we also investigate if there is any difference between adding and removing code smells for each group.
we found that there is no statistically significant difference in terms of number of code smell adding and removing for the core developers welch two sample t test p .
.
we found similar result for non core group welch two sample t test p .
.
551esec fse november virtual event usa umme ayda mannan iftekhar ahmed carlos jensen and anita sarma discussion in this section we discuss the results presented in the previous section and present practical implications of our study for researchers and tool builders.
the development culture in apache projects is not very different than that of other oss projects.
if anything it s more systematic.
for example while merging a change apache developers have to provide a reference to the issue related to the submitted change as a part of the commit message.
this helps to preserve an activity trail between the issue and the commit .
this is not a common practice in most of the oss projects.
since such well managed projects struggle to find design related discussions in their communication channels it is high likely that other oss projects struggle even more.
through mining we found that despite the presence of multiple channels the vast majority of design discussions occur over email .
however our survey results show that both project mailing lists and issue tracking systems are the preferred channel for developers to discuss design related issues figure .
one reason behind this could be that mailing lists allow developers to have lengthier discussions.
developers may therefore initiate discussions in the mailing list.
only after deciding on a design issues they move to issue tracking system to work on those changes.
using mailing lists for design discussions has drawbacks.
finding a specific design discussion from email archive can be extremely difficult as one of the survey respondents explained existing documentation is about usage and rarely about design design decisions are lost in mail.
it s very hard and time consuming to find a email thread .
the other problem related to using mailing lists for design discussion comes from the fact that emails eventually need to translate into an issue in the issue tracking system .
there may not be a oneto one mapping between an email discussion and a corresponding issue.
this can lead to fragmented discussions lost information etc.
making it difficult to retrieve design discussions and decisions from the archive.
in our survey .
of respondents confirmed that retrieving design information from email archives is a difficult and time consuming task.
our study takes the first step towards showing that it is possible to automatically identify and retrieve design related discussions from multiple discussion archives all three communication channels .
further research to develop efficient automated techniques to locate design discussions would be beneficial for end users.
a manual inspection of discussion contents across the three communication channels showed that a majority of design related discussions started on the mailing list and then shifted to the issue tracking system.
therefore in order to understand the rationale of why a design change is made developers need to be able to link discussion threads across multiple channels.
currently there are no tools to support such discussion tracking.
for example tools could allow context sensitive search on archives and help identify design discussions related to a specific piece of code.
similarly another useful feature could be the ability to tag design related discussions and link them to the pull requests or to the part of code where the relevant implementation exists.identifying design discussions could also help in automated review assignment.
current recommender systems for task assignment or code reviews use developers expertise to identify the best match.
identifying individuals who have been involved in design discussions and therefore have a bigger picture of the intention of changes can prove beneficial for such recommender systems.
further research can help in the design of approaches for automatically selecting contributors involved in a specific design discussion and assigning them higher priority.
apart from the issue of design discussions being fragmented across multiple channels some of the discussions also occur through personal emails verbal meetings etc.
these unofficial discussions are not recorded in the project archives and are not accessible to developers who were not part of these discussions.
we posit that this may be one of the reasons why we don t see a strong association between design quality and design discussions in our analysis.
discussion in unofficial channels can also make it difficult for developers to gauge the impact of their contribution on design.
further research is required to answer many of the questions raised by these observations what types of discussions occur over the unofficial channels who participate in these discussions and what is the impact of such discussions on tracking design decisions and the overall quality of the project.
we also investigated who are mostly engaged in design discussions and design implementation.
from both mining and survey we found that though both core and non core developers are participating in design discussions and core developers are more involved implementing design discussions than non core developers.
some reasons as alluded to by the survey respondents about why this might be occurring are it is hard to find discussions across multiple channels lack of knowledge of where to look for information project culture where non core developers do not work on design related changes and design related changes when raised by non core members are overlooked by the core group.
some of these can be fixed by better tooling others need changes to the project culture.
researchers need to investigate these reasons and devise monitoring mechanisms to recommend necessary measures to project leaders when needed.
finally .
of our survey respondents said that they do not continuously monitor the design quality of a project and even worse they do not check the impact of their contribution on design quality.
one reason for this might be the lack of tool support.
current code smell detection tools do not support just in time analysis for the most recent changes.
these tools analyze the whole code base which make it difficult to incorporate them into the regular development workflow.
moreover the tools mentioned by the respondents spotbugs jacoco simian checkstyle sonarqube etc.
provide information regarding design quality number of code smells .
however to the best of our knowledge none of these tools provide insight or links to relevant design discussions and how the actual design deviates from those.
they also do not provide refactoring options to developers.
this might be one of the reasons why we see such accumulations of code smells.
developers do not act upon these warnings unless they have either i a high return on investment e.g.
eliminating the smell has an immediate value or ii tools make it easy to eliminate the smells.
while developers might not see the immediate benefit of eliminating code smells as 552on the relationship between design discussions and design quality esec fse november virtual event usa smells usually have long term effects on code maintenance we encourage tool builders to close the gap between detection and correction of code smells.
threats to validity we have taken care to ensure that our results are unbiased and have tried to eliminate the effects of random noise however some biases are unavoidable and in some cases it is possible that our mitigation strategies may not have been effective.
the data set used for the study contained 922discussions from apache projects.
we analyzed discussions from the official communication channel archives.
however developers also use personal emails chats offline discussion etc.
for design related discussions which are not available on these archives and are not part of our analysis.
as our goal was perform a case study of a single ecosystem where projects have similar development processes we selected projects from the apache software foundation and hence our findings may not generalize to all open source projects.
similarly we surveyed developers only from he apache software foundation.
the characteristics of these developers may not be representative of all developers in other open source projects.
we categorized the developers into core and non core groups using a threshold of number of commits in the code base for each developer.
some of the developers could have been categorized as non core according to our criteria though they were actually core developers who focus on large contributions rather than frequent contributions or simply focus on architecture and high level design high value contributions .
for code smell detection we used infusion which is a static source code analysis tool.
code smells that are intrinsically historical such as parallel inheritance are difficult to detect by just using static source code analysis .
so the number of occurrences of such intrinsically historical smells will be different when historical information based smell detection technique is used.
also infusion detects code smells which is not a exhaustive list of code smell.
there could be more smells which infusion cannot detect.
it is always possible that the participants misunderstand the survey questions.
to mitigate this threat we conducted a pilot study with experts in oss and survey design.
we updated the survey based on the findings of these pilot studies.
conclusions in this paper we present the results of our investigation of design discussions their evolution and their association with the project s design quality.
our mixed method empirical study of apache projects and survey of developers revealed that design discussions are fragmented across multiple communication channels.
this fragmentation of design discussions likely makes it difficult for developers to keep track of the agreed upon design decisions.
according to the respondents though mailing list is the most difficult channel .
of respondents when it comes to retrieving design discussions it is the most frequently used channel for design discussions in the apache projects.
interestingly survey respondents mentioned that other side channels such as personal emails .
respondents and verbal meeting .
respondents were alsoused to conduct design discussions.
further the average number of design discussions decrease but code smells increase as the project evolves.
these factors could be playing a role in the low association of design discussions with design quality.
our work showcases that further research is needed to a understand the state evolution and impact of design discussions that are fragmented across multiple communication channels ours is just a start b analyze the disconnect between the design discussions and design quality in oss projects and c build tool support to help developers find and link different design discussions.