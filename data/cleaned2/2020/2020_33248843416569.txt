accelerating all sat computation with short blocking clauses yueling zhang ylzhang smu.edu.sg singapore management university east china normal universitygeguang pu ggpu sei.ecnu.edu.cn east china normal university shanghai trusted industrial control platform co. ltd.jun sun junsun smu.edu.sg singapore management university abstract the all sat all satisfiable problem focuses on finding all satisfiable assignments of a given propositional formula whose applications include model checking automata construction andlogic minimization.
a typical all sat solver is normally based oniterativelycomputingsatisfiableassignmentsofthegivenformula.
in this work we introduce basolver a backbone based all satsolverforpropositionalformulas.comparedtotheexistingapproaches basolvergeneratesshorterblockingclausesby removing backbone variables from the partial assignments and the blocking clauses.
we compare basolver with existing all sat solvers namely mblocking bc bdd and nbc.
experimentalresults indicate that although finding all the backbone variablesconsumes additional computing time basolver is still more ef ficient than the existing solvers because of the shorter blocking clauses and the backbone variables used in it.
withthe608formulas basolversolvesthelargestamountof formulas which is more formulas than mblocking bc nbc andbddrespectively.fortheformulasthatarebothsolvedbybasolverandtheothersolvers basolveruses .
lesscomputingtimeonaveragethantheothersolvers.for the formulas which first satisfiable assignments are found by at least one of the solvers basolver uses less computing time on average than the other solvers.
keywords satisfiability all sat blocking clauses acm reference format yueling zhang geguang pu and jun sun.
.
accelerating all sat computation with short blocking clauses.
in 35th ieee acm international conference on automated software engineering ase september virtual event australia.
acm new york ny usa pages.
geguang pu and yueling zhang are the corresponding authors permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acmmustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
ase september virtual event australia association for computing machinery.
acm isbn ... .
introduction the satisfiability problem is a typical np complete problem.
the problemistodecidewhetheragivenpropositionalformulainconjunctive normal form cnf is satisfiable or not.
the satisfiability problem is ubiquitous in computer science and has attracted the attentionofmanyresearchersbecauseofitssignificantimportance.
ansat satisfiability solverisasoftwaretoolkitthatisableto findasatisfiableassignmentforagivensatisfiableformulaoran unsatisfiable proof for a given unsatisfiable formula.
although the complexityofsatsolvingisnp complete modernsatsolversare still able to find a satisfiable assignment efficiently.
with the developmentofmodernsatsolvers propositionalsatisfiabilitytheory and satisfiable modulo theory have been widely applied to several fields in computer science including model checking programanalysis networkverification quantifier elimination and predicate abstraction .
someoftheapplicationsonlyneedthesatsolvertofindone satisfiableassignmentofthegivenformulaorprovethattheformula isunsatisfiable whileotherapplicationsmayrequirethesatsolver to find multiple or even all the satisfiable assignments of the given formula.
forexample inthefieldofnetworkverification thesatsolvers areaskedtofindallthesatisfiableassignments.sincemostmodernnetworksarecomplexandcontainmultipledevicessuchasrouters bridges and firewalls.
device diversity together with erroneousmanual entry often lead to bugs that cause large downtime in which valid packets are dropped or invalid packets are let through.
therefore an all sat solver that computes all reachable packets from a source to a destination is needed in network verification .lopesetal.
usetheall satsolvingtechnique tocomputeallthereachablepacketsforanetwork.theygeneralizethereachabilityverificationtooltofindallthestatesinthereachableset.theall satsolvingtechniqueisalsoappliedtothepredicateabstraction whichisatechniquetoautomaticallyextracting finite stateabstractionsinsystemswithpotentiallyinfinitestatespace.
for a formula and a set of predicates in a theory lahiri et al.
use the all sat solver to enumerate all the models of the formulaoverthepredicatesinthegiventheoryandfindthemost preciseapproximationmodelofthesystem.anotherapplicationof the all sat technique is in the field of image computation and symbolic model checking .
gupta e t al.
compute all the solutions below intermediate points in the sat decision tree.
in this work we focus on the applications of sat theory that requirecomputingallthesatisfiableassignments all sat ofa given formula such as unbounded hardwaremodel checking logicminimization temporallogicplanning andknowledge compilation .
within these applications the number of 35th ieee acm international conference on automated software engineering ase variablesinthesatformulasisusuallylargeandtheclausesare usually complex.
therefore the trivial method that blocks every satisfiable assignment after finding it is inefficient.
there are mainly three methods to find all the satisfiable assignments of a given formula i.e.
the blocking based strategy the backtracking based strategy and the bdd binary decision diagram based strategy .
the key motivation of the blocking basedstrategy is togenerate lessand shorter blockingclauses toblockmoresatisfiableassignments.oncetheblockingclauses falsifiedthegivenformula thenallofthesatisfiableassignments are expressed by the negation of the blocking clauses.
the backtrackingbasedstrategybacktrackstothepreviousdecisionlevelinside a dpll davis putnam logemann loveland tree.
choos ing a good backtrack decision level is the key motivation of this strategy.
the bddbased strategy complied with the cnf formula into a binary decision diagram using the knowledge complication techniques and all the satisfiable assignments are generated by traversingallthepossiblepathsfromtherootnodetothesinknode in the diagram.
when dealing with the formulas from these applications the existingblockingbased strategiestendtogenerate largeblocking clausesthathinderthesatsolverfromquicklyfindingasatisfiable assignment.furthermore thechoicesofbacktrack decisionlevels arehardbecausethenumberofclausesintheformulaislarge.the bdd itself tends to be too complex to traverse efficiently when the numberofclausesandvariablesis large.therefore existingallsatsolverswiththesethreestrategiesusuallyfailtofindallthe satisfiable assignments ofthe formula generated fromthese applications.
due to the lack of proper all sat solver the application of sat theory in these fields is limited.
in thiswork wepropose anall sat solver basolver following the blocking based strategy.
but the generation of blocking clauses in basolver is different from the existing approaches.
basolverfirstcomputesallthebackbonevariablesandpartsofthe satisfiableassignmentsofthegivenformula.atleastonesatisfiable assignment is generated during the computing of the backbone variables.
then basolver uses the backbone variables to generate thepartialassignmentsandtheblockingclausesfromtheknown satisfiableassignments.allbackbonevariablesareremovedfrom thepartialassignments.aclause intheformulaiscoveredbya variablexintheclauseif xisassignedto trueinthegivensatisfiable assignment.
basolver uses a greedy strategy to generate the shortestpartial assignmentsuch thateach clausein thegiven formulaiseithercoveredbyabackbonevariableoravariableinthe partialassignment.finally theblockingclauseisgeneratedwith the negation of the partial assignment.
comparing to the existing work shorter blocking clauses are obtained from the partial assignments in basolver.
there aretwoadvantagesofremovingbackbonevariablesfromthepartialassignments and the blocking clauses.
firstly the complexity of generatingapartialassignmentfromthefullsatisfiableassignment iso n m wherenis the number of variables in the formula and mis the number of clauses in the formula.
by directly removing backbone variables from the partial assignment the variables that needtobecomputedinthepartialassignmentgenerationisreduced.
when thenumber ofclauses islarge the reductionis significant.
secondly withshorterblockingclauses thesatsolverisabletoreturn a new satisfiable assignment quicker especially when the numberofclausesislarge.theexperimentalresultsshowthatwith the help of backbone variables the sat solving in basolver is much faster and less computing time is needed to generate a givenamountofsatisfiableassignments.theresultsalsoshowthatwhen all the backbone variables are added as unit clauses to the formula basolver is still more efficient thanks to the shorter blocking clauses used in it.
basolverusesminisatv2.
.
astheunderlyingsatsolver.
wecomparedbasolverwith4off the shelfall satsolvers including two blocking based tools mblocking and bc one backtracking based tool nbc and one bdd based tool bdd .
among all the all sat solvers basolver solves finds every assignment of the given formula the largest number of formulas 86outof608 within10hoursand64gmemory.while70 and formulas are solved by mblocking bc nbc and bdd respectively.
for the formulas that are solved by both basolver andoneofthecomparingsolvers basolveralsouses88.
less computing time than that used in the other solvers.
basolver uses less total computing time and less blockingtimeinfindingthefirst1000satisfiablepartialassignments ofaformulawhosebackbonevariablesareaddedasunitclauses.
for the formulas whose variables are all backbone variables basolver solves the most formulas with the least computing time comparing to each of thesolvers.more details of the experiments are shown in section .
the main contributions of our work are as follows weproposeanalgorithmtocomputeallthesatisfiableassignments based on the backbone variables of the propositional formula.
it is the first application of the backbone variables in the all sat solving problem.
we propose a blocking based all sat solver basolver to compute all the satisfiable assignments of the given formula.comparingtotheexistingwork basolverismoreefficient duetotheuseofthebackbonevariables theuseofshorter partial assignments and the use of shorter blocking clauses.
experiments show that basolver uses less computing timeamong all the blocking based backtracking based and bdd based all sat solvers.
the remainder of the paper is organized as follows.
we describe notations and preliminaries in section .
the algorithms of basolver are discussed in section experimental results are shown in section and the related work is discussed in section .
we conclude the paper in section .
background in this section we present the necessary background on the satisfiabilityproblemsandexplainhowbackbonevariablesareidentified.
we also discuss the straightforward blocking based methods to compute all the satisfiable assignments and the backbone variables of the given satisfiable formula.
.
the sat and the all sat problems in this work the propositional satisfiability formulas are described in the conjunction normal form cnf and the clauses are de scribed in the disjunction normal form dnf .
let xbe a finite 7set ofboolean variables.
a variable x xhas two literals xand x andthevariable xiscalledthecorrespondingvariableofthe literals.
a clause is a disjunction of the literals logicalortext.
li li which is also represented as a set of literals li i n .
a literal is denotedas l if isconsistsoftheliteral l.avariable xisina clause iftheliteral xortheliteral xintheclause .aformula is a conjunction of the clauses logicalandtext.
li i. the formula can also berepresentedasasetofclauses i i n .forclarity we use to denote a clause and to denote a formula.
for every variable x xis the set of clauses that contain eitherxor x i.e.
xif and only if x or x and p xis the set of clauses that contain x nxis the set of clauses that contain x. givenasetofbooleanvariables an assignment visamapping v x .thevalueofabooleanvariable xinanassignment visv x .i fv x thenv x .
ifv x then v x i.e.
v x v x .i fv x v x ifv x v x i.e.
v x v x .
if the value of xinvis then the value of xinvis also i.e.
v x 1i fv x .
we also use the conjunction of the literals whose value are in an assignment vto denotethe v forexample anassignment v a 1andv b 0is alsowrittenas v a b whereaandbareliteralsoftheformula.
thevalueof undertheassignmentof vis1ifandonlyifthere exists a literal l andv l denoted as v if and only if l v l .
for a clause and an assignment v we say that v if and only if v .
the value of under the assignment ofvis if and only if the value every clause is denoted as v if and only if v also written as v if and only if v .
an assignment vis afull assignment of if and only if there doesnotexistavariable x suchthat v x .otherwise xis a partial assignment.
fora partial assignment vp a fullassignment vfimpliesvpif for every variable x such that vp x nequal vf x vp x denotedas vf vp.ifafullassignmentimpliesa partial assignment then the full assignment can be expressed and replaced by the partial assignment in the set of all the assignments.
anassignment isasatisfiableassignment solution of ifand onlyif .theall satproblemistocomputeallthesatisfiable assignments of a given formula.
since the size of the satisfiable assignmentscouldbeexponential weusepartialassignmentsto expressmultiplefullsatisfiableassignmentsatthesametime.for a partial assignment vp if every full assignment vfthat implies vpis a full satisfiable assignment then vpis called a satisfiable partial assignment and can be used to express the set of all the assignmentsthatimply vp i.e.
vpexpressthesetoffullassignments vf vf vp vf .
modern sat solvers usually use the dpll algorithm t o findasatisfiableassignment.therearetwokindsofvariablesduring the solving the decision variables and the implication variables.
the solver assigns or to the decision variables and checks if there exist any variables that need to be assigned to after thecurrent decision.if there exist such variables these variables are called implication variables and is assigned to them.
during the dpll process a conflict happens if there exists a clause that the value of every literal in the clause is .
the solver backtracks to the previous decision level whenever a conflict occurs.
if a conflictoccursattherootlevel thatmeanstheformulaisunsatisfiableand the current conflict is a proof of it.
satsolversalsosupporttheuseoftheassumptions.anassumptionisasetofliteralsthatmustbeassignedto1inthesatisfiable assignmentcomputedbythesatsolver.forasatisfiableformula assumightbeunsatisfiable.inthiscase thesatsolverreturns asubsetof assuindicatingthereasonsthat isnotsatisfiableunder the assumption of assu.
a straightforward blocking based method to compute all the satisfiableassignmentsistoiterativelycomputesatisfiableassignments.
to avoid findingthe samesatisfiable assignment thenegationsofthealreadyknownsolutionsisaddedtotheformula.these negations are called blocking clauses.
since a solution is a conjunctionofunitliterals thenegationofitisadisjunctionofunitliterals a clause i.e.
c logicalortext.
l l .
the formula primeis updated with and the blocking clause c i.e.
prime c i f is unsatisfiable then all the satisfiable assignments are found.
otherwise a new satisfiableassignment primeisfoundbythesatsolver primeisupdated with prime c prime until primeis unsatisfiable.
if a assignment primeis a satisfiable of primethen is also a satisfiable assignment of i.e.
if prime.
in this way all the satisfiable assignments of are found by the sat solver with the help of prime.
we show an example to illustrate the above definitions.
for a propositional satisfiable formula a b c a b c a b c a b c .
the set of clauses that contain the variableais a b c a b c a b c a b c theset of clauses that contain the literal ais .
an assignment such that a b and c is a satisfiable assignment of .
a partial assignment vpsuch that vp a is implied by and vpis a satisfiable partial assignment since all the full assignments that imply vpis a satisfiable assignment of .
in an sat solver with the given formula the variables a b andcmay be assigned to as decision variables respectively.
in an all satsolver supposethefirstsatisfiableassignmentof is such that a b c then the blocking clause of is a b cand prime a b c a b c a b c a b c a b c .
a new satisfiable assignment primesuch that prime a prime b and prime c is found by the sat solver and primeisupdatedwith prime prime a b c .eventually primewill be updated to prime a b c a b c a b c a b c and it is unsatisfiable.
all the four satisfiable assignments are 1 a b c 2 a b c 3 a b c and 4 a b c. .
the backbone variables foragivensatisfiablepropositionalformula avariable x isa backbone variable ifthe valueof xinevery satisfiableassignment of remains the same.
for an unsatisfiable propositional formula theredoesnotexistabackbonevariableastheredoesnotexista satisfiableassignmentfortheformula.aformaldefinitionofthe backbone variable is as follows.
definition2.
thebackbonevariables .
givenasatisfiableformula avariable xisabackbonevariableof ifandonlyif x is unsatisfiable or xis unsatisfiable.
for a given formula a variable x is either a backbone variable or a non backbone variable.
for a non backbone variable 8figure workflow of basolver xof the given formula there must exist two different satisfiable assignments of such that 1 2 1 x nequal 2 x .
astraightforwardalgorithmtocomputeallthebackbonevariablesofagivenformula istoiterativelycheckthesatisfiabilityof xand xforeveryvariable x .ifeitheroftheformulas is unsatisfiable then the variable xis a backbone variable.
forexample givenaformula a b c a b c a b c a b c thevariable aisabackbonevariablesince a is unsatisfiable.
and both the variable bandcare non backbone variables since b cand b care satisfiable.
all sat solver using the backbone variables the workflow of basolver is shown in figure .
there are mainly two phases in basolver the backbone computing phase and the blocking phase.
in the backbone computing phase basolver computes all the backbone variables of the given formula with the educibone tool .
there are two parts in the output of educibone a complete set of backbone variables and a set of satisfiable assignments.
notice that it only generates parts of the solutions butbasolverstillbenefitsfromthesesolutionsasitdoesnotneed to generate again.
all the backbone variables of the given formula are inbl and parts of the satisfiable assignments are in s .
the partial assignments of s are generated and stored in sp in the blocking phase.
intheblockingphase basolvertakesthebackbonevariables the given formula and the given satisfiable assignments as the inputs and generates the partial assignment p and the blocking clausebc for each given satisfiable assignment sp .
the blockingclause bc isthedisjunctionoftheliteralsassignedto0in thepartialassignment p i.e.
bc logicalortext.
p l 0l.thentheformula primeis updated with bc and the partial assignment p is added tothesetofthepartialassignments sp .ifthenewformula primeis unsatisfiable basolverhasfoundallthesatisfiableassignments of the given formula .
otherwise a new satisfiable assignment is addedto s .then basolvercomputesthepartialassignment p primeand the blocking clause bc primefor the next satisfiable assignment insp and updates primewith prime bc prime.
the partial assignment p primeis added to sp .
the blocking phase only terminates when primeis unsatisfiable.
since the number of satisfiable assignments of the formula is finite and logicalandtext.
bc is unsatisfiable primewilleventually becomeunsatisfiable intheblocking phase.when basolverterminates allsatisfiableassignmentsof areexpressed by the negation of the blocking clauses in s .
.
computing the backbone variables webrieflyintroducethealgorithmweuseinbasolvertocompute all the backbone variables.
basolver uses the educibone to compute the backbone variables and the algorithm is shown in algorithm1.thealgorithmfirstinitializes5arrays.theset wisthe setof theliteralsthat havenotbeen handledinthe algorithm the settis the set of the literals that need individual sat solving.
the setblis the set of the currently known backbone variables and the setnblis the set of the currently known non backbone variables.
s is the set of the satisfiable assignments computed in algorithm .
atfirst thealgorithmcomputesasatisfiableassignmentofthe givenformula usingsat if issatisfiable retistrueandthe satisfiableassignmentis otherwise cistheunsatisfiablereason if exits .
if is unsatisfiable there isno backbone variable.
if is satisfiable everyliteral lof whichhasbeenassignedto0isadded tow and isaddedto s.thenthealgorithmiterativelyhandlesthe literals in w. the variables in it are separated into groups chunk is the size of the group.
separating is very helpful in formulas withlargeamountofvariables.the chunkamountis100according to the most efficient configuration in .
we also try different chunkvalues in the experiments but the performance difference issmall.foragroupofliterals assu if assuissatisfiable then thecorrespondingvariableofeveryliteralin assuisaddedto nbl and the new assignment is added to s. otherwise if the size of the unsatisfiablereason cis1 thenthecorrespondingvariableofthe literalincisaddedto blandremovedfrom assu.ifthesizeofthe unsatisfiable reason cis greater than then all the literals in care addedtotandremovedfrom assu.thealgorithmtheniteratively checkthesatisfiabilityof assuuntilitissatisfiable.sincethe size ofassuis finite assuwill either become empty or assu becomessatisfiable.anewchunkofliteralswillbeassignedto assu when the computing of the current chunk is finished.
when the w setisempty thealgorithmstartstodealwiththeliteralinthe tset.
foreachliteral l t if lissatisfiable thenthecorresponding variable of lis a backbone variable otherwise it is a non backbone variable.
.
backbone variables based blocking clauses computing wethenintroducethecomputingofthepartialassignmentandthe blocking clause the blocking phase based on a given satisfiable assignment ofthegivenformula andallthebackbonevariables of .
forasatisfiableformula andabackbonevariable x ifthevalue ofxin every satisfiable assignment of is then the satisfiable assignments of and xare the same.
it means that if a assignment then x and if negationslash then negationslash x. therefore foraformula andbackbonevariablesof inbl the result of all sat solver will not be changed by replacing with logicalandtext.
l bl l 1l.
after replacing the formula we can remove the backbonevariables from allthe satisfiablepartial assignments sincethevalueofthebackbonevariablesisalreadyfixedbythenew 9algorithm computing the backbone variables function backbone w t nbl bl s ret c s a t if!retthen return ifretthen s.add foreachl l 0dow.add l whilew.size nequal0do assu w w.remove assu ret c s a t assu while!retdo ifc.size end thenbl.add c elset.add c assu assu.remove c ret c s a t assu nbl.add assu s.add endforeachl tdo ret c s a t l ifretthen nbl.add l s.add endelsebl.add l end endreturnbl s end formula.
for a satisfiable partial assignment p pcontains all the backbonevariablesof although p primeisnolongerasatisfiablepartial assignmentafterremovingthebackbonevariables wecaneasily recoverpfromp primeas all the backbone variables of are already known.
as we discussed before shorter partial assignments will leadtoshorterblockingclausesandacceleratetheall satsolving procedure.
based on the above observation algorithm computes the shorter partial assignment and the blocking clause.
the idea of thealgorithmistocomputethesatisfiablepartialassignmentand removes all the backbone variables from it.
with a given formula a satisfiable assignment and allthebackbonevariables bl of .algorithm2firsttraverses the non backbone variables in if the variable xis an implication variable then xis added to the array of the partial assignment p. basedonthedpllprocedureintheminisatsolver ifavariable xis an implication variable then there must exist at least a clause of such that either xor xhas to be assigned to to make satisfiable.
therefore the implication variable xmust exist in the satisfiable partial assignment of .
if the variable xis not animplication variable and the value of xin is the algorithm iteratively checks every clause such that l to see iflis the only literal in which has been assigned to .
if so lis also in thepartialassignment.thealgorithmcheckstheclausesin n lif l .foreveryliteraladdedto p thenegationoftheliteralis added tob.
aftercheckingallthenon backbonevariables thepartialassignmentpandtheblockingclause caregenerated.thetimecomplexity of algorithm is o m n k wherem n kare the number of clauses variablesandsatisfiableassignmentsof .toreducethe computing in algorithm we add a small optimization in the basolver tool.
we compare the difference between two satisfi able assignment and only the variables with different values are computed.
algorithm computingthepartial assignmentandthe blocking clause function blocking bl b p foreachx x nelementbl x 1or x 1do ifxis an implication variable then p.add x if x 0thenb b x elseb b x end else if x 0then foreach p xdo if nexistsl l 1then p.add x b b x break end end endif x 1then foreach nxdo if nexistsl l 1then p.add x b b x break end end end end endreturnp b end therearetwoadvantagesofremovingthebackbonevariables from the partial assignments.
firstly the following sat solving is easier for the sat solver since the size of the clauses has been significantlyreduced.moreover eventhetimecomplexityofthe computing the partial assignment and the blocking clause is in 10polynomial time but it still could be time and memory consuming whentheformulasandthenumberofthesatisfiableassignments are large.
by removing the backbone variables from the partial assignments we could save a large amount of computing time and memory resources during the blocking phase.
experiments also indicatethatfora special groupoftheformulas whichonlyhave one satisfiable assignment finding all the backbone variables is generallyfasterthandirectlyfindingallthesatisfiableassignments using the existing all sat tools.
algorithm computing all the satisfiable assignments bl s backbone sp prime foreach sdo p b blocking bl phi prime prime b ret c sat ifretthen s.add prime sp.add p end else return sp bl end aftercomputingthepartialassignmentsandtheblockingclause oftheagivensatisfiableassignment weupdatetheformula to bcandcontinuefindingthenextsatisfiableassignmentofit.the algorithm of basolver is shown in algorithm with the function ofbackbone andblockin bl introduced in algorithm and algorithm .
foragivenformula basolverfirstcomputesthebackbone variables bl of the satisfiable assignments generated during thecomputingisin s.thenbasolvercomputesthepartialassignmentpandtheblockingclause bforeverysatisfiableassignment ins.if prime bissatisfiable newsatisfiableassignmentisadded tos.
the partial assignment of every satisfiable assignment in s isaddedto sp.if prime bisunsatisfiable basolverreturns spand bl .
the satisfiable partial assignments are generated by adding all the backbone variables back to each partial assignment in sp.
evaluation we implemented basolver based on the educibone tool following a blocking based strategy.
we use the minisat .
as the sat solver.
basolver is implemented in c with approximately 1000linesofcodeforthemainalgorithm.theexperimentsareconducted on a cluster of linux systems.
the runtime limitation is hours and the memory limit is 64gb.
only one formula is running on a node of the cluster at one time and no parallel techniques are used during the experiments.
basolver uses the solve interface of the minisat solver to solve formulas and the addclause interfacetoaddnewblockingclausestotheformula.itdidnotuse other incremental features of the minisat solver.
we evaluate the efficiencyofbasolverthroughmultipleexperiments answering the following research questions rq1 howeffectiveisbasolvercomparingtootherallsat solvers?
rq2 is the shorter blocking clause really useful in the all sat computing?
rq3 is the percentage of the backbone variables in the formulasrelatedtotheperformanceofbasolver?isitcosteffective to compute all the backbone variables first?
.
experimental setup benchmarksandevaluationmetrics.
inasurveybytodaand soh threesourcesbenchmarksareused.thesatcompetitions of the satlib benchmark and the iscas85 libraries.
we extend the first source with benchmarks of sat competitions from 2011to2017.wefoundthatthelinkofthethirdsourceisnolonger accessible andthe formulas inthe satlib libraries areeither too simple all of the solvers finished within second or too hard none of the solver finishes .
therefore we only uses the extended first source as our benchmark.
there are formulas in total out of which are known as unsatisfiable out of whichare satisfiable and the satisfiability of the rest remains unknown.
the final benchmark is consists of the satisfiable formulas.
among the formulas educibone is able to compute all the backbone variables of formulas.
for the rest of the formulas computingonesatisfiableassignmentalwaysspendsmostofthe timelimitation andfinishingall satcomputingusinganysolver is unlikely possible for them.
for an sat solver such as minisat we say a formula is solved bythesatsolverifitfindsatleastonesatisfiableassignmentof theformula.fortheall satsolvers suchasbasolver wesay a formula is completely solved by the all sat solver if it finds every satisfiable assignment of the formula if the all sat solver onlyfindspartsofthesatisfiableformula wesayitpartiallysolvedtheformula.weusethenumberofsolvedformulasandtheaveragecomputing time as metricsto evaluate the performance of theallsatsolvers.
forthe formulasthat all satsolver arenotable to find all the satisfiable assignments we use the average computing time of fining the first satisfiable assignments as the metrics.
baseline approaches.
to conduct a complete and objective comparisonbetweenbasolverandtheexistingtools weuse4different all satsolversintheexperiments.amongthepublicall sat solvers with the available toolkit these performs the best.
the first all sat solver is mblocking it also uses the partial assignmentstoexpressthefullsatisfiableassignments.theauthors propose three different strategies in mblocking all clauses nondisjointing and hybrid.
we use the configuration of the hybridstrategy since the authors claim that it performs the best.
theother three tools are all from a survey in the year .
in the survey toda and soh conclude the existing all sat solving algorithmsandimplementedthemtoall satsolvers.thereare different configurations used in these solvers we use the default configurations of these solvers.
the second all sat solver is bc though is also uses the blocking basedstrategy.
the last two allsat solvers are nbc and bdd.
nbc uses a backtracking basedstrategy to find all the satisfiable assignments and bdd uses the bdd basedstrategy.allthelastthreeall satsolver bc nbc 11formulas avevar avecl avefst avesatinst basolver mblocking bc nbc bdd dimacs .
aprove .
complete .
encryption .
manthey .
mp1 .
.
others .
total .
.
table overall performance of all sat computing tools andbdd changestheimplementationoftheminisatsolverwhile basolver and mblocking use the minisat solver as a black box.
due to the strategies used in nbc and bdd they do not use the partial assignments to express the full satisfiable assignments and duetotheimplementationofbc thoughitusesablockingbased strategy it also does not use the partial assignments to express the full satisfiable assignments.
the difference between the number of the full satisfiable assignments and the number of partial assignments that express them could be large.
therefore the comparison on the formulas which are not completely solved by any of the all sat solvers are only conducted between basolver and mblocking.
.
results rq1 howeffectiveis basolver comparingtootherall sat solvers?weshowtheformulas ingroups thatare atleastsolvedby one of the all sat solvers.
the first column of table shows the name of the groups.
from the second to the fifth columns shows thebasicinformationoftheformulas includingtheaveragenumberofthevariables avevar theaveragenumberoftheclauses avecl the average computing time for the first satisfiable assignment avefst and the average number of satisfiable formulas avesatinst .theaveragenumberofsatisfiableformulasinthe dimacs complete andencryptiongroupis indicatingthatallthe variables in these formulas are backbone variables.
the average number of satisfiable formulas in the manthey group is also small indicatingthatmostofthevariablesarebackbonevariablesinthese formulas.
fromthesixthtothetenthcolumnsintable1showsthenumber offormulasineachgroupsolvedbybasolver mblocking bc nbc and bdd respectively.
figure shows the comparison of the formulanumberssolvedbytheall satsolversindifferentgroups.
thereare8groupsofbars indicatingthegroupsoftheformulas.
there are bars in each of the groups indicating the number of solved formulas of the all sat solvers.
the y aixs shows the numberofthesolvedformula.thefirstbarineachgroupisalways thehighest itmeansthatbasolversolvesthemostformulasin all the groups.
in total basolver solves formulas which is more than mblocking solves more than bc solves more thannbcsolves and86 morethanbddsolves.theresultsshow that basolver solves more formulas than all the other tools in a given time limit.
figure2 numberofsolvedformulasoftheall satsolvers figure comparison of computing time among the 5solvers figure 3shows the comparisonof computing timetime among the all sat solvers.
each bar shows the computing time of basolvertosolvetheformula.thecomputingtimeofmblocking bc nbc andbddareshownwiththedot cross plus andtriangle 12figure comparison of the computing time between basolverand the most efficient solver respectively.
for most of the formulas basolver uses less computingtimethantheother4solverssincemostoftheshapesare notdrawn onthebars.
theaveragecomputingtime of basolver amongthe86formulasis3882seconds.forthe70formulasthatare both solved by basolver and mblocking basolver needs less computing time than mblocking does.
for the formulas that are both solved by basolver and bc basolver needs less computing time.
for the formulas that are both solved bybasolver and nbc basolver needs less computing time andforthe46formulasthatarebothsolvedbybasolverandbdd basolver needs less computing time.
figure4 showsthecomparisonof thecomputingtimebetween basolver and the comparison solvers.
the minimal computing time for a formula among the comparison solvers is used to comparewithbasolver.theredlinedenotesthecomputingtimeof basolver for each formula and the bars denote the comparison computing time of the formulas.
it shows that the performance betweeneachsideissimilar indicatesagoodversatilityofbasolver.
thebasolversolvesmoreformulasthanthecomparisonsolvers withthegiventimelimitation.fortheformulasthatarebothsolved bybasolverandeachofthecomparisonsolver basolveruses less computing time.
moreover basolver also shows good versatilitybyasimilarperformancecomparingtothemosteffective solver which is different for every different formula.
answer to rq1 basolver solves more formulas within the given computing limitation.
and less computing time is used in basolver for solving the same formulas.
rq2 is the shorter blocking clause really useful in the all sat computing?
sincetheuseofbackboneinformationintheall sat computingonlyhastwoconsequences shorterblockingclausesandadditionalunitclauseswithbackbonevariables.toanswerrq2 we add the backbone variables as unit clauses to the original formulas.
we then compare the sat solving time the blocking time and the total computing time of finding the first satisfiable partial assignmentsofeachformulawiththedifferentsolvers.thesolvingtimeindicatesthecomputingtimeconsumedbytheminisatsolver and the blocking time represents the computing time consumed by the generation of the partial assignments and the blocking clauses.
sinceitisdifficulttoseparatetheblockingandthesolvingprocessinbc nbc andbdd weonlycomparebasolverwithmblocking in this experiment.
thereare214formulasinwhichallthebackbonevariablesare foundbyeducibone.within10hours and64gbmemorylimit basolverfinishescomputingthefirst1000satisfiablepartialassignments of formulas and mblocking finishes computing the first1000 satisfiablepartialassignments of94 formulas.allthe formulasfinishedbymblockingarealsofinishedbybasolver.
among them for of the formulas basolver uses less blocking time and for of the formulas mblocking uses less solving time.
in total the average computing time for the formulas in basolver is seconds which is less than mblocking seconds .
the average blocking time of basolver seconds is time less than that used in mblocking seconds .
the average solving time of basolver is seconds which is similar to thatin mblocking seconds .therefore the more efficient blocking process mainly contributes to the efficiency of basolver.
sinceallthevariablesareaddedasunitclausestothegivenformula theshorterblockingclausesisthemainreasonthatbasolveruses less blocking time than mblocking does.
figure shows the comparison of the blocking time solving time and the total computing time used in finding the first satisfiablepartialassignmentsforaformula.theredbarsshowthe blocking time used in basolver the blue bars show the solving timeusedinbasolver thegreenbarsshowtheblockingtimeused in mblocking and the yellow bars show the solving time used in mblocking.formosttheformulasintheplot thetotalcomputingtimeusedinbasolverislessthanthatusedinmblocking.also inbothofthesolvers theblockingprocessconsumesmorecomputing timethanthesolvingprocess duetoalargenumberofvariables and clauses in the formulas.
in this experiment basolver uses less blocking time in finding the first satisfiable partial assignments in each one of the formulas.
theshorter blockingclauses areuseful inall sat solving as they are the main difference between basolver and mblocking within the experiment.
answer to rq2 theshorterblockingclausesleadtoalessblockingtime which is useful and efficient in the all sat solving.
rq3 is the percentage of the backbone variables in the formulas related to the performance of basolver?
is it cost effective to compute all the backbone variables first?
for all the solvers in the experiments more formulas are solved when there are morebackbone variables in the formulas.
nearly of the formulas solvedbythe5solvershave100 percentageofbackbonevariables.
figure6showsthecomputingcomparisonofthe5solversonthe formulas with a percentage of backbone variables.
the light bluebarsarethecomputingtimeofbasolver andthelightred barsaretheleastcomputingtimeamongthe4comparingsolvers for the same formula.
notice that the lighter red bars starts from 13figure comparison of the blocking and solving time betweenbasolver andmblocking figure comparison of the computing time for the for mulas with backbone variables the top of the darker blue bars which means that if that if basolver does not use the least computing time the circles dots or crosses might below the lighter bars.
the dots crosses pluses and triangles represents the computing time of mblocking bc nbc and bdd for the same formula respectively.
basolver uses the least total computing time among the solvers.
for almost half of the formulas basolver needs the least computing time among all the solvers.
it indicates that if only one solver is applied to these formulas basolver is the most efficient one.
wechoosethe64formulasthatbothbasolverandmblocking finds the first satisfiable partial assignments to study the relation between the performance of basolver and the percentage of thebackbonevariables.thepercentageofthebackbonevariableintheseformulasrangesfrom0.
to99.
theaveragepercentage is .
.
figure7showsthecomparisonoftheblocking solvingandcomputing time between basolver and mblocking among the formulas.theredplotshowstheblockingtimeofmblocking and figure comparison of the computing time for the for mulas with different percentages of backbone variables the blue plot shows the total computing time of mblocking.
from bottomtotap theyellowbarsshowtheblockingtimeinbasolver the green bars show the solving time in basolver and the purple bars show the backbone computing time in basolver.
for most of the formulas the blocking time used in basolver is less than that in mblocking.
the average blocking time in basolver is times less than that in mblocking.
but due to the computing ofthe backbone variables for nearly formulas basolver needs morecomputingtimetofindthefirst1000satisfiablepartialassignments.
for most of the formulas less computing time is needed for basolver.
figure8showsthecomparisonoftheaveragecomputingtime between basolver and mblocking grouped by the percentageof the backbone variables.
mblocking uses less computing time when the percentage of backbone variables is and .
thisisbecausethe64formulasarerelativelymoredifficulttothe minisat solver more computing time are consumed when finding allthebackbonevariables.whentherearenotenoughsatisfiable assignments in the formulas with more backbone variables the time consuming in the backbone computing phase becomes moreand more serious.
the general performance of basolver comparing to the other solvers is not affected by the percentage of the backbone variables.
but since there are less satisfiable assignments that exist whenthe percentages of backbone variables are high more formulas aresolvedbyallofthe5solverswithmorebackbonevariablesin the formulas.the experiments showthat even thoughcomputing allthebackbonevariablesrequireadditionalcomputingtime but basolver uses less computing time for each of the partial assignments in most formulas.
for the formulas that all the variables are backbonevariables theaveragecomputingtimeusedinfindingthe onlysatisfiableassignmentinbasolverislessthanthatineach ofthecomparingsolvers.therefore computingallthebackbone variables in all sat solving is cost effective.
if there is only one satisfiable assignment basolver is able to find it quickly after computingallthebackbonevariablesformostoftheformulas.if thereareamountofthesatisfiableassignmentsislarge theaverage 14figure computing time of basolver andmblocking for formulas with different percentage of backbone variables computing time of each satisfiable assignment in basolver is less after computing all the backbone variables.
answer to rq3 all the solvers solves more formulas when there are more backbonevariablesintheformulas thepercentageofthebackbone variables does not influence the general performance of basolverdifferently.
computing all the backbone variables of theformulas iscost effectivefor theformulas especially forthe formulas with percentage of backbone variables.
.
limitations and threats to validity firstly basolverusestheminisatsolver asablackboxto solve the propositional formulas and use the unsatisfiable reasons returned by the minisat solver.
there are sat solvers that are fasterthanminisatandthereasonsreturnedbyminisatmaynot bemostappropriateforall satsolving.also sincebc nbcandbddchangetheimplementationinsidetheminisatsolver wecan notcomparewiththeminthesecondandthirdexperiments.secondly differentblockingclausesinsidethesameall satsolver mayalsoinfluencetheperformanceoftheall satsolver.inthe second and third experiments we did not consider the order ofthe satisfiable partial assignment.
it is possible that some blocking clauses may accelerate the following sat solving significantly.
moreover weonlyusetheformulasfromtheindustrialtracksof satcompetitions.theseformulasaregenerallymorechangeable fortheall satsolversasmoresolvingtimeisrequired.although thereare608formulas thenumberofformulasthatsolvedbyat least one of the solver is still less than and most of them have lessthan100satisfiableassignments.wewouldliketochoosesomeformulaswithmorethan1000satisfiableassignmentsandtheaveragedifficultyforthesatsolver.wehopethatatleastoneofthe solvers will solve these formulas completely and then we can compare the scalability among the solvers.
lastly since only satisfiable formulashavebackbonevariables basolverisnotapplicableto over constrained unsatisfiable formula.
although normally the inputofall satsolversaresatisfiableformulas itisalsopromisingtostudyontheover constrainedformulaswiththetechniquesin basolver.
related work basolverisablockingbasedall satsolverandthegreedystrat egyusedinittogeneratethepartialassignmentsisfromapproaches proposed by morgado and marques silva and yu et al.
.
jin and somenz proposed a blocking based all sat solver.
it finds all the satisfiable assignments for a generic boolean cir cuit using the blocking based framework.
it can be directly used inmanipulationsofthelogiccircuitssuchascomplementingand flattening.
gebser et al.
applied similar techniques to the enumeration of answer set programming.
mblocking is another blocking based all sat solver that uses a greedy strategy named minimal blocking to generate the minimalsetofblockingclauses.forasolutionofthegivenformula mblocking either uses the set of dominant variables based on the clauses coverage or the set of decision variables and their corresponding reason variables based on the search tree to generate the blocking clauses.
however backbone variables may occur in the minimal set ofblocking clauses and actuallycan be removed.
the short blocking clause used in basolver is more efficient than that usedinmblocking andthereducedlengthoftheblockingclauses isakeyreasonthatbasolvercomputesmoreformulaswithless computing time than mblocking does.
themaindifferencebetweenblockingbasedandnon blocking basedsolversistheuseofblockingclauses.inordertoavoidfinding thealreadyknownsolutionsoftheformula blockingbasedtools generate theblocking clauses ofeach known solutionand add the blocking clauses back to the solver.
in the non blocking based allsat solvers backtrack techniques in the search tree are usedtofindmoresolutionstothegivenformula.oncea solution is found the non blocking based tools choose a decision level and backtrackthesearchtreetothatlevel.adifferentdecisionismade at that level and a new search path is generated based on the new decision.
jabbour et al.
proposed a non blocking all sat solver.
after finding the first satisfiable assignment it starts to run with the restart configuration.
when a conflict happens the solver backtrackstothepreviousdecisionlevelandpropagateswiththeconflict reasons.
gebser et al.
proposes a new conflict driven learning algorithmthatusesanelaboratedbacktrackingscheme.thescheme records all the decision variables after finding some projected solutions.
in this way the scheme can be maintained in the polynomial spaceandonlyalinearnumberofsolution excludingconstraints areused.grumberg etal.introducedthenotionofsub levels and presented a sub level based first uip scheme that was compatiblewiththenon blockingapproaches.gebser etal.presents alternative conflict resolution by means of non chronological backtracking with a backtrack level limitation.
nbc isanon blockingbasedtoolthatbacktracksthesearch tree to find every solution of the given formula.
there are different backtrack strategies in nbc and by using these strategies in differentorders thereare8differentstrategiesintotalinnbc.eachstrategy performs differently on the formulas therefore the choiceofstrategiesisachallengefornbc.comparingtonbc basolver 15onlyusesonestrategywhichistheshortblockingclausesobtained by backbone variables to find every solution of the formula.
formula caching technique associated with concise graph representations of propositional theories is also applied in the all sat solving field including fbdd free binary decision diagrams obdd orderedbinarydecisiondiagrams andd dnnf deterministic decomposable negation normal form .
such a representation is able to be efficiently constructedwhile executing an exhaustive dpllsearch.aconnectiontoall satwasmentionedinhuangand darwiche .anapplicationtoall satsolvingitselfwasmoreexplicitlymentionedintodaandtsuda andacompilation based all sat solver has been released.
besides formula caching the dualization of the boolean functionscouldalsobeappliedtotheall satsolving.givenadnf disjunctionnormalform formulaofabooleanfunction theallsatproblemsforthefunctiontransfertotheproblemofcomputing the complete dnf formula for the dual function .
anotherrelatedtopicis satcounting whichcountsthetotal numberof allthe satisfiableassignments.
someof theapproaches in the sat field use similar blocking techniques that are also usedinall satsolvers butthestate of the art satapproachisbased on the universal hashing technique which can not be applied to the all sat solvers.
conclusion we propose an all sat solver basolver which uses backbone information to get shorter blocking clauses and achieve higher efficiency.
comparing to other all sat solvers basolver removes backbone variables from the blocking clauses.
with shorter blocking clauses the complexity of the following sat solving decreases the number of sat solving needed decreases and the efficiency of all sat computing improves.
experiments show that basolver is an efficient all sat solver the shorter blocking clauses used in it leadstoareductionofthecomputingtime.althoughcomputing all the backbone variables requires additional computing time but it is cost effective since the average computing time of each sat isfiable assignment is reduced in basolver.
also all the solversin the experiments solve more formulas when the percentage of thebackbonevariablesishigher butthepercentagedoesnotaffect basolver differently.