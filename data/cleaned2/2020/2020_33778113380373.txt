comparing formal tools for system design a judgment study alessio ferrari franco mazzanti davide basile maurice h. ter beek isti cnr pisa italy rstname.lastname isti.cnr.italessandro fantechi university of florence florence italy alessandro.fantechi uni .it abstract formal methods and tools have a long history of successful applications in the design of safety critical railway products.
however most of the experiences focused on the application of a single method at once and little work has been performed to compare the applicability of the di erent available frameworks to the railway context.
as a result companies willing to introduce formal methods in their development process have little guidance on the selection of tools that could t their needs.
to address this goal this paper presents a comparison between di erent formal tools namely atelier b cadp fdr4 nusmv prob simulink spin umc and uppaal smc.
we performed a judgment study involving experts with experience in formal methods applied to railways.
in the study part of the experts were required to model a railway signaling problem a moving block train distancing system with the di erent tools and to provide feedback on their experience.
the information produced was then synthesized and the results were validated by the remaining experts.
based on the outcome of this process we provide a synthesis that describes when to use a certain tool and what are the problems that may be faced by modelers.
our experience shows that the di erent tools serve di erent purposes and multiple formal methods are required to fully cover the needs of the railway system design process.
ccs concepts general and reference empirical studies software and its engineering formal methods system modeling languages.
keywords formal methods formal tools empirical software engineering judgment study empirical formal methods railway moving block system formal methods diversity human aspects of formal design acm reference format alessio ferrari franco mazzanti davide basile maurice h. ter beek and alessandro fantechi.
.
comparing formal tools for system design a permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for pro t or commercial advantage and that copies bear this notice and the full citation on the rst page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior speci c permission and or a fee.
request permissions from permissions acm.org.
icse may seoul republic of korea association for computing machinery.
acm isbn .
.
.
.
study .
in 42nd international conference on software engineering icse may seoul republic of korea.
acm new york ny usa pages.
introduction during the last decades formal methods and tools have been widely applied to the development of railway systems cf.
e.g.
.
notable examples are the usage of the b method for developing railway signaling systems in france e.g.
line of the paris m tro and the driverless paris roissy airport shuttle and that of simulink for formal model based development and code generation in the development of the metr rio atp system .
many projects were carried out often in collaboration with national railway companies for the veri cation of interlocking systems which are wayside platforms controlling signals and switches in a railway yard .
despite this long tradition it cannot yet be said that a single method or tool has emerged as holistic solution for railway development.
thus railway companies willing to adopt formal methods which are highly recommended according to the highest safety integrity levels are o ered little to no guidance on the selection of the appropriate tools that best t their needs.
indeed most of the literature on formal methods in railways has focused on the application of a single formal method and few researchers have addressed the problem of comparing multiple ones.
notably mazzanti et al.
introduces formal methods diversity with the objective of replicating the same design with multiple tools while haxthausen et al.
compares two methods for the veri cation of a prototypical interlocking system and advocates further research in comparing formal methods.
the current paper extends the literature by performing a judgment study involving di erent subjects with experience in formal methods and railways and concerning formal tools.
the study consists of two stages an evaluation phase and an assessment phase.
in the evaluation phase three of the subjects acted as designers and were involved in an initial tool trial in which they were required to model the requirements of a railway problem viz.
a moving block signaling system and report about lessons learned.
two subjects acted as analysts and interpreted the insights provided by the designers to produce a categorization of the di erent tools.
in the assessment phase the categorization was validated by the remaining subjects who were required to provide con rmation or rebuttal of the results produced based on their knowledge of the tools.
the nal categorization can be used to guide the selection ieee acm 42nd international conference on software engineering icse icse may seoul republic of korea a. ferrari et al.
of tools in railways.
the results indicate that di erent tools are appropriate for di erent contexts characterized by the development phase e.g.
requirements design the type of task to address e.g.
simulation modeling formal veri cation the type of system e.g.
single system or system of systems and the typical user s background that facilitates the usage of the tool.
furthermore we also show that several issues should be considered when choosing a certain tool such as the presence of an intuitive gui the support for concurrent systems and the possibility to de ne hierarchical designs.
while a holistic formal methods based solution for railway development does not exist a combination of existing tools may provide extensive coverage of the design process.
outline.
sect.
presents the background of the study.
sect.
presents the study design and sect.
presents the results.
sect.
synthezises main observations and sect.
concludes the paper.
background this section provides a brief background on formal and semi formal methods useful to understand the rest of the paper and it reports related work on applications of formal methods to railway problems and comparison of formal tools.
furthermore we introduce the context of the research project in which this work was developed.
.
formal methods the term formal methods encompasses a series of mathematicsbased techniques for the speci cation analysis and veri cation of complex systems .
formal methods are normally supported by tools oriented to facilitate the speci cation of systems andto check the correctness of the speci cation by means of formal veri cation.
formal veri cation is supported by two main families of techniques theorem proving and model checking .
with theorem proving the formal proof of correctness is given by demonstrating mathematical theorems about properties of the speci ed system.
model checking on the other hand enables the systematic exploration of the state space of the system to verify that the desired properties hold.
model checking can be explicit or symbolic depending on the encoding of the state space.
model checking can also be probabilistic when the speci cation exhibits a probabilistic behaviour .
recently also statistical model checking has been introduced which combines simulation and statistical methods.
some model checking tools e.g.
cadp support also other veri cation techniques such as equivalence checking which veri es that two speci cations behaviors are equivalent.
other tools such as fdr4 and prob support re nement checking which veri es that a certain speci cation is consistent with respect to a more abstract one.
as formal veri cation is concerned with verifying system properties it is useful to distinguish between properties that are mainly qualitative e.g.
in case of error the train shall brake and those that include quantitative aspects e.g.
in case of error the train shall brake within meters and therefore require some form ofquantitative analysis.
semi formal methods refer to formalisms and languages that are not considered fully formal for which the semantics is not completely de ned.
these include the uni ed modeling language uml and dialects thereof and simulink .
in the remainderof the paper we will use the term formal methods in a rather liberal way including also cases of semi formal ones and we will specify that a certain tool or method is semi formal only when appropriate.
.
related work the railway domain is characterized by stringent safety requirements and a rigorous development process.
the use of formal methods is highly recommended for platforms of the highest safety integrity levels sil by the cenelec en standard for the development of software for railway control and protection systems .
indeed formal methods and tools are widely applied to the development of railway systems.
the extensive survey onapplications of formal methods by woodcock et al.
which includes a structured questionnaire submitted to the participants of projects identi ed the transport domain including railways as the one in which the largest number of projects that include applications of formal methods have been performed.
in the past several authors have reviewed formal modeling and veri cation languages and tools commonly used in the railway domain cf.
e.g.
.
bj rner presents a rst non systematic survey of formal methods applied to railway software and lists the main reference techniques and tools including the b method and spin used in about papers.
fantechi et al.
performs a similar review updated with new applications and indicating future challenges related to the increasing complexity of railway systems.
with a focus on the b method abrial and the book edited by boulanger focus on successful industrial applications of the method including railway experiences at siemens and other companies.
the book edited by flammini which covers di erent aspects of railway system development also dedicates two chapters to formal methods applications.
overall these contributions demonstrate the interest of researchers and practitioners in the topic.
however no comparison between tools is performed in any of the studies.
the only contributions that perform some comparison between methods are those by mazzanti et al.
and haxthausen et al.
.
similar to our case the former focuses on the replication of the same design with di erent tools while the latter compares two formal methodologies for interlocking system development.
in both cases the results are based on the authors experience.
our work makes a step forward by performing a judgment study involving experts authors external and tools and paves the basis for further research on formal methods comparison.
.
context the work described in this paper is one of the outputs of a larger endeavour performed in the context of astrail1 satellite based signalling and automation systems on railways along with formal method and moving block validation a project funded by eu sshift2rail initiative .
this aims to increase the competitiveness of the european railway industry in particular concerning the transition to the next generation of eu signaling systems which will include satellite based train positioning moving block distancing 1astrail.eu 2shift2rail.org 63comparing formal tools for system design icse may seoul republic of korea and automatic driving.
below we brie y present the astrail project and the moving block system that will be considered in our study.
the astrail project aims to introduce recent scienti c results and methodologies as well as cutting edge technologies from other transport sectors in particular avionics and automotive in the railway sector.
the project leverages formal methods and tools for careful analyses of the resulting novel applications and solutions in terms of safety and performance.
one of astrail s aims is to de ne a moving block signaling system according to which a safe zone around the moving train can be computed thus optimizing the line s exploitation.
for this solution to work it requires the precise absolute location speed and direction of each train to be determined by a combination of sensors active and passive markers along the track as well as train borne speedometers.
as part of the astrail project we are currently surveying and assessing the main formal methods and tools that are being used today in research projects on railway systems to identify the ones that are most mature for application in the railway industry.
tothis end a survey on applications of formal methods in railways was foreseen in astrail followed by a judgment study in which the most mature tools according to the survey are evaluated byexperts to provide guidance on the most appropriate tools to beused for railway development.
this paper reports the results of the judgment study while the results of the survey are reported in previous work .
research design to study the problem of comparing di erent formal tools we performed a judgment study composed of two phases an evaluationphase and an assessment phase see fig.
discussed in detail later .
in the evaluation phase a group of three experts in formal methods and railways was required to model a railway system viz.
the moving block system with di erent tools and for each tool provide a qualitative evaluation based on the experience.
the data was analyzed and synthesized by two other experts who produced a set of categories to characterize the di erent tools.
the produced categories were used as input for the assessment phase in which experts of each speci c tool were required to validate the results.
although other empirical methodologies exist to systematically compare di erent tools e.g.
the desmet method we argue that a design such as the one adopted is more appropriate for an early research phase on a complex topic as ours.
indeed the evaluation phase is used to identify themes that typically characterize di erent formal tools while the assessment phase aims to generalize the results produced in the contrived context of the evaluation phase.
the presented study is exploratory andinterpretative in nature since it aims to nd some rst insights on the topic and it is based on the participants interpretation of their experience.
in the following we rst outline the research questions then we describe the case used during the evaluation phase the tools considered the characteristics of the study participants and the experimental procedure adopted.
.
research questions the research objective of this study is to compare di erent formal tools for their applicability in the railway context.
to address thisobjective two main research questions rq are de ned to drive the study of each tool rq1 when is it appropriate to use a certain tool for the design of railway systems?
this question aims to understand for which purpose the tool is more appropriate and which are its main strengths.
rq2 what issues should be considered when using a certain tool?
by answering this question we want to highlight which are the situations in which the tool is not appropriate and what are the potential hurdles that one should consider when choosing the tool.
by combining the answers to these questions we aim to provide a comparative synthesis to have a better understanding of the applicability of the tools to the railway context.
.
case for the evaluation phase the case under study for the evaluation phase consists of a railway system to be designed.
the chosen system to be modeled is the moving block system.
the selection is opportunistic in thatthe study was performed in the context of a project in whichthe moving block system was one of the primary objectives see sect.
.
.
in the context of the project a high level uml model of the moving block system was produced by the industrial partners.
based on such a model a set of textual requirements was de ned meant to be the primary source of information for the formal modeling activity.
here we describe the main principles and components of the moving block system.
fig.
provides an overview of thesystem.
there are three components two on the train and one wayside system.
the train carries the location unit lu and the onboard unit obu .
the wayside system is the radio block centre rbc .
the location of the train is computed by the lu by means of sensor fusion algorithms and sent to the obu which in turn sends the location to the rbc.
upon reception of a location from a train the rbc sends a movement authority ma to the obu.
the ma indicates the space that the train can safely travel considering the safety distance with the preceding train.
there are also two temporal constraints that the obu shall consider the location must be updated within seconds maximum the ma must be updated within seconds maximum.
whenever one of these constraints is violated the obu shall force the train to brake.
the requirements and developed models are reported in our public repository .
.
tools the tools were selected amongst the top ranked ones in a survey on the application of formal methods to the railway domain reported in recent contributions .
the survey consisted of a systematic literature review including papers complemented with a project review based on projects and a questionnaire with practitioners.
we selected the tools that emerged as most used in industrial railway cases3 plus two additional tools cadp and fdr4 chosen as representative tools for process algebras as these are explicitly mentioned in the railway norms .
below we list the tools together with their version and a brief description.
3the scade framework ranked among the most mature tools could not be included in the study for licensing reasons.
however independent experiences conducted by the 5th author suggest that scade shares with simulink most of the expressed results.
64icse may seoul republic of korea a. ferrari et al.
figure overview of the moving block system simulink 2017b simulink is a commercial model based development tool that allows the user to graphically draw diagrams of the system modeled in the form of input output blocks.
blocks can be further re ned in the form of hierarchical state machines through the state ow tool included in simulink.
simulink supports graphical simulation of the diagrams and simulink design veri er a package included in simulink allows formal veri cation of properties.
simulink comes with several other packages also for code generation.
umc .
umc is a veri cation framework for the de nition exploration analysis and model checking of system designs represented as a set of communicating uml state machines.
its current state is that of an experimental framework mostly used for teaching and research purposes.
umc is available with a free license and directly accessible from an online server.
uppaal smc .
.
uppaal smc is a statistical model checking smc extension for the uppaal toolset a wellknown integrated tool environment for designing and analyzing real time systems modeled as networks of stochastic timed automata extended with data types.
it supports the design of systems that can be modeled as a collection of nondeterministic or probabilistic processes with nite control structure and real valued clocks communicating through channels or shared variables.
both academic and commercial licenses are available.
atelier b .
.
atelier b is a theorem prover for event b that allows the user to specify invariant properties of an abstract design developed according to the b methodology and supports the user in performing the necessary proofs to ensure that these invariants are successfully preservedby its successive re nements.
the re nements can reacha level very close to that of an actual executable program and the framework itself allows the translation of the nal implementations into c or ada code.
it is available in a free community edition and in a maintenance edition.
.
.
prob is an animator constraint solver and model checker for the b method9.
it allows fully automatic animation of b speci cations and can be used to check a speci cation for a wide range of behavioral or data related errors.
prob is free to use and open source commercial support is provided by the spin o company formal mind10.
nusmv .
.
nusmv is a reimplementation and extension of the smv symbolic model checker.
nusmv is a tool distributed with a free open source license.
since version it combines bdd based model checking with sat based model checking see for details of these techniques .
spin .
.
spin simple promela interpreter is an advanced and e cient on the y model checker speci cally targeted for the veri cation of ltl properties over multithreaded software.
the tool is actively maintained and available with a free open source license.
cadp a cadp construction and analysis of distributed processes is a veri cation framework for the de nition and analysis of asynchronous concurrent systems.
it o ers interactive simulation of the system on the y veri cation of branching time logic formulas and code generationfor the system components.
its integration with equivalencechecking tools enables advanced compositional veri cation.
it also o ers quantitative analysis in the form of performanceevaluation .
cadp is actively maintained and usable with a free academic license or with a commercial license.
fdr4 .
.
fdr4 is a veri cation framework that allows the user to verify re nement relations of programs written in csp m a language that combines the operators of hoare s csp with a functional programming language or tock csp a timed version .
it exploits a compositional parallel re nement checking engine.
fdr4 is available with a free academic and research license or with a commercial license.
.
study participants the study participants involved as subjects in the evaluation phase are the authors of the paper.
altogether their expertise covers the areas of formal and semi formal methods as well as railway system development.
five subjects were involved.
the rst three subjects referred in the following as designers performed the modeling activity.
the other two analysts used the information produced to create a synthesis.
the subjects are characterized as follows.
semi formal railway designer 1stauthor more than years of experience of which years in industry with applying semi formal methods in railways.
he used simulink to model the problem.
multi formal designer 2ndauthor over years of experience with multiple formal methods with speci c focus 65comparing formal tools for system design icse may seoul republic of korea modellingselfreflectionfocus group reports minutes modelsdata collection synthesis evaluation table preliminary data analysis assessmentdata validation judgmentconsolidation evaluation table evaluation phase assessment phase figure overview of data collection analysis and validation on model checking.
about years of experience in applications of formal methods to railway problems.
he used prob nusmv spin umc cadp and fdr4.
probabilistic designer 3rdauthor more than years of experience with probabilistic and statistical model checking.
about years of experience in applications of formalmethods to railway problems.
he used uppaal smc and atelier b. formal methods analyst 4thauthor years of experience with multiple formal methods with speci c focus on the application of model checking tools among which probabilistic and statistical variants also to railway problems.
railway and semi formal methods analyst 5thauthor more than years of experience in formal methods and railways with a focus on model checking.
tools were associated to designers based on the background of the subjects and their previous familiarity with the tool and underlying formal theory.
we did not want the designers to dedicate e ort to learning the theoretical foundations of the tools but to re ect on their speci c features based on the hand on experience.
the usage of the same problem to model i.e.
the case presented in sect.
.
can be regarded as a trigger to re ect on the tools capabilities in the speci c railway context.
in the assessment phase one or more external experts referred to as assessors were selected for each of the tools considered.
the assessors were selected among the authors of papers on the application of a speci c tool to a railway problem based on the results of survey .
table summarizes each assessor s expertise concerning a speci c tool.
two assessors were involved for a tool when designers admitted to have less con dence on their evaluation.
.
data collection analysis and validation the di erent steps of the study are depicted in fig.
.
data collection and analysis correspond to the evaluation phase while data validation corresponds to the assessment phase.
we now describe the activities performed in each phase.
modeling each designer started with the same material and independently developed the models for a subset of the tools.
speci cally the designers were required to interpret the graphical uml model and the requirements see sect.
.
and provide their interpretation using the languages of the tools.
furthermore they were required to explore the capabilities o ered by each tool such as e.g.
to verify certain properties or to observe the graphical simulation capabilities of the tool.
as the focus was on formal design and nottable experience of the assessors with the tools toolassessor idyears ofexperience industrialprojects railwayprojects simulink to to to umc to to uppaal smc to to to nusmv4 to to to to to to spin to to atelier b7 to to to to to prob9 to to to to to to cadp to fdr4 to to on veri cation full proof of requirements satisfaction was not required.
we asked to test the veri cation capabilities of the tools by selecting some properties that the designers con sidered relevant.
the designers did not communicate during the development and had about ten days to develop each model.
no incentive was given to the designers as they were all involved in the astrail eu project and it was part of the project s plan to model the same problem with di erent tools.
the result of this activity is a set of models of the moving block system with some variants of the models developed when the designer considered it appropriate to experiment with multiple designs.
self re ection each designer was required to re ect autonomously on their experience in using the assigned tool and to produce a written report pages with a motivated answer to the rqs for each considered tool and with excerpts of the models when considered appropriate.
focus group while the previous phases did not involve any interaction in this phase the three designers met for a twostage focus group.
in the rst stage the designers showcased the tools with the support of the developed models and minutes were allowed for each tool s presentation.
in the second stage which lasted about three hours each person using a certain tool was required to think aloud by answering the rqs.
the other designers challenged the speaker in case of disagreement or in case more clari cation was considered to be appropriate.
extensive notes were taken during the focus group and the complete results were documented in the minutes of the meeting.
furthermore the designers were required to update their reports based on the minutes.
66icse may seoul republic of korea a. ferrari et al.
synthesis reports and models were used as input by the analysts to perform a qualitative analysis.
speci cally the subjects worked in pairs and performed a thematic analysis of updated reports to identify recurrent themes and provide a table to compare the tools.
whenever some information was considered unclear or somewhat in contrast withtheir knowledge they inspected the models or consulted the designers for further clari cation.
the result of this activity was a preliminary evaluation table including categories of evaluation e.g.
purpose for using the tool and associated values e.g.
simulation formal veri cation for each tool.
assessment the evaluation table produced in the previous phase was used as input to ask each expert of a certain tool assessor whether they agreed with the result produced about the tool.
each assessor was independently contacted via email.
for each category and value speci ed in the table for the tool we asked the assessors to indicate their agreement.
furthermore we asked them to openly discuss issues that a user should consider when deciding to use the tool for system design in an industrial context.
consolidation whenever the assessors disagreed we asked them to clarify the motivation of their opinion.
if the clar i cation led to a consensus or new themes emerged the categorization was consolidated in a nal evaluation table.
if a consensus could not be reached we kept all presented opinions in the categorization specifying those for which the viewpoints of experts resulted di erent.
.
threats to validity threats to validity are discussed according to the categories of validity reliability and generalization outlined by leung .
validity.
one of the main requirements for judgment studies is the degree of experience of the subjects involved .
the expertise of the designers spans through the areas of formal methods and railway system development.
therefore their opinion on the study topic is informed and the focus group organized helped to ensure alignment.
the expertise of the designers is also fully covered by the analysts thus ensuring the presence of a counterpart to possibly challenge the opinions produced by the designers.
finally the assessment phase involved subjects with strong expertise in each tool and this further strengthens the validity of the nal results.
threats of descriptive validity are also limited as the authors of the paper are also the experts involved in the evaluation phase so missing information would be identi ed all interactions with assessors were performed in written form.
the main residual threat is associated to researcher bias.
although this cannot be ruled out we argue that the involvement of the assessors mitigates this bias.
we also could not avoid that the same designer used similar solutions when using di erent tools for example to avoid certain design pitfalls after facing them with a certain tool.
however as the focus of the study is on the tools features and not on the speci c problem this aspect should have limited impact on validity.
pitfalls associated to the design and occurring with a certain tool may not occur with a di erent one using another language.reliability.
four main triangulation strategies aimed to ensure the reliability of data and results the focus group allowed the participants to discuss and update the information produced in the reports thus limiting potential tunnel vision of the designers the analysis phase was performed by two analysts to limit potential subjectivity in the interpretation of the data the analysis phase involved interaction with the designers to ensure correct interpretation and completeness of the information the validation phase included an iteration in which the judgment provided could be complemented with further clari cations.
besides the description of the study design and participants reported in the previous sections we also share the initial requirements and the produced models to support replication .
generalization.
the results of the evaluation phase can be considered applicable for railway problems that are similar to the one considered involving onboard and wayside systems as well as temporal constraints.
however the results were consolidated based on the opinion of experts which were unaware of the speci c context that produced them.
therefore we argue that the results can be considered su ciently general for the railway domain notwith standing the inherent limitations of judgment studies due to theabsence of representative sampling .
the results may be applicable to other domains with comparable systems architectures and similar safety critical constraints e.g.
automotive aerospace .
results table reports the evaluation table resulting from the assessment phase.
the rst four columns are related to rq1 while the last column addresses rq2.
controversial aspects for which a consensus was not reached are indicated in italic.
in relation to rq1 four main recurrent themes were identi ed which are considered as evaluation categories development phase purpose railway system type and facilitating user skills.
for these themes values are speci ed for each tool according to the following de nitions.
phase we distinguish four phases namely requirements r when the tool is considered appropriate for early prototyping towards the de nition of requirements high level design h when the tool provides proper support for high level system design detailed design d when the tool and its language are considered su ciently expressive to be applied for de tailed design implementation i when the tool supports code generation.
purpose we distinguish the following purposes system modeling sm simulation sim quantitative analysis q andformal veri cation fv by means of model checking mc equivalence checking ec theorem proving tp or re nement checking rc .
system we distinguish three system types single system s such as a single rbc obu or lu see sect.
.
composite system c such as the composition of unique instances of single systems system of systems sos such as the composition of multiple instances of single systems e.g.
multiple rbc controlling multiple trains and associated obus .
facilitating user skills these indicate the user s background that can facilitate the usage of a certain tool.
mathematical logic is assumed as required background for all the 67comparing formal tools for system design icse may seoul republic of korea table evaluation table comparing the di erent tools tool phase purpose syst.
facilitating user skills issues simulink r d i sm sim s computer engineering commercial t partial parallelism l no architecture l semi formal l closed format l umc r d sm fv mc c uml oo programming prototypical t closed systems l limited size v limited documentation t limited hierarchy l uppaal smc r h sm sim q c quantitative analysis statistical background u no nested temporal properties v maturity of theory t no hierarchy l nusmv h fv mc s symbolic model checkingspeci cation language di cult to master l no gui t con dence with framework u no parallelism l limited hierarchy l spin h d fv mc c c programming closed systems l no hierarchy l con dence with framework u limited gui t atelier b h d i fv tp rc s proof theory not fully automatic v theorem proving background u no temporal properties v limited parallelism l prob r h fv mc rc s multiple fm limited parallelism l not design oriented t cadp r h d i sm fv mc ec q sos concurrency theory limited gui t toolbox t fdr4 r h sm fv rc sos process algebra no temporal properties v tools considered except simulink which does not strictly require this type of competence.
it is worth mentioning that in table we report the phase purpose or system for which the tool has been considered more appropriate which by no means implies that a tool is useless in other contexts.
regarding rq2 a set of unique themes common to only a subset of the tools emerged from the di erent data sources they are listed as issues in table .
these are partitioned into l language u user t tool and v veri cation related issues.
in the following we provide a justi cation for the themes that are the most characteristic of each tool15.
to this end we include relevant parts of the text of the updated reports and we highlight in bold the theme acronym or name when the reported text justi es a certain theme.
when relevant we report observations of assessors.
the goal is twofold provide a short guided tour of each tool and at the same time provide evidence of the identi ed themes.
part of the tools share some fundamental characteristics and therefore we discuss them in groups.
speci cally we consider ve main groups namely tools oriented to simulation simulink to uml veri cation umc to real time and probabilistic aspects uppaal smc to re nement atelier b prob to veri cation of temporal logic properties of large single or composite systems nusmv spin and to large scale analysis of systems of systems cadp fdr4 .
.
modeling for simulation simulink is a model based development tool that o ers graphical modeling and provides powerful simulation capabilities as well as code generation.
rq1 when to use tools such as simulink?
simulink is mostly appropriate in two rather di erent phases of the development namely requirements phase r in which system prototypes are developed to support the de nition of the requirements detailed design phase d in which the system model shall be close to the nal implementation.
indeed the tool supports simulation sim in the form of animation of graphical models which can be useful in the initial phases of the development process to provide rst experiments increase the con dence on the initial design facilitate interaction with the customer and establish the initial requirements.
the simulation feature is also useful in the detailed design phase in that it enables debugging capabilities.
furthermore for the detailed design phase the tool o ers the code generation feature i .
15themes that are less characteristic for a certain tool are still reported in the table.given its expressive and graphical language and its focus on the implementation simulink is appropriate for modeling sm the internal behavior of single railway components s when these can be represented as state machines as in the case of obu rbc and lu.
the statecharts notation used by simulink and in particular by state ow the simulink package for state machine diagrams is generally oriented towards users with a computer engineeringbackground.
finally the tool is appropriate when a company wishes to have a holistic platform covering di erent phases of the development from prototyping to code to testing and having di erent packages for multiple purposes like e.g.
report generation model based testing.
rq2 what issues should be considered when using simulink?
simulink is a commercial tool with a licensing cost varying with the number of packages that one wishes to purchase.
therefore themodels developed can be normally read and executed solely by the tool some porting capabilities are available but the format is not open closed format .
hence if a company invests in this tool and develops artifacts with it it creates a dependable business relationship with the tool vendor.
simulink supports the modeling of di erent systems interacting with each other as in the case ofthe moving block system and can support concurrent execution i.e.
parallelism at the level of simulink blocks.
however state ow state machines see sect.
.
do not support parallelism each machine executes after the preceding one where default precedence follows the western reading direction left to right top to bottom partial parallelism .
it should be noticed that in simulink there is no package for high level architecture design no architecture .
this problem can be addressed by creating di erent architectural hierarchies with the simulink subsystems i.e.
blocks that can contain other blocks.
.
uml veri cation despite of its ambiguities and lack of rigor uml behavioral models can be useful to communicate design skeletons in a graphical way.
even if model based design frameworks exist that allow evolving these models into actual code e.g.
ibm rational software architect16 umc is one of the few tools that allow reasoning on these behavioral models in terms of temporal properties.
rq1 when to use tools such as umc?
umc is mostly appropriate in the requirement phase r of software development when the stakeholders are interested in improving the con dence that the 16cf.
68icse may seoul republic of korea a. ferrari et al.
graphical behavioral models on which they are working actually meet their expectations.
umc allows exible system modeling sm in textual form and supports step by step simulation of the possible system evolution to draw an abstract graph of such possible evolution to specify and verify branching time temporal properties over the system behavior fm mc and to observe detailed explanations when veri cation fails.
thanks to its exible set of data structures and operations umc can also be used to re ne a very abstract design skeleton into a prototype relatively near to a possible real implementation of the system d .
in umc a system design is seen as a closed system constituted by a at limited hierarchy set of communicating uml state machines i.e.
the environment should be included as part of the design .
therefore umc ts well the need of verifying the behavior of interacting asynchronous systems c .
the use of umc does not require a high degree of competence in formal methods since the behavior of the model and the properties to be veri ed can both be speci ed in an easily accessible way.
however the object oriented oo syntax of its input language may feel familiar to someone with experience in oo programming oruml design.
rq2 what issues should be considered when using umc?
umc is developed and maintained in the context of an academic project and mostly used for teaching and research purposes.
umc doesnot have the maturity of a commercial tool nor any signi cant history of use in industrial settings prototypical and has limited documentation .
another aspect to be taken into consideration is that the omg uml speci cation is intended to cover only the description of a generic state machine the overall behavior of a system composed by multiple machines and many aspects of the machines themselves e.g.
the precise behavior of the event queues are left intentionally not completely speci ed in the speci cation.
therefore umc relies on a set of design aspects that might di er from those of other uml based environments.
moreover we have seen that umc is oriented to the description of closed systems and it is thus not the best choice when a fragment of a system e.g.
a single component has to be veri ed in isolation in an out ofthe loop way.
umc is an on the y explicit model checker that ts very well the goal of debugging likely wrong system designs but that might cause di culties when used for validating particularly large likely correct system designs limited size .
.
modeling real time and probability uppaal smc is the only tool among the ones considered that mainly focuses on analysis of real time and probabilistic aspects.
rq1 when to use tools such as uppaal smc?
a tool oriented to timed probabilistic aspects is useful when these quantitative aspects play an important role in the de nition of the expected system properties q .
it is also reasonable to imagine that given a design speci ed in a functional way with other approaches fragments of it are modeled with tools like uppaal smc for a more speci c time oriented veri cation.
in our speci c case of the moving block application several requirements are expressed under the formof time assumptions e.g.
obu cycle shall be ms the train must stop if no ma is received for s .
however these assumptions are very simple and can easily be approximated without arigorous modeling of the ow of time e.g.
the train must stop if no ma is received for consecutive obu cycles .
tools like uppaal smc would allow better understanding of the underlying timed probabilistic aspects allowing the veri cation of properties when all relevant numerical values are provided such as what is the probability for the train to enter in the braking state within s?
or if the obu lu communications delays are in the range ms then what is a reasonable requirement for the response time of lu to guarantee that the obu cycle of ms is never preempted?
rq2 what issues should be considered when using uppaal smc?
while standard functional analysis methods are studied for decades and for which several industry mature tools like model checkers exist tools oriented to statistical model checking smc are very recent maturity of theory .
for example the rst version of uppaal smc was released in .
as for classical model checkers certi cation of uppaal smc for the development of critical software is not available.
several problems known to be decidable in discrete systems cease to be so in a real time probabilistic setting.
hence the set of properties on which quantitative analysis can be carried out is more limited and in particular nesting of temporal operators is not allowed no nested temporal properties .
moreover even though the formalism is closer to state machines a good knowledge of the underlying mathematical formalisms used to specify boththe model and the properties as well as to analyze the obtainedresults is de nitely required.
therefore a certain specializationof developers engineers and other users in real time stochastic model based analysis is needed statistical background .
.
modeling for top down development prob and atelier b are examples of coordinated veri cation environments that support the formal analysis and development of event b speci cations.
an event b speci cation consists essentially of the de nition of a single state machine whose evolutions are triggered by external signals.
the focus of the methodology is to validate the correctness of the state machine either by proving that it is a correct re nement of another more abstract state machine as in atelier b or by model checking its dynamic behavior as in prob.
rq1 when to use tools such as atelier b?
atelier b is an interactive theorem prover for assessing the preservation of structuralproperties in the form of invariants on the status of an event bmodel fv tp .
this approach is particularly useful when a single state machine s has a complex internal status of which the possibility to guarantee the preservation of consistency is of primary importance.
the language of atelier b uses mathematical objects e.g.
sets existential or universal quanti ers data types relations functions .
this aspect has great advantages when thesystem to be modeled and veri ed can be naturally rendered as a set of logical connectives.
in our case the moving block design under examination does not have these characteristics since the local machine status is essentially constituted by a counter variable the maximum number of cycles that can be executed before stopping the train in absence of a ma see sect.
.
whose valueshould invariantly remain in the range ... .
nevertheless in the railway context several examples can be found for which this 69comparing formal tools for system design icse may seoul republic of korea approach might be useful e.g.
interlocking systems .
given that it belongs to the b method suites atelier b can be applied in most of the software life cycle h d i .
the strongest point of using a theorem prover is the possibility of verifying properties for systems with a potentially in nite number of states.
on the other side proving a theorem is not a completely automatic procedure and it requires several interactions with the user who is in charge of selecting the speci c strategy to prove a certain result.
nevertheless atelier b is equipped with a feature for trying to automatically prove certain simple properties which doesnot always succeed but can often be helpful.
when an event b modelis re ned atelier b automatically generates proof obligations to bedischarged by proving them.
such proof obligations mainly consist of proofs of preservation of invariants by re nement and of the correct re nement of pre and postconditions of events fv rc .
of course another strong point of atelier b is the integration in the whole b method and its previous notorious applications in the railway domain with a supporting community and a company clearsy17 that o ers support to developers at various levels.
rq2 what issues should be considered when using atelier b?
when planning to integrate atelier b in the development process a rst issue to consider is its strong mathematical foundation in theoremproving techniques theorem proving background .
hence the cost of training developers not familiar with such techniques isnon negligible and must be taken into account.
one of the two assessors disagrees on this point usage of interactive proof in atelier b only requires very basic knowledge on what is a proof and how to conduct a correct proof.
any hard scientist or engineer should be able to use the interactive prover to discharge most proof obligations with little training one or two days .
contrary to the case of model checking it is not a fully automatic veri cation technique it requires more human e ort and expertise.moreover atelier b is not well suited when properties related to the temporal evolution of a system are to be analyzed e.g.
through temporal logic no temporal properties .
indeed in this case a model checker like prob may be preferable.
finally atelier b inherits from event b some di culties in modeling concurrent systems and interacting components limited parallelism .
however one assessor mentions it is possible to overcome this problem the toolprovides support for a variant of event b with a more versatile input language.
we have conducted formal analysis of distributed railways systems with this language using atelier b .
rq1 when to use tools such as prob?
the main characteristic of prob is that it allows the user to observe simulate and model check the dynamic behavior of an event b state machine.
it might t well the initial needs of observing the behavior of a prototypical design r as well as the need of proving dynamic properties of the possible evolutions of a more established but high level design h .
the strong points of prob are its capability of verifying properties expressed both as linear or branching time formulas the possibility to reason on both state and event properties the availability ofmultiple model checking strategies fv mc and the possibility of verifying the consistency of an implementation with respect to its abstract speci cation in terms of trace re nement fv rc .
is in general a very exible tool which allows exporting the developed design to other tools of the event b ecosystem like atelier b. moreover prob allows model checking speci cations imported by other frameworks such as spin or fdr4 providing additional veri cation capabilities with respect to those provided by the respective tools.
this feature together with the multiple veri cation techniques supported makes the tool suitable for users who are skilled in multiple formal methods multiple fm but also for novices who wish to explore di erent techniques.
rq2 what issues should be considered when using prob?
as for atelier b an issue to consider is the limited parallelism limited parallelism although the assessors disagree with this point.
furthermore one of them also observed prob is a veri cation tool similar to spin and not a modeling tool like atelier b it needs to work with a complementary modeling tool like atelier b or rodin not design oriented .
.
veri cation focused engines spin and nusmv are two veri cation frameworks that have a long history of use18.
their main common characteristic is their orientation towards large scale veri cation through model checking and the availability of multiple options to tackle the state space explosion problem .
rq1 when to use tools such as nusmv or spin?
these frameworks are not directly inspired by a speci c abstract design methodology but rather focus on the e cient model checking of models encoded in their own speci c modeling language.
to contrast the problem of state space explosion spin relies on an on the y distributed model checking approach while nusmv and its latest evolution nuxmv e ciently exploits symbolic bdd based and smt based model checking approaches fv mc .
a spin or nusmv speci cation can hardly be seen as a friendly notation for the unambiguous sharing of a design among di erent stakeholders in the requirements phase.
nevertheless sometimes a translation of a system design into promela the speci cationlanguage of spin or nusmv can be an e ective way to verify properties of the initial high level design h .
the main di erence between the languages of spin and nusmv is that the rst one is oriented towards the design of architectures based on concurrent asynchronous processes communicating through message passing while the second one is more oriented towards data ow synchronous architectures.
writing in promela is close to c programming which makes spin suitable for detailed designs d .
according to one of the experts users of nusmv bene t from knowing the theory of symbolic model checking e.g.
to understand how the variable ordering e ects e ciency .
finally while spin is limited to the veri cation of linear time properties ltl nusmv allows the veri cation of both linear and branching time properties ctl .
rq2 what issues should be considered when using nusmv or spin?
when the system under investigation becomes rather complex the e ective use of the tools requires a deep experienced knowledge of the veri cation framework con dence with framework .
the choice of the appropriate execution options may become essential 18cf.
and 70icse may seoul republic of korea a. ferrari et al.
for the success of the veri cation task.
moreover even if the underlying techniques on which the tools are based are able to reduce the impact of the state space explosion problems surely they cannot be considered a silver bullet to solve them.
theorem proving or compositional veri cation are alternative techniques that might produce better results when spin or nusmv fail their veri cation.
finally the fact that nusmv takes only in nite paths into consideration during veri cation all nite paths are simply ignored might create di culties in correctly encoding and verifying software designs speci cation language di cult to master .
it is true that one can add self loops to nal states and solve the problem in many cases.
however it is not easy to add a self loop to nal states if you do not statically know which states are nal e.g.
because of the possible presence of some unknown complex to generate deadlocks.
given the focus on veri cation to the quality of the user interface is taken in minor consideration in spin limited gui and not considered at all by nusmv no gui .
however the spin assessor says there is a quite simple gui but the set of command line switches is large so i consider the ui really not minimal .
.
tools for compositional analysis process algebras are formally de ned approaches for modeling concurrent systems and are equipped with rigorous theories of equivalence of behaviors that can be applied to support compositional analysis.
relevant examples of process algebras are lotos at the root of the cadp framework and csp m at the root of fdr4.
rq1 when to use tools such as cadp or fdr4?
these tools rely on a speci cation language with a formally de ned tool independent semantics.
this allows the de nition of speci cations that can beshared among the various stakeholders being certain of their unambiguous meaning.
hence the software development phases in which these tools can be applied at best are those at the early stages of the life cycle like formalization and veri cation of requirements or high level system design r h .
in the case of cadp the framework provides some support also for testing and for the detailed design and actual program code generation d i .
cadp is also equipped with facilities for abstracting minimizing and proving equivalence of behaviors fv ec .
while cadp allows the speci cation of properties using the calculus a powerful temporal logic subsuming both ltl and ctl fdr4 adopts several re nementrelations for ensuring the correctness of a model with respect to a higher level abstract speci cation.
as observed by the assessor cadp provides tools for interactive markov chains discrete and continuous time markov chains making it suitable for quantitative analysis q .
the assessor also pointed to the recent addition of a probabilistic model checker to the cadp toolbox.
in our speci c case the reference model is composed of just three components.
however one might be interested in checking the behavior of richer systems e.g.
with more obus and more interactingrbcs .
in this case a compositional approach that allows the veri cation of an asynchronous large scale system of systems sos by composing it in parallel with a minimized abstraction of all the other components would be very useful to avoid the problems of state space explosion usually arising when one has a system with many concurrent objects under scrutiny.rq2 what issues should be considered when using cadp or fdr4?
system speci cations need to be provided in textual format for thesetools which may appear less intuitive or user friendly than a draw ing especially when the tool has a quite minimal user interface as in case of cadp limited gui .
initially the assessor disagreed with this observation but after some interaction he said few graphical tools simulators eucalyptus which are functional but abit old fashioned in their look and feel .
concerning issues with cadp the assessor also observed cadp is a toolbox which can beused for many di erent purposes.
as a counterpart of this richnessand exibility beginners are disoriented because they do not know where to start and which tools to select toolbox .
finally fdr4 is not well suited when properties related to the temporal evolution of a system have to be analyzed no temporal properties .
discussion from the judgment study we can summarize the following main take away messages about the di erent tools simulink is appropriate for both early prototyping and detailed design towards code generation umc is appropriate for initial prototyping when one wants to adopt a design based on uml state machines to facilitate communication with di erent stakeholders but also wants formal veri cation capabilities uppaal smc is appropriate when one needs to focus on the veri cation of quantitative properties involving probabilistic and real time aspects nusmv and spin are appropriate when the system or composition of systems has a rather large state space and one wants to verify temporal logic properties atelier b and prob are the right choice for top down development of mainly monolithic systems with complementary veri cation capabilities atelier b supports theorem proving of invariants while prob supports model checking cadp and fdr4 are appropriate when a clear algebraic speci cation is desired and when the system under design has the structure of a concurrent set of asynchronous communicating entities systems of systems .
below we discuss the implications of this study distinguishing the viewpoints of practitioners and researchers.
.
implications for practice formal methods diversity.
based on the observation on the primary strengths of each tool we argue that to address all the designrelated needs of the railway process e.g.
qualitative and quantitative veri cation simulation low high level design a combination of methods and tools would be required.
guided by the outcomes ofthe current research and sill within astrail the authors combined simulink for prototyping uppaal for veri cation of quantitative properties and prob for model checking qualitative ones .
one of the main issues encountered was the absence of interoperability of the tools which led to the need to manually translate the initial models with the obvious issues of consistency.
in practice a company may not want to rely on multiple tools that although somewhat complementary are not integrated within the 71comparing formal tools for system design icse may seoul republic of korea same framework.
in this case it is advisable to identify which aspects of the development are more relevant e.g.
early prototyping of a system of systems vs. detailed design of a single system and select the most appropriate tool to address them.
expert diversity.
to fully tackle the formal development of railway systems not only a combination of tools is required but also the involvement of di erent experts in the domain in the design and in multiple types of formal veri cation techniques see the diversity of facilitating user skills and background issues in table .
these aspects should be taken into account by companies willing to introduce formal methods in their process.
in practice it may be hard for a company to have di erent tool experts at hand.
the e ort needed to train engineers in formal methods is not negligible as the subject is undeniably hard and high expertise with a tool is required to handle industrial problems.
therefore a feasible approach today for railway companies is to rely on external consultants with an academic background on formal methods and invest in communication between railway experts and formal method experts possibly allowing them to share the same work space.
relevance for the railway industry.
the conclusion of this research could appear straightforward to formal methods academics.
however it should be noticed that this systematic study on formal tools was required by the eu railway industry itself as the shift2rail initiative funding the astrail project involves the main stakeholders in this domain.
although formal methods are highly recommended by the cenelec norms for the development of highintegrity railway systems the knowledge of formal methods especially at management level is limited and it is thus necessaryto make explicit for this speci c public what existing technologies can and cannot do for them.
we argue that this study is a step forward in this direction.
further steps currently undertaken by the authors within the 4securail project19 concern the cost bene t analysis of introducing formal methods in railway companies.
.
implications for research tool improvements usability learnability maturity.
while several formal tools are available to be used for railway development some issues emerge when considering their real world application such as the absence of constructs to model parallelism limitations in terms of hierarchical modeling etc.
researchers working on speci c tools are called to refer to table and address the issues raisedin future releases of the tools.
many common issues are relatedto usability learnability and maturity aspects e.g.
limited gui speci c technical background maturity of the theory prototypical tool .
interestingly these are also considered among the primaryneeds by railway stakeholders according to a recent survey .
as most of the tools originate from academic contexts they are often used as testbed to demonstrate novel techniques.
however the more a technique is advanced the more its implementation is prototypical and industry relevant aspects tend to be neglected.
a development model for tool providers could be to maintain two versions of their tool a research oriented one implementing the recent techniques and a practice oriented one with a focus on usability learnability and maturity.
of the research method and human aspects of formal design.
this paper presents the rst design of a rigorous judgment study in formal methods.
we believe that the systematic approach followed can be considered by other researchers dealing with similar contexts in which a comparison between tools or methods is required but other research methods e.g.
controlled experiments surveys are not applicable.
this can happen if the topic is complex and only experts can participate as human subjects of the study a hands on experience is needed to trigger experts re ections a limited number of experts is available for each method or tool and the nature of the inquiry is exploratory with a broad scope.
in principle the tools documentation could have been used by the designers to elicit most of the information presented.
however without a hands on experience like the one introduced in our method the risk is to ignore which are the most relevant aspects for the railway context.
the adopted empirical approach enabled the designers to re ect on those aspects concerning phase type of system etc.
that are most characteristic with respect to the other tools.
this provides a grounded and focused synthesis that could hardly be achieved by looking solely at the documentation.
furthermore thanks to the adopted research design and in particular the introduction of assessors we also noticed that some tools aspects that may be seen as objective e.g.
limited parallelism sect.
.
seeissues in italic in table appeared debatable and di erent experts gave di erent viewpoints.
this suggests that the subjectivity of the user plays a crucial role also in formal methods and calls for more empirical studies focused on human aspects of formal design.
conclusion this paper presents a qualitative evaluation of formal tools in the context of railway systems design by means of a judgment study.
the study involved experts in formal methods applied to railways and produced an evaluation and comparison table see table in which the tools are characterized by their suitability for a certain development context and by the issues that users should consider when adopting a formal tool.
the paper makes an e ort to provide indications to companies interested in adopting formal methods and to make the information from formal methods experts accessible also to a broader software engineering audience.
the produced categorization can also be used as a framework for comparing other formal tools and o ers a baseline for further more ne grained analysis of the characteristics of the tools.
as future work we will complement the current analysis with a systematic desmet evaluation over technical features and a usability study.
this will produce a comprehensive view of the tools characteristics which can be referred also by tools developers and can be updated as new features or knowledge become available.