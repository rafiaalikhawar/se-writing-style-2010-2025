don t do that!
hunting down visual design smells in complex uis against design guidelines bo yang zhenchang xingy xin xiaz chunyang chenz deheng yex shanping li zhejiang university china yaustralian national university australia zmonash university australia xtencent ai lab china imyb shan zju.edu.cn zhenchang.xing anu.edu.au xin.xia chunyang.chen monash.edu dericye tencent.com abstract just like code smells in source code ui design has visual design smells.
we study don t do that guidelines in the material design a complex design system created by google.
we find that these don t guidelines go far beyond ui aesthetics and involve seven general design dimensions layout typography iconography navigation communication color and shape and four component design aspects anatomy placement behavior and usage .
violating these guidelines results in visual design smells in uis or ui design smells .
in a study of uis of android apps we find that uis of apps have at least one violation of some material design guidelines.
this reveals the lack of developer training and tool support to avoid ui design smells.
to fill this gap we design an automated ui design smell detector uis hunter that extracts and validates multi modal ui information component metadata typography iconography color and edge for detecting the violation of diverse don t guidelines in material design.
the detection accuracy of uis hunter is high precision .
recall .
on the uis of apps.
we build a guideline gallery with real world ui design smells that uis hunter detects for developers to learn the best material design practices.
our user studies show that uis hunter is more effective than manual detection of ui design smells and the ui design smells that are detected by uis hunter have severely negative impacts on app users.
index terms gui testing ui design smell violation detection material design i. i ntroduction graphical user interface gui should allow app users to naturally figure out the app s information structure and action flow.
unfortunately an android gui may be poorly designed.
according to the appiterate survey of users would uninstall an app with a poorly designed ui.
fig.
presents some examples of poorly designed android app uis issues highlighted in red boxes .
in fig.
a truncating the full title of the top app bar hinders the access of information.
the background image in fig.
b makes the foreground buttons text illegible.
the confirmation dialog in fig.
c provides only a single action and cannot be dismissed.
in fig.
d attaching tabs to bottom navigation can cause confusion about what action or tab controls which content.
we refer to such poorly designed uis as ui design smells .
just like code smells that indicate violations of good software design guidelines ui design smells violate good ui design guidelines.
ui design guidelines constitute design systems for a vast variety of products platforms and services .
corresponding author.
a text truncation b illegible buttons text c single button in confirmation dialog d tab attached to bottom navigation fig.
ui design smells 1st row vs non smell uis 2nd row issues highlighted in red boxes in this work we use material design as a case study of design systems.
in material design documentation we investigate explicit don t guidelines for ui components e.g.
app bar banner button tab and dialog see section ii a .
these design guidelines go far beyond ui aesthetics.
they involve seven general design dimensions i.e.
layout typography iconography navigation communication color and shape and four component design aspects i.e.
anatomy placement behavior and usage .
however there has been little support for detecting ui design smells violating the design guidelines.
many tools have been developed to detect and remedy code smells and other programming or stylistic errors .
some techniques can detect the inconsistencies between ui mockups and implemented uis or discern abnormal designs from normal ones .
but these techniques cannot check the violation of a ui design against the visual guidelines in a design system.
first the design examples used to explain the guidelines e.g.
fig.
are very different from the actual ui designs to be checked e.g.
fig.
so they cannot be directly contrasted to determine the guideline violation.
second checking a ui design against certain design guidelines requires to examine multi modal ieee acm 43rd international conference on software engineering icse .
ieee information including a wide range of component information e.g.
type instance count size position color and text content and the actual rendering of text and images see section ii .
in this work we develop an automated tool called uishunter for detecting ui design smells against the don tguidelines of material design.
the design of uis hunter is informed by a demographic study of the don t guidelines in material design documentation see section ii .
the study identifies five types of atomic ui information for checking visual guideline violations including component metadata typography iconography color and edge.
each visual guideline is then defined as a violation condition over the relevant type s of atomic ui information.
uis hunter currently supports don t guidelines covering seven general design dimensions and types of ui components.
for each supported visual guideline we collect a set of conformance and violation uis from real android apps.
given a ui design our tool reports ui design smells if the corresponding guideline violation conditions are satisfied.
it produces a violation report see fig.
that lists the violated visual guidelines highlights the ui regions violating these guidelines and provide conformance and violation ui examples to help developers understand the reported ui design smells.
we evaluate uis hunter on a dataset of unique ui screenshots of android apps.
uis hunter achieves a precision of .
and a recall of .
.
and f1 score is .
.
we also conduct two user studies to evaluate the utility of uis hunter.
our studies show that uis hunter can detect ui design smells more effectively than human checkers and most of the ui design smells reported by uis hunter are rated as severe by the majority of app users.
in this paper we make the following contributions we conduct a demographic study of visual guidelines in material design documentation which informs the design of automated ui design smell detection tools.
we develop the uis hunter tool that can validate the design of types of ui components against visual guidelines of material design.
we confirm the detection accuracy of uis hunter on a large dataset of real android app uis and the utility of uis hunter for front end developers and app users.
based on the uis hunter s detection results we build a material design guideline gallery to assist the learning of abstract visual guidelines with real app ui design smells.
we also release our manually validated dataset as a benchmark for studying ui design smells.
ii.
g oogle material design guidelines a d emographic study our study examines three perspectives of visual design guidelines in material design documentation component type and count component design aspect and general design dimension .
in the study we identify the types of atomic ui information required for determining the violation of the visual guidelines which lays the foundation to develop the automated tool for detecting ui design smells violating these guidelines.
a text truncation d tab attached to bottom navigation b illegible buttons text c single button in confirmation dialog e two icons in a button fig.
examples of don t guidelines in material design a distribution by component type b distribution by component design aspects6311127 c distribution by general design dimensions5 fig.
distribution of don t guidelines a. the collection of material design guidelines in this work we examine the official documentation of material design component as of may .
the documentation contains over web pages and over ui design examples.
material design webpages and many other design systems are well structured and adopt consistent writing conventions.
in this study we focus on explicit don tguidelines that explicitly marked as don t and caution with at least one illustrative ui example.
fig.
shows five examples of such don t guidelines.
the four examples in fig.
a d correspond to the design smells in fig.
a d respectively.
fig.
shows one more guideline don t use two icons in a button .
although some guidelines involve multiple types of components they will not be repeated for all involved components.
for example don t attach tab to bottom navigation in fig.
d is described as a guideline for tab but not for bottom navigation.
we refer to tab as primary component and bottom navigation as related component for this design guideline.
we collect explicit don t guidelines for types of ui components.
three types of components backdrop navigation rail and side sheet are in beta status.
we exclude don tguidelines of these three beta ui components.
as this study focuses on android app ui design smells we exclude five don t guidelines for web or desktop app ui design.
we exclude animation don t guidelines of types of components such as card flipping and scrolling bottom sheet sliding up.
762analyzing ui animation effects requires sophisticated video embedding techniques which is beyond the scope of this work.
finally we collect don t guidelines for types of ui components for the subsequent demographic analysis.
b. demographic analysis of design guidelines component type and count fig.
a shows these types of ui components and the number of don t guidelines they have.
three types of ui components floating action button fab banner and snackbar have or more don tguidelines.
two types of ui components chip and divider have only one don t guidelines.
the remaining types of ui components have to don t guidelines.
we divide the don t guidelines into single type and multiple type.
guidelines are single type as they involve only one type of ui component.
single type guidelines generally require the count of certain component instance.
some guidelines need to verify the number of destinations in a bottom navigation matches the limitation.
since the right navigation drawer is prohibited certain guidelines need component coordinates to decide the left and right of a navigation drawer.
also some single type guidelines require text rendering results to validate improper text usage fig.
a .
don t guidelines are multiple type as they involve multiple types of ui components for example background image and foreground buttons text fig.
b tab and bottom navigation fig.
c dialog and button fig.
d .
to validate a multiple type guideline we need to examine not only the primary ui component but also related components interacting with or being composed in the primary component.
component design aspects material design describes the design of a ui component from four aspects anatomy placement behavior and usage.
fig b shows the distribution of the don t guidelines across these four component design aspects.
anatomy placement behavior and usage guidelines account for about and respectively.
validating anatomy guidelines requires the information about component composition text content and actual rendering of text images edges of a component s constituent parts.
for example an app bar may be composed of a navigation button a title some action items and an overflow menu.
the title has guidelines regarding improper text usage such as text wrapping truncation and shrinking fig.
a .
validating behavior guidelines requires to examine the metadata e.g.
count of the primary component after certain interaction and the icons of action button e.g.
navigation button .
for example the number of destinations that a float action button can display has a minimum and maximum limitation or don t place a navigation button in both top and bottom bar .
usage guidelines describe typical usage scenarios of a ui component.
for example material design suggests using bottom navigation when there are three to five destinations.
if the destinations are fewer than three material design suggests using tab or navigation drawer respectively rather than bottom navigation.
usage guidelines also describe the use of different variants of the component.
for example a dialog can be asimple dialog or a confirmation dialog.
when using a simple dialog an action button is not needed.
but a confirmation dialog needs two actions to dismiss or confirm the dialog fig.
c .
to validate usage guidelines we typically need to examine the component type and its constituent elements.
placement guidelines specify the location of a ui component on the screen or relative to other ui components such as don t attach tab to bottom navigation fig.
d .
validating placement guidelines requires the information about component type size position and usually need to examine the relative position of multiple ui components on the screen.
general design dimensions material design describes the principles of design dimensions so called material foundation .
we focus on non animation guidelines and exclude four dimensions environment sound motion and interaction.
don t guidelines can be divided into the remaining seven design dimensions layout typography iconography navigation communication color and shape as summarized in fig.
c .
layout guidelines account for typography and iconography for and rest four dimensions for .
layout specifies the organization of ui components on the screen.
it includes all placement guidelines and anatomy guidelines such as maximum number of fab and banner minimum number of buttons in a bottom bar and the usage of divider between destinations in a navigation drawer.
layout guidelines are about component behavior and layout guidelines are about component usage which specifies the improper usage of text field divider and tooltip.
typography specifies the style and usage of text labels such as text length wrapping truncation and shrinking.
validating typography guidelines requires not only text content e.g.
button label cancel but also the appearance of the displayed text such as the presence of ... in fig.
a the number of text lines the height width of text.
iconography specifies the use of images and icons in ui design such as avoid imagery that makes button or text illegible in fig.
b and don t apply icons to some destinations but not others in a navigation drawer .
navigation regulates how users should move through an app.
they mainly include guidelines for navigation components top bottom bar bottom navigation tab and fab such as don t place a navigation button in both top and bottom bar .
communication defines guidelines that ask for confirmation before taking action and acknowledge successful actions.
for example confirmation dialog should not provide only a confirmation button fig.
c color specifies the use of meaningful colors.
for example don t use multiple colors in bottom navigation as they make it harder for users to distinguish the status of destinations.
as another example using primary color as the background color of a text field may make it be mistaken as buttons and harm text legibility.
finally we have one shape guideline don t alter the shape of a snackbar which needs to check the edge of snackbar.
c. types of atomic ui information the demographic analysis of material design don tguidelines identifies five types of atomic ui information 763required for detecting guideline violations.
first component metadata includes component coordinates type instance count composition hierarchy and text content.
text content is used to determine component semantics.
for example the button label cancel or discard indicates a dismissive action.
the label sorry.. warning!
or are you sure?
indicates ambiguous dialog title.
we collect a common label glossary mentioned in the material design documentation for validating the guidelines that need to check component semantics.
second typography refers to the actual appearance of the displayed text.
although component metadata provides text content the actual appearance of the displayed text is required to detect improper text usage such as text wrap resize and truncation.
third iconography refers to the presence of images icons and their visual effects.
fourth the primary color refers to the color displayed most frequently across an app s screen and components.
fifth edge information is needed for divider and shape related guidelines.
of don t guidelines require one type of atomic ui information to validate.
most of these guidelines are about text usage and limitation of component instances.
the remaining guidelines require two or more types of information.
for example the guideline don t apply icons to some destinations but not others in a navigation drawer requires component metadata the component type and coordinate information the number of destinations in the drawer and iconography information the number of icons used in the drawer .
when the two numbers do not match the guideline is violated.
iii.
ui d esign smell detection as shown in fig.
our approach consists of two main components a knowledge base of ui design guidelines and a ui design smell detector including input ui design parser atomic ui information extractors and ui design validator .
in this section we first give an overview of our approach for ui design smell detection and then detail the design and construction of its main components.
a. approach overview the knowledge base of ui design guidelines contains a set of visual design guidelines extracted from a design system section iii b .
each guideline is indexed by the type of primary ui component involved and is accompanied by a set of conformance and violation ui examples from the design system and real world applications.
the ui design smell detector takes as input a ui design mockup or an app ui screenshot section iii c .
it validates the design of each component in the input ui against the guidelines of the corresponding component type.
in addition to component metadata obtained from the input ui the validation examines four types of atomic ui information section iii d typography iconography color and edge against each guideline s violation condition.
if certain guideline violations are detected the detector produces a ui design smell report section iii e .b.
constructing knowledge base of ui design guidelines a design system such as google s material design is usually documented in semi structured documentation.
to construct a knowledge base of ui design guidelines we conduct a demographic study of the design guidelines in the design system documentation such as the study reported in section ii.
the knowledge base indexes each design guideline by the type of primary component involved in the guideline and annotates the guideline with multi dimensional information such as component design aspect general design dimension and guideline severity.
this allows the developers to explore the multi dimensional space of a complex design system in a more structured way as demonstrated in our material design guideline gallery.
the guidelines are often abstract.
attaching conformance and violation ui design examples to the design guidelines allows the developers to compare and learn from concrete ui designs.
those examples come from two sources first the illustrative ui mockups provided in the design system documentation and second the real world app ui screenshots analyzed by the ui design smell detector.
for detecting ui design smells against design guidelines a critical task is to define atomic ui information required for validating guideline violations.
the violation condition can be defined as the first order logic over the relevant types of atomic ui information.
fig.
shows three guideline conditions for navigation drawer.
atomic ui information can be extracted from the input ui design see section iii d and validated against these guideline conditions see section iii e .
c. parsing input ui design image the input to our ui design smell detector is a ui design image.
our detector does not need source code for analysis.
the ui design image may come from two sources a ui mockup created in design tools e.g.
figma or gui builders e.g.
android studio layout editor an app ui screenshot taken at the runtime by ui testing framework e.g.
android ui automator or selenium .
in this work we are concerned with five types of component metadata in the ui design including component type component bounding box top left coordinate and bottomright coordinate the number of component instances of a specific type or within a container component component composition hierarchy and text content .
the input ui design image may contain such component metadata.
for example design tools can export ui mockups in vector graphics e.g.
svg with metadata.
when taking an app ui screenshot the corresponding ui component metadata can be exported in json file.
given an input ui design image with metadata a file parser can be developed to extract the needed component metadata.
when the input ui design is a pixel image the user can manually annotate ui components and their metadata with an interactive tool.
this annotation tool can support computervision based ui component detection techniques which reduces the manual annotation effort.
the user then only needs to modify or correct some detected ui components.
764demographic study guideline conditions to be validatedtypography extractor edge extractor color extractoriconography extractor knowledge base of design guidelines primary component guideline category violation conditions examples parsing input ui design image constructing knowledge base of ui design guidelinesextracting atomic ui information ui design validator error don t apply icon to some destinations but not others .
primary component navigation drawer guideline category single anatomy iconography error example s warning don t shrink text size in a navigation drawer .
example s warning don t use dividers to separate individual destinations .
example s ui design smell reportgenerating ui design smell report material design pages metadata of top bar text tutorials bounds type top bar disassemble components metadata of navdrawer children text home text tutorials bounds type navigation drawer real app conformance and violation uis ..textline navigationdrawer textline height textline averageheight .
.
.
.
.
destination navigationdrawer navdrawer detectededge num navdrawer detectededge num destination num .
.
.
.
.
destination navdrawer navdrawer icon num navdrawer icon num destination num fig.
approach overview illustrating the validation of a navigation drawer as an example d. extracting atomic ui information for each ui component in the input ui design four types of atomic ui information will be extracted including typography iconography color and edge .
typography extraction the typography extractor aims to recognize how text content e.g.
app bar title button label tab label is actually rendered in the ui.
when the input ui comes with the component metadata the text content can be directly obtained from the component metadata.
however to validate the guidelines regarding text appearance e.g.
wrap resize truncation we must know the number of text lines the font size and the presence of special characters e.g.
... when the text is rendered on the ui.
inspired by a recent study on ui widget detection we use east a deep learning based scene text detection tool to detect text region in the ui and then use tesseract ocr to covert the cropped text images into text strings.
if the text content is obtained from the component metadata we match this text content with the ocred strings to correct ocr errors.
finally based on the detected text regions and the ocred texts we determine the number of text lines the font height width and the presence of special character.
iconography extraction the iconography extractor has two goals.
first it detects the presence of icons and images in the input ui.
second it attempts to simulate how app users perceive the text widget and image in the ui.
we use computer vision techniques to achieve these two goals.
in particular we use the ui widget detection tool to detect nontext ui widget regions e.g.
icon button and use east to detect text regions.
the detected icons and images help to validate the guidelines regarding icon usage such as don t use same icons to represent different destinations in navigation drawer .
furthermore by comparing the detected text widget and image regions with the component bounding boxes in the metadata we can determine illegibility related ui design smells for example the two illegible buttons computer vision fails to detect in fig.
b .
color extraction the color extractor aims to identify primary color of the ui components and their constituent parts.
in fig.
we illustrate the primary color of the navigation drawer white and that of the icons brown and the text gray in the navigation drawer.
primary color is important for detecting color related ui design smells such as don t use multiple colors in a bottom navigation bar or don t use primary color as the background color of text fields .
to determine the primary color of the ui components we adopt the hsv color space .
unlike the rgb color model which is hardware oriented the hsv model is useroriented based on the more intuitive appeal of combining hue saturation and value elements to create a color.
edge extraction the edge extractor aims to detect the rendered edges of a ui component or the divider lines within a ui component.
the detected edges help to validate dividerand shape related guidelines.
although the coordinates of a component always form a rectangle the actual edge of the component may not be a rectangle.
we adopt canny edge detection to detect the edges surrounding or with a ui component.
we require that the pixels must have sufficient horizontal and vertical connectivity.
the edge extractor outputs the start and end coordinates of the detected edges.
e. validating ui design against visual design guidelines for each ui component in the input ui design the validator first retrieves the relevant design guidelines by the component type from the knowledge base.
for each design guideline it enters the relevant atomic ui information of the primary component and other related ui components into the guideline s violation condition.
if the condition is satisfied the design of the primary component violates this design guideline.
fig.
illustrates the validation of the three guidelines of navigation drawer don t apply icons to some destinations but not others don t shrink text label and don t use dividers to separate individual destinations .
the validation uses the component metadata typography iconography and 765edge information and detects one error and two warning violations for the input navigation drawer.
after validating all ui components in the input ui the validator produces a ui design smell report.
fig.
shows the ui design smell report for the input ui.
for each component that has at least one design guideline violation the report summarizes the list of design guidelines being violated.
for each guideline being violated the report highlights the corresponding component part s on the input ui in a red or orange box depending on the violation severity error or warning of the design guideline.
to assist the developers in understanding each reported guideline violation the report presents conformance and violation ui examples.
the corresponding component parts on the violation ui examples are also boxed to attract the attention.
iv.
d etection accuracy by uis h unter we conduct two experiments to investigate the detection accuracy of uis hunter on the real app uis from the rico dataset and the high quality ui mockups from the figma design kit.
the two experiments also allow us to compare the severity of ui design smells in real app uis and ui mockups.
a. detection accuracy for real app uis dataset we build a dataset of real app uis from the rico dataset .
the rico dataset contains app ui screenshots collected from android apps.
these app ui screenshots were collected mainly by the automated ui exploration tool .
a small portion was collected during manual exploration by human users.
a ui screenshot is exported as a pixel image together with the corresponding component metadata in a json file.
in this work we filter out ui screenshots that do not contain any of the types of ui components to be validated home screens that do not belong to any apps and landscape ui screenshots.
we obtain unique app ui screenshots from apps.
in these app uis six types of components divider chip date picker tooltip snackbar and bottom sheet are used much less frequently than the other types.
divider and chip are small decorative components which have only two usage don t guidelines.
date picker tooltip bottom sheet and snackbar usually need proper user interaction to trigger which is hard to simulate by automated ui exploration.
date picker has only two guidelines.
tooltip bottom sheet and snackbar have four five and nine guidelines respectively but there are only and instances in the collected uis.
we manually examine the instances of these six types of components against their don t guidelines and do not find any guideline violations.
of course this does not mean these six types of components are smell proof.
but considering the data scarcity we leave out these six types of components as future work.
evaluation method we apply uis hunter to all instances of the types of components in the app uis.
as shown in table i these types of components have instances inst and guidelines gl .table i performance of detecting ui design smells for the types of components in real app uis see section iv a2 for the explanation of column abbreviations component inst gl glw rv rv prec.
rec.
f1 button .
top bar .
text field .
navdrawer .
list tab .
bottomna v .
banner .
fab .
dialog .
bottom bar .
total .
rv shows the number of reported violations.
each reported violation identifies a primary component and the violated guideline.
glwrv shows the number of guidelines with reported violation instances.
we manually check the correctness of all reported violations.
a reported violation is correct only if the reported component actually violates the reported guideline.
precision is the percentage of correctly reported violations tp among all reported violations.
we have app uis for which uis hunter does not report any violations.
it requires significant manual effort to identify the missing violations in all these app uis.
therefore we adopt a statistical sampling method to sample and examine the minimum number min of app uis that contain a particular type of component.
we set e at confidence level for determining min.
that is the estimated accuracy has .
error margin at confidence level.
in total we sample and examine app uis for the types of components in table i. let fn be the violations in the sampled uis i.e.
false negative for a type of component.
we estimate the number of false positive violations in all app uis by estfn fn sampleratio.
sampleratio is the number of sampled uis divided by the total number of app uis containing a type of component.
recall is tp tp estfn .
f1 score is the harmonic mean of precision and recall.
results as shown in table i uis hunter achieves .
.
and .
for the overall precision recall and f1.
the f1 for types of components are above .
.
the f1 for top bar and bottom navigation is .
and .
respectively.
the f1 is below .
for only button and navigation drawer.
for the guidelines of list uis hunter does not report any violations.
our manual examination of the sampled uis with list components does not find any violations either.
button has four variant types text button outlined button contained button and toggle button.
we rely on a button s metadata and visual appearance to determine the button type which may not be always correct.
the incorrect button type subsequently leads to the misjudgment of the applicability of some guidelines for example don t use too long text label in a text button versus an outlined button s width shouldn t be narrower than the button s text length .
we find that uis hunter may still accurately identify the buttons with 766table ii performance of detecting ui design smells for the nine types of components in editing ui mockups component inst glwiv rv prec rec f1 button text field bottomna v list .
navdrawer bottom bar .
fab .
tab banner total .
.
some design smells e.g.
long text but it may apply the wrong guideline.
in our accuracy evaluation we consider such reported violations as wrong.
in fact our user study see section v a shows that button variants often confuse human too when manually validating button designs.
the design of a navigation drawer can be rather complex for example with many icons and text labels and sometimes even with search box or tabs.
this poses the challenges of accurate extraction of typography iconography and edge information.
consequently uis hunter may misjudge design violations.
for example if the iconography extractor fails to identify some icons in the navigation drawer uis hunter will misreport the violation of the guideline don t apply icons to some destinations but other others .
in fact this guideline has the lowest precision .
.
as another example it is also challenging to accurately detect thin divider edges used in the navigation drawer.
inaccurate divider edges may lead to the wrong judgment of the guidelines like don t use divider to separate individual destinations .
we finally obtain unique uis that contain true positive design violations for the don t guidelines of types of components.
that is .
of the app uis contains at least one confirmed design violation against material design guidelines.
of uis contain more than one violations.
among the apps apps have at least one ui design violation against material design guidelines.
of these apps contain two design violations and of these apps contain or more design violations.
b. detection accuracy for ui design mockups dataset we download the material design kit from the figma website.
figma is a popular web based ui design tool.
this design kit contains ui mockups that demonstrate the best material design practices.
these design mockups contain all types of ui components that uis hunter can validate.
the design mockups and their constituent components are all editable.
we export these design mockups with component metadata in svg scalable vector graphics format.
in our evaluation on real app uis uis hunter does not report any violations for the don t guidelines of the nine types of ui components see table ii .
our manual examination of the sampled uis does not find the violations of these guidelines either.
among these guidelines guidelines are about improper text styles are about icon usage areabout button usage inside a component are about styles when bottom bar and fab are used together are about the count of certain component instances are about space and placement.
for of these guidelines uis hunter actually reports the same flavor guideline violations for other types of components.
for example although there are no violations of truncating text in bottom navigation we find the texttruncation violations for top bar.
to confirm the uis hunter s capability for the guidelines without violations in real app uis we take advantage of the editable ui mockups to inject ui design smells that violate these guidelines in the ui mockups.
for each guideline we choose ui design mockups that contain the primary component s involved in the guideline.
we modify primary component s to simulate the guideline violation example illustrated in the material design documentation.
depending on the guideline the modification may include changing text content and style adding relevant components icons resizing or moving components etc.
we finally obtain edited ui mockups that violate the don t guidelines.
we combine these edited ui mockups and the original ui mockups for the accuracy evaluation on ui design mockups.
evaluation method we manually examine all the original ui mockups for the violation of the guidelines of types of components.
we do not find any guideline violations.
this is not surprising because these ui mockups are created by professional designers for demonstrating the best material design practices.
nevertheless we apply uis hunter to these original ui mockups and the edited ui mockups for detecting the injected violations of the don tguidelines of the types of components.
we include the original ui mockups to increase the test cases and see if uis hunter may erroneously report the violations that do not actually exist in these high quality ui mockups.
results table ii presents the results.
overall uishunter achieves f1 .
.
it detects of the injected design violations and reports five erroneous violations.
uishunter achieves f1 for guidelines of six types components.
it also detects all injected violations for the seven fab guidelines and the three banner guidelines.
three undetected violations are due to the failure of recognize relevant ui components e.g.
keyboard icons .
five erroneously reported violations are due to the erroneous recognition of non existent icons and the unusual distance between components.
v. u tility of uis h unter having confirmed the high precision and recall of our uishunter tool we want to further investigate the utility of automated ui design smell detection from two aspects how effective can front end developers manually detect ui design smells reported by uis hunter?
how do app users rate the severity of ui design smells reported by uis hunter?
a. effectiveness of manual ui design smell detection motivation using our uis hunter we identify a large number of ui design smells in real world android apps.
767this could be because developers are not aware of relevant material design guidelines.
in this study we want to further investigate whether developers can effectively detect ui design smells when they are made aware of relevant don t guidelines.
by contrasting this manual effectiveness with the detection capability of our tool we will understand the importance and necessity of automated consistent detection method.
user study design we select from our rico dataset app uis according to the following four criteria.
first we want to cover as diverse primary ui components as possible.
the selected app uis should contain not only ui components with violations but also those without violations.
second in addition to uis with violation s there should also be uis without any violations.
third the violated guidelines should cover as many component design aspects and general design dimensions as possible roughly with the similar proportion of the guidelines in each category see section ii .
they should also cover both warning and error severity.
finally validating the selected app uis against these guidelines should involve all types of atomic ui information.
we also need to control the number of uis to be examined in order to avoid fatigue effect by human annotators.
as a result we select app uis among which uis with violations referred to as dirty uis and uis without any violations clean uis .
these uis contain to types of ui components median .
dirty uis have one violation each and dirty uis have two violations each i.e.
in total instances of violations.
we manually confirm that uis hunter correctly identifies all violations and reports no erroneous violations for the selected app uis.
the violations violate don t guidelines see table iii which in combination cover nine types of primary components all four component design aspects all six general design dimensions except shape and all five types of atomic ui information.
guideline g7 has violation instances guidelines g12 and g13 have violation instances each guidelines g10 g16 and g17 have violation instances each and guidelines have one violation instance each.
each type of involved primary component has both violation and conformance instances denoted as iwv and inv respectively.
we recruited front end developers from a local company.
these developers have at least years web and or mobile app development experience.
none of the developers are involved in the development of uis hunter.
before the study we ask the developers to review and familiarize themselves with the don t guidelines and their conformance and violation examples different from the uis to be examined .
then we ask these developers to independently examine the app uis and identify the violations of the guidelines if they believe there are any.
the developers do not know which uis are dirty or clean which guidelines have how many violation instances or may not have violations at all.
the developers can use as much time as they wish to examine a ui.
they complete the examination in to minutes median minutes .
the developers are asked to report the identified violations in terms of the involved primary components and the violatedtable iii don t guidelines examined in user studies and the results of detection effectiveness and severity rating iwv inv the number of instances with without violations gidprimary component iwv inv detection effecti venessseverity rating ratio prec.
rec.
f1 g1button .
.
.
g2 .
.
.
g3 .
.
.
g4top bar g5 .
.
.
g6 .
.
.
g7navdrawer .
.
.
g8 .
.
g9 .
.
.
g10tab .
.
.
g11 .
.
.
g12 g13text field .
.
.
g14bottomna v .
.
.
g15dialog .
.
.
g16banner .
.
.
g17 fab g18 g1 don t use too long text label in a text button g2 don t use two icons in a button g3 an outlined button s width shouldn t be narrower than the button s text length g4 don t shrink text in a top bar g5 don t truncate text in a top bar g6 don t wrap text in a regular top bar g7 don t apply icons to some destinations but not others in a navigation drawer g8 don t use the same icon to represent different primary destinations in a navigation drawer g9 don t shrink text size in a navigation drawer g10 don t mix tabs that contain only text with tabs that contain only icons g11 don t truncate labels in a tab g12 don t nest a tab within another tab g13 don t use primary color as the background color of text fields g14 don t use a bottom navigation bar for fewer than three destinations g15 don t use dialog titles that pose an ambiguous question g16 don t use a single prominent button in a banner g17 don t display multiple fabs on a single screen g18 don t include less than two options in a speed dial of fab.
guidelines.
an identified violation is considered correct only if both the involved primary component and the violated guideline are correct.
we compute precision and recall to evaluate manual detection effectiveness.
let vrbe the bag of the reported violation components for a don t guideline by the developers and vtbe the bag of the ground truth violation components for this don t guideline we duplicate each component five times .
precision is jvr vtj jvrj and recall is jvr vtj jvtj wherej jis the bag cardinality.
results the detection effectiveness column in table iii shows the results.
if the developers detect all violation instances we expect reported violations i.e.
p30 i 1jvtji .
the five developers report in total violations i.e.
p30 i 1jvrji among which only reported violations are true violations i.e.
p30 i 1jvr vtji .
therefore the overall detection precision .
and the overall recall is .
.
both precision and recall are worse than respective metrics of our uis hunter see table i .
among don t guidelines only guidelines g4 g8 g12 g17 and g18 have all violation instances detected by all five developers i.e.
recall .
guidelines g1 g5 g7 g9 g10 g11 g13 and g15 have their violations detected by three or more developers i.e.
recall .
.
when primary components are large ui components e.g.
navigation drawer tab or distinct components e.g.
fab their design violations are easier to notice by human for example a navigation drawer uses the same icons for different destinations g8 one tab component is nested in another tab g12 some tabs contain only text while others contain only icons g10 and 768multiple fabs in a single screen g17 .
some improper text styles for example too long text g1 text shrinking g4 g9 text truncation g5 g11 are also relatively easier to notice.
color relation violations such as using primary color as the background color of text fields g13 are also infamous and easy to spot from illegible components.
for the guidelines g2 g3 g6 g14 and g16 the majority of the developers fail to detect their violation instances i.e.
recall .
.
for g2 g6 and g16 only one developer detects one violation instance.
compared with the guidelines whose violations are easy to spot these five guidelines demand careful examination of a component s type and its constituent parts.
for example g2 and g14 require counting the number of icons in a button and the number of destinations in a bottom navigation respectively.
g3 needs to check if the button is an outlined button and then compare the button s outline box and the text length.
g5 requires to determine if the top bar is a regular or prominent top bar.
wrapping text is fine in prominent top bar but not in regular top bar.
g16 requires to check the presence of dismiss button in a banner.
furthermore we find that the developers may overlook some components in a complex ui.
for example developers did not notice that a button has two icons because they were distracted by other components like the banner on the ui.
two guidelines g12 and g17 have all reported violations correct i.e.
precision .
the precision for g4 g5 g7 g8 g13 and g15 is also high .
.
all these guidelines have clear distinction between violation and conformance.
for example g12 is about nested tab and g17 is about multiple fabs on a single screen.
it is unlikely to mistake conformance as violation and vice versa.
it is also not difficult to distinguish proper text styles g4 and g5 icon usage g7 and g8 color usage g13 and actions g15 from style usage and action violation.
but when a component has variant types developers often misjudge a guideline s applicability and report erroneous violations.
for example g1 and g3 are similar but g1 is for text button while g3 is for outlined button.
the developers often mistake the two types of buttons and report violations for the wrong button type.
or when a prominent top bar is mistaken as a regular top bar the developers may report text wrapping in top bar as a violation of g6.
manual detection of ui design smells is less effective than automated detection especially when multiple pieces of information need to be integrated or there are componentvariant sensitive guidelines.
b. severity ratings of ui design smells motivation material design guidelines are a natural response to many poor app ui designs that lead to low quality user experiences.
in this study we want to investigate how ordinary app users think of the ui design smells reported by our uis hunter.
this helps us understand the potential impact on app users by the tools like uis hunter which can flag these ui design smells and inform developers to take actions.
user study design we use the uis with violations from the first user study.
we highlight the primary components with violations on these uis and annotate the violation with the guideline explanation.
we recruit male and female regular android users from our school the age of these users ranges from to .
we ask the users to independently rate the severity of each violation in the uis.
we use point likert scale with being the least severe and being the most severe.
for each guideline we summarize the number of ratings as non severe ratings as neural and ratings as severe.
results the severity ratings column in table iii shows the results.
only three guidelines g1 g4 and g17 have ratio higher than ratio.
among these three guidelines only g1 has a large ratio difference .
versus .
that is ratings are non severe and there are no severe ratings.
although long text label is not recommended it does not severely affect the visual effect and the usage of the text button.
therefore out of users do not consider the g1 violation as severe user rates it as neural.
in contrast guidelines have ratio higher than ratio among which guidelines g3 g5 g6 g9 g11 g12 g13 g15 and g16 have large ratio difference at least times higher .
for of these guidelines less than ratings are non severe.
for guidelines g3 g9 g11 g12 g15 there are no non severe ratings at all.
we summarize three factors that often lead to severe rating violations.
first some violations significantly affect the ui look and feel.
for example when g3 is violated the text label goes outside the box of the outlined button.
second improper text style e.g.
text truncation g5 g11 text wrapping g6 and color usage e.g.
primary color text fields g13 significantly affect the text legibility and the understanding of important information which are treated as severe issues by most users.
third some violations significantly affect the interaction with the applications such as nested tab g12 ambiguous dialog title g15 and single prominent button in a banner g16 .
for guidelines g4 and g17 with higher ratio guidelines g2 g7 g8 g10 and g14 with higher ratio and guidelines g18 with equal ration the ratio differences between non server and server are small.
indeed the manual detection efficiency for some these controversial guidelines e.g.
g2 g14 and g16 is relatively lower.
this was some developers do not even consider them as ui design smells because the violations of these guidelines do not significantly affect ui look and feel or app usage.
for example use two icons in a button g2 display multiple fabs g17 have one option in the speed dial of fab g18 mix tabs with only text and only icons g10 use bottom navigation for two destinations g14 .
so it is not surprising that the users have mixed opinions.
having said that we believe material design puts up these guidelines albeit seemingly controversial for good reasons.
our automatic guideline conformance checking tool can raise the developers attention to potential ui design smells contrast these smells against specific design guidelines and then the developers can make the informed decision 769whether they are smells to fix or some unique designs to keep.
we also find apps from big companies also violate some of these guidelines.
for example booking.com s android app does apply icons to some destinations but not others in the navigation drawer g7 .
those destinations without icons are auxiliary features e.g.
help contact us .
withouticons actually helps to distinguish auxiliary features from main booking related features.
we find that severity ratings may be context sensitive.
for example both g4 and g9 are about text shrinking.
the users consider the shrinking of app bar title g4 less severe because it does not interfere with other components and the text may still be large enough to read.
but they consider the shrinking text in a navigation drawer g9 much more severe because it leaves the text label inconsistent with other text labels in the drawer.
severity ratings may also be app sensitive.
for example the ui we select for g8 uses the same icon for three different calculators the app supports.
as they are all about calculator some users believe it is fine to use the same icon.
vi.
r elated work ux check identifies usability issues against nielsen s ten usability heuristics.
wu et al.
diagnose user engagement issues caused by mobile ui animation.these tools check only general principles.
in contrast uis hunter checks specific guidelines.
checkman also checks specific guidelines but only ios layout guidelines.
both seenomaly and our uis hunter detect material design guideline violations.
seenomaly validates only ui animation guidelines while uishunter checks design guidelines across five component design aspects and seven general design dimensions.
many tools focus on specific ui issues such as icon tapability image accessibility limited types of display issues e.g.
component occlusion text overlap blurred screen or mismatch between intension and practice .
to the best of our knowledge our tool is the first of its kind.
the issues reported by these tools and the guideline coverage are not really comparable to our tool.
consider entering the navigation drawer design in fig into google accessibility scanner.
that scanner reports issues increase text contrast and enlarge small touch targets.
these two issues are similar to our guideline violation don t shrink text size .
but our tool can detect many other guideline violations such as don t apply icons to some destination but not others don t use dividers to separate individual destinations while the scanner cannot.
also all these tools rely on deep learning models which demand large datasets of labeled ui issues for model training.
it is impractical to collect sufficient training data for all guidelines of types of components uishunter validates.
furthermore some guidelines e.g.
minimum maximum destinations in a bottom navigation repeated icons in top and bottom bar mixing icons text in tabs require aggregating specific component information explicitly.
our uis hunter only uses deep learning tools to extract atomic typography and iconography information and then use explicit logic formulas to aggregate the extracted information.many gui testing tools test system functionalities through automated gui exploration some methods compare the rendered dom trees to detect cross browser compatibility issues but ui visual defects receive little attention.
some tools touch text inconsistencies and defects similar to some text style don tguidelines our tool supports.
moran et al.
develops techniques for detecting presentation inconsistencies between ui mockups and implemented uis and the ui changes during evolution.
their methods contrast two similar uis and find their differences.
this setting is not applicable to detecting guideline violations where illustrative uis for the guidelines and the uis to be checked bear no similarity.
our uis hunter is remotely related to code linters for detecting program errors and code smells.
for example findbugs identified common program errors such as null reference useless control flow.
stylelint is a linter that detects errors and inconsistencies in cascading style sheets.
some tools have been developed to detect code smells for refactoring for example code clones and feature envy .
all these code linters detect issues in source code while uis hunter detects visual design smells in uis.
vii.
d iscussion this work focuses on explicit don t guidelines.
but we find many implicit design guidelines e.g.
icons should be placed to the left of text labels in an extended fab without illustrative violation examples.
explicit and implicit guidelines differ only in how they are described in material design documentation but not in component design aspects general design dimensions and atomic ui information involved.
therefore implicit design guidelines once discovered can be supported in the same way as those explicit guidelines.
furthermore we could derive some de facto design guidelines from real apps based on the principles of official guidelines.
for example material design describes guidelines regarding the inconsistent use of icons and text labels in bottom navigation.
in our observation of real app uis we find some inconsistent icon text usage beyond these guidelines.
for example one destination uses a notification badge to indicate an update while the other destination uses normal text for the same purpose.
uis hunter can be extended to support such de facto guidelines just like those official guidelines.
material design components are backed by android gui apis.
although these apis support well the visual effects and interactions of material design only few apis enforce the don t guidelines of the corresponding components.
for example tablayout does not support vertical tab which is a don t guideline of tab component.
furthermore banner api does not support displaying several banners on a single screen which is a don t guideline of banner component.
in fact neither uis hunter nor our manual examination identifies the violation of these two guidelines in our dataset of real app uis.
this indicates that well designed gui apis could prevent developers from making mistakes.
we could back trace ui design smells reported by uis hunter to the source code and 770summarize visual design related code smells a new type of code smells that have never been explored .
studying such code smells could inform the design of gui apis that can better enforce ui design guidelines.
last but not least in addition to be an after fact detector uis hunter could also be integrated with ui design tools and gui builders to support just in time ui design smells analysis in the similar way as just in time code smell analysis and refactoring .
for example at the time the developer designs a bottom navigation with two or five destinations the tool could raise the issue and suggest to use tab or navigation drawer instead.
this could avoid significant redo cost or leaveit as is regret after the design has been implemented.
viii.
c onclusion and future work this paper presents an automated ui design smell detector uis hunter .
the design of uis hunter is informed by a demographic study of material design guidelines.
the evaluation on real app uis and ui mockups confirms the high detection accuracy of uis hunter and the user studies provide initial evidence of the uis hunter s utility for developers and app users.
we release our uis hunter tool material design guideline gallery manually validated ui design smell dataset for public use and evaluation.
in the future we will extend uis hunter to support implicit and de facto guidelines in material design as well as other design systems that describe visual do don t guidelines for a library of ui components in a similar vein.
we will investigate visual design related code smells and better gui api design to enforce visual design guidelines in code.
we will integrate uis hunter with design tools to support just in time ui design smell detection.
more user studies will be conducted to evaluate the usefulness of the uis hunter tool and its extensions.