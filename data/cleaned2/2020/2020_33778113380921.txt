establishing multilevel test to code traceability links robert white university college london london ukjens krinke university college london london ukraymond tan university college london london uk abstract test to codetraceabilitylinksmodeltherelationshipsbetweentest artefactsandcodeartefacts.whenutilisedduringthedevelopment process these links help developers to keep test code in sync with tested code reducing the rate of test failures and missed faults.
test to code traceability links can also help developers to maintain an accurate mental model of the system reducing the risk of architectural degradation when making changes.
however establishing and maintaining these links manually places an extra burden on developersandiserror prone.thispaperpresentstctracer an approachandimplementationfortheautomaticestablishmentof test to code traceability links.
unlike existing work tctracer operatesatboththemethodlevelandtheclasslevel allowingusto establish links between tests and functions as well as between test classes and tested classes.
we improve over existing techniques by combining an ensemble of new and existing techniques and exploitingasynergisticflowofinformationbetweenthemethod and class levels.
an evaluation of tctracer using four large wellstudied open source systems demonstrates that on average we can establish test to function links with a mean average precision map of and test class to class links with an map of .
acm reference format robertwhite jenskrinke andraymondtan.
.establishingmultilevel test to codetraceabilitylinks.in 42ndinternationalconferenceonsoftware engineering icse may23 seoul republicofkorea.
acm new york ny usa pages.
introduction unittestingisan integralpartofsoftwaredevelopment however tofullyrealisethebenefitsofunittesting itisnecessarytomaintain an accurate picture of the relationships between the tests andthe tested code.
traceability links provide an intuitive mechanism for modelling these relationships.
once established test to codetraceability links can improve the software engineering processin several ways including making changes to the system safer facilitating thereuse of artefacts and aiding programcomprehension .
changes to the system become safer as when a developermakesachangetoapieceoftestedcode theycanusethe traceability links to easily discover which tests also need to bechanged andvice versa.thisreducestheriskofdesynchronisation between the tests and code an issue which can cause test permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation onthe firstpage.copyrights forcomponentsof thisworkowned byothersthan the author s mustbehonored.abstractingwithcreditispermitted.tocopyotherwise or republish topostonserversortoredistributetolists requirespriorspecificpermission and or a fee.
request permissions from permissions acm.org.
icse may seoul republic of korea copyright held by the owner author s .
publication rights licensed to acm.
acm isbn ... .
and prevent the discovery of new faults.
while developers canusefaultlocalisationtechniquestodiscoverwhichfunctions maybecausingtestfailures traceabilitylinkshavethebenefitof being bidirectional so developers can start from a function and find the corresponding tests.
industrial need for the automated establishment of test to code traceability links is demonstrated by st hletal.
throughcasestudiesanddeveloperinterviews.the developerinterviewswerefocusedonthemesandthethemethat encompasses this work test results and fault tracing attracted the most number of relevant statements with interviewees stating for example that it was particularly important and super crucial .
usingtrace linksto drill down whentroubleshooting failedtests was specifically mentioned.
the developers also made clear that automation is crucial as manual traceability handling is a major blocker for more frequent deliveries of software.
while there has been an effort on some projects to have developersmanuallymaintaintraceabilitylinks thispracticeisnot commonasitcreatesextraworkfordevelopers.instead developersoftenemploy namingconventions e.g.
matching thenames oftest classeswiththenamesoftestedclasses with test appended.in most instances where projects have attempted to manually maintain traceability links these have been at the class level where the numberoflinksismoremanageableandtherelationshipsbetween test artefacts and tested artefacts are usually simple.
therefore toavoidcreatingextraworkforthedevelopersandtheerrorsassociated with the manual maintenance of traceability links the research community has focused on developing approaches for the automatic establishment of traceability links.
most previous work on test to code traceability see parizi et al.
for anoverview has focused ontheclass level wheretest classes are linked to their tested classes .
not muchworkhasbeendoneonthemethodlevel where individual unit tests are linked to their tested functions despite beingshowntobehelpfulfordevelopers .ourworkisthefirst toaddressboththeclasslevelandthemethodlevelsimultaneously.
thisallowsustoconstructbothtypesoflinksandutiliseacrosslevel flow of information to improve overall performance.
this givesourapproachamoreaccurateandfine grainedviewofthe relationships between the artefacts.
our work also distinguishesitself from previous work by utilising dynamic information and rankingpotentiallinks insteadofthestaticinformationthathas typically been used before to generate sets of unranked links.
the difficulty in establishing test to code links lies in the fact that not all code executed by a test is part of the code that is being tested.
this is because many tests will call functions which are not considered to be amongst the functions under test such as helper functions gettersandsetters orfunctionsthatinitialisethestate of an object before the functions under test are invoked.
therefore simplyconsideringallexecutedcodeastestedcode isnotan accurate technique of establishing test to code traceability links.
ieee acm 42nd international conference on software engineering icse inthispaper wepresenttctracer anapproachandimplementation which aims to overcome the weaknesses of existing test tocode traceability link establishment approaches by employing a wide range of techniques that utilise information from dynamic call traces including two new call based statistical techniques.
tctraceralsocombinesthesetechniquestoproduceasingle scorethatperformsbetteroverallthananyindividualtechnique.in addition tctracerisappliedtoboththemethodlevelandtheclass level which allows us to establish links between individual testsand their tested functions as well as whole test classes and their tested classes.
tctracer uses its multilevel aspect to create a flow of information between the levels that can improve effectiveness.
our approach is evaluated using a manually curated ground truth at both the method and class levels from four nontrivialandwell studiedsubjectprojects1.ourfindingsshowthat on average usingourcombinedtechnique wecanachieveanincrease ineffectivenessoverexistingtechniquesatboththemethodlevel and class level.
the main contributions of this paper are anapproachtotest to codetraceabilitythatutilisesanensemble of techniques and a multilevel flow of information.
a comparative evaluation of each technique at both the method and class levels.
anevaluationofthebenefitgainedbyutilisingmultilevel information.
a manually curated ground truth dataset of test tofunction and test class to class links.
motivation the development of a new approach to test to code traceability establishment is motivated primarily by the fact that all existing techniqueshavesomeweaknessesthatmakethemunsuitablefor use as a general solution.
one of the most common techniquesfor establishing traceability links naming conventions nc is agood example of this.
this approach relies on using the naming conventions for test artefacts unit tests or test classes to identify theirlinkstotestedartefacts functionsorclasses .thespecificconventionsusedmayvarybetweenprojects however thestandard conventionisthatatestartefactshouldsharethesamenameasthe artefact that it is testing with testprepended or appended .
forexample afunctionnamed unionwillbeconsideredtobetested by a test named testunion.
however this technique is not effective iftheprojectdoesnotadheretothenamingconventionsandcan have poor recall even for projects that do.
this is because it assumes a one to one relationship between test artefacts and tested artefactswhenthisisnotalwaysthecase.thecommonscollections project provides a real world example of this where the functiondisjunction istestedbythetests testdisjunctionasunionminusintersection andtestdisjunctionassymmetricdifference.asthis isaone to tworelationship thenamesdonotmatchthenaming convention and nc would not be able to recover these links.
last call before assert lcba is another existing technique that has severe limitations.
lcba operates on the assumption that the function which returned last before an assert is called is the functionthattheassertistesting.however thisassumptionisoften incorrect.
one common example of this is when the purpose of 1evaluation artefacts available at github.com rrgwhite icse20 main data.a tested function is to change the state of an object.
in this case to check that the function has performed the correct operation a getter must be called to get the changed state so that it can becompared to an oracle.
this causes lcba to incorrectly identifythegetterasthetestedfunction.evenifthetestedfunctiondoes directlyreturnthevaluethatneedstobechecked thisvaluewill oftennotbecheckedbyanassertimmediatelyafterbeingreturned.
this could be because the test needs to call helper functions before the assert possibly to establish the oracle.
finally textual similarity measures based on information retrieval techniques have also been used in an attempt to recover test to codetraceabilitylinks withvaryingdegreesofsuccess .
however noneofthemhavebeenshowntobesufficientontheir own as techniques designed for natural language do not directly translate to code.
this is due to the bimodality of code which leads to the possibility that two code snippets may be closely related semantically but completely different lexically or vice versa .
given these inherent weaknesses in the individual existing techniques there is a strong motivation to design a new approach that while exploiting the strengths of the individual techniques collectively overcomes their weaknesses.
this is the approach utilised in tctracer and presented in this paper.
a secondary motivation for the development of a new approach totest to codetraceabilitystemsfromthefactthatexistingwork hasonlyfocusedoneitherthemethodlevelortheclasslevel.as both levels can provide useful information to a developer we were motivated to develop a single approach that worked at both levels simultaneously.thisresultedinthemultilevelaspectof tctracer whichinturnfacilitatedtheuseofmultilevelinformationflowto further increase the effectiveness of the approach.
approach ourapproachobserveswhichartefactsareexecutedwhileatestruns creating candidate links between test artefacts and tested artefacts.
it then assigns scores to the candidate links.
these scores are used to rank the candidates and predict which of them are true test to codetraceabilitylinks.thepredictedlinkscanthenbeused e.g.
in an ide to navigate between test and the tested artefacts.
as we are establishing links on the method as well as on the class level weusethetermsfunctionormethod under testwhen referring to a tested method and the terms tested class or classunder testfortheclass level.moreover ontheclass level aclassunder testistestedbyoneormoretestclasses andonthemethodlevel a method under test is tested by one or more test methods.
ourmultilevelapproachstartsbydynamicallycollectinginformation about each function call made by each test specifically which function was called and the depth in the call stack of the function call relative to the calling test.
for each test this information is stored in an object henceforth referred to as a hit spectrum.
wethenapplyanensembleoftraceabilitytechniquestothemethod level using the information in the collected hit spectra.
this results in a set of test to function scores for each technique each of which encodes the likelihood that a given function is the tested functionforagiventestthatcallsit.werefertothesescorescollectivelyasthemethodlevelinformation.thesameprocessisthen applied at the class level where sets of test class to class scores 862areestablishedusingthesametechniques providinguswiththe classlevelinformation.atthisstage wecreateacross levelflow ofinformation byutilisingthe methodlevelinformation forclass level predictions and the class level information to augment the method level predictions.
to compute our scores we selected two existing test to code traceability techniques and formulated six new techniques.
six of the techniques produce a score in the interval for every possiblelink indicatingthelikelihoodthatthelinkiscorrect whiletheothertwoproducebinaryscores.aninthscoreisalsocomputed that combines the scores for all the individual techniques.
thesescores are used to rank the candidate links so that those ranked highest are most likely to be true traceability links.
thresholds are then applied to construct the sets of predicted links.
wedescribeourtechniquesinthefollowingsectionwhere for simplicity wewillpresentthematthemethodlevel.toapplythem on the class level test classes are used instead of test methods and tested classes instead of tested functions.
.
techniques as discussed in section existing test to code traceability techniques have weaknesses which we try to overcome with new techniques.despitetheirweaknesses weselectedtwoestablishedtech niques naming conventions nc and last call before assert lcba becausetheyperformwellincertainsituations.the newtechniquesformulatedfortctracerincludefourstring based techniques a variant of naming conventions ncc two variants oflongestcommonsubsequence lcs bandlcs u andusing thelevenshteineditdistance whichallutilisenamesimilarity.
two statistical call based techniques scts based on tarantula fault localisation and term frequency inverse document frequency tfidf are also included in the new techniques.
theoriginalncwasselectedforourtechniqueensembleasit shouldhavehighprecision especiallyinprojectswherethenaming conventions are strictly followed and is a common methodbywhichdevelopersidentifytestsforagivenmethodduringdevelopment .
lcba was selected as it can perform well in certaincircumstances specificallywhenthetestsconformtothe styleofusinganasserttotestthereturnedvaluefromafunction immediately after the function is called.
as both nc and lcba arewell established techniquesfortest to code traceabilityrecovery they also make good candidates to serve as comparison points for our other techniques.
ncc requires that the name of the test contains the name of the tested artefact.
it was included in the technique ensemble as itutilisesthestrengthsofncbutshouldachievehigherrecallas it can establish many to one relationships between functions and tests as opposed to the solely one to one relationships that are discoverablewithtraditionalnc.thishelpstoalleviatesomeoftheproblems with traditional nc as discussed in section .
lcs b andlcs u compute the ratio of the name lengths and the length of thelongestcommonsubsequenceofthenamesofthetestandthetested artefact.
theywere used asthey utilisethe same intuitionsas nc andnccrespectivelybutinsteadofproducingabinaryscore they produceareal valuedscorethatindicateshowclosetosatisfying nc ncc the potential link is.
this is useful as there are instanceswherenc nccarenotsatisfiedbutareveryclosetobeingsatisfied for example in the case of nc if there are extra words before or afterthenameofthefunctionor inthecaseofncc ifthename ofthefunctionisabbreviatedorhasgrammaticaldifferencesinthe nameofthetestcase.intheseinstances thereal valuedscoresof lcs b and lcs u are more useful than the binary scores of nc andnccaswecanstilldetermineifatestandafunctionarelikely related.weinclude thenormalisedlevenshteindistancebetween the names as a technique as it provides a different view of name similaritytothelongestcommonsubsequencewhichisusedinthe lcs b and lcs u techniques.
we include the tarantula technique as intuitively the task of recovering test to code traceability links is similar to the task of fault localisation as if a function is causing a test to fail it is likely that function and test should be linked.
therefore our intuition is thatbyadaptingawell knownfaultlocalisationtechniquetotraceability we may find an effective method of recovering test to code trace links.
the inclusion of the tfidf technique is motivated in a similarfashiontotarantulainthatweviewthetaskofdetermining the relevance of terms to a document as being analogous to the taskofdeterminingwhichfunctionsaremostrelevanttoatestcase andthereforewhichfunctionsaremostlikelytobethetargetsof thattest.astfidfisastandard well testedmethodofestablishingterm relevance we adapted this method to test to code traceability.
alloftheaboveeighttechniqueswillbeevaluatedtoidentifyindividualstrengthsandweaknessesandcomparedtotheestablished techniquesncandlcbatoestablishiftheirknownweaknesses can be overcome.
we also include all techniques in a combined scoreaswebelievethateachtechniquehasthepotentialtoprovide at least some information that cannot be wholly obtained using anyothertechnique.however thisiscurrentlymerelyanintuition and will be tested in future work by measuring the contribution of each technique to the effectiveness of the combined score.
allofourtechniquesutilisedynamictraceinformationwhich allowsustoavoidcommonproblemsassociatedwithstatictech niques such as over approximation and the inability to reason about