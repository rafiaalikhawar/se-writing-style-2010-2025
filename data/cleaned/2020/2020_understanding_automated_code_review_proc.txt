understanding automated codereview process and developer experience in industry hyungjin kim hjkim17.kim samsung.com samsungresearch seoul koreayonghwi kwon yhwi.kwon samsung.com samsungresearch seoul koreasangwoojoh sangwoo.joh samsung.com samsungresearch seoul korea hyukinkwon hyukin.kwon samsung.com samsungresearch seoul koreayeonhee ryou yeonhee.ryou samsung.com samsungresearch seoul koreataeksu kim taeksu.kim samsung.com samsungresearch seoul korea abstract code review automation can reduce human efforts during code reviewbyautomaticallyprovidingvaluableinformationtoreviewers.
nevertheless itisachallengetoautomatetheprocessforlarge scale companies such assamsung electronics duetotheircomplexity variousdevelopmentenvironments frequentreviewrequests huge size ofsoftware anddiverseprocessamong the teams.
in this work we show how we automated the code review processforthoseintricateenvironments andsharesomelessons learned during two years of operation.
our unified code review automation system code review bot is designed to process review requestsholisticallyregardlessofsuchenvironments and checks variousquality assuranceitemssuchaspotentialdefectsinthecode coding style test coverage andopen sourcelicenseviolations.
somekey findingsinclude about60 ofissues foundby code review bot were reviewed and fixed in advance of product releases morethan70 ofdevelopersgavepositivefeedbackaboutthe system developersrapidlyandactivelyrespondedtoreviews and the automation did not much affect the amount orthe frequency ofhumancodereviewscomparedtotheinternalpolicytoencourage code review activities.
our findings provide practical evidence that automating code reviewhelpsassure software quality.
ccs concepts general and reference empirical studies software and its engineering application specific development environments collaboration in software development software defect analysis empirical software validation.
keywords code review reviewbot code reviewautomation staticanalysis permissionto make digitalor hard copies of allorpart ofthis work for personalor classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acm mustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
esec fse november 14 18 singapore singapore associationfor computing machinery.
acm isbn ... .
format hyungjin kim yonghwi kwon sangwoo joh hyukin kwon yeonhee ryou and taeksu kim.
.
understanding automated code review process and developer experience in industry.
in proceedings of the 30th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse november 14 18 singapore singapore.
acm new york ny usa 10pages.https introduction codereviewautomation isanessentialactivitytoreducehuman effortinmoderncodereview .itgenerallycontainsaprocessof writingcodereviewsthroughapredefinedsetoftools.manystudies havebeenconductedoncodereviewautomation or bots andlotsof open source projects use automation tools to support code review.
this automationallows developerstofocus onunderstanding the intention of code changes and spend more time discussing the architectural designordomain specific problems.
inspiteofitsconvenience codereviewautomationinreal world industry faces several challenges.
samsung electronics manufactures many types of electronic devices such as mobile phones networkequipment smarttvs andhomeappliances.therefore many projects in samsung are different in their development environments domains sizes programminglanguages andprocesses.the automation ismore challenging inthesesettings.
thefirstchallengeisthevarietyofdevelopment environments.
forexample eachdevelopmentgroupusesdifferentreviewsystem tomeetitsownbusinessrequirements including github helix swarm orgerrit .
each review system offersunique user experiencesandfunctionalitiesthroughtheirapis.forinstance developerscancommunicatewithricherinformationingithubusing markdownandhtmlformatmessages.othersystems however lackthis feature.
frequentreviewrequestsisthesecondchallenge.thisscalability issueiscrucialtotheindustry sdevelopmentprocessbecauseanautomatedsystemwithpoorperformancemaybecomethebottleneck.
every day in samsung electronics approximately ten thousands of review requests are created from more than projects and about .
million lines of code are added and about one million removed.
thelastchallengehastodowiththediversityofdevelopment processes among the teams.
to ensure software quality each team definesitsownassurancepoliciesandusesvariousanalysistools 1398esec fse november14 singapore singapore hyungjin kim yonghwi kwon sangwoo joh hyukin kwon yeonhee ryou andtaeksu kim forthispurpose.forexample therearesometeamsthatperform static analysis as part of continuous integration ci but other groups use the tools during the integration testing phase.
some groupsareusingjavaandkotlinasprogramminglanguages but most are using c c .
therefore different tools are required for differentlanguages.
in order to overcomethesechallenges we developed code review bot a unified code review automation system for samsung electronics .
it supports various review systems that are used in thecompany.inaddition itprovidesavarietyofservicessuchas code change size measurements in review requests typo checks potentialdefectdetection andcoding style checks.
we conducted a survey to collect feedback from developers as well as a quantitative analysis how much the automation reducestheireffortsbyexaminingthenumber andlengthofreview comments.over70 ofdevelopersaresatisfiedwithoursystem accordingtothe survey.
mostdevelopersagreed that codereview botis helpful for improving their code quality.
also almost all respondents thought code review automationcould reduce of their efforts.
more than of defects were fixed as our system motivateddevelopers to focusonimprovingcode quality.
key contributionsare we present code reviewbot anautomaticcodereview system.
it provides a unified interface and a unique user experience inthe code reviewactivity.
codereviewbot isscalable socanprovidefeedbackforeach reviewrequest quickly.
codereview bot supportsvarioustypesofanalyses includingcommitsizemeasurements typochecks potentialdefect detection coding style checks reporting unit tests test coverage measurements and architecture metrics visualization.
we evaluated our system qualitatively and quantitatively.
wefoundthatmorethan70 ofdevelopersaresatisfiedwith oursystem andmorethan60 defectshavebeenfixedby developers.
challengesincode review automation at samsung electronics automatingcodereviewhelpstoimproveproductivity butadapting automation to large scale industries can be challenging.
in this section we discuss the challenges associated with automating the process especiallywithin samsungelectronics.
.
varietyofdevelopmentenvironments considering the complex environments in large organizations it is essentialfor code reviewautomation systemsto be designedwith great care.
we use many programming languages two different sourcecodemanagementsystems andseveralreviewsystemsat samsungelectronics.
variousprogramminglanguagesareusedinthecompany.
of developers use c c use java kotlin use python use javascript including typescript and use c and so on.
an automation systemshould be ableto handle this variety.
we also use two kinds of source code management systems scms gitandperforcehelixcore.developmentteamschoose scmsbasedonfactorssuchasprojectsizes targetplatform andbuild environments.
perforce helix is a centralized tool with powerful branch out functionalities and versioning features suitable for product lines in large scale projects.
on the other hand git is a distributedsystemthatsupportsmoreagiledevelopmentprocesses ratherthanperforcehelix.
moreover weutilizeseveralcodereviewsystems github gerrit and helix swarm.
some teams use perforce helix as their scm so they should conduct the code review using helix swarm.
other teamsusegitandgithubforthescmandthecodereviewsystem respectively.
there are also a number of teams that use gerrit as their review system to develop tizen platform or android apps because they are working with public open source developers who are familiar withthat system.
.
frequentreviewrequests in addition the frequent request for code reviews makes it difficult toautomatetheprocess.especiallyforlarge scaleindustries performance and rapid response are the key requirements of automation tools .
insamsungelectronics thousandsofreviewrequestsarecreated inadayfrommorethantenthousandprojects andabout1.4million lines of code are added and one million lines are removed every day.themediannumberoflinesaddedandremovedis35and8 respectively.themeanvalueforaddedlinesis1 373withastandard deviation of .
and that for removed lines is with a standard deviation of4.
.
.
diversityofprocesses dueto2.1and2.
thedevelopmentprocessesvaryamongteams.
differentprogramminglanguages require differenttoolsforstatic analysis.pylint forexample isusedforanalyzingpythoncode and findbugs is used for java.
different review systems also involve differntcontinuousintegration ci tools.toolsusedinsamsung electronicsandtheircharacteristics are as follows.
staticanalyzers staticanalysistoolstrytofindusefulinformationsuchaspotentialdefectsusingonlysourcecode.
the tools are not only used by open source projects but alsobymanyindustriesinpracticetovalidateandverifythe codebaseinspiteoffalsepositives .wealsouseopensourcestaticanalyzers e.g.
cppcheck pylint findbugs etc.
as well as private in house ones.
unit testing tools unit tests are used to ensure that the softwarebehavesasintended.thetoolsforrunningunittests andcheckingtestcoveragevarybyprogramminglanguages.
the way we show the test results for developers varies by reviewsystemstoo.
architecture metrics instrument the use of software architecture metrics is generally considered as desirable for project management and evaluation .
we measure the metrics with private in house tools.
the metrics provide an overview of architectural attributes related to reliability and maintainability.
open source license validator open source license violation becomes one of the most important issues.
we also checkcompliance issueswithprivate validation tools.
1399understandingautomatedcode reviewprocessanddeveloperexperience in industry esec fse november14 singapore singapore codingstylechecker codingstylecheckersdetectviolationsofdeveloper defined orpre defined rules.these tools allow projects to keep consistent aesthetics.
some tools also suggestpatchestocomplywiththerule.likestatictools different programming languages require different style checkers anddifferentreviewsystemsrequiredifferentkindsof feedback.
differentreviewsystemsalsoinvolvedifferentcontinuousintegration ci tools.
for instance a ci tool designed for github may analyze source code in the head commit of the pull request to provide useful insights for reviewers.
on the other hand review processofgerrit using changesandpatchsets forchangeneeds differentprocessconfigurationofcithangithub.
code review bot automaticcode review system we developed a code review automation system for samsung electronics codereviewbot crb whichhelpstocreateaunifiedcode reviewprocessregardless ofthe toolsandsystems.
designgoalsof code review bot are as follows extensibility oneofourmajorgoalsistomake crbaseasy aspossibleforqualitytooldeveloperstoservicetheirtoolsto different review systems.
this is achieved by abstracting all the review systems used in the company as abstract review system andprovidingunifiedapis.
convenience crb provides an accessible user interface for developers to configure the options of the services they use.
we try to simplifying the complex configuration of all the tools in use with a few clicks.
in addition for all review systems crbgives its feedbackinaconsistent way.
scalability inordertohandlethemassiverequestsforreview in samsung electronics crbshould be scalable.
we accomplishthisbydistributingtherequestsamongseveral workers andprocessing eachtaskasynchronously.
.
overallarchitecture figure1showsanoverallarchitectureof crb.whenadeveloper creates a review request using a review system the review system triggerscrbtostart analyses.receivingthe request eachservice ofcrbinspectscodechangesfromthereviewrequestandgenerates review comments including its analysis results.
the developer confirms comments via the review system by herself and checks detailedinformationfrom crb.withthehelpof crb reviewersare abletoconcentrateonunderstandingsemanticsofthecodechange andmakereviewcommentswithoutworryofsimpleerrorssuch as typos potentialdefects orcoding convention violations.
themainfeatureof crbisaconnectionbetweenreviewsystems and services each of them is located on both sides of crbbackend.adaptermodule takes a role of communication between a reviewsystemand crb.duringtheinformationexchange abstract reviewsystem componentabstractsconcretereviewsystemsand encapsulatestheir detail.
abstract review system providescommon interfaces for every review system and lets crbeasily extend new kindsofsystems.
invocation of analysis services and scheduling between services are controlled by distributed task queue worker module.
theworker controls an execution order and aggregates analysis results.
moreover it is designed for parallel processing to boost up the performance of crb.
to meet the requirement the worker componentisimplementedwith celery asimple flexible andreliable distributed system for python language .
moreover services need to be activated or turned off during an operation with a small amount of effort.
thus we designed pluginscomponent based on a microservice architecture style for scalability and extensibility.
figure2illustratesthepluginarchitectureof crb.eachplugin matches a relevant analysis service .
plugins are categorized based on theinvocation timing thecommunication protocol between a plugin and a relevant service and the execution type synchronous orasynchronous .eachcategorydefinesdefaultbehaviorssuchas an interpretation of a request a service invocation and a response generation.
starting points of services are classified into three categories whenareviewrequestiscreated s1 whenotherserviceshavebeen finished s2 or when code fragments have been merged s3 .
endpointsareseparatedintotwogroups synchronousanalysis waiting forthefinishofservicesincetheanalysistimeisshortenough e1 orasynchronous analysis receiving an asynchronous result from aservice via callbacksbecause ofthelongtime consuminganalysis e2.
based on the characteristics of services we defined plugin classes restsyncplugin s1ande1 restasyncplugin s1ande2 afteranalyzedplugin s2 andaftermergedplugin s3 .asallafteranalyzedplugins andaftermergedplugins are executed in synchronous wedidnotdefine afteranalyzedasyncplugin andaftermergedasyncplugin.
configurationmanager moduleisalsolocatedinsidethebackend.
thecomponentmanagessettingsandconfigurationsofeachproject and service.
the configurations are managed by users via crb frontend.crbfrontend providesauserexperiencefordevelopers to change preferences of their own projects.
a developer can add a newproject select services tobe applied andset in detail options withasmall amount ofefforts.
.
extensibility weintroducean abstractreviewsystem toimprovetheextensibility ofreviewsystems.eachreviewsystemhasitsownapiswithwhich one can retrieve information about a generalreview request code description or code fragments.
moreover writing a review commentorcreationofcodechangesuggestioncanbealsoachieved via the apis.
an abstract review system which is located inside crb backend is an abstraction of those apis.
it provides common interfacesand bridges interfaceswith correspondingapis of each reviewsystem.forinstance whentheabstractreviewsystemreceives arequest towrite acomment regardless of review systems crbcan write a comment to the review system by using an api of the abstract review system.
crbcan easily address new type of reviewsystemwiththe helpof the abstract reviewsystem.
nevertheless somevariationpointsinreviewsystemstillremain.
for instance rendering comments containing html or markdown maybeunavailableforsomereviewsystemssuchasgerrit.github providesanapitoretrievethelistofreviewersbuthelixswarm does not.
it is important for the abstract review system to judge 1400esec fse november14 singapore singapore hyungjin kim yonghwi kwon sangwoo joh hyukin kwon yeonhee ryou andtaeksu kim crb backend crb frontend distributed task queue worker adapter scheduler configuration manager review systems abstract review system plugins services github p4 swarm gerrit comment writer review request collector review comment generatorreviewability code quality potential defects typo coding style test coverage opensourcevalidation loc file count task generator task caller request handler response handler project manager project group manager user account manager request review architecture maturity figure overallarchitecture of code review bot plugins restsyncplugin typo restasyncplugin afteranalyzedplugin dataplatformplugin test coverage architecture maturity ground rule potential defects reviewability opensource validation aftermergedplugin coding style figure plugin architecture whether the targeted review system supports certain functionality or not.
variations are controlled by an inheritance and each instancefiltersoutunavailablefeatures byitself.
sinceenoughabstractionisapplied aservicedeveloper someonewhowantstocreateanewservicedoesnothavetoconsider therepresentationofeachreviewsystem.shecanconcentrateon the implementation of a successful service only without any worry aboutthe userinterface compatibility.moreover if samsungelectronicsadaptsanewreviewsystem theabstractreviewsystemcan be appliedto crbinconvenientway.
.
convenience crbprovidesseveralpre definedanalysesservices.developerscan easily configure the optionsofthe services withafewclicks.
inaddition crbreturnseachfeedbackinaconsistentwayto eachreviewsystem.dependingonthesortoffeedback analyses services are as follows inlinecommentservices feedbackofsomeservicesare delivered as inline comments.
these services include potential defects service typoservice and open source validation .
defects detected by each tool are listed and crbindicates each line in which a defect has been found.developers are able to identify problems and fix them more quickly with the aid of crb.
project managers can easily turnonandoffeachservicethemselvesandsetconfiguration withlittledifficulty.
summarycommentservices thereviewability service measureschangemetrics e.g.thenumberofchangedfiles orlines etc.
andprovidesthemtoreviewers.
testcoverageservice and architecture maturity service both run unit testing and code metrics measurements and provide information regarding overall code quality to developers.
it is unfortunate that dynamic and static analysis for the measurementrequiresmoreeffortfromtheprojectmanager duringtheconfiguration.
crblessensthehumaneffortby providing utility functionality for gathering test results andtransformingthemintoaunifiedformatformainstream test frameworks and pre defined containers that can be usedfor running the metric measurements.
codesuggestionservices therearesomeservicesthatsuggest code changes to resolve certain issues.
coding style servicechecksstyleviolations andsometimescreatesareview request to fix those violations.
the reason for this is that many coding style tools reconstruct the entire target file to comply their style so inline comment feedback is not always sufficient for resolving violations.
typoservice also creates a code fix suggestion and helps developers easily correctmisspells.
ci basedservices someservicesrequireexecutionenvironments to get their results which means they need build systems orcontinuousintegrationsystems.these servicesincludepotentialdefects architecturematurity andtest coverage services.
they uses docker jenkins or github actions to build or test the submitted codes.
some divisions made their own build systems so crbtriggers to start by using the systems.
or other divisions use ci systems which are triggered by review systems directly such as github actions.atthattime crbdoesnotbehaveanything butwaits the results ofcisystems.
1401understandingautomatedcode reviewprocessanddeveloperexperience in industry esec fse november14 singapore singapore .
scalability one of the most painful points in applying a review automation system to a large scale industry is the performance problem by the lack of scalability.
a large scale project sometimes consumes huge amount of resources in analyses and execution time explosion may burden developers.
we applied a microservice architecture style to crbtoovercomethelimitation.themicroservicearchitectureis knownas agoodsolution for ascalablesystem .
each services are deployed in physically separated nodes and communicate with relevant plugins via http protocol.
parameters and environments are shared via redis a distributed in memorydatabaseandainvocationschedulingis performedby celery a distributed task queue.
each service operation is processedindependently inparallel.
deployment based on microservices achieves high level of scalabilityinaserviceexpansion.separationofservicesfromtheplatform i.e.
crbbackend makesthescalingoutandupinconvenient way andcrbsuccessfully adapted into samsung electronics withoutperformance problems.
.
status ofusage crbhas been applied in samsung electronics for about two years from2019.morethaneightthousandreviewrequestsfrom6 projectshavebeencreatedduringtheperiodand2.7millionservice executions happened.
as the registration date of each project is different to compare the portion of review systems and frequently executed services we choose a single month august and calculatedthe statistics.
swarm .
gerrit28 .
github .
a review requests swarm github gerrit0100200300400 type add remove b linechanges inrequests 000typo reviewability potential defects open source coding style ground rule test coverage archiecture github gerrit swarm c review requests byservices figure review request statistics inaugust2021 figure3ashows the number of review requests in a month.
totally81 712reviewrequestswerecreatedandtheaveragerequest count in a day is working days in a month .
about ofrequestswerecreatedfromhelixswarmandgerrit.figure 3b showschangedlinesinareviewrequestduringtheperiod.median valuesofadded lines per review requestforhelixswarm github a comment of test coverageservicefromgithub b comment of potentialdefect servicefromgerrit c comment of typoservicefromhelixswarm figure commentsby code review bot andgerritare41 and26 respectively.medianvaluesofremoved linesare and8 respectively.
typo reviewability andpotentialdefects arethemostfrequently used top three services .
.
number of service calls are illustratedinfigure 3c.someservicessuchas codingstyle testcoverage andarchitecturematurity takeslowerportionthantopfourservices because the services can be applied to neither helix swarm nor gerrit.
1402esec fse november14 singapore singapore hyungjin kim yonghwi kwon sangwoo joh hyukin kwon yeonhee ryou andtaeksu kim examplesofcommentsgeneratedby crbforeachreviewsystem are shown in figure .
figure4ais an example of test coverage service whichshowslinecoverageforbothtotallinesandchanged lines.
uncovered lines of the review request are emphasized to call a reviewer s attention.
figure 4bshows a comment generated into agerritreviewsystemwhichcontainspotentialdefectsinareview request.exampleofahelixswarmcommentcontainsseveraltypos isshowninfigure 4c.
empiricalstudies .
research questions weconductedqualitativeandquantitativeanalysestoseehowusefulcodereviewbot isfordevelopersinsamsungelectronics.we madeasurveytounderstanddevelopers satisfactionwiththequalitativeevaluationandobtaineddatafromcodereviewcomments from developers and analysis results from crbfor the quantitative evaluation.fromtheresults weperformedanempiricalstudyto answer following researchquestions rq1 how useful is crbfor developers and how efficiently dodevelopers use crb?
rq2 doescrbattractdevelopers?thatis howmanydefects and alarms from the system are approved and fixed by developers?
rq3 doescrbquantitativelyreducetherevieweffort?is there significant difference in the amount of code review written byreviewers before andafter the automation?
.
experiment setup to answer rq1 we conducted a survey from developers in samsung electronics with questionnaires listed in table .
the questionnairesfocusonunderstandingfeedbackaboutasatisfaction andusage patterns on crb.
table questionnairesaboutusageof code review bot question q1 are you satisfiedwith code review bot ?
q2 doescodereviewbot effectivelyreducetimeandeffortin the code reviewactivity?
q3 doyouthinkhowmuchtimeandeffortofthecodereview are reducedby code review bot ?
q4 doyouthink codereviewbot ishelpfulintheimprovement ofthe code quality?
q5 whichbenefitsdoyou expectwith code review bot ?
q6 whichservicesof codereviewbot areyousatisfiedthemost?
wecountedthenumberoffixeddefectsandalarmswhichare detectedby crbforthequantitativeevaluationtorq2.a fixrate of a review request is defined as a ratio of the number of fixed alarmsoverthenumberofdetectedalarms intherequest.wecollectedfixratesfromwholereviewrequestswhichhaveoneormore alarms e.g.typosandpotentialdefects overtheentireperiodafter applying crb.
regarding efforts ofreviewers we collected all reviews written by reviewers for one year.
by calculating the number of reviewsandlengthsofstringsineachcomment wetriedtoobtainafinding on whether there are significant changes between before and after crbhas been adapted.
review requests were categorized into two groups.
the first group contains review requests thathave at least one review comment written by crband the second group does not.
we measured the average number of review comments per week.averagestringlengthsofreviewcommentsfromthesame reviewerswerealsocalculated.medianvalueswereusedforaverage tomitigatedatabiasesbyoutliers.weperformed pairedsamplettestbetweentwogroupstoanswerrq3.tocollectenoughdata we targetedreviewers whohave createdcode reviewsinboth groups for more thantenweeks.
.
effectiveness of codereview bot we conducted a survey from developers in samsung electronics to understand the satisfaction on crband to see the effects of the automation.total1 108contributorswerechosenfromprojectswhich are using crband questionnaires about satisfaction effectiveness andexpectationof crblistedintable1weresenttothem.from respondents responses have been collected and the response rateis .
.
table responses to questionnaires q1.i msatisfiedwithadapting code review bot to myprojects.
strongly agreeagree neutral disagree strongly disagree .
.
.
.
.
q2.code reviewbot helps to reduce time andeffortin code review.
strongly agreeagree neutral disagree strongly disagree .
.
.
.
.
q4.code review bot helpsto improve codequality .
strongly agreeagree neutral disagree strongly disagree .
.
.
.
.
table2showsresponsestoquestionnairesaboutthesatisfaction withcrb.
for a question about theoverallsatisfaction q1 .
of developers replied positive feedback.
on the other hand only .
ofdevelopers answerednegative opinions.
next .
respondents agreed that crbis helpful to reduce codereviewtimeandeffort q2 andonly3 .
disagreed.forthe detailedquestionabouttheefficiency q3 .
reviewersthought thatcrbreducesabout10 to30 oftheirreviewtimeand7 .
of them answered to of the review time might be reduced.
.
votedthatlessthan10 oftherevieweffortcouldbereduced bycrb.
in conclusion more than of respondents agree that crbhelps to save or more efforts in code review.
next q4 asked about the effect of crbon the code quality and .
of respondentsansweredpositive feedback.
1403understandingautomatedcode reviewprocessanddeveloperexperience in industry esec fse november14 singapore singapore 60finding defects reducing review effort measuring software metrics enhancing maintainability communication others a expected impact of code review automation 50potential defect typo coding style architecture test coverage reviewability b most effectiveservices figure expectation andservicesusage from the result we can make a conclusion that developers in samsung electronics are adapting crbwith a large amount of satisfaction.
especially reviewers agree that crbmay efficiently reduce code revieweffortsandimproves the code quality.
wecollectedadditionalresponsestoinspectdevelopers expectationstoacodereviewautomationandtheirusagepattern.bacchelli and bird showed that developers expect defect detection code improvement andfindingbettersolutionsfromthecodereview and wessel et al.
found that developers are also willing to get code review metrics and additional information such as analysis results without having to go to another tool followed by reducing maintenanceeffortfrom acode reviewautomation tool .
respondentsexpectedseveralbenefitsfrom crb q5 aslisted infigure .
we can see that similar results have been shown with priorstudies and crbcoversmanypartsofdevelopers expectations.finally developerschoosethemostusefulservices q6 inthe followingorder potentialdefects typo codingstyle architecture maturity andtest coverage .
responses indicate that developers and reviewers are satisfied with code review automation in quality assurances andmaintainability.
rq1.
more than developers are satisfying with crbespecially in the context of code quality improvement.
most of them feel that about of code review effort may be reducedwiththe helpofcode reviewautomation.
.
motivating quality improvementby automation regardingrq2 weperformeda quantitativeanalysis oncodefixes related to defects and alarms found by crb.
by answering about thequestion whether developersaremotivatedbyautomationor not we maysee the attractioneffectof crb.
table3and4showfixratesoftyposandpotentialdefectsfound during a month august .
fix rate of typos from swarm istable fix rateoftypos system fixed found fix rate found fix rate github .
.
swarm .
.
gerrit .
.
total .
.
found adjusted detected typocounts fix rate adjusted fix rate .
and the rate from gerrit is .
.
on the other hand fix rate from github is only .
requests over requests contain typosdetectedby crb.
wefoundthatdeveloperstendtoskipthere executioninthecase oftypo.developersdonotfeelanecessitytoperformtypochecking again because fixing the alarms are easy clear and there will be littlepossibilityofintroducingsideeffects.however sincepotential defectsdetectedbyacertainstaticanalysistool developersareused to explicitly run crbagain to confirmthe result from the tool.
to complement the difference among review systems and services we filtered out analysis results when crbwere executed just onceinareviewrequest.found andfixrate oftable3indicate the adjusted total number of typo and the adjusted fix rate respectively.
adjusted fix rate of github is .
but adjusted fix rate of the other review systems are lower than github.
for all the review systems we found that at least half of typo detected requests were fixed.
table fix rateofpotential defects system fixed found fix rate found fix rate github .
.
swarm .
.
gerrit .
.
total .
.
found adjusted detected typocounts fix rate adjusted fix rate inthecaseofpotentialdefects theadjustedfixrateofgithub swarm and gerrit are .
.
and .
respectively.
theaspectissimilarwiththecaseoftyposbutadjustedfixrates are higher than values of typos.
the adjusted fix rate of github showsveryhighvalueof95 .
.thatis developersalwaystrigger crbagain after they fixthe potentialdefects.
rq2.
developers are strongly motivated to improve code quality from crb.
more than defects andwarnings are immediately fixedbydevelopers.
.
encouragingreviewers to investigate rq3 we collected two kinds of data average counts of code review comments by the weekly and average lengthofcomments duringayearfromseptember2020toaugust .weperformedastatisticalhypothesistestingbyusingthedata asasampleandestimatethe fluctuationsofthemeanofthevalues.
wesetupanullhypothesis h0 andanalternativehypothesis h1 as follows 1404esec fse november14 singapore singapore hyungjin kim yonghwi kwon sangwoo joh hyukin kwon yeonhee ryou andtaeksu kim h0 after adapting crb there is no difference in the code reviewsize.
h1 after adapting crb there is asignificant differencein the code reviewsize.
apaired sample t test with confidence level was used for the hypothesistesting.
table differences incodereview after applying crb a review sizemetrics system by n 0 0 1 1 github c .
.
.
.
swarm c .
.
.
.
gerrit c .
.
.
.
github l .
.
.
.
swarm l .
.
.
.
gerrit l .
.
.
.
c by number of reviewcomments l by string length of reviewcomments 0 0 beforeusing crb 1 1 afterusing crb b paired differences system by pdm pdsd ci t p github c .
.
.
.
.
.
swarm c .
.
.
.
.
.
gerrit c .
.
.
.
.
.
github l .
.
.
.
.
.
swarm l .
.
.
.
.
.
gerrit l .
.
.
.
.
.
c by number of reviewcomments l by string length of reviewcomments pdm pdsd meanand standard deviation of paired differences p .
p .
table 5shows the paired sample t test result of the difference in means between before and after adopting crb including medians of average comment counts by weekly and medians of comment lengthsbyreviewers.onlyonehypothesis h0canberejectedfor all review systems swarm length case.
in other words except the one case there are no significant differences whether crbis appliedornot.
table6isadetailedresultforreviewsystemservers two github servers four swarm servers and two gerrit servers.
interestingly abouthalfofallcasesreject h0.allrejectedlcases haveapositivet value.thatis adapting crbaffectsreviewersto writelongercomments.
actually one of the main reasons why average counts of review comments changed is infected by policies what kinds of activitiesshouldbeperformedduringthecodereviewphase ofeach development division.
regardless of adapting crb reviewers may review code more and more when any activities are conducted for them.table6 differences in code review after applying crbfor each review system server system by npdm pdsd t p gh1github c .
.
.
.
gh2github c .
.
.
.
sw1swarm c .
.
.
.
sw2swarm c .
.
.
.
sw3swarm c .
.
.
.
sw4swarm c .
.
.
.
gr1gerrit c .
.
.
.
gr2gerrit c .
.
.
.
gh1github l .
.
.
.
gh2github l .
.
.
.
sw1swarm l .
.
.
.
sw2swarm l .
.
.
.
sw3swarm l .
.
.
.
sw4swarm l .
.
.
.
gr1gerrit l .
.
.
.
gr2gerrit l .
.
.
.
c by number of reviewcomments l by string length of reviewcomments pdm pdsd meanand standard deviation of paired differences p .
p .
rq3.
we can not say that crbreduces code review effort dramatically.some development divisionshows significant differences in the code review size but the others do not.
reviewers usually tend to affect by the policies and development release cycle of their development division more than the automation.
discussion and threats to validity although crbprovides unified interfaces for numerous review systems variancesinrendering review commentsbyeachreview system are still remain.
reviewers might be more attracted by a prettywrittenreviewcommentwithmarkdownorhtmlmarkups.
reactivenessfromgithubmaybehigherthanotherreviewsystems becausetheyonlyallowaplaintextorasimplemarkup.itwould beaninterestingresearchtopiconwhatkindsofdifferencesamong reviewsystemsarisebecause of the presentation divergence.
thereisaninternalvalidityinmeasuringthequalityimprovement motivation by crbat section .
.
in this study we compared thechangeofdetecteddefectcountsafterapplying crbtoshow howeffectively crbattracteddevelopers butdevelopersofsome projects already use several kinds of static analysis tools themselves.
thus the evaluation results may not reflect the direct effect ofcrbintheviewofqualityassurance.differentenvironmentsand buildsystemsofeachprojectsmakeobstaclestoinvestigatehow many developers start to use code analysis tools newly not crb.
nevertheless we still believe that crbsuccessfully attracts quality improvement of source code because the convenience of crbobviouslyaidsdeveloperstoapplyanalysistoolsfortheirprojectsno matter whether they have already run some tools themselves or not.
alotoffactorssuchasfunctionalitiesofacertainreviewsystem development process policies of a team release plans or human resourceorganizationmightinfluenceonthequalityofsourcecode 1405understandingautomatedcode reviewprocessanddeveloperexperience in industry esec fse november14 singapore singapore or code review manners.
the fact causes a threat to the internal validity.inthestudycase wegathereddatawithaconsideration onnotonlyreviewsystemsbutalsodevelopmentteamsandbusinessdivisions.respondentsareselectedfromvariousdevelopment teamsfrommiscellaneoussoftwaredomainstoovercomethethreat.
nevertheless it is not able to guarantee that all research results in section are not biasedbecause ofthe factors.
the architecture of crbinsubsection .
is generic and abstractedenoughtobeextendedexternally.despitetheextensibility of the architecture it is not easy to directly apply crbto open sourceprojectsorotherindustriesratherthansamsungelectronics.
available services and schedulers need to be selected and built basedontheconsiderationoftheorganization sculture policy and circumstance.
besides as feedback from users also may be vary becauseneedsofeachdevelopteam.thecasestudyfromsamsung electronics may differ to the open source communities or other industrialcases.
related work static analysis is an efficient method to find out defects and applying static analyzers in review automation is effective to improve productivity.
singh et al.
showed that about of code review comments can be covered by static analysis tool .
from the caseofgoogle sadowskietal.provedthatprovidingstaticanalysis results to developers in the code review phase is better than the testphasebecausedevelopersarenotwillingtomodifymatured code after testing and release .
facebook also applies a static analysisinferin the review process .
developers on facebook were opened to fix the alarms and of them were solved .
static analyses are essential for code review automation and code review bot has been foundedonstaticanalyses.
code review automation named a bot is also widely adopted in open source communities .
balachandran suggested reviewbot a review automation system based on static analyses and successfullyshowedthefeasibilityofadaptingtotherealworld .in this study we developed code review bot that provides several services based on the static analysis testing and fix suggestions andfoundits usefulnessinthe industrialarea.
googleimplemented tricoder anovelsourcecodeanalysisframework and melted it into their workflow .
microsoft also combines several quality assurance tools into a framework and performsanalysiswith codeflow .rosie isafullyautomated review assistant that traverses whole repositories by itself and cleansupthecodebaseandfixesdefectsautomaticallyingoogle.
code review bot takes a role of quality assurance automation in samsungelectronicsbasedondevelopers reviewrequests.
defect prediction is one of the most important next research topics ofcode review bot .jitbot successfully showed the feasibilityofjust in timedefectprediction inpracticebyadapting into github.
one of the most interesting and impressive contributions of jitbotis providing reasons to users with the help of explainableartificialintelligence .explanationand description ofapredictiontoend usersareimportantfortoolsaimingatreal industryareas.forthisreason thestudygaveusaninspirationnot only in the preparation of future work but also in the design of the userexperience of code review bot .several studies on review automation using machine learning havebeenperformed.asthanaetal.suggestedanovelreviewerrecommendation automation based on a balance between commit and reviewhistory .sainiandbrittoshowedacaseinericssonon theapplicationofreviewrequestprioritizationbasedonamachine learning .
tufano et al.
experimented with deep learning techniques in the context of automating reviewer recommendations and program synthesis to assist reviewers .
state of the art techniquesindicateadirectionofthenextstepof codereviewbot .
conclusion we introduced a unified code review automation system code review bot .
we have achieved extensibility and scalability for intricate various anddiversedevelopmentenvironmentsinsamsung electronics by using our abstract review system.
we have been operating the system over two years for more than projects andsharedsomelessons learned.
we investigated both quantitative and qualitative analyses on satisfaction usage andeffectiveness.mostofthe developerswere satisfiedwith codereviewbot .qualityassuranceserviceswerethe mosthelpfulone anddevelopersrapidlyandactivelyrespondedto more than60 ofreviews.
webelievethatthecodereviewautomationhelpsnotonlyforthe quality of source code but also for the rapid and worthwhile code review activities of reviewers.
we plan to study on the correlation amongservices reviewsystems andusersreactions.wehopeto discoversomeinsightsformoreeffectivecodereviewinthefuture.
acknowledgment we would like to thank the anonymous reviewers yoonki song geunsik lim jaehyun yoo youil kim and joonbae park for their insightfulcommentsandfeedbackthathelpedimprovethepaper.
this work was supported in part by intelligent dev.
assistant quality tool development raj0122zz 35rf samsung research samsungelectronicsco.
ltd.