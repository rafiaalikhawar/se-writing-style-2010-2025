understanding the response to open source dependency abandonment in the npm ecosystem courtney miller courtneymiller cmu.edumahmoud jahanshahi mjahansh vols.utk.eduaudris mockus audris utk.edubogdan vasilescu vasilescu cmu.educhristian k astner carnegie mellon university pittsburgh pa usa university of tennessee knoxville tn usa abstract many developers relying on open source digital infrastructure expect continuous maintenance but even the most critical packages can become unmaintained.
despite this there is little understanding of the prevalence of abandonment of widely used packages of subsequent exposure and of reactions to abandonment in practice or the factors that influence them.
we perform a large scale quantitative analysis of all widely used npm packages and find that abandonment is common among them that abandonment exposes many projects which often do not respond that responses correlate with other dependency management practices and that removal is significantly faster when a package s end of life status is explicitly stated.
we end with recommendations to both researchers and practitioners who are facing dependency abandonment or are sunsetting packages such as opportunities for low effort transparency mechanisms to help exposed projects make better more informed decisions.
i. i ntroduction many widely used open source packages serve as digital infrastructure for countless applications downstream .
yet much of this infrastructure is maintained by a small number of overburdened and underappreciated often volunteer developers who may disengage at any point .
maintainers often disengage for commonly occurring reasons such as losing interest or switching jobs.
more often than not when that happens nobody else steps up and the package becomes fully abandoned .
this suggests that dependency abandonment will always be a risk that users of open source infrastructure will be exposed to.
and indeed developers worry about abandonment e.g.
because of the increasing incompatibility with other changes and fear of not receiving security patches to the point that some organizations have explicit policies to restrict the use of end of life software components.
the tension between this widespread reliance on open source and the lack of certainty surrounding ongoing maintenance efforts is at the heart of the question of open source sustainability .
despite the widespread concerns surrounding dependency abandonment we know very little about its prevalence or how developers react in practice.
research has primarily focused onpreventing orpredicting abandonment by reducing disengagement or improving onboarding rather than studying what happens when abandonment occurs.
a key exception is our recent interview study with developers where we studied their perceptions of abandonment but without quantifying the prevalence or reactions in practice .
.
.
.
.
.
delay in months survival probabilityabandonment update security patchfig.
.
survival probability for event dependency event is not resolved w.r.t.
the date of event occurrence within dependent project s lifetime.
in this paper we report on a large scale quantitative study exploring the prevalence of impact of and response to the abandonment of widely used packages in the javascript npm ecosystem.
specifically we design an approach to detect abandonment at scale collect a large sample of dependent projects that were exposed to abandonment across all of github and observe their responses to abandonment.
we compare reactions to abandonment with other dependency management practices of updating dependencies with and without known vulnerabilities.
finally we use statistical modeling to investigate what factors impact likelihood and speed of abandoned dependency removal.
even with a conservative operationalization we find that the abandonment of widely used packages is prevalent with of widely used packages becoming abandoned within our sixyear observation window.
those abandoned packages expose many dependents but average direct exposure even for widelyused packages is lower than might be expected suggesting that collaborative responsible sunsetting strategies might be feasible.
developers seem to care about abandonment of exposed projects remove the abandoned dependency which is roughly comparable with other dependency management practices such as installing updates cf.
fig.
but reactions to abandonment tend to be delayed in fact removal of abandoned dependencies strongly correlates with other good development practices including regular dependency updates.
finally making the abandonment status of a package clear can help exposed projects react faster higher chance of reaction on average at any point in time suggesting opportunities for low effort transparency mechanisms to help exposed projects make better more informed decisions.
overall our results suggest many opportunities to foster responsible useof open source for developers and responsible sunsetting for maintainers.
in summary we contribute a detailed methodology for detecting abandoned packages at scale a quantification of the prevalence of widely used package abandonment in the npm ecosystem a large scale analysis of the response to abandonment of exposed projects across github and a comparison to other dependency management practices a logistic regression model illustrating which dependent project characteristics impact the likelihood of removing abandoned dependencies and a survival model demonstrating the impact of providing explicit notice of abandonment on dependent project removal rates.
ii.
r esearch questions and related work reusing open source frameworks packages and other abstractions forms software supply chains where packages rely on upstream dependencies created and maintained by others that often have their own dependencies creating the chain.
such reuse speeds up development but also brings risks downstream.
dependencies may introduce breaking changes in an update become incompatible with other dependencies contain security vulnerabilities or even get attacked through supply chain attacks .
a. how big is the abandonment problem?
what we know.
package abandonment is an understudied risk of open source dependencies.
developers worry about abandonment e.g.
online particularly from a security perspective since an abandoned package may no longer receive security patches .
our recent interview study also revealed developers frustration that they will not receive the new features or support they had hoped for that the package will become increasingly less useful as requirements and the environment change and that the package will become incompatible with other evolving infrastructure .
what we don t know.
we have very little data about how prevalent abandonment is among widely used packages or how many downstream projects are exposed.
sonatype s state of the software supply chain report finds that .
of open source packages that were maintained the prior year no longer qualify as maintained that year but it is not clear how this data was collected and whether such results generalize to widely used packages that might be considered critical digital infrastructure.
quantifying the frequency of abandonment and the resulting exposure downstream is needed to understand the scope of the problem leading us to ask rq1a how prevalent is abandonment among widely used npm packages?
rq1b how many open source projects are exposed to abandoned dependencies?
b. what are downstream developers about abandoned dependencies?
responsible use what we know.
dealing with abandoned dependencies is a facet of dependency management .
dependency managementpractices especially around versioning and breaking changes and security patches have been extensively studied and are considered highly important .
research suggests that generally keeping dependencies up to date correlates with better security outcomes .
recently the us white house even mandated the tracking and documenting of dependencies using software bill of materials sbom for software sold to the government .
a central theme in much of the empirical research on dependency management is that the vast majority of open source projects rarely or never update dependencies even those with known security vulnerabilities .
for example kula et al.
studied dependency updates across github projects and found that the majority tend to not update dependencies even when security vulnerabilities are involved with .
of projects having outdated dependencies.
similarly decan et al.
estimated that it takes almost months for of projects to install a patch for a vulnerable dependency.
there have been many attempts to improve dependency management practices.
software composition analysis sca tools such as dependabot sonatype andsnyk track dependencies and their updates and alert developers of known vulnerabilities.
studies show that using such sca tools can improve dependency management outcomes .
the adoption of sca tools is widely seen as a best practice but these tools suffer from many problems especially high false positive rates and resulting notification fatigue .
furthermore semantic versioning with floating dependency versions enables automatic installation of patches but this practice is controversial since it can also introduce risks of breaking changes and deliberate supply chain attacks .
what we don t know.
little is known about how developers respond to dependency abandonment and how dealing with abandoned dependencies compares to other dependency management practices.
tools to help with dependency abandonment are rare 1to the frustration of practitioners .
generally developers can choose to continue using abandoned dependencies if they do not yet pose actual problems or they can take various actions that all involve removing the dependency and replacing it with something else.
in this paper we quantitatively study at scale how often and how fast developers respond to abandonment and how or whether this differs from other dependency management practices rq2a how often and how fast do dependent projects remove abandoned open source dependencies?
rq2b how does this compare to how projects update dependencies in general?
rq2c how does this compare to how projects update dependencies with security vulnerability patches?
we know little also about how individual developers make decisions about removing abandoned dependencies.
our in1exceptions are fossa s risk intelligence service currently in beta and a recent research prototype by mujahid et al.
.
2terviews suggest that some developers are very regimented about removing abandoned dependencies sometimes driven by policies requiring it or a feeling of responsibility while others prefer to wait for something to break .
it is unclear whether the developers that attend to abandoned dependencies are the same ones that follow good dependency management practices and possibly good development practices in general.
thus we explore whether how developers deal with abandonment associates with other development practices and project characteristics rq3 what dependent project characteristics are associated with removing abandoned dependencies?
c. what can maintainers do?
responsible sunsetting what we know.
in open source developers make many decisions based on publicly available information without explicit coordination .
this includes complex inferences like choosing which developers to follow or hire and which projects to depend on .
a lack of action is often attributed to a lack of awareness e.g.
of surveyed developers reported not having updated dependencies with known security vulnerabilities because they were unaware of the vulnerability .
maintainers can shape how they present their packages to influence the actions of their users and contributors such mechanisms are often studied in the context of signaling theory and nudging theory .
for example developers may include badges in their readme to signal practices and expectations such as signaling that a project finds rigorous automated testing and frequent dependency updates important which may then shape the behavior of contributors .
such nudges can be incorporated in the design of tools e.g.
to accelerate the completion of overdue pull requests .
in the cran ecosystem volunteers explicitly coordinate to inform their dependents within the ecosystem about breaking changes but this practice is rare otherwise.
what we don t know.
little is known about what maintainers can do as their final actions to help the community when they decide to stop maintaining a package.
developers make inferences about the abandonment status of projects with all kinds of information e.g.
the date of the last commit recent issue discussions forum discussions yet they often struggle to determine conclusively whether a project is abandoned .
we conjecture that even simple actions like publicly announcing that a project will no longer receive maintenance can shape how affected developers respond to abandonment.
as a starting point to explore responsible sunsetting strategies we ask rq4 how does announcing the abandonment status of a package impact how fast dependent projects remove the abandoned dependency?
iii.
d etecting open source package abandonment to study abandonment at scale we first design two conservative heuristics and a manual validation process for the heuristics.
specifically we look for cases of abandonment witha clear abandonment event with the evidence coming from either documentation or metadata explicitly indicating a package will not receive further maintenance explicit notice abandonment or shifts in activity patterns from regular maintenance to not receiving any development activity for two years activity based abandonment .
we intentionally pursue a high precision detection strategy detecting real and clear abandonment events while accepting lower recall missing some cases of abandonment e.g.
projects that slowly became inactive over an extended period of time .
this will result in an undercount in rq1 scope of abandonment but increases confidence in analyses based on our data rq2 rq4 .
a. explicit notice abandonment we identify packages as abandoned when developers explicitly express their intention to no longer maintain them.
first we manually searched for explicit signals of abandonment e.g.
github archive flag through the repositories of packages that had been likely abandoned based on long periods of observed inactivity.
once we identified some explicit signals we then searched for additional packages with those signals verified the precision of the signal and used the same process to search for additional signals of abandonment.
we repeated this process until we found no additional reliable signals.
in the end we used the following three signals github archive flag in github introduced the ability to archive a repository .
archived repositories are readonly and display an archived banner on github.
we consider a package as abandoned when its github repository is archived and use the date of archival shown on github as the date of abandonment.
no maintenance intended badge some developers declare their intention not to provide maintenance with a no maintenance intended badge in their readme file .
we consider a package as abandoned if its github repository has a readme file containing the badge and use the date of the commit introducing the badge as the date of abandonment.
other abandonment description in readme finally developers can textually describe that their package has reached the end of its life in many ways in their readme file such as is no longer maintained .
we consider a package as potentially abandoned if the first lines of the readme excluding urls and code contains one of the following text fragments abandoned deprecated no longer maintained no longer supported or unmaintained fragments identified iteratively as described above .
we manually checked all matching packages that did not also have one of the other explicit notice signals.
we consider a package as abandoned if its repository s readme states so and use the date of the readme change that introduced this description as the date of abandonment.
if a package contained multiple of the above signals we used the earliest date as the date of abandonment.
2now npm also has a deprecation flag.
we did not include it in our analysis because it was introduced near the end of our observation window and does not record the date when the flag was added.
3b.
activity based abandonment detecting abandonment from a package s activities is nontrivial some packages may be considered feature complete requiring very little maintenance or changes to the code.
therefore we seek cases where there is a clear shift from regular repository activity levels to a sharp drop indicating abandonment.
conservatively we look for years of regular maintenance operationalized as total events from contributors per year including commits issue comments and issue close events representing the pre abandonment phase followed by years with no activity from contributors representing the abandonment phase.
this provides a relatively clear abandonment point enabling us to observe reactions downstream.
we consider the date of abandonment to be the time of the last commit i.e.
the beginning of the abandonment phase since that was when the activity dropped off.
we experimented with different heuristics and thresholds for time and permissible residual activity and arrived at the design above after reviewing how related work has operationalized abandonment and exploring activity patterns before and after explicit notices were added to a sample of packages meeting our explicit notice heuristic.
we repeatedly tested the robustness of our heuristic with different thresholds manually validated the accuracy on a sample of packages and determined that allowing even a small amount of residual activity e.g.
commits per year introduced too many false positives of feature complete but still sporadicallymaintained packages we found similar problems with a smaller observation window.
we found that a strict threshold of no residual activity for years had an almost perfect precision while still finding many abandoned packages.
iv.
rq1 a bandonment prevalence and exposure we begin by quantifying the frequency of abandonment among widely used packages in npm .
we focus on widelyused packages rather than including the many more that never gained traction as a way to focus on digital infrastructure.
we then estimate exposure of abandonment on projects in github that were active and depended directly on an abandoned package at the time of its abandonment cf.
fig .
we estimate exposure for all of github without restricting the analysis to popular or widely used projects because abandonment affects all kinds of users of open source whether they build popular libraries or applications or just maintain personal projects.
different users may have different views and perceive different pressures and may even have policies requiring them to avoid end of life dependencies as we will explore later but abandonment and sustainability are important for all users of open source who plan to maintain their own project.
users of open source dependencies who write closedsource applications are obviously not captured by our analysis exposure rates should be considered as a lower bound estimate.
a. research methods we identify abandoned packages and exposed projects with data from npm github and world of code .
we restrictour analysis to abandonment in a six year observation window from january to december for which we can collect all relevant data at scale and which starts after npm has been established and widely used.
identifying abandoned widely used npm packages.
to scope our analysis to widely used packages that can have a substantial impact on the ecosystem if abandoned we consider only the of npm packages in that had at least downloads in any month of our observation window per npm download statistics .
we use downloads rather than reverse dependencies since they capture both public and private use of packages.
next we excluded packages because they shared a github repository with other packages and we cannot clearly attribute the repository level activity data e.g.
issues to a single package this is common when a repository contains the source code for multiple related packages sometimes called a project foundry ormonorepository .
we also filtered out packages that never had more than total activities by contributors cf.
sec.
iii b in any year of our observation window they may have been abandoned before our observation window or have low activity levels indistinguishable from abandonment.
after filtering the dataset contains widley used npm packages.
we then identify which of these packages were abandoned and when as described in sec.
iii using both the explicitnotice and activity based detection approaches over the entire observation window.
because the activity based abandonment definition requires two years of activity observation before abandonment and after it can only occur in the two middle years of our observation window whereas explicit notice abandonment can occur in all six years.
identifying exposed dependents.
next we identify dependent projects across all of github not just npm packages that were directly exposed to abandonment.
in contrast to prior work on dependency management we explicitly consider all projects rather than just reverse dependencies within npm to capture the impact on open source developers broadly not just on other package maintainers.
searching across all of github imposes substantial challenges due to its scale and limitations of its search apis.
instead we use world of code woc to find all dependents of the detected abandoned packages.
woc is a large scale analysis infrastructure that indexes and curates nearly all public open source code intended for research studying software supply chains we use version v the latest at the time of this analysis.3specifically in addition to content of the files commits and trees extracted from all repositories woc also parses each version of every file or blob using git terminology .
projects that rely on npm packages use specific file named packages.json to specify all direct dependencies.
as a result for each commit modifying packages.json file woc provides a list of upstream dependencies as b2pkg blob to3github itself has a dependency insights feature.
however the functionality is closed source and poorly documented and our initial experiments showed too many incorrect dependency entries for it to be trustworthy.
4population of all widely used npm packages calculate time to dependent project response to eoi snapshot of project at time of exposure to abandonment identifying dependent projects exposed to each poi identifying packages of interest poi who experienced each event of interest eoi sample of widely used packages w vulnerability patch release search world of code to identify all github projects that ever depended on each poi and the subset that depended on poi at time of eoi occurence sample of widely used packages w normal update release sample of widely used abandoned packages sample of dependent projects exposed to abandonment event sample of dependent projects exposed to normal update release event sample of dependent projects exposed to vulnerability patch release event descriptive statistics and statistical inference rq1 kaplan meier survival curve comparing time to response for each eoi rq2 logistic regression modeling relationship b w project characteristics and likelihood of removal rq3 survival model modeling how type of abandonment impacts time to removal rq4 project data from github api and dependent project s repository git historyfig.
.
overview of our data collection and analysis package map.
we queried woc using indexes b2c blog tocommit c2p commit to project and b2pkg to retrieve all github projects excluding forks that ever depended on any of the abandoned packages in a package.json file in their root directory.
due to the vast number of candidate dependent projects returned by woc usually millions and the nontrivial analysis costs we perform the analysis on a large sample of randomly selected candidate dependents and extrapolate exposure rates to the entire population statistically.
we further checked each candidate dependent project in our sample by cloning the project s repository and analyzing the dependencies at the time of abandonment.
we use the same step to also detect whether the repository had any commit activity after the time of abandonment.
this allowed us to identify the subset of dependent projects that were actively depending on an abandoned project at the time of abandonment who also had at least one commit after abandonment occurred to ensure they were not entirely inactive themselves .
limitations.
as discussed in sec.
iii construct validity for abandonment is difficult to establish.
despite best efforts to design and validate meaningful but conservative heuristics for detection we may not capture all notions of package abandonment e.g.
adding notices in an external blog or entirely stopping maintenance after years of minimal maintenance activity.
for the purpose of this study actions taken as a result of abandonment we designed our heuristics to be conservative hence our abandonment numbers should generally be seen as a lower bound.
additionally because there are many ways to define abandonment and because we consider multiple definitions of abandonment there could be packages that meet one definition of abandonment while not meeting another.
for example the maintainers of a package that qualifies as explicit notice abandoned because they posted a note in the readme stating the package will no longer be maintained could post minor patches down the line potentially making the package not qualify as activity based abandoned.
even packages with long periods of inactivity and end of life notices may be revived years later .
we may also miss exposed dependent projects that have since been deleted and have not been not archived in woc .
inaddition our analysis relies on timestamps of commits which are usually but not necessarily reliable.
in addition to the direct exposure we measure here there may be instances of indirect exposure where none of the immediate upstream packages are abandoned but at least one of these packages depends directly or transitively on an abandoned package.
we chose not to include these transitive dependencies since developers tend not look beyond direct dependencies see e.g.
nor do they have much power to change projects further upstream on such complicated issues as replacing functionality.
finally our results are specific to heavily downloaded packages in npm within our observation window.
abandonment may be more common among less downloaded packages and dynamics may be different in other ecosystems.
our study cannot capture the behavior of developers using open source dependencies in closed sourced projects.
b. results of the widely used npm packages in our dataset we identified as becoming abandoned during our six year observation window.
abandonment events were distributed fairly uniformly across the observation window without clear patterns or peaks.
in addition abandoned packages were similar to non abandoned packages e.g.
in terms of peak downloads and stars .
.
.
.
.
.
peak num downloadspkg.
density .
.
.
.
.
num starspkg.
densitynon abandoned abandoned fig.
.
the distribution of peak download counts during our observation window and current star counts march for both non abandoned and abandoned widely used npm packages are similar.
our relatively large sample size for downstream dependent projects affords high generalizability approximately .
margin of error at confidence level.
assuming the same 5abandonment rate of we estimate4that the abandoned packages exposed github projects not including forks who had an abandoned package as a direct dependency at the time of its abandonment average projects exposed per abandoned package .
of those projects we estimate that 624github projects had any commits after exposure i.e.
they were not abandoned themselves at the time and might need to respond.
the directly exposed and subsequently active projects vary widely in their characteristics.
they include many small projects including hobby projects and personal websites but also popular libraries and end user products.
about half have no stars on github but have or more stars.
key insights of the widely used npm packages were abandoned during our observation window.
we estimate that dependent projects on github still active at the time of abandonment were directly exposed.
v. rq2 r esponding to abandonment we detect how often and how fast dependent projects exposed to the abandonment of widely used packages remove the package after abandonment.
essentially all strategies to respond to abandonment that do not involve preventing it e.g.
contributing financially taking over maintenance involve removing the dependency e.g.
replacing it with an alternative switching to a fork copying the code removing the functionality .
additionally we compare the response to abandonment to other established dependency management practices specifically to developer responses to updates of their dependencies with and without known security vulnerabilities.
a. research methods we detect responses to abandonment rq2a as well as responses to updates rq2b and security patches rq2c with the same three step research design we collect a set of events of interest among widely used npm packages package abandonment package updates security patches.
we identify active projects directly exposed to these events.
we determine whether and when the exposed projects subsequently responded by removing or updating cf.
fig .
to scale the analysis we randomly sample both a from the set of all possible events to analyze and b from the set of all exposed dependents for those dependencies.
note that we use a consistent approach to collect data for different dependency management practices rather than comparing our abandonment data against previously published results on other dependency management practices this allows for a direct comparison and avoids potential issues caused by the differences in research design and analyzed populations in past research .
4the estimates are based on candidate exposed projects retrieved with world of code from which we randomly sampled and analyzed .
among those we found exposed dependents to the abandoned packages of those had commit activity after exposure.removal of abandoned dependencies rq2a .
to analyze the removal of abandoned dependencies we rely on the data from rq1 namely the abandoned packages we identified and the sample of directly dependent projects that were active after the time of abandonment among the dependent projects we analyzed .
for each dependent we analyze their commit history after the abandonment event to measure whether and how long it took them to remove the abandoned dependency from their package.json file.
while the event must happen within our observation window ending in december we analyze subsequent reactions until a cutoff date of september 1st .
dependency updates after new package releases rq2b .
to establish a baseline of common dependency management practices we select a sample of package updates among the widely used npm packages from rq1 as events of interest.
specifically to generate a sample similar in size to abandonment we first identify all releases of widely used packages released within our six year observation window and then randomly sample of these releases making sure each is from a unique package.
for each update event we use the same search strategy with woc described in sec.
iv to detect candidate github projects that directly depended on the package of interest at some point in time.
we then analyze a large random sample of those candidate dependents using the same process described in sec.
iv to identify the subset that depended on the package of interest at the time of the update and who had had any commits after the event.
if the dependent uses floating version constraints patterns that match multiple versions e.g.
1. .
to match release .
.
and any later releases before .
.
that allowed them to automatically update at the time of the event we discard the dependency from our analysis as it does not require developer intervention to update the dependency.
this results in observations.
dependency updates after security patches rq2c .
as a special version of detecting responses to package releases we analyze responses to releases that patch known security vulnerabilities which are usually considered more urgent than other updates.
we identified package releases with known security vulnerabilities and corresponding package releases that patch the vulnerability using the osv database .
we select the first release that patches the vulnerability and its release date as the event of interest that is we study whether and how fast developers respond to the security patch.
we found packages among our set of widely used npm packages that had at least one vulnerable release and corresponding patch release within our six year observation window.
for each of these packages we randomly selected one patch release resulting in events of interest.
for each security patch release of interest we use the same search strategy with woc to detect candidate github projects that depended on the package of interest at some point in time.
we then analyze a large random sample of those candidate dependents identifying the subset that depended on a 6vulnerable version of the package of interest at the time of the event occurrence and who had had any commits after the event again discarding issues that were patched automatically due to floating version constraints.
this results in observations.
analysis.
to answer the research questions we use survival analysis which specializes in modeling time to event data and providing estimates of the survival rates for a given population .
survival analysis is designed to account for rightcensored data like ours where the occurrence of the event of interest is only recorded for cases that have experienced the event and for other cases their data is censored because a the event was not yet observed during the period of observation or b they withdrew from the study during the observation period.
in our study we consider a project to be withdrawn and therefore censored if it becomes inactive during our observation period which we operationalize using the date of its last commit .
additionally survival analysis can account for the fact that we can observe reactions for different periods of time for different events for earlier events developers had longer to react .
specifically we use the kaplan meier estimator which is a common non parametric statistic for estimating survival functions .
limitations.
to capture the reaction to average events we intentionally do not stratify our analysis by major minor patch release or vulnerability severity.
behavior may differ between different subtypes of events which is not the focus of our study.
similarly a security patch is not automatically urgent since the vulnerability may not be exploitable again our study only reveals average practices and does not set normative expectations.
finally our study does not capture the more nuanced behavior of floating dependency declarations when locking dependencies with npm in such cases updates matching the versioning pattern may not be fully automated excluding those cases helps us avoid ambiguity about what actions developers take but may miss some actions.
limitations from rq1 also apply.
b. results only of directly dependent projects with any development activity after the abandonment date ever remove the abandoned dependency before our cutoff date of in our sample the vast majority of dependent projects did not remove the abandoned dependency.
among dependent projects that removed the abandoned dependency the average time to removal is .
months.
consistent with past research we also observe that many developers do not update dependencies even those with security vulnerabilities only of in our sample respond to a random dependency update before our cutoff date with an average time to update of .
months and of in our sample install a patch to a security vulnerability with an average time to update of .
months.
we show survival curves indicating the percentage of dependent projects that react to package abandonment package updates and security patches respectively within a given timewindow in figure illustrating that security patches are installed at higher rates and faster than other updates and that developers react to abandonment generally at similar rates and with similar latency to random dependency updates.
note that survival rates in the plot are lower than what may be expected from past research because we censored projects if they became inactive during our observation window the lack of updates can often be explained by dependent projects becoming inactive whereas dependent projects that remain active for long periods of time after security patch release are much more likely to eventually update.
key insights the response rate for abandonment is similar to updates and lower than the rate for security patches.
vi.
rq3 c haracterizing responsive dependents next we study population level differences between the characteristics of projects that remove abandoned dependencies and those that do not.
a. research methods using our sample of dependent projects directly exposed to an abandoned dependency identified in rq1 we take a snapshot of each project at the time of exposure to abandonment operationalize numerous factors representing different project characteristics hypotheses h h6described below and use logistic regression analysis to model the relationship between project characteristics and the likelihood of removing the abandoned dependency.
hypotheses and variables.
specifically the binary response variable is whether the abandoned dependency was removed within two years of abandonment.
in addition we test hypotheses about the association between the following variables and the binomial outcome dependency count h .we expect that projects with fewer dependencies are less likely to remove abandoned ones.
such projects may pay less attention to dependency management in general and may thus do it less.
dependency management practices h .we expect that projects that manage dependency updates and security patches more actively are also more likely to respond to abandonment.
here we use two variables first we model whether there was evidence of software composition analysis sca tool use in the year before exposure i.e.
tool configuration files readme badges or commits by bots namely dependabot renovate greenkeeper snyk daviddm and gemnasium.
second we use the standard heuristic by zerouali et al.
to calculate the average technical lag of all the dependencies the project had at exposure excluding the abandoned one.
activity h .we expect that more actively developed projects are more likely to respond to abandoned dependencies 5as described above our results do not include dependents that can automatically update dependencies due to floating dependency version declarations.
this would account for an additional immediate random dependency updates and an additional immediate security patch updates also shown in corresponding survival curves in our supplementary material .
7because developers spend more time on the project overall.
we consider two variables first we calculate dependency churn i.e.
the total number of times the project changed any of its dependencies in the year before exposure.
second we collect the total number of commits in the year before exposure.
number of maintainers h .we expect that projects with more maintainers are more likely to respond to dependency abandonment because they have more capacity for maintenance and dependency management work.
operationally we count the number of contributors responsible for the top of commits in the year before exposure.
corporate involvement h .we expect that corporate led projects and projects with more corporate involvement may be more likely to respond to abandoned dependencies because they are more likely to follow explicit end of life policies and to explicitly allocate resources to dependency management than volunteer run projects .
operationally we check for the presence of commits made in the year before exposure by contributors using a corporate email domain using the list of corporate domains identified by spinellis et al.
.
governance maturity h .we expect that projects following governance best practices are more likely to respond to abandoned dependencies conjecturing that responsiveness to abandonment is also seen as a best practice.
in particular we consider six governance practices having a readme a license issue templates pull request templates contributing guidelines and a code of conduct in line with past research associating those with project success .
operationally for each project we start collect six binary flags indicating the presence files for each practice at the time of exposure.
we then compute a latent trait model to reduce the dimensionality of this dataset.
the model assumes that the dependencies between the six observed variables can be interpreted by a few latent variables.
the model with a single latent variable fit our data best confirming that the six indicator variables mostly capture one underlying construct.
finally we computed the continuous variable governancematurity representing the factor scores or ability estimates for the observed response patterns as an operationalization of this latent construct and used this variable in our subsequent modeling.
for all of the above variables we collect the relevant data from the github api or from the repository s git history.
where possible we follow measures developed and validated in past research.
we manually validated the construct validity of each factor using a sample of projects to avoid systematic errors by manually verifying that the factor seemed to indeed capture the intended data accurately.
modeling considerations.
before estimating the model we took several steps to ensure model quality and validity.
first after manually examining the distribution of each variable we removed extreme outliers for variables with highly skewed distributions top or fewer points to reduce the risk of high leverage points biasing our regression estimates.
we further removed repositories we failed to clone likely deleted since and we failed to compute the average technical lagfor taking our total sample size down from to after both steps.
next to reduce heteroscedasticity we logtransformed the numeric variables as needed fig.
indicates which variables were log transformed .
the model also includes control variables for repository age controls for the project s development stage and software evolution and size controls for the size of the codebase measured in bytes .
we further computed the variance inflation factors for each variable to check for presence of multicollinearity checking to ensure each was lower than a common threshold within the statistics community none of the variables exceeded the threshold.
to evaluate the model s overall goodness of fit we used mcfadden s pseudo r2measure .
finally we consider model coefficients significant if they are statistically significant at the .05level.
for each variable we report the exponentiated log odds regression coefficient so as to report the transformed odds ratio to aid in interpretation i.e.
the factor by which a unit increase in the predictor increases the odds of the outcome occurring if the odds ratio is greater than or decreases by if the odds ration is less than and the significance level p value cf.
fig.
.
limitations.
as is usual for this kind of work despite the careful development and validation described above the operationalized factors in our model can only capture part of the concepts they are intended to represent and measure.
for example we operationalize governance maturity by detecting six files in the repository while grounded in prior research and supported by our latent trait factor analysis it likely cannot fully capture the concept of maturity.
there may also be additional dependent project characteristics and unobserved confounding factors that we did not include in our model.
our findings should not be considered an exhaustive list but rather a list highlighting some of the characteristics that areconstructive when modeling the removal of abandoned dependencies.
hence as usual care should be taken when generalizing our results beyond the studied measures.
or .
or .
or .
or .
or .
or .
or .
or .
or .
governance maturityhas corporate commitstechnical lag log num commits log num maintainers log project age log project size log dependency churn log uses dep.
mgmt.
tools odds ratio estimate p .
p .
p .
likelihood of removing abandoned dependencies fig.
.
summary of the multivariate logistic regression modeling the likelihood of removing an abandoned dependency within two years post abandonment.
confidence intervals horizontal lines for the odds ratios or that do not intersect indicate variables with statistically significant effects.
8b.
model results regression results in fig.
show five significant effects.
one is a strong positive effect of governance maturity supporting h6 for projects with one standard deviation higher governance maturity score we expect to see about increase in the odds of removing the abandoned dependency.
the model also shows that higher technical lag is on average statistically significantly negatively associated with the likelihood of removal supporting h2 .
projects with higher dependency churn are generally more likely to remove abandoned dependencies supporting h3 .
to demonstrate the interpretation of the exponentiated regression coefficient for every factor e .
increase in the amount of dependency churn note the log transformation the odds of removing the abandoned dependency for the average project in our sample multiply by .
holding all else constant.
additionally as expected we observed a significant effect for both control variables project age andproject size .
the explanatory variables num dependencies h1 use of dependency management tools h2 num commits h3 num maintainers h4 and num corporate commits h5 were not significant in the model meaning we have insufficient evidence to reject the null hypothesis that these factors do not impact the likelihood of abandoned dependency removal.
key insights projects that are more mature have higher dependency churn and keep more up to date on dependency updates are more likely to remove abandoned dependencies within two years.
vii.
rq4 i nfluence of announcing abandonment a. research methods rq4 extends rq2 and rq3 using the same data as rq2 except we model the distinction in responses to packages that were explicitly declared as abandoned explicit notice as compared to packages that just stopped maintenance activitybased as introduced in sec.
iii.
similarly to rq2 we again apply survival analysis to model the time to removal of the abandoned dependencies except now we use a multivariate cox proportional hazards model to jointly control for all factors modeled in rq3 see sec.
vi a for factor definitions .
cox regression is commonly used in medical research for modeling the association between the survival time of patients and one or more predictor variables.
in our case we use cox regression to estimate the effect of an explicit notice of abandonment on the rate of dependency removal events happening at a particular point in time i.e.
the hazard rate.
b. results we observe after controlling for all the factors we hypothesized are associated with removing abandoned dependencies in rq2 that there is a statistically significant relationship between the presence of an explicit notice of abandonment for a given dependency and an increased likelihood of the abandoned dependency being removed by downstream projects cf.
fig.
.
holding the other covariates constant hr .
hr .
hr .
hr .
hr .
hr .
hr .
hr .
hr .
hr .
detection explicit noticegovernance maturityhas corporate commitstechnical lag log num commits log num maintainers log project age log project size log dependency churn log uses dep.
mgmt.
tools .
.
.
.
.
hazard ratio estimate p .
p .
p .
time to removing abandoned dependenciesfig.
.
summary of the cox proportional hazards multivariate survival regression modeling the time to removing an abandoned dependency.
confidence intervals horizontal lines for the hazard ratios hr that do not intersect indicate variables with statistically significant effects.
having an explicit notice increases the removal hazard by a factor of .
or with a confidence interval of .
to .
.
this is in alignment with our expectations because explicit notice abandoned packages provide a clear signal to dependents and are more visible sooner.
key insights packages that provide an explicit notice of abandonment tend to be removed at significantly faster rates compared to those that do not.
viii.
d iscussion and implications the scale of abandonment.
our study finds that abandonment even among widely used npm packages is fairly common.
while many developers carefully analyze signals like the number of stars responsiveness to issues or number of contributors when adopting dependencies and past studies have shown several statistical predictors for survival we were surprised by the scale of abandonment among packages that had healthy signals were among the most popular packages on npm and were generally similar in their distribution of stars and past activity to those with sustained maintenance.
given that open source maintainers may disengage for all sorts of reasons such as losing interest changing jobs and starting a family users of open source are likely not able to entirely escape abandoned dependencies with careful upfront vetting but may also need to actively consider strategies to manage abandoned dependencies an area also called for in our recent interview study for which maintainers have with little existing support.
the rippling effects of abandonment.
although abandonment rates are fairly high we were surprised at the low rates of direct exposure.
while github s dependency insights page often show thousands to hundreds of thousands of dependent projects for the abandoned packages the actual direct exposure of active dependent projects at the time of abandonment was not that high cf.
sec.
iv b .
many additional dependents of abandoned packages were abandoned even before the package s abandonment so they 9are unlikely to care about it many others adopted the package even after it was abandoned possibly knowing and accepting that they will not receive updates.
package abandonment has vastly more wide reaching consequences when also considering indirect dependencies.
on the one hand this is good news since the few projects that depend directly on an abandoned package can potentially mitigate the consequences of abandonment for the many downstream projects that rely on the abandoned package only transitively.
on the other hand if the maintainers of these intermediate projects do not act developers have very little means to do anything about indirectly used abandoned packages in their dependency graph.
with an increased focus on the entire supply chain through software bill of materials sboms software composition analysis sca tools and company wide or agency wide policies for sunsetting this can cause a lot of pain for huge numbers of developers vastly more than those directly exposed.
we recommend that maintainers of popular projects should be particularly attentive to monitoring and reacting to abandoned direct dependencies due to their outsized lever to benefit the entire ecosystem.
for many abandoned packages in our sample the small direct exposure would make it feasible to reach out to affected dependent projects in the context of breaking changes such proactive actions are not uncommon .
however maintainers currently do not have tools to identify all active direct dependents e.g.
github s dependency insights page reports too many false positives vast numbers of inactive projects and drowns out direct dependents among many more indirect ones while some dependents may not even be hosted on github .
researchers or practitioners should explore tools for more targeted outreach to direct active dependents.
allocating resources to sustain open source communities.
discussions of open source sustainability are often centered on the most widely used packages that form essential digital infrastructure and usually focus on keeping those projects alive which may be arguably cheaper in the grand scheme of things than placing the cost for mitigations and replacements on all their dependents.
however the observed low rates of direct exposure may call that balance into question especially if we can help the exposed projects with a migration guide or through other coordinated action discussed as community oriented solutions in our prior work .
there is also a fairness argument regarding the degree to which the often volunteer maintainers of packages do or should feel responsible to provide ongoing maintenance for their dependents most of whom never contribute to the package in any way.
as we argued previously we believe it is time to place more emphasis on the responsible use of open source rather than attempting indefinite maintenance .
in our study we explicitly consider all dependents not only other packages in npm and not only packages or projects that are popular and form digital infrastructure themselves.
that is many of the exposed dependents are star projects including personal projects like maintaining a personal website but allof them were still maintained for some period after exposure to abandonment.
less prominent dependents may have a more relaxed attitude toward abandonment but they may also be less experienced in dealing with dependencies and likely spend less time on dependency management overall thus making abandonment possibly even more disruptive.
more research is needed on whether and how to help such developers rather than only helping and studying the most active developers or the most popular projects.
abandoned dependencies in the context of dependency management.
despite many calls for better dependency management especially from a security perspective recently even with the us white house joining in study after study shows that the majority of developers rarely update dependencies even those with known vulnerabilities and even when informed about problems by automated tools .
if developers do not patch known security vulnerabilities or even add dependencies with known vulnerabilities should we expect them to care about abandonment?
our results show that different dependency management practices correlate.
developers who generally keep their dependencies up to date are also more likely to react to abandoned dependencies.
when or if the larger open source community manages to improve dependency management practices in response to perceived higher stakes e.g.
the continuously increasing frequency of supply chain attacks we expect to also see more people reacting to abandonment therefore support to help developers exposed to abandonment will only become more important.
at the same time abandonment is different.
a dependency does not automatically and immediately become a problem when abandoned impacts are often delayed and may not even occur in a dependent project s lifespan .
a large number of updates and vulnerability fixes can be captured with floating dependency versions semantic versioning is a common practice in npm automating the immediate reaction to of analyzed updates and and of analyzed patch events although this practice also raises its own security challenges and various sca tools can inform and automate update actions.
however there is no equivalent default action or tool automation for abandonment.
the decision to remove abandoned dependencies is closer in nature to decisions surrounding technical debt reduction and risk reduction similar to trying to stay on top of updates to avoid painful large migrations and integration problems later than the more immediate urgency to patch known vulnerabilities.
this is visible in our results e.g.
fig.
where fixing vulnerabilities is more likely and faster than reacting to abandoned dependencies but reactions to abandoned dependencies are fairly similar to reactions to random dependency updates even in the absence of any automated tooling.
responsible sunsetting and effectively signaling abandonment.
our results show that many developers though far from all care about abandoned dependencies but may not be aware of them or may observe a dependency for a lengthy 10period before taking action.
dependencies that are clearly marked as abandoned explicit notice see sec.
iii are removed significantly faster than those that silently stop receiving maintenance rq4 suggesting that awareness matters.
based on our research we can clearly recommend that maintainers should place an explicit notice about abandonment of their package as their final action to benefit their dependents costing very little effort to the departing maintainers .
we believe it is time to establish best practices for responsible sunsetting of packages which may include leaving an explicit notice and possibly also reaching out to direct dependents.
in addition future research should explore the most effective way to present abandonment notices for example where to place notices to be effective e.g.
placed in readme versus using npm s deprecate message to create alerts during package installation and what to include in the message to make it actionable e.g.
alternatives migration paths .
we also expect that there are many opportunities to better communicate the maintenance status of packages beyond already available signals.
there are many research opportunities to develop dependabot style tooling to inform developers about abandoned dependencies and to curate actionable information e.g.
automatically suggest alternatives or even generate patches .
building on the vast research on signaling theory and the use of nudging in software engineering the key challenge for designing such tools will be identifying when and how to inform developers as the abandonment of different dependencies may not be equally important to developers .
ix.
c onclusion we perform a large scale quantitative analysis across all widely used packages in the npm ecosystem identifying how common abandonment is measuring exposure and response to abandonment and performing statistical analysis to understand what factors impact the likelihood of removing abandoned dependencies.
we found that abandonment is common and that the majority of exposed dependents do not remove the abandoned dependencies but also that removal rates are significantly faster for packages that provide explicit notice of abandonment.
based on our finding we recommend strategies for focusing remediation activities responsible sunsetting and prioritizing research and tooling.
x. d ata availability the data and script necessary to reproduce all visualizations and models in the paper are available in the publicly accessible artifact hosted on zenodo .
xi.
a cknowledgments first and foremost distinguished thanks are bestowed upon chanel for her ongoing dedication to her craft as a worldclass canine researcher and for all the creativity resilience and emotional support she provided to the team without which this paper would not have been possible.
this material is based upon work supported by the national science foundationgraduate research fellowship program under grant number dge2140739.
any opinions findings and conclusions or recommendations expressed in this material are those of the author s and do not necessarily reflect the views of the national science foundation.
kaestner s work was supported in part by the national science foundation award .
vasilescu s work was supported in part by the national science foundation awards and .
this work was also supported in part by a google research award.
jahanshahi and mockus work was supported in part by the national science foundation awards and .