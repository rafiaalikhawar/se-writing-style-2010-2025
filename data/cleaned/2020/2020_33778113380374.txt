recognizing developers emotions while programming daniela girardi university of bari italy daniela.girardi uniba.itnicole novielli university of bari italy nicole.novielli uniba.it davide fucci blekinge institute of technology sweden university of hamburg germany davide.fucci bth.sefilippo lanubile university of bari italy filippo.lanubile uniba.it abstract developers experience a wide range of emotions during programming tasks which may have an impact on job performance.
in this paper we present an empirical study aimed at i investigating the link between emotion and progress ii understanding the triggers fordevelopers emotionsandthestrategiestodealwithnegative ones iii identifying the minimal set of non invasive biometric sensorsforemotionrecognitionduringprogrammingtasks.results confirm previous findings about the relation between emotions and perceived productivity.
furthermore we show that develop ers emotions can be reliably recognized using only a wristband capturing the electrodermal activity and heart related metrics.
ccs concepts human centeredcomputing softwareanditsengineering keywords emotionawareness emotiondetection biometricsensors empirical software engineering human factors in software engineering acm reference format danielagirardi nicolenovielli davidefucci andfilippolanubile.
.
recognizingdevelopers emotionswhileprogramming.in proceedingsof 42nd international conference on software engineering seoul republic of korea may icse pages.
introduction software development is an intellectual activity requiring creativity and problem solving skills which are influenced by affective states .
previous work shows that positive emotions are beneficialfordevelopers well beingandproductivitywhilenegativeones leadtopoorjobperformanceandaredetrimentaltothesoftware developmentprocess .hence emotionawareness i.e.
theawarenessofownandothers emotions isregardedasakey to success for software projects .
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acmmustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
icse may seoul republic of korea association for computing machinery.
acm isbn ... .
frustration and anger can enable just in time corrective actions for developers and team managers preventing burnout and undesiredturnover .recentresearchfindingsdemonstratethat negativeemotionscanbecausedbyuneventaskdistribution wrong estimation of size and time required to complete an assignment difficulties in solving a complex cognitive task and obstacles when familiarizingwithanewtechnologyorprogramminglanguage .
information about developers emotional state can be leveraged to improve collaborative software development strategies .
for instance enriching retrospective meetings with feedback about developers emotionscanbeusedtoreflectasateamonopportunities forimprovement.weenvisiontheemergenceandadoptionoftools for enhancing emotion awareness during software development.
in this study we focus on the identification of the emotions experienced by developers engaged in a programming task.
specifically we operationalize emotions along the valence and arousal dimensions of thecircumplex model of affect .
first we build uponrecentresearchinvestigatingtherelationbetweendevelopers emotions and perceived productivity .
we formulate our first research question as follows rq1 what is the range of developers emotions during a programming task and to what extent they correlate with their perceived progress?
toaddressrq1 weperformastudywith23participantsengagedin aprogrammingtask.weaskparticipantstoperiodicallyself report their emotional state and self assessed progress.
we analyze therange of emotions reported and their correlation with perceived progressbyfittingalinear mixed asdoneinpreviouswork .
asasecondgoal weaimatdiscoveringthecausesofpositive andnegativeemotionsexperiencedduringsoftwaredevelopment.
furthermore weaimatidentifyingthecopingstrategiesthatmight help programmers dealing with negative emotions.
as such we formulate our second research question rq2 what are the triggers for developers emotions and the strategies they implement to deal with negative ones?
to addressrq2 weinterview thestudyparticipants andperform manual coding of their answers to open ended questions.
previousworkdemonstratedthefeasibilityofsensor basedemotion detection using non invasive biometric devices .
however the experimental setting usually employed in a laboratorysetting is too complex for being applied in practice.
we aim atidentifying the minimal set of sensors to wear in the workplace for reliable emotion detection.
accordingly we formulate our third research question ieee acm 42nd international conference on software engineering icse rq3 what is the minimal set of non invasive biometric sensors to detect developers emotions?
we usesupervisedmachinelearning totraina classifierfordevelopers emotions based on biometric features with different sensor configurations.
the contributions of this work are a list of emotional triggers related to software development including strategies to deal with negative emotions asetofsupervisedclassifiersofdevelopers emotions.these include to the best of our knowledge the first attempt at classifying arousal during a programming tasks alabpackage1toverify replicate andbuilduponthisstudy.
the reminder of the paper is structured as follows.
section describes the theoretical model we use to operationalize emotions reviewstheexistingliteratureonsensor basedemotiondetection andsummarizes theempiricalstudieswebuild upon inthiswork.
in section we describe the design of this study.
in section we report the analysis results and answer the research questions.
in section5 wecompareourfindingswithpreviousworkanddiscuss their implications and limitations.
section concludes the paper.
background in this section we introduce the most important theories on modelingemotionsandsummarizethestateoftheartonrecognizing emotionsusingbiometricsensors.moreover wereporttwostudies relating emotions to perceived progress in software engineering.
.
emotion modeling psychologists worked on decoding emotions for decades developingtheoriesbasedoncognitivepsychologyandnaturallanguage communication.twotheorieshaveemerged.thefirstposesthat a limited set of basic emotions exists.
however there is no con sensus about their number or nature .
the second theory considersemotionsasacontinuousfunctionofoneormoredimensions .
dimensional models are not influenced by cultural or linguisticfactors whichmakesthemmorerobustcompared to discrete models.
consistently with prior research on emotionawareness in software engineering we use a continuous representation of developers emotions.
specifically we refertothecircumplexmodelofaffect seefigure1 whichrep resentsemotionsaccordingtotwodimensions valence pleasant vs. unpleasant and arousal activation vs. deactivation .
according tothis model each emotioncan beconsidered a labelfor afuzzy set defined as a class without sharp boundaries .
pleasant emotional states such as happiness are associated with positive valence whileunpleasantones suchassadness areassociatedwith negativevalence.
arousal describes the level of activation of the emotional state ranging from inactive or low as in calmness or depression to active or high as in excitement or tension.
.
sensor based emotion classification the link between emotions and physiological feedback measured using biometric sensors is investigated in the field of affective computing .
among the several physiological measures figure the circumplex model of emotions .
that correlate with emotions previous research investigated the electricalactivityofthebrain eeg theelectricalactivityoftheskin eda theelectricalactivityofcontracting muscles emg andthebloodvolumepulse bvp from which heart rate hr and its variability hrv are derived .
specifically changes in the eeg spectrum provide an indication of overall levels of arousal or alertness as well as pleasantness of the emotion stimulus .
for example soleymani et al.
found that high frequencies sensed from electrodespositioned on the frontal parietal and occipital lobes have high correlation with valence.similarly liandlu showthatitispossibletodiscriminate between happiness and sadness by analysising eeg signals.
concerningeda studiesinpsychologydemonstratehowthis signal considerably varies with changes in emotional intensity and specifically with the arousal dimension .
changes in eda are a resultofincreasedactivityofthesweatglands whichtakesplaceinpresenceofemotionalarousalandcognitiveworkload.hence eda has been employed to detect excitement stress interest attention as well as anxiety and frustration .
bvp hr and hrv metrics captured by a plethysmograph have been successfully employed for emotion detection .
facial emg is particularly useful in predicting emotions .
however it leads to poor results when the sensors are placed on body parts other than the face i.e.
the arms .
accordingly we exclude emg from this study.
inthisstudy weincludemeasuresfromeeg eda bvp andhr astheycanbecollectedusinglow costnoninvasivesensors thatcanbecomfortably used bydevelopersduringprogramming tasks seesection3.
.this choiceisinlinewithcurrentresearch investigating the use of lightweight biometric sensor for study inghumanaspectsinsoftwaredevelopment.fuccietal.
use eeg eda and heart relatedmeasurements for the automaticidentification of code comprehension tasks.
fritz et al.
rely on a combination of eeg bvp and eye tracker to assess difficulty incodecomprehensionandpreventdevelopersfromintroducing bugs.
in a follow up study they employ the same set of sensors to 667distinguish between positive and negative emotions during programming tasks .
similarly eda hr hrv and breath related metricshavebeenusedinafieldstudytoidentifycodequalityconcernsduringsoftwaredevelopment .z egeretal.
combine heart relatedmetricswithawristbandactivitytrackertopredict developers interruptibility.
.
former studies ourstudybuildsuponthedesignandresultsoftwoformerstudieslinkingdevelopers emotionswiththeirperceivedprogress .
theyfollowsimilarexperimentalprotocolsinvolvingalongitudinal study with repeated measures of novice and professional developers emotional states.
in particular graziotin et al.
recruited eightsubjectsofwhichfourprofessionaldevelopersandfourundergraduate students with major in computer science whereas m ller and fritz observed subjects six professionals average experience seven years and computer science phd students.
inbothstudies theparticipantswereobservedduringaprogrammingsessionandinterruptedeveryfiveminutestoansweraselfreportsurvey.emotionswereself reportedalongthevalenceand arousaldimensions.m llerandfritzmeasuredtheself perceived participants progress while completing two programming tasks 30minuteseach .conversely graziotinetal.askedparticipants toreportonperceivedproductivitywhileworkingfor90minutes in a natural setting i.e.
on their own projects.
graziotin et al.
also measured dominance i.e.
the extent to which a subject feels in control or controlled .
thestudiesofgraziotinetal.
andm llerandfritz pr ovide empirical evidence that valence correlates with self perceived productivity and progress respectively.
among the main causesfor negative emotions leading to the perception of being stuck m ller and fritz report cognitive difficulties impossibility to fulfill informationneeds andcodenotworking.conversely beingable to understand the code and identify a solution strategy are among the top reasons for positive affect.
finally m ller and fritz trained a supervised emotion classifier abletodistinguishbetweenpositiveandnegativeemotionswithanaccuracyof71 .intheirsetting theyusemultiplesensorsincluding eeg eda hr and eye tracking metrics.
however they neglect the arousal classification.
study design inthissection wereportabriefcharacterizationoftheparticipants in our study the study task the tools and devices used to measure the relevant constructs and the study protocol.
.
participants we recruited cs students males four females from the department of computer science of our university of which undergraduates fivegraduates andonepost graduate.following aconveniencesamplingstrategy werecruitedvolunteersaspar ticipants only if they could provide evidence they cleared exams where java programming e.g.
the programming language for the this study task was used for capstone projects.
.
development task weuseoneofthetwotasks includingthematerials designedby m ller and fritz in their study .
the task consisted in writing a javaprogramusingthestackexchangeapi2toretrieveallanswers posted by a specific user on stackoverflow and sum up the scores the user earned for these answers.
the participants were provided with a skeleton code that they modify to complete the task.
.
measurement tools and devices biometricsensors.
wemeasurethesubjects physiologicalsignals using lightweight biometric sensors analogous to those employed by m eller and fritz i.e.
comfortable to wear in the work environment .
specifically we use the neurosky brainlink headsettorecordtheeegwavesandtheempaticae4wristband for eda bvp and heart related metrics see figure .
figure a participant wearing the empatica e4 wristbandand the brainlink headset during the study.
the brainlink eeg uses one electrode placed on the surface of thescalpandareferenceplacedontheearlobe3 seefigure2 .eeg wavesareextractedbypre processingtherawsignalcollectedby the device with a sample frequency of 512hz.
besides raw eeg signal brainlinkextractsmetricsrelatedtomentalfocus i.e.
attention and calmness i.e meditation .
the empatica e4 wristband measures eda with a sample frequency of 4hz.
it features a plethysmograph for collecting bvp sampled at a frequency of 64hz.
bvp is used to derive the hr and hrv.followingtheempaticaguidelines5 weexcludedhrvasit is unreliable in dynamic conditions i.e.
when typing .
self report of emotions and progress.
the measurement of emotions and perceived progress is performed through experience sampling .
in line with the approach implemented by graziotin et al.
we collect self reported valence and arousal ratings 3thereference electrodeis usedtocompute theamount ofinformation oftheactive eegelectrodeplacedontheforehead.assuch ithastobeplacedonaneutralplace like the earlobe 668figure the sam mannequins for assessment of valence andarousalandthe5 pointlikertscalequestionforassess ment of the perceived progress.
duringinterruptionsofthedevelopmenttaskusingself assessment manikin sam .consistentlywithpreviousassessmentofvalence and arousal in affective computing research we use a nine point scale.
figure shows the sam mannequins for valence and arousal top as well as a point likert item bottom to assess the perceived progress.
during the interruptions we prompt the participant to elaborate on the triggers for the emotional state and take notes of their answers.
debriefing questionnaire.
toelicittriggersandstrategiesfor handlingemotions thefirstauthorinterviewseachparticipantat the end of the development task asking the following questions whatarethecausesforyour positiveemotionsduringpro gramming?
what are the causes for your negative emotions during programming?
which strategies do you adopt to deal with negative emotions during programming?
.
experimental protocol weorganizethestudyaccordingtothefollowingphases figure4 .
pre experimental briefing.
the participant gets acquainted with the settings e.g.
sitting in a comfortable position adjusting themonitorheight.theexperimentersummarizestheupcoming stepsandexplainstheprogrammingtask.theparticipantsignsthe consent form to allow anonymous treatment of the collected data.
sensor calibration and emotion elicitation.
the participant wears the biometric sensors see figure and the experimenter checks that the devices record the signals correctly.
beforetheparticipantstartsworkingontheactualprogramming assignment theexperimenterasksher totakepartinanemotionelicitationtask.thepurposeofthisstepistwo fold.ononehand itallowsthesubjecttogetacquainted withthesam mannequins on the other hand it allows the experimenter to collect her biometric and sam feedback both in a neutral condition andin presence ofcontrolledstimuli.
thisstep followsthe designdescribedin aprevious emotion elicitation study .
the participant watches eight videos selectedfromthedeapdataset associatedwithvalence and arousal scores on a scale from to .
each video is mapped to thefourquadrantsoftheemotionalspaceinthecircumplexmodel of affect based on a discretization of the scores.
specifically the eight videos used in the emotion elicitation are equally distributed amongthefourquadrants i.e.
positivevalenceand hi harousal positivevalenceand lowarousal ne ative valenceand lowarousal ne ative valence and hi harousal.
the emotion elicitation step lasts10minutes withtheeightvideospresentedinfoursessions.
eachsessionconsistsofa30 secondbaselinevideoshowingaquiet image with relaxing music in the background followed by a 2minutedisplayoftheselectedvideos oneminutepervideo .atthe beginning of each trial a second screen displays the current trial number to make the participant aware of her progress.
after each video the participant is instructed to report her emotions using the sam mannequins.
therefore each subject provided pairs of ratings i.e.
one valence and one arousal assessment per video.
priortothedevelopmenttask theparticipantwatchesa2 minute relaxingvideoofanaturescenerycapableofinducingrelaxation andaneutralemotionalstate .weusebiometricsrecordedwhen showing such video as physiological baselines for the participants.
software development task and self report.
the core of the studyis a30 minutedevelopment sessionduringwhichwe apply experiencesampling .theexperimenter i.e.
thefirstauthor observed the behavior of participants during the entire sessionand interrupted them every five minutes asking to report theiremotions perceived progress and to provide information aboutthe reasons for their emotions.
we choose a time frame of five minutesasitrepresentstheaveragetimeforwhichdevelopersstayfocusedonasingletask .wecollectthesubjects biometrics during the entire duration of the development task.
after the task participants watch again the minutes relaxing video to ward off possible induced emotions for example from not succeeding in solvingthetask.intotal eachparticipantprovidessixratingsfor valenceandsixforarousal i.e.
onevalence arousalratingforeach interruption .
in addition participants provide six progress ratings oneperinterruption .finally theyprovidesixanswerstotheopenendedquestionaboutthetriggersforreportedemotions whichwe use in the data quality assurance step.
final interview .
we run the post experimental debriefing with eachparticipantfor approximately10minutes.theexperimenter interviewsparticipantstoinvestigatei thetriggersforpositiveand negative emotions during the task and ii the strategies subjects implement todeal withnegative emotions.
theparticipants could also ask questions and give feedback about the experiment.
finally participants are rewarded with a voucher for a meal.
dataqualityassurance .oncetheexperimentwascompleted but before analyzing the data we manually performed a sanitycheck of the collected data.
in particular we investigated potentialmalfunctioningofthesensorswhichcanintroducenoiseand discontinuedrecordingofrawsignals.inaddition wechecktheconsistency ofthe self reported valence arousal and progressscores with respect to the comments provided in the open questions.
we looked for signs of negligence inconsistencies and misinterpretationoftheguidelinesforusingthesam basedreport.forexample 669figure the timeline of the study.
one subject scored his arousal as eight for all the interruptions however this did not match the content of his comments.
as a resultsof this step wediscardedfour participants allmales .the final set of participants includes subjects of which four females.
analysis and results in this section we answer our research questions by analyzingthe data collected in the study using a mix of quantitative and qualitative methods.
.
experienced range of emotions and their correlation with progress rq1 we analyze the self reported scores for emotions and progress collected through experience sampling.
as described in section .
eachparticipantprovidedself assessmentofemotionsateachinterruption thus reporting six pairs of sam ratings for valence and arousal.ourdatasetincludes138 x23subjects ratingsforeach emotion dimension and x23 progress scores.
to investigate the range of developers emotions during the programming task we analyze and compare the reported emotion scoresthedevelopersreportedduringtheprogrammingtaskand emotion elicitation as proposed by m eller and fritz .
figure5 boxplotsforvalence a andarousal b duringthesoftware development task and emotion elicitation video.
figure5reportsthesamscoresforvalenceandarousal.weuse the scores provided during the video driven emotion elicitation as a reference for the way participants report valence and arousal in presenceofthecontrolledstimulus.forexample therangeofsamscoresreportedforpositivevideosindicatehowtheparticipantsratetable1 frequencyofprogressscoresona1 5scale n .
stuck neutral in flow score score score score score overall theirvalencewhenexperiencingapositiveemotion.weobserve that the entire range of emotions is covered by the scores reported while watching videos as well as programming.
for valence we observe a clear distinction between the ranges used for positiveand negative videos figure 5a .
in addition negative emotions tendtoprevailduringtheprogrammingtask i.e.
themedianscorecorrespondstotheonereportedforthenegativevideos.conversely themedianvalueforthearousaldistributionoftheprogramming task figure 5b corresponds to the one for high arousal videos.
theparticipants reportthe wholerangeof progress i.e.
fromcompletelystuck scoreequalto1 to inflow scoreequalto with median and inter quartile range see table .
most developershadtroublessolvingthetask onlyfoursucceededin developing a complete solution.
accordingly most of the time they reported being stuck of answers .
they reported being in a neutral state of the cases corresponding to answers and in flowin of the cases answers .
we investigate the link between reported emotions and perceived progress by fitting a linear mixed model which is robustin case of repeated measurements and longitudinal data .
to create the model we used the lme4r package6.
consistently with the approach adopted in the former studies we consider progressas thedependentvariable andvalence arousal andtheir interactionwithtimeasfixedeffects.givenourstudydesign we cannotexcludethattheperceivedprogresscanbeimpactedbytime.
therefore time and its interaction with the emotional dimensions are also included in the model.
we account the sam individual differences using z scores to standardize valence and arousal .
in table we report the parameter estimation for the mixedeffect model and the percentage deviance explained by each effect.
our model significantly differs from the null model i.e.
the model with no correlation between fixed effects and progress 2 p .
.weobserveasignificanteffectofvalenceonprogress 670table parameter estimation for the fixed effects on perceived progress indicates a statistically significant estimate with .
.
fixed effects estimate upper p value d.f.
lowerp value d.f.
dev.
ex plained valence .
.
.
.
arousal .
.
.
.
time .
.
.
.
valence time .
.
.
.
arousal time .
.
.
.
at confidence level.
valence also shows the highest explanatorypowerwith27 .
ofdevianceexplained comparedto30 .
observed for the whole model.
conversely we did not observe any effect of arousal on self reported progress.
this result holds for the effect of time and its interaction with arousal.
our model shows a statistically significant correlation between progress and the interaction between time and valence.
the effect of such interaction on the overall model is small .
of deviance explained .
summary rq1 developers experience a wide range of emotions during programming tasks.
we observe a prevalence of negative valence and high arousal.
valence is positively correlated with perceived progr ess.
howev er differences are observed between individuals.
.
triggers and strategies for emotions rq2 toinvestigatetriggersforemotions aswellasthestrategiestodeal with negative ones we manually analyzed the answers three per participant provided during the debriefing questionnaire.
we performed qualitative data analysis using a sentence bysentence approach in a semi exploratory fashion.
we applied se lective coding based on the constructs associated with the researchquestion i.e.
positiveandnegativeemotions aswellas strategies for coping with the latter .
we identified sentences discussingpositiveemotionstriggers 41fornegativeemotionstriggers and47forcopingstrategies.subsequently tworesearchers coded each sentence following an open coding approach .
duringameeting theresearchersreconciledtheircodesinasingleone.
weobtained23codes eightreasonsforpositiveemotions eight for negative ones and seven strategies for dealing with negativeemotions.
these codes were then grouped to form relationships and themes captured by applying axial coding .
three themes emerge selfrefers to the developers dimension socialrefers to peers and collaborators and solutionrefers to issues with artifacts design and implementation of the task.
table3showsthethemesidentifiedastheresultofthecoding process.
the most frequent trigger for emotions refers to the solutiondimension 25occurrencesoverall ofwhich 14forpositive and for negative .
the participants felt particularly happy when abletoincrementally implementthedesignedsolutionandwhen believing the solution itself is simple.
analogously unexpected output unexpectedusage oflibraries and unavailabledocumentationtriggernegativeemotions.themostfrequentcausesfornegative valencerelatetotheselfdimension 15occurrences withthedevelopers reporting thefeeling of being stuck and the awarenessof time pressure as the main causes for negative emotions.
finally the socialtheme appears with a low frequency as the participants had to complete the programming task by themselves.
asforthestrategiesdevelopersimplementtodealwithnegative emotions take breaks is the most popular one immediately followedby lookforcollaboration e.g.
seekinghelpfrompeers.some participantsalsoreport changingtask andstartingover asstrategies toregainfocusandshifttowardspositiveemotions.theyindicated changing approach anddecomposing the problem into simpler ones as strategies to gain confidence and react to negative emotions.
summary rq2 developers positive emotions are triggered by the effectiveness of the implemented solution.unexpected code behavior and missing documentationcause negative emotions.
the latter are also due to time pressureandself perceivedlowproductivity.developers deal with them by taking breaks and looking for help.
.
a minimal set of sensors for detecting developers emotions rq3 we address rq3 using machine learning for classifying the participants emotions duringthedevelopment task.figure6 showsthe implemented machine learning pipeline.
datasetthe dataset consists of the self reported emotions of participants during the development task.
each of the participantsperformedatotalofsixsam basedassessmentsofvalence andarousal.asaresult weobtainedtwodatasetsof138observations one for valence and one for arousal.
we trained two separate classifiers by considering features extracted from the biometric signals associated to each observation captured by the sensors.
wedefinethe positiveandnegativelabelsforvalence and high andlowlabels for arousal.
for this purpose we discretize the sam scoresfollowingtheapproachappliedbym llerandfritz .first weadjustedthevalenceandarousalscoresbasedonthemeanvalues reported while watching the emotion triggering videos.
following suchapproach wedefinedgoldlabelsforvalenceandarousalby taking into account and correcting for fluctuations due to the participants subjective interpretation of the sam scale.
then we assigned a positivevalence label respectively a higharousal label to instances with scores above the mean and a negativevalence label respectively a lowarousal label to instances with scores below it.
finally following the recommendation reported in previous work we manually inspected observations for valence and 30forarousalforwhichweobservedscoresinthe mean .5interval.
for such cases two authors manually assigned valence and arousal labels.
they obtained a substantial agreement with .
and observed agreement .
the few disagreement cases less than five for each dimension were resolved in a discussion following a consolidated approach in affective computing research .attheendofthisprocess weobtainedthedistribution reported in table .
671table themes identified after coding.
code occurrences are reported in parentheses.
self codes social15 codes solution9 codes triggerspositive emotions8 codes new challenges in flow personal experience knowledge sharing collaborative development incremental simplicity no errors negative emotions8 codes being stuck time pressure multitasking unavailable collaborators peer pressure unexpected output unexpected usage unavailable documentation strategiesnegative emotions7 codes take breaks change task start over decompose problem change approach look for collaboration explain problem table gold standard for valence and arousal.
valencepositive negativearousalhigh low preprocessingand featuresextraction althoughthebiometric signals were recorded during the entire experimental sessionfor all the participants we only consider the signals recorded inproximity of the stimuli of interest i.e.
the signals collected in the seconds before the subjects were interrupted.
this choice is in line with consolidated practices in related research on sensorbasedclassificationofemotional andcognitivestates of software developers.
to synchronize the measurement of the biometric signals with the emotion self assessment we i save the timestamp of the interruption t interruption ii calculate the timestamp for relevant timeframe for each interruption i.e.
10secondsbeforetheself report t start and iii selecteach signal samples recorded between t startandt interruption.
we normalize the signals to each participant s baseline using z score .thebaselineiscalculatedbasedonthelast30seconds ofthevideousedtoelicitaneutralstatebeforestartingthetask .
to maximize the signal information and reduce noise caused by movements we applied multiple filtering techniques.
regarding eeg and bvp we extract frequency bands using a band pass filter algorithm at different intervals .
the eeg signal can be decomposedintofivewavesbasedonthefrequency namelydelta 4hz theta 5hz alpha 5hz beta 30hz and gamma 30hz .
we apply the filter to extract the distinct cerebral wavesas each spectrum might provide different information.
the eda signalconsistsofatoniccomponent i.e.
thelevelofelectricalcon ductivityoftheskin andaphasiconerepresentingphasicchanges inelectricalconductivityorskinconductanceresponse scr .
we extract the two components using the cvxeda algorithm .
aftersignalspre processing weextractedthefeaturespresented in table which we use to train our classifiers.
we select features based on previous studies using the same signals .
classification settings .inlinewithpreviousresearchonbiometrics we choose eight popular machine learningtable5 machinelearningfeaturesgroupedbyphysiological signal and by sensor.
signalfeatures sensor brainlink eeg freq.
bin for alpha beta gamma delta theta waves ratio between freq bin of each band and one another for attention and meditation min max mean sd.
deviation diff.
between baseline and task sensor empatica e4 eda mean tonic phasic auc phasic min max mean sum peaks amplitudes bvp min max sum peaks amplitudes mean peak amplitude diff.
between baseline and task hr mean sd.
deviation diff.
between baseline and task algorithms i.e.
naive bayes nb k nearest neighbor knn c4.5liketrees j48 svmwithlinearkernel svm multi layerperceptron for neural network mlp and random forest rf .
figure6 themachinelearningpipelineimplemented withthehold outandleave one subject outevaluationsettings.
we evaluate our classifiers in two different settings.
in the holdoutsetting wesplitthegoldstandardintotrain andtest 672sets using the stratified sampling strategy implemented in the r caretpackage .wesearchfortheoptimalhyper parameters using leave one out cross validation i.e.
the recommended approach for small training sets such as ours.
the resulting modelisthenevaluatedonthehold outtestsettoassessitsperformanceonunseendata.werepeatthisprocess10timestofurther increase the validity of the results.
the performance is then evaluatedbycomputingthemeanforprecision recall f measure and accuracyoverthedifferentruns.thissettingisdirectlycomparable totheoneimplementedbym llerandfritz whichincludes data from the same subject in both training and test sets.
wereportasecondevaluationsettingtoassesstheclassifiersperformance on data obtained from unseen developers i.e.
leave onesubject out loso .
this setting was inspired by previous findings reporting different classification performance due to differences in biometrics between individuals .
in the loso setting the evaluation on a test set is repeated for times i.e.
the number of subjects in our dataset.
at each iteration we use all the observations from the n 1participants i.e.
for training the model and we test the performance on the remaining one.
classification performance .
in table for each sensor and theircombination wereporttheclassifierwiththehighestaccuracy together with its precision recall and f measure.
moreover we reporttheresultofatrivialclassifieralwayspredictingthemajority class i.e.
negativefor valence and highfor arousal .
in thehold outsetting we observe substantial improvements overthebaselineclassifier.the valenceclassifierdistinguishesbetweennegativeandpositiveemotionswithanaccuracyof.72using the full set of sensors.
while performance might appear close tothe baseline value interms of accuracy baselineaccuracy .
lookingatprecisionandrecall weobservethattheclassifiersbehavioris substantiallydifferent.
infact weobserve an increaseof .
in precision from .
of the baseline to .
of the classifier and of.
from.50to.
inrecall resultingina .19increaseofthef1measure from .
to .
.
the results show that the model trained usingthefullset offeaturesachievescomparableperformanceto theonetrainedusingonlyfeaturesextractedfromtheempaticae4device i.e.
eda bvp andhr relatedfeatures.weobserveasmallincreaseinprecisionwithrespecttothefulldevicesetting from .
inthefullsetto .70withempatica andasmalldecreaseinrecall from.
to.
.
these results suggest that valence can be reliably detected using only the empatica e4 wristband.
the features from the eeg negligibly impact the classifiers performance.
forarousal ourbestclassifierdistinguishesbetween highand lowemotion activation with an accuracy of .
.
the model trained using the full set of features substantially outperforms the baseline intermsofprecision .
from .31to.
recall .
from .
to.
and f1 measure .
from .
to.
.
similarly to what observed for valence the performance obtained with the full set of sensors is comparable to the one obtained with the empatica e4 wristband only which also achieves a better precision.
thelososettingresultsaresimilar forbothvalenceandarousal to the ones reported in the hold outsettings.
however we observe 7the performance for each run in both settings are reported in the bestresults spreadsheet in the machine learning folder of the replication package.variabilityfortheindividualperformanceoneachtestsetassuggested bythe higher standarddeviation compared tothe hold out setting.
although with variability between individuals our results provide evidence that biometrics are good predictors for emotions.
summary rq3 developers emotions during programming can be recognized using features extracted by the empatica e4 wristband i.e.
eda bvp and hr .
discussion in this section we compare our findings with related studies highlighttheirimplicationsforresearchersandpractitioners andreport the threats to their validity.
.
comparison with related studies emotions as a proxy for progress.
the analysisof thescores reportedbytheparticipantsinourstudyduringtheprogrammingtaskshowsaprevalenceofnegativevalenceandhigharousal.thisresult contrastswiththefindingsofm llerandfritz whoobserved thatthedistributionofemotionsreportedwhenprogrammingis comparabletotheonereportedwhenwatchingemotion triggeringpictures.theprevalenceofemotionwithnegativevalenceandhigharousalinourstudycanbeexplainedbyourparticipantsbeinglessexperienced.m ntyl etal.
presentevidencethatnovicedevelopers are more inclined to negative valence and high arousal.
furthermore experienceisnegativelycorrelatedwitheffort i.e.
more experienced developers need less effort to complete a task .
the lower level of experience of our participants can be seen in theiractualandperceivedprogress.themajorityreportedbeing either stuck or completely stuck of self report questionnaires filled in during the interruptions and either being in flow or neutral in only and of the cases respectively.
these resultsare consistent with the fact that only four of the participants completedthetask.conversely m llerandfritz reportamore balanced distribution of progress with the majority of participants feeling in flow rather than stuck or neutral .
theresultsofthelinearmixedmodelinourstudyarecomparable to those reported in m ller and fritz .
we confirm that valence is positively correlated with perceived progress and that it is the mainvariableexplainingthemodeldeviance.moreover wedidnotobserveasignificantrelationshipbetweenproductivityandarousal.bothresultsconfirmthefindingsofthepreviousstudybygraziotin et al.
.
the positive relationship between valence and progress is consistent with the findings of m ntyl et al.
who observed positive emotions when resolving issues in the tracking system i.e.
emotions as a proxy for progress .
the same study shows low variabilityinarousal supportingthelackofcorrelationbetween this emotional dimension and progress observed in our study.
causesfornegativeemotionsandcopingstrategies .weconfirmpreviousevidenceonthecausesofnegativeemotionsandhow developersdealwiththemtoregainfocusandpositiveemotions.
being stuck and working under time pressure emerged as the most frequent causes fornegative emotions.
fear of failurewas already reported as a cause for frustration in software development .
673table best valence and arousal classifiers performance.
improvement over the baseline reported in parenthesis.
hold out setting train loo cross validation test times leave one subject out setting train all subject loo cross validation test held out subject subjects valence devices alg.prec rec f1 accuracy stdev alg.prec rec f1 accuracy stdev fullsetknn.
.
.
.
.
.
.
.
.
svm.
.
.
.
.
.
.
.
.
empatica knn.
.
.
.
.
.
.
.
.
svm.
.
.
.
.
.
.
.
brainlink rf.
.
.
.
.
.
.
.
.
mlp.
.
.
.
.
.
.
.
.
baseline .
.
.
.
.
.
.
.
arousal fullsetrf.
.
.
.
.
.
.
.
.
svm.
.
.
.
.
.
.
.
.
empatica knn.
.
.
.
.
.
.
.
.
j48.
.
.
.
.
.
.
.
brainlink rf.
.
.
.
.
.
.
.
.
nb.
.
.
.
.
.
.
.
.
baseline .
.
.
.
.
.
.
.
similarly thedetrimentalimpactoflimitedtimeonself confidence well being and emotional states was already observed .
technicaldifficulties e.g.
unexpectedusageoflibrariesorunexpected output of code and unfulfilled information needs e.g.
unavailable documentation also emerge as causes for negativefeelings.
this is consistent with previous investigations of emotions and confusion in software development.
previous findings suggest that early detection of confusion is crucial for preventingburnoutandlossofproductivity.moreover theydemonstrateshowconfusionarisesduetolackofdocumentation in presence of unexpected code behavior and bugs .
wealsoshowthatfacingnewchallengesisatriggerforpositive emotions inlinewithpreviousworkshowingthatthedevelopmentofnewfeaturescausesmorepositiveemotionsthanbugfixing .
similarly having new ideas and being in flow while programming is shown to be associated with positive emotions .
a minimal set of biometrics for emotion detection.
on top ofconfirmingpreviousfindingsregardingtheusageofnon invasive sensors for valence classification reported by m ller and fritz we also addressed the classification of the arousal dimension.
as a novel finding we identified the minimum set of sensors eda bvp and hr measured using the empatica e4 wristband that can be used in an experimental protocol for detecting emotions during software development tasks.
using machine learning we are able to distinguish between positive and negative valence.
using only the empatica e4 wristband theperformanceiscomparabletotheoneobtainedusingthefull sensors settings i.e.
wristband eeg helmet .
our accuracy .
iscomparabletotheone .
reportedbym ellerandfritz .
however their results are obtained using features from an eeg in combination with hr and pupil size captured by an eye tracker.
forarousalclassification ourbestclassifierachievesanaccuracy of.
using only features from the empatica e4 wristband.
our accuracy is comparable to the one .
reported by koelstra et al.
forarousalclassificationusinga32 electrodeeeghelmet.
theyshowanaccuracyof .61forvalencebycombiningeda emg on facial muscles features derived from respiration blood pressure and eye blinking rate.
we outperform their classifiers using a minimal set of features obtained using the empatica e4 wristband.compared to ours other studies show better performance e.g.
accuracy of .
for arousal and.
for valence .
however these studies rely on high definition eeg helmets andfacialelectrodesforemg .suchsensorsareinvasiveand cannot be used outside laboratory settings e.g.
on the workplace.
.
implications implicationforresearchers theresultsofthisstudyprovidesevidencethatwecandetectdevelopers emotions whileprogramming bymeansofaminimalsetofbiometricfeaturesusingthesensors mounted on a single wearable device the empatica e4 wristband .
this opens up the possibility of further studies aimed at improving the ecological validity of our findings.
ourresultsshowbetween subjectvariabilityofbiometrics already observed in previous studies .
the higher standard deviation for accuracy in the loso setting can be problematic when classifying the emotionsof a new unseen developer.
further studies with a wider pool of participants are required to assess the robustness of our valence and arousal classifiers.
such studies can investigatetowhatextentwecanbuildmorerobustclassifiersby performing preliminary subject based calibration e.g.
by tuning the models based on individuals biometrics collected while exposing participants to emotional stimuli in a controlled setting.
future studies can identify the amount of biometric data required for finetuning the models for reliably classify new subjects emotions.
thecorrelationbetweenvalenceandprogresscanbeinterpreted asaproxyforself perceivedpr oductivity.however furtherinvestigationisrequiredto i provideanexplanationfortheresultsof ourcorrelationstudy and ii understandwhetheracausalrelation existsbetweenemotionsandproductivity orvice versa e.g.
usingemotion triggeringtechniquesinacontrolledsetting inline with previous research .
implication for practitioners and tool builders .
we show that emotions can be detected using non invasive wearable device such as a wristband.
this finding paves the way for tools and practices to prevent developers distress and burnout.
early detection of negative emotions integrated with the development environment can be leveraged to suggest corrective 674actions.
at an individual level developers can regain focus and restorepositivemoodsinaccordancewiththestrategiesweobserved in this study to cope with negative emotions.
in this perspective detection of negative emotions while coding can be used as a promptforrecommendersystemssuggestingbreakstopreventbug introduction the need for code reviews or pair programming or links to stack overflow or curated documentation.
atteamlevel companiesarerecentlyimplementingstrategies tosupportemotionawareness .forexample duringagileretrospective meetings at skytv teams self report on a shared board the emotions experienced during the sprint and discuss their triggers.biometricscan enhanceretrospectivemeetingsbyincluding emotional information collected day to day rather than at the end of a sprint.
the team can better identify what are the activities and events relating to positive and negative emotions .
our resultsdemonstrate a positive correlationbetween valence and progress suggesting that emotions might act as a proxy forproductivity.
for example positive emotions can indicate that adeveloper is in flowand should not be disturbed.
hence sensorbased emotionclassifiers canimprove state of the artapproaches for the automatic assessment of interruptibility .
similarly the identificationofnegativeemotionscanindicateastuckdeveloper requiring support in fulfilling her information needs.
accordingly an emotion aware component integrated in the development environment can recommend relevant colleagues to consult based ontheir familiaritywith thecode base or triggerutilities for on demand documentation generation .
.
threats to validity inthissection wereportthethreatstothevalidityinincreasing order of priority for the in vitronature of this study following the recommendations of wohlin et al.
.
externalvalidity threats to external validity relate to the generalizabilityoftheresults.wechosethesametaskusedinaformer study whichsimulatedanewprobleminarealscenario.regardingparticipants wecovereddifferentlevelsofacademicexperience by including bachelors masters and phd students but withless professional experience compared to .
further replications could engage more women to account for the differences in the emotional reaction based on gender differences.
conclusion validity thevalidityofourconclusionsrelieson the robustness of the generalized linear model and machine learningmodels.wemitigatedsuchthreatby i runningseveralalgorithms addressing the same classification task ii applying hyperparameters tuning and iii reporting results from two different evaluation settings i.e.
hold out and loso.
construct validity our study suffers from threats to construct validity i.e.
the reliability of our measures in capturing emotions andprogress.whenassessingtheimpactofarousalonprogress we didnotobserveasignificantcorrelation.althoughwecannotexcludethatsuchresultisduetotheunreliabilityoftheself reported rating weperformeddataqualityassuranceanddidnotconsider participants who misinterpreted the concept ofarousal e.g.
whoreported always the same score also during emotion elicitation.
internalvalidity threatstointernalvalidityconcernconfounding factors that can influence the results.
we collected data in alaboratorysetting.factorsexistinginoursettings suchasthepresence of the experimenter and the absence of real consequences when failing or succeeding in the task can influence the triggered emotions e.g.
negative emotions due to the feeling of being observedorjudged.inaddition interruptingdevelopersduringthe task can haveinterfered with their work and elicited negativeemotions.
we mitigate this threat by interrupting the developers when wenoticeataskswitch e.g.
openinganewbrowserwindow in proximity of the five minutes interval.
finally we are aware that a further threat might be due to the choice of the programming task and that we could have observed different results with an easier or more difficult test.
in line with our long term goal of supporting emotion awareness and well being of software developers the test should have been difficult enough albeit feasible to elicit negative emotionsthatarethemostinterestingtodetect.tohavereasonable confidenceinfeasibility weselectedonlystudentsthatcouldprovideevidencetheyclearedexamswithanadequategrade where java was used for capstone projects.
as a further validation of the feasibility of the task we run a pilot study.
conclusion weinvestigatedtherangeandtriggersofemotionsthatsoftware developers experience during a programming task.
we confirm thelinkbetweenemotionsandself reportedprogressobservedinprevious indipendent studies.
usingedaandheart relatedmetricscollectedusingawristband we trained a machine learning classifier that can accurately detect valence.
a second classifier trained to detect arousal has shown less successful but encouraging results.
ourresultscanstimulatefuture in vivoresearch i.e.
insoftware developmentcompanies andthecollectionofbiometricstoexplore emotionsduringtheentireworkingday whendevelopersareinvolvedindifferentactivities notjustprogramming.furthermore observing developers at the workplace also opens opportunitiestobuildmoresophisticatedclassifiers whichareabletoidentify for example the bad days i.e.
when mostly negative emotions are identified ornegativeworkingconditionsofdevelopers i.e.
when negative emotions are observed over a long period of time .