designrepair dual stream design guideline aware frontend repair with large language models mingyue yuan jieshan chen zhenchang xing aaron quigley yuyu luo tianqi luo gelareh mohammadi qinghua lu liming zhu university of new south wales australia csiro s data61 australia the hong kong university of science and technology guangzhou china institute for advanced study technical university of munich germany australian national university australia email mingyue.yuan g.mohammadi unsw.edu.au yuyuluo tluo553 hkust gz.edu.cn jieshan.chen zhenchang.xing a.quigley qinghua.lu liming.zhu data61.csiro.au abstract the rise of large language models llms has streamlined frontend interface creation through tools like vercel s v0 yet surfaced challenges in design quality e.g.
accessibility and usability .
current solutions often limited by their focus generalisability or data dependency fall short in addressing these complexities.
moreover none of them examine the quality of llm generated ui design.
in this work we introduce designrepair a novel dual stream design guideline aware system to examine and repair the ui design quality issues from both code aspect and rendered page aspect.
we utilised the mature and popular material design as our knowledge base to guide this process.
specifically we first constructed a comprehensive knowledge base encoding google s material design principles into low level component knowledge base and high level system design knowledge base.
after that designrepair employs a llm for the extraction of key components and utilizes the playwright tool for precise page analysis aligning these with the established knowledge bases.
finally we integrate retrievalaugmented generation with state of the art llms like gpt to holistically refine and repair frontend code through a strategic divide and conquer approach.
our extensive evaluations validated the efficacy and utility of our approach demonstrating significant enhancements in adherence to design guidelines accessibility and user experience metrics.
index terms frontend code repair design guideline ui design large language models i. i ntroduction the emergence of advanced large language models llms such as gpt and meta s llama has catalyzed transformative changes across various fields including legal finance and software development unlocking tremendous new possibilities.
for frontend software development commercial and open source tools such as vercel s v0 imagica and openv0 have attracted considerable interest using the capabilities of llms.
these applications adeptly transform user provided textual or visual prompts into concrete well structured high fidelity user interfaces along with their associated front end code providing substantial jieshan chen is the corresponding author.
this work is partially funded by the dieter schwarz foundation and the technical university of munich institute for advanced study germany.support to designers and developers.
to augment the quality of the generated ui and its accompanying code these tools commonly integrate with established ui design libraries e.g.
html css js frameworks and libraries including popular ones like react shadcn and tailwind css .
these libraries serve as foundational knowledge bases empowering these tools to generate aesthetically pleasing and technically sound designs.
despite their advanced capabilities these tools continue to face two significant challenges.
firstly while they are adept at converting prompts into well structured ui elements their compliance with established design principles such as material design often falls short see section iv .
this inadequacy is critical as strict adherence to these principles is fundamental to crafting effective accessible and user friendly interfaces.
such high quality interfaces play a vital role in setting an application apart from its competitors boosting user downloads reducing user complaints and enhancing user retention .
secondly these tools exhibit limitations in the repair and refinement of generated designs.
while they allow for additional prompts for ui adjustments they often rely on users to manually identify and describe needed changes.
this process can be cumbersome requiring extensive labeling and in depth knowledge .
fig.
1a shows an example.
when prompted with url shorten chrome extension vercel s v0 successfully generated an appealing user interface.
nonetheless upon closer examination it exhibited five distinct design issues related to contrast and color in text and button elements marked in red.
many studies have been proposed to assess different facets of ui design development to ensure its quality encompassing accessibility tapability animation effects and broader design principles and concerns .
industrial tools like playwright and google lighthouse primarily address accessibility concerns such as text contrast for readability.
swearing et al.
utilized a classifier based technique to identify discrepancies between the perceived and intended tappability of ui elements.
yang et al.
introducedarxiv .01606v2 dec a initial ui displaying text and button color contrast issues highlighted in red b repaired ui using our method showcasing resolved issues fig.
url shortener by vercel s v0 initial design vs. improved design.
uis hunter a rule based method for detecting deviations from material design principles in uis.
despite these advancements they either tend to focus on specific isolated issues within ui design or they encounter challenges in generalizing to a broader spectrum of design aspects.
moreover rule based methods require extensive manual efforts which limits their usability and generalisability.
to tackle the aforementioned challenges and fill the existing research gaps we introduce designrepair a novel knowledgedriven llm based approach specifically designed for enhancing the quality assurance and remediation of frontend ui and code.
designrepair adopts material design as the standard for evaluating quality and as the foundation of our knowledge base.
to guarantee efficient and effective knowledge retrieval catering to varying levels of repair granularity and diverse design requirements we meticulously analyzed and restructured material design into two organized knowledge bases the component knowledge base and the system design knowledge base.
the component knowledge base focuses on the detailed fine grained design principles of individual components whereas the system design knowledge base provides broader guidance on the overall design perspective ensuring coherence in elements such as layout and color harmony.
given the frontend code and its corresponding rendered page designrepair initially extracts essential information such as components and property groups followed by retrieving relevant knowledge from our knowledge bases.
this approach considering both the source code and the userperceived experience provides a holistic and detailed examination.
finally designrepair adopts a divide and conquer approach to iteratively repair the code.
the process progresses from focusing on individual elements to considering the overall design ensuring a comprehensive and systematic approach to repair frontend code.
we conducted an evaluation to measure the effectiveness and usefulness of designrepair.
we collected design issues from ai generated frontend code and from github projects consisting of uis and their frontend code.
our evaluation shows that designrepair effectively identifies and repairs design issues achieving a recall of .
and precision of .
for ai generated issues and a recall of .
with precision of .
for github issues.
additionally ourexperiments on each step highlights the effectiveness of the strategies we proposed.
finally a user study with participants further confirms the high quality of our repairs.
all our code and prompts are released at our github repository1.
our contributions are as follows we systematically analyzed material design guidelines and converted them into structured knowledge bases i.e.
low level component knowledge base and highlevel system design knowledge base enabling efficient and effective utilization of knowledge in design quality assurance processes.
we introduced designrepair a novel dual stream knowledge driven llm based method uniquely designed to detect and repair design quality issues in frontend code.
this approach simultaneously considers both the source code and the user perceived rendered page ensuring outstanding performance in design quality enhancement.
we conducted extensive experiments and a user study with participants which demonstrate the effectiveness and usefulness of our approach.
ii.
b ackground a. material design guidelines material design is a broad design system built and supported by google designers and developers and can be implemented across android ios and web platforms.
its latest version material design provides guidelines and examples to support important practices of user interface ensuring personal adaptive and expressive experiences.
it covers topics ranging from fine grained design guidelines such as the application of individual components and color usage for specific meanings to the high level composition of components and common design patterns.
the guidelines consist of three main sections foundations styles and components.
foundations inform the basis of any great user interface from accessibility standards to essential patterns for layout and interaction.
for example it offers advice on simplifying the hierarchy of ui elements making them more straightforward to perceive and understand.
styles are the visual aspects of a ui that give it a distinct look and feel.
for instance they may include recommendations on color palettes to maintain a consistent appearance across the app s user interfaces and guidelines for choosing colors for primary secondary and tertiary accent groups to enhance the user experience.
components are interactive building blocks for creating a user interface.
they can be organized into categories based on their purpose action containment communication navigation selection and text input.
these guidelines present best practices for selecting and utilizing components to effectively communicate the intended design purpose.
these three sections are interconnected collectively providing a comprehensive framework for designing intuitive and visually cohesive user interfaces.
use visually prominent filled buttons for the most important actions b do don t a button container s width shouldn t be narrower than its label text fig.
examples of recommended anddon t design guidelines in material design .
both guidelines are related to button component in the components section and regard to the usage aspect.
we categorised the recommended guideline as a soft constraint and do don t guidelines as hard constraints.
within these three sections they further classify the guidelines according to various aspects of ui ux design principles such as anatomy behavior responsive layout usage placement and other categories.
for instance the usage aspect focuses on how and when to utilize a specific component color or layout.
moreover they utilize clear text and illustrative examples to explain what to do do what to avoid don t and what is recommended .
adhering to the doand don t guidelines is crucial for delivering an optimal user experience violating them can lead to user confusion or dissatisfaction.
on the other hand following the recommended guidelines while not mandatory can enhance user engagement and satisfaction by refining the overall usability and aesthetic appeal of the interface.
for instance fig.
2a in the components section includes a recommended guideline for the button component stating use visually prominent filled buttons for the most important action illustrated with a join now button example.
on the other hand fig.
2b offers a don t guideline don t a button container s width shouldn t be narrower than its label text.
shown with an example where a button s label exceeds its container width leading to a poor user experience.
these two examples both focus on the usage aspect of the button component.
iii.
a pproach fig.
illustrates the overview of our approach designrepair which consists of three phases namely an offline knowledge base construction section iii a online page extraction section iii b and knowledge driven repair phases section iii c .
for the offline knowledge base construction phase we built a knowledge base kb consisting of two parts i.e.
a low level component knowledge base kbcomp and a high level system design knowledge base kb system .
this knowledge base functions as a domain expert offering guidance for addressing potential ui issues.
given the frontend code and rendered page we employ a parallel dual pipe method to extract the used components and fig.
framework overview of our approach their corresponding property groups as shown in fig.
3b .
finally we implement a knowledge driven llm based repair method fig.
c .
this approach allows us to carefully analyze and repair issues concurrently.
by employing a divide and conquer strategy we tackle each component property group separately before integrating the repairs.
this ensures a cohesive optimized final output achieved through a thorough and scrutinized repair process.
a. knowledge base construction as introduced in section ii a we utilize material design as our foundational knowledge base.
by systematically analyzing the guidelines for efficient knowledge retrieval we restructured them into two parts a low level component knowledge base kb comp and a high level system design knowledge base kb system .
kb comp provides detailed guidance for atomic level elements while kb system addresses the broader aspects of aesthetic and functional harmony in interface design.
for example a guideline from kb comp might ensure a button is sized appropriately for accessibility purpose while a guideline from kb system would focus on how this button fits into the overall page layout and flow.
within these knowledge bases we further classified the information into soft constraints i.e.
recommended guidelines and hard constraints a distribution by component type b distribution by component design aspects with soft hard constraint.
fig.
distribution of component guidelines i.e.
do don t guidelines catering to different levels of design concerns.
for instance a soft constraint would suggest font styles that align with the brand s aesthetic whereas a hard constraint may specify the minimum text size for readability.
component knowledge base we created the component knowledge base kb comp at the component level drawing from components section in the material design see section ii a .
each component is linked with a range of guidelines.
in total we obtained component types associating with material design guidelines.
fig.
4a illustrates the number of guidelines for each component type and the distribution of various ui ux design aspects like usage responsive layout that these guidelines address.
the distribution of guidelines across these component types demonstrates a notable imbalance showing a long tail distribution pattern.
for instance buttons and navigation components are the most abundant with and entities respectively while checkboxes are the least represented with only entities.
to facilitate understanding fig.
a shows two hard constraints and two soft constraints regarding the button component.
in this example the first hard constraint aligns with the guideline shown in fig.
2b and the first soft constraint correlates with the guideline in fig.
2a.
we further conducted an in depth analysis of our component knowledge base in terms of design aspects identifying the distribution of soft and hard constraints within each designaspect.
in total our kb comp includes hard constraints dos don t s and soft constraints recommended guidelines .
fig.
4b shows the distribution of different design aspects and the percentages of hard and soft constraints.
the anatomy aspect comprises .
of the guidelines whereas placement represents .
.
notably the number of soft constraints frequently matches or surpasses the number of hard constraints.
this suggests that while soft constraints might be less mandatory they offer a wealth of valuable information to convey better user experience.
in conclusion based on our detailed knowledge base we propose knowledge driven llm based method which can effectively manage the long tail distribution of design guidelines ensuring an equitable application of these principles across all component types.
system design knowledge base to mitigate the challenge of hallucinations in llms and enhance their analysis capabilities our approach involves a precise association of high level design guidelines with actionable properties.
this is based on the understanding that properties are the direct targets for addressing high level design issues.
to this end we reformulated high level design guidelines i.e.
foundations andstyles sections see section ii a into a structured system design knowledge base kb system .
in total we identified system design aspects e.g.
typography summarized properties e.g.
clickable and spacing and mapping relations between them.
for example design aspects role and utilities instyles color section as well as the design aspect accessibility contrast infoundations color section are both connected to the color property.
these relations are crucial for marking guidelines aiding llms in understanding the intricate relationships between design elements and their practical applications in a web development context.
based on this we reconstructed the design guidelines into triples of system design aspect property relation .
fig.
b shows two examples of the system design knowledge base.
foundations have key aspects including flow layout implementation structure label text and color.
for instance the flow aspect relates to how users navigate through an interface while color pertains to both aesthetic appeal and accessibility.
in total we identified knowledge entities for foundations.
styles consist of key aspects typography elevation icons color and shape.
these elements craft the ui s visual identity adaptable through material themes.
in our work we structured knowledge entities related to styles with icons specifically linked to icon buttons and shapes applicable across all component types.
property groups include categories group clickable spacing platform label text and color.
these are actionable property levels that we map to high level guidelines for effective detection and repair.
group this property is associated with the layout and accessibility elements within the ui focusing on aspects suchfig.
examples of component and system design knowledge entities as landmark recognition and prioritization in navigation.
it is linked to the structure flow and layout of foundations.
clickable this property predominantly relates to interactive elements like buttons focusing on accessibility aspects such as focus order and target size.
it is also connected to the elevation style emphasizing floating elements.
spacing integral to layout design this property focuses on the spatial arrangement and coherence of ui elements.
it is linked to the layout aspect in foundations.
platform this property addresses the layout implementation across different platforms ensuring accessibility and consistency in various environments.
it is associated with implement and layout in foundations.
label expanded to encompass alternative text and captions for images videos icons and buttons this property plays a pivotal role in enhancing accessibility.
it is linked to label for content accessibility in foundations as well as structure for accessibility labeling.
text this property group covers aspects of typography and content accessibility size.
it is connected to the typography style and the text and structure aspects of foundations focusing on size and accessibility in headings.
color color is intricately linked to both the aesthetic and functional roles in ui design including accessibility considerations like contrast.
this property group is connected to the color aspect in both styles and foundations.
b. page extraction in this phase given the code and the rendered page as inputs designrepair examine the usage of component in the code and system design aspects in the rendered output of the page.
this dual analysis is important as it bridges the gap between technical code and the user perceived experience.
it allows for detailed exploration of component usage within the code alongside addressing broader design concerns evident in the rendered output at the property group level.
components extraction the first aspect of our strategy is to identify a list of component types within the page under test put using gpt .
this initial step is important for the efficient retrieval of relevant component knowledge from kbcomp in subsequent repair stages.
given a put code input we propose a systematic component extraction prompt pcomp extrato analyse a put represented by the equation b1 pcomp extra input this process results in a list of component type names from the put defined by b1 componenti i .
.
.
k property extraction the second aspect of our extraction strategy leverages the playwright tool a robust testing tool developed by microsoft to dissect the rendered frontend page into various properties.
this approach is critical for understanding the complex relationships between different page elements and their various properties which are integral to addressing broader design issues.
properties are analyzed to ensure consistency in design elements such as spacing and color schemes as well as overall layout coherence.
this stage focuses on elements that are more readily apparent in the rendered output rather than just within the code itself.
the use of the playwright tool enables us to pre render the page and extract key dom information such as xpath color framed within seven specified categories group clickable spacing platform label text and color.
we process these properties to produce outerhtml property pairs yielding code snippets and property values.
this meticulous organization of data is crucial in pinpointing problem areas within the code thereby facilitating an in depth and thorough analysis by the llm.
it enhances the efficacy of the subsequent repair phase.
the output from this stage is represented as b2 a list of extracted property groups.
c. knowledge driven repair in the knowledge driven repair phase we leverage the reasoning capabilities of llms coupled with a broader spectrum of knowledge bases from section iii a to perform detailed repairs at both the component and property levels of frontend code.
this phase marks a critical transition from the initial analysis to the actual refinement and enhancement of the code based on the insights gained.
the process is divided into three key steps.
for each component or property group we first retrieve the related guidelines from our knowledge bases fig.
step c1 .
with related knowledge guidelines and associated component property group we adopt llms to conduct targeted repair fig.
step c2 .
this method ensures that the specific needs of various components and properties are addressed with focused attention.
finally we assemble reassess and synthesize the individual repairs into a cohesive optimized and final repaired output fig.
step c3 .
by adopting the divide and conquer strategy we ensure detailed thorough and holistic repair.
relevant knowledge retrieval in this step we first preprocess the retrieved components to map them with our component knowledge base and then retrieve corresponding knowledge from kb comp and kb system.
a component mapping and knowledge retrieval to map extracted web page components to the component names in our kb comp for alignment we use llms for reasoning with the prompt pmap kb.
this approach allows us to handle the diversity in terminology used across different front end libraries such as shadcn tailwind css without the need of defining any exhaustive rule based mapping function.
for instance a navigation bar component might be referred to as navbars in tailwind css while in shadcn ui it could be labeled as navigation menu .
such variability in naming conventions can be effectively addressed by llms without the need to define an exhaustive mapping function.
the mapping process is represented by b1 pmap kb b1i i .
.
.
k where b1 is the resultant list of components mapped to our kb comp equivalents.
the corresponding knowledge items forb1 are then retrieved from kb comp denoted as c2comp.
b property knowledge retrieval for each property group inb2 we directly retrieve related knowledge items from our kb system denoted as c2property .
c aggregation finally we aggregate the extracted information and the retrieved knowledge as the following c1 b1 b2i i .
.
.
j c2 c2comp c2propertyi i .
.
.
h inc1 we have a list of mapped components and property types extracted from the put.
furthermore c2contains the corresponding knowledge entities from our knowledge bases.
examples of these entities are illustrated in fig serving as preparation for the repair stages.
individual repair in the individual repair phase we implement an llm driven detail oriented process to inspect and repair frontend code in relation to specific components and property groups.
this phase also employs a distinct approach for handling soft and hard constraints to guide the analysis and repair process denoted as c3 .
the output of this phase is formatted as a json object comprising sections for poor design code snippets associated guideline