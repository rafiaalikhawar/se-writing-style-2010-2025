what makes a good commit message?
yingchen tian beijing instituteof technology beijing china tianyc10 foxmail.comyuxia zhang beijing instituteof technology beijing china yuxiazh bit.edu.cnklaas jan stol universitycollege corkand lero school of computer science and it cork ireland k.stol ucc.ie lin jiang beijing instituteof technology beijing china jianglin17 bit.edu.cnhui liu beijing instituteof technology beijing china liuhui08 bit.edu.cn abstract a key issue in collaborative software development is communication among developers.
one modality of communication is a commit message in which developers describe the changes they make in a repository.
as such commit messages serve as an audit trail by which developers can understand how the source codeof a project has changed and why.
hence the quality of com mit messages affects the effectiveness of communication amongdevelopers.
commit messages are often of poor quality as devel opers lack time and motivation to craft a good message.
several automaticapproacheshavebeenproposedtogeneratecommitmessages.however thesearebasedonuncurateddatasetsincluding considerableproportionsofpoorlyphrasedcommitmessages.in this multi method study we first define what constitutes a good commit message and then establish what proportion of commit messageslackinformationusingasampleofalmost1 600messages from five highly active open source projects.
we find that an averageofcirca44 ofmessagescouldbeimproved suggestingtheuseofuncurateddatasetsmaybeamajorthreatwhencommitmessage generatorsaretrainedwithsuchdata.wealsoobservethatprior work has not considered semantics of commit messages and there is surprisingly little guidance available for writing good commit messages.
to that end we develop a taxonomy based on recurring patterns in commit messages expressions.
finally we investigate whether good commit messages can be automatically identified suchautomationcouldpromptdeveloperstowritebettercommit messages.
ccsconcepts software and its engineering collaboration in software development programming teams.
yingchentianandyuxia zhang made equal contributions to this work.
correspondingauthors this work is licensed under a creative commons attribution international .
license.
icse may pittsburgh pa usa copyright held by the owner author s .
acm isbn .
commit based software development open collaboration commit message quality acm reference format yingchentian yuxiazhang klaas janstol linjiang andhuiliu.
.
what makes a good commit message?.
in 44th international conference on software engineering icse may pittsburgh pa usa.
acm new york ny usa pages.
introduction collaborativesoftwaredevelopmentisaninherentlysocialactivity and is commonly facilitated through version control systems vcs such as git .
a vcs maintains a record of code changes and manages simultaneous access to development artifacts .
each commit should contain both changes to source code andotherstoredartifacts andamessagethatexplains whatchanges aremade and why .figure1showsanexampleofacommit messagefromthespring bootproject .awell writtenmessage is needed to communicate the context of a change to collaborators whichallowsthemtoreviewthechangeandunderstanditsimpact .forlong livedprojects suchasthelinuxkernel commit messages might be the only source of information left for future developers to understand what changes were made and why those were made when the original developers have left a project .
software development is increasingly done in distributed settings involving developers from many different cultures and backgrounds.
as well in the past years commercial participation in opensource software oss projects hasincreased dramatically leadingtofurtherdiversificationinthedeveloperworkforceonossprojectsthathavebecomeessentialbuildingblocks formanysoftwareorganizations.thisinturnmayfurtherdiversify gg xwk uhvrxufh vhuyhu vdpsoh 6krzv krz wr xvh qdeoh5hvrxufh6huyhu lq d sxuh uhvrxufh vhuyhu dqg frqiljxuh wkh vhfxuh sdwkv rpplw deg ef e d h e d ige d i dwh 7kx 2fw figure example of a commit message from spring boot ieee acm 44th international conference on software engineering icse icse may21 pittsburgh pa usa tianet al.
the quality of commit messages as individual developers and organizationsmay exhibit different development cultures and habits.
severalresearchershavefoundthatthequalityofcommitmessages in repositories varies due to a lack of motivation or time .forexample previousstudiesobservedthatca.
ofcommitmessagesinover23 000ossprojectswerecompletely empty of the messages contained only a few words and only ofcommitshadmessagescontaining normal descriptiveenglish sentences .
chahal and saini proposed a syntactic modeltocalculatethequalityofcommitmessages.however this model can only assess the quality at the syntactic level through evaluationof rules suchas thefirstcharacterofthesubjectline shouldbe capitalized this model does not consider the semantics of commit message contents.
further developers may not know what kind of information should be written to produce a good commit message .
the practitioner community is keen to help theircontributorsunderstandhowtowriteagoodcommitmessage as evidenced by guidelines such as the commit message should describe what changes our commit makes to the behavior of the code not whatchanged in the code .
to help developers write commit messages addressing a potential lack of motivation and time several tools have been proposed thatcangeneratecommitmessagesautomatically .tools likedeltadoc andchangescribe canproducedetailedmessages based on the changes contained within a commit that can mainly answer whatwas changed.
however the generated messages cannot reveal whythe change was necessary.
inspired by previous observations that commit messages follow certain patterns recent approaches generated commit messages from prior changes and their associated commit messages whichmaycontaintherationaleforanycodechanges.forthose approaches the quality of generated commit messages relies on messagesofsimilarcodechangesinthetrainingdata.amajorproblem is that the quality of commit messages in oss projects used in trainingdatasetsforautomaticgeneratorsmightvaryconsiderably.
therefore using low quality commit messages in training datasets introduces a major threat if these poor commit messages are not filtered out.
moreover when the generated messages are the same orsimilartothelow qualitymessagesintestingdatasets automatic tools may yield an artificially high precision.
unfortunately many modelsproposedthusfarweretrainedandevaluatedondatasetsof commit messages which simply removed trivial messages without payingattentionto the content quality of these messages.
this state of affairs leaves a number of important open questions unanswered.
first rq1 to what extent do poorly composed commit messages exist?
to the best of our knowledge no prior work hasdefined oranalyzed whatmakes a good commit message and subsequently analyzed commit messages to assess the extentofhowthequalityofmessagesvaries.second rq2 having established what makes a good commit message at a high level what are recurring patterns of how these well written messages are expressed?
as we observed the current state of the art does not considerthe semanticsofmessages only their syntax.finally future tools that could assist developers in writing good commit messagesshouldbeabletorecognizewhetherawrittenmessage is good or not for example tools that can prompt developers in real time as they attempt to make a commit may help improve thequality of commit messages.
these tools would also be very useful for researchers in constructing high quality datasets of commit messagegeneration.hence ourthirdresearchquestionis rq3 can commitmessages of good quality be automatically identified?
to answer these questions we conducted a multi method study.
wefirststudiedandanalyzeda setofca.
commitmessages sampledfromfivemajorossprojects.wedefineda good commit messageasonethatexplainswhatwaschanged andwhyachange was made.
we found that around of commit messages lack why or what information.
this highlights the risk of generating messages based on an unfiltered training dataset that includes lowquality commit messages.
second we qualitatively analyzed messageswith good messagelabelstoidentifyexpressioncharacteristics.third webuiltamodelbasedonbi lstmtoautomatically identifywell written messages achieving good performance.
thispapermakesanumberofpracticalandtheoreticalcontributions to the literature on understanding and identification of high quality commit messages.
specifically we propose a set of criteria for identifying well written messages demonstrate that considerable proportions of commit messages lack essential information thushighlightingthatthisvariationinqualityrequires measures to mitigate propose a taxonomy of the expressions of commitmessages and4 buildanautomatedclassifiertoidentify well written messages.
in the remainder of this paper we review related work in sec.
outline our multi method research approach in sec.
and present theresultsofourstudyinsec.
.wediscusstheimplicationsfor researchandpracticeinsec.
.wepresentthreatstothevalidity of our reported findings in sec.
and conclude the paper in sec.
.
related work commitmessagesconstituteanimportantmodalityincollaborative software development for sharing knowledge among developers and in establishing an audit trail of the evolution of a software project.
we discuss prior literature that has focused on understandingandutilizingcommitmessagesandhowtoautomaticallygeneratecommitmessages.
commitmessagesareakeyresourcewhenaddressingseveral software engineering challenges.
one stream of research has focused on classifying code changes into different types by utilizing commit messages manually or automatically to assist maintenance .
for example mockus and votta identified three typesofcommits adaptive corrective andperfective consistent with swanson s typology of maintenance activities .
based on the proposed commit types numerous classification models have been proposed and commit messages play an important role .
a second stream of research has focused on the measurement of quality of code changes by analyzing commit messages.
for example agrawaletal.
studiedtheevolutionofcommitquality in five projects by measuring among others the number of unique commit messages and found that the quality of commits declined over time.
santos et al.
studied the relationship between unusual messages and code quality in commits and found thatunusualmessagescorrelatewithbuildfailures suggestingthat these messagesserve as a warning sign.
2390whatmakesa good commit message?
icse may21 pittsburgh pa usa while it is clear that commit messages play an important role in communication among developers developers may lack time or motivation to craft good commit messages that clearly communicatewhatisbeingcommitted.toaddressthis severalscholars have proposed automatic approaches to automatically generate messages.someofthemarerule basedorusepredefinedtemplates .
for instance buse and weimer used symbolic execution to generate path predicates between versions of code changes then populated pre defined templates and applied summarization transformations to generate commit messages for code changes.
two important limitations of these commit messages generatedbasedontemplatesare alackofflexibility and they cannotconveytheintentofcommittingchanges whichonlyexists ina developer smind untilit iswritten.recent studiesrely onadvancedtechniques suchasinformationretrievalanddeeplearning to generate commit messages automatically.
thesetendtorelyonreusingmessagesofsimilarcodechanges.for example huang et al.
calculated syntax semantic pre syntax andpre semanticsimilaritiesofchangedcodefragmentsbetween twoversionstofindsimilarcodechangesandreusetheirmessages.
whilespecificmodelsvaryintheirtechniques acommonfeature isthattheytakepriorcommitmessagesasakeyinput.forthese information retrieval and deep learning based tools the quality ofthemanuallywrittencommitmessageisdifficulttoguarantee which maythreatenthe effectivenessof these tools.
a fewstudies investigated thecontent ofcommit messages but mainlyfocusedonspecificaspects.forexample alomaret al.explored how developers document their refactoring activities in commitmessages andfoundthatdeveloperstendtoexplicitlymention the improvement of certain quality attributes and code smells .chahalandsaini constructedamodelthatcanjudgethe quality of commit messages by calculating syntactical measures.
text content in other oss development activities has been studied such as what how to document when submitting patches and what information is needed in a bug report .
the results of our studyonthedistributionandexpressioncategoriesofgoodcommit messages and their relationship with maintenance activities can complement prior understanding of what is a good commit message and how to write one.
moreover we propose a good message identificationtoolthatcanbeusedtopromptdeveloperstowrite bettercommitmessagesandbuildhigh qualitydatasetsforthetask of automatically generating commit messages.
study design to address the three research questions introduced in sec.
we conducted a multi method study.
to address rq1 we compiled adatasetofcommitsandmanuallyclassifiedthemessagesbased on our definition of a good commit message.
sec.
.
describes sampleselection datacollection anddataprocessingsteps.sec.
.
describes our approach to classifying commit messages.
to address rq2 we develop a taxonomy that describes how commit messages convey what and why information see sec.
.
.
finally to address rq3 we propose a model that could identify these wellwritten messages automatically see sec.
.
.
figure presents an overview of this approach.
the appendix offers a replication package .
.
data collection and preprocessing to ensure that our sample would contain sufficient high quality commitmessages weselectedactiveandpopularprojectswitha high level of collaboration.
we assumed that those projects would have at least some non trivial portion of good commit messages.
considering the impact of different programming languages on software development in this study we focused on projects writteninjava oneofthemostpopularprogramminglanguagesin github andwidelyusedinindustry.weselectedthetop100 java projects sorted by their star rating in github.
while reviewing these projects we prioritized projects that had previously been subject of studies that focused on automatic generation of commit messages.byaddressingsomeofthelimitationsofthosestudies we seektooffertheresultsofthisstudyinfutureimprovementofthose prior studies focusing on commit message generation.
as a result weselectedfiveossprojectsforthisstudy listedintable1.
springboot helpsdeveloperscreateandrunspring basedapplications with less configuration.
apachedubbo is a high performance micro service development framework.
okhttp i sah t t p client.junit4 providestheabilitytowriterepeatableunittests.
retrofit isatype safehttpclientforandroidandjava.each of the five widely investigated projects has morethan150contributors over8 000stars andthousandsofcommits indicating that there is active collaboration happening within these projects.
wecollectedallthecommitsfromthefiveprojectsusinggithub s rest api up to february .
in the data collection we only considered commits in which the messages are written in english.
thisresulted ina datasetcontaining 886commits see table1 .
weeliminated commitmessages generatedautomaticallyby tools botmessages basedonfixedpatterns becausethisstudy focuses on messages written manually.
based on the patterns identified by existing work these bot messages can be easily identifiedandfiltered.table2showsseveralpatternsofbotmessagesin ourdataset whichwereexcluded ignoringcases .afterthisdata cleaning step commit messages remained.
table dataset summary statistics until feb project start contrib.
commits cleaned spring boot oct apachedubbo jun okhttp jul junit4 apr retrofit sep .
identifyingwell written messages it is known that the quality of commit messages varies but a widely recognized standard of high quality messages is as of yet lacking.
before investigating the characteristics of well written messages we constructed the standards to identify them via a survey of both academic papers and developer forums and validate thestandardswithexperiencedossdevelopers asdescribedbelow 2391icse may21 pittsburgh pa usa tianet al.
!
!
!
!
!
!
figure overview of our approach table non human written message patterns no.pattern 1mergebranch branch of projecturl into branch 2merge remote tracking branch branch into branch ...cherry picked from commit commit url 5next development version version number 6message written by non human accounts such as spring operator dependabot no author branch meansbranchnameof the project ... means optional to obtain a scientific perspective of commit messages we identifiedandreviewed46relevantstudies thefullpapers arelistedinouronlineappendix mainlyfocusingon the expectation of commit messages and whether there is a standard of good messages.
to obtain a pragmatic and practice oriented view of commit messages weusedgoogle ssearchenginewiththe phrase good commitmessage.
in the top50 resultssorted by relevance we manually selected and studied the online records andtheirreferences fromosscommunitiesorossdevelopers thewholesetoflinksisincludedintheappendix .
furthermore wealsosolicitedopinionsfrom30experienced ossdeveloperstogathertheirviewsonwhatconstitutesa goodmessage wedefined experienced hereasthosedevelopers who contributed more than commits to the studied projects.
throughqualitativeanalysisoftheselectedrecords weobserved thatthemostfrequentlyrecognizedexpectationofacommitmessage isto summarize the changes in this commit noted as what and describe the reasons for the changes noted as why .the surveyed developers showed a high degree of consistency in the content of commit messages approximately of themheldtheviewthatacommitmessageshouldsummarize what was changed and describe whythose changes are needed.
that is ratherthanonlysummarizingchangesordescribingthereasons for the changes a commit message should have both what and whyinformationto help collaborators understand the changes.therefore weconducted thisresearch basedon thehypothesis that a good commit message should contain a justification i.e.
why that describes the motivation of the change and a change summary i.e.
what .dependingonwhetherornotthetwokey elements whyandwhat areincluded wedividedthecommitmessagesin ourdatasetinto fourtypes whyandwhat containing both no why only what information but no why no what onlywhy butnowhat and neitherwhynorwhat .
wenotethat why information for certain changes might be common sense.
for example thecommitmessage fix typo a an omitsthereason of making this commit which can be easily inferred as improving readability.
fromtheperspectiveofreducingdevelopers workload wedidnotclassifythesecommitmessagesas nowhy because the rationale is trivial.
similarly some what information could be easily inferred from diffs 1and we took the same approach as we did for why.
more details of the categories of common sense why and easy to infer what can be found in sections .
.
and .
.
.further wefoundsomecommitsexpresswhyinformation byprovidingalinktoanissuereportorpullrequest whichusually includesadetailedmotivationanddiscussionsofthechange .
this approach is controversial however one school of thought argues that these linked resources provide a convenient way to offer full details that lay out the rationale for a change .
another school of thought argues that suchlinks pose a risk as they might gostale resultinginalossoftheinformationtheypointto thus resultingincommit messagesthataredifficult tounderstand .
in this study we took the former view and treated links of issue reports and pull requests in commit messages as a way to provide whyinformation.
to study the distribution of the four message types in the selectedprojects weusedtheclusteredrandomsampling technique on thefive projects commit dataand selected commitmessages confidencelevel marginoferror which werecommittedby339developers.onaverage eachdevelopersubmitted approximately five commits in our dataset.
the first two authorsofthisstudylabeledthecommitmessagesindependently categorizingeachintooneofthefourmessagetypes.duringthe labeling process we identified and eliminated non atomic commits wheremorethanonechangewassubmitted.makingmultiple 1diffsare raw content of changes generated using the git diffcommand to show differencesbetween different versions of commits.
2392whatmakesa good commit message?
icse may21 pittsburgh pa usa changes in a single commit is considered bad practice as it may reducemaintainability .afterlabelingthemessages minus52thatwereremoved cohen skappacoefficientofagreement betweenthetwoauthorswas0.
.asforthemessages labeled differently we held several meetings to resolve approx.
.
disagreements.ifthefirsttwoauthorsfailedtoreachanagreementonthetype athirdauthoractedasanarbitrator.moreover wevalidatedthelabeledresultsbyconductingasurveywithoss contributors.specifically weselected958experiencedcontributors i.e.
thosewhocontributedmorethantencommits fromthetop 100javaprojectssortedbytheirstarcountandsentthemaquestionnaire see the appendix to solicit their views.
we received 30validresponses aresponserateof3.
.aftercalculatingthe120 resultslabeledbydevelopers eachrespondentlabeledfourcommit messages wefoundthat102resultswerelabeledconsistentlywith ours.thisindicatesthattheaccuracyofthedatasetreachedalmost .
.
characterizingwell written messages in the second phase we sought to identify the characteristics of well writtenmessages labeledinsec.
.
.wemanuallysampled confidencelevel marginoferror commitmessages with a labeled type as why and what that is messages that contained both why and what information and thus did not miss importantinformation.amongthe271commits weremoved19 commits that only use links of pull requests or issue reports to expresswhy.fortheremaining252messages weusedthematic analysis tocharacterizehowdevelopersexpresswhyandwhat information in the commit messages according to the following process.
we first read and analyzed all the commit messages to understandhowdevelopersdescribedcodechangesandmotivation andidentifiedphrasesthatexpressedwhyandwhat.
wereread the whole commit messages and related phrases carefully to generateinitialcodesandorganizetheminasystematicway.
after completing the generation of the initial code we aggregated codes with similar meanings and identified an initial theme representing thatcluster.afterthisstep allcodesweredividedintooneofthe initial themes which helped in identifying any emergent patterns that characterized the descriptions of why and what.
we then reviewedtheinitialsetofthemestoidentifyopportunitiestomerge similar themes.
by clarifying the essence of each theme similar themesweremergedintoanewtheme orathemewasincludedas a sub theme.
in the last step we defined the final set of themes.
to reduce any researcher bias steps to described above were performed independently by the first two authors .
after this asequenceofmeetingswasheldtoresolveconflictsandassign the final themes step .
duringthematicanalysisofthe252commitmessages wefound thewaydevelopersdescribewhyandwhatinmessagestendsto vary across different types of maintenance activities.
therefore wealsoclassifiedcommittypestoinvestigatetherelationshipbetweenmessageexpressioncategoriesandmaintenanceactivities.
prior literature provides a variety of code change classifications but no consensus was reached regarding the differenttypesofclassificationtowhichacommitrefers.therefore after an ad hoc literature review we adopted the widely used definitionof mockus and votta for three commit types corrective changes address processing performance and implementation failures adaptivechangesrepresentchangesinthedataenvironmentorprocessingenvironment.forexample toimplementanew function and perfective changes which focus on improving non functional attributes such as efficiency performance cleanup etc.then weidentifiedcommittypebydeductivethematicanalysis whichcanmatchthedatawiththemesfromextantresearch.
more specifically the first two authors independently took the theoreticalpropositionsderivedfrommockusandvotta asapoint ofdeparture andappliedthemtothe252commitmessages.weobtainedahighlevelofconsistency cohen skappacoefficient .
between the two coders.
the two coders discussed and resolved any disagreements.
.
automatic identification in the third phase we sought to develop a solution that could automaticallyidentifywell writtenmessages.aswedefinedhighquality commit messages as those containing both why and what information we first designed two classifiers that could automatically identify whether a message contains why labeled c why andcmeans classifier andwhat labeled c what separately.
training the two separate classifiers can offer more fine grained feedbacktodevelopersbyindicatingwhichofthetwokeyelements why and what is missing.
we then selected and combined the two classifiers with the best performance to automatically identify well writtenmessagesthatcontainbothwhyandwhat labeled asc good .
.
.
data preparation.
we used the commit messages labeled in sec.
.
to train and test the three classifiers.
commit messages usuallyincludeseveraltokensthatarenot naturallanguage such aslinkstopullrequests.sincetheirfullsemanticsarehighlyspecific tothecontentsofthecommits whichwedonotconsiderinthis paper wereplacedthesetokenswithplaceholdersindicatingthe kindofinformation toensurethemodelswerenotaffectedbysuch trivial commitcontent.
specifically we identified and replaced the followingtokensofnon naturallanguage wereplacedanyurls in a message with x url where x refers to the types of urls i.e.
pr indicating pull request links issue indicating links of issue reports and other.
we replaced code elements in the messages with x name where x refers to the types of code elements such as method and file.
these code elements were identified by comparing messages with the corresponding code changes.
we retained the paragraph information for commit messages by replacing newline characters with enter .
.
.
identification.
itislikelythattheoriginaldatasetisimbalanced i.e.
the number of messages that contain why or what is larger than the messages that do not contain this information.
however imbalanced datasets can cause machine learning ml modelstofocusonmajorcategoriesandundervalueotherminor categories that we are more concerned about in this paper.
mlbased classifiers often use over sampling methods to solve the data imbalance problem so as to achieve better performance.
to this end wetried three widelyused over sampling techniques including random sampling with replacement synthetic minority 2393icse may21 pittsburgh pa usa tianet al.
oversampling technique smote and the adaptive synthetic adasyn topreparethedatabeforetrainingtheclassifiers andselectedthetechniquethatproducedthehighestaccuracyin each classifier.
next the input textual messages were vectorized.
the vectorizationmethod i.e.
bidirectionalencoderrepresentationsfromtransformers bert has been shown to exhibit good performance innaturallanguageprocessingtasksincludingtextclassification .
we used bert to embed the tokenized and padded commit messages and convert each message into a numeric vector.
a large numberoftechniqueshavebeenproposedtosolveautomaticclassificationtasks .weconsideredthemostwidely usedtechniques to classify commit messages including long short term memory lstm bidirectional long short term memory bi lstm multi layer perceptron mlp logistic regression random forest k nearest neighbors knn gradient boosting machine and decision tree .
we evaluated their performance in our classification task and selected the best performingapproach.
results we now present the results of our study addressing the three researchquestionsoutlinedinsec.
.sec.
.1presentsthedistribution ofdifferenttypesofcommitmessages.sec.
.2presentsataxonomy of well written messages comprisedof expression categories that developers use to describe what and why information.
sec.
.
presentstheperformanceresultsofourautomaticclassifierofwellwrittenmessages.tofacilitatetraceability weprovidequotemessages and provide identifiers in our database .
.
qualitydistributionof commit messages we manually classified commits sampled from five oss projects into four types based on whether their messages containwhyandwhatinformation seesec.
.
.wecalculatedthe distributionofthesefourtypesofcommitmessagesinthefiveoss projects.figure3presentstheresults.wecanseethatthedominating type in four projects except retrofit is well written messages i.e.
these messages contain both why and what information.
the ratioofthismessagetypeinthefiveprojectsvariesfromca.
to ca.
withanaverageratioofca.
suggestingthataround44 ofcommitmessageshavequalityissues.this inturn suggeststhat any automated approaches to generate commit messages which aretrainedusingdatasetscontainingsuchlargeportionsmaybe compromised asthegeneratedmessagesmayhavelearnedfrom such incomplete messages.
while our sample of five projects is clearlynotrepresentativeofthelargercorpusofjavaprojectson github thisfindingdoeshighlightapotentialissueintermsofthe effectiveness of existing tools.
asforthethreequestionabletypesofmessages nowhy containingonlywhatinformation accountsforthelargestproportion with an averageof and is approximately twicethe ratio on average of the messages containing only why information.
it may indicate that writing the reasons of code changes is more challengingthandescribingwhatwaschanged.further thewidely different proportions of no why and no what may explain why generating why information for code changes is harder than56.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
dubbo junit4 okhttp retrofit spring boot neither why nor what no what no why why and what figure3 distributionofthefourtypesofcommitmessages generatingwhatinformation whichpreviousstudieshaveborne out .
the type of messages that contain neither why nor what accountsforthesmallestproportion rangingfromca.
toca.
.
tofurtherinvestigatewhatinformationthetype neitherwhynor what exactly contains we manually analyzed all the messages of this type.
following the same set of steps of thematic analysis describedinsec.
.
weidentifiedfivecategories eachwith unique characteristics single word message containing only one token which hardly expresses any information.
merge polish and file name are typical examples in our labeled data.
submit centeredmessage expressingnothingbutthefact that it is a commit.
for example loader changes .
it is obvious that this is a commit but it is impossible to know what the changes are and why they were made.
scope centeredmessage explainingnothingbutthescope of the changes.
typical messages of this category include minor changes in test .
most of such messages contain qualifyingwordslike major and minor andcannotexpress otherinformation.
redundant message describing content that is easy to inferfromcodediffs.forexample add filename delete file name .
even without reading this message the fact that a file was added or removed can be easily established.
irrelevantmessage describingsomethingirrelevanttothe change.amessagesuchas kent erichpatchswallowing inmerlin iswrittentocommitanon emptymessage which conveys no information at all.
the analysis above clearly demonstrates that a considerable portion of commit messages is problematic i.e.
they do not contain important information.
that is they either miss what or why 2394whatmakesa good commit message?
icse may21 pittsburgh pa usa information orboth.aswediscussedinsec.
severalmessagegenerators have been trained and evaluated using commit messages as datasets withoutfilteringoutsub optimalmessages.consequently a major threat was introduced due to using sub optimal data.
the fourth type neither why nor what might be easy to identify andremove butthistypeonlyaccountsforalimitedproportion.
in other words filtering this type of message cannot address the threatsufficiently andamorepowerfulautomaticidentifierofgood messagesis needed.
summary for rq1 the quality of commit messages varies in the five studied oss projects with on average ca.
of messagesinneedofimprovement.further weidentifiedfive categories of messages that contain neither why nor what.
.
a taxonomy of commit messages wenowturntorq2 whichseekstoshedlightonwhatmakesa well written commit message.
we identified the various categories of rationales the why as well as the contents the what and analyzed the relationships between these categories and the typologyofmockusandvotta .notethatmultiplecategories of why or what may exist in the same message.
specifically we introduce these categories in sec.
.
.
and .
.
and present the prevalence of these categories in sec.
.
.
.
we summarize the detailedcodesandstatisticsofthewhyandwhatcategoriesinour online appendix .
.
.
why expression categories.
by analyzing the various ways in which developers express the change rationale i.e.
why we found that developers tend to express this directly or indirectly orsometimesnotatallwhenthereasonforachangeiscommon senseorcanbeexplainedbythechangeitself.usingtheprocedure outlined in sec.
.
we identified five main categories with subcategories.weintroducethese sub categorieswithexamples as follows including their counts and percentages indicated in parentheses in the analyzed commit messages.
describeissue .thiscategorydirectlyelaboratesthemotivation ofacodechange itismainlyconcernedwithanissueinthecurrent code implementation.
developers explained their motivation for a change by describing the issues and the specific scenario in which they occurred.
this makes the context of a commit easier to understandfor othercontributors.we identified three subcategories di1describe error scenario .
thissubcategorydirectly describes where and how an error occurs.
it is the mostcommonwayofdescribingwhyachangewasmade.
developersfrequentlyindicatedthesourceofabug orspecified the steps for reproducing it and also explained their impact for example as is it throws unchecked exceptions on unexpectedcharsets.thisisaproblembecauseitcancausea misbehavingwebserver to crash the client.
di2introduce issue report .
this subcategory describes issues mainly by citing errors defects or warnings fromqualityassurancetools.somerecognizedorcommon tools are usually chosen to achieve the contributor s commonunderstandingofthemistakes.forexample removewarningsfoundbyerrorprone.
calltest.java warning unnecessary use of grouping parenthese .
this message cites a warning message from the tool errorprone to describe the motivation for thiscommit.
di3describe shortcoming .
this subcategory highlights the shortcomings or weaknesses in the current implementation whichisthemotivationtomakethiscommit.for example i munhappywithjava.io notimeouts features like mark resetand available are clumsy .
illustraterequirement .thesecondcategory illustraterequirement describes the source of requirements that led to this commit.
theserequirementsincludetheneedforsoftwaredevelopmentand addressingproblemsintheprocessofsoftwaremaintenance.we identified three subcategories ir1usage need .
these commit messages describe specific needs or requirements of users in software development.thismessagehelpsothercontributorsunderstand thebackgroundandnecessityofthischange.forexample error prone only works on pre at the moment and we need this configurationto apply for all jdks .
ir2out of date .
these commit messages indicate the obsolescence of some features or code.
this includes the deprecation and subsequent removal of unused code objects such as classes methods or attributes as the software evolved.
other object version upgrades may also cause a dependency to become obsolete requiringmodifications.forexample removeoutdatedkey.the spring.metrics.export.redis.aggregate key pattern isnolonger definedbutwasstillreferencedinthedocumentation.
.
ir3runtime or development environment change .
commit messages in this subcategory indicate an adaptationtothecurrentcodedevelopmentorruntimeenvironment.
this includes changes to the implementation to adapt dependent functional changes modify documents returnvalues orexamplestoaccommodateapimodifications etc.
for example api has changed fixing the example indicatesthatthedeveloperchangedtheexampletomatchthe changes of an api .
describeobjective .thethirdcategoryofrationaleprovidesthe purpose of a change such as the future prevention of defects or optimization of functionality or performance.
we identified two types of objectives do1to fix defects .
thesecommitmessagesmakeexplicit that the purpose of a change is to resolve a defect.
differentfrom describe error scenario di1 thatdescribes how a defect occurs or can be observed this type of expression clarifies how the proposed change will resolvea defect as in this example fix concurrent problem of zookeeper configcenter wait to start until cache being fully populated .
do2tomakeimprovements .
amessageinthissubcategory directly describes the improvement of an author s codeimplementation e.g.
functionalimprovementornonfunctionalgoals.themessageexplainsthereasonsforthe 2395icse may21 pittsburgh pa usa tianet al.
change by describing a specific promotion goal.
commit messagesin thiscategory usually use phrasessuch as to do something orforsomething todescribewhatanauthorseeks to achieve.
for example the message androidlog added methods for easier subclassing.
clarifies thatthe change willsimplifythe actof subclassing.
imply necessity .different from commit messages in the previous three categories messages in the imply necessity category onlyindirectly describetheneedforchanges.developersindirectly describedthenecessityofchangesusingthemessagesthatfallinto the followingsubcategories in1conventions and standards .
thissubcategory describes or refers to any conventions or standards that are thebasisforachange thusdemonstratingasoundrationale of the change.
conventions are agreements among developerswithintheproject orcouldalsobeindustry wideconventions.standardsarewrittenspecifications oftenrather technical and more formal and thus are more rigid than conventions.
a common understanding among contributors expressed in commit message makes a commit easier to understand.
for example one developer referred to a convention regarding the location of tests thus explaining why thecommitmovesthelocationofthetest itiscommonto add teststo the same package as the class under test .
in2relation to prior commits .
thesecommitmessagesexplaintherelationshipbetweenthecurrentcommit and any commits that were already merged into the repository.
these messages clarify the motivation by improving anyproblemswithaprioracceptedchangeorusingthenew features introduced by a previous change etc.
therefore whilethe describe issue categorymaybeusedtoindicate that there is a problem beforechanging it the nature of this subcategory is to introduce prior accepted changes as the context for the current commit.
for example this commit adds a test because the code was changed by commit other url but unfortunately the test was not part of the commit .
in3relation to an implemented feature .
some commits are related to an existing feature and this relationship provides the context of the new commit.
the current change is part of a large operation that may be underway suchasthemessage indicatesthatthecurrentchange is a short step on the road to http body format agnostic support.
the current change may also be preparation work for an accepted feature such as message which directly explains that the change will make a future change easier to land.
in the context of established goals achieving functionalityorlargeroperations themotivationforthis change willbe clear.
in4improvementsandbenefits .
the last subcategory refers to commit messages that indirectly describe the need for a change by explaining the improvements and benefitsthatthechangewillbring.suchcommitsmayinclude eitherfunctionalornon functionalimprovementssuchas readability and maintainability.
the commit message may alsoinclude a comparison between before and after thecommit which gives collaborators a better understanding of the motivation for change.
for example the following commit message suggestsa proposed improvement and the associatedbenefit usecustomexceptiontype .sincewe omitthestacktrace thismoreclearlyindicatesthesourcebeing from retrofit s mock behavior .
missingwhy .thiscategoryincludescommitmessagesthatdo not offer a rationale for example when it is common sense or easy toinfer.insuchcases thereisnoneedtoprovidearationale.these includethe following six subcategories mw1test cases .
these commits involve adding test cases to the repository in many projects there is consensus among developers to add test cases for each feature.
for example testsfor cancelingasyncrequests.
.
mw2typographic fixes .
these commits involve the correction of typographic errors.
fixing such errors helps to increasethecorrectnessandreadabilityofcodeordocumentation for example fix typo a an .
mw3textfilechanges .
thesecommitsinvolvechanges made only in text files.
such files have specific functions suchas changelog filesthatrecordchanges readme files that outlinethe project and so on.
mw4annotationchanges .
annotationchangesspecifically refer to the motivation to modify the content of annotations.
annotations are descriptions of code objects and their main purpose is to increase the readability of the code so the why for comment changes is common sense.
for example add docs about null responses .
mw5code refactoring .
thesechanges involverefactoring and formatting of code.
changes may include polishing formatting renaming cleaning up and other similar operations to imp rove the r eadability of the code.
for example polish pom.xml.
apply consistent formatting drop jdk support andcleanup repo .
mw6version management .
these commits include changesthatinvolveversionmanagement suchastheupdatingofversionnumbers.thisisanessentialstepasittags a specific version of the software which is important for maintainability e g. prepare version .
.
.
.
.
what expression categories.
weidentifiedfourcategories to express change i.e.
how to express what in commit messages.
we introduce these categories with examples as follows including their counts and percentages in the analyzed commit messages indicated in parentheses .
summarize code object change .the first category represents commit messages that summarize the changes effectively asummaryofthe diffs.weidentifiedthefollowingsubcategories sc1characteristics of changes .
this subcategory highlights the characteristics of the current code change andcompares them with other alternative implementations to summarize code changes.
for example in this commit message the developer described an attempt at a 3rd i o interface anddescribedtheimplementationasbeing inspired by inputstream and outputstream but using growing buffers 2396whatmakesa good commit message?
icse may21 pittsburgh pa usa instead of byte arrays as the core data container advocating against fixed size byte arrays .
sc2object of change .
commit messages in this subcategory summarize the changes from the point of view ofthe codeobjects.overhalf ofthecommits expresswhat was changed by pointing out the changed object which refers to the key component of this change and developers highlight this in the message.
these code objects include attributes methods classes packages and so on.
for example remove creation of fat jar... .
sc3changelist .
commitmessagesinthissubcategory indicate changes of several code objects involving one or more source files.
for example this commit removes the following deprecated properties server.connection timeout server.use forward headers .
sc4contrast before and after .
messages in this subcategory contrast the state of code objects before and after changes.
the following is an example of a contrast before aftermessage renameheldcertificate.builder.issuedby to signedby .
describeimplementationprinciple .thiscategoryrepresents commit messages describing technical principles underpinning the changes.theimplementationrationaleshowstheprocessbywhich the code executes correctly.
for example sslcontextbuilder was usinginetaddress.getbyname null onandroid nullreturnsipv6 loopback which has the name ip6 localhost .
only six commits out of .
fell in this category.
illustrate function .commit messages in this category summarize and explain code changes from a functional perspective.
unlike describing specific changes in code these messages pay more attention to functional changes.
such messages inform other contributorswhathaschangedbydescribinganynewbehaviorsintroducedbythesechanges.forexample renamepreferred mapper property so its clear it only applies to json .
this category iscommon 65outofthe252analyzedcommitsexpresswhatwas changed by illustrating function.
missing what .thiscategoryreferstocommitmessagesthat lack any specification of what was changed.
typically any such changesaresmallandsimplethatcanbeeasilyinferred.wefindthis categoryin19commits accountingfor7.
.commonexamples are the correction of typographic errors renaming of source code objects and addingand removing spaces.
.
.
linking maintenance dimensions to commit messages.
as discussed in sec.
the nature of maintenance activities varies by type as defined by mockus and votta .
different types of maintenanceactivities as perthe typology ofmockus andvotta tend to take different ways to describe changes.
we analyzed the distribution of the expression categories of why and what in the different development activities see table .
it is worth notingthatsomedevelopersusemultiple butnomorethantwo expression categories together when describing why or what and thesemessagesaccountforonlyasmallpercentage i.e.
nomore than of the messages.
corrective changes are performed to fix defects in an existingcodebase.asshownintable3 thismatchesourfindingthattable3 expressioncategoriesacrossmaintenanceactivities categorycorrective adaptive perfective how to express why describe issue .
.
.
illustraterequirement .
.
.
describe objective .
.
.
implynecessity .
.
.
missingwhy .
.
.
describe issue describe objective0.
describe issue imply necessity2.
illustraterequirement imply necessity0.
.
total .
.
.
how to express what summarize code object change58.
.
.
illustratefunction .
.
.
describeimplementation principle4.
.
missingwhat .
.
.
summarize code objectchange illustratefunction8.
.
.
total .
.
.
describe issue is the most common expression category to explainthereasonforcorrectivechanges withthehighestproportion of45.
.developersalsoexpresstherationaleofcodechangeby combining describe issue with describe objective .
and imply necessity .
.
likewise summary of code object changes is the most common category to describe the what for this maintenancetype in a commit message at .
.
for adaptive changes developers often describe why by indirectly implying the necessity of the change category imply necessity with the highest proportion of .
and followed bythe illustrate requirement category whichclarifies the requirementsthatunderpinthechange.apossiblereasonmightbe thatanewfeatureorchangeintheprocessingordataenvironment usually indicates a need for a change when it is the first commit.
however the implementation of most new features requires multiplechanges andadevelopercanexplainthemotivationofachange bydescribingtherelationshipwithafeatureorchangewhatwas accepted previously.
another reason may be the description of a change s improvements or benefits to support adding new features.
perfectivechanges thatdevelopersmake toimprove for example code readability and quality usually involve only text files comments ortests.themotivationforthesechangestendstobe common sense so why information is frequently omitted in the messages category missing why with a proportion of .
.
for othernon functionalproperties developerstendtousethe imply necessity andillustrate requirement categories.
2397icse may21 pittsburgh pa usa tianet al.
wecanseethatthemostcommonwayofexpressingwhyvaries withthetypes ofmaintenanceactivities i.e.
describe issue for corrective changes imply necessity for adaptive changes and missing why for perfective changes.
however developers tend to summarizecodechangesdirectlywhendescribingchanges.inaddition to perfective maintenance activities summarizing the changes fromtheperspectiveoffunctionalchangesisalsoacommonway fordevelopers.thepossibler easonisthattheimp rovementofnonfunctional properties is not reflected in the functionality offered by thesoftware.the missing what categoryisunusualforallthree maintenanceactivities.
summary for rq2 we identified five expression categories of why and four expression categories of what.
further we found that developers have different expression preferences when writing commit messages for different activities.
the results can help developers write a good commit message.
.
automatically classifying good messages we performed a ten fold cross validation to estimate the classifiers performance.
the messages were randomly partitioned intotensubsetsofsimilarsize.thevalidationhadtenrounds in each round nine subsets were used to train the model and the remaining one was used for testing.
a different subset was used for testing in each round.
we reported the average performance ofthetenrounds.toinvestigatetheimpactofdifferentclassification techniques on the performance of our approach we achieved our classifiers based on eight common classification techniques respectively see sec.
.
and repeated the evaluation on the same dataset.
table presents the performance of c whyandc what usingdifferentclassificationtechniques.theseresultsindicatethat bi lstmhasthebestperformanceonboth c whyandc what with an accuracy of .
and .
.
this result is consistent with prior findings namely that deep learning based neural networksarebetteratprocessingtextclassificationtasks.therefore we chose bi lstm to build our classifiers.
table ten fold cross validation of message classification techniques techniques accuracy c why accuracy c what bi lstm .
.
lstm .
.
logisticregression .
.
mlp .
.
randomforest .
.
gradientboosting .
.
knn .
.
decision tree .
.
table shows that the three bi lstm based classifiers perform verywell withanaccuracyof84.
.
and75.
respectively.
specifically whendeterminingwhetheramessagemisses why table performance of bi lstm based classifier ten fold cross validation metrics c why c what c good positiveprecision .
.
.
recall .
.
.
f1 .
.
.
negativeprecision .
.
.
recall .
.
.
f1 .
.
.
accuracy .
.
.
positive missing why negative having why our classifier cwhyexhibits good performance with a precision of .
and a recallof70.
.indeterminingwhetheramessagemisses what positive missingwhat negative havingwhat ourclassifier cwhatshows good performance with a precision of .
and a recall of .
.
according to the output of our classifiers developerswillgetahintofwhatinformationiscurrentlymissing so they can review and revise their commit messages.
further our classifier c goodalso exhibits good performance when identifyingwell writtenmessages positive wellwritten negative needs improvement withaprecisionof81.
andarecallof74.
.comparedtotheunfiltereddatasetwithanaverageofonly56 good commit messages our classifier can automatically identify and constructa higher quality commit message dataset.
summaryforrq3 weproposedthreeclassificationmodels based on bi lstm to automatically identify whether a commit messageiswell writtenandwhetheracommitmessagecontains why or what.
allofthemperformedwellinourdatasetand can be reused.
implications commitmessages are of pivotal importance to facilitate coordinationandcommunicationamongdevelopersandthusitisimportant tounderstandwhatconstitutesgoodmessagesandhowtheyare written.we discuss implications for developers and researchers.
implications for developers .
our analysis of how the why and what information is expressed offers developers an understanding of what constitutes a good commit message.
at the same time theresultsoflinkingmaintenanceactivitiestothemessage expressioncategoriescanpromptdeveloperstowritebettercommit messages.
for example when performing a corrective task developers could initially choose the most common expression category applicable in many scenarios i.e.
describe issue this would not only improve the commit message but may also inspire developerstobecomemoreawareofdifferentwaystoexpresswhy changesareneeded.morespecifically thesubcategory describe error scenario caninspirethedevelopertodescribethebugreproductionstepsandthebackgroundofthechange.atthesame time developers can choose the most popular way i.e.
object of changeto summarize code changes and describe the changes to 2398whatmakesa good commit message?
icse may21 pittsburgh pa usa key code objects so that other developers can grasp the focus more quickly.wehopethesecanimprovethequalityofcommitmessages in the long term.
we also designed two automatic tools for developers to check whether the commit message being written conforms to a good one i.e.
containing both why and what.
with the help of these tools thedevelopercanknowwhatismissinginhis hercommit messageand supplementit accordingly.
implications for researchers .
our study demonstrates that considerableproportionsofcommitmessagesareofpoorquality an average of in the five popular oss projects suggesting that this important modality for developers to share knowledge is not used optimally.
while this has consequences for the long term maintainabilityofanyproject wealsoobservedthatapproaches for automatic generation of commit messages are trained with uncurated data i.e.
datasets with commit messages that are not filtered based onquality.
in turn such models generate low quality commit messages as well which exacerbates the issue of poorly writtencommitmessages.
nevertheless itistime consumingforresearcherstocurategood commitmessagesmanually.weproposedanautomaticclassifier i.e.
c good thatperforms wellin identifyinggood commitmessages precision .
.
this classifier has the potential to help researchersconstructalargedatasetofhigh qualitycommitmessagesfrommassivehistoricaldatastoredingithubandothervcss.
in the future it is necessary to construct a standard dataset of commitmessages to facilitate comparison among different generation methods and promote the quality of generated messages.
threats to validity we are aware of some threats to validity which we discuss next.
when constructing the dataset we removed commit messages generated by known bots .
it may be that new bots are becoming more advanced and generating more human like messages suggesting a threat where the filtered data may still contain somenon human writtenmessages.futurework shouldconsider suchdevelopmentsofnewbotsastheymayrequiremorecareful data filtering.
notably among the manually analyzed messages we did not find any new bot patterns which suggest the results of our qualitative analysis were not affected.
manuallabelingofcommitmessagesposesasubjectivethreat to validity.
to minimize this threat two authors labeled commit messagesindependentlyandintroduced anexperiencedcolleague inqualitativeresearchtoreachanagreementthroughseveraldiscussions.
the agreement level .
is high indicating a high level of reliability.
some of the labeled messages were subsequently confirmed by experienced oss contributors.
further the manually analyzed messages come from developers.
it means that multiple commit messages may originate from the same authors which pose a threat of limiting the diversity of the message taxonomy.
one strandof future workcan extendthis analysisto includemore projects andwritteninotherlanguagesthanjava toverifyand if needed enrich the taxonomy of commit messages reported in this study.
another threat is that the dataset messages in total is notlargeenough fortrainingclassifiers.thedatasetwas randomlysampled from the five oss projects and its limited scale is because ofthecomplexityinvolvedinmanuallabelingandanalysisofthe commitmessages.toreducethisthreat weusedaten foldcrossvalidationproceduretogetasmuchvalidinformation nine fold fromthedatasetaspossibleandusetheaverageperformanceon different test datasets to improve the models capability to generalize .
however developers may write better messages over time.
the ten fold cross validation i.e.
randomly divided ten subsets did not consider the influence of time on developers experience in writing message.
this is one potential strand for future work to furtheradd rigorto these results.
when automatically classifying commit messages other factors may be related to the quality of commit messages.
for example chahalandsaini proposed11format relatedmetricstomeasure the syntax quality of commit messages.
our classifiers only used the text content of messages as input for training.
to alleviatethisthreat wereplacedthoseformat relatedelementswith aunifiedtokenduringpreprocessing seesec.
.
suchasusing enter to represent line brakes.
this preprocessing ensures that syntacticfeaturesareconsideredduringtheclassificationofcommit messages.
threats to external validity consider the generalization of our findings.
the dataset we analyzed was collected from five popular projects on github implemented in java thus posing a threat to external validity.
our findings may not be generalizable to other projects whethertheyareopenorclosed source orprojectsthat use other languages.
it is very well possible that developers using other programming languages have different message written patterns that have not been explored in the scope of this work.
future studies could investigate more diverse projects to gain a deeper understanding of what constitutes a good commit message.
notwithstandingtheselimitations theautomaticclassificationtools we proposed can be easily adapted to other projects with other languages by simply replacing datasets.
conclusion commit messages play an important role in collaborating software developmentand evolution.
nonetheless theconsiderable proportionsoflow qualitymessagesinossprojectsreflectthedifficulties that developers face when writing commit messages and threaten the effectiveness of existing automatic commit message generation tools.
our study explored the distribution and expression patterns of these well written messages linked message expression categories to different maintenance activities and construct several automatic identification models of good commit messages.
our study findings can help developers write good commit messages and assist researchers to construct high quality datasets before generatingmessagesautomatically.