efficient incident identification from multi dimensional issue reports via meta heuristic search jiazhen gu school of computer science fudan university shanghai chinachuan luo microsoft research beijing chinasi qin bo qiao microsoft research beijing china qingwei lin microsoft research beijing chinahongyu zhang the university of newcastle nsw australiaze li yingnong dang microsoft azure redmond usa shaowei cai institute of software chinese academy of sciences beijing chinawei wu university of technology sydney sydney australiayangfan zhou school of computer science fudan university shanghai key laboratory of intelligent information processing shanghai china murali chintalapati microsoft redmond usadongmei zhang microsoft research beijing china abstract in large scale cloud systems unplanned service interruptions and outages may cause severe degradation of service availability.
such incidents can occur in a bursty manner which will deteriorate user satisfaction.
identifying incidents rapidly and accurately is critical to the operation and maintenance of a cloud system.
in industrial practice incidents are typically detected through analyzing the issue reports which are generated over time by monitoring cloud services.
identifying incidents in a large number of issue reports is quite challenging.
an issue report is typically multi dimensional it has many categorical attributes.
it is difficult to identify a specific attribute combination that indicates an incident.
existing methods generally rely on pruning based search which is time consuming given high dimensional data thus not practical to incident detection in large scale cloud systems.
in this paper we propose mid jiazhen gu and chuan luo contributed equally to this work and share the first authorship of this work.
this work was performed when jiazhen gu was visiting microsoft research as a research intern.
qingwei lin is the corresponding author of this work.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse november virtual event usa association for computing machinery.
acm isbn .
.
.
.
incident detection a novel framework for identifying incidents from large amount multi dimensional issue reports effectively and efficiently.
key to the mid design is encoding the problem into a combinatorial optimization problem.
then a specific tailored meta heuristic search method is designed which can rapidly identify attribute combinations that indicate incidents.
we evaluate mid with extensive experiments using both synthetic data and real world data collected from a large scale production cloud system.
the experimental results show that mid significantly outperforms the current state of the art methods in terms of effectiveness and efficiency.
additionally mid has been successfully applied to microsoft s cloud systems and helped greatly reduce manual maintenance effort.
ccs concepts software and its engineering search based software engineering .
keywords incident detection emerging issue meta heuristic search effective combination problem identification acm reference format jiazhen gu chuan luo si qin bo qiao qingwei lin hongyu zhang ze li yingnong dang shaowei cai wei wu yangfan zhou murali chintalapati and dongmei zhang.
.
efficient incident identification from multidimensional issue reports via meta heuristic search.
in proceedings of the 28th acm joint european software engineering conference and symposium esec fse november virtual event usa j. gu c. luo s. qin b. qiao q. lin h. zhang z. li y. dang s. cai w. wu y. zhou m. chintalapati and d. zhang on the foundations of software engineering esec fse november virtual event usa.
acm new york ny usa pages.
https introduction cloud computing has surged into popularity in recent years.
many software services are deployed on large scale cloud systems including amazon aws microsoft azure and google cloud .
these cloud systems serve millions of users around the world on a basis.
high service availability is hence critical to such systems.
failures are inevitable to large scale systems .
despite tremendous reliability engineering efforts that have been put to mitigate the influences of failures cloud systems may still experience unplanned interruptions and outages.
such incidents can severely degrade system performance and in turn have negative consequences on service availability.
they may lead to severe economic loss .
it is hence of great importance to pinpoint such incidents in a timely manner before it deteriorates user satisfaction.
in common industrial practice e.g.
that in microsoft azure cloud systems generally monitor the performance indicators e.g.
cpu utilization and i o latency of the computing components.
the computing components are typically virtual machines vms including full virtualization ones and lightweight virtualized containers.
when the monitored indicators exhibit anomalous values the categorical attributes describing the related information of the anomalous vm including a timestamp the location the os version and the hardware type are recorded in an issue report .
thus a set of issue reports of a cloud system is essentially multi dimensional time series data .
in practice when an incident occurs the number of issue reports under a particular attribute combination may increase dramatically at a certain time.
such an attribute combination can effectively characterize an incident.
for example if an incident occurs in a data center d1in australia many issue reports containing the same datacenter and country values i.e.
d1andaustralia would be reported.
therefore the attribute combination datacenter d1 country australia can indicate the incident.
such an attribute combination is called effective combination in this paper.
such effective combinations can help locate the incident and analyze its root cause.
in this regard incident localization is typically solved by identifying effective combinations of attributes from issue reports.
however such a task is very challenging.
existing methods e.g.
generally resort to search based approaches.
however an issue report typically contains tens of attributes and thousands of values to indicate vm properties including locations vm configurations and software versions.
the high dimension of the data will instantly lead to a combinatorial explosion the searching space grows exponentially.
as a result these search based methods are prohibitively time consuming.
they are not practical to identify real world incidents for a cloud system.
furthermore as a large complicated system a typical cloud system frequently encounters failures.
although reliability engineering techniques can maintain its availability issue reports associated with failures are consequently huge in volume.
as a result the related issue reports of an incident are usually hidden in tremendous issue reports generated in daily operation due to the bursty nature of an incident.
locating such reports is a quite challenging task.in this paper we propose mid multi dimensional incident detection an efficient and flexible framework to identify incidents in huge volume multi dimensional issue reports in large scale production cloud systems.
unlike existing search based approaches mid encodes the incident identification problem into a combinatorial optimization problem.
this allows mid to solve it with meta heuristic searching which is tailored as an efficient algorithm.
to this end we specifically design a two mode i.e.
greedy mode and random mode meta heuristic search framework.
on one hand the greedy mode intends to approximate the optimal results guided by the information entropy in a greedy manner.
on the other hand the random mode helps avoid the local optimum by adding random perturbation to the search process.
in this way mid can automatically find effective combinations rapidly.
to evaluate the effectiveness and efficiency of mid we conduct extensive experiments on both synthetic data and real world data collected in real world production cloud systems in microsoft.
the experimental results verify the success of mid.
the main contributions of this work are highlighted as follows.
we propose mid a tool that efficiently identifies effective combinations from high dimensional issue reports.
mid can greatly reduce human efforts in identifying incidents in largescale cloud systems.
unlike traditional pruning based search method mid employs a meta heuristic search method which is particularly suitable to identify incidents in large scale cloud systems in a rapid manner.
such a meta heuristic approach can shed light to other maintenance tasks of cloud systems which require prompt analysis of tremendous structured data.
we have successfully applied mid to microsoft s production cloud system which helped improve system reliability and customer experience.
preliminaries and motivations the research described in this paper is motivated by requirements of real world cloud system maintenance in microsoft.
in this section we first describe incidents in large scale cloud system.
then we use a motivating example to illustrate the problem formulation on identifying incidents based on multi dimensional issue reports.
in the end the challenges are discussed.
.
incidents in large scale cloud system infrastructure as a service iaas in cloud computing paradigm allocates or releases the resources according to requirements thereby eliminating the overhead of procuring traditional computing infrastructure and thus gains popularity in recent years.
as more and more companies come to a cloud system achieving high service availability is critical but challenging for cloud providers.
related incidents caused by major feature changes configuration mistakes hardware failures or software bugs may lead to sla service level agreement violations and cloud providers would suffer a great amount of financial loss.
for example amazon aws would return and of credits if the monthly uptime percentage is less than .
and .
respectively .
in the cloud millions of customer vms are hosted in world wide distributed physical servers.
that is the impact would be great 293efficient incident identification from multi dimensional issue reports via meta heuristic search esec fse november virtual event usa country australia datacenter dc3 version .
time issues a time series under the effective combination04 .
.
.
.
country australia time issues b time series under a simple attribute combination figure an example of incident when incidents happen.
in order to minimize the negative customer experience and potential financial loss engineers need to correctly identify the incident with a reduced problem space and isolate the problem in a timely manner.
as such some significant incidents can be thus eliminated before becoming catastrophic.
in current practice of microsoft however this process is manually done by running ad hoc queries on issue reports and then looking for the effective combinations that characterize incidents with pivoting tools e.g.
excel pivot table .
since issue reports may contain a lot of attributes and values it is rather labor intensive and time consuming.
based on our survey we found that it often takes tens of hours for an engineer to identify possible incidents.
therefore an automated and accurate incident identification approach is crucial and essential for cloud systems in improving service availability.
.
motivating example table shows an example of a set of issue reports collected from microsoft azure.
we omit related details for confidential reasons.
in table each entry is an issue report which consists of a timestamp indicating when the issue is captured and a set of attributes to characterize a vm.
for example the first entry describes the location information hardware type software type and customer affiliation etc of a vm and this vm has a performance issue e.g.
high i o latency multiple reboots captured at april .
therefore a set of issue reports can be treated as multi dimensional time series data.
given a specific attribute combination e.g.
country australia datacenter dc1 we can obtain a time series by counting the number of issue reports in this combination within a time window e.g.
an hour a day .
as introduced in section when an incident happens the volume number could suddenly increase in the time series.
in figure a a real incident was detected in april .
it is shown that the volume of issue report in country australia datacenter dc3 version .
was suddenly increased to from at april 9th.
however this attribute combination can be easily lost in the background noisy issues.
figure b illustrates the time series under the attribute combination country australia in the same time window.
note that the total volume of issue reports in australia region is stable so that the real incident is difficult to be identified.
as a comparison the attribute combination country australia datacenter dc3 version .
that characterizes the incident is referred to as the effective combination .
issue reportsencodingsearch spacemeta heuristicsearchingeffective combinationsincident clustering incidentsfigure an overview of mid .
challenges while it is a promising way to detect incidents by identifying effective combinations from issue reports we have identified the following two challenges to achieve high performance in incident identification for a large scale cloud system huge search space in the cloud system a large volume of issue reports are received everyday.
as the substantial increase on the scale and complexity these issue reports commonly have more than attributes and thousands of possible values leading to an explosive number of attribute combinations.
such a huge search space makes it difficult in accurate identification.
high efficiency requirement infrastructure problems must be responded to at ever increasing speeds particularly when an incident impacts customer experience.
hence the proposed approach has to meet the high efficiency requirement for the maintenance of cloud systems.
overview as discussed before current state of the art approaches for incident identification are based on the pruning based search framework which works in a branch and bound manner with pruning techniques.
however the pruning based search framework has a severe limitation that it could become ineffective and inefficient when dealing with extremely huge search space which can be observed in section .
motivated by the great demand from the maintenance of cloud systems we propose mid multi dimensional incident detection a framework to automatically identify effective combinations from multi dimensional issue reports.
different from the state of the art pruning based approach that may incur exponential time complexity mid is a novel framework that employs meta heuristic search and is both efficient and effective.
figure presents the overall framework design of mid.
the workflow of mid mainly consists of three parts encoding metaheuristic searching and incident clustering.
in the encoding part mid processes the given set of issue reports so as to encode the incident identification problem into a combinatorial optimization 294esec fse november virtual event usa j. gu c. luo s. qin b. qiao q. lin h. zhang z. li y. dang s. cai w. wu y. zhou m. chintalapati and d. zhang table an example of a set of issue reports from a cloud system time country datacenter disk hardware version customer clinetos ... usa dc1 ssd dell .
a inc. linux ... australia dc3 ssd dell .
b inc. win7 ... usa dc2 hdd dell .
company x linux ... india dc6 hdd lenovo .
company y win8.
... australia dc3 ssd dell .
b inc. win8.
... australia dc3 ssd lenovo .
b inc. linux ... uk dc1 hybrid hp .
company z linux ... problem.
in the meta heuristic search part mid employs a novel two mode search algorithm to solve the encoded combinatorial optimization problem.
the effective combinations found by the search algorithm are further fed into a clustering algorithm that summarizes similar results in order to minimize human inspection efforts.
finally the clustering results are reported as the incidents detected from issue report.
the key steps shown in fig are summarized as follows encoding as the example shown in section incident identification can be conducted through identifying effective combinations from issue reports which is formulated as the combinatorial optimization problem.
in the encoding part we introduce the search space and the objective function both of which are the essential components of a combinatorial optimization problem .
the details of the encoding procedures as well as the objective function design are described in section .
.
meta heuristic searching in order to solve the encoded combinatorial optimization problem a novel two mode search algorithm is designed to effectively search for effective combinations.
the algorithm leverages information entropy as the scoring function and takes into account both efficiency and diversity.
section .
presents such a meta heuristic approach.
incident clustering since several different effective combinations may reflect the same incident a summary of the searching results is necessary to avoid duplication and thus reduce human inspection efforts.
hence a distance based clustering algorithm is designed to group the effective combinations based on the corresponding timeseries data.
then each cluster is reported as an incident detected from issue reports.
the details are introduced in section .
.
implementation details in this section we introduce the technical details of mid.
.
encoding in this subsection we encode the problem of identifying effective combinations as a combinatorial optimization problem.
in particular we first introduce the search space as below and then describe the objective function.
.
.
necessary notations and search space.
first of all we give necessary notations of this work here.
given a set of issue reports d an example of a set of issue reports is presented in table an issue report can be regarded as an entry in d and is associated with a timestamp indicating when the issue is captured.
the notation a is used to denote the set of all attribute s ind a a1 a2 an where ai i n is the i th attribute in dandnis the number ofattributes in d. for each attribute ai there is a value setvi which consists of all possible values of ai vi v1 i v2 i vmi i where vk i k mi is the k th possible value for attribute aiandmi is the number of possible values for attribute ai.
an attribute aiand one of its possible values vk ican construct a tuple t ai vk i .
for each attribute ai we can construct a set of such tuples ti ai vi which consists of all pairs of aiand its possible value.
then the set of all possible tuples can be expressed ast n i 1ti.
hence an attribute combination scan be defined as a subset of t which contains at most one tuple from any ti.
therefore the entire search space sis a set of attribute combinations which can be formally defined as below s s p t ti card s ti in the above equation p t denotes the power set1oft and the cardinality constraint guarantees that each attribute can be involved at most once in the attribute combination.
.
.
objective function.
for a combinatorial optimization problem besides the search space we also need to define the objective function to measure the quality of a solution i.e.
an attribute combination .
however in our context there is no straightforward objective function to meet the requirement which urgently calls for designing a proper objective function.
given an attribute combination c as described in section .
we can obtain a corresponding time series under c. recalling that the goal of identifying incidents is to find effective combinations whose corresponding time series on the number of issues exhibit significant increasing trends the objective function should be designed to quantify the significance of increasing trends from the time series data under different attribute combinations.
hence in order to evaluate the significance of the increasing trend it is advisable to measure the change of the number of issues before and after the change point i.e.
the point at which the incident occurs .
the more significant the change the greater the impact of the incident.
on the other hand the severity of the incident should also be taken into account which can be measured by the total number of issues under the attribute combination.
inspired by fisher distance we propose the following score r x pa x lnpa x pb x in equation xdenotes the change point ptdenotes the ratio pt vx t vt where vx tdenotes the total number of issues under the current attribute combination during a time period tandvt 295efficient incident identification from multi dimensional issue reports via meta heuristic search esec fse november virtual event usa denotes the total volume of issues during the time period t in the meanwhile b x anda x denote the time periods before and after change point x respectively therefore pb x andpa x are the ratios before and after the change point respectively.
equation not only considers the change ratio of the number of issues throughpa x pb x but also emphasizes the global impact of the attribute combination through pa x .
for example given two attribute combinations we can obtain two corresponding time series when those two time series exhibit the same change radio the one with greater global impact will have larger r x value.
in this paper we call this score fisher value .
in order to calculate the fisher value mid needs to find the change point in a time series.
in addition to improve the efficiency ofmid it is vital to rapidly calculate the fisher value for a given time series.
hence mid adopts the bottom up segmentation algorithm which is designed to perform fast change point detection.
it starts with many change points and successively deletes the less significant ones.
specifically this algorithm first traverses the whole time series and finds all change points.
the complexity of this algorithm is o nlogn nis the number of samples in the given time series which meets the purpose of mid.
since the bottom up segmentation algorithm may detect more than one change point among all change points denoted as x the maximum fisher value is selected as the objective function ffor a given attribute combination f max x xr x as a result for a given attribute combination c we can calculate c s objective function through equation .
based on the search space s defined in section .
.
and the objective function f defined in section .
.
the task of the encoded combinatorial optimization problem is to find attribute combinations with large values of objective function.
.
meta heuristic searching it is recognized that meta heuristic search is a powerful paradigm for efficiently solving combinatorial optimization problems .
the general workflow of a meta heuristic search algorithm is first to generate an initial solution i.e.
an initial attribute combination usually an empty set and then to iteratively modify the current attribute combination in order to obtain attribute combinations with larger value of the objective function.
before introducing the details of the meta heuristic algorithm adopted in mid we first present the search operators and the scoring function which are essential components of meta heuristic search.
.
.
search operators.
as discussed before the search process is to iteratively modify the current attribute combination so we need to design a number of search operators to modify the current attribute combination in each iteration.
apparently it is advisable to design search operators to cover commonly used set operations including addition deletion andmodification .
moreover since each element in an attribute combination is a tuple consisting of an attribute and its value the modification operator should be conducted on either the attribute or the value.
as a result given thecurrent attribute combination c we propose four search operators as follows adding tuple operator at this operator is to add an tuple a v aadd vadd t a v c aadd a toc swapping value operator sv this operator is to swap an tuple aswp vswp cwith another tuple a v aswp v swp tswp vswp v swp so that the two swapped tuples have the same attribute i.e.
aswp a swapping tuple operator st this operator is to swap an tuple aswp vswp cwith another tuple a v a swp v swp t a v c a swp aswp deleting tuple operator dt this operator is to delete an tuple from c. clearly the proposed four search operators are capable of transferring cinto any attribute combination in a limited number of steps.
hence we use these search operators to conduct the search process.
.
.
scoring function.
scoring function is a fundamental component in meta heuristic search .
in particular scoring function is used to guide the search direction and is strongly related to search operators.
as described before the search operators are designed to select one tuple to be added deleted or swapped to modify the current attribute combination.
in order to obtain more effective attribute combinations mid requires a scoring function to quantify the gain of selecting a specific tuple.
however there is no explicit scoring function that can be directly used in our context.
in order to address this issue we design a new scoring function based on the concept of information entropy .
the entropy is defined as the negative logarithm of the probability.
specifically given an attribute aiand the set of its values vi the entropy for a value vk i vi denoted as e vk i can be calculated as the following equations p vk i count vk i vj i vicount vj i e vk i p vk i lnp vk i in equation count vk i denotes the number of issue reports containing attribute aiwith value vk i. hence the entropy of attribute ai denoted as e ai is the sum of the entropy of its all possible values in vi e ai vk i vie vk i vk i vip vk i lnp vk i it is widely recognized that a tuple or an attribute value with larger value of entropy indicates they are more informative and more worthy of being selected.
also inspired by the great success of information entropy in a broad range of applications such as communications and machine learning mid prefers to select a tuple or an attribute value with larger value of entropy.
.
.
two mode search framework.
given the search space s defined in section .
midconducts the search process and iteratively produces attribute combinations.
specifically during each iteration mid works between two modes the greedy mode and the random 296esec fse november virtual event usa j. gu c. luo s. qin b. qiao q. lin h. zhang z. li y. dang s. cai w. wu y. zhou m. chintalapati and d. zhang algorithm two mode meta heuristic search framework input total tuple set t output effective combination set ec 1ec 2c 3while no termination criterion is met do ifc is an effective combination then ec ec c ifwith probability p then c random mode t c else c greedy mode t c 10return ec mode.
in the greedy mode mid aims to obtain more effective attribute combinations in a greedy manner.
in the random mode mid tends to explore the search space using randomized strategies.
the two mode meta heuristic framework underlying mid is outlined in algorithm .
in the beginning mid initializes the set of found effective combinations ec i.e.
the candidate result set as empty set and also initializes the current attribute combination c as empty set.
then mid conducts the search process in an iterative manner until the termination criterion is met lines .
in each iteration midfirst verifies whether or not cis an effective combination the details of effective combination verification are described in section .
.
.
if cis an effective combination i.e.
ccharacterizes an incident mid adds cto set ec.
then mid works between the random mode and greedy mode to modify the current attribute combination c in order to find more effective combinations.
in particular with probability p pis a parameter the framework works in random mode and with probability p it conducts the search in greedy mode.
.
.
effective combination verification.
in each iteration for the current attribute combination c mid first obtains the time series under c and then calculates its value of the objective function i.e.
equation .
if the set ecis empty or c s value of the objective function is larger than the minimum value of the objective function among all effective combinations in ec then mid considers that c characterizes an incident and would add cintoec.
.
.
the greedy mode.
in the greedy mode mid aims to find effective combinations with large values of objective function.
to this end in the greedy mode mid prefers to select the tuple with the largest value of entropy i.e.
the most informative tuple described in section .
.
.
however a severe issue of meta heuristic search algorithms is that they suffer from the cycling problem revisiting a solution i.e.
an attribute combination that has been processed recently.
inspired by the success of the tabu mechanism we design a forbidden strategy to avoid revisiting recently processed tuples in order to make the search process more effective.
particularly in the greedy mode mid maintains a forbidden list which records the recently selected tuples and does not allow to select the forbidden tuples even they have large values of entropy.
in addition midemploys the bms best from multiple selections algorithm to further improve the effectiveness of the search process.
.
.
the random mode.
in the greedy mode mid prefers to modify the current attribute combination in a greedy manner according to the entropy.
in fact it is of key importance to strike a balance between greediness and diversification during the search process .
more specifically if the meta heuristic search biases too much to the greediness the search process would be easily stagnated leading to very poor practical performance .
hence it is critical to enhance the diversification behavior of mid.
to this end we integrate a random mode which tends to explore the search space and diversify the search direction into mid in order to balance the greediness and the diversification.
specifically in the random mode mid first chooses one feasible search operator randomly at uniform where feasible means that the selected operator would not cause cinto abnormal status.
for example when cconsists of only tuple applying the dt operator would make cbecome an empty set so the dt operator is not feasible in this case.
after an search operator is selected mid modifies cusing the selected search operator.
.
incident clustering given the effective combinations found by the meta heuristic search part many effective combinations may characterize the same incident.
for example suppose the real incident is caused by the vms of company k which is only deployed in australia.
then the time series of both customer company k country australia and customer company a clientos linux country australia may reflect the same increasing trend.
under such circumstances both attribute combinations are considered as effective combinations and are added to the result set.
although the results can directly guide further human inspection the duplicated results can lead to repetitive work of engineers.
thus we need to minimize such human effort.
we notice that typically effective combinations characterizing the same incident may share similar contents and similar time series with the same change point.
thus we use the jaccard distance to measure the similarity of effective combinations.
in order to measure the similarity of time series we use the cosine similarity of the cumulative version of the time series i.e.
sum values over time as time increases .
specifically for combination c1 c2 and the corresponding time series t1 t2 the distance is d c1 c2 j c1 c2 cos t1 t2 where jcalculates the jaccard distance and coscalculates the cosine similarity of the cumulative version of time series.
then we can apply a hierarchical clustering algorithm on the effective combinations.
the advantage of this algorithm is that it can automatically decide the number of clusters according to the distance threshold d. if the distance of two combinations are smaller than d then these combinations are considered as describing the same incident.
finally each cluster of combinations are considered as an incident and the combination with the largest objective function value in each cluster will be reported to the support team for further investigation.
297efficient incident identification from multi dimensional issue reports via meta heuristic search esec fse november virtual event usa evaluation in this section we evaluate the performance of by answering the following research questions.
rq1 can mid achieve better performance than other methods?
rq2 how does mid perform on real production data?
rq3 how do different parameter settings impact the performance of mid?
.
experimental setup .
.
datasets.
we use diverse types of datasets to evaluate the effectiveness and the efficiency of mid.
production datasets a and b the production datasets are collected during the second half of from microsoft azure a largescale iaas cloud system which serves millions of customers worldwidely.
we use a total of datasets from a1 to a6 and from b1 to b6 that include issue reports describing various issues such as high i o latency and vm rebooting.
for each dataset the number of issue reports ranges from thousand to thousand.
for each issue report the number of attributes varies from to and the total number of possible values ranges from thousand to thousand.
synthetic besides the real production datasets we gather a series of synthetic data to evaluate the effectiveness of mid.
first we generate a dataset over a day period with nissue reports every day.
excluding timestamp each issue report has iattributes and each attribute has jpossible values.
for each issue report the attribute values are generated randomly.
in this way we create one synthetic dataset with totally nissue reports and iandjare parameters to control the size of search space.
then we manually inject an incident into the synthetic dataset as follows.
we first randomly select an attribute combination eas the effective combination and a day dfrom day to day as the day when the incident occurs.
then we increase the number of issue reports containing combination eby a random value e.g.
between and for each day after dayduntil the th day in the synthetic dataset.
in this way we generate a synthetic dataset with one injected incident.
similarly we can generate synthetic dataset with two incidents.
.
.
experimental preliminaries.
all experiments are conducted on a server with intel r xeon r cpu e5 .4ghz .39ghz processors and 256gb memory.
in our experiments for mid p is set to .
and dis set to .
.
in addition the effect of different parameter settings is discussed in section .
.
.
.
competitors.
in order to demonstrate the effectiveness and the efficiency of mid we compare mid against the current state ofthe art approach called idice .
in addition we also implement different meta heuristic search methods under the mid framework as additional competitors to show the advantage of the proposed two mode search algorithm.
idice is the current state of the art approach for mining attribute combinations to characterize incidents from issue reports.
idice is a pruning based search algorithm which adopts several pruning strategies to reduce the search space so as to mine effective combinations from issue reports.
nsga is a widely used meta heuristic algorithm.
it generates offsprings using a specific type of crossover andmutation and then selects the next generation according to nondominated sorting and crowding distance comparison.
moea d is an evolution algorithm based on decomposition.
it leverages evolutionary operators to combine good solutions of neighbouring problems thus allowing for nice convergence properties.
random search rs is a baseline approach which applies random selection to sampling a set of attribute combinations from the search space srandomly at uniform.
.
rq1 performance comparison in order to answer rq1 we evaluate the performance of mid and its competitors using synthetic datasets with one and two incidents.
we adopt three metrics i.e.
precision p recall r and f score f to measure the performance of mid and its competitors.
p tp tp fp r tp tp fn f precision recall precision recall where tp true positive is the number of correctly reported attribute combinations.
fp false positive is the number of wrongly reported attribute combinations.
fn false negative is the number of effective combinations not reported.
precision measures the accuracy of detected effective combinations while recall measures how many effective combinations are found among all effective combinations.
f score considers both precision andrecall and the higher the values the better the detection performance.
we also measure the execution time in cpu seconds to evaluate the efficiency.
as the experimental setup described we generate a series of synthetic issue reports with different numbers of attributes i.e.
i and50 .
specifically each generated report contains records every day n and each attribute has values j .
for simplicity we use pattern issuenumber i to represent a specific dataset where issuenumber is the number of issues injected to the dataset and iis the number of attributes.
during the evaluation we randomly generate datasets with different sizes perform the detection and calculate the performance measures.
each experiment is performed times.
the results are shown in table .
for datasets with one injected incident we can find that mid achieves the highest f score in all datasets.
moreover besides the recall of one and the precision of one mid outperforms all other methods on all three performance measures.
it is worth noting that idice performs well on the one dataset.
since pruning based search can deal with small scale dataset it is not surprising that idice based on pruning search can efficiently process the one dataset the smallest scale dataset in our experiments.
however when the attributes increase from to the performance of idice is significantly affected.
when the search scale grows the pruning strategies adopted by idice may incorrectly prune important attribute values because of the noisy data thus leading to the low recall .
moreover since idice traverses all remaining attribute combinations many reported results can only identify issues with much smaller impact than injected incident thus leading to the low precision .
this phenomenon reflects that the pruning search method employed by idice can hardly work well 298esec fse november virtual event usa j. gu c. luo s. qin b. qiao q. lin h. zhang z. li y. dang s. cai w. wu y. zhou m. chintalapati and d. zhang table evaluation results on synthetic datasets datasetmid idice nsga moea d rs p r f p r f p r f p r f p r f one .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
one .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
one .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
one .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
one .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
two .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
two .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
two .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
two .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
two .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
table average execution time on synthetic datasets datasettime s mid idice nsga moea d rs one .
.
.
.
.
one .
.
.
.
.
one .
.
.
.
.
one .
.
.
.
.
one .
.
.
.
.
two .
.
.
.
.
two .
.
.
.
.
two .
.
.
.
.
two .
.
.
.
.
two .
.
.
.
.
when the problem becomes much more complicated i.e.
the total attribute combinations increase from 1to820 .
on the other hand the performance of nsga and moea d are not as susceptible to the complexity of the problem as idice.
the performance of nsga is stable on all datasets.
although the precision of moea d degrades when the attributes increase from to moea d achieves satisfying recall on all datasets.
similarly for the synthetic datasets with two incidents metaheuristic search approaches i.e.
mid nsga and moea d performs better than idice when the dataset has at least attributes.
among meta heuristic search approaches midachieves the highest fscore on all synthetic datasets with two incidents.
besides it is worth noting that nsga achieves very high precision but a lower recall than moea d. the reason is that the evolution process of nsga is more greedy than that of moea d leading to the results that the identified incidents by nsga are not as diversify as that by moea d. in addition we also compare the execution time of different approaches.
the results are shown in table .
apart from the dataset one mid runs much faster than idice on all datasets.
it is worth noting that the execution time of mid slowly grows as the number of attributes increases.
however the execution time of idice increases rapidly with the number of attributes.
the experimental results indicate both the effectiveness and efficiency of mid.
.
rq2 performance on real data in order to answer rq2 we use real production issue reports collected from microsoft azure.
since large scale issue reports lead to a huge number of attribute combinations over it is verytable number of detected incidents on real datasets dataset incidents mid idice nsga moea d rs a1 a2 a3 a4 a5 a6 b1 b2 b3 b4 b5 b6 table execution time on real datasets datasettime s mid idice nsga moea d rs a1 .
.
.
.
.
a2 .
.
.
.
.
a3 .
.
.
.
a4 .
.
.
.
.
a5 .
.
.
.
a6 .
.
.
.
.
b1 .
.
.
.
.
b2 .
.
.
.
.
b3 .
.
.
.
b4 .
.
.
.
.
b5 .
.
.
.
.
b6 .
.
.
.
.
difficult to manually identify and verify all effective combinations in these issue reports.
in other words we lack ground truth about the incidents in these data so we do not compare precision and recall .
we ask support engineers to manually check the results and then we compare the number of incidents instead of effective combinations found by each method.
for example suppose the result contains effective combinations characterizing the same incident we consider that incident is found.
we also measure the corresponding execution time.
the results are shown in table and table .
for datasets a3 a5 and b3 idice does not accomplish the incident identification process within hours so the corresponding results are marked with notation .
we can find that mid finds most incidents on of datasets.
as for the rest datasets the results of mid are much close to the best i.e.
mid finds incident less on datasets b2 b3 and 299efficient incident identification from multi dimensional issue reports via meta heuristic search esec fse november virtual event usa .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
random prob.f score a performance under different random search probabilities0.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
thresholdf score b performance under different clustering thresholds figure performance of mid under different parameters b5 .
considering that mid runs much faster than other methods as shown in table we can conclude that mid is capable of effectively identifying incidents in a timely manner for real production data.
it is worth noting that moea d finds more incidents than nsga2 while it runs slower.
these results indicate that moea d is capable of generating more diverse results while nsga can quickly find valid results which are also consistent with the experiments on synthetic datasets.
on the other hand the two mode search framework adopted in mid can take care of both speed and diversity through working in both greedy and random mode thus resulting in satisfying performance.
it is also worth noting that the execution time of idice varies significantly on different datasets.
for example the execution time on a1 is seconds while that on a2 grows over 60k seconds.
idice even runs for more than hours on three datasets.
this phenomenon is caused by the pruning strategies adopted by idice.
when idice prunes a lot of attribute combinations the rest attribute combinations can be traversed relatively fast.
however if the pruning strategies do not work well idice has to traverse a huge amount of attribute combinations leading to unacceptable execution time.
.
rq3 effect of different parameter settings mid introduces two parameters i.e.
the random probability pto control the two mode search strategy described in section .
.
and the distance threshold dused by the clustering algorithm described in section .
.
different values of these parameters may lead to different results.
for example if pis too small mid may be stuck in local optimum and cannot find the attribute combination with large value of objective function.
on the other hand if dis too large mid may incorrectly cluster effective combinations describing different incidents.
to understand the impact of different parameter settings on the results we evaluate the f score ofmid with different parameter settings on the two synthetic dataset which is the largest scale and most complicated synthetic dataset.
figure a shows the performance under different settings of pwhen dis set to .
d s default value .
we can find that the f score is stable when the random probability is small i.e.
less than .
.
when the random probability is larger than .
the f score starts to drop because mid mainly conducts random search and thus becomes hard to find an effective combinations.
these results also confirm the effectiveness of entropy based greedy search used in mid.
to summarize the resultsshow that when the random probability is properly set mid is able to achieve satisfying results.
figure b shows the performance under different settings of dwhen pis set to .
p s default value .
although it seems the performance is sensitive to d in fact the f score ofmid is mainly affected by the dramatic change of precision .
when dis small although recall is stable different effective combinations describing the same incident are not clustered together.
hence it is not surprising to cause low precision when dis small and thus to affect the f score .
asdincreases the clustering algorithm effectively clusters combinations so the f score increases.
when dis large different incidents may be incorrectly clustered together which leads to the performance degradation.
.
threats to validity we have identified the following threats to validity validation on real world dataset a production cloud system could receive a large number of issue reports over time.
in addition the large number of issue reports indicates a huge number of attribute combinations.
therefore it is very costly for engineers to manually label the effective combination for each incident.
currently in rq2 we only compare the number of identified incidents and the corresponding execution time with other approaches on real issue reports collected from microsoft azure.
in future work we plan to build a real world dataset that contains ground truth data about effective combinations and incidents in order to better evaluate different approaches.
diversity of the datasets while we have applied midto real world issue reports and confirmed its effectiveness in practice we only exploit data that was collected from microsoft azure.
in the future we will evaluate the proposed mid on a variety of datasets from other systems and services.
case studies currently mid has been integrated into microsoft azure a largescale cloud system to improve the service availability by spotting incidents in a timely manner.
in this section we share the practical experience of its efficiency and effectiveness in identifying realworld incidents with two cases.
due to sensitivity some critical details e.g.
customer and version information are omitted and anonymized.
microsoft values customers.
to achieve high service availability its cloud system utilizes a backend system to monitor key performance metrics e.g.
latency reboots of each serving vm at every xminutes.
as such the system would automatically file an issue report when the performance metric value is greater than a predefined threshold.
in each issue report the serving vm is characterized by many properties e.g.
location hardware type and software version customer affiliation etc with a timestamp and the issue report can thus be treated as multi dimensional time series data.
based on domain knowledge issue reports are typically bucketized with many crucial attribute combinations at a certain granularity e.g.
region name storage client name .
then anomaly detectors are implemented on these combinations to identify incidents with respect to the volume of issues reports in each bucket.
when incidents are detected corresponding production teams would further 300esec fse november virtual event usa j. gu c. luo s. qin b. qiao q. lin h. zhang z. li y. dang s. cai w. wu y. zhou m. chintalapati and d. zhang .
.
.
.
time issues normalized australia dagenthostplugin compute os.
.
gagenthostplugin g os.
.
pagenthostplugin p os.
.
a a platform related incident09 .
.
.
.
time issues normalized europe us dagenthostplugin compute os.
.
gagenthostplugin g os.
.
pagenthostplugin p os.
.
b same incident on different regions figure examples for a multi region incident reduce the problem scope by manually investigating other combinations so that engineers can quickly fix the problem and bring the service back to normal.
with substantial increase on the scale and high availability requirement of cloud service however the above approach is not effective.
on the one hand the scope of selected combinations has to be large because it would be impossibly difficult to monitor thousands of time series resulting from fine granularity combinations.
as a consequence some incidents can be easily lost within the background noisy issue reports and no clear burst can be detected in the overall trend of all issues.
on the other hand there would be a lot of repetitive incidents because these interconnected buckets are considered separately leading to the subsequent ad hoc and manual investigation process rather labor intensive and time consuming.
when a considerable number of incidents come support engineers may still be expected to have some sleepless nights.
to solve this problem we have deployed mid in microsoft azure to automatically identify incidents from thousands of issues reports filed by the backend system.
in last months our statistics showed that more than incidents per month from mid are acknowledged by production teams.
among engineers that we have talked with we note that mid not only improves their efficiency saving hours on average but also enables to identify a couple of incidents that are difficult to be detected using conventional approaches.
in the following we depict two representative cases to illustrate the effectiveness in improving system reliability and customer experience.
.
case detecting platform related incidents oftentimes it is observed that the volume of issue reports under a region level could suddenly increase at a certain point of time.
such an incident may be due to major feature changes of the cloud host agents.
actually this kind of problem can impact many regions as the problematic agent software rolls out but our engineers are continuously distracted by repetitive alerts.
under the circumstances midis effective to isolate issues among many different attributes and thus accelerates diagnosis.
figure a shows a platform related incident detected by mid in september .
based on the reported effective combination engineers rapidly12 .
.
.
.
time issues normalized us ec region us customer g inc subscriptionid 3dxx xxxx xx9d a a silent incident02 .
.
.
.
time issues normalized us2 ec region us2 customer c inc subscriptionid 10xx xxxx xxe9 b a silent incident figure examples for silent incidents draw a conclusion that inconsistent contact among different host agent software resulted in the incident.
such a platform related issue may impact many regions as the problematic agent software rolls out.
figure b shows the volume of issue reports in different regions within the same time window.
it is noted that the volume number in region europe and us suddenly increased on september 26th and 27th respectively.
previously engineers have to investigate these repetitive incidents separately.
by implementing mid the platform related incidents can be pinpointed and thus the efficiency of troubleshooting is significantly improved.
.
case detecting silent incidents unlike the platform related incidents some incidents are hard to be detected if solely counting the volume of issue reports at a coarse granularity e.g.
region .
there are millions of customer vms hosted in microsoft azure.
when some vms are suffering performance degradation these cases may bury in noisy issue reports and thus cannot be easily localized by conventional approaches.
in other words such incidents do not cause alarms by the anomaly detectors.
these incidents are called silent ones .
as a comparison mid performs well on detecting such silent incidents.
two examples are presented in figure .
figure a depicts an incident that was detected by mid on january where the effective combination ec consists of a specific customer g inc. with a specific subscription id in region us.
our engineer further found the above customer deployed only one vm under this subscription in this region.
due to an improper setting this vm had a very small size disk but ran too many tasks.
as a result the vm was continuously impacted by the increase of i o latency.
note that while the performance of this vm was suddenly dropped on january 2nd the volume of issue reports in region us did not have significant change.
one similar example is illustrated in figure b which was detected by mid in february .
in this case the volume of issue reports in region us2 was even reduced when the incident happened.
however mid can effectively identify these silent incidents that engineers in support teams may neglect and thus improve customer experience.
301efficient incident identification from multi dimensional issue reports via meta heuristic search esec fse november virtual event usa related work .
incident identification mid identifies incidents through searching effective combinations from structured issue reports.
issue reports record detailed information about runtime issues and can be of great value for incident also called emerging issues in other work detection and identification .
linet al.
proposed idice which mines attribute combinations to characterize emerging issues within issue reports.
idice is a pruning based search method which employs manually customized strategies to reduce the search space so that idice is not appropriate to deal with large scale high dimensional issue reports from cloud systems.
in contrast midemploys meta heuristic search to automatically detect dynamic emerging issues from large scale issue reports in a timely manner.
one key functionality of mid is incident detection i.e.
anomaly detection on time series data.
anomaly detection is also a critical task with lots of efforts from both industrial practitioners and academic researchers .
specifically there is a body of work focusing on anomaly detection in key performance indicators kpis in order to monitor systems and identify incidents .
for instance li et al.
propose rocka a robust and rapid time series clustering algorithm to cluster kpis for anomaly detection.
xu et al.
employ variational auto encoder vae an unsupervised approach to monitor periodic kpis in web applications.
however designing kpis is laborintensive and requires domain expertise especially for large scale complex cloud systems.
in contrast mid focuses on automatically identifying attribute combinations that characterize incidents from high dimensional issue reports.
it is worth noting that there is a body of work that conducts issue detection with user review data .
gao et al.
proposed idea which uses a topic modeling algorithm to interpret topics in user reviews and detects emerging issues for online apps.
however user reviews in cloud systems are not as valuable as those for online apps.
in cloud services there is a gap between the problem perceived by users and real issues.
compared with user reviews issue reports in cloud systems contain more detailed information related to real incidents.
.
meta heuristic search meta heuristic search is an efficient and effective technique for solving computationally hard combinatorial optimization problems.
it has shown effectiveness in solving a diverse range of research directions such as search based software engineering machine learning mathematical logic and computer aided verification .
in practice compared to conventional systematic search which is involved in exponential time complexity meta heuristic is able to provide a sufficiently good solution to combinatorial optimization problems quickly .
our work which uses metaheuristic search to efficiently detect incidents in cloud systems also fits the theme of search based software engineering .
conclusion timely and effectively identifying incidents is critical for the maintenance of cloud systems.
in this paper we propose mid a novel meta heuristic based approach to the problem.
based on the specifictailored two mode search algorithm midis capable of rapidly identifying effective combinations that characterize incidents from largescale multi dimensional issue reports.
the experimental results demonstrate that our approach mid performs better than the current state of art method on both synthetic datasets and production datasets collected from microsoft azure.
furthermore our industrial practice also validates the effectiveness of mid.
for future work we plan to further improve mid to make it capable of identifying more types of system issues e.g.
anomaly patterns through integrating different kinds of objective functions.