neurological divide an fmri study of prose and code writing ryan krueger university of michigan ryankrue umich.eduyu huang university of michigan yhhy umich.eduxinyu liu georgia institute of technology xinyuliu umich.edu tyler santander uc santa barbara t.santander psych.ucsb.eduwestley weimer university of michigan weimerw umich.edukevin leach university of michigan kjleach umich.edu abstract softwareengineeringinvolveswritingnewcodeoreditingexisting code.
recent efforts have investigated the neural processes associatedwithreadingandcomprehendingcode however welack a thorough understanding of the human cognitive processes underlying code writing.
while prose reading and writing have been studied thoroughly that same scrutiny has not been applied to codewriting.inthispaper weleveragefunctionalbrainimaging to investigate neural representations of code writing in comparison to prose writing.
we present the first human study in which participantswrotecodeandprosewhileundergoingafunctional magnetic resonance imaging fmri brain scan making use of a full sized fmri safe qwerty keyboard.
we find that code writing and prose writing are significantly dissimilar neural tasks.
while prose writing entails significant left hemisphereactivityassociatedwithlanguage codewritinginvolves more activations of the right hemisphere including regions associated with attention control working memory planning and spatial cognition.thesefindingsareunlikeexistingworkinwhichcode and prose comprehension were studied.
by contrast we present the first evidence suggesting that code and prose writingare quite dissimilar at the neural level.
keywords medical imaging spatial memory attention synthesis keyboard acm reference format ryan krueger yu huang xinyu liu tyler santander westley weimer andkevinleach.
.neurologicaldivide anfmristudyofproseand code writing.
in 42nd international conference on software engineering icse may23 seoul republicofkorea.
acm newyork ny usa pages.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation onthe firstpage.copyrights forcomponentsof thisworkowned byothersthan the author s mustbehonored.abstractingwithcreditispermitted.tocopyotherwise or republish topostonserversortoredistributetolists requirespriorspecificpermission and or a fee.
request permissions from permissions acm.org.
icse may seoul republic of korea copyright held by the owner author s .
publication rights licensed to acm.
acm isbn ... .
introduction writing code is a crucial activity in software engineering.
with software relatedinnovationsdrivinga .8trillionglobalitmarket and demandfor university computer science courses outstripping the supply of professors the value of developing and maintaining software is increasing rapidly.
this importance is already reflected at an industrial scale with fortune companies such as amazon and at t committing massive resources to retrainup tohalf of theirworkforce inprogramming intensive areas .despitethisincreasingprevalenceofsoftwareand demand for skilled programmers we rely on traditional survey instruments and self reporting rather than an understanding of fundamentalhumanbrainfunction whendevelopingmethodsto support improve teach and evaluate code writing and editing.
we present findings from the first study to use medical imaging to investigate the cognitive processes underlying the writing of code.
problem.
thereisasignificantbodyofworkstudyingthepsychology of programming ranging from the cognitive prerequisites ofprogramming toentiretheoriesofthecodingprocess butthisresearchhasreliedlargelyonobservationalevidence.recentadvancesinmedicalimaging particularlyfunctionalmagnetic resonance imaging fmri have improved researchers ability to measure brain activity associated with various cognitive processes.
asanon invasive invivotechnique fmriisaneffectivetoolfor clinical researchers studying brain function and the effects of various treatments as well as for psychology researchers mapping brain areas in activities as diverse as musical performance andfoodcravings .findingsusingmedical imaginghavesuccessfullytransitionedtoguidingbehavioraland developmental improvement in domains like mathematics and education .whilemedicalimagingstudiesarestillnewincomputer science software engineering researchers have used fmri tohelpunderstandtaskslikecodecomprehension codereview and data structure manipulation .
imaging advances hold out the promise of helping computer science as they have helpedotherfields fromunderstandingexpertise tor etraininganagingworkforce toguidingpedagogy to augmenting unreliable self reporting .
challenge and insight.
while there have been fmri studies of codereading e.g.
andnon fmri studies of code writing e.g.
tothebestofourknowledgetherearenoprevious fmristudiesofcodewriting.weattributethistotwochallenges physicsanddesign.first normalkeyboardscannotbesafelyplacedoraccuratelyreadnearmagneticresonancescanners.theyinterfere ieee acm 42nd international conference on software engineering icse i got in my and i drove into town.
intsum int a intb your code here return figure1 weinvestigatetherelationshipbetweenproseand code writing using functional brain imaging.
experimentalcontrolssystematicallyvarycontent codevs.prose andsize fill in the blankvs.longresponse .docodeandprosewriting exhibit the same patterns of neural activity?
withthefmrimeasurementsandthefmriinterfereswithkeyboard reporting.
second imaging studies require carefully controlled experiments andnohigh leveldesignforacodewritingcontrasthas been proposed cf.
behroozi et al.
s contrast of whiteboard interview questions with pencil and paper versions which changes themodalitybutusesidenticaltasks orhuang etal.
scontrastof data structure problems with mental rotation problems which changes the task but not the modality .
we combine two corresponding insights to overcome these challenges.
first we propose to employ a bespoke keyboard that moves all metal and control logictoaseparateroom.second weproposeatwo by twocontrastsetup codevs.prosewritingandfill in the blankvs.longresponse informally single word production vs. longer creativity .
ouruseofprosewritingasabaselinegroundsourexperiment and clarifies our results.
prose writing is a well studied activityin psychology and medical imaging has aided understandingofitsunderlyingcognitiveprocesses.forexample fmristudieshaveprovidedinsightsintobrainareasassociatedwithprosewriting andthespecificityofsuchregionsacrossdifferent prosewritingtasks inadditiontoaddressingneuralcorrelates of the roles of expertise and creativity .
the contrast betweencodeandprosewritinginourexperimentilluminatestheir differences and similarities at a neurological level.
experiment.
weconductedahumanstudyinwhich30participants performed prose and code writing tasks in an fmri scanner figure .
participants completed two types of tasks fill in theblank fitb andlongresponse lr .fitbtaskspresentedeither a sentence or program containing a blank space requiring theparticipant to provide the missing word or code snippet.
in lr tasks participantswroteproseorcodefromscratchtoansweran open ended question or meet a program specification.
results.ourprimaryfindingisthatcodewritingandprosewriting feature significantly different patterns of neural activity par ticularly in parts of the brain associated with attention control working memory and spatial cognition.
while prose writing involves activation in canonical areas associated with language code writing involves a very different set of right lateralized regions associated with attention memory planning and spatial ability.ourexperimentprovidesthefirstevidenceofsignificantneuraldif ferencesbetween prosewriting whichisneurallysimilartonatural language and code writing which we find is not .
the contributions of this paper are as follows an fmri study of participants comparing code writingto prose writing.
to the best of our knowledge this is the firstfmristudytofeaturekeyboardcodewriting.ourexperimental design contrasts code prose fill in the blank and long response questions.
amathematicalanalysisoftheresults.aftermitigatingnoiseandcorrectingforfalsediscoveryrate q .
wefindthat generalcodeandprosewritingfeaturedistinctpatternsof neuralactivity .
t .
related toattention working memory and spatial cognition.
for long response writing questions wefindtheclearestdistinctionweareawareofin theliterature .
t .1and3.
t .
between code attention memory planningandspatialability and prose language letters and words .
forreplicationandreproducibleresearch wemakeavailable ourmaterialsandmethodsonourprojectwebsite.1these includeourcorpusofstimuli ourde identifiedmedicalimaging data our method for adapting a key qwerty usb keyboard for the fmri environment and a configurable program for stimuli presentation editing and data collection.
background inthissection wesummarizehowmedicalimagingcanuncover neuralcorrelatesofcognitiveprocesses previousnon writingstudies of code and previous non imaging studies of writing.
.
medical imaging and software engineering functional magnetic resonance imaging fmri is a measurement technique that has provided many neuroscience and cognitive scienceinsights.ofthenon invasive invivofunctionalneuroimaging approachesavailable fmrihasemergedasthemostpopularover the last years appearing in over studies .
fmri relies on the hemodynamic response or rapid change in blood flow to deliver metabolites e.g.
oxygen glucose to neuronal tissues.
oxygenated and deoxygenated blood cells vary in their magnetic properties allowingfmritoindirectlymeasurethesechangesviathe application of magnetic fields.
using the energy released to locate these bloodcells fmricalculates the blood oxygen leveldependent bold signal defined as the ratio of oxygenated to deoxygenated hemoglobin.
the use of medical imaging to study software engineering is relatively new.
there have been fewer than a dozen studies at major conferences that use fmri to investigate software engineering .othermedicalimaging modalitieshavebeenusedtoexaminesoftwareengineering e.g.
fnirs oreeg buthuang etal.demonstratedtheimportance of fmri s penetrating power and spatial resolution when studying computing tasks .
all previous fmri studies ofsoftwareengineeringhavefocusedonreadingorreviewingcode we make use of fmri to study code writing.
679fill in the blank below.
angered that the book arrived in the mail in such shabby condition elliot insisted that the book seller it with a new copy.
a prose fill in the blankwhat would happen if everyone lived in space?
e.g.
what type of houses would they live in?what type of clothing would they wear?
b prose long responsegiven two 2d arrays of integers x1andx2 write the code needed to copy every value from x1 to its corresponding element in x2.
1for int i i j i for int j j j your code here c code fill in the blankimplement a function issorted that accepts a vector of integer values and returns true if it isnon decreasing and false otherwise.
d code long response figure2 illustrativeexamplesofstimulishowntoparticipants.weinvestigatedfourcategoriesofstimulicoveringcodeand prose in fill in the blank and long response scenarios.
fmri srelianceonthehemodynamicresponseanduseofmagnets both restrict study design and ecological validity.
first the temporalstructureofthehemodynamicresponselimitsmeasure mentstosmall typicallylessthanoneminute windows.second the fmri scanner and magnetic fields preclude proximate metallic orelectronicdevices previousstudiesusedasmall fixednumber of multiplechoice responses e.g.
selectedbypneumaticbutton press or similar device .
in this work we lift this second restriction by making use of a full keyboard.
.
writing and cognition there is strong interest from both academia and industry in improvingprogrammers abilitytowritecode .while thesuccessofahandfulofprojects e.g.
scratch hintsatthe opportunity present in understanding the mental processes associated with writing code modern research is limited by our lack of a foundational neurobiologically grounded understanding .
researchers since the s have sought to understand the psychology of programmers but have largely relied on observational data e.g.
.
these efforts have ranged from studies of expertise to entiretheories of the coding process tohowprogrammersusetheinternet .peaandkurland who conducted research in the s on the cognitive prerequisites and effects of computer programming emphasized the need to understand programmers psychology given the rising importance ofcomputerliteracy .despitethemassivegrowthofsoftwareengineeringsincethen peaandkurland scallhasnotbeen answered with a grounded neurological understanding.
there is also a significant body of research outside of computer science to study the cognitive processes of prose writing see berninger and winn for a survey .
unlike code prose writing has been studied using medical imaging to establish a more objectiveunderstanding.thefindingsfromthesemedicalimagingprose writing studies such as the brain regions associated with prose writingandthespecializationofsuchregions have in turn successfully informed subsequent research in pedagogy .
previous work simultaneously studying code and prose writing hasfocusedonnon imaging usesof onetoaid inthe instructionoftheother.moreexplicitly researchinstorytellinghasusedprogramming as a means to improve children s prose writing and vice versa .
in either direction researchers reported similarity in the processes of code and prose writing such as their sequence structure and object orientednature .however these qualitative findings have not been substantiated by medical imaging.
.
motivation imaging of code writing medical imaging has made remarkable contributions in guidingbehavioral enhancement and development in different domains suchasmathematics andeducation .forinstance cognitive understanding of numeracy has inspired researchers to use differentmeasurestopredictindividualdifferencesinmathematical development and achievement .
based on medical imaging research in music training researchers successfully developed interventions to enhance executive functioning and working memoryinolderadults .similarly imagingfindingsinreadingrelated brain activitiesmade it possible to design interventionsto improve reading skills over time in dyslexic children .
surveyededucatorslargelybelieveunderstandingthebrainis importanttothedesignanddeliveryofteaching .berningerand winn foundthat integrationof neuroscience andlearning science maypromoteeducationalevolution .dahlin etal.foundthat trainingcantransferbetweentwotasksthatengageoverlapping processing components and brain regions .
specifically the neuroimaging findings of the role of working memory in prose writing have led to a series of instructional intervention studies showing writing problems can be improved .
inspired by research on prose writing and other domains using medical imaging we believe similar benefits for code writing may be available.
to the best of our knowledge there are no previous imaging studies of code writing in general nor studies comparing code and prose writing in particular we return to non imaging code writing research including software psychology studies in section .
experimental setup and methods we present a human study in which participants underwent anfmriscanwhilecompletingproseandcodewritingtasks.we discuss themakeupandrecruitmentofourparticipantcohort howwedevelopedourtaskmaterials theexperimentalprotocol our method for collecting fmri data and the construction of an fmri safe keyboard that enabled participants to freely write text and code during an fmri scan.
.
participantdemographicsandrecruitment we recruited undergraduate and graduate computer science students at the university of michigan.
the protocol was approved by the university s irb hum00138634 .
table summarizes demographicinformationforthiscohort.studentswhohadcompleted coursework in data structures and who could safely undergo an mriscan wereeligibletoparticipate.
allparticipantswere native 680table demographics of the participants in our study.
demographic variables participants sexmale female gendermen women fluid degree pursuingundergraduate 27graduate english speakers right handed and had normal or corrected tonormal vision.
each participant was offered a cash incentive and a 3d model of their brain upon completion.
when participants elected to participate in the study we collectedbasicdemographicdata sex gender age cumulativegpa andyearsofexperience andsocioeconomicstatus ses data.in addition each participant completed three standard psychological measurement surveys positive and negative affect scale panas emotional health autism spectrum disorder asd and needfor cognition nfc inclination for effortful cognition .
finally weadministeredashortprogrammingquiztoassessbasicc c programming skills.
although we conducted a correlation analysis between these demographicandpsychologicalmeasuresandbrainactivities none survived a strict false discovery rate correction q .
.
we claim no significant demographic or attitudinal correlation with codeorprosewritinginourstudy.intheremainderofthispaper wethustreatourparticipantsasawhole ratherthanconsidering any subpopulation analyses.
.
participant tasks participantsunderwentanfmriscanduringwhichtheycompleted a sequence of tasks associated with code and prose writing.
par ticipants were shown a sequence of sentences or code snippetsand asked to type a response while inside the mri machine.
we divided tasks into fill in the blank fitb and long response lr activities.
in fitb participants were shown a nearly completed sentenceor codesnippetand had30seconds totypea shortword or expression that they thought best completed the sentence orsnippet.
in lr participants had seconds to write a completeresponse to a high level task or question.
participant completed four categories of tasks each lasting minutes fitb prose tasks lr prose tasks fitb code tasks and lr code tasks.
examples of stimuli under each of these categories are shown in figure .
code tasks.
we developeda corpus of code stimuli by adapting tasks from turing s craft a library of short programming exercises used in web teaching evaluations each with prompts and examplecorrect solutions.forthe fitb codetasks we selecteda setof17prompt answerpairs andreplacedarandomportionof thesolutionwithablankline.participantswereaskedtofillinthat blank line.
for the lr code tasks we selected a set of prompts that our pilot study suggested as answerable within seconds.prosetasks.
forcontrolledexperimentationandtoadmitacontrastbased analysis we selected prose stimuli that were analogous to thecodestimuli.asprosewritingfmristudieshaverevealeddifferences in brain activation based on writing content we carefullydevelopedourprosewritingstimuli.first weusedaset of non math analogies that have been shown to be useful in the teachingofmathematics todevelopalistoftermsassociatedwithquantitativereasoning.synonymsofthesewordswere addedtoexpandthesearchspace.togenerateprosefitbprompts wefirstmatchedthelistofsearchwordstoasetofscholasticassessment test sat fill in the blank questions and chose17 such matches.
we then replaced the blanks used in the original sat promptwiththeappropriatewordsfromthesatanswer selectingeasiersynonymswhenourpilotstudyrevealedthattheymightnot be accessible to a wide population.
we replaced the search word foundinthepromptwithablankline participantswereaskedto fill in that blank line.
our prose lr prompts were generated by matching search words with a set of english as a second language esl long response prompts and choosing matching prompts.
29outofthe30recruitedparticipantssuppliedvalidinputsfor thetasks.pertask the29participantsprovidedamaximumof82 keystrokes mean for fitb prose and keystrokes mean forfitbcode.forthelrtasks wecollectedamaximumof435 keystrokes mean for prose and keystrokes mean for code.
in general the fitb tasks required fewer keystrokes to complete participants had twice the time to complete the lr tasks.
weobservedthatparticipantswereabletowritemultiplecomplete sentences for prose tasks and to complete variable declarations loops and function calls in the time allotted.
.
experimental protocol in this subsection we provide details on the process that participants completed before and during their fmri scans.
during a twohoursession wecollectedinformedconsentandsafetyscreening information.participantsclearedtoparticipateweregivenacoding quiz and psychological surveys.
participants were then shown a brieftrainingvideoaboutthetaskbeforeenteringthescanner.eachmachinesessionbeganwithahigh resolutionanatomicalscanduring which participants were given a text editor interface and were instructed to practice typing on the keyboard while lying inside theboreofthemachine showninfigure3 .thispracticetyping was not recorded.
participants then completed four task blocks associatedwithcodeandprosewriting prosefitb proselr code fitb and code lr.
to mitigate training and fatigue effects we randomized both the category order and the task order.
a fixation cross was presented between each question for a random 10s duration to provide a brief rest and settle brain activity.
.
fmri data acquisition mridatawereacquiredwithprotocolsensuringhighspatialand high temporal resolution.
we summarize the details e.g.
for thepurposes of replication and meta analysis but generally attestthat the scanning measurement hardware and steps align with contemporarybestpractices .allscanswereconducted on a 3t general electric mr750 scanner with a channel head coilattheuniversityofmichiganfunctionalmrilaboratory.first 681figure3 typinginthefmrimachine.duringascan theparticipantwouldbeplacedfurtherintheboreofthemachine but the keyboard and visual interface remain as shown.
mri safe display mrifaraday cage control room participant w keyboard rf safe waveguide kb to usb logicexperiment pcvideo output mri technician and investigator figure4 illustrationoffmriwritingsetup.theparticipantliesintheboreofthefmrimachine andthekeyboard sca blesareconnectedthroughanrf andmri safewaveguide.
the waveguide connects to the control room where we attachthekeyboardlogictoanexperimentpcdisplayingourediting environment.
the video output of the experimentpc feeds through the waveguide to connect to an mri safemonitor which can be seen by the participant in the mribore via mirror projection.
high resolutionanatomicalscanswerecollectedwitha t1 weighted spoiled gradient recall spgr sequence tr .
ms te ms ti ms fa slices mm thickness .
an estimate ofmagneticfieldhomogeneitywasthenacquiredusingaspin echo fieldmap tr 7400ms te 80ms .4mmslicethickness .all foursubsequenttaskrunsemployeda t weightedmultibandecho planar imaging sequence tr ms te ms fa accelerationfactor withwhole braincoverageover60slices .
mm3isotropic voxels or three dimensional pixels .
.
fmri safe keyboard and editing because the fmri machine involves an extremely powerful mag net and very strong electromagnetic fields typical electronic devices cannot be used safely nearby.
for example a traditional usb keyboardwillnotfunctioninthemrimachinebecauseitwillinduce current on the usb cable causing erratic keystroke signalsor unpredictable behavior.
moreover large metal masses withinthe mri s magnetic field can cause disastrous signal noise andruin brain images and also pose fire and collision hazards .
previous fmri studies of software engineering all employed special hand held button press devices for selecting among a small fixed set of choices e.g.
.
these devices do not meet the requirements for code writing.
in this work we adapted a key qwerty usb keyboard for the fmri environment.
all control logic and metal are removed fromthekeyboard andmovingmetallicpiecesarereplacedwith 3d printed plastic equivalents.briefly eachindividualkeyisattached to its own shielded wire that extends feet to provideadequate distance from the core of the mri machine.
the wires were fed through an rf safe waveguide to the fmri control room where a custom built device reads the state of each key and outputsastandardusbsignal.becausenocontrollogicwaspresent near the mri machine and keystrokes were processed from the controlroom weeliminatedissuescausedbyelectromagneticinterference.inaddition mostfmristudiesusesequencesofstatic pre renderedstimuli controlledbysoftware e.g.
e prime to record responses.
we instead employed a more indicative dynamic editor environment including syntax highlighting available in our replication materials.
we found this organization illustrated in figure to work well although imperfectly printed plastic pieces caused occasionally duplicated keystrokes for two participants.
whileresearchershaveconsideredtheproblemforpianokeyboards keyboardswithnoscreen andthusnoback and forth editing e.g.
orsignificantrestrictionsonwhichkeyscouldbe pressed e.g.
tothebestofourknowledge theclosestrelated fmri keyboard work tends to be about a decade old e.g.
.
existingworkhasprimarilyfocusedonexperimentaldesignthat reduces signal noise affecting brain scan quality.
our custom built keyboardintroducesnegligiblesignalnoiseonthefmribrainscan but also supports our additional use case for live editing duringscanning.
we make our engineering notes on our successful ap proach and failed attempts available as part of our replication materials.
analysis approach caremust be takenwhenanalyzingfmri resultstobothmitigate noise and also to avoid false positive correlations .
informally wefollowathreestepprocess preprocessthedatatoaccountfor noise analyzeindividualparticipants andcomparebetweenpartici pants.ourapproachfollowsthestate of the artinmedicalimaging bothforcognitiveneuroscienceingeneralandforsoftwareengineeringinparticular e.g.
.wepresentourresultsin section the remainder of this section summarizes our analysis for replication and comparison purposes.
statistical analysis of fmri data is inherently multi level.
the datafirstrequireextensive preprocessing toremovevarioussources of systematic noise e.g.
due to head motion or inhomogeneities in the magnetic field .
an additional goal of this procedure is to align all individual participant brains with a standard anatomical template thisallowsforinter participantcomparisonandlocalizationofsignalstospecificbrainstructures.followingpreprocessing eachparticipant s data are submitted to a first level fixed effects general linear model glm .
here voxel timeseries are modeled against an 682idealizedtimeseries giventhecanonicalhemodynamicresponse functionandtheoccurrenceofeach event i.e.
stimulus overthe courseofthescan.thisyieldsasetof betaimages thatdescribehow sensitive each voxel is to the conditions of our experiment.
finally the beta images for each participant are combined in a second level randomeffectsglm whichyieldsaveragemapsofbrainactivity whencontrasting one condition versus another e.g.
code vs. prose tasks .
importantly because these statistical tests are conducted on a voxel by voxel basis covering tens of thousands of voxels weapply a falsediscovery rate fdr correction toprotectagainst spuriously significant effects across the brain.
preprocessing removingnoise.
thepreprocessingstepremoves noise suchasfrommotionduringthescan .weemployedarobust preprocessing pipeline using the statistical parametric mapping matlab package .
first the functional timeseries were slicetime corrected this accounts for the fact that interleaved slice acquisitionduringscanningcausesslightdifferencesintherelativetimingofdatacollectionwithinatr i.e.
the800msintervalduring whichwhole brainvolumesaresampled .next weappliedhead motion correction and unwarped the data using voxel displacement mapsderived from the fieldmap sequence see section .
.
this stepisarguablythemostcrucialaspectofpreprocessing ashead motion is the leading cause of signal artifacts in fmri data fur ther interacting with baseline distortion in the magnetic field to geometrically warp voxels.
we then segmented and skull stripped theanatomicalimages whichweresubsequentlycoregisteredto the functional data both anatomical and functional scans werethen spatially normalized to the montreal neurological institute mni152 template .
finally we constructed a brain mask for each participant whichensures theexclusion ofvoxels outsideof brainspace during statistical analysis.
first levelanalysis withinoneparticipant.
thefirst levelanalysis focuses on each participant individually.
we specified four glms for each participant corresponding to each of the fitb and lr code and prose tasks .
the onsets and durations of each trial weredefinedandconvolvedwiththecanonicalhemodynamicresponse function to yield a predicted timeseries of activity i.e.
how we would expect the signal in a voxel to behave if it were sensitivetoourtask .thedatawerehigh passfiltered 128s to remove low frequency noise and the model was fit using robust weightedleastsquares rwls .sincethesedatamaybemore susceptible to head motion as a result of typing on the keyboard we view rwls as essential for ensuring unbiased parameter estimates the objective function first obtains an estimate of the noise variance at each scan and the model is subsequently re fit after reweightingthedatabyafactorof1 variance.thus anyscansbiasedbyheadmotionaregivenlessinfluenceinthemodel allowing for homogeneous error variance and optimal parameter estimates.
second levelanalysis betweenparticipants.
thesecond level analysis compares how different participants approached the same task.priortosecond levelglm thebetaimagesforeachparticipant werespatiallysmoothedusinga5mm3full widthathalf maximum fwhm gaussian kernel.
these were submitted to an omnibus model i.e.
a factorial analysis of variance fit using restricted maximum likelihood reml .
to test for average differences in activitybetweenconditions wespecifiedseveral t contrasts code prose fitb code fitb prose and lr code lr prose.
the contrast a breferstothecomparisonbetweentaskconditions aandb voxelsorfeaturesthataremoresensitiveto aratherthan b orthat drive the modeled distinction between aandb.
in general fmri cannotbeusedtoexamineacondition cdirectly asubtractivecontrolled experiment isused instead to compute a b. for example in our experiments both the fitb and lr tasks feature reading a writtenprompt butingeneraltheneuralactivityassociatedwith reading the prompt cancels out when the two are contrasted and any remaining difference can be attributed to non identical partsoftheexperimentalcondition i.e.
writingcodevs.writing prose .
the ultimate result of this process is a statistical parametric mapthat displays significant contrast related activity across the brain quantified using t statistics the magnitude of the mean difference between aandb scaled by model error.
traditionally brainregionsshowingsignificantlymoreactivityin arelativeto bare represented with a gradient of hot colors red to yellow while regions that are more active during bthanaare represented byagradientof cool colors bluetogreen .suchcontrast based analyses arestandard forfmri .
allresults werefdrcorrected q .
andthresholdedforaminimumclusterextent of voxels.
results we analyze our results with respect to four research questions rq1.do self reports claim code writing is like prose writing?
rq2.does the brain treat code writing like prose writing?
rq3.what low level features explain code and prose writing?
rq4.what high level features explain code and prose writing?
to guide the interpretation of our results we consider an informalmodelinwhichlongresponsecoding thetaskwestudiedthat is most indicative of coding practice is made up of the iterative low level selection of individual pieces of syntax guided by topdowncontrol.thatis writingasmallprocedure thelongresponse task consistsofrepeatedlywritingthenextindividualword the fill in the blanktask whileguidedbyahigher levelgoal.exam ining the fitb task sheds light on the lower level basis for code writing while examining the lr task may illuminate aspects of higher level creativity at the heart of software engineering.
in our fmri analyses after filtering incomplete and noisy brain scans we used data from female male of the participantsinourexperiment.whenreportingpatternsofneuralactivity wemakeuseofthestandardbrodmannanatomicalclassification system which divides the brain into areas ba through ba52 based on cytoarchitectural i.e.
cellular level similarity.
thefmriresultsdiscussedinthissectionareobtainedfollowing the contrast based analysis methodology described in section .
.
rq1 self reporting on code and prose weconductedaqualitativeanalysisofparticipants self reported post survey data.
of our participants provided their interpretationsof similaritiesbetween proseand codewritingtasks in the post survey.
over a third .
of these participants reported some similarity between code writing and prose writing.
repre sentative examples include explaining how filling in the blank 683figure5 codewritingvs.prosewritingcontrast.hottercolors indicate greater t values i.e.
more activity during coding relative to prose .
was like adding variables in code we investigate such similarities in section .
and that both tasks use logic we consider men tal representations and problem solving in section .
.
another participantattributedsimilaritybetweenthetwotaskstohaving alreadyformed an ideaofthesolutionthat hadonlytobetranslated to text we consider working memory and attentional control in section .
.
asourimagingresultswillreveal thesesubjectivereportsdonot alignwithmeasurementsoftheneuralcorrelatesofcodeandprose writing.unreliable self reportingis well establishedin bothcomputer science and psychology highlighting the need to augment surveys with more objective metrics.
.
rq2 code writing vs. prose writing weinvestigatewhetherthereare generaldifferencesinneuralactivitybetweenwritingcodeandwritingprose.wethusconsider all of our code writing tasks fitb and lr against all of our prose writingtasks fitbandlr .thisbroadercode prosecontrast shown in figure revealed a widely distributed set of brain re gions showing significantly greater activity when writing code.
only significant regions are shown the colors correspond to the t statistic whichmeasuresthesizeofthedifferencerelativetothe variation in the sample data tvalues closer to are not significant after fdr correction .
while care must be taken when comparing such statistics across experiments as an example baseline we note thatthegreatest t valuereportedinhuang etal.
sfmristudyof datastructuresandspatialabilitywas2 .
t .
.we view our .
t .
contrast as a very strong result.
in detail a particularly large cluster peaked near the left postcentral gyrus and superior parietal lobule ba extending forward through the primary motor cortex ba and the premotor supplementarymotorcortex ba6 .thispatternwasalsoobservedintherighthemisphere albeityieldingsomewhatsmaller differencesinactivity reflectedinthesmaller t statistics .however therighthemispherediddemonstratemorediffuseactivitythrough the lateral prefrontal cortex including the superior and middle frontalgyri ba9 .therighthemispherefurthershowedwiderclustersofactivityinthelateraltemporo occipitalandtemporoparietal cortex spanning from the inferior and middle temporal gyridorsally to the angular gyrus supramarginal gyrus and inferior parietal lobule ba .
finally we observed comparable patternsofactivityinbilateralanteriorinsula ba13 andacross figure fill in the blank code vs. fill in the blank prosecontrast.hottercolorsindicatemoreactivityduringcodingrelative to prose cooler colors indicate the reverse.
the midline of the brain particularly the medial face of the supplementary motor area ba and the cingulum both middle and anterior ba .
we find a significant .
t .
and widely distributed difference in neural activity between code writing and prose writing in general.
the brain does nottreat code writing and prose writing as similar tasks.
.
rq3 code and prose foundations having established that the brain treats code writing and prose writingdifferently we focus attentiononour lower leveltasks to explainthatdifference.wethusconsiderthecontrastfitbcode fitb prose shown in figure .
while there was considerable overlapbetweenthiscontrastandthegeneralcode proseanalysis informally we expect some similarity between writing one word and writing a full sentence we find that focusing on fitb code fitb prose reveals even stronger .
t .
and .
t .
conservativelythresholdedformultiplecomparisons differences in activity across a number of regions.
for example we observedstrongbilateralactivityacrosstheentiretyofbothprecen tralandpostcentralgyri i.e.
theprimarymotorandsomatosensory cortices respectively ba .
while these areas are essential for somatomotor function they are not cognitive that is activity intheseregionsdoesnotdirectlyinvolve thought or planning .
theseaspectsofmotorbehavioraregenerallysupportedbythedorsal premotor cortex and pre supplementary motor area ba whichshowsignificantlygreaterbilateralactivitywhenperforming fitbcodevs.prosetrials.
thissuggeststhattheproductionofevena single element of code may require more careful top down control to effectivelyplanandproduceacontext relevantanswer.
thisisfurther supported by significant differences in activity along the frontaleye fields including the prefrontal eye fields and supplementary eyefields ba these regions are known tohelp guide theeyestowardrelevantstimulusfeaturestogenerateanappropriatemotor plan .
we additionally observed significant increases in activity within otherregionscomprisingtheso called dorsalattentionnetwork of which the frontal eye fields are a part .
this includes the superiorparietallobuleandintraparietalsulcus ba7 structures criticalforguidingandmaintainingattentioninatop downfashion .
although not part of the dorsal attention network the bilateral activity found in the anterior insula ba furthersupports the notion that fitb code likely requires more careful 684figure long response code vs. long response prose contrast.hottercolorsindicatemoreactivityduringcodingrel ative to prose cooler colors indicate the reverse.
this rep resentsastrongandexcitingresult asignificantlateralizeddifferencebetweenprosewriting canonicallefthemispherelanguage areas and code writing right hemisphere atten tion memory planning and spatial ability areas .
monitoringoftherelevantinformationneededtoprovidetheappropriate response.
finally wenotesignificantdifferencesinactivityalongposterior temporal occipital temporal regions.in general theseappear left dominant althoughbilateralactivationsemergedintheposterior superior temporal gyrus and superior temporal sulcus ba .
interestingly we also observed bilateral activity in the ventral temporalcortex includingthefusiformgyrus ba20 .whilethefusiformgyrusisperhapsbestknownforitsroleinfaceperception it along with other areas of the ventral temporal cortex is also heavilyinvolvedinstimuluscategorization particularlyforstimuli with which one has developed expertise.
this poses the possibility thatcode despitebeingacollectionofnumbers letters andwords is nevertheless treated as a categorically distinct visual stimulus compared to english prose.
at a low level writing code requires significantly .
t .2and2.
t .
moreactivityinpartsofthebrainassociatedwithcarefultop downcontrol planning andcategorization than does writing prose.
.
rq4 high levelcodingvs.prosewriting finally but perhaps most excitingly we analyze long response code and prose writing tasks.
long response tasks i.e.
writing an entire method are the most indicative of critical aspects of realworldsoftwareengineering.ifweconsiderlongresponsecodingto includeboththeiterativeproductionofsinglecodeelementsaswellastop downattentionalcoveroftheoverarchingprocess thenany difference betweenthis analysis andrq3 reveals theneurological correlates of that high level creativity in coding.
figure7showsthelrcode lrprosetrialscontrast.thisanalysisremainsstronglysignificant .
t .1and3.
t .
conservatively thresholded for multiple comparisons and more precisely pinpoints particular regions.
note how the regions associated with high t values hotter colors more active for code than prose are largely localized to the right side of the brain.
dually note how the left hemisphere largely features regions with verylow t values cooler colors more active for prose than code .
in cognitive neuroscience such a left vs. right distinction is calledlateralization.thesecontrast basedresultsprovidepowerfulevidence that the production of code vs. prose relies on highly distinct cognitive substrates.
prose production was strongly associated with left temporal regions classically associated with natural language which is almost entirely left lateralized in right handed individuals .
namely wesaw increased recruitment of the middle temporal gyrus mtg and superior temporal gyrus stg ba .
the left mtg has previouslybeenshowntoactivatewhenaccessingsemanticaspects oflanguageandisthoughttosupportalexiconofwords .
the stg extends into wernicke s area which is notably the primarycenteroflanguagecomprehension .althoughitgenerally appears most active during comprehension of spokenlanguage the act of writing often involves a sort of internal narration thatmay similarly recruit these regions.
this is further supported by increasedactivationofthecalcarine visual cortex particularlythe lingualgyrusalongtherightmedialwall ba17 .thelingual gyrus while not playing a role in higher order language processes perse is often associated with the recognition of letters and words perhapscontributingtotheirsemanticunderstanding .wealso observed a small cluster of activity in the inferior frontal gyrus ba44 partofbroca sarea whichunderliestheproductionof language although again ismorecommonlylinkedtospeech .
code production by contrast was largely right lateralized.
the exception to this observation was a bilateral activation of the superior parietal lobule extending dorsolaterally into the precuneus along the midline ba .
the superior parietal lobule see section .
is involved in top down control processes related to attention and memory the precuneus is associated with processes such asmentalimagery .similarly weobservedrighttemporaland temporoparietal activations along a number of regions supporting visual association tying visual information together and other forms of mental imagery including spatial cognition ba .
the angular gyrus in particular may support various aspects of spatial and mathematical reasoning including the manipulation of mental representations and other aspects of problem solving .
importantly it is thought to act as a bridge between perception recognition andaction suggestingthatcodesynthesismayrequire amorecomplexinterplayofunderstandingaproblemandformulatingacomprehensiveplantosolveit .thisswathofactivity extendedventrallyintoregionsoftheinferioroccipital temporal cortex whichpartiallyoverlapwithclustersidentifiedbyhuang etal.asbeingmoreactiveduringdifficultdatastructuremanipulations relative to difficult mental rotation tasks .
together thesefindingssuggestthatcodeproductionisperhapsmore spatial innature requiringthe formulationofa mentalmapthat guides problem solving.
very informally finding activity in the expected standard language areas for prose writing gives us high confidence that wedesigned and carried out our controlled experiment correctly in general.
however that high confidence makes the observation thatlong formcodewritingdoesnotheavilyrecruittheseareas instead usingpartsofthebrainassociatedwithplanningandspatialability allthemorestartling.partofthemotivationforsiegmund et al.
spioneeringfirstuseoffmriinsoftwareengineering was toprovide directevidence one wayoranother regardingclaims such as dijkstra s that exceptionally good mastery of one s native 685tongue is the most vital asset of a competent programmer .
whilethatmaybetrueforcodereading e.g.
comprehension and reviewing our results suggest that it is nottrue for code writing at a neural level.
high levellongresponsecodingissignificantlydifferent .
t .
and .
t .
from prose writing.
prose writing involves areas of the brain canonically associated with language.
coding involves a different set of right lateralized regions associated with attention memory planning and spatial ability.
this provides the first evidence of significant neural differences betweenprosewriting whichisneurallysimilartonaturallanguage and code writing which we find is not .
.
summary of results at a high level an analysis of all code writing tasks against all prosewritingtasksshowedthatthetwooperateviadistinctneuralmechanisms.weanalyzedthesedifferencesatamoregranularlevelbyconsideringimagingdatafromtasksofthesametype i.e.
fitb lr .thefitbcode fitbprosecontrastestablishedthelow levelcognitivefeaturesdistincttocodewriting brainregionsassociated withtop downcontrol planning andcategorization.subsequent analysesoflrtasks revealedaclear lateralizeddistinctionbetween codewritingandprosewriting.largely wefoundthatcodewriting involves right hemisphere brain regions involved in spatial ability and planning while prose writing involves the canonical left hemisphere regions associated with language production.
in additionto supporting previous medical imaging studies of prose writing andsoftwareengineeringtasks thesefindingsintroduceanewand alternativerelationshipbetweencodeandproseinwhichreading and writing are notsimilar cf.
.
threats to validity ourchoiceofwritingtaskspresentsafirstpotentialthreattothe validity of our experiment.
while various forms of code writing existinsoftwareengineeringcontexts e.g.
testing debugging we restricted our task set to prompted code writing tasks.
we mitigate thethreat thatthis limitedbenchmark posesviaour robustexperimentaldesign wherebyparticipantscompletedifferenttypesof writing tasks i.e.
fitb lr .
we further address this concern by including a variety of fundamental programming concepts e.g.
bothcontrol anddata flowoperations inourselectedcodingtasks indicative of many real world coding tasks.
nevertheless our results may not generalize to all in the wild programming we leave a more thorough investigation to future research.
secondly the design of our tasks may have impacted our ability to measure brain activity strictly associated with code and prose writing.forexample ourstimuliincludedwritteninstructionsthat participantsreadbeforetypingtheirresponses.thisconstruction introduces the possibility that we measure brain activity beyond strictly writingresponses.
we designed ourcontrast based experiment to mitigate this threat.
as fmri analyses are subtractive described above in section the effects of reading the prompt cancel out leaving only the differences between prose writing and codewriting.ho wever wenote thatdifferencesexist intheprompt textcontainedinfitbstimuli i.e.
prosefitbandcodefitbtasksrequire the participant to read prose and code respectively see figures2aand2c .overall wemaintainthatfitbtasksmeasure the process of low level selection of individual code elements a distinct activity to pure comprehension.
lastly our results may be limited by our participant cohort.
for thisexperiment werecruitedundergraduateandgraduatestudents withanaverageof5.2semestersofprogrammingexperience.thus our results may not extend to programmers with different backgroundsorexpertise.indeed previousfmristudieshaveinvestigatedtheroleofexpertiseanddemographicsindetail e.g.
.
weclaimnosignificantfindingsregardingindividualdifferences and report results for our participants as a whole.
related work in this section we place our contributions in context comparing our technique and results to other approaches.
.
medical imaging and software engineering asof2019 theapplicationofmedicalimagingtounderstandthe cognitive processes associated with computer science is still inits infancy.
in a study siegmund et al.were the first to use fmri in the context of software engineering identifying five brain regions associated with code comprehension .
peitek et al.
conducted follow up studies of program comprehension using fmritostudyprogrammers cognitiveload andtheneuralefficiencyoftop downandbottom upmethods .researchershave also adopted alternative medical imaging modalities to study code comprehension including functional near infrared spectroscopy fnirs electroencephalography eeg andelectromyography emg weselectedfmriinpartbecauserecent researchsuggestsitisnecessarytofindneuralcorrelatesofsome subtle programming activities .
ofthepreviousmedicalimagingstudiesofsoftwareengineering weconsiderfloyd etal.
sinvestigationofcodecomprehension code review and prose review to be the closest to our work.
their study contrasted the cognitive processes of code and prose review tasks finding the neural representations of natural and programming languagestobedistinct butthatthosedifferencesaremodulatedby expertise .
however no previous study including floyd et al.
s work hasused fmrito studycode writing.
floyd et al.
s previous useofnaturallanguageasa baseline combinedwithhuang etal.
s findings on the importance of fmri s spatial resolution to study software engineering tasks serves as supporting evidence for our experimental design.
.
code writing and cognition developing methods to make code writing more productive accurate andaccessiblehaslongbeenasoftwareengineeringgoal.
such methods are often motivated by an understanding of programming psychology such as block style languages designed for younger ages e.g.
scratch and ides intended to increase productivity .
researchersfromasearlyasthe1950shavesoughttounderstand the psychology of writing code.
early efforts focused on cognitive load psycholinguistic theory and expertise amongothertopics.in1977 brooksproposedanentiretheoryof 686programming behavior oriented toward explaining transcriptions of participants asked to talk aloud while performing programming tasks .morerecentwork includesstudiesonhowexpertsand novices classify algorithms and programmers use of the web whenwriting code .
incontrast toour work allprevious studiesusedobservationaltechniques i.e.
theywereunabletotake advantage of medical imaging .
.
prose writing and cognition like code writing early research dedicated to the cognitive processes of prose writing was conducted without medical imaging.similar to brooks theoretical framework of the coding process hayes and flowers proposed a theory of the cognitive processes of writing in .
research in the field continued throughout the s and s focusing on more nuanced aspects of prose writingcognition includingsecond languageproficiency and studies on gaining writing expertise e.g.
.
unlikecodewriting researchershavesinceleveragedmedical imaging to establish objective models of the prose writing process and have used such an understanding to improve prose writing as a whole.
menon and desmond were among the first to use fmri to understand prose writing.
their study in which participants wrote bydictationinanfmrimachine foundactivationinonlytheleft hemisphere particularly the left superior parietal lobe .
our studysimilarlyfoundactivationinlefttemporalregionforprose butalsofoundtherighttemporalregiontobeassociatedwithcode writing.shah etal.laterusedfmritostudytheneuralcorrelates ofcreativewritingwithanexperimentthatseparatedthe brainstorming phaseofprosewritingfrom theactofwritinganewand creative continuation of a given literary text .
we consider this more analogous to the planning and implementation stages of the software engineering lifecycle and note that our experiments cover the act of code writing but not explicit planning.
therehasalsobeenparticularinterestinstudyingthespecialization of writing specific brain regions.
sugihara et al.studied the brain swritingcenterduringbothleft andright handedwriting tasks identifyingregionscrucialtothecoreprocessofwriting.planton etal.lateridentifiedbrainregionsthatareconsistently involvedinprosewritingtasks aswellasdifferencesinbrainactivationacrosswriting drawing andoralspelling .similarly purcellet al.studied the neural basis of spelling and its relation that of reading their study used a qwerty keyboard to study prosewritingwithfmri .
however theirexperimentaldesign was restricted to typing single words by dictation and without the participants having any live feedback while typing.
historically the development of a fundamental neurological understandingofotheractivities suchasprosewriting hasproved usefulasaguideinpedagogyandresearch.berningerandwinn creditadvancedbrain imagingtechnologiesastheprimarydevelopment near the end of the 20th century that reformed prose writing research and education .
examples of brain imaging contributing to pedagogy include the use of verbal and non verbal cues and strategiestoimprovelearning aswellasteachingsuchcues andstrategiestoovercomeinefficienciesintemporally constrained verbal working memory .
in comparison researchers lack a corresponding fundamental understanding of code writing thatmight illuminate new ways to improve code writing skills.
our workispartiallymotivatedbythebeliefthatsuchafoundational understanding could guide more focused training and teaching strategies for code writing.
.
code writing and prose writing despiteapparentdifferences e.g.
syntax betweenprosewriting andcodewriting previousresearchhasfoundconnectionsbetween the two activities.
such research largely focuses on the use of code writing or prose writing as a tool in the instruction of the other.
kelleher and pausch conducted a seminal study to investigate this pedagogical approach in using the storytelling alice programmingenvironmenttoinspiremiddleschoolgirls interestin programming .
later burke extended this work to a formal classroom setting with the language scratch highlighting the similaritiesinproduct process andperceptionbetweenthecodeand prose writing .
in the other direction in a study burke and kafai used computer program writing to help children develop their story telling and creative writing abilities .
the study highlighted theshared characteristicsof sequence structure andclarity ofexpression between thetwo activities and emphasized the utilityof programming as a means of reflecting on the storytelling process.
these studies form a call to arms for a more thorough investigation into the relationship between code and prose production but nopreviouspaperhasexaminedthatfundamentalwritingrelationship using medical imaging.
the stark differences that we present betweentheneurologicalrepresentationsofcodeandprosewriting inlightofthesimilaritiesreportedbythesepreviousstudies highlight the need for such quantitative research.
conclusion over the decades researchers from dijkstra and pausch to pea and kurland amongmanyothers havemadeobservationalinvestigationsinto theoriesof andcallstoarmsregardingthepsychological aspects of programming.
understanding cognition hashelped improve prose reading prose writing and code reading but code writing has lacked neurologically grounded indicative research.
indeed sincethefirstfmristudyofsoftwareengineeringfiveyearsago therehavebeenfewerthanadozenfmriexperimentsreported at major se conferences .
we present the first fmri study of code writing.
we employ a controlled contrast basedexperimentinwhichcodewriting prose writing fill in the blankandlongresponsetasksarepresentedto participants whomakeuseofaspecialfmri safekeyboardtotype their responses in a realistic live editing setting.
we report three primary results.
first there is a significant and widely distributed difference in neural activity between code writing and prose writing in general the brain does nottreat code writing and prose writing as similar tasks.
second at a low level i.e.
producing a single word or code element writing code requires significantly more activity in brain areas associated with careful top down control planning and categorization despite superficialsimilarity codeappearstobeacategoricallydistinctvisual stimulus compared to prose.
third and most excitingly high level longresponsecoding thestudiedtaskperhapsmostindicative 687ofreal worldprogramming issignificantlydifferentfromprose writing.whileprosewritinginvolvesleft brainregionscanonically associated with language we find a sharp lateralized distinction code writing does notsignificantly recruit those regions compared to prose writing instead showing activation in right brain areas associated with attention memory planning and spatial ability.
whilepreviousstudieshavefoundthatcodeandprose readingmay be similar at an observational or neurological level we present thefirstevidencesuggestingthatcodeandprose writingare quite dissimilar at the neurological level .thisunexpectedresult thattheproductionofcodeandproserelyonhighlydistinctcognitive substrates though quite preliminary paves the way for future investigations analogous to those based on medical imag ing for prose writing.
in addition to developing a foundational understandingofcode writing thisempiricaldistinctionmaybe leveragedtodeveloptoolsandpedagogies e.g.
transfertraining subsequently affecting large scale workforce retraining and edu cational reform.
moreover neurological evidence that code and prosewritingarenotasintertwinedasconventionallythoughtmay encourage more diverse participation in computer science.