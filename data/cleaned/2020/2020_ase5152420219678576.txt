apization generating reusable apis from stackoverflow code snippets v alerio terragni university of auckland auckland new zealand v.terragni auckland.ac.nzpasquale salza university of zurich zurich switzerland salza ifi.uzh.ch abstract developer forums like stackoverflow have become essential resources to modern software development practices.
however many code snippets lack a well defined method declaration and thus they are often incomplete for immediate reuse.
developers must adapt the retrieved code snippets by parameterizing the variables involved and identifying the return value.
this activity which we call apization of a code snippet can be tedious and time consuming.
in this paper we present api zator to perform apizations of j ava code snippets automatically.
api zator is grounded by four common patterns that we extracted by studying real apizations in github.
api zator presents a static analysis algorithm that automatically extracts the method parameters and return statements.
we evaluated api zator with a groundtruth of apizations collected from 20developers.
for .
and .
apizations api zator and the developers extracted identical parameters and return statements respectively.
for .
apizations either the parameters or the return statements were identical.
index t erms apis software reuse code snippets stackoverflow github program analysis program synthesis i. i ntroduction developers q a websites such as stackoverflow so have gained a lot of popularity.
these websites contain millions of crowd curated code snippets that represent solutions to various programming tasks.
these code snippets are extremely useful to both developers and researchers.
developers often search for them to draw inspiration or simply reuse them .
researchers often rely on so to accomplish various software engineering goals .
when reusing so code snippets developers and researchers face a major obstacle most so code snippets do not compile .
it mainly occurs because they are written for illustrative purposes to convey solutions at a high level without implementation details .
terragni et al.
have shown that of491 analyzed so code snippets are uncompilable .
a common missing implementation detail is the type declaration .
for instance the j ava so code snippet in fig.
left side misses the declaration oftype calendar and date .
researchers have tackled this issue by proposing techniques to identify the import declarations required to compile so code snippets .
another common missing detail in so code snippets is a well formed method declaration that defines the parameters input and return statements output .
terragni et al.
have shown that of j ava so code snippets constitutedangling statements which are not embedded in any classor method declarations .
the so code snippet in fig.
left side is an example of dangling statements.
one could automatically wrap the code snippet inside a generic method declaration e.g.
the main function .
it would resolve compilation errors but would not recover the proper method declaration that exposes the intended input and output of the code snippet.
the absence of a proper interface prevents the direct reuse of so code snippets.
thus some manual effort is required to identify the inputs and outputs of the code snippets.
we use the term apization to indicate the activity of creating an application program interface api for those so code snippets without a well formed method declaration.
fig.
center shows a manual apization of a so code snippet.
in this paper we study the automatic apization of j ava so code snippets which would bring important benefits.developers would reduce the effort of integrating so code snippets into their codebases which is known to be a tedious and time consuming activity .
given an automatically generated api of a so code snippet developers can either copy and paste the api in the codebase or incorporate the method body of the api inside an existing method.
the presence of an api facilitates the latter option.
indeed an api explicitly shows the input and output of the code snippet which helps to both understand and incorporate the so code.
moreover the automatic apization so code snippets can lead to a large catalog of code samples with well defined interfaces providing value for both developers and researchers.
towards these goals we conducted an investigatory study to understand how developers perform apizations from so code snippets to j ava methods found in github gh .
the insights gained from this study led to four common apization patterns to extract method parameters and return statements.
grounded by these patterns we propose a technique called api za tor for the automated apization of so code snippets.
to the best of our knowledge api za tor is the first technique of its kind.
api za tor statically analyzes a given code snippet to find matches for the four patterns.
if it finds matches api za tor extracts the parameters and return statements and outputs a compilable api.
for completeness api za tor uses a part ofspeech pos tagger to generate a method name from the so question title and creates a j ava doc containing the title and link of the corresponding so page.
36th ieee acm international conference on automated software engineering ase 36th ieee acm international conference on automated software engineering ase .
ieee .
ase51524.
.
.
ieee human fig.
.
apization of a so code snippet.
api za tor and the human produced identical apis except for the method name and j ava doc .
we evaluated api za tor with a ground truth of apizations performed by human participants obtaining pairs of human and tool produced apis.
we compared each pair to assess the effectiveness of api za tor .f o r .
and .
api pairs the parameter list and return statements are identical respectively.
for .
apis generated by api za tor either the return statements or the method parameters are identical to those produced by the developers.
for instance fig.
right side shows the api produced by api za tor which is identical to the one created by the developer excluding the method name and j ava doc .
to demonstrate one of the possible usage scenarios of api za tor we release a search engine at the address https apization.netlify.app search and as part of our replication package .
the users can search for so code snippets with a natural language query as they would do with a standard search engine.
the search results show the so page as well as its api automatically generated by api za tor .
to summarize the main contributions of this paper are studying the problem of automatically transforming so code snippets into apis analyzing real apizations across so and gh projects extracting four common apization patterns proposing a technique called api za tor to transform so code snippets into well formed j ava method declarations evaluating api za tor against a ground truth of apizations performed by java developers releasing at the address all the experimental data releasing apis automatically extracted from so code snippets which could power so centric research.
ii.
p reliminaries and problem definition in this paper we target j ava code snippets found in stackoverflow so the most popular q a website fordevelopers .
the process of apization takes in input a so code snippet and generates a j ava method declaration.
we now describe in detail the input and output of such a process.
input a j ava code snippet from so.
a so page is composed of a question post and a series of answer posts.
each questionpost contains a title a series of tags and a description.
a postcan contain one or more code snippets.
a code snippet cs is an ordered sequence of source code lines.output a compilable and well formed j ava method declaration that defines the code snippet in input.
amethod declaration which we call application program interface api consists of the following six attributes i modifiers which set the access level e.g.
public or achieve specific functionalities e.g.
static ii return type which indicates the type of value that the method returns void if none iii method name which describes the behavior of the method iv parameter list which specifies the types and identifiers of the method arguments v throws clause which declares any checked exception classes that the method body can throw vi method body which contains the statements that implement the method.
the method body of a well formed api