reducing bug triaging confusion by learning from mistakes with a bug tossing knowledge graph yanqi su australian national university australia yanqi.su anu.edu.auzhenchang xing australian national university australia zhenchang.xing anu.edu.auxin peng fudan university china pengxin fudan.edu.cnxin xia monash university australia xin.xia monash.edu chong wang fudan university china wangchong20 fudan.edu.cnxiwei xu data61 csiro australia xiwei.xu data61.csiro.auliming zhu data61 csiro australia liming.zhu data61.csiro.au abstract assigning bugs to the right components is the prerequisite to get the bugs analyzed and fixed.
classification based techniques have been used in practice for assisting bug component assignments for example the bugbug tool developed by mozilla.
however our study on bugs in mozilla products revealsthat erroneous bug component assignments occur frequently and widely.
most errors are repeated errors and some errors are even misled by the bugbug tool.
our study reveals that complex component designs and misleading component names and bug report keywords confuse bug component assignment not only forbug reporters but also developers and even bug triaging tools.
in this work we propose a learning to rank framework that learns to assign components to bugs from correct erroneousand irrelevant bug component assignments in the history.
to inform the learning we construct a bug tossing knowledge graph which incorporates not only goal oriented component tossingrelationships but also rich information about component tossing community component descriptions and historical closed and tossed bugs from which three categories and seven types offeatures for bug component and bug component relation can be derived.
we evaluate our approach on a dataset of closed bugs including tossed bugs of components in six mozilla products.
our results show that our approach significantly improves bug component assignments for both tossedand non tossed bugs over the bugbug tool and the bugbug tool enhanced with component tossing relationships with topk accuracies and ndcg k k .
index t erms bug triaging learning to rank knowledge graph i. i ntroduction large software projects e.g.
mozilla receive a huge number of bug reports every day.
to get the attention of suitable developers on the bugs quickly it is essential to assign bugs tothe right product and component referred to as bug triagingin this work whose developers have the expertise to review analyze and fix the bugs.
manual bug triaging is a labor intensive task and is often error prone .
if the bug isnot assigned to the right component it has to be re assigned or tossed to the correct one.
for example the mozilla s corresponding author.
also with university of new south wales.bug was initially assigned to toolkit password manager product component and then was tossed to fire fox about logins and fixed there.
in this work we refer to bugs that have been tossed as tossed bugs and bugs that areinitially assigned to correct components as non tossed bugs.we refer to the component where a bug gets fixed as resolver and the component s that a bug is erroneously assigned to asbystander s .
for example bug is a tossed bug andits resolver is firefox about logins.
this bug has a bystandertoolkit password manager.
since the seminal work by anvik et al machine learning techniques have been used to assist bug triaging .
these techniques treat bug triaging as a multi class classificationtask taking as input the information of a bug e.g.
bug summary and predicting the most likely resolving componentas the class label.
bugbug is such a tool developed bythe mozilla product team.
we investigate bugs of186 components of the six mozilla products.
we find that .
bugs have been tossed at least once.
overall tossed bugs take .
times longer to get fixed than non tossed bugs.
compared with the statistics of bug tossingphenomena reported in early studies the bugtossing situation actually does not change much even after along time deployment of machine learning based bug triagingtechniques.
as detailed in section ii bug tossing is mostly caused by repeated erroneous bug component assignments.
these repeatederrors no matter manually or by machine learning stem fromthe lack of effective mechanisms to model and differentiateconfusing concepts related to bugs and software components in particular complex component designs and relationshipsand misleading component names and bug report keywords.in practice developers often resort to additional informa tion such as detailed component descriptions and componentcommunities rather than relying on only the information inbug reports to correct erroneous bug component assignments.unfortunately current bug triaging techniques donot make use of such additional information.
furthermore ui .
oufsobujpobm pogfsfodf po vupnbufe 4pguxbsf ohjoffsjoh 36th ieee acm international conference on automated software engineering ase .
ieee .
ase51524.
.
the formulation of bug triaging as a multi class classification problem learns from each bug component assignment indepen dently.
however this is not sufficient to distinguish misleadinginformation from key problem information in bug reports andhow different information relates to different components.
in fact bug tossing history archives rick knowledge about bug component relations including both correct and erroneousassignments.
we propose a novel framework called lr bkg short for l earn to r ank with b ug tossing k nowledge graph to reduce bug triaging confusion by learning from bug tossing history.
inspired by the goal oriented developer tossing graph our approach builds a goal oriented component tossing graph from bug tossing history.
driven byour empirical observation we enrich this basic tossing graphinto a bug tossing knowledge graph by attaching three types of information on each component component description closed bugs and tossed out bugs and by detecting componentcommunities based on historical tossing paths.
we develop three categories of features bug feature component features and bug component relation features.
the feature designmakes full use of the concept and community enriched bugtossing graph.
instead of traditional multi class classification we adopt a learning to rank framework which learns to differentiate confusing bug component relationships by contrasting correct and erroneous bug assignments.
to evaluate our approach we collect closed bugs including tossed bugs of components in sixmozilla products.
to simulate real world context we sort thesebugs by their creation time and split them at 25th february .
this gives us of bugs as historical training dataand the rest as future bugs to test the trained model.we compare our approach with two baselines bugbug andbugbug with tossing graph.
overall lr bkg achieves or higher accuracy in recommending resolver components thanthe two baselines at all top ks k .
it achievessame level improvement for both tossed and non tossed bugs and achieves improvement for of components atdifferent top ks.
furthermore lr bkg can better rank by stander components that have historical tossing relationshipswith resolver components or higher ndcg k k than bugbug .
our feature importance analysis showsthat all three categories of features as a whole contribute tothe significant improvement lr bkg achieves.
this paper makes the following contributions we conduct an empirical study on the root cause ofrepeated bug tossing which sheds the light on novel ways to reduce bug triaging confusion.
we propose a learning to rank framework that learnsto distinguish correct erroneous and irrelevant bug component assignments based on a rich set of features derived from our novel bug tossing knowledge graph.
our experiments confirm our approach s superior performance than the tool used in development practice andconfirm the effectiveness of our novel feature design.
ourtable i tossed in bug percentage of product component tossed in .
.
p c replication package can be found here1.
ii.
e mpirical study we conduct an empirical study of bug tossing phenomena to answer the following three research questions rq1 does bug tossing occur frequently and widely?
rq2 is bug tossing accidental mistake or repeated error?rq3 what causes such repeated bug tossing?
a. dataset we use software products of mozilla foundation as study subjects.
we crawl bugs from the mozilla s bugzilla website which involve sixproducts firefox firefox build system toolkit core dev tools webextensions and their components.
although mozilla s bugzilla website has thousands of components many components have very few bugs.
we restrict our study to the components with at least of the number of bugs of the component with the largest number of bugs.
these componentscover very frontend and backend features of mozilla products.thanks bugzilla we can extract the complete bug assignmenthistory of each bug.
the history contains initially assignedcomponent and all subsequent components a bug has been tossed to in chronological order.
b. rq1 bug tossing frequency and impact among bugs .
i.e.
bugs has been tossed.
table i shows the tossed in bug percentage of a component i.e.
the bugs that are currently assigned to a componentbut were not initially assigned to this component .
none of components has zero tossed in bug percentage.
that is all components have some bugs that have been tossedin from other components.
toolkit blocklist policy requestsis the only component whose tossed in bug percentage isbelow in particular bugs .
.
tossed in bugpercentage is for components and for components.
for components tossed in bug percentage iseven higher than .
for example out of bugs of firefoxbuild system android studio and gradle integration are tossed in bugs which give tossed in bug percentage .
.
forthe tossed bugs the time it takes to close them is on averageabout .
times longer than the non tossed bugs.
bug tossing not only occurs frequently but also widely onmozilla product components.
in fact bug tossing statisticsdo not change much in the past years .
c. rq2 accidental mistake or repeated error for each tossed bug we obtain a path from its initial component to its current component.
we identify dis1 table ii examples of real tossing paths product component tossing path frequency toolkit a. firefox security toolkit password manager password manager b. toolkit password manager site compatibility toolkit password manager c. firefox about logins toolkit password manager toolkit a. firefox untriaged password manager toolkit password manager site compatibility toolkit password manager site compatibility b. toolkit password manager toolkit password manager site compatibility firefox a. toolkit password manager firefox about logins about logins b. firefox untriaged toolkit password manager firefox about logins firefox security a. core security psm firefox security b. core networking dns firefox security c. firefox theme firefox security core security psm a. firefox untriaged core security psm b. firefox security core security psm c. core networking core security psm toolkit themes a. firefox theme toolkit themes b. firefox preferences toolkit themes c. toolkit xul widgets toolkit themes d. toolkit password manager toolkit themes e. firefox bookmarks history firefox theme toolkit themes firefox theme a. firefox general firefox theme b. firefox bookmarks history firefox theme c. toolkit themes firefox theme tinct tossing paths and count their occurrence frequencies among all tossed bugs.
table ii shows some tossingpaths.
for example one tossing path is firefox security toolkit password manager with the frequency .
that is 6bugs have been initially assigned to firefox security and thentossed to toolkit password manager and is currently withtoolkit password manager.
this path is just one of the 60paths along which a bug has been tossed to toolkit passwordmanager.
we identify tossing paths for bugs.
only tossing paths occur once accounting for .
of all tossingpaths and .
of all tossed bugs.
the rest tossing paths have two or more bugs.
fig.
a shows the distribution of tossing path frequencies.
we remove large outliers to show this distribution more clearly.
the median frequency is8 with at quantile and at quantile.
tossingpaths occurred even more than times.
the first tossingpath for firefox about logins in table ii is one of these mostfrequent paths which occurs times.
fig.
b show thedistribution of the number of tossing paths per component i.e.
the number of paths ending with a particular component.the median is with at quantile and at quantile.
there are components e.g.
core security psm with or more different tossing paths.
accidental mistake may account for only a small percent age of bug tossing while the majority of bug tossing arecaused by repeated erroneous bug component assignments and those repeated errors can occur in many different ways.
d. rq3 cause of repeated bug tossing through observing repeated bug tossing paths we find that confusing concepts are an important cause of erroneous bug component assignments.
confusing concepts come from two a distribution of tossing path frequencies b distribution of the number of tossing paths per component fig.
distribution of tossing paths sources complex component designs and relationships andmisleading component names and bug report keywords.
complex component designs and relationships a complex feature often involves a set of correlated components.for example according to the mozilla wiki and a meet ing note password management involves four components toolkit password manager for remembering usernames andpasswords on sites and filling them when the user returnsto the sites firefox about logins for issues with the fire fox lockwise logins and passwords page toolkit password manager site compatibility for issues of autofill autocomplete or saving of logins passwords usernames not working on aspecific site and firefox migration for profile migration fromother browsers.
in total bugs that were initially assignedto one of these four components were tossed to the otherof these four components.
fig.
shows a partial tossinggraph constructed from bug tossing paths.
toolkit passwordmanager firefox about logins and toolkit password man ager site compatibility actually form a bug tossing community blue nodes and edges .
this bug tossing community largelymatches the component design for password management.
in face of complex correlated components bug reporters especially those without expertise background often have difficulties in assigning bugs to the correct components.
forthis problem mozilla sets general placeholder componentsfor reporters to report bugs such as firefox general fire fox untriaged.
then developers have to toss them into rightcomponents.
table ii shows some examples of tossing pathsstarting from firefox untriaged or firefox general.
first this general then toss practice incurs significant burden ondevelopers due to the sheer amount of bugs initially reportedto general placeholder components.
second even developersmay not make right tossing decisions in many cases.
bugs that have been tossed from general components were tossed again e.g.
firefox untriaged toolkit password manager toolkit password manager site compatibility firefox untriaged toolkit password manager firefox about logins .
sometimes developers may just randomly assign a bug to one of correlated components and hope thatother developers who have the expertise will toss the bug tothe right component bug is such an example .
misleading names and keywords many components have confusing names which make them seem relevant to some bugs.
such confusing names often confuse bug reportersand developers.
for example three bug reporters assignedbugs to toolkit form autofill but these bugs were tossed to toolkit password manager even though toolkit form autofill and toolkit password manager have no relation ac cording to component design.
an experienced developer com mented one of these bugs bug the form autofillcomponent is for address and credit card autofill not logins see the description .
moreover a developer assigned twobugs from firefox untriaged to toolkit form autofill.
then another developer tossed these two bugs to toolkit passwordmanager and commented bug please don t movelogin password bugs to form autofill as it is only aboutaddress and credit card autofill.
please use toolkit passwordmanager.
the developer who made the mistakes replied nowi know but the name of this component is obviously notintuitive.
not only was this developer confused but bugbugcould also make similar mistakes.
for example a comment ofbug states bugbug thinks this bug belongs to formautofill please revert in case of error and it was indeed anerror and tossed to toolkit password manager.
in fact the information provided in the comments about bug tossing is available in the detailed description of toolkit formautofill.
unfortunately many bug reporters even developers in mozilla have no knowledge of these detailed componentdescriptions.
similarly toolkit themes bugs were initiallyassigned to firefox theme.
no matter for bug reporters or de velopers the two names are confusing.
however the detailedcomponent descriptions tell the differences.
firefox themeis responsible for general user interface user experience andvisual design for the default theme used in firefox.
bugs aboutpackaged browser themes and about webextensions that usethe themes api should be triaged into toolkit themes.
bug reports very likely contain misleading information which may confuse bug reporters developers and auto matic bug triaging tool bugbug developed by mozilla.
forexample bug states ask the user for their osaccount password biometrics before showing the passwordsin the password manager.
it contains keywords password and password manager and was initially assigned to toolkit password manager.
but this bug is essentially aboutan issue in logins and passwords page and thus was tossedto firefox about logins.
for bug the situation is theopposite.
its summary states separate preference setting forautofill logins passwords from ask to save logins passwords .it mentions logins and password a couple of times.
thisbug was initially assigned to firefox about logins but wastossed to toolkit password manager as it is about passwordautofill that toolkit password manager is responsible for.
as bug report summary and description is the most important input to machine learning based bug triaging techniques misleading information in bug reports could also misleadmachine learning techniques.
for example misled by the bug bug s recommendation bug password displayedtoo short with standard font in firefox access data wastossed to core graphics text.
unfortunately this was a completely non sense assignment.
the bug was tossedto firefox webpayments ui and then firefox about loginsand closed there.
this mistake by bugbug is because the bug1644112 s summary contains keywords like font display data that are often in the bug reports correctly assignedto core graphics text.
however the key problem of thisbug is about password display that firefox about logins isresponsible for.
the initial non sense assignment challengesthe core graphics text developers as they lack experience inhandling bugs like bug .
as a result they tossed thebug to firefox webpayments ui which was still incorrect and it took one day before this bug was tossed to the rightcomponent firefox about logins.
complex component designs and misleading componentnames and bug report keywords cause a lot of confusionin bug triaging and tossing.
developers often resort toadditional information such as detailed component descrip tions and component communities to correct erroneous bugassignments.
furthermore existing bug triaging techniqueslearn from each bug component assignment independently which often cannot effectively distinguish misleading infor mation and key problem information in bug reports.
iii.
a pproach inspired by our empirical study findings we propose a novel bug triaging approach with two aims improve bugtriaging accuracy and avoid tossing irrelevant bug triaging.as shown in figure our approach builds on a novel bug triaging knowledge graph which enriches basic goal oriented component tossing graph with rich information about compo nent component community and correctly and erroneouslyassigned bugs.
instead of only bug report centric features we derive a rich set of features from bug tossing knowledgegraph which represent additional knowledge i.e.
componentdescriptions and component community commonly used tocorrect erroneous bug assignments and rich relations betweenan input bug and those correctly or erroneously assignedbugs.
in contrast to learning from each bug component as signment independently our approach adopts a learning torank framework which ranks bug component relevance by contrasting correct erroneous and irrelevant bug assignmentsin the history.
a. construction of bug tossing knowledge graph to make effective use of historical bug tossing information we first construct a bug tossing knowledge graph from which a rich set of bug and component features can be derived.
goal oriented bug tossing graph bug tossing relationships among components provide useful information forlearning the relevance of a bug to its resolver component asopposed to all other bystander components that the bug hasbeen erroneously assigned to.
these relationships are capturedin real bug tossing paths see table ii for some examples .we convert real tossing paths into goal oriented tossing paths.the conversion is straightforward.
for each component exceptthe resolver component in a real tossing path we create agoal oriented tossing path from this component to the resolvercomponent.
consider the real tossing path firefox bookmarks bugzillahistorical bugsbug tossing knowledge graph component description corrected erroneous bug assignmentbug tossing communitiesgoal oriented basic bug tossing graphbug features component features bug component features learning to rankrelevance labelproduct component feature vector product component ranking listtrained model future bugtrainingtraining phrase inference phrase predicting fig.
approach overview fig.
goal oriented bug tossing knowledge graph history firefox theme toolkit themes in table ii.
from this real tossing path we create two goal oriented tossing paths firefox bookmarks history toolkit themes and firefox theme toolkit themes.
after processing all real tossing paths we identify distinct goal oriented tossing paths and count their occurrence frequencies goal oriented tossing paths can avoid the two limitations of real tossing paths.
first real tossing paths capture onlywhat have occurred in the past but they will not cover all possible tossing paths.
for example the presence of the tossing path firefox bookmarks history firefox theme toolkit themes indicates that firefox bookmarks history toolkit themes is possible to occur.
in fact after .
years that firefox bookmarks history firefox theme toolkit themes occurred for bug and bug firefox bookmarks history toolkit themes occurred for bug .
however before bug appeared firefox bookmarks history toolkit themes is not a real tossing path for .
years.
second the bystander components e.g.
firefox theme in the above path may be somehow relevant to the tossedbug but they are definitely not as relevant as the resolvercomponent e.g.
toolkit themes in the above path .
evenworse in many cases bystander components may not berelevant at all to the tossed bug.
for example in the tossingpath core graphics text firefox webpayments ui firefox about logins for bug firefox webpaymentsui is irrelevant as the core graphics text developers didnot know where is appropriate to toss bug either.
learning from such tossing mistakes would not be beneficial.
given all goal oriented tossing paths obtained we construct a goal oriented bug tossing graph.
the graph nodes are com ponents.
the edges are directed and represent goal orientedtossing paths from one component to another.
fig.
shows asubgraph of the goal oriented bug tossing graph constructedin our empirical study on mozilla product components.
thenodes of toolkit password manager and its direct neigh bors are highlighted.
from the faded background we canobserve rather complex tossing relationships among mozillaproduct components.
for each component node the graphrecords two metrics the number of bugs currently assigned including initially assigned and tossed from other compo nents to this component e.g.
for toolkit passwordmanager the number of bugs tossed from this component toother components e.g.
for toolkit password manager .
for each edge the graph records one metric the occurrence frequencies of the tossing between two components e.g.
240from toolkit password manager to firefox about logins .
bug tossing community detection frequent tossing relationships among components will form some bug tossingcommunities in the bug tossing graph.
in this work we use the community detection algorithm to detect bug tossingcommunities in the bug tossing graph.
this algorithm is basedon modularity optimization.
we use the implementation in the gephi tool.
for community detection we filter out edges withfrequency as we deem them as likely accidental.
in the tossing graph used in our empirical study the algorithm detects communities covering components.
the community size is .
.
.
in fig.
nodes and edges with the same color belong to one community detected by the algorithm.
red and green communities are two large communitieswhich involve and components respectively.
as wehighlight nodes centered around toolkit password manager many components in the red and green communities are notincluded or faded in the background e.g.
firefox theme andwebextensions themes at top left corner .
the blue community in fig.
is one of the small communities which includes toolkit password manager firefox about logins toolkit password manager site compatibility and toolkit form autofill.
this tossing community isthe result of complex component design and misleading com ponent name.
the first three components are all related to pass word management see mozilla wiki and meeting note .
thefourth password management component firefox migrationdoes not appear in this community because it did not havetossing paths from or to these components.
toolkit formautofill is not part of password management.
it is in thecommunity because five bugs were erroneously assigned totoolkit form autofill due to misleading component name butthese bugs were finally tossed to toolkit password manager.
information enrichment existing bug triaging techniques treat components just as class labels and learnfrom only correctly assigned bug reports.
however in the bugtossing comments additional information such as componentdescriptions and the contrast of correctly and erroneously assigned bugs often provides the basis and justification for bug tossing decisions.
therefore we enrich each component in thebug tossing graph with two types of information componentdescription and two sets of bugs closed bugs versus tossed table iii three categories of features feature dimension bug feature a. number of bug summary tokens component features a. bug tossing community index b. number of closed bugs c. number of tossed out bugs d. in degree unweighted weighted e. out degree unweighted weighted f. degree unweighted weighted bug component relation features a. sim bug summary component name b. sim bug summary component description c. top30 sim bug summary closed bug summary d. top30 sim bug summary tossed out bug summary e. percentage nonzero sim bug summary closed bug summary 2f.
percentage nonzero sim bug summary tossed out bug summary out bugs .
this allows us to model and differentiate confusing bug and component information more effectively.
component description unlike class label which is just a component index component names reveal the identity ofcomponents e.g.
key functionality or concept in a conciseform.
as component names are sometimes misleading wealso attach component descriptions which provide more detailsabout the components.
sometimes a component name maycontain acronyms and the full names can generally be foundin the component description.
in such cases we keep theoriginal acronym and also expand the acronym into the fullname for example gecko media plugin for gmp.
for acronymexpansion we first split the component name into tokens andidentify acronyms i.e.
tokens with all capital letters likegmp .
then we match the letters in an acronym with theword initials in the component description by the same order i.e.
g m p .
if the concatenated initials of a sequence of words match the acronym this sequence of words is regardedas the full name of the acronym.
closed and tossed out bugs in this work we assume if a bug is assigned to a component and closed there this bugassignment is correct.
otherwise if the bug is tossed to another component the bug assignment is erroneous.
as shown in fig.
components generally have both closed bugs andtossed out bugs.
some components e.g.
toolkit passwordmanager toolkit themes firefox security have high ratiosbetween tossed out bugs and closed bugs.
by contrasting aninput bug with closed bugs and tossed out bugs the model would learn not only how to make correct bug assignmentsbut also how to not make erroneous assignments.
b. feature design in addition to the bug report feature our bug tossing knowledge graph allows us to extract a rich set of features about components and bug component relationships.
text preprocessing our approach takes as input the summary of a bug report.
we assume the minimal rep resentation of bug reports so that the approach can havegood generalizability.
in addition we also need to processcomponent names component descriptions and the summariesof historical bug reports attached to the components.
weprocess these texts as follows.
first we use camel case tosplit words and convert all words to lowercase.
for example masterpassword is transformed into two lowercase words master and password .
bug report summaries are shortsentences.
but component descriptions may be a paragraphof text.
we split a paragraph into sentences by punctuations.we perform tokenization and stemming using the nltk tool.
we encode text in two types of word representations tf idf term frequency inverse document frequency andword embedding.
tf idf is a high dimensional one hot vec tor which can cover all words in a text corpus.
for idfcomputation we consider the summaries of all bugs attachedto a component as a document.
word embeddings are lowdimensional dense vectors.
it requires to define a fixed vocab ulary size.
bug reports often contain domain specific terms or acronyms which are generally out of the word embeddingvocabulary.
rather than regarding these domain specific termsand acronyms as out of vocabulary tokens which may affectthe embedding quality we use fasttext that computes word embeddings at subword level.
we multiply the learned wordembeddings with idf as a weight factor.
input bug feature exist techniques directly use the words in bug report summary as input features.
we do not do so because the text often contains misleading keywordsthat are hard to distinguish from key problem information bylooking at the text alone.
in our approach we take only asimple feature of input bug i.e.
the number of tokens in thebug report summary.
this feature is indicative of the amountof information in the bug report summary.
we make full use ofthe information in the bug report summary as bug componentrelation features detailed in section iii b4.
component features exist techniques simply treat components as class labels.
in contrast we make gooduse of rich information that the components have includingthree types of nine features as listed in table iii.
component community the index of the bug tossing community that a component belongs to.
this feature informs the model whether the two components compared during learnto rank come from the same community.
the same communityindicates that the two components have a track record of being confusing.
however assigning a bug to bystander componentsin the same community as the resolver component is still better than assigning the bug to the components in other communi ties.
take bug as an example.
if it cannot be assignedto firefox about logins it would be better to assign it to toolkit password manager rather than core graphics text as developers of components in the same community likelyknow where to toss but developers may not have expertise to make the right tossing across the communities.
the number of closed and tossed out bugs these two features help to judge the probability of a component being the resolver or bystander of a bug and the probability ofmaking mistakes.
in fig we see that toolkit password manager has closed bugs and tossed out bugs.
fire fox about logins has closed bugs and only tossedout bugs.
comparing these two components toolkit passwordmanager is the resolver of much more bugs but assigning abug to toolkit password manager has higher error probability than assigning it to firefox about logins.
unweighted and weighted in out degree these six features represent how many toss in and toss out relationships a component has with its direct neighbors.
in degree corre sponds to toss in out degree corresponds toss out and degreeregards the edge as indirected.
unweighted metric counts thenumber of edges.
weighted metric measures how strong therelationship is i.e.
the sum of the frequencies on the edges.
infig the in degree of toolkit password manager is and theweighted in degree is .
the out degree of toolkit passwordmanager is and the weighted out degree is .
the degreeand weighted degree are and respectively.
bug component relation features exist techniques infer implicit bug component relations through the classifier.
in contrast we explicitly model bug component relationsin terms of the similarities between the input bug summaryand the information component description closed bugs andtossed out bugs of components as three types of six features.these text similarity features contrast the input bug summarywith component information rather than directly using bugsummary text as features.
the similarity is computed basedon tf idf vectors and word embeddings.
tf idf reflectswhether the bug summary and the component informationhave some keywords in common while word embeddingsmeasure syntactic and semantic text similarity in a more fuzzymanner.
we compute the cosine similarity between the twovectors and use both tf idf based and word embedding based similarities to achieve complementary effects.
similarity between input bug summary and component name description these four features two for tf idf and two for word embedding allow the model to take into ac count rich semantic in component names and descriptions and semantic relations between bugs and components.
top similarities between the input bug and closed bugs this input closed feature is a dimensional vector for tf idf and for word embedding .
each dimension is a similarity between the input bug summary and the summary of one closed bug of the component.
thecomponent may have more than closed bugs.
we rankthe similarities and take top .
the input closed featureinforms the model how the input bug is similar to up to30 closed bugs of the components.
furthermore they re flect the distribution of the similarities.
consider the bug1644807 initially assigned to firefox preferences and thentossed to toolkit password manager.
the top input closedsimilarities with toolkit password manager is .
.
.
.
.
while the top input closed similarities with firefox preferences is .
.
.
.
.
.
we see that the bug is consistently similar to the closed bugs of toolkit password manager.
in con trast this bug is only very similar to two closed bugs offirefox preferences but not the rest of closed bugs.
thisdistribution comparison during learning to rank would helpthe model make the right choice.
top similarities between the input bug and tossed out bugs this input tossedout feature contains top similarities tf idf and word embedding respectively between the inputbug and the top most similar tossed out bugs of thecomponent.
the input tossedout feature as opposed to theinput closed feature allows the model to see how the inputbug looks like past mistakes.
for example the top input closed similarities for the bug and the componentfirefox about logins is .
.
.
.
.
which make us feel firefox about logins could be the resolver.however when looking at the top input tossedout similari ties .
.
.
.
.
for the bug and firefox about logins we may realize that this assignmentcould be risky as the bug is very similar to some tossed outbugs of firefox about logins.
percentage of nonzero input closed or input tossedout similarities the nonzero input closed or nonzero inputtossedout feature computes the percentage of all closed ortossed out bugs of a component that have nonzero similaritieswith the input bug.
for the component with less than 30closed or tossed out bugs many dimensions of input closed or input tossedout will be zero which makes this feature less effective or even misleading.
these two features would informthe model these zero value dimensions may be useless.
c. learning to rank framework considering complex and confusing relations between bugs and components our approach does not learn from each bugcomponent assignment independently.
instead our approachadopts a learning to rank framework that learns from more relevant assignments against less relevant assignments pairwisely.in particular we adopt lambdamart to rank componentsfor an input bug.
learning to rank is a supervised machine learning algorithm.
therefore preparing meaningful training data is important.
our learning goal is to assign an input bug to the resolvercomponent or at least to some bystander components havingtossing relationships with the resolver component.
based on this goal we construct the training data from bug triaging and tossing history as follows.
let bbe a bug and c fbe its resolver.
without losing generality let c1 c2 cf be a real tossing path.
a correct initial assignment withouttossing can be regarded as a tossing path with length .
webuild a data point for each component on the tossing path.the bug component relevance is computed as 2d cx cf where d cx cf is the distance from cxtocfalong the path.
in this example d c1 cf d c2 cf and d cf cf and thus the relevance labels for b c x x f are .
.
and .
for all other components conot on the tossing path we create a data point for each of them with relevance label i.e.
b c o .
we construct data points using real tossing paths rather than goal oriented tossing paths because real tossing paths produce more data points and more fine grained bug component relevance labels.
for example for another bug b prime with real tossing path c1 cf the relevance label for b prime c1 is .
.
by goal oriented tossing path c1 cf we will have only one data point with relevance label .
for the two bugs.
for each data point b c we associate it with the three categories of features described in section iii b. at training time lambdamart optimizes the gradient of objective functionthrough gradient boosting which can be modeled bythe sorted positions of the components for an input bug b against the ground truth relevance labels.
at inference time give an unseen bug the trained model is used to produce a relevance label for each component to be predicted based on the features between the bug and the component and thenrank the components by the predicted relevance labels.
iv .
e v aluation this section reports the evaluation of our lr bkg to answer the following research questions rq1 can lr bkg improve resolver component recommendation over traditional bug triaging methods?
rq2 can lr bkg improve tossing relevant component resolver and bystander recommendation over tradi tional bug triaging methods?
rq3 what features are the most important for the performance of our approach?
a. experimental setup dataset we crawl bugs of six mozilla products and their components.
to ensure the validity of correctbug component assignments we retain only bugs whose statusis resolved verified or closed.
according to mozilla s bugstatus guide bugs with these statuses are closed bugs.
weassume that the component of a closed bug is the bug sresolver.
for bugs with other statuses it is still uncertainwhich components would be their resolvers.
after filtering byclosed bugs we obtain closed bugs covering productsand components.
out of these closed bugsare tossed bugs.
we split the dataset into training data andtesting data.
in order to simulate real world context we cutdataset into and in chronological order.
bugs including tossed bugs with creation time before 25thfebruary are historical training data.
the rest 717bugs including tossed bugs are future testing data.
baseline we compare our approach with two baselines.
this first baseline is the bugbug tool in particular its compo nent classifier for assigning bugs to product component .the bugbug tool has been actively used in the mozilla sproduct development.
it formulates bug triaging as a multi class classification task and uses the logistic regression model built in xgboost.
xgboost is an optimized distributed gradient boosting library which implements machine learningalgorithms under gradient boosting framework .
bugbugtakes the one hot representation of bug summary descriptionand keywords flags as features.
we train bugbug using our historical bug dataset.
the second baseline is bugbug with tossing graph bugbug tg .
this baseline is inspired by jeong et al.
which uses bug tossing graph to improve the initial rec ommendation lists by any bug triaging classifiers.
lettable iv top k accuracy tool category top top top top our tossed .
.
.
.
approach non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
with tg non tossed .
.
.
.
overall .
.
.
.
table v component level top k accuracy comparison top top top top p c our bugbug any p c our bugbug p c our bugbug all c1 c2 ... c n be the initial recommendation list.
bugbugtg starts from the top and inserts the most possible tossing target cxtof each component cxbased on the historical tossing probability in the bug tossing graph.
the resulting listlooks like c c1t c2 c2t ... c n cnt .
finally bugbugtg returns the top n elements in the resulting list.
evaluation metrics for rq1 we evaluate if a method can recommend the resolver component for a bug.
as there isonly one resolver component for a bug we use top k accuracy also known as hit k accuracy to evaluate the performance of resolver component recommendation.
top k accuracy is summationtext bi biscorrect b i top k b where brepresents the set of all test bugs and the iscorrect b i top k returns if top k components contain the resolver component of the input bug bi and returns otherwise.
for rq2 we want to recommend not only the resolver component but also bystander components.
we consider twotypes of bystanders the components in the same tossing com munity as the resolver component and the components having direct edges to the resolver component in the goal orientedbug tossing graph.
in addition to top k accuracy we compute ndcg k in rq2.
ndcg kisdcg k idcg k and dcg kis summationtext k i 1ri log2 i where ri if the i th component in the recommendation list is related resolver or bystander to the input bug and ri otherwise.
idcg is the ideal result of dcg which means all related componentsare ranked higher than unrelated ones.
for rq3 we use feature importance analysis provided in xgboost to validate the effectiveness of our featuredesign.
feature importance analysis plots importance based onfitted trees.
the importance is calculated by importance types either weight gain or cover .
weight is the number of times a feature appears in a tree.
gain is the average gain ofsplits which use the feature.
cover is the average coverageof splits which use the feature and the coverage is defined asthe number of samples affected by the split.
the importance type we use in this study is weight .
b. resolver component recommendation rq1 table iv shows the results.
we can see that bugbug and bugbug tg have almost the same accuracies at all top ks.
this means that bugbug tg s simple heuristic use of component tossing relationships is not effective.
in contrast ourlr bkg achieves significant higher accuracies than bugbugand bugbug tg at all top ks.
at top lr bkg achievesoverall .
accuracy .
for tossed bugs and .
fornon tossed bugs while bugbug achieves only .
overall .
for tossed bugs and .
for non tossed bugs.
at top lr bkg achieves overall .
accuracy while bugbug isonly .
.
although our initial goal focuses on tossed bugs our lr bkg actually achieves the same level improvementfor both tossed and non tossed bugs.
consider a tossed bug bug which was initially assigned to firefox preferences and tossed to toolkit password manager.
bugbug recommends firefox preferences at the top1 position.
the summary of bug states replaceall user facing instances that refer to master password .
thekeywords such as user replace master password are highlyrelated to firefox preferences and its historical bugs.
thesekeywords taken directly as features in bugbug confuse theclassifier.
in contrast our lr bkg correctly recommends theresolver component toolkit password manager at top .
consider a non tossed bug bug whose resolver component is toolkit password manager.
however bugbug recommends firefox about logins at top whichcould mislead the developers.
our lr bkg recommendstoolkit password manager at top .
as seen in fig.
toolkit password manager and firefox about logins are veryconfusing components which have many erroneous assign ments and tossing in between.
the summary of bug 1618597is saved logins and master password are cleared when upgrade from firefox56 to firefox74.0beta via firefox73.
.
which includes many confusing keywords such as saved logins and master password.
these keywords are rather commonin the closed bugs of both toolkit password manager andfirefox about logins.
however our approach can effectivelydistinguish key problem information e.g.
cleared upgrade from these common confusing information and consequently make the right recommendation.
we compute the top k accuracy for each component by lrbkg and bugbug.
we count for how many components lr bkg achieves higher equal or lower accuracies than bugbug.we consider the accuracy difference below .
as equal.table v presents the results.
the last column means if lr bkg is lower than bugbug at any top k we count it as lr bkg bugbug.
only if lr bkg is higher than bugbug at all top ks we count it as lr bkg bugbug.
at different top ks lr bkg achieves higher accuracies than bugbug for of components andachieves the same accuracies as bugbug for ofcomponents and achieves lower accuracies for only of components.
with the strictest comparison lr bkg is better than bugbug for components all and is worse than bugbug for only components any .
consider core networking cookies that has tossed bugs.
bugbug makes correct recommendation at top1 and in top .
the erroneous recommendations includenot only confusing components e.g core security psm core networking http but also some non sense compo nents e.g.
devtools console .
lr bkg recommends correctresolver components for tossed bugs at top and for 24tossed bugs in top .
we find that lr bkg sometimes makes mistakes for resolver components in bug tossing communities.
for example firefox sync belongs to the community that includes 48components the red community in fig.
.
firefox synchas bugs among which lr bkg assigns bugs toother components in the community such as firefox tabbedbrowser firefox preferences.
this results in its low top 1accuracy .
which is lower than bugbug .
.
however lr bkg does not rank resolver components totally off thetrack.
for the top top and top accuracies lr bkgis .
.
and .
respectively while bugbug is only0.
.
and .
.
that is lr bkg still identifies theresolver component but it has some difficulties in distinguish ing the resolver components from some bystander componentsin the large community at the top position.
our lr bkg significantly improves the accuracy of resolvercomponent recommendation.
the improvement comes fromboth tossed and non tossed bugs equally and is contributedby the improvement on the majority of components.
c. tossing relevant component recommendation rq2 table via to table vid show the results.
comparing the results in table iv table via and table vic we see that all approaches can recommend some bystander components.
for example the overall top accuracy for resolver componentby lr bkg is .
table iv .
if we consider the bystandercomponents from the same bug tossing community as correctrecommendation the overall top accuracy by lr bkgbecomes .
table via .
furthermore many bystandercomponents can be ranked in top which gives .9top accuracies for all three methods.
as top k increases the accuracy gap between our approach and bugbug narrows.
however the accuracy at top1 by our approach is much higher than that of bugbugfor both bug tossing community and direct edge settings.for example bug happens to be in our future testing data.
bugbug recommends core graphics text at top for this bug.
although our approach does not recommend firefox about logins at top either it recommendstoolkit password manager from the same bug tossing com munity at top .
the developers of toolkit password managermore likely know where to toss bug than the developers of core graphics text.
comparing ndcg k of different approaches we see that our approach can better rank tossing relevant componentsat the top of the list.
consider the bug tossing communitysetting.
our approach and bugbug have very close top accuracy less than .
difference but our approachachieves ndcg .
while bugbug s ndcg isonly .
.
similar to resolver component recommendation a top k accuracy bug tossing community tool category top top top top our tossed .
.
.
.
approach non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
with tg non tossed .
.
.
.
overall .
.
.
.
b ndcg k bug tossing community tool category ndcg ndcg ndcg ndcg our tossed .
.
.
.
approach non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
with tg non tossed .
.
.
.
overall .
.
.
.
c top k accuracy direct edge tool category top top top top our tossed .
.
.
.
approach non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
with tg non tossed .
.
.
.
overall .
.
.
.
d ndcg k direct edge tool category ndcg ndcg ndcg ndcg our tossed .
.
.
.
approach non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
non tossed .
.
.
.
overall .
.
.
.
bugbug tossed .
.
.
.
with tg non tossed .
.
.
.
overall .
.
.
.
table vi results of rq2 bugbug and bugbug tg have almost the same accuracies and ndcg metrics which means simple heuristic use ofcomponent tossing relationships is not effective for improvingbystander component recommendation.
our lr bkg can significantly improve the ranking of by stander components that have historical tossing relationshipswith the resolver component.
d. feature importance rq3 we estimate the importance of features see table vii by feature importance analysis which assigns importantscores to input features based on how useful they are atpredicting a target variable.
table vii presents the top im table vii top important features feature ranking bug feature a. number of bug summary tokens component features a. number of closed bugs b. weighted in degree c. bug tossing community index d. unweighted in degree e. unweighted degree f. unweighted out degree bug component relation features a. tfidf sim bug summary component name b. tfidf sim bug summary component description c. fasttext sim bug summary component name 12d.
fasttext sim bug summary component description e. tfidf top sim bug summary closed bug summary f. tfidf percentage nonzero sim bug summary closed bug summary g. tfidf top sim bug summary tossed out bug summary h. tfidf percentage nonzero sim bug summary tossed out bug summary i. fasttext top sim bug summary closed bug summary j. fasttext top sim bug summary tossed out bug summary portant features which include one bug feature six component features and bug component relation features.
the number of bug summary tokens is the only bug feature we use.
this simple feature is ranked at the 7th importance.six out of nine component features are important.
the numberof closed bugs is ranked at the 8th position.
bug tossingcommunity index is ranked at 18th.
weighted in degree andthree unweighted degree features are important ranked atthe 9th 23rd 27th and 30th positions.
for bug componentrelation features both tf idf based and word embedding based similarities between input bug summary and componentname description are important.
tf idf similarities are moreimportant than word embedding similarities for measuring therelevance of the input bug to the closed bugs of the com ponents.
tf idf and word embedding similarities are equallyimportant for measuring the relevance of the input bug to thetossed out bugs of the components.
we see that the modelmainly focused on the top ranked similarities.
it considersmore top ranked input closed similarities up to top thaninput tossedout similarities up to top .
non zero similaritypercentage features are important to inform the model theusefulness of input closed and input tossed out feature vectors.
all categories of features play important role which demon strates the effectiveness of our feature design.
input closedand input tossedout features could be simplified.
v. r elated work machine learning techniques have been widely adopted to support bug report management including bug fieldprediction bug field reassignment bug localization duplicatebug detection bug commit linking etc.
the close work toours is bug field prediction.
anvik et al.
propose touse the classifier e.g.
support vector machine to assist bug fixer assignment.
other studies focus on predicting bug severity and bug priority .
several stud ies investigate component assignments.
somasundaramet al.
mine the topic model from the component s historicalbugs for measuring bug component relevance.
sureka usesa tf idf classifier and a dynamic language model classifierto predict the component of a bug report.
the classification based method has been adopted in practice e.g.
the mozilla sbugbug tool.
recently deep learning based classification hasalso been used for supporting incident triage for online servicesystems .
different from these classification based meth ods our approach is based on learning to rank which learnsnot only from correct bug component assignments but alsoerroneous and irrelevant assignments.
jeong et al.
model developer tossing relationships in a probability graph which helps to uncover team structures and recommend bug fixers.
our work is different in that weconstruct a bug tossing graph among components and learnfrom historical component tossing relationships to reduce bug component assignment confusion.
our baseline bugbug tgis inspired by the way that jeong et al.
use the developertossing graph for improving developer recommendation butbugbug tg is based on our component tossing graph.
ourresults show that the simple heuristic use of component tossingrelationships is not effective for improving bug componentassignment.
bhattacharya et al.
extend jeong et al.
by incremental learning for effective use of each training data point.
hu et al.
analyze historical bug componentand component fixer relations to assist fixer recommendation.however none of these works effectively use erroneous andirrelevant assignments during learning.
xia et al.
report an empirical study on bug field reassignment and they find that fixer and component reassignmentsoccur most frequently.
their follow up work trains multi label classifiers to predict the possibility of field reassignment.similar approaches have been adopted in .
however these works do not predict which specific components shouldbe reassigned to.
tian et al.
and han et al.
address theproblem of developer reassignment.
they also use learning to rank but their feature design is developer centric.
in contrast our feature design is component centric with several explicitfeatures for component tossing community and tossed outbugs.
we also explicitly model and contrast the similaritydistributions between the input bug and the closed tossed outbugs of the components.
these features are inspired by our em pirical observation on additional information and mechanismsdevelopers often resort to for justifying bug tossing decisions.
vi.
c onclusions and future work this paper presents an empirical study on bug tossing phenomena and root cause and a learning to rank frameworkto address the limitations of classification based bug com ponent assignment revealed in our empirical study.
differentfrom classification based methods that learn from each bug component assignment independently learning to rank learnsby contrasting correct erroneous and irrelevant assignments.inspired by additional information developers often resort tofor correcting erroneous bug assignments we construct a bugtossing knowledge graph from which rich bug component andbug component relation features can be derived and used toinform the learning to rank model.
our large scale evaluationconfirms the effectiveness of our learning to rank approachand feature design.
in the future we will enrich our bugtossing knowledge graph e.g.
with bug topics improveour feature design e.g.
on component community and bugsimilarity distribution and experiment deep learning basedfeature extraction in the learning to rank framework.
vii.
a cknowledgement this research was partially funded by data61 anu collaborative research project co19314.
we sincerely thank the anonymous reviewers for the insightful and constructive feedback.