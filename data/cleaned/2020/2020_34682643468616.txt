which abbreviations shouldbeexpanded?
yanjiejiang schoolofcomputerscienceand technology beijing instituteof technology beijing china jiangyanjie bit.edu.cnhuiliu schoolofcomputerscienceand technology beijing instituteof technology beijing china liuhui08 bit.edu.cnyuxiazhang schoolofcomputerscienceand technology beijing instituteof technology beijing china yuxiazh bit.edu.cn nanniu departmentofelectricalengineering and computerscience university of cincinnati cincinnati usa nan.niu uc.eduyuhaizhao schoolofcomputerscienceand engineering northeastern university shenyang china zhaoyuhai mail.neu.edu.cnlu zhang key laboratory ofhighconfidence softwaretechnologies peking university beijing china zhanglu sei.pku.edu.cn abstract abbreviationsarecommoninsourcecode.properlydesignedabbreviations may significantly facilitate typing typesetting and reading of lengthy source code.
however abbreviations if used improperly may also significantly reduce the readability and maintainabilityofsourcecode.althoughafewautomatedapproaches havebeenproposedtosuggestfulltermsforgivenabbreviations to the best of our knowledge there is no automated approaches tosuggestwhetherabbreviationsareusedproperly i.e.
whether they should be replaced with corresponding full terms.
notably itisoften challengingforinexperienceddevelopersandmaintainerstomakesuchdecisions.tothisend inthispaper wepropose an automated approach to assisting developers and maintainers inmakingthedecisions.therationaleoftheapproachisthatabbreviationsshouldnotbeexpandediftheexpansionwouldresult in unacceptably lengthy identifiers or if developers maintainers can easily figure outthe meaning full terms oftheabbreviations based on their domain knowledge or contexts of the abbreviations.
from a corpus of programs we leverage data mining techniques to discovercommonabbreviationsthatarefrequentlyemployedby various developers in similar contexts.
the key of the data mining is to turn the problem of mining common abbreviations into the maximal clique problem that has been extensively studied.
we suggesttonotexpandgivenabbreviationifitmatchesatleastoneof thediscoveredcommonabbreviations.fromthesamecorpus we alsocalculatetheprobabilitydistributionforthelengthofdifferent types of identifier e.g.
variable names and method names.
the probability distribution specifies how likely an identifier of type t is composed of exactly ncharacters.
our heuristic is to not expand the abbreviation if the probability of its enclosing identifier would corresponding author esec fse august athens greece copyright held by theowner author s .
acm isbn .
reduced by the expansion.
finally we also suggest to not expand the abbreviation if its full terms are contained in surrounding contextsoftheabbreviation i.e.
tokensonthesamesourcecode line.otherabbreviationsthatdonotreceivesuggestionsfromthe proposedapproachareexpectedtobereplacedwiththeirfullterms.
ourevaluationresultson1 818abbreviationsfromfiveopen source applications suggest that the proposed approach is accurate with a highaccuracyof95 .
ccsconcepts softwareanditsengineering softwaremaintenancetools software development techniques .
keywords abbreviation expansion datamining cliques software quality acm reference format yanjie jiang hui liu yuxia zhang nan niu yuhai zhao and lu zhang.
.
which abbreviations should be expanded?.
in proceedings of the 29th acm joint european software engineering conference and symposium on thefoundations of softwareengineering esec fse august athens greece.
acm newyork ny usa 12pages.
.
introduction identifiers i.e.
namesofsoftwareentities arecommoninsource code.theyaccountforthemajority ofsourcecodeintermsof characters .consequently suchidentifierscomposedofnatural language terms serve as the major source for software comprehension andthustheimportanceofqualifiedidentifiersiswell recognized .
for example avidan et al.
empirically investigated the effect of variable names on software comprehension and their empirical results suggest that meaningful variable names areinstrumentalforcomprehension andcaneffectivelyserveas documentation for sourcecode.
abbreviationsarewidelyemployedtoshortenidentifiers .
developers often use a short abbreviation to replace a long term or asequenceoftermsinidentifiers.forexample theyoftenuse e to this work is licensed under a creative commons attribution .
international license.
esec fse august athens greece yanjiejiang huiliu yuxiazhang nan niu yuhai zhao andlu zhang represent exception andprefer xmlparser to extensiblemarkuplanguageparser .
properly designed abbreviations may significantly facilitate typing typesetting and reading of lengthy source code.
for example the lengthy class name extensiblemarkuplanguageparser makes it challenging to typeset the following simple variabledeclaration public extensiblemarkuplanguageparser m extensiblemarkuplanguageparser new extensiblemarkup languageparser extensiblemarkuplanguageparser.default because it is likely that the whole statement could not be shown entirelywithinasingleline dependingonthesizeofmonitors .the length can be significantly reduced by replacing extensiblemarkuplanguage with its well known abbreviation xml and thus thelengthystatementbecomesmuchshorter public xmlparser m xmlparser new xmlparser xml parser.default .
the latter is easier to type in and has a greater chance to be shown entirely within a single line which facilitates program comprehension.
however abbreviations if used improperly may also significantlyreducethereadabilityandmaintainabilityofsourcecode .abbreviations s standingfor students and ds standing for datasequence aregoodexamplesofimproperusageofabbreviations.
it could be difficult for developers other than the authors to figure out the exact meaning of the abbreviations which may result in misunderstanding and incorrect usage of the enclosing programs.tothisend afewautomatednovelapproacheshavebeen proposedtosuggestfulltermsforgivenabbreviations .
developersmayreplacetheabbreviationswithfulltermssuggested by such tools by renaming .
notably it is highly beneficial for authors of source code to replace improperly used confusing abbreviationswithfullterms.theauthors replacementishighly accurateandisdoneonceandforall.althoughreaders maintainers ofthesourcecodemayleverageexpansiontoolstoguessthemeaningoftheconfusingabbreviations theguesscouldbeinaccurate anditshould be repeatedbyevery reader maintainer.
weconcludebasedontheprecedinganalysisthatcarefullydesigned abbreviations facilitate coding and improve readability of sourcecodewhereasimproperlyusedabbreviationscouldreduce readabilityofsourcecodeandresultin incorrectusages modification ofprograms.althoughnovel approaches have beenproposed tosuggestfulltermsofgivenabbreviations tothebestofourknowledge there is no automated approaches to suggest whether abbreviations require expansion i.e.
whether they should be replaced withcorrespondingfullterms.notably itisoftenchallengingfor inexperienced developers and maintainers tomakesuch decisions becausethereisnoquantitativeguidanceforthedecision andit fully depends ondevelopers experience andintuitions.
to this end in this paper we propose an automated approach calledsmartexpander todecidingwhetheragivenabbreviation needstobeexpandedatall.therationaleoftheapproachisthat abbreviationsshouldnotbeexpandediftheexpansionwouldresult in lengthy identifiers or if developers maintainers can easily figure out the meaning full terms of the abbreviations based on their domain knowledge or contexts of the abbreviations.
consequently we design a sequence of heuristics according to the rationale to pick up such abbreviations that do not require expansion.
from a corpus of source code we leverage data mining techniques to discovercommonabbreviationsthatarefrequentlyemployedbydifferentdevelopersinsimilarcontexts.thekeyofthedatamining is to turn the problem of mining common abbreviations into the maximal clique problem that has been extensively studied .theproposedapproachsuggeststonotexpandanabbreviation if it matches at least one of the discovered common abbreviations.
from the same corpus of open source programs we also build the probabilitydistributionmodelforthelengthofdifferenttypesof identifier e.g.
variablenames methodnames andclassnames.the model specifies how likely an identifier of type t is composed of exactlyncharacters noted as p t n .
suppose that a given abbreviationcomesfromidentifier idoftypet andreplacingthe abbreviation with its full terms would increase the length of the identifier from ktojcharacters.
our approach suggests to not expandtheabbreviation if p t j p t k .
finally the proposed approachsuggeststonotexpandtheabbreviationifitsfullterms arecontainedinthe surroundingcontextsoftheabbreviation i.e.
tokensonthesamesourcecodeline.otherabbreviationsthatdo notreceivesuggestionsfromtheproposedapproachare expected to be replacedwiththeirfull terms.
theproposedapproachhasbeenevaluatedonopen sourceapplications and our evaluation results suggest that the proposed approach is accurate.
we randomly sampled abbreviations from five open source applications and manually decided whether they should be expanded.
we applied the proposed approach to thesampledabbreviations andcompareditssuggestionsagainst manual decisions.
our evaluation results suggest that the accuracy of the proposed approach varies from to with an average of95 .
thepaper makesthe following contributions an automated approach to deciding which abbreviations should orshouldnot beexpanded.tothebestofourknowledge it is the firstautomatedapproach for this task.
an extensive evaluation of the proposed approach on opensource applications.
the evaluation results suggest that the proposedapproach isaccurate.
therestofthepaperisstructuredasfollows.section 2presentsa shortreviewofrelatedresearch.section 3proposestheapproachto suggestwhetherabbreviationsareusedproperly.section 4presents anevaluationoftheproposedapproachonwell knownopen source applications.section 5providesconclusionsandpotentialfuture work.
related work .
expansionofabbreviations in sourcecode because of the popularity of abbreviations a large number of automatedapproaches havebeenproposedtosuggestingfullterms forabbreviationsinsourcecode especially inidentifiers.anintuitivewaytoexpandingabbreviationsistocompareabbreviations againstgenericenglishdictionariesandreturndictionarywords thatmatchtheabbreviationsaccordingtopredefinedrules .for example an abbreviation matches a dictionary word if the abbreviationisaprefixofthedictionaryword.theadvantageoflooking up expansion in generic english dictionaries is twofold.
first such dictionariesare ready for reuse.second suchdictionaries contain almostallpossibleenglishwords andthusinmostcaseswecan findmatchingtermsforgivenabbre viations.howev er itisquite 579which abbreviations should be expanded?
esec fse august athens greece often that for a given abbreviation there are a large number of matching terms from a generic english dictionary.
it remains challenging to choose the correct one from such a large number of matchingterms.
anotherintuitivewaytoabbreviationexpansionistolookupabbreviation dictionaries .
an abbreviation dictionary contains a list of well known abbreviations as well as their corresponding full terms.
by looking up the dictionary we can retrieve the full terms for a given abbreviation accurately.
however such abbreviation dictionaries are often constructed manually which significantly limits the size of such dictionaries .
as a result matching algorithms may fail frequently to retrieve matching items from such dictionaries incasethedictionariesdonotcontaintheabbreviations.
another problem with abbreviation dictionaries is that thesameabbreviationmayhavedifferentmeaning andthusdifferent full terms depending on its contexts.
as a result looking up the abbreviation dictionaries alone may fail to select the correct expansion.
leveragingthecontextsofabbreviations e.g.
surroundingsource codeandcomments couldsignificantlyincreasetheaccuracyofabbreviation expansion .
for example corazza et al.
lawrie etal.
andguerroujetal.
suggestedtosearchforfullterms incommentsofsourcecode.therationaleofsuchapproachesis thatcommentsinsourcecodeexplainthesemanticsofsourcecode and thus it is likely that we can find the full terms of abbreviations from the comments associated with the source code where the abbreviations appear.
however developers rarely write comments which significantly reduces the chance of finding full terms in comments.
caprile et al.
and carvalho et al.
suggested toexpandabbreviationsbylookingforfulltermsfromsurrounding source code.
lawrie et al.
suggested to match a given abbreviation against full terms in the enclosing methods only.
hill et al.
proposed a complex approach to search for full terms in enclosing methods enclosing classes and enclosing projects in order.jiangetal.
proposedaparameter specificapproachto expand parameter abbreviations only by leveraging the relationshipbetweenargumentsandparameter ifanabbreviationcomes fromanargument theylookfor itsfulltermsinthecorresponding parameter andviceversa.later they generalizedtheapproach to leverage various semantic relationships among software entities e.g.
assignments between software entities inclusion relation betweensoftware entities invocationof methods and access offields variables.therationaleisthatsemanticallyrelatedentities are likely to share some common concepts and thus their names maycontainsomecommonterms.newmanetal.
conducted an empirical study to analyze abbreviation expansion pairs extracted from five open source applications.
one of their interesting findings is that documents of programming languages project documents andsourcecodecontainsimilarnumbersofexpansions whereas documents of programming languages are the primary sourceofunique expansions.
besidesthesourceoffullterms matchingalgorithmsserveas anothercornerstoneforabbreviationexpansion .foragivenabbreviationandgivensourceoffullterms e.g.
dictionariesandcode comments abbreviationexpansiontoolsshouldleveragematching algorithmstosearchforpotentialexpansionsfromthegivensource sequences of words .
apostolio et al.
proposed a matchingalgorithm where a word is taken as a potential expansion of an abbreviation if the abbreviation is a subsequence of the word.
lawrie et al.
make suggestions only if the given abbreviation has a singlepotentialexpansion andignoresthecaseswheremultiple potentialexpansionsareretrieved.incontrast hilletal.
and carvalhoetal.
sortsuchpotentialexpansionsbasedontheir frequency andrecommendthetopone.lawrieetal.
choosethe one that has thehighestlexical similarity withthe givenabbreviation.guerroujetal.
andcorazzaetal.
employgraph based matchingalgorithmsto search for the mostlikely expansions.
suchnovelapproachestoabbreviationexpansionhavesignificantly facilitated program comprehension.
however none of them couldbeleveragedtosuggestwhichabbreviationsshould orshould not be expanded as our approach does.
.
influenceofabbreviations abbreviations are common in source code and thus their negative and positive effect is a big concern for software developers.
to this end researchershaveconductedempiricalstudiestoinvestigatethe negative positive effect of such abbreviations.
for example lawrie et al.
consulted over programmers and concluded that identifiers made up of full words often lead to higher software quality.
however they also suggested that in many cases replacing fulltermswithwell formedabbreviationswouldnotsignificantly reduce software quality because shorter and meaningful identifiers areeasiertorememberthanlongerones.swidanetal.
analyzed variablesinscratch apopularblock basedlanguageaimingatchildren.theiranalysisresultssuggestthatscratchprogrammersoften preferlongeridentifiernamesthandevelopersinotherlanguages.
hofmeister et al.
conducted an experimental study with professional c developers requesting them to locate defects in sourcecodesnippets.theirevaluationresultssuggestthatfullterm identifierscanspeedupfaultlocalizationby19 comparedtomeaningless single letters and abbreviations.
notably single letters and abbreviations are roughly equivalentwithregardtofault localization.
schankin et al.
requested java developers to locate semanticdefectsinsourcecodesnippets andtheirevaluationresultssuggestthatlongerandmoredescriptiveidentifiers canspeed upfaultlocalizationby14 comparedtoshorterandlessdescriptive identifiers.
however this effect disappears when developers aresearchingforsyntaxerrorswherein depthunderstandingof the code isoften not required.
although empirical studies introduced in the preceding paragraphsuggestthatlongeridentifiersoftenleadtobetterreadability ofsourcecode theirnegativeimpactisnotnegligible.forexample binkleyetal.
conductedacasestudytoinvestigatethebalance betweenlonger moreexpressivenamesandlimitedprogrammer memory resources.
their evaluation results suggest that longer namesoftentakemoretimetoprocessandreducecorrectnessin softwareengineeringtasks.scannielloetal.
conducteda controlledexperimentwherestudentswereaskedtofindandfix faults in one of two alternative versions of the same program one with full termed identifiers and the other with abbreviations.
their evaluationresultssuggestthatabbreviationsdidnotresultinsignificantnegativeeffectonthesoftwareengineeringtasks i.e.
fault location andbugfixing .
580esec fse august athens greece yanjiejiang huiliu yuxiazhang nan niu yuhai zhao andlu zhang figure overview suchinterestingfindingsreveal bothpositive andnegativesides ofabbreviations whichinspiredthe work presentedin this paper.
approach in this section we present an automated approach to assisting developersandmaintainersindecidingwhichabbreviationsshould orshouldnot beexpanded.anoverviewispresentedinsection .
anddetailsare presentedin the following sections.
.
overview fig.1presentstheoverviewoftheproposedapproach.theproposed approach is divided into two phases offline mining the left part of fig.
and onlineclassification theright partof fig.
.during the offlineminingphase theproposedapproachlearns fromacorpus of source code and discovers a list of common abbreviations as well as the probability distribution of identifiers length.
during the online classification phase the proposed approach applies a sequence of heuristic based filtering to determine whether a given abbreviationshouldbeexpanded.overall theproposedapproach works as follows fromacorpusofsourcecode weextractallidentifiers i.e.
names ofsoftwareentities andclassifythemaccordingtoentities types e.g.
variable names method names and class names .
for each type of identifiers we calculate the probability distribution of their length.
the probability distribution specifies how likely an identifier of type t is composed of exactly ncharacters noted as p t n .
from the same corpus we extract all abbreviations.
lexicallyidenticalabbreviationsregardlesswheretheyareextractedare presented on a single graph where each abbreviation is represented as a node and weight of edges represent the context similarity among lexically identical abbreviations.
in case there is alargesubgraphwhereeachpairofnodesisconnectedwitha short edge the subgraph called maximal clique represents a commonabbreviation that iswidely usedin similar contexts.
foragivenabbreviation abbfromidentifier idoftypet replacing the abbreviation with its full terms would increase the length ofidfromktoj.
we suggest to not expand the abbreviation if p t j p t k notedas case1 .
if the abbreviation abband its full terms appear on the same source code line where the enclosing identifier is defined noted as case2 we suggestto not expand it.
figure probabilitydistribution ofidentifiers length iftherearealargenumberofabbreviationsinthesameproject thatarelexicallyidenticalto abb notedascase3 wesuggest to not expand the abbreviation.
if there is a maximal clique whose abbreviations are lexically identical toabb and the average context similarity between abb andnodesinthecliqueisgreaterthanthreshold notedascase we suggestto not expand the abbreviation.
we suggest to expand abbif it does not belong to any of the preceding cases i.e.
cases1 detailsofthe key steps are presentedin the following sections.
.
statisticanalysis on identifiers length lengthyidentifiershavenegativeeffectonthereadabilityofsource code .consequently ifexpandingabbreviationsresultsinlengthy identifiers we should suggest to not expand them.
fromacorpusofsourcecode weextractallidentifiers including variable names parameter names methodnames class names and fieldnames.notably weextractallidentifiersregardlessofwhether theycontainabbreviations.theresultingidentifiersaredividedinto fivetypes variablenames includingfieldnames parameternames methodnames classnames anditerationindexes.iterationindexes requireaspecialcategorybecausesuchindexes e.g.
iandj ar e often significantly shorter than other variables.
for each type of identifiers we calculate the probability distribution of their length.
the probability distribution specifies how likely an identifier of type t is composed of exactly ncharacters noted as p t n .
for example theprobabilitydistributionformethodnamesispresented in fig.2where the horizontal axis presents the length of method 581which abbreviations should be expanded?
esec fse august athens greece names and vertical axis presents the probability for the length of a methodname being equivalentto the horizontal axis.
supposethattheabbreviationundertest notedas abb comes from identifier idof type t and replacing the abbreviation with its fulltermswouldincreasethelengthof idfromx1tox2.w elookup the probability distribution modelof type t e.g.
the one infig.
andretrievethecorrespondingprobabilitiesforlength x1andx2 respectively p1 p t x1 p2 p t x2 we suggest to not expand the abbreviation abbin identifier id ifp t x2 p t x1 .
the rationale of the heuristic is that the lengthoftheidentifierbecomeslessacceptable i.e.
lesspopular because of the abbreviation expansion and thus we had better not conduct the expansion.
in this case the proposed approach terminatestheprocessonthegivenabbreviation.otherwise the proposedapproachwouldapplyotherheuristics asspecifiedinthe followingsections to the abbreviation to reachthe final decision.
.
graph baseddata mining well knownabbreviations like xml and ai arelesslikelyto hindersourcecodecomprehensionbecausedevelopersandmaintainers could easily figure out their meaning and full terms .
to this end we would suggest to not expand such well known abbreviations.
a simple and intuitive way to tell whether a given abbreviation is well known is to look up abbreviation dictionaries.
however such abbreviation dictionaries are often constructed manuallyandthustheirsizesarelimited .asaresult somepopularabbreviations especiallythose thatbecame popularrecently may not be included in such manually constructed abbreviation dictionaries.
tothis end in this paper weleverage graph based data mining techniques to identify well known abbreviations from a large corpusofsourcecode.weextractallabbreviationsfromthecorpus.
eachofthe resultingabbreviation isrepresentedas atuple abbi stri cxti wherestriandcxtiare the text and context of the abbreviation respectively.thecontextiscomposedofasequenceofidentifiers that appear in the enclosing document e.g.
a java file of the abbreviationinthesameorderastheyappearinthedocument.such identifiers are partitioned into tokens including abbreviations by theheuristicsproposedby jiangetal.
.the contextisfinally representedas asequenceoftokens cxti t1 ... tn werepresentthecontextasafixed lengthnumericalvectorwith well knownparagraph2vector .
v cxti p2v t1 ... tn wherev cxti isthenumericalvectorand p2visthemappingfrom asequenceoftokensintoanumericalvector i.e.
paragraph2vector.
notably paragraph2vector is a deep learning based algorithm that is widely used to convert short texts in natural languages into fixed length numerical vectors.
a significant advantage of paragraph2vector is that semantically related texts could result insimilarvectors andthusthesimilarityoftheresultingvectorscould be leveraged to represent the semantic similarity of the original texts.
consequently we compute the context similarity between twoabbreviationsbasedonthecosinesimilarity oftheresulting vectors simcxt abbi abbj sim v cxti v cxtj v cxti v cxtj bardblv cxti bardbl bardblex bardblexv cxtj bardblex bardblex abbreviations from the corpus are partitioned into different groups according to the texts i.e.
striin equation .
abbreviations within the same group are lexically identical and thus we call them lexically identical abbreviations.
for each group of the abbreviations we construct an undirected graph gwhere nodes represent abbreviations in the group and weight of edges represent the context similarity between abbreviations as defined in equation .
graph baseddataminingoftheproposedapproachistoidentify common abbreviations thatare frequentlyused bydifferentdevelopers in similar contexts.
we convert this task into a well studied maximal clique problem as follows.
a cliqueof a graph is a subgraph where any two of the vertices are adjacent.
two vertices inaundirectedgraphare adjacentifandonlyiftheyareconnected byanedgeinthegraph.a maximalclique isacliquethatcannot be extendedby includingone moreadjacentvertex i.e.
it isnot a subset of a larger clique.
the task to find out the maximal clique of agivengraphiscalled maximalcliqueproblem .thisproblem hasbeenwell studied andalargenumberofefficientapproaches havebeenproposed .notably intheoriginalgraph g eachpair ofverticesare adjacentnomatterhowsimilar ordissimilar they are.consequently thewholegraphitselfistheonlymaximalclique.
to mine common abbreviations used in highly similar contexts we remove the edgebetween twoverticesifthe context similarity as defined in equation of two abbreviations represented by the twovertices issmallerthanapredefinedthreshold .asaresult amaximalcliqueoftheresultinggraph g representsapopular abbreviationthatisemployedfrequentlyinhighlysimilarcontexts and thesizeof thecliqueindicatesitspopularity.
amaximal clique could be representedas atriple clqi txt clqi v clqi e clqi whereclqiis a maximal clique and txt clqi is the text of the abbreviationsrepresentedbytheverticesontheclique.
v clqi and e clqi areverticesandedgesontheclique.notably toremoveless popularabbreviations weonlykeepsuchmaximalcliqueswhose size number ofvertex isnoless threshold .
.
common abbreviation basedfiltering in the preceding section we identify common abbreviations by applying data mining techniques to a corpus of source code resulting in a set of maximal cliques.
in this section we compare abbreviations under test against such common abbreviations to identify such abbreviations that are well known to developers and maintainers.
suppose that the abbreviation under test is abbi stri cxti .
fromthemaximalcliquesgeneratedintheprecedingsection we retrieve such cliques where abbreviations are lexically identical 582esec fse august athens greece yanjiejiang huiliu yuxiazhang nan niu yuhai zhao andlu zhang toabbi.foreachoftheresultingcliqueswecomputetheaverage contextsimilaritybetween abbiandabbreviationsonthe clique avgsim abbi clqj summationtext.
abbk v clqj simcxt abbi abbk v clqj wherev clqj asspecifiedinequation istheabbreviations vertices ontheclique clqj andsimcxtcomputesthecontextsimilarity between a pair of abbreviations as specified in equation .i ft h e resulting average similarity avgsim abbi clqj is greater than we suggest to not expand the abbreviation abbi and the proposed approach terminatestheprocessing onthis abbreviation.
some abbreviations e.g pkcs standingfor publickey cryptograph standards are domain specific and thus they may be missed by the graph based data mining onlarge scale source code asspecifiedintheprecedingsection.tothisend wecomparethe abbreviationundertest notedas abbi againstabbreviationswithin the same project to determine whether the same abbreviation is frequently used in different places within the same project.
consequently we retrieve allabbreviationswithinthe enclosingproject ofabbi andcalculatethenumberofabbreviationsthatarelexicallyidentical toabbi.
if this number is greater than a threshold w e suggestto not expand the abbreviation.
.
context basedfiltering some abbreviations are easy to interpret expand because their full termsappearintheirsurroundingcontexts.typicalexamplesare presentedin the following code snippet 1try 2bufferedreader bufreader new bufferedreader new filereader file 3string line 4while line bufreader.readline !
null if !line.equals int lenofline line.length results.add line lenofline bufreader.close 12catch exception e e.printstacktrace thiscodesnippetcontainsafewidentifiersthatarecomposed ofabbreviations i.e.
bufreader online2 lenofline online6 and e on line .
none of the abbreviations however requires expansion because such abbreviations are easy to interpret.
for the first one i.e.
bufreader on line we know its meaning accordingtoitsdatatype bufferedreader forthesecondone i.e.
lenofline online wecanfigure outitsfullterm accordingto the right side of the assignment i.e.
length for the last one i.e.
e on line we know exactly what it means because of the data type exception .
toidentifysuchabbreviationsthatcouldbeeasilyinterpreted via their surrounding contexts the proposed approach works as follows first foranabbreviationundertest notedas abbi weextract the whole line of source code where its enclosing identifier is definedas the contextofthe abbreviation notedas ctx abbi .
second wedecomposethecontext ctx abbi intoasequence oftokensaccordingtoblankspaces capitalletters andspecialcharacters e.g.
and .
the resulting sequence is noted as seq abbi .
third supposing the full terms of the abbreviation is a sequence ofwords w1 ... wn wesuggesttonotexpandtheabbreviationifallofthewordshaveequivalenttokensin seq abbi .t w o tokens words areequivalentiftheyareidenticalorsharethe same root.
for example thread and threads are not identical buttheydosharethesameroot thread andthustheyaretaken asequivalent.tothisend weapplystemmingtosuchtokenswith an open sourceimplementationfrom stanforduniversity .
notably if none of the heuristics specified in sections .
.
suggesttonot expanda givenabbreviation theproposedapproach bydefaultwouldsuggestto expand it.
evaluation .
research questions theevaluation investigates the following research questions rq1 doallabbreviationsinwell knownopen sourceapplications require expansion?
if not what percentage of the abbreviationsshould orshould not be expanded?
rq2 istheproposedapproach smartexpander accurateinidentifyingabbreviationsthat should orshould not be expanded?
rq3 how does the setting of the thresholds employed by the proposedapproachinfluencetheperformanceof smartexpander ?
rq4 howdoestheheuristicsinfluencetheperformanceof smartexpander ?
rq5 issmartexpander scalable?
theproposedapproach called smartexpander isbasedonthe assumptionthatnotallabbreviationsrequireexpansion.investigatingrq1would validate the assumption.
rq2concerns the performance e.g.
precisionandrecall ofsmartexpanderinclassifying abbreviations with regard to their necessity of expansion.
rq3 concerns the setting of smartexpander.
as introduced in section smartexpander leverages a set of thresholds i.e.
the minimal contextsimilaritybetweenabbreviations insection .
theminimal size of the maximal cliques in section .
and the minimal numberoflexically identicalabbreviationswithinthesameproject insection .
.investigating rq3helpsdevelopersandmaintainers set the thresholds to maximize the performance of smartexpander.
rq4concernstheeffectoftheemployedheuristics.smartexpander is essentially a sequence of heuristics length based heuristic section3.
common abbreviationbasedheuristic section .
and context basedheuristic section .
.byinvestigating rq4 wemay quantitativelyrevealthe effectoftheemployedheuristics.
rq5concernsthescalabilityofsmartexpander i.e.
whethersmartexpander can be appliedefficiently to large projects.
.
subject applications theevaluationisbasedonfivewell knownopen sourceapplications.anoverviewofthesubjectapplicationsispresentedintable .
davmail isanexchangegatewayallowinguserstouseanymail calendarclienttocommunicatewithanexchangeserver.itsgoal istoprovidestandardcompliantprotocolsinfrontofproprietary exchange.
docfetcher is a desktop search application.
it allows to search the contents of files on local computer.
drjava i sa 583which abbreviations should be expanded?
esec fse august athens greece table subjectapplications application id full names domain major developers identifiers abbreviations mail davmail gateway email micka l guessant oleksandr huziy andandr k doc docfetcher search engine nam quang tran rob croweandbitnik drj drjava ide corky cartwright rebecca smith andcarolyn dubbo apache dubbo distributed computing ken.lj ianluo and cvictory jedit jedit texteditor andrea citti martinraspeandvolker friedritz total table not all abbreviationsrequire expansion applications samples positive negative rate ofpositive mail doc drj dubbo jedit total lightweight programming environment for java designed to foster test driven software development.
apache dubbo is a highperformance java based rpc framework.
jedit is a programmer s text editor written in java.
these applications are selected because of the following reasons.
first all of them are well known open source applications which facilitatereplication of the evaluation.second theyarefromdifferentdomains anddevelopedby differentprogrammers.constructingsuchacomprehensivedataset mayimprovethegeneralityoftheconclusionsdrawnonthedataset.
notably smartexpander requests a large corpus of high quality source code for data mining as specified in section .2and section3.
.tothisend wereusethedatasetcreatedbyalonetal.
as the corpus of source code.
the dataset is composed of source codefrom1 000top rankedjavaapplicationsongithub.suchapplicationsarefromdifferentdomainsandaredevelopedbydifferent teams.
in total the dataset contains lines of source code identifiers and abbreviations.
notably this corpus does not contain any of the five subject applications in table1.
.
process toanswerrq1 wesampledabbreviationsfromeachoftheinvolved subject applications and manually decide which of them require expansion.
the size of the samples is determined by the number ofabbreviationsinthesubjectapplications andwecomputedthe minimalsizeofthesampleswith samplesizecalculator withan error margin of and confidence level of .
the resulting size is presented in table .
notably all of the samples were picked up randomly.foreachoftheresulting1 818abbreviations weasked three developers to manually determine whether they should be expanded.eachofthethreedevelopershadthreetofiveyearsof programming andmorethanthreeyearsofjavaexperience.we requested them to expand the abbreviations and make decisions independently.theywereallowedtoaccessthecontext butwedidnot givethemtrainingordesignatedtimetoget familiarwiththe subjectsystems.incaseofinconsistence ineitherexpansionsor necessity ofexpansion werequestedthemtodiscusstogetherto reachanagreement.duringtheevaluation eachsamplereceived exactly three labels from three participants.
following the paper by hallgren we computed cohen s kappa coefficient for all coder pairs and used the arithmetic mean as the final kappa.
thecohen skappacoefficientoftheirclassificationisupto0.
suggesting anexcellentagreement betweendifferentparticipants.
fleiss kappa .
alsoconfirmsthehighagreementamongparticipants.
notably the resulting dataset noted as goldenset would serve as a benchmark in the following evaluation.
sample abbreviations in goldenset are classified into two categories.
the first category called positive samples are composed of abbreviations thatrequireexpansion.theothersbelongtothesecondcategory callednegativesamples .
to answer rq2 we applied smartexpander to the goldenset andcomparedthesuggestionsgeneratedbytheapproachagainst manual decisions.
a generated suggestion on a given abbreviation is correct if and only if it is identical to the manual decision on the same abbreviation provided by the goldenset .
to measure the performanceofsmartexpander wecomputedclassificationmetrics i.e.
accuracy precision andrecall.
to answer rq3 we changed the value of the thresholds and repeated the evaluation as specified in the preceding paragraph.
notably we changed the value of a single threshold at a time to explicitlyreveal the impactof each threshold.to answer rq4 we disabledoneoftheheuristicsatatimeandevaluatedthechangesof the performance of smartexpander on the same dataset i.e.
goldenset .
each of the heuristics was disabled once.
to answer rq5 we recorded the time smartexpander took to make suggestions andestimatedthe time complexityof smartexpander.
.
rq1 notall abbreviations require expansion table2presentstheresultsofthemanuallabeling classification of thesampledabbreviations.thesecondcolumnofthetablepresents the size of the sample i.e.
how many abbreviations have been picked up for manual labeling.
the third column presents the number of positive abbreviations among the samples that request expansion and the fourth column presents the number of negative abbreviations that developers suggested to not expand.
the last column presents the rate of positive i.e.
how many percentages of the samplesare suggestedto be expandedbythe participants.
from the table we make the following observations 584esec fse august athens greece yanjiejiang huiliu yuxiazhang nan niu yuhai zhao andlu zhang table performanceofsmartexpander applications sample tp fp tn fnaccuracynegativesamples positivesamples precision recall precision recall davmail docfetcher drjava dubbo jedit total first not all of the abbreviations require expansion.
the participantssuggestedtonotexpandmorethaneightypercentageof themanuallyanalyzedabbreviations i.e.
469outofthe1 are manually classified as negative samples.
the finding may suggest that most of the abbreviations in well known applicationsareusedproperly andarepreferredtotheirfullterms.this findingmayalsoexplainwhy abbreviationsare common.
second the rate of positive negative is stable varying slightly among subject applications.
for example the rate of negative variesslightlyfrom75 to86 .thisfindingmaysuggestthatthe assumption i.e.
notallabbreviationsrequireexpansion holds regardless of application domains and developers of software applications.
althoughonly19 818ofthesampledabbreviationsshould be expanded considering the large number of abbreviations in source code e.g.
more than twenty thousand abbreviations in project dubbo there could be thousands of abbreviations in a singleprojectthatshouldbeexpanded.furthermore ourresearchcan be in turn motivated by the fact that the majority of abbreviations shouldnot be expandedindeed developers should not expand all abbreviationswithautomatedexpansiontools.instead theyshould employ our approach to validate the necessity before expansion.
toidentifywhatkindofabbreviationsmaynotrequireexpansion wemanuallyanalyzedthe1 469negativeabbreviations.our analysisresultssuggestthatasignificantpart ofthe negative abbreviations are popular and well known abbreviations.
themostpopularonesinclude dir directory buf buffer msg message url uniformresourcelocator and pos position .suchabbreviationsarewell known andthuscouldbeused safely without significantly negative effect in readability of source code.wealsoobservethat47 469ofthenegativeabbreviationscomefromvariables parameterswhosedatatypescontain thecorrespondingfullterms.atypicalexampleis fileinputstream fis where fis stands for file inputstream .
fromthe precedinganalysis we concludethatnot allabbreviations require expansion.
consequently highly accurate approaches to assisting developers and maintainers in deciding which abbreviationsshouldbe expandedcould be valuable.
.
rq2 smartexpanderisaccurate to answer rq2 we applied smartexpander to the sample abbreviationsfromthesubjectapplications.evaluationresultsarepresented intable3where tp fp t u1d441 and f u1d441representthenumbers93 123456accuracy length of abbreviations in characters figure impactofabbreviations length of true positives false positives true negatives and false negatives respectively.notably abbreviationsthatrequireexpansion are called positive items and thus true positives are those that shouldbeexpandedandaresuggestedtobeexpanded.precision andrecallinprocessingnegativeexamplesare t u1d441 t u1d441 f u1d441 and t u1d441 t u1d441 fp respectively.precisionandrecallinprocessingpositive examples are tp tp fp andtp tp f u1d441 respectively.
from the table we make the following observations first smartexpanderisaccurate.most oftheabbreviations are classified correctly and only of the abbreviations are misclassified.
second smartexpanderishighlyaccurateinpickingupnegative examples i.e.
abbreviations that do not require expansion.
in retrievingsuchnegativeabbreviations smartexpanderreachesa highprecision of98 andahigh recallof .
the performance varies slightly among subject applications.
for example itsminimalandmaximalaccuracyis93 ondecfetcher and96 ondavmailanddrjava respectively.itmaysuggest that smartexpander is accurate regardless of the application domainsanddevelopers of the subjectapplications.
tofurtherinvestigatethereasonsforincorrectclassification we manually analyzed the misclassified abbreviations.
our analysis results suggest that shorter abbreviations are more challenging to classify than longer ones.
fig.
3illustrates how abbreviations length influences the performance accuracy of smartexpander.
fromthisfigure weobservethattheaccuracyincreaseswiththe increase in abbreviations length.
we also notice that of the misclassified abbreviations are composed of no more than two characters.
one possible reason for the misclassification of shorter abbreviations is that the same short abbreviation often has 585which abbreviations should be expanded?
esec fse august athens greece 3huirupdqfh ffxudf 3uhflvlrq iru 1hjdwlyh whpv 5hfdoo iru 1hjdwlyh whpv 3u hflvlrq iru 3rvlwlyh whpv 5hfdoo iru 3rvlwlyh whpv figure influenceofthresholds different interpretation full terms in different contexts.
a typical example is the abbreviation sb in variable declaration int sb fromjedit .smartexpandertakesitasacommonabbreviation for the given domain and suggests to not expand it because abbreviation sb appearsfrequentlywithinthesameapplication.
however the expansion small buckets of this abbreviation is significantly different from that stringbuilder of other common abbreviations.
consequently expanding this abbreviation helps reduce the confusion and thus this abbreviation is manually labelled aspositive requiringexpansion .notably smartexpander cannot distinguish different abbreviations by their full expansions during theofflinedataminingphasebecausetheirfullexpansionsareoften unavailable.
another reason for the misclassification is the limited corpus ofsourcecodeleveragedbysmartexpandertodiscovercommon abbreviations.
for the evaluation we only leveraged opensource java applications for this task.
as a result some common abbreviations e.g.
jdk standing for java development kit were missed because most of the leveraged applications did not containsuchabbreviations.consequently tofurther improvesmartexpander weshouldcollectmuchmoresourcecodefortheoffline data mininginfuture.
we conclude based on the preceding analysis that smartexpanderisaccurateregardlessofapplicationdomainsanddevelopers ofthe subjectapplications.
.
rq3 influenceofthresholds smartexpanderleveragesthe following thresholds theminimalcontextsimilaritybetweenabbreviationson the samemaximal clique called minimalcontext similarity .
the minimal size of the maximal cliques that represent common abbreviations called minimal size of the maximal cliques .
the minimal times a domain specific common abbreviation should appear within a single project called minimal popularity ofdomainabbreviation .
intheprecedingevaluation weleveragedthedefaultvaluesof the thresholds .
that were set empirically.
to figure out the influence of different thresholds we changed the value of a single threshold at a time and kept intact the default values of other thresholds.
our evaluation results are presented in fig.
.from this figure we make the following observations first all of the thresholds have significant influence on recall in retrieving positive negative items.
decrease in any of such thresholdsresultsinreducedrecallinretrievingpositiveitems andincreasedrecallinretrievingnegativeitems.notably such thresholdsareleveragedtoselectpotentiallynegativeitems and thus reducing such thresholds i.e.
relaxing the condition for theselection wouldresultinmorepredictednegatives which in turn leads to few predicted positives.
as a result recall in retrievingpositiveitemsisreducedwhereasrecallinretrieving negative items isincreased.
second increase in any of such thresholds resulted in increased precision in retrieving negative items and decreased precision in retrievingpositiveitems.increasingsuchthresholdsmakesthe heuristicsmoreconservativeinpredictingnegativeitems.asa result the precision inretrievingnegative items isincreased.
finally theeffectontheaccuracyismorecomplex.thedefault values of such thresholds .
resulted inthemaximalaccuracywhereasdecreasingorincreasingthe threshold valuesdecreasedin the accuracyof the approach.
weconcludebasedontheprecedinganalysisthatthethresholds havesignificantinfluenceontheperformanceofsmartexpander andthe defaultvaluesresult inthe maximal accuracy.
.
rq4 effect ofheuristics as introduced in section smartexpander is composed of a sequenceofheuristics length basedheuristic context basedheuristic and common abbreviation based heuristic.
to quantitatively investigatetheeffectofsuchheuristics wedisabledoneofthematatime and repeated the evaluation.
evaluation results are presented in table4where the first column specifies which heuristic is disabled.
from the table we make the following observations all of the heuristics are indispensable.
disabling any of them resultedinsignificantreductioninaccuracyofsmartexpander.
the reduction varied from disabling length based heuristic to 33percentagepoints disablingcontext basedheuristic .theprecision for positive abbreviations and recall for negative abbreviationssufferssimilarreductionsaswell.thisfindingmaysuggest that allthe heuristicsare useful andshould not be dropped.
disabling any one of the heuristics could slightly increase the recallin retrievingpositivesamples.theincreasevariesfrom2 586esec fse august athens greece yanjiejiang huiliu yuxiazhang nan niu yuhai zhao andlu zhang table effectofheuristics setting accuracynegativesamples positivesamples precision recall precision recall enabling all heuristics default setting disabling length based heuristic disabling context based heuristic disabling common abbreviation based heuristic to4 percentagepoints.notably alltheheuristics are designedto selectnegativesamples anditemsnotselectedbysuchheuristics are predicted as positive.
consequently disabling any of the heuristics would select few negative samples and more samples wouldbepredictedaspositive.asaresult therecallinretrieving positive samples increased.
however we also notice that the increase is minor.
one possible reason is that such heuristics werehighlyaccurateinselectingnegativeitems andthusonlya smallpart 31out1 ofthepositiveitemswereimproperly predictedas negative i.e.
false negatives bysuch heuristics.
disabling any of the heuristics dose not have any non negligible effect on the precision in processing negative abbreviations.
the actual precision in the third column of table 4should be .
.
.
and .
respectively.
fromsuchvalues we canobserveminorchangesinthepr ecision.ho wever wepresent allsuchvaluesintable 4as98 byroundingthemtothenearest whole numbers.
one possibility reason for such minor impact is thatalltheheuristics areleveragedindependentlytopick up negativeabbreviations andallofthemarehighlyaccurate.as a result disabling any of them would not reduce the precision becausetheremainingheuristicswerehighlyaccurateinpicking negative abbreviations.
disablinganyoftheheuristicsresulted insignificantreduction in recall for negative abbreviations.
the reduction varies from to percentage points.
the reason is that the heuristics were leveraged in parallel to pick up negative abbreviations and thus disablinganyofthemwouldreducethenumberoftruenegatives andpredictednegativesaswell thatinturnreducedrecallfor negative items.
context basedheuristichasthegreatesteffectontheaccuracy ofsmartexpander.disablingitreducedtheaccuracyfrom95 to .
one possible reason is that a large number of abbreviations come from names of variables and parameters and their full terms appear in the data types of the enclosing variables parameters.
a typical example is parameter exception e .
disabling thecontext basedheuristicwouldmisclassifysuchabbreviations whichresultsinsignificantreductionintheperformanceofsmartexpander.
notably common abbreviation based heuristic has the second greatest effect and disabling it reduced the accuracy significantly from to .
one possible reason is that this heuristic identified a large number of common abbreviations successfullyandsuggestedcorrectlyto not expand them.
fromtheprecedinganalysis weconcludethatalloftheleveraged heuristicsare indispensable.table runtimeofonline classification in seconds applications kloc samples time s time s per abbreviation mail .
doc .
drj .
dubbo .
jedit .
total .
60000time hours size of corpus kloc figure scalabilityofoffline data mining .
rq5 scalability toanswerrq5 weinvestigatedthescalabilityofsmartexpander by analyzing the average execution time of smartexpander on a single abbreviation.
the evaluation is conducted on a personal computer with intel core i7 16gb ram and windows .
our evaluation results are presented in table 5whose last column presentshowmanysecondssmartexpandertooktoclassifyasingle abbreviation i.e.
timedivide by samples .
from this table we observe that smartexpander is highly efficient in classifying abbreviations.onaverage ittookonly .37secondstoclassifyasingle abbreviation.
we also observe that time increased slightly with the increaseofapplicationsize.onthesmallestapplications mail the averageprocessingtimeis0.31secondswhereasitincreasedto0.
seconds on the largest application jedit .
one possible reason is thattheapproachshouldvisitallidentificationswiththeapplication to determine whether the abbreviation under test represents a domain specific common abbreviation as specified insection .
.
587which abbreviations should be expanded?
esec fse august athens greece thetimecomplexityofthevisitislinearlydependentonthesize ofthe applications.
wealsoinvestigatethetimeofofflinedataminingasspecifiedin sections3.
.
.
compared to the online classification offline data miningismuchmoretime consuming.ittook4.9hourstofinish the mining on1 applications containing morethan 50million lines of source code .
to further analyze how the execution time is influencedbythesizeofsourcecode called corpus involvedinthe data mining we reduced the size byremoving application at a timeandrepeatedtheofflinedataminingontheupdatedcorpus.
our evaluation results are present in fig.
.
from this figure we observe that the execution time is overall linearly dependent on the size ofthe corpus.
weconcludefromtheprecedinganalysisthatsmartexpander including both offline data mining and online classification is efficientandscalable.
.
threatsto validity athreattoconstructvalidityisthatthemanuallabelling classification of the sampled abbreviations could be incorrect.
on one side the participants lack system knowledge of the subject applications.
on the other side the classification is essentially subjective and thus it is likely that different participants assign different labels tothe same abbreviations.
however such inaccurate labels served as the ground truth for the evaluation and thus the evaluation results could be inaccurate.
to reduce the threat we asked three participants to label abbreviations independently and requested them to reach an agreement by discussion in case of inconsistency.
another threat to validity concerning the manual golden set creationisbiasedtooragainstsmartexpander.iftheparticipants known in advance how smartexpander works they might classify theabbreviationsassmartexpanderdoes whichmayseriouslybias theevaluationresults.toreducethethreat weexcludedtheauthors of the paper from the manual creation and recruited developers whowere not aware ofsmartexpander.
athreattotheexternalvalidityisthatonly5applicationsand abbreviations were involved in the evaluation.
the limited numberofinvolvedapplicationsandabbreviationsmaythreaten thegeneralityoftheconclusions i.e.
theextenttowhichsuchconclusions canbe generalized to other situations otherapplications andabbreviations .toreducethethreat weselectedwell known applications from different domains and developed by different teams.evaluationresultssuggestthatsmartexpanderisaccurate on each of the subject applications regardless of their difference in domainsanddevelopers.tofurtherimprovethe generalityofthe conclusions in future however evaluation on more applications andmore abbreviationsshould be conducted.
another threat to the external validity is that we sampled abbreviationswithoutconsideringtheirassociatedelementtypes e.g.
variableorclassnames .ifthedistributionofabbreviationspertype in the sample does not follow the distribution in the population it maynegativelyimpactthe validity ofthe study.
the replication package including implementation of smartexpander subject applications manuallylabelledabbreviations and the corpusofsourcecode is publiclyavailable at .
conclusionsand futurework abbreviationsarefrequentlyusedtoshortenidentifiersinsource code whichsignificantlyfacilitatestypingandtypesettingofsource code especiallycomplexandlengthy expressions.
however ifused improperly abbreviationsmayresultinlow readabilityandmaintainability of source code.
although approaches haven been proposedtosuggestfulltermsforabbreviations westilllackautomated tools in deciding which abbreviations should or should not be replacedwiththeirfullterms.tothisend inthispaper wepropose such an automated approach based on a sequence of heuristics.
suchheuristicsconcerndifferentaspectsoftheabbreviations i.e.
length popularity and contexts.
we evaluated the proposed approach with a large dataset containing abbreviations.
our evaluation results suggest that the proposed approach is accurate andthe averageaccuracyis95 .
in future we would like to investigate how well the proposed approachcancooperatewithabbreviationexpansiontools.thecollaborationistwofold.ononeside ourapproachcouldbeleveraged toexcludealargenumberofabbreviationsthatdonotrequireexpansion.
as a result abbreviation expansion tools can ignore such abbreviations and suggest developers with expansions full terms for other abbreviations only.
on the other side the length based heuristic section .
and the context based heuristic section .
oftheproposedapproachrequestfulltermsoftheabbreviationsunder test.
in the evaluation part we suppose that such full terms are available provided manually or by automated tools .
in future we wouldliketoinvestigatewhethertheautomatedabbreviationexpansiontoolscouldserveasthesourceofsuchfulltermsrequested by the proposed approach and to what extent its performance would be influenced by the inaccurate expansions suggested by such abbreviation expansion tools.
it could be fruitful to explore inmoredepththefactorsconsideredbydeveloperstomaketheir decisioninabbreviationexpansion andtoinvestigatethecauses of disagreement.
finally to increase the impact of the approach wewilldeployourtoolinsomeopen sourceprojectsandaskfor developers feedbackonthe use of the tool.