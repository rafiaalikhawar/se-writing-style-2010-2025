extracting rationale for open source software development decisions a study of python email archives pankajeshwara nand sharma bastin tony roy savarimuthu nigel stanger department of information science university of otago dunedin new zealand pankaj.sharma postgrad.otago.ac.nz tony.savarimuthu otago.ac.nz nigel.stanger otago.ac.nz abstract a sound decision making dm process is key to the successful governance of software projects.
in many open source software development ossd communities dm processes lie buried amongst vast amounts of publicly available data.
hidden within this data lie the rationale for decisions that led to the evolution and maintenance of software products.
while therehave been some efforts to extract dm processes from publicly available data the rationale behind how the decisions are made have seldom been explored.
extracting the rationale for these decisions can facilitate transparency by making themknown and also promote accountability on the part of decisionmakers.
this work bridges this gap by means of a large scale study that unearths the rationale behind decisions from python development email archives comprising about .
million emails.this paper makes two main contributions.
first it makes a knowledge contribution by unearthing and presenting the rationale behind decisions made.
second it makes a methodological contribution by presenting a heuristics based rationale extractionsystem called rationale miner that employs multiple heuristics and follows a data driven bottom up approach to infer the rationale behind specific decisions e.g.
whether a new module is implemented based on core developer consensus or benevolent dictator s pronouncement .
our approach can be applied toextract rationale in other ossd communities that have similar governance structures.
index t erms open source software development ossd decision making python rationale causal extraction heuristics rationale miner i. i ntroduction one of the key factors of a successful open source software oss project is its underlying governance mechanism.
decision making processes are important governance artefacts that articulate how decisions are or should be made within an organization.
these decision making dm processes often lie hidden i.e.
implicit within large amounts of data andhence may not be known to everyone in a transparent fashion .
while there have been efforts to unearth these decisionmaking processes the rationale depicting how certaindecisions were made are not made explicit in the dm processmodels.
the merriam webster defines rationale as the the explanation of controlling principles of opinion belief practice orphenomena or an underlying reason.
however the literature on rationale identification and extraction in oss design has highlighted that the focus has mainly been on thedecisions themselves i.e.
what these decisions are not on how they are made.
thus the focus of this work isextracting the rationale behind how actually these decisions aremade i.e.
decision making constructs such as consensus and bdfl decree .
we chose python as a case study as this ossdcommunity is known to follow good governance practices .
the python language is modified and evolved by means of formal python enhancement proposals peps .
there might be different rationale for accepting or rejecting a pep .
for ex ample the rationale behind pep s acceptance was basedon the favorable feedback guido has accepted the pep forpy2.
whereas for pep the project leader referred to as the benevolent dictator f or life orbdfl responded despite the negative feedback i ve decided to accept the pep .
these rationale containing sentences are hiddenin email discussions inside email repositories particularly the python dev repository of core developer discussions.
this work aims to bridge the gap by extracting rationale for decisions made during the evolution of python.
we propose an approach called rationale miner which is a heuristics based rationale extraction system and use this approach to extract rationale.
thus this paper makes two key contributions i a methodological contribution in the form of an approach orframework that can extract rationale that lie hidden in python repositories and ii a knowledge contribution in the form of the rationale behind decisions that were made.
this paper is organized as follows.
section ii provides a background of relevant work and also presents the research questions.
section iii presents the methodology used to extractrationale.
section iv presents the results followed by a discussion of contributions in section v. section vi presentsour conclusions.
ii.
b ackground and research questions only recently have researchers explored the actual decision making processes that lie hidden in oss repositories.the first focus had been the extraction of high level decisionmaking processes in the form of a process diagram.
prior studies and extracted the decision making process model using structured fields within messages from the pythoncheckins mailing list.
the process extracted by study in showed main states that a python enhancement proposal ieee acm 43rd international conference on software engineering icse .
ieee pep goes through.
peps are documents that capture all the major proposed changes to the language and also the processes that python developers should adhere to.
wheneverpython community members want to enhance the languagewith a new idea feature or patch they propose it via apep .
these proposals remain in a particular state e.g.
draft until a decision is made to move it to another state e.g.
accepted .
the official python documentation showed eight decision making states for the pep process presented in pep1 as shown in figure .
based on mining python repositories prior work obtained five more decision making states in the python dm process.
subsequently some researchersrecently extended this study by extracting sub states between the main states .
their work revealed a richer and more complex decision making process that encompassed sub structures such as voting and consensus formation phases.however a limitation of these prior works is that they did not capture the rationale behind state transitions.
in other words they did not answer the question what is the rationale for a transition between states?
for example how did a pep move from draft toaccepted state while another moved from draft torejected?
was it through consensus orbdfl decree?
fig.
.
decision making process used in python enhancement proposals .
as previously noted the rationale behind state changes in ossd communities are often hidden inside email repositories.
identifying and extracting rationale from email messages is a challenging task for two reasons.
first mailing lists are informal communication channels and the rationale for state changes are thus often discussed in an informal way.
thereare no prescriptions or structure around how decisions shouldbe communicated.
thus rationale must be extracted from ambiguous and incomplete messages which is a challengingcomputational task.
even a researcher armed with human intuition would need to manually analyze all the messagesfor a given pep and read the important messages severaltimes in order to understand the underlying rationale for a decision.
second the underlying rationale for how decisionsare made can be spread across many different email messages.
these may need to be identified and linked in order to extractrationale.
this paper aims to overcome these challenges.
toward this goal this work poses three research questions rqs .
rq what are the different rationales for pep decisions and their prevalence as evident in pythonemail archives?
rq how can we design and develop an automated approach that extracts the rationale for pep decisions?
rq how effective is our approach at extracting the rationales behind pep decisions?
iii.
m ethodology with regards to rqs figure depicts the approach that we used to extract and present the rationale for decisions made during python s evolution.
this is embodied in a heuristics based rationale extraction system called rationale miner.
our approach comprises nine steps as outlined below.
.
ranking module ranks candidates based on sbs and mbs rationale identification and ranking .
extracting ground truth actual rationale sentences rationale miner gui .
ranked candidate rationale sentences and messages .
candidate rationale sentence extraction using patterns heuristics .
extract emails exchanged during decision making stage data extractionmysql database proposals .
email messages from dm forums .
peps github .
pep states states mailing lists e.g.
python dev emails .
evaluate ranked results by comparing against ground truth fig.
.
methodology used to extract rationale behind pep decisions.
step the first step was to download all the peps which were accepted orrejected.
among other details the pep includes its author and bdfl delegates if any whomade the final decision on the pep .
we obtained the pepsfrom python s github repository 1and stored it in a database.
step next we retrieved all the main states that each pep transitioned through .
this information was extracted for all peps from python s github repository which includes all versions of every pep document.
these documents containtwo key details i the next transition state of a pep from itscurrent state e.g.
from draft toaccepted and ii the date of the change.
we extracted github data for python state commitsfrom its inception march through to 12th july .this end date was chosen because that was the date when thebdfl resigned marking the end of benevolent dictatorship governance model.
step we then extracted all individual email messages from the python email archives and stored them in a mysql database.
we used the following email archives python dev python ideas python commits python checkins pythonlist and python patches.
these six mailing lists were chosen as they are the leading forums for python developer discus sions with python dev being acknowledged as the main forum 1e.g.
pep 1009to discuss pep development.
the resulting dataset contained a total of email messages.
during this step we also assigned a pep number to email messages where possible.this was achieved by running a procedure that identifiedmentions of the pep number s or title s within a message and stored this as a field in the database alongside other detailsof a message author date etc.
.
step from all the email messages stored in the database we selected only those that related to pep decision making i.e.
emails that had successfully been assigned a pep number.
step next we extracted the ground truth i.e.
the actual rationale behind pep decisions from the email messages of each pep .
this ground truth will be used to answer rq1 and also to identify patterns of how rationale are stated whiledesigning the automated rationale extraction approach.
wealso use this result to evaluate against the results of the rationale miner tool.
our approach in compiling the ground truth is explained in section iii a. step in this step we identified a set of heuristics that could be used to separate rationale containing sentences from non rationale containing sentences.
scores were assigned to individual heuristics and each sentence was assigned anaggregate heuristic score based on how well it matches the with relevant heuristics.
these heuristics and the relevant operational details to extract candidate rationale containingsentences are described in detail in section iii b. step the goal of this step was to rank candidate rationalecontaining sentences using two schemes a sentence basedscheme sbs and a message based scheme mbs .
in sbs candidate rationale containing sentences from the previousstep were ranked based on their heuristic score.
in mbs candidate sentences were aggregated at the message level and the ranks of the messages were computed.
the ranksindicate the position of a sentence or a message respectivelyin the rank ordered output with the top ranks having thehighest heuristic score for containing rationale.
sections iii b1 and iii b2 explain these two approaches respectively.
step next we evaluated the performance of the sbs and mbs by comparing their rank ordered results with the ground truth step .
this is discussed further in section iii d. step the final step was to present the rank ordered results for both sbs and mbs in a graphical user interface gui .
the gui can be used to browse the ranked results to examine and understand the rationale behind a particular decision.this is discussed further in section iv b. subsequently we also obtained feedback from a former python steering councilmember who was closely involved in decisions made in pythonwhich are presented in section iv.
a. extracting ground truth to achieve our goal of automatically extracting rationale sentences we had to create a ground truth dataset comprising rationale for decisions that were made.
to obtain the ground truth we conducted an in depth manual exploratory analysis of email messages spanning multiple mailing lists relating to all peps that reached either the accepted peps or rejected peps states.
the first author read the correspondingmessages and identified the rationale behind why each pepwas accepted or rejected.
a custom built gui tool 2was used for this purpose which retrieved all messages for a pep in date order.
we examined messages for each pep paying particular attention to their decision date in order to understand howthe discussions unfolded and how the final decisions weremade.
when rationale for decisions were found e.g.
decision made based on consensus amongst developers the rationale containing sentences and the messages containing them weremarked as ground truth data.
of the accepted peps had an explicitly stated rationale for acceptance.
we manually extracted rationalesentences from unique messages relating to these peps.for some peps we found multiple rationale sentences.
of the96rejected peps had an explicitly stated rationale for rejection.
we manually extracted rationale sentences from97 unique messages relating to these peps.
this gave us a ground truth dataset of rationale sentences relating to peps.
all rationale sentences in the dataset were verified by the second author i.e.
consensus .
the next section describes how we automated the process of rationale extraction as manually extracting rationale from large datasets is laborious and time consuming.
the firstauthor spent three months full time on the exploratory analysis described in this section.
this required reading most messages relating to the peps with some messages requiringmultiple readings to fully understand the nuances.
b. heuristics based approach to extract rationale we used the heuristics based approach to address the complexities of identifying rationale containing sentences.
in the literature on software design decisions rationale extraction a number of heuristics have been proposed tobe used in different contexts.
for example the work in identifies users rationale for writing app reviews.
the work ofwilliams et al.
have employed heuristics to extract argu ments in software engineering practitioners blogs.
however these works do not identify and extract the rationale behind how these decisions are made in the oss development context using a data driven approach.
our approach developed as the rationale miner tool uses heuristics that were indicative of rationale on how pep de cisions are made grouped into five categories.
these heuristicswere identified mainly from the literature and supplementedby our personal experience with manual rationale extraction from pep messages.
these heuristics were used to create ascoring function that is used in both the sbs and mbs.
sentence based scheme sbs sbs considers five categories of heuristics to compute the heuristic score of a sentence.
category term patterns.
this category comprising three heuristics considers whether a sentence contains certain 2a screenshot of the tool used to analyze messages can be viewed at 1010patterns of terms3that indicate the presence of a rationale behind a pep decision accordingly the pep was rejected due to the lack of an overwhelming majority for change.
here the term pattern is made up of three term types in brackets and the rationale for the decision lack of majority can be clearlyinferred.
these term patterns can appear in the sentence currently being considered represented bythe heuristic term pattern in current sentence tpcs the remainder of the paragraph following the current sentence represented by the heuristic term pattern in rest of paragraph tprop and the subject line of the message containing the current sentence represented by the heuristic term pattern in message subject tpms .
these three heuristics play an important role in determiningwhether a sentence may contain rationale.
the scores assigned to the different term patterns range between and .
.
3three of the six terms listed in the link in the footnote above were inspired from the literature on rationale identification.
theseare reason identifier entity and decision terms from the works of .
category proximity based heuristics.
we have also identified heuristics that are based on proximity.
these includethe location of the email message in relation to the pep s evolution and the location of a sentence within a message.
this category also comprises three heuristics.
days from state commit dfsc based on our manual analysis we found that messages containing rationale tended to appear closer to the dates of making decisions.
when adecision is made e.g.
a pep going from draft toaccepted these state changes are reflected in the pep document committed to the version control system.
messages for a pep that arecloser number of days to the date of the commit recording the pep s acceptance or rejection are assigned a higher score.
sentence location in message slim research has shown that the first sentence in a paragraph always introduces the main topics of the paragraph while the last sentence inmany instances summarizes what the paragraph discusses .
we found evidence of this in our manual analysisof emails where sentences located in the first or second paragraph conveyed the main idea of the message while thelast paragraph placed emphasis on what had already been said.therefore in our heuristics scheme if a sentence is in the first or last paragraph of a message that sentence is assigned ascore of .
for this heuristic otherwise .
negation terms nt as pep generally undergoes several rounds discussion negation terms such as may not and should not are generally used in earlier stages of the pep not the final pep decision.
they change the meaning of a sentence.
therefore if a sentence contains such terms it is assigned a .
negation penalty that reduces its total score.
3the full list of rationale term types their patterns and scores see role based heuristics.
a number of fields in an email message can play a role in identifying a rationale sentence.
we group them into three types each representedby a corresponding heuristic.
message type mt from our findings there are three types of email messages related to a pep the official pepsummaries pep state commit messages and all other messages pertaining to the pep .
the pep summaries are official summaries that reflect on the pep written after a decision has been made and placed on the python website.
4state commit messages reflect state changes e.g.
draft toaccepted as previously mentioned.
if a sentence belongs to one of these two message types it has a higher chance of containing arationale and is therefore assigned a score of .
otherwise it scores .
author role ar during the different stages of a pep s evolution various members of the python community writedifferent types of email messages for a pep .
however mes sages containing decisions and their rationale are usuallywritten by certain roles.
if the message is from the bdfl or bdfl delegate who may differ for each pep the sentences in the message are assigned a score of .
for this heuristic.if the message is from a pep author then this heuristic is assigned a score of .
.
if the message is from a pep editor who are mainly consulted in the earlier stages of the pep evolution the score assigned is .
while messages fromacore developer score .
.
a score of is assigned to this heuristic if the message is written by anyone else i.e.developers or users .
this heuristic is inspired based on prior works that have considered the roles playedby individuals e.g.
author of a message .
specific author messages containing explicit rationale samcer this heuristic identifies messages that contain specific hints about rationale.
pep author s message containing rationale when a pep author feels the pep is nearing completion they write a message formally requesting a review and pro nouncement on the pep .
the community s consensus on the pep is sometimes mentioned in this message for example as you said consensus is reached so just guido s bdfl stamp of approval is all i can think of .
here consensus has been reached in thecommunity and the pep is waiting for a pronouncement from the bdfl.
the rationale for the pep s eventual approval is the indicated community consensus.
bdfl or bdfl delegate pep review in messages preceding formal acceptance of the pep the bdfl ordelegate may mention their rationale for future accep tance.
for example assuming no material objection appear to the new syntax and semantics i can approve the pep later this week .
this pep wasaccepted few days later the rationale being that the com munity had no further objections i.e.
lazy consensus .
4e.g.
for pep bdfl or bdfl delegate pep acceptance or rejection the bdfl or delegate formally accepts or rejects the pep but the rationale for acceptance is not explicitlymentioned.
for example given the feedback so far iam happy to pronounce pep as accepted .
inthis case the pep was accepted because of communityconsensus which is implicit in the sentence.
community members reflecting on decisions sometimes a core developer would mention how a pep was receivedby the community either while summarizing the pep ordiscussing the decision later on.
for example raymondsuggested updating pep integer for loops butseveral people spoke up against it including guido so the pep was rejected .
if a sentence belongs to a message from one of these four types it is assigned a score of .
otherwise .
category response to certain specific messages.
this category comprises two heuristics related to specific messages.
response messages to the same state change message rmsscm if the pep author requests pronouncement based on feedback received from the community for example by stating there were no outstanding issues it is likely that the reply message will contain the rationale for the subsequentdecision.
therefore we assign a higher score to messages withthe same subject line.
this heuristic was inspired by a similar heuristic used by abdelrahman et al.
.
rationale f ound using triple extraction rfute in our previous research work we used subject v erb object s v o triples to identify decision making sub states thatoccur between the main states shown in figure .
in our manual analysis we observed that we could automatically identify some sentences as rationale containing sentences via the s v o triples they contained.
for example the s v o tripleextracted from the rationale sentence as you said consensusis reached so just guido s bdfl stamp of approval is all i can think of is which impliesconsensus.
we therefore adopted this approach to identify and match s v o triples where certain decision specific terms such as consensus were included in the triples.
sentenceswhere such s v o triples were extracted and matched were assigned a score of .
otherwise .
category special identifiers.
based on our analysis of pep email messages we included two additional heuristics for special identifiers that exhibited rationale behind state changes.these heuristics have not been previously reported in the literature on rationale identification.
decision terms in message dtim on some occasions members inserted a heading before the paragraph that stated the rationale for pep acceptance or rejection.
examples in clude bdfl pronouncement pep acceptance and pep rejection .
we consider these as terms that convey decisions and therefore any sentence containing such terms is assigneda score of .
for this heuristic otherwise .
decision terms as header of current paragraph dthp if the decision terms identified above exist as the heading of the paragraph that contains the sentence currently beingconsidered we assign a score of .
for this heuristic to all sentences in that paragraph.
the final scoring function.
the final score fs for each sentence is the sum of its scores for all heuristics fs tpcs tprop tpms dfsc slim nt mt ar samcer rmsscm rfute dtim dthp the sentence scores of all sentences belonging to a pep are compared in order to produce a descending rank ordered list of candidate rationale containing sentences.
message based scheme mbs in the sentence based scheme candidate rationale sentences from the same emailmessage may appear in different rank ordered positions asthe rationale may be present in multiple sentences.
however a user may prefer to see results from the perspective of theentire message containing these rationale sentences.
mbs isa message level aggregation of the sbs.
this approach has two advantages.
first it prevents multiple rationale sentencesfrom the same message being shown in different rank ordered positions so that users can view related rationale sentences inthe context of the same message.
this will reduce the effort required for the user to scroll through the list of rationalesentences.
second and more importantly it shows the entire message which may provide a richer context around the rationale for the candidate rationale sentence.
the evaluationof these two approaches is presented in section iv c. c. heuristic optimization based on ground truth after identifying the heuristics described above we undertook two pronged optimization identifying the heuristics variables that strongly influence the identification of rationale and using parameter sweeping to find the best values for these variables.
we describe these two aspects next.
having set values for the heuristics to initial values as described in the previous section we computed the scores foreach sentence in all the emails.
then we computed the total number of sentences that were correctly identified in the top 5results in the sbs scheme by checking whether a rationale containing sentence from the ground truth set appeared inthese results.
having computed this result which we call thebaseline result for optimization purposes we systematicallyremoved one variable at a time and compared how thatimpacted the overall results.
the goal of this approach was to identify variables that strongly influence our results.
identifying influential heuristics table i shows the number of fewer or additional rationale sentences captured at top ranks for accepted and rejected peps in both the sbs and the mbs after removing each heuristic from the fs.
the negative values indicate the removal of the associated heuristic decreases the number of rationale sentences captured thus it has a positive influence.
the influence of the variables aredivided into five groups as shown in table i. the positive influential heuristics were rfute and tpcs both strong .
when these variables were removed the results 1012table i rela tive contribution of heuristics in top 5rankings sbs mbsinfluence heuristics acc.
rej.
acc.
rej.
rfute positive strong tpcs dfsc positive medium dtim samcer 0mixed strong m t tpms dthp 1mixed weak ntp tprop slim none ar rmsscm were negatively impacted e.g.
up to results not appearing in the top results .
dfsc and dtim variable had a medium positive influence on the results.
the heuristics that hadmixed but strong influence were samcer mt and tpms.
their influences on both types of peps and in both schemes were strong but varied i.e.
values are positive at times and negative at other times and thus were of particular interest during optimisation see next paragraph heuristicswith weak mixed influence or those with almost noeffect the top rankings were dthp ntp tprop slim ar and rmsscm.
parameter sweeping for the seven variables that either had positive influence or mixed influence we performed parameter sweeping a technique widely used in simulation systems to identify the best values for the variables by changing the values in increments of .
.
five values wereconsidered for each heuristic .
.
.
.
.
we varied one heuristic at a time by keeping all the values of all the other heuristics the same.
this approach enabled us to find the best configuration of values for the chosen heuristics by comparing the results obtained by a configuration withthe ground truth results.
adopting this approach we foundthat for both sbs and mbs generally our current dfsc and tpms heuristics values needed to be incremented by .
.
changing the values for the other heuristics made nosignificant difference.
hence the results reported in sectioniv are based on the best configuration for these heuristics.
d. evaluating the heuristics based approach we compared the results obtained using the heuristics based approach against the ground truth using two methods.
first we compared the rank ordering of sentences and messages.if a sentence was identified in the ground truth dataset as a rationale containing sentence for a particular pep we checked the rank of the same sentence and its corresponding message in the heuristics based results.
if there was only one rationale sentence for a pep in the ground truth dataset then the idealresult would be that the heuristics based approach assignedthe highest score i.e.
highest rank to that sentence and itscorresponding message.
we therefore quantified the numberof sentences and messages that matched at various ranks.
second we used the normalized discounted cumulative gain ndcg metric a metric commonly used in the information retrieval domain to evaluate the ranking results for a query in relation to the perfect ranking for the same query .it has for example been used to evaluate an email ranking system based on search query results .
in the context ofour work most peps have one or two rationale sentences.
iffor instance these are not captured in the top two ranks the ranking quality for these two positions will be penalized by this approach.
ndcg is calculated using this formula ndcg k dcg k idcg k where idcg kis the ideal dcg value based on its definition in of the ranking at position k that is the dcg value of the ground truth.
ndcg is normalized to the interval with indicating a perfect estimation of the ground truth.
iv .
r esults this section presents the results for the research questions.
a. rq1 rationales for pep decisions figure shows different decision rationales for accepted and rejected peps that have been unearthed in our qualitative analysis.
these are based on the ground truth rationalesentences we manually extracted.
5table ii gives examples of rationale sentences corresponding to each of these rationale.
consensus lazy consensusinept peps bdfl decreebdfl p. after no consensuslittle supportrough consensusno consensusmajority no majoritybdfl p. over majorityaccepted rejected fig.
.
rationale for accepted and rejected peps.
the horizontal axis shows the rationale and the vertical axis the number of peps.
the top rationale for decisions were consensus lazy consensus inept peps bdfl decree and bdfl pronouncement after no consensus amongst developers .
inept peps is an aggregate of eight rationale that represent a problem with a pep such as pep benefits marginal requires significant changes etc.
bdfl decree refers to instances where the bdfl makes a decision regardless of the 5a spreadsheet containing the raw data for these sentences can be viewed at 1013table ii sample sentences containing ra tionale behind decisions on accepted and rejected pep s rationale rationale sentence pep consensus the user community unanimously rejected this so i won t pursue this idea any further no consensus although a number of people favored the proposal there were also some objections lazy consensus if anyone has objections to michael hudson s pep raise them now.
rough consensus several people agreed and no one disagreed so the pep is now rejcted.
little support it has failed to generate sufficient community support in the six years since its proposal.
majority comments from the community the response has been mostly favorable .
no majority accordingly the pep was rejected due to the lack of an overwhelming majority for change.
bdfl decree after a long discussion i ve decided to add a shortcut conditional expression to python .
.
bdfl p .
after no consensus there s no clear preference either way here so i ll break the tie by pronouncing false and true.
bdfl p .
over majority python is not a democracy.
most of these statements were made by the bdfl directly or are