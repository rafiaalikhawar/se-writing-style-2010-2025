iot bugs and development challenges amir makhshari university of british columbia vancouver bc canada amirosein ece.ubc.caali mesbah university of british columbia vancouver bc canada amesbah ece.ubc.ca abstract iot systems are rapidly adopted in various domains from embedded systems to smart homes.
despite their growing adoption and popularity there has been no thorough study to understand iot development challenges from the practitioners point of view.
we provide the first systematic study of bugs and challenges that iot developers face in practice through a large scale empirical investigation.
we collected bug reports from representative iot project repositories and categorized a random sample of based on the observed failures root causes and the locations of the faulty components.
in addition we conducted nine interviews with iot experts to uncover more details about iot bugs and to gain insight into iot developers challenges.
lastly we surveyed iot developers to validate our findings and gain further insights.
we propose the first bug taxonomy for iot systems based on our results.
we highlight frequent bug categories and their root causes correlations between them and common pitfalls and challenges that iot developers face.
we recommend future directions for iot areas that require research and development attention.
index terms internet of things software engineering mining software repositories empirical study i. i ntroduction internet of things iot envisions a self configuring adaptive and complex network that interconnects smart objects embedded with sensors or actuators to the internet through the use of communication protocols .
by gartner estimates that smart inter connected devices will outnumber humans to and it is estimated that by there will be over .
billion smart things worldwide .
these smart things can be programmed and remotely controlled to collect their data or to control their actions.
programming physical devices with constraint resources dealing with diverse network protocols and the integration of diverse entities in iot systems add unique characteristics to the challenges of developing such systems.
driven by the above considerations the concept of bugs in iot is more complicated than traditional software.
previously some studies have investigated the characteristics of iot repositories and discussed some challenges of iot systems .
existing research on bug categorization is limited to specific sub domains of iot such as bugs in smart aquaculture systems bugs in iot device operating systems or bugs uncovered during the deployment of iot systems .
while more mature software domains have benefited from empirical and qualitative studies on their bugs and developerchallenges no such study is available for iot to the best of our knowledge.
in this paper we provide a generalized and systematic overview of bugs and developer challenges in iot systems.
in order to do so we mine iot github repositories and collect bug reports from representative iot projects.
by applying root cause analysis rca we categorize a subset of bug reports considering the observed failures root causes and locations of the bugs.
we propose the first taxonomy of bugs in iot systems which is constructed by analyzing these real world iot bugs.
to complement the taxonomy and study the challenges of iot developers we conducted semistructured interviews with nine iot practitioners that have hands on experience in different layers of iot.
lastly we validated our findings through an online survey that was completed by iot developers.
the contributions of this paper are an empirical study to understand iot failures and their root causes in practice the first iot bug taxonomy an overview of state of the practice challenges faced by iot developers our findings show that general development issues device management issues and messaging issues are the most frequent bug categories.
furthermore the most frequent root causes of bugs are software programming faults semantic faults and dependency faults.
in addition we highlight the challenges of iot developers in various areas such as testing debugging and dealing with heterogeneity and security in iot.
ii.
b ackground and motivation figure shows a typical architecture of an iot system .
device layer.
the device layer at the bottom includes smart programmable things interacting with the physical world through their embedded sensors and actuators.
some iot devices employ light embedded operating systems e.g.
contiki riot tinyos that have support for various programming languages allowing developers to write embedded code on top of the device os while bare metal iot devices run the embedded code directly on their hardware processor.
edge layer.
this layer contains gateway devices with fewer resource constraints with the ability to handle telemetry data collection processing and routing locally on the edge.
ieee acm 43rd international conference on software engineering icse .
ieee failur e f2 android app crashes after trying to turn of f d3.
f2 candidate cause compatibility issue of the home automation server and g2 f1 candidate cause device payload data format d1 d2 d3f1 f3 root cause bug in the firmware of the gateway device g2 g1 f1 candidate cause device gateway pairing process deviceedgecloudapplication failur e f3 d3 has been misidentified by the g1 gateway .
f1 f3 solution reset the gateway and lamp and pair them again.
failur e f1 android app shows d3 as a sensor instead of a lamp.
f2 root cause bug in the android app codefigure a typical layered architecture of iot systems and an example of an iot bug gateway devices can handle the device device and devicecloud interoperability by interpreting diverse communication protocols such as mqtt coap and http .
cloud layer.
remote iot cloud servers accumulate and process all telemetry data and communicate with heterogeneous iot devices to control and monitor them remotely.
iot cloud servers rule engine lets users write automation logic between iot devices to define interoperability behaviours of the iot system .
motivating example.
we use a real iot bug to motivate our study of bugs and developer challenges in iot systems.
figure shows on the right side the steps that iot developers have taken to find the root cause of the bug report pytradfri .
this bug occurred in a smart home environment where different devices should be connected to a home automation server with the help of a gateway device.
based on developers discussions the first manifestation of this bug happens at the application layer.
a light bulb device d3 is mistakenly recognized as a sensor device f as the user adds it and also the android app crashes f once it tries to turn the light bulb off step and .
initially the developers suspected the root cause of the bug to be the incompatibility of a gateway library with the home automation server step .
however further investigation of the failure in the edge layer step revealed that the gateway misidentifies d3 as a remote controller f .
since the gateway in this system relies mainly on a specific format of response data from devices to identify their types properly potential inconsistencies of the payload data from the subject device were also investigated step .
also since the device battery and distance to the gateway could affect the pairing process developers tried pairing in different circumstances step .
after none of the candidate causes showed as the potential reason for the bug the root cause was identified as an external bug in the firmware of the g2 gateway device step and resetting both the device and the gateway and pairing them again solved the issue step .
but surprisingly f 2continued to exist.
after monitoring thedata that the app receives via wireshark the root cause of f was identified as a fault in the android app code step .
as we can see in this example distribution of failures and candidate causes in different layers dealing with behaviours of diverse devices such as comparing their payload and depending on naive debugging practices such as monitoring network traffic make it extremely hard for developers to deal with iot bugs.
despite these compelling challenges previous studies do not take into consideration realworld experiences of iot developers.
in this paper we aim to provide a systematic and generalized understanding of bugs and challenges in iot by mainly considering iot developers experiences.
iii.
m ethodology our goal is to characterize software bugs in iot systems and understand the challenges developers face in practice.
to this end we address the following research questions in this work rq1 what are the classes of bugs in iot systems?
rq2 what challenges do iot developers face in practice?
in order to answer these questions we conduct an empirical investigation consisting of two phases.
in the first phase rq1 we analyze issues and pull requests pr from opensource iot projects.
we use the findings to form the first taxonomy of bugs in iot systems.
in the second phase rq2 we conduct a qualitative study through semi structured interviews with iot developers to discover new categories of bugs and challenges a survey of iot developers to validate the findings and gain new insights.
all our quantitative and qualitative data is available online .
a. iot bug categorization collecting bug reports.
the initial step is to find repositories that are representative of iot projects.
we employed the github topic feature to find iot related repositories.
according to github s official website topics are labels that create subject based connections between github repositories.
we searched among topics with related keywords such as internet of things and iot and we added the top three topics iot application iot platform and iot device from the results to our list of targeted topics.
initially we collected repositories using these five topics in january .
we excluded repositories with less than stars resulting in repositories to consider.
to only consider valid bugs we looked for issued bug reports with only closed status and with bug defect or error labels.
moreover to select only representative iot repositories for our study we manually analyzed repositories that have more than five labeled issues or more than closed issues based on the information in their readme page issued bug reports and their website when available .
we then excluded projects that were not representative of iot systems such as user interface documentation or outdated repositories.
our final project list contained open source iot repositories to analyze.
for five repositories that use custom labels e.g.
problems kind bug type bug we manually added their labels to our search keywords.
in the end we collected bug reports from the iot repositories.
our subject iot repositories together cover all the layers of the iot systems architecture depicted in figure .
the most popular programming languages among the subject repositories are python java javascript c and c .
a few of them use other programming languages such as go ruby and c .
the selected repositories are also diverse in terms of the number of stars and forks they have.
in february of of our subject github repositories had more than stars between to stars and between to stars.
labeling.
for each bug report in our dataset we created a json object containing failure s cause s of the failure and location s of the faulty code.
failure refers to any observable unexpected behavior of the system that is against the correct functionality of that system .
to explore the causes of the failure we did rca on each bug report using the five whys technique .
based on this technique multiple causes can contribute together or at different levels to a visible failure in the system.
following this approach we started from the failure and repeatedly asked why until we reached the root cause of the problem.
in the case of software failures root causes are often developers faults in the design or implementation of the iot system.
to label the location s of faults we used the architecture defined in section ii as our reference.
bug reports were manually labeled by the author s individually following the open coding procedure .
we followed an iterative process for labeling where in each iteration we randomly sampled new instances from the collected bug reports and labeled them.
after each labeling iteration all potential conflicts in labels between the author s were resolved.
we continued this process until bug categories reached a state of saturation where no new category appeared .
we also flagged and discarded issues and prs that could not represent a bug or a bug fix such as enhancements or howto use questions.
we examined the entire discussion among developers as well as the fix commit data e.g.
the commit message and the code diff to label each bug report.
at the end we labeled bug reports .
table i interview participants id role iot systems type projects domain dev exp yr iot dev exp yr p1 software and hardware lead full stack smart home p2 hardware lead hardware education p3 software dev full stack smart home p4 software dev middleware smart city p5 software lead full stack smart home p6 software dev cloud not domain specific p7 software and hardware dev full stack smart home p8 software lead full stack smart home p9 software lead cloud not domain specific b. interviews while manual analysis of bug reports and developers discussions provided useful insights into the characteristics of iot development there was still a possibility that our analysis was restricted to only code level issues and we might misshigh level problems of iot developers.
to mitigate this issue we conducted semi structured interviews with iot developers to reveal new bug categories and collect their development challenges to complement our results.
participants.
we used purposive sampling to recruit developers with adequate experience in developing iot systems.
to collect interview participants we employed github as it provides a diverse pool of developers and their contributions to different projects.
we obtained valid email addresses of only the top three contributors to popular open source iot repositories as our candidate interviewers.
we contacted candidates through emails and conducted interviews until we reached data saturation where we had sufficient data to replicate the study and further data collection is unnecessary .
we relied on this widely applied methodological principle to decide when to stop interviewing as it is also used in other qualitative studies in software engineering .
we interviewed people with different development backgrounds and experiences before deciding about the data saturation to consider variability in experimental results across different populations .
table i presents all nine interview participant s experience and field of expertise in iot development.
for a high level picture of their general development background the lowest value is three years and the highest value is years avg sdv .
.
in terms of iot development experience the lowest value is three years and the highest value is years avg .
sdv .
.
participants iot development experience covers all sections of iot systems spanning from hardware to middleware cloud and end applications.
in addition their projects cover a variety of domains such as smart home and industrial iot iiot .
protocol.
since our goal for conducting interviews was to be open to new data and we did not have the definitive structure of bug categories we conducted interviews following a semistructured approach.
interviews started with some questions about participants iot development background and their field of expertise in iot.
this information could help us improvising insightful questions during the technical section of the interviews.
the technical section had a combination of both open ended and specific questions about different categories of bugs and challenges in iot development.
our strategy was to start with open ended questions to avoid biasing participants toward our findings and then we gradually shifted to more structured and predefined questions during the interview process.
with participants consent we recorded the audio and video of all the interviews for later analysis.
all the interviews were conducted remotely through zoom.
interviews took around minutes on average ranging from minutes.
we used descript an automated speech detection tool to generate transcribes of the interviews and we did manual corrections afterward in case of any mistakes in the automatically generated transcripts.
analysis.
as the primary objective of this study is to generate theories from the experiences of iot practitioners instead of 462using pre conceived theories we followed the grounded theory methodology to ensure the quality of the generated theory.
our analysis steps consist of iteratively i collecting qualitative data from the interviews ii analyzing the interview transcript line by line and assigning labels tags to distinct units of meanings and iii identifying emerging categories and relating categories to their subcategories while continuously comparing all the previously analyzed data with the emerging theories.
these steps were repeated for each interview.
on average we extracted tags per interview.
potential conflicts in the labels were resolved after each iteration by the authors.
c. validation survey in order to make sure that our findings are generalizable comprehensive and representative we involved more iot developers through an online survey.
participants.
we sent our online survey to developers that have made at least three contributions to the collected iot repositories in subsection iii a and to iot developer groups in social media platforms such as linkedin and facebook and online forums.
our survey was online between july and august .
the survey as distributed to participants is available in our artifact package .
a dev experiencegeneral deviot dev less than year1 years3 yearsmore than years c expertise hardwaremiddleware cloudapplications b occupancyresearcherindustrial developerfreelance developer d domainindustrial homehealthcareeducationretailtransportationagriculturenot domain specific figure development backgrounds of the survey participants protocol.
the survey has three sections.
in the first section we collect participants background in iot and in general development which is depicted in figure .
the second section concerns the challenges of developing iot systems with questions aimed at correlating our findings with the participants own experiences.
the third section is about the frequency and severity of bug categories based on participants previous experience in iot development.
at the end of each section there are openended questions to allow them to share their comments about our results and mention new categories.
analysis.
our survey was completed by respondents with a response rate of around for valid responses.
we received comments through the open ended questions sections.
all of the survey respondents comments are coded and analyzed following the same procedure discussed in subsection iii b.iv.
f indings iot b ugcategories rq1 in this section we describe our findings regarding iot bugs.
a. taxonomy of bugs we used all the tags collected by rca of the bug reports in our dataset to build a taxonomy of bugs in iot systems.
as our motivating example illustrates figure ii iot bugs can be multi faceted and manifest at different layers and locations.
therefore we designed our bug taxonomy to accommodate all these bug characteristics.
considering various approaches suggested by usma et.
al.
for taxonomy construction we followed the approach suggested by kwasnik as iot bugs are multi faceted and relatively a new and unexplored concept.
following their approach we first defined facets of our classification as all failures and locations of failures.
then we analyzed all bug reports based on these facets and built a hierarchical taxonomy that accommodates all the dimensions.
after we built the initial version of the taxonomy we used the data from the interviews and the survey to complement and enhance the taxonomy.
we reviewed all previously tagged data and re tagged them after each alteration of the taxonomy.
figure depicts our iot bug taxonomy.
next we describe the major bug categories in our taxonomy.
we will use specific bugs as examples for each category.
all these bug examples are available in our dataset which is available online .
iot device.
this category of taxonomy covers bugs that are related to iot device hardware and firmware.
device hardware bugs in this subcategory are related to the physical aspects of iot devices.
examples include bugs related to wiring issues device pin status issues or issues with physical sensors and actuators of the device.
for example pedalinomini is related to the device not differentiating between single and double presses of a hardware button.
other common bugs in this category are those that are linked to the device s limitations in memory power consumption or processing capacity.
one such instance provided by p 1as he described a scenario where a device on low battery generated incorrect data to the cloud.
there are various similar cases in our collected bug reports where the low battery of the device or the removal of the power source of the device causes failures.
in addition heavy calculations and processing on the device homie esp8266 interviewee p or running out of memory zwa ve2mqtt interviewee p are other examples of bugs related to this category.
another example of known hardware issues of iot devices is the timing issues of raspberry pi devices which is also mentioned by an interviewee p .
device firmware firmware bugs consist of three subcategories.
the first pertains to device firmware unexpected exception and hang issues.
the second sub category includes issues related to the configuration of the iot device which can be specified as an external instruction sent to the device for a specific purpose.
this type of bug usually happens in the early stages of introducing an iot device to the iot network.
each device has to be configured properly in a way to be 463compatible with other hardware or software components and also be able to communicate with others on the network.
issues associated with configuring the device with wifi credentials or with configuring the device with the correct firmware version are some common examples here.
the third and most common sub category is the firmware upgrade issue.
there are various cases where poor practices for handling over theair ota updates of the device firmware stale updates or updating the device firmware with the wrong binary have caused failures of the iot system.
in some cases the stale update issues are related to device configuration issues as in wthermostatbeca where the device needs to be reconfigured with wifi credentials after each firmware update otherwise future firmware updates would be stale.
compatibility.
when a bug occurs only on a specific type of device communication protocol or third party component it falls under the compatibility category.
for instance a common device incompatibility issue happens when certain devices represent their telemetry data in different formats leading to the other components not being able to process their data.
other common bugs are linked to compatibility issues of certain combinations of sensors and development boards e.g.
incompatibility of the dht temperature sensor with the esp32 microcontroller in mongoose os .
issues with the interoperability of different protocols is another case.
one example is mainflux which is related to the interoperability between the http and mqtt protocols.
a common bad practice in iot development related to these issues is developing protocol specific or device specific code.
for instance in device os the iot platform relies on event components to report what protocols each event is intended for in order to be able to run different functions for each protocol individually.
however sometimes developers have no other choice but to follow this error prone approach just to bypass the limitations of third party devices.
for instance p mentioned a case where the incompatibility of the raspberry pi and some types of sensors had forced their developers to implement custom logic for the communication of these devices.
developers had to switch between raspberry pi s default implementation and their own custom implementation based on the sensor type leading to many issues.
communication with iot devices.
bugs that are related to the communication of iot devices with each other or with other entities fall under this category.
generally there are two types of bugs in this category device connectivity some of the connectivity issues are related to the network that the device relies on for connecting to the internet.
one example is when the device cannot discover a valid and available network such as a local access point and therefore loses access to the internet.
as it is also mentioned by p when the device location is changed to another room or another building the device has to be reconfigured for the new access point.
in addition to the network discovery not handling a network reset or unstable and unreliable networks are other common issues that canlead to failures.
however sometimes iot devices fail to establish a valid connection to the gateway or remote cloud servers despite a valid network status.
failure in reconnecting connection refreshing and ensuring such connectivity failures do not cause propagated failures in other components are other pitfalls that iot developers often deal with.
additionally unexpected disconnection or connection closure issues are other manifestations of bugs in this category.
two interviewees p6and p believe that connectivity bugs are the most serious and challenging bugs.
as p 9states the weakest part of our iot platform is to communicate with iot devices data and messaging this category includes bugs that are related to data and message sending in the iot system.
typically messages are either commands that are sent to iot devices via the cloud or they are telemetry data that are received from iot devices in the edge cloud or applications.
some bugs cause failures in delivering these messages from the sender to the receiver.
some other messaging bugs are related to the timing of messages.
for instance various reported bugs are related to the rate and order of the messages.
additionally some bugs are linked to the payload that is being delivered through the messages.
in some cases payload size or format are the causes of failures.
there are also cases where there are violations of payload integrity by messages being truncated or overwritten.
cloud edge services.
this category includes bugs that are related to the services delivered by the remote cloud servers or gateway devices in the edge layer.
device management to monitor and control each iot device remotely devices should be connected to a cloud server or a hub device and report their status while listening to user commands.
device management dm issues include problems that cause failures in this process.
the first class of dm issues happens in the stage of initializing the iot device in the cloud or edge systems.
one type of device initialization di issue is when the iot device is not properly or uniquely identified by the cloud or edge components and therefore causes further failures in the subject iot system.
besides if the iot device fails to provide a recognizable identity and valid permissions to the cloud or edge it would not be allowed to use remote services.
some examples of device registration and provisioning bugs are duplicate device certificates issues with auto provisioned devices or failure in retrieving data from the provisioning service.
another class of di bugs is problems with binding association and pairing of iot devices.
there are several cases where bugs are introduced to the iot system just because devices are grouped together such as devices in one room due to not properly handling the association of a sensor device with a physical object.
there is an example mentioned by one of our interviewees p5 where two switches were associated with one lamp and only one switch was working due to issues with addressing multi instance devices with labels.
the second class of dm issues is related to problems with monitoring the status of iot devices.
one type of device status is the connectivity status 464taxonomy of bugs in iot systems communication with iot devicesdevice connectivity networknetwork discovery and set up issuesnetwork reset mode changeunreliable networkconnection establishment issuesreconnection issuesdisconnection issuesdata and messagingmessage payload issuesmessage timing rate ordering issuesmessage delivery issues compatibilitydevice compatibility issuesprotocol compatibility issuesthird party compatibility issuesiot devicedevice hardwareissues related to constraints of devices boot reboot or physical issuesdevice firmwareconfiguration issuesfirmware exception hang issuesfirmware update issues general developmentauth issuesui usability issuesperformance crash issuethird party issuesbuild and installation issuescloud edge servicesdevice management device connection status issuesdevice statusdevice properties status issuesdevice initializationdevice discovery and identification issuesdevice registration and provisioning issuesdevice binding association pairing issuesautomationsrule condition issuesrule trigger issuesrule action execution issuesfigure taxonomy of iot bugs.
465to check whether the device is online which is also known as the heartbeat check.
some examples of bugs in this type are wrong device heartbeat rate showing a lost connection as live and vice versa or not notifying other components when the device goes offline.
failure in retrieving the device status such as color and brightness for a light bulb showing the status incorrectly or failure in updating the device status are some examples of these types of issues.
automation this bug category is related to automation services that iot cloud or edge platforms provide and it is classified into the trigger condition and execution issues.
rule trigger defines a condition under which a rule is initiated.
trigger failures usually cause a rule not to become triggered when it should be smarthome or vice versa homeassistant config .
rule condition is the statement that should be checked when the rule is triggered.
examples of the rule condition issues are problems in retrieving the device state to check the rule condition since the condition usually relies on device latest status tesla api .
issues in the execution of the rule action are the last and the most prominent automation issues.
some examples of these issues are crash after rule action execution issues in handling asynchronous behavior and threads in rules and having problems with the output of the rule being unpredictable or nondeterministic.
general development.
this category captures common development bugs.
some common issues are problems with installing compiling or building a project as well as unexpected crashes or performance issues in the iot project.
the general development category also includes bugs in the authentication or authorization process.
one of the iot specific authorization issues are problems with generating signing or maintaining the certificates that devices have to present for using cloud or edge services azure iot sdk c .
other sub categories of general development bugs are uirelated usability or external issues.
b. characteristics of bugs root causes.
figure shows the distribution of bug categories and root causes.
the most frequent categories of bugs are general development issues device management issues and messaging issues .
in terms of root causes after general software programming faults swp such as syntax issues semantic programming faults sem are the most dominant root causes of the bugs.
some semantic mistakes that iot developers make are wrong control flow functionality logic or return values.
however some of the semantic faults are related to the automation logic of the iot system such as logical faults in automation apps which are also discussed in recent studies .
the next frequent root cause is dependency faults dep where developers use wrong versions of the software or firmware libraries tools devices or protocols.
one of the most important root causes often leading to hardware connectivity and messaging issues are timing faults tm .
improper handling of time outs or rate of operations swphwpsemcnfdepmemconectmdevice hardwaredevice firmwarecommunication connectivitycommunication messagingcloud dmcloud automationcompatibilitydev54013111125 62422515625figure distribution of bug categories vertical and root causes horizontal wrong time out values for connection closures or not handling asynchronous behaviors are among timing related root causes.
some faults that are more specific to hardware programming such as interrupt handling are assigned to hardware programming faults hwp .
faults in handling exceptional cases ec are another root cause for iot bugs that include mistakes in handling corner cases large or out of range data not handling errors properly or not handling changes of the requirements or changes in third party components.
finally the remaining root causes are related to memory faults mem concurrency faults con and configuration faults cnf .
correlations among bug categories.
during our analysis we observed some frequent patterns of certain bug categories appearing together more often.
to study the correlations between bug categories we used lift a statistical metric introduced by han and kamber that computes the probability of two categories appearing together.
for each pair of bug category a lift value of more than shows a positive correlation and a lift value below reveals a negative correlation.
table ii shows the lift values of correlated bug category pairs.
the top correlated bug categories are hardware firmware and .
this correlation analysis besides helping iot developers in debugging gives insight into how intertwined iot bugs can be in practice.
frequency and severity of bugs.
we asked our survey participants whether and how frequently they face each bug sub category and what are their perceived severity based on the impact on the iot system and fixing time.
table iii shows the results.
all the bug categories in our taxonomy have been faced by at least of iot developers which shows the bug categories are representative of the real world bugs in iot systems.
connectivity issues are the most frequent and severe bug category with more than of iot developers have faced it at least once.
466table ii bug categories with positive correlation bug category bug category lift value device hardware device firmware .
device hardware communication connectivity .
device firmware communication connectivity .
compatibility cloud device management .
compatibility communication messaging .
communication messaging device firmware .
cloud device management automation .
cloud device management device hardware .
communication connectivity communication messaging .
communication connectivity compatibility .
device related issues are the least experienced bug categories but they are the most severe bugs after connectivity issues.
according to the survey respondents automation issues are the least severe bugs however more than of iot developers have faced them at least once.
the compatibility issues are the least frequent bugs according to iot developers experiences.
regarding sub categories device initialization issues are the most frequent and severe device management bugs since about of iot developers having dealt with them.
also concerning the device status issues bugs related to the status of connection have shown more frequency while bugs related to the status of device properties are more severe based on survey respondents.
among device related issues bugs that are related to the constraints of iot devices have the most frequency.
the device firmware exception issues are the most severe device related bugs.
concerning general development issues installation issues are the most frequent and severe bugs.
taxonomy augmentation.
regarding iot bugs we collected tags from interviews and tags from the survey comments.
device binding issues performance issues and thirdparty compatibility issues were not discovered before the interviews and were added by interviewers experience.
the survey comments did not reveal any new information to be added to the taxonomy.
however the extracted tags from both the interviews and survey helped us to characterize each bug category by providing contextual data.
v. rq2 f indings in this section we provide our findings regarding the challenges faced by iot developers.
a. testing and debugging challenges relying on access to the real device.
according to seven interviewees several github issues device os mycontroller tesla api and of survey participants iot developers rely on access to devices to test and debug their iot system by tasks such as manual reset or device output monitoring p .
in some scenarios devices are out of reach or in hardto access locations thus making remote debugging more essential.
four interviewees believed that practical simulation solutions are required for better iot testing and debugging.table iii survey results bug taxonomy bug category have faced frequency is severe frequently sometimes rarely device hardware .
.
.
.
.
device firmware .
.
.
.
.
communication connectivity .
.
.
.
.
communication messaging .
.
.
.
.
cloud device management .
.
.
.
.
cloud automation .
.
.
.
.
compatibility .
.
.
.
.
dev .
.
.
.
.
as p a middleware developer stated iot device vendors do not provide a mock of their devices and we have to do reverse engineering on the actual hardware devices rather than working with the simulated ones.
also as p 9stated current simulation solutions in iot are not mature enough and they are only valid for limited scenarios such as testing highlevel controllers or small unit tests rather than being suitable for all levels of testing such as system testing.
some relevant challenges mentioned in the survey are affording to have all types of iot devices complex custom logic for effective iot device mocking and simulation and setting up test environments with iot devices .
fault localization.
according to eight interviewees nine survey comments and also half of the survey participants fault localization is a barrier due to lack of transparency in the operations of iot systems.
as p 7mentioned there is no environment that logs everything.
one contributing factor to this is the difficulty of tracing executions of numerous external components in iot systems.
p 3mentioned using open source solutions just to be able to log everything.
another factor that impacts fault localization is the existence of hidden failures.
as an example p 7mentioned it s hard to recognize on the app that the temperature the device is reporting now is for several minutes ago.
besides p 4mentioned examples of failures that only show up after the device has worked for a specific amount of time five minutes for p several hours for p which is also observed in github issues deviceos zwa ve2mqtt vscp .
this issue makes iot failures more unpredictable and may hide developers faults.
another issue toward fault localization is the lack of tools and developers support.
for instance p 3inspects device messages in bit level by monitoring communications using wireshark.
p as a hardware platform developer said since there is no feedback of errors or corruptions from devices we ve added some leds to them to track if something is working in the device level or not.
reproducing iot bugs.
in addition to observing several github discussions ditto tesla api we collected four tags from interviews and three survey comments regarding the challenge of reproducing iot bugs.
besides the already mentioned factors which harden bug reproduction such as limited access to devices or hidden failures some bugs only happen with a specific device setting or with certain environments of the iot system.
iot developers cannot reproduce these bugs unless they have exactly the same setting or environment.
for instance a survey comment indicated it s hard to reproduce some memory related bugs in x86 devices when they have aslr enabled.
also we observed other examples such as temperature machine i can reproduce the bug with the help of ice packs taken at three different temperatures from my freezer.
combinatorial explosion.
in addition to all the evolving components in traditional software such as libraries and operating systems there are more changing factors in iot systems.
hardware devices produced by various manufacturers with different standards device integration middlewares and communication protocols are some examples of these extra changing factors in iot.
with all these components releasing new versions at a specific rate a combinatorial explosion problem is likely to happen when developers want to cover all possible combinations with test cases.
one relevant statement is i do not have all kinds of bulbs remotes and sensors so i could be completely wrong!
in a github discussion pytradfri .
we could collect eight tags come from four interviewees and two tags from survey comments regarding the challenge of combinatorial testing.
as one example p said we have to test with or different devices each time .
also percent of survey respondents agree with the combinatorial explosion as a testing challenge for iot developers and p 8mentioned it as the most severe testing challenge.
testing and debugging edge cases.
covering large scale scenarios e.g.
too many devices and exceptional cases e.g.
temperatures below zero add to the test coverage obstacles.
this challenge is mentioned by four interviewees three survey participants and observed in several github discussions device os temperature machine .
as one example p 4said we should put effort to write proper tests against concurrency issues since we should be able to handle http requests per second because our iot system is deployed in different cities.
additionally this challenge is the most experienced testing challenge of respondents .
immature testing culture.
figure shows an over reliant on iot developers for testing as of participants mentioned developers are the main testers in their iot project.
as p a developer of a popular iot project with near 7k stars stated we do not have a qa team.
it s up to developers to do testing either manually or writing automated tests.
often software developers do not have the skills to test the hardware side.
p a software developer of an iot platform with .5k stars told that the bottle neck of their iot platform is testing the hardware side since they do not have sufficient knowledge for tools and practices of hardware testing.
as figure shows iot testing highly depends on manual tasks as only of participants reported testing completely automatic.
also during interviews four interviewees mentioned manual approaches for iot testing.
according to the survey respondents the most adopted iot testing approach is hybrid strategies.
an example of such an approach is described by one iot developer services which don t interact with how testing is done?manualhybridautomatic who has the main responsibility for testing?developersqa team or testersthird party testing servicesclientsno testing figure survey responses about testing in iot projects.
devices directly are tested automatically but checking the entire platform with devices requires manual testing.
b. heterogeneity device and protocol fragmentation.
some of the iot developers reported developing separately for each device or protocol in order to fulfill interoperability p p .
for instance p 3stated he has to develop a distinct adapter for talking with each particular device.
he mentioned there is no guarantee that something that works with brand a also works with brand b. on the other hand p 6noted that their platform is restricted to certain protocols instead of devices.
other developers mentioned fragmentation challenges by pointing outfragmentation on the same platform andtime to implement new technologies.
in addition the majority of the interviewees seven out of nine survey comments and near half of the survey respondents find integration with a new iot device or communication protocol challenging.
third party breaking changes.
third party changes challenge is mentioned by all interviewees tags and is agreed by of survey participants and also there are several comments in the survey about it eight tags .
three interviewees stated that third parties make breaking changes without prior notice.
also p 8mentioned examples where the third party system stopped supporting a device or a service which caused breakage in their iot system.
four interviewees p2 explicitly mentioned that it s hard to keep pace with all the rapid changes from various third parties such as device manufacturers.
diversity of technologies backgrounds and requirements.
challenges posed by the fundamental diversity of iot technologies are the most repeated challenges among both interviews tags and survey comments tags .
also it is agreed by of survey respondents.
several participants mentioned that iot development requires diverse development skills such as hardware programming and knowledge in dealing with network protocols.
commonly developers do not go through this learning curve developers tend to use protocols which they are famil468iar with but sometimes better solutions exist and developers do not know use them.
p2 and several survey comments mentioned that it is hard to understand low quality documentation of certain device manufacturers and interpret complex response payloads from particular devices.
p 3and two survey comments also mentioned that user requirements as well as users backgrounds and skills can be very disparate and it s challenging to develop a generalized iot system that can support all possible use cases.
for instance p 2mentioned that they had to include more pins on their hardware and add support for obscured sensors to cover all user requirements.
other challenges are large search space for selecting compatible devices or libraries p5 and dealing with diverse regulations and standards p5 and three survey comments .
c. other challenges security.
as the survey results suggest more than half of the iot developers are not confident about the security of the thirdparty components such as operating systems and libraries used in their iot system.
also from a total of participants who mentioned security related challenges six of them posed it as the most important challenge.
moreover of iot developers find security a complicated task.
our interview participants mentioned security issues rooted in the device firmware p network protocols p and automation rules p .
one of the main challenges also mentioned by p is generating and storing access tokens within iot devices that have processing and storage limitations.
similarly near of iot developers think that device constraints make security tasks challenging.
another emerged theme from our data is related to the challenge of end to end security from the iot device to the cloud.
some p believe that the security of the local communication between the device and iot gateway is usually underestimated while it can be highly insecure.
as p 9argued to make the development of the iot system faster developers don t consider the security of the local network .
other challenges mentioned are the complexity of the certification process supporting different use cases while following security protocols and existence of various attack surfaces .
releasing updates for iot devices.
half of the interviewees believe that releasing software upgrades or security patches for already shipped devices p is inevitably challenging.
six iot developers in the survey made comments such as getting critical updates installed on already sold devices or firmware updates in large deployments regarding update challenges.
programming for constrained devices.
of the participants agreed that device constraints make iot development harder.
most iot developers struggle to design and implement software in a way to consume less processing power and energy.
device limitations in different layers have also been mentioned by our interviewees p .handling failures.
an interesting theme that of our participants agreed with is the challenge of handling failures in iot systems in a way to avoid losing data and making the system unavailable.
as p 5and five iot developers from the survey described developers have to design the system to be tolerable to failures and data losses.
handling a backlog of sensor data in gateways or constraint devices in case of disconnections p6 zwa ve2mqtt and reducing meantime to repair mttr on already shipped devices are some of the mentioned reliability challenges.
vi.
d iscussion iot testing solutions are not adopted in practice.
various iot testing tools and methods have been proposed in the literature such as device simulators and emulators iot unit testing frameworks and iot testbeds .
however none of them seems to be adopted by iot developers as only of them mentioned using third party services as their main testing approach.
besides although iot test automation frameworks exist iot testing is still carried out in a manual and ad hoc manner as of the iot developers in our study perform manual testing practices.
also as it is mentioned by p device simulation does not support simulating all types of devices.
one possible future direction is having device simulators and emulators specifically crafted for each iot device individually to virtualize their characteristics and bypass the need for the presence of the actual hardware device during testing.
also as the importance of combinatorial testing in the context of iot has been discussed previously in the literature more focus is needed on combinatorial testing tools that consider the heterogeneous nature of iot devices and protocols.
lack of device level monitoring tool support.
investigating the log data of iot devices is a common debugging task for iot developers.
this task becomes even more important as the device status issues are among the most frequent bug categories.
this bug category has appeared in around half of the bug reports in our dataset and most iot developers reported that they need to log communications or internal executions of the device as part of the debugging process for these bugs p .
there is no universal tool that receives log data from all types of devices and developers often have to manually employ naive approaches to monitor device status and communications such as serial print for each device separately p or using general purpose tools like wireshark p .
existing logging solutions to track devices are believed to be inefficient as their limitations were discussed by several iot developers.
one iot developer best mentioned it as even if some devices provide log libraries and tools they should be manually aggregated or traced from each component separately to track an issue.
fragmented and ever changing ecosystem of iot.
one of the most serious challenges of iot development nowadays is the rapid obsolescence of hardware devices.
as several iot experts and blog posts describe it the pace that iot 469devices get obscured and stop being supported by the providers is increasing.
new updates for iot devices often make the older devices unusable while they also break iot developers implementations.
within this ever changing ecosystem of iot developers have to struggle with maintaining their devicespecific or protocol specific code.
iot developers not only have to afford all versions of devices to keep up with these changes but also they have to allocate much of their development effort into migrating from one version or ecosystem to the other.
as this issue targets both iot consumers and developers in some countries put regulations on the minimum time that iot providers can release updates after the device is bought .
furthermore some solutions such as contract based testing were suggested by interviewees p to ensure continuous compatibility with third party systems.
however none of these methods can be a long term and universal solution as they are still dependent on the contracts and regulations in place.
a. threats to validity internal validity.
one internal threat to the validity of our study similar to most qualitative studies is researchers bias in coding qualitative data.
we mitigated this risk by having all authors of the paper involved in the tagging process and discuss any discrepancies in tags for all pieces of qualitative data from various sources bug reports interview transcripts survey comments .
for interviews specifically we eliminated any personal preference on our results by triangulation each piece of meaningful data from interview transcripts was tagged by one researcher who conducted the interview and one who was not present in the interview session.
external validity.
one external threat to the validity of our study is the generalization of studied iot repositories.
we minimized this issue by studying a large number of repositories repositories selected from all layers of iot systems.
another risk to the validation of our study is the interview and survey participants not being representative of all iot developers.
however we minimized this risk by recruiting interview and survey participants with different iotrelated field of expertise years of experience companies and domains.
in addition our survey is filled out by iot developers with a diverse distribution of skills and experiences.
all our study material including the bug dataset and interview and survey questions is available online .
vii.
r elated work bugs and challenges of iot systems.
although a few previous studies have acknowledged some categories of bugs in iot systems no study is concerned about categorizing all types of real bugs in iot systems using a systematic approach.
in a recent study certain peculiarities of open source iot repositories were analyzed via examining how developers contribute to iot repositories.
however this study does not consider bugs and experiences of iot developers to reach conclusions about the characteristics of iot development.a growing body of literature has investigated issues and design flaws that cause safety and security violations in iot systems as well as security challenges in iot .
more specifically in smart home ecosystem security bugs related to the device firmware communication protocols smart apps and safety of their interactions as well as interactions of different components of iot systems have been studied.
there exist taxonomies for describing characteristics of iot systems with respect to security and privacy concerns .
however these papers do not present their taxonomy construction process and they are focused on a different goal namely security requirements and attacks.
also several studies have investigated challenges of testing iot systems .
various solutions for iot testing have been proposed based on e.g.
model based testing iot mutation operators and test event generators and testing tools .
also tools and methodologies have been proposed to aid iot developers in developing of iot systems .
the challenges of developing iot systems have been discussed from different perspectives .
a previous study investigated the challenges of novice iot developers to see what development tasks are more challenging for them and developed a tool to help the novice developers .
however no study has tried to study iot developers challenges systematically by interviewing and surveying iot practitioners in the field.
bug mining and developers challenges.
although mining iot repositories has not received any attention in the literature a growing number of studies have employed mining of software repositories or issue trackers to characterize bugs in machine learning systems .
some prior researches have followed this approach to identify bug categories in blockchain systems big data computing platforms web applications and service compositions .
in addition developers challenges have been investigated in different contexts such as mobile app development and blockchain development .
viii.
c onclusions in this paper we proposed the first bug taxonomy for iot systems.
we also presented a series of categories of challenges in these systems with a qualitative study.
our findings can help both researchers and practitioners in understanding real world pain points of iot development in the wild and designing new techniques and tools.
our findings shed light on the most frequent and severe iot bugs their correlations and their root causes and thereby allowing these faults to be avoided or detected early in the development of iot systems.