a scalable t wise coverage estimator eduard baranov universite catholique de louvain belgium eduard.baranov uclouvain.besourav chakraborty indian statistical institute india sourav isical.ac.inaxel legay universite catholique de louvain belgium axel.legay uclouvain.be kuldeep s. meel national university of singapore singapore meel comp.nus.edu.sgvinodchandran n. variyam university of nebraska lincoln usa vinod unl.edu abstract owingtothepervasivenessofsoftwareinourmodernlives softwaresystemshaveevolvedtobehighlyconfigurable.combinatorial testinghasemergedasadominantparadigmfortestinghighlyconfigurable systems.
often constraints are employed to define the environmentswhereagivensystemundertest sut isexpected towork.therefore therehasbeenasustainedinterestindesigning constraint basedtestsuitegenerationtechniques.asignificantgoaloftestsuitegenerationtechniquesistoachieve t wisecoveragefor higher values of t. therefore designing scalable techniques that can estimate t wise coverage for a given set of tests and or the estimationofmaximumachievable t wisecoverageunderagiven set of constraints is of crucial importance.
the existing estimation techniques face significant scalability hurdles.
the primary scientific contribution of this work is the design of scalablealgorithmswithmathematicalguaranteestoestimate i t wise coverage for a given set of tests and ii maximum t wise coverageforagivensetofconstraints.inparticular wedesigna scalableframework approxcov thattakesinatestset u acoverage parameter t atoleranceparameter andaconfidenceparameter and returns an estimate of the t wise coverage of uthat is guaranteedtobewithin factorofthegroundtruthwithprobability atleast1 .wedesignascalableframework approxmaxcov that foragivenformula f acoverageparameter t atoleranceparameter andaconfidenceparameter outputsanapproximationwhichis guaranteedtobewithin factorofthemaximumachievable twisecoverageunder f withprobability .ourcomprehensive evaluation demonstrates that approxcov andapproxmaxcov can handlebenchmarksthatarebeyondthereachofcurrentstate ofthe artapproaches.webelievethattheavailabilityof approxcov andapproxmaxcov will enable test suite designers to evaluate the effectivenessoftheirgeneratorsandtherebysignificantlyimpact the development of combinatorial testing techniques.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acmmustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
icse may pittsburgh pa usa association for computing machinery.
acm isbn ... .
configurable software t wise coverage approximation acm reference format eduardbaranov souravchakraborty axellegay kuldeeps.meel andvinodchandran n. variyam.
.
a scalable t wise coverage estimator.
in 44thinternationalconferenceonsoftwareengineering icse may21 pittsburgh pa usa.
acm new york ny usa pages.
https introduction for the past years software systems have permeated nearly all aspectsofourlives includingcriticaldomainssuchasautonomous driving criminalsentencing surveillance andhealthcare.giventhe diversity of application scenarios a software system is designed to behighlyconfigurabletoallowwidespreadadoption .economic factorsalsosupportthedesignofhighlyconfigurablesystems.it is desirable for a software vendor to develop a general purposesoftware with a large number of configurations to allow clientlevelcustomizationwithoutnecessarilyrequiringredesignofthe underlyingsoftwarearchitecture.atthesametime giventheusageofsoftwareincriticaldomainssuchashealthcare softwarefailures can have serious adverse effects.
therefore the testing of software systems is of paramount interest.
aconfigurationofasystemreferstotheassignmentofvaluesto alltheconfigurablefeaturesofthesystem.configurabilitydoesnot come without a price feature dependencies are common and could lead to variability bugs appearing only in some configurations.astraightforwardtestingstrategywouldbetocheckwhether the system behaves as intended for every possible configuration.
however suchanapproachisnotpracticalforreal lifesystems as it is common to have thousands of features in modern software systemsresulting ina prohibitivelylarge numberofpossible configurations .thecombinatorialexplosionofthepossibleset ofconfigurationsisperhapsbestillustratedbytheobservationthat embeddedlinuxkernelformicro controllershasover7 .
configurations .
thecurseofconfigurationexplosionhasbeenwellknownfor over three decades and consequently the area of combinatorial testinghasemergedasthedominantparadigmfortestingofhighly configurable systems .
the development of combinatorial testing techniques in large part has been motivatedbytheobservationthatformostsystems interactions amongasmallnumberoffeaturesaresufficienttotriggerthebuggy behavior.
an influential study by nist observed that up to wise ieee acm 44th international conference on software engineering icse authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa eduard baranov sourav chakraborty axel legay kuldeep s. meel and vinodchandran n. variyam interactions among parameters are responsible for most of the bugs .anotherstudyshowedthatdiscoveredvariabilitybugs in linux kernel involve up to wise feature interactions .
in combinatorial testing we are often interested in maximizing t wise coverage1 which measures the fraction of t sized combinations of features appearing in the test suite over all possible t sized combinations of features.
a test suite that can achieve t wise coverage of1isalsocalleda t coveringarrayintheliterature i.e.
for nbinary features a t covering array uhas all the parenleftbign t parenrightbig2tcombinations appearing in itself.
the complexity of test suite design is exacerbated by the observationthatnoteveryconfigurationistypicallyallowedbythe system and often constraints are employed to describe the valid set of configurations.
in the real world these constraints represent scenarios for which the systems are expected to work correctly.
for example one of the widely used splc challenge benchmark ulinuxconsistsofconstraintstocapturethevariabilitymodelin kconfig .
therefore given a set of constraints the possible t wisecombinationsoffeaturesaredefinedonlyoverthesatisfying assignments of these constraints.
at this point it is perhaps worth emphasizing that even for the case when there are noconstraints the size of a t covering array for nfeatures is 2tlogn .
the presenceofconstraintsbringsadditionalcomplicationstothedesign of t covering array.
given the practical importance of the combinatorial testing the problem of efficient design of the test suite has witnessed a sustained interest for over three decades evidenced by the diverse set oftechniquesrangingfromevolutionaryalgorithms to constraint basedsystems proposedovertheyears.theproposal of these techniques is often accompanied by measurement of t wise coverage over benchmarks with small nas the computation oft coverage for large values of nis considered impractical.
given a test suite uand a set of constraints fover the parameters the estimationof t wisecoveragerequiresustoestimatethenumber oft combinations of features appearing in the test suite uand the number of possible t combinations over the solutions of f. for the former computation the state of the art techniques maintain a hash map of size o parenleftbign t parenrightbig2t and the map is updated for every elementofu.furthermore tocomputethepossible t combinations overthesolutionsof f thebest knownalgorithmscheckwhether f conjuncted with a t combination expressed as a conjunction of literals issatisfiable2.unfortunately formostpracticalinstances the computationofboththequantitiesisbeyondthereachofthestateof the art techniques.
the limitations of the current techniques fort wise coverage estimations are illustrated in reliance on small benchmarks or extremely small sized test suites whenever com parisonsacrossdifferenttestsuitegenerationmethodologiesare presented.inthiscontext weask canwedesignscalablealgorithms to closely estimate t wise coverage with rigorous guarantees?
.
our contribution theprimarycontributionofourworkisanaffirmativeanswerto theabovequestion.wedesign tothebestofourknowledge the 1defined formally in section 2an alternate approach would be to enumerate all the solutions of f but for most formulas of interest the number of solutions is too large to enumerate.firstscalabletechniquethatprovidesrigorousestimatesof t wise coverage.
in particular we present a scalable monte carlo based algorithm approxcov that takesinatestsuite u acoverageparameter t atolerance parameter a confidence parameter as input and returns an estimate of covt u that is mathematically guaranteed tobewithin factorofthegroundtruthwithprobability atleast1 wherecovt u isthesetofall t wisecoveragesofelementsin uand isasetcardinality.
approxcov takes only o 2t tlogn for a constant and space in contrast to the space requirement of o parenleftbign t parenrightbig2t for the existing techniques.
therefore for small t we achieve a reduction from o nt too tlogn .
the running time of the algorithm is also scalable for instances with parameters that are currently used in practice.
a scalable counting based algorithm approxmaxcov that takesinformula f acoverageparameter t atoleranceparameter andaconfidenceparameter asinput andreturns anestimateof covt sol f thatisguaranteedtobewithin factor of the ground truth with probability at least .approxmaxcov reducescomputationof covt sol f to theproblem of projected modelcounting.
our reduction allowsustobuildon therecentadvancesinhashing based paradigm for projected model counting andweemploystate of the arthashing basedapproximate model counter approxmc4 .
wedemonstratetheeffectivenessof approxcov andapproxmaxcovvia implementations in python3and a comprehensive experimental study.
we observe that while the current stateofthearttechniquesfailtocomputecoverageforbeyond t approxcov andapproxmaxcov can efficiently handle t and beyond t .
furthermore fort on feature models with thousands of features weobservesignificantruntimeimprovement inparticular approxcov achievesfrom2to136factorspeedupoverprior state of the art blmcov whileapproxmaxcov achieves from6to86factorspeedupoverpriorstateofthearttechniqueblmmaxcov.
weshowgeneralizationsof approxcov andapproxmaxcov toestimate t wisecoverageonconfigurablesystemswhere each feature can take values from a discrete domain.
we demonstrate with experimental evaluation that the generalizedalgorithmsareeffectiveandcanprovidecloseestimation oft wise coverage.
few words are in order to explain the critical enabler for the scalabilityof approxcov andapproxmaxcov fromourviewpoint the scalability of approxcov owes to the simple but creative usage ofthemontecarlo basedstrategy whilefor approxmaxcov the reductiontoprojectedmodelcountingallowsustoemployandreap thebenefits oftherecent progressinthe developmentofhashingbased techniques .
significanceofourcontribution combinatorialtestingisadominant testing methodology in large and complex software systems.
therefore it is vital to have tools that allow us to compare different test suite generation techniques.
our algorithms approxcov authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
a scalable t wise coverage estimator icse may pittsburgh pa usa andapproxmaxcov provide the combinatorial testing community soundtoolstocomparedifferenttestsuitegenerationtechniques forlargebenchmarks.asanimmediateimpact weexpectourtechniques to allow a thorough comparison of the recently proposed techniquesincitcommunity forlargeinstances whichwas notfeasiblewiththestateoftheart.thefactthatouralgorithms are grounded on guarantees that are mathematically proved makes them an attractive toolset in downstream applications.
organization the rest of the paper is organized as follows.
we present notation and preliminaries in section .
we present related workinsection3.wethenpresentthetechnicalcontributionofthe paperinsection4 approxcov insection4.1and approxmaxcov in section .
.
in section we present experimental results over acomprehensivesetofbenchmarks.finally insection6 wegive concluding remarks.
notations and preliminaries .
boolean formulas a literal is a boolean variable or its negation.
a clause is a disjunction of a set of literals.
a propositional formula fin conjunctive normal form cnf is a conjunction of clauses.
vars f denotes the set of variables appearing in f. thevars f is also called the supportoff.asatisfying assignment orwitnessoff denoted by is an assignment of truth values to variables in its support such thatfevaluatestotrue.weoftenrepresentanassignmentbythe setofliteralsthatmakethevariablestrue.thatis anassignment oftrueto variable xis represented as xand assignment of falseto xis represented as x. we also use the binary bit to represent true respectively false and binary strings to represent an assignment.wedenotethesetofallsatisfyingassignmentsof fassol f .
givenasetofvariables s vars f weusesol f stodenotethe projection of sol f ons.
example.
consider the formula fover variables x1 x2 x3 x4 given by f x1 x3 x1 x3 x1 x2 x3 x4 .
sol f .intheliteralrepresentationthe assignment is represented as x1 x2 x3 x4 .
let s x1 x2 then sol f s .
thepropositionalmodelcountingproblem istocompute sol f s foragivencnfformula fandprojectionset s vars f .aprobablyapproximatelycorrect orpac counterforbooleanformulasisa probabilistic algorithm that takes as inputs a formula f a sampling sets vars f a tolerance parameter and a confidence parameter and returns a count csuch that pr bracketleftbig sol f s c sol f s bracketrightbig .
.
t wise coverage theformulationofcombinatorialinteractiontesting cit assignsa variablecorrespondingtoeveryfeatureofasoftwaresystem.while inpracticeeachfeaturecantakeafinitenumberofvalues inthethe paper we consider the binary version where each feature can take twostates trueorfalse.let x x1 xn bethesetofallthe variables correspondingto nfeatures .thenaconfiguration ofthe system can be represented as an element of the set producttext.
i xi xi .
for example for x x1 x2 x3 x1 x2 x3 is an example of a configuration.
givenaconfiguration representedasasetofliterals wedefine thet wise coverage of denoted by covt t t t the set of all subsets of literals of the size tin .covt represents the set of t sized feature combinations due to .w ec a n extend the notion of covtto a setu producttext.
i xi xi of configurations ascovt u uniontext.
ucovt .
for a given covt parenleftbig x t parenrightbig parenleftbign t parenrightbig.
however this does not imply covt u u parenleftbig x t parenrightbig since covt 1 covt 2 isnotnecessarilyequalto covt 1 covt 2 duetonon emptyintersectionof covt 1 andcovt 2 .
alsonotethat for producttext.
i xi xi thesetofallpossibleconfigurations covt producttext.
i xi xi 2t parenleftbig x t parenrightbig.
we will call covt producttext.
i xi xi the universeand denote it by .
the above discussion leads to the following observation which is crucial for the proof of correctness of our algorithm.
observation .
.
for anyu over a set of variables xand any1 t x parenleftbigg x t parenrightbigg covt u 2t parenleftbigg x t parenrightbigg .
wewillbeinterestedinthecoverageofasetofconfigurations thatsatisfycertainconstraintsoverthefeatures.wewillfocuson constraints represented by a boolean formula f. for a set u sol f the t wisefractionalcoverageofaset uwithrespecttoa formulaf denoted by fraccov t u f is defined as follows fraccov t u f covt u covt sol f example.
to illustrate the notions let us consider again the cnf formulaf f x1 x3 x1 x3 x1 x2 x3 x4 .
thefollowingtablelists covt sol f fort .forcompactness we use the bit representation of the assignments and coverage.
for example a set of literals x1 x2 is listed as in the column indexed .
covt sol f .
for u shaded in the table covt u .fraccov t u f .
tuples sol f total foru112122 table coverage for example formula f authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa eduard baranov sourav chakraborty axel legay kuldeep s. meel and vinodchandran n. variyam related work .
combinatorial testing sincetheintroductionofcombinatorialtestinginthe1980sasan effectiveoptionforconfigurablesystems steadyprogress hasbeen reportedonthis topic.werefer thereaderto foradetailedoverviewofthe topic.intheclassicalcombinatorial testing thegoalistodesignatestsuite usuchthat covt u parenleftbign t parenrightbig2t.suchatestsuitisalsoknownasacoveringarrayformally defined in .
covering arrays are orthogonal arrays or matrices with rows representing configurations of a system and every possible t sized combination of variables appears at least inone column.
over the decades the construction of covering arrays has witnessed a wide variety of approaches including greedy search divide and compose genetic algorithms and tabu search .
modern software systems have a large number of features and the design of covering array is often impractical for t .
furthermore themodernsoftwareshaveassociatedvariabilitymodels and not every configuration is valid and therefore cannotact as a test.
in this context constraints are employed to capturethe associated variability models or the scenarios under which asoftware is expected to behave as per specifications.
combinatorialtestinginsuchaconstraintsettingiscalledconstrainedcombinatorial testing .
the presence of constraints has led to the development of techniques that rely on the progress in combinatorialsolversoverthepastthreedecades.severalapproacheshave been proposed that seek to sample solutions subject to constraints.
these approaches resulted in bdd based techniques random seeding of dpll based sat solvers markov chain monte carlo basedmethods intervalpropagationandbelief networks based methods maxsat based techniques such asquicksampler hashing basedapproaches knowledgecompilation based approachessuchas kus waps and baital .
.
model counting valiant initiated the complexity theoretic study of model counting andshowedthattheproblemofmodelcountingforcnfformulais p complete .
the problem of projected model counting which we employ in this paper is shown to be np complete .
given the computational intractability of projected model counting we are often interested in approximations of the exact count where the goal is to obtain an multiplicative approximation of the exact count with probability at least .
hashing based techniques have emerged as a dominant paradigm seeking scalability while providing approximation guarantees.
the core idea of hashing based techniques is to employ pairwise independenthash functions to partition the solution space into roughly equal smallcellsofsolutions.then werandomlychooseoneofthesmall cells enumerate all the solutions using a sat solver one by one.
thenumberofsolutionsisestimatedtobesimplythenumberof solutions in the cell multiplied by the total number of cells.
thepairwise independent hash functions can be realized using xor based hash functions.
the hashing based techniques trace theirorigintostockmeyer sseminalwork subsequentlypursued by gomes sabharwal and selman .chakraborty meel and vardi proposed the first scalable approximate model counter approxmc which invoked the underlying sat solver cryptominisat o n times where nis the number of variables in the original formula .
subsequently chakraborty et al reducedthenumberofsatcallsfrom o n too logn the corresponding counter was called approxmc2.
soos and meel soughttoimprovetheunderlyingsatsolver sarchitecture their new architecture called bird achieved significant performance improvement.
approxmc is currently in its fourth generation approxmc5 .
.
t wise coverage estimation while combinatorial testing has witnessed over four decades of sustainedinterestsfromtheoreticiansandpractitioners thetechniquestoestimate covu and covsol f haveratherbeenlargely underexplored.
given a set u the state of the art technique maintains a map of the t wise combinations seen in u. in the case of a givenformula f observethatevery t combinationcanbeexpressed as a conjunction of tliterals say .
given such a the state of the art techniques simply invoke a sat solver to check whether f issatisfiable.inourwork weusetheimplementationofthesetechniques due to baranov legay and meel which was used in the evaluationofthecurrentstateofthearttestgeneratorsuite baital5.
we useblmcov andblmmaxcov to denote the implementations for computations of covt u andcovt sol f respectively.
to the best of our knowledge blmcov andblmmaxcov represent thecurrentstateoftheart anassertionconfirmedbytheauthors of both the recently published studies in se community .
algorithms in this section we present two algorithms.
the first algorithm approxcov presented in section .
estimates covt u .
more precisely approxcov takes as input a set u producttext.
i xi xi error parameter and a confidence parameter and outputs a number that with probability at least i sbe t w ee n covt u and covt u .
insection4.2wepresentanotheralgorithm approxmaxcov that givenabooleanformula f estimates covt sol f .moreprecisely approxmaxcov takes as input f an error parameter and a confidence parameter and outputs a number that with probability at least is between covt sol f and covt sol f .
usingapproxcov andapproxmaxcov wecanestimatethevalue offraccov t u f .givenabooleanformula fandasetu sol f sayweuse approxcov u 1 1 andapproxmaxcov f 2 2 to obtainestimatesfor covt u and covt sol f respectively.let out1betheoutputof approxcov u 1 1 andout2betheoutput ofapproxmaxcov f 2 2 .
so we have with probability at least 1 the following equation and with probability 2 the equation holds.
1 covt u out1 1 covt u 2 covt sol f out2 2 covt sol f .
4whilebetaversionofapproxmc5isreleased approxmc4 sdeveloperrecommend usage of approxmc4 5we use the implementation available at authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
a scalable t wise coverage estimator icse may pittsburgh pa usa so by union bound with probability at least 1 2 both the above equations work.thus with probability 1 2 we have 1 2 covt u covt sol f out1 out2 1 2 covt u covt sol f .
thus given a boolean formula f a setu sol f a ne r r o r parameter andaconfidenceparameter ifw eset 1 2 1and 2appropriately we will be able to give an multiplicative estimateof fraccov t u f withprobability .forexample let us set 1 2 and 1 2 .
note that in that case 1 2 isatmost and 1 2 isatleast .
thenbyusing approxcov u 1 1 andapproxmaxcov f 2 2 to estimate covt u and covt sol f respectively from equation we have with probability at least fraccov t u f out1 out2 fraccov t u f .
.
counting the coverage of a test suit the intuition behind the approxcov is similar to the monte carlo method.givenasetofvariables x x1 ... xn consideratestset u producttext.
i xi xi and the universe set covt producttext.
i xi xi with allpossible t wisecoveragetuples thesetwithallcombinationsof sizetthatcanbeobtainedwithvariablesfrom x .thealgorithm picks a set sof size lof random t wise coverage tuples from lis appropriately chosen based on the input parameters .
then it counts the number of elements from sthat is realizable by at least oneofthetestsin u membershipin covt u .letthisnumber bem.
then the output of the algorithm ism l .
in detail approxcov shown in algorithm starts by setting the size of sample set that it would be picking depending on the parameters and .i nt h eforloop between line and line we picklsamples uniformly at random from .
the sampling is done intwosteps.foreachsample atfirstweselectuniformly tvariables tobeusedinasampleatline4.atthesecondstepweselectavalueforeachvariableatrandomatline5.notethatthisproceduregives a random element of as the universe set can also be written as braceleftbigg w productdisplay.
i t xi xi barex barext parenleftbigg t parenrightbigg bracerightbigg where parenleftbig t parenrightbigis the set of all subsets of the set ... n of size t. samples are stored in a map m where the values indicate whetherthesampleisrealizablebyatleastonetestin u initialized to0.notethattheremaybesomeelementsthatarepickedmultiple times.inthatcasewewillkeepallthecopiesinthemap m inother words mis actually a multi map.
in the nested forloops between line and line we update values of the map mif a sampled element is a subset of any of the u. finally in line we sum thevariablescorrespondingtotheelementsin mandoutputthe value multiplied with an appropriate scaling number.
theorem4.
.
letx x1 ... xn bethesetof nvariablesand letubeanysubsetof producttext.
i xi xi .thenforanypositiveinteger tand positiverealnumbers withprobabilityatleast the output of approxcov is an multiplicative approximationalgorithm approxcov u l ceilingleftbig 32t 2ln ceilingrightbig initialise m fork k l k do pick a random tkfrom parenleftbig t parenrightbig pick a random wkfrom producttext.
i tk xi xi putwk intom end for for udo fork k l k do ifwk then updatem to end if end for end for output n t 2t l summationtext.1l k 1m of the covt u .
that is with probability at least covt u parenleftbign t parenrightbig2t ll summationdisplay.
k 1m covt u .
moreover the amount of space needed is o parenleftbig ceilingleftbig 32t 2ln ceilingrightbig t log2n parenrightbig and the run time is o parenleftbig ceilingleftbig 32t 2ln ceilingrightbig t log2n u parenrightbig .
.
counting the coverage with constraints in this section we present the algorithm approxmaxcov for estimating covt sol f .
notice that it is not straightforward to use approxcov toestimatethisquantityas sol f isnotgivenexplicitly.
hence we design a new algorithm approxmaxcov that uses aprojectedmodelcountingalgorithmonarelatedformula.itisa two stepalgorithmshowninalgorithm2.forabooleanformula fon variable set x it will first construct a new boolean formula gfonvariableset x s where sisanadditionalsetofvariables such that covt sol f sol gf s then it will use an approximate projected model counting algorithm which we call approxcount o ngfto output an estimate of covt sol f .
several algorithms are known for the approximatemodelcountingproblemandwediscusstheonewe useinsection5.sincetheoutputof approxcount isguaranteedto bewithin of sol gf s withprobabilityatleast theoutputof approxmaxcov isalsobetween covt sol f and covt sol f with probability at least .
algorithm approxmaxcov f t gf s constructgformula f c approxcount gf s return c thus the correctness of the algorithm approxmaxcov follows onceweshowthattheformula gf x s satisfiestheconditionin equation .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa eduard baranov sourav chakraborty axel legay kuldeep s. meel and vinodchandran n. variyam lemma .
.
covt sol f sol gf s we now present the main idea of the construction of gf.
construction of gf intuitively gfencodesfandallthe t wise coverage tuples contained in sol f .
given natural numbers nand t andabooleanformula fonnvariables x x0 ... xn 6we willdefineanewbooleanformula gfonn t log2n tvariables.
first nvariables are the variables of f. the remaining set of variables scan be partitioned into t groups y1 ... ytof size log2n andz z1 ... zt .
intuitively sencodes a subset of indices n of size t yiis a bit vector that encodes the ith integer in the subset and ziis its value in x. to ensure that only elementsof covt sol f canbeassignedtotheset s weextendthe formulafwithadditionalconstraintsthatisencodedinaformula f prime andtheformula gfisconstructedasaconjunctionof fandf prime.for a binary string yiof length log2n letval yi denote the number encodedbyabinaryassignmenttothevariablesin y.f primeisaformula over variable y zthat encodes the following requirements.
val yi nfor all i t. val yi val yi for all i t .
this constraint togetherwith ensuresthatthetuple angbracketlefty1 yt angbracketrightencodes asubsetofindicesofsize t sameindexcannotappearina combination multiple times and each set can have only one representation .
xval yi ziforall1 i t.thisconstraintensuresthatthe binaryassignmentvariables y zencodesa t wisecoverage tuple contained in the assignment to f. with this intuition it is easy to see that the number of different valid assignments to the set s y zis the desired value covt sol f .
experiments inthissectionweevaluatetheprecisionandefficiencyofalgorithms approxcov andapproxmaxcov .bothalgorithmshavebeenimplementedinpython .
approxmaxcov implementationusesa stateof the arttoolapproxmc4 forapproxcount subroutine forapproximateprojectedmodelcounting .intheevaluationofthe algorithms we wantto validate that the implementationachieves the theoretical results on the estimation accuracy and to compare the performance of the algorithms with the existing approaches.
therefore we pose the following research questions rq1andrq2 are approximations of approxcov and approxmaxcov close to the correct values and within the boundary provided by pac guarantees?
rq3andrq4 a r eapproxcov andapproxmaxcov faster and more scalable than the existing approaches?
as discussed in section an estimate of fraccov t u f for a given sample set uand a formula fcan be computed with approxcov andapproxmaxcov .suchanestimateinformsusofthe t coverage achieved by a given test suite with respect to the maximum possible t wise coverage subject to the set of constraints f. evaluation of fraccov t u f is covered by the following research question 6choosing x0 ... x n instead of x1 ... x n is for easiness of presentation.
rq5can algorithms approxcov andapproxmaxcov be usedtoestimate fraccov t u f andprovideacloseapproximation to the correct result?
asnotedearlier itiswell known thattypicallytechniques used for binary domains can be scalably lifted to discrete domains.
we describe the extensions of approxcov andapproxmaxcov for the general case along with empirical studies in the end of the section.
.
benchmarks experimental setup fortheexperimentsweselectedalargenumberofpubliclyavailablefeaturemodelsfromreal worldconfigurablesystemsthatwere usedintheliteraturefortheevaluationofsamplingtools.inparticular we took benchmarks appeared in .
thebenchmarkshavebetween565and11254variables between and clauses and between .
1013and .
solutions.
unfortunately existing approaches are not capable to compute covt u and covt sol f fort on large benchmarks.
therefore in order to check approximations for t 3w e have selected smaller benchmarks from .
in particular we have sortedthebenchmarksbythenumberofvariablesandrandomly selected1foreachvaluebetween10and500providing111extra benchmarks.intheremainderofthesectionwewouldreference the first benchmarks as large and the last as small .
theevaluationof approxcov requiressamplesets thereforewe generated them with publicly available tools waps quicksampler andbaital foreachofthe234benchmarks.each samplesetcontains1000samples.sincequicksamplercangenerate unsatisfiable samples that are filtered afterwards we generated moresampleswiththistoolandselectedthefirst1000validones.
notethatforseveralbenchmarks evenafterrequesting100000samples quicksampler outputcontained lessthan1000 validsamples therefore we did not consider such sample sets in the experiments.
thus we used sample sets for the experiment.
similarly to the featuremodels wewouldcallsamplesetsoriginatingfromthefirst feature models as large and the remaining would be small .
all experiments were conducted on a high performance computercluster eachnodeconsistingof2xe5 2690v3cpuswith2x12 real cores and 96gb of ram.
.
methodology theevaluationof approxcov isfocusedon rq1andrq3.inour experiment we used approxcov to approximate covt u for t on sample sets described above.
we used and equal to .
.approxcov computations have been performed timeswithoutfixedrandomseedandintheresultswereportthe meanrunningtimeandtheworst caseoutput i.e.theoutputfarthest from the covt u .
for comparison we have performed the same computationswith blmcov .
thetimeout was setto seconds and the memory limit was set to 4gb for both the tools.
the evaluation of approxmaxcov is focused on rq2andrq4.
in our experiments we approximated covt sol f on benchmarks for t .
we used .
.
similarly to the previousexperiment allcomputationswith approxmaxcov havebeen performed times without fixed random seed.
for comparison we have performed the same computations with blmmaxcov .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
a scalable t wise coverage estimator icse may pittsburgh pa usa figure comparison of execution time of approxcov andblmcov on sample sets for t .
x axis shows blmcov time in seconds y axis shows approxcov time in seconds.
red line indicates equal time.
among points at the right border correspond to timeout ofblmcov and corresponds to seconds for blmcov.
originally thetimeoutwassetto3600secondsforbothtools.unfortunately blmmaxcov isabletocomputeonly2 large benchmarks within thistimeout for t .
therefore weraised the timeout for blmmaxcov to seconds.
the memory limit was set to 4gb.
fortheevaluationof rq5weusedtheresultsfromthetwopreviousexperiments theestimationof fraccov t u f isobtainedbydividingthe ithresultofapproxcov bythe ithresultofapproxmaxcov on the corresponding feature model.
the generated approximations havebeen compared withthe correct valuescomputed with blmcov andblmmaxcov .confidenceparametersof fraccov t u f are derived from the selection of and in the computation of approx covandapproxmaxcov .
.
.
.
results for approxcov in the first experiment we computed covt u withapproxcov andblmcov.for t approxcov havesuccessfullyterminated onallsamplesetswithin25seconds.
blmcov hastimedouton2 benchmarks.comparingthecomputationtimefor t 2between blmcov andapproxcov blmcov was faster on sample sets with fewvariables.amonglargesamplesetswithmorethan500variables only were faster with blmcov while on the rest of the setsapproxcov wasfrom2to136timesfaster.timecomparisonis shown figure among points on the right border correspond to timeouts of blmcov and the remaining corresponds to seconds for blmcov.
slower performance on smaller benchmarks is explained by the fact that the number of picked elements dependsontheselected and parametersratherthanthenumber of variables.note thaton thesmallest benchmarksthe number of combinationstopickisgreaterthanthetotalnumberofdifferent combinations.insuchcases allcombinationsareselectedandthe result is an exact value rather than approximation.
figure2 approximationerrorof approxcov fort 2on672sample setscomputedas max abs result i cov2 u cov2 u where result iis approximation returned by approxcov on theithrun.
samplesetsthattimedoutwith blmcov arenotusedinthisfigure.
figure3 approxcov executiontimeon674samplesetsfor t .
x axis shows the value of t y axis shows time in seconds.
to check the accuracy of approxcov approximation we comparedtheapproximationresultswiththecorrectvalueof cov2 u computedby blmcov.foreachsamplesetwetookthemaximal valueof abs result cov2 u cov u among10 resultsof approxcov .
figure shows the histogram of errors the largest error was .
which is smaller than selected .
fort blmcov has successfully terminated only on few small benchmarks within the given time and memory budget benchmarks for t for t for t and for t .
in comparison approxcov terminated on all benchmarks within secondsforall t .theexecutiontimeforvariousvaluesof tis showninfigure3.theapproximationaccuracywaswithinpac guarantees thelargesterrorwas0.
.thehistogramoferrors on benchmarks computed by blmcov is shown in figure .
our experiment shows that the results of the approxcov are close to the cov2 u and within the selected boundary from pac guarantees thus answering rq1.
comparison of execution timeallows ustogive apositiveanswer to rq3 approxcov iscan compute covt u fort while existing method fails on half of the sample sets for t .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa eduard baranov sourav chakraborty axel legay kuldeep s. meel and vinodchandran n. variyam figure approximation error of approxcov fort on all benchmarks on which blmcov has successfully terminated elements in total.
the error is computed as max abs result i covt u covt u whereresult iisapproximationreturnedby approxcov on theithrun.
figure approximation error of approxmaxcov fort 2on benchmarks on which blmmaxcov terminated.
the error is computed as max abs result i cov2 sol f cov2 sol f where result ithe approximation returned by approxmaxcov onithrun.
.
results for approxmaxcov approxmaxcov have successfully terminated on all benchmarks fort within seconds except benchmark that required 1720seconds.forcomparison blmmaxcov hassuccessfullyterminated only on large benchmarks for t with seconds timeout.afterraisingtimeoutto28800secondsitsucceededon221 benchmarks out of .
the speedup factor ofapproxmaxcov on large benchmarks have range between and .
to check the accuracy of approxmaxcov approximation we compared it with cov2 sol f .
for each benchmark we took the maximal value of abs result cov2 sol f cov sol f among resultsofapproxmaxcov .
results for benchmarks are shownintable2.figure5showsthehistogramoferrors thelargest error was .
which is smaller than selected .
for larger values of t approxmaxcov timed out of secondsonthelargestbenchmarkfor t 4andononemorebenchmark for t .
further exploration of these benchmarks showed thatapproxmaxcov cangenerateallresultswithin8500seconds.
the execution time for various values of tis shown in figure .benchmark ground truth approxmaxcov error buildroot .
busybox 1 28 0 .0013ecos icse11 .0010financial .
mpc50 .
phycore .0025psim .
sleb .
table comparison of approxmaxcov approximations with cov2 sol f .
first column shows the benchmark second and thirdcolumnsshows cov2 sol f andworst approxmaxcov result from runs and the last column is computed as abs column3 cov2 sol f cov2 sol f .
figure approxmaxcov execution time on benchmarks for t .
x axis shows the value of t y axis shows time in seconds.
points on the top border correspond to timeouts.
figure approximation error of approxmaxcov fort on all benchmarks on which blmmaxcov has successfully terminated elements in total.
the error is computed as max abs result i covt sol f covt sol f where result itheapproximationreturned by approxmaxcov onithrun.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
a scalable t wise coverage estimator icse may pittsburgh pa usa figure8 approximationerrorof fraccov t u f fort onall benchmarks on which both blmcov andblmmaxcov have successfully terminated elements in total.
it has been computed as max abs result i fraccov t u f fraccov t u f where result iis aquotientofapproximationsreturnedby approxcov ontheithrun and of approximation returned by approxmaxcov on theithrun on the corresponding feature model.
blmmaxcov was able to compute benchmarks for t for t 9for t andonly5for t .comparisonofapproximationwith covt sol f showedthelargesterrorof0.0086which iswithinpacguarantees.theerrorhistogramisshowninfigure7 theexperimentshowsthatresultscomputedby approxmaxcov are close to covt sol f and within the selected boundary from pac guarantees rq2 .approxmaxcov was significantly faster thantheexistingmethodsonlargebenchmarksandwasabletooutputtheresultonthebenchmarksupto t where blmmaxcov timed out on several benchmarks even with a large time budget on t thus allowing us to positively answer to rq4.
.
approximation of fraccov t u f the approximations of fraccov t u f have been obtained by takingpairsofresultsof approxcov andapproxmaxcov .wereport theworstapproximationobtainedbythismethod.resultsfor15 sample sets are shown in table and the histogram of errors isshown in figure .
the largest error was .
which is smaller than the derived .
this result shows that the approximation of fraccov t u f obtained with approxcov andapproxmaxcov is close to the correct value.
moreover considering the scalability of both approximation algorithms theapproximationcanbecomputedonallbenchmarks except for t while existing methods succeeded only on thus positively answering rq5.
.
extension to the general case inthissectionwedescribehowalgorithms approxcov andapproxmaxcov can be generalized to arbitrary alphabet size the case whereeachfeaturecantakeafinitenumberofvalues.inthesecond part of this subsection we provide results for empirical evaluation.
.
.
generalization of algorithms.
the generalization of approxcovrequires a few changes in algorithm yet the general idea of checking inclusion into covt u of randomly selected combinationsremainsthesame.inparticular inlines1and15weneedtobenchmark ground truth approximation baital busybox 1 28 0 .
.993025waps busybox 1 28 0 .
.983794quick busybox 1 28 0 .
.
baital ecos icse11 .
.975041waps ecos icse11 .
.788512quick ecos icse11 .
.
baital mpc50 .
.
waps mpc50 .
.
quick mpc50 .
.
baital phycore .
.961093waps phycore .
.782127quick phycore .
.
baital psim .
.
waps psim .
.
quick psim .
.
table approximation of fraccov u f .
confidence parameters are .
.
.
changethenumberofselectedcombinationsandthefinalmultipliertoensurethattheapproximationiswithinthepacguarantees.the secondchangeistheuniform selection ofcombinationsintheset taking into account the number of values each feature can take.indeed the sampling shall choose a feature with multiple values more often than binary features.
the generalization of approxmaxcov is re implemented as follows westartwithaformula fencodedwithquantifier freebitvectorlogic qf bv representingconstraintsoftheconfigurable system.thefirststepistoconstructaqf bvformula gfbyextendingfwithconstraintspresentedinsection4.
.atthenextstepthe formulagfis converted into cnf.
we use the smt solver z3 with the following tactics then simplify bit blast tseitin cnf boolean variablesareaddedtokeeptrackoftheoriginalvariables .inthe resulted cnf formula we approximately compute the number of solutions projected to the set swith approxmc.
.
.
empirical results.
to illustrate that approxcov can directly operateoninstanceswithoutreductiontobooleanvalues weexper imentedwiththeimplementationof approxcov forfeaturemodels without binarization.
our benchmark suite consisted of feature modelsand35samplesetsfrom .thefeaturemodelshaveupto 200variableshavingbetween2and6values.weusedthesameclus ter .05forboth approxcov andapproxmaxcov .forcomparisonweusedslightmodificationsof blmcov andblmmaxcov the former just needed to be capable to read the new inputs while in the latter we additionally replaced calls to sat solver with calls to smt solver z3 .
thetimeoutswere3600secondsfor blmcov approxcov and approxmaxcov and14400secondsfor blmmaxcov .memorylimit was 4gb.
both approxcov andapproxmaxcov have been run times we report mean time among runs and the furthest result from the exact value computed with blmcov andblmmaxcov.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may pittsburgh pa usa eduard baranov sourav chakraborty axel legay kuldeep s. meel and vinodchandran n. variyam figure comparison of execution time of approxcov andblmcov fort onsamplesetsonwhich blmcov havesuccessfullyterminated points in total.
x axis shows blmcov time in seconds y axis shows approxcovgeneral time in seconds.
red line indicates equal time.
figure approximation error of approxcov fort on samplesetsonwhich blmcov havesuccessfullyterminated.theerroriscomputedas max abs result i covt u covt u where result iis approximation returned by approxcov on theithrun.
approxcov have successfully terminated on all benchmarks for t within seconds.
blmcov has failed benchmarks fort 30for t and31for t 6without of memoryerror.
the comparison of execution times is shown on a figure .
due to the small size of benchmarks blmcov was faster on many of them.theapproximationerrorisshowninfigure10 thelargest value was .
.
approxmaxcov havesuccessfullyterminatedonallbenchmarks fort within within the given timeout of seconds.
benchmarks for t and benchmarks for t have timed out.
blmmaxcov hasmanagedtoterminateon4benchmarksfor t andonlyon1benchmarkfor t 4within14400secondstimeout.
theapproximationerrorisshownin11 thelargestvaluewas0.
.
figure11 approximationerrorof approxmaxcov fort on40 benchmarks on which blmmaxcov terminated.
the error is computed as max abs result i covt sol f covt sol f where result ithe approximation returned by approxmaxcov onithrun.
.
threats to validity internal validity.
our algorithms provide an estimation of the resultwith probablyapproximatelycorrect guarantees andseveral runs may not yield identical results.
to mitigate this threat we provide theoretical proofs that bound the potential error and inthe experiments we run each benchmark multiple times.
in theobtainedresultsthedifferencebetweenmultiplerunswasbelow0 .
forapproxcov and below .
forapproxmaxcov and on allbenchmarkstheworstapproximationwasalwayswithinpac guarantees interval for both algorithms.
externalvalidity.
tomitigatethethreatofnon generalizabilityof our studywe haveuseda large number ofbenchmarks used before in several prior studies .
these benchmarks cover a wide range in the number of variables clauses and configurations.
conclusion scalable and efficient computation of t wise coverage is of pivotal importance for combinatorial testing.
in this work we proposealgorithmsforestimating t wisecoverageforagivensetoftests and also for tests sets with a given set of constraints.
in particular wepresent ascalablemonte carlobasedframework approxcov thatisguaranteedtoestimatethesizeofthecoverageofforagivensetoftestswithin factorofthegroundtruthwithprobability at least for given and a scalable counting based frameworkapproxmaxcov that estimates maximal achievable coverage for a given formula and guarantees it to be within factor withprobabilityatleast1 forgiven and .theapproachhave been evaluated on a large set of benchmarks involving up to variables and we have shown that both frameworks can provide highlyaccurateresultsevenforestimationof6 wisecoverageof features.
we also extended the frameworks to also include nonbinarydomains.ourworkopensthepossibilitytocomparevarious testsetgeneratorswiththepresentedframeworks.animportant direction for future work would be to perform an extensive evaluation of the existing test set generators by estimating the maximum achievable t wisecoverageandexploringthepossibilitytoimprove them based on the evaluation results.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
a scalable t wise coverage estimator icse may pittsburgh pa usa