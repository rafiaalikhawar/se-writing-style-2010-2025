code q uality and process metrics in graduated and retired asfi projects s tefan st nciulescu sstanciulescu ucdavis.edu universityof california davis usalikang yin lkyin ucdavis.edu universityof california davis usavladimirfilkov vfilkov ucdavis.edu universityof california davis usa abstract recentworkonopensourcesustainabilityshowsthatsuccessful trajectories of projects in the apache software foundation incubator asfi can be predictedearly on using aset ofsocio technical measures.
because oss projects are socio technical systems centeredaroundcodeartifacts wehypothesizethatsustainableprojects may exhibitdifferentcode andprocess patternsthan unsustainable ones andthatthosepatternscangrowmoreapparentasprojects evolveovertime.herewestudiedthecodeandcodingprocesses ofover200asfiprojects andfoundthatasfigraduatedprojects have different patterns of code quality and complexity than retired ones.likewiseforthecodingprocesses e.g.
featurecommitsor bug fixing commits are correlated with project graduation success.
we find that minor contributors and major contributors who contribute respectively commits associatewithgraduation outcomes implying that having also developers who contribute fewer commits are important foraproject s success.
thisstudyprovidesevidencethatossprojects especiallynascent ones can benefit from introspection and instrumentation using multidimensionalmodelingofthe whole system including code processes andcodequalitymeasures andhowtheyareinterconnectedover time.
ccs concepts software and its engineering open source model .
keywords open source sustainability code quality acmreferenceformat s tefanst nciulescu likangyin andvladimirfilkov.
.code quality and process metrics in graduated and retired asfi projects.
in proceedings ofthe30thacmjointeuropeansoftwareengineeringconferenceandsymposiumonthefoundationsofsoftwareengineering esec fse november singapore singapore.
acm new york ny usa 12pages.
introduction open source software oss project sustainability is of key importancetoourdigitalsocietyinfrastructure.successfulandsustainable oss dominates the internet e.g.
apache linux android esec fse november singapore singapore copyright held by the owner author s .
acm isbn978 .
chromium and libreoffice andis reportedly usedin ofenterprises1.theblockbusterprojectsnotwithstanding formany other oss projects especially nascent ones becoming sustainable andlaterremainingonatrajectorytolong termsustainabilityis an ongoing issue.
the consequencesof apopular oss project gettingoffthat trajectory can be disastrous as recent worldwide cybersecurity incidentslikelog4jhavedemonstrated .inresponsetosuch incidents in software security a meeting in january at the uswhitehouse 2betweengovernmentandprivatesectorstakeholders resulted in a statement recognizing oss maintainability andsustainabilityasissuesofnationalimportance andcallingto actiontoidentify sustainablemechanisms tomaintainthemost important oss projects.
but what are the characteristics of sustainable oss projects and how can they be leveraged into sustainable mechanismsforproject maintenance?
we know that in spite of concentrated programmer labor many opensourceprojectsfailandareabandoned.coelhoandvalente have studied over github projects and identified different reasons for oss failure including low number of developers involved lowengagement andotherreasons.
.toincreasetheirvisibility and chances of success many projects join foundations like the apache software foundation asf which provide common standards and guidance in exchange for higher community uniformity.thepopularityandhighstandardsoffoundationsupported projects can contribute to their continued sustainability by attracting a steady supply of programmer effort.
asf in particular serves as an example that has been successfully churning out popular andhighqualityprojectsforyears.itsincubator andtheapache way 3has served many nascent projects graduating those that demonstrated a track record toward sustainability and retiring others.
moreover oss projects come in different shapes and sizes.
this diversity is there from the beginning when nascent projects are initiated and continues throughout their life trajectory and for some into their eventual sustainable regime.
that every project mayhaveadifferentstoryandtrajectoryisinlinewithcontingency theoryandorganizationalmanagementstudies .recognizing this modern software engineeringresearchis the rulesofthumb andtheone size fits allsolutionsandreplacing themwithdeeperandmoremeaningfulbespokesolution where thecontextandtheecosystemenvironmentaresignificantdeterminants of project sustainability .
these research efforts readout of white house meeting on software security thiswork islicensedunderacreativecommonsattribution4.0international license.
esec fse november14 singapore singapore s tefanst nciulescu likang yin andvladimirfilkov havebenefitedfromtheavailabilityoflarge scalerepositoriesof project traces and developer behaviors.
the most promising of them have combined multiple different types of data including traces andcommunication activities surveys and developer interviews and used modeling at both software engineering and social and governance levels .
recent work on open source sustainability focusedbothontechnical factors andsocial factors andhasdemonstratedthebenefitsofusing socio technical networks to forecast project graduation success in theapachesoftwarefoundationincubator asfi .those studiesfoundthatdifferentpatternsofsocialinteractionsanddifferent socio technical behavior mediate differential success outcomes inparticularwithrespectto sustainabilitymetrics.
where the evidence is scant however is where we find the next natural research direction to connect sustainability to the way the softwareartifactsarecreated especiallythecode.itstandstoreason thatbecausecodeistheproductofcoding asocialprocess andthe processofcodingisinterleavedwithactivitiesofthesocio technical system representing the project a connection even if indirect existsamongthem.infact sincetheinitialpostulationofconway s law ithasbeenamplyestablishedthatthesoftwareprojectsociotechnical structure in commercial projects is associated with the organization andquality ofthe software artifacts created.
a motivating example.
we take a look at two different yet similar projects from asf.
apache celix is a framework to develop modularsoftwareapplications.itgraduatedfromtheincubatorafter almost four years while having only four code contributors and a bitover300commits.itsapproachwastohaveaconsistentlongterm activity without high intensity development periods.
on the other spectrum is spamassassin a well known anti spam platform developed for more than years.
spamassassin was highly active during its incubation period had many contributors and averaged over commits per month.
it graduated much faster from the incubator likelyalsodueto its previouswellestablishedcodebase and community.
bothprojects were and still are successful both graduated from the incubator but had very different trajectories both at code level andat processlevel.
our contributions.
guided by the above and the prior work showingthatthenotionofosssustainability intheasfincubator senseofatrajectoryleadingtoself reliancehasstrongconnections to aproject s socio technical structure we hypothesize that code thecodingprocess andprojectquality e.g.
graduation in asfi are associated with project sustainability in a way that can be quantitativelymeasured.
thefollowingquestions then arisenaturally isthecodeandthe developmentprocessinsustainableprojectsperceptiblydifferent than in those that are not sustainable?
is the code quality in the former any different than in the latter?
to effectively answer these questionsonewouldneedguidingtheoriesconnectingorganizational behavior to outcomes and data of code process and quality togetherwithdata ofprojectsustainabilityoutcomes.
here weanalyzeadatasetofsourcecodeanddigitaltracesfrom the repositories of asfi projects that have been judged to beonthepathtosustainability i.e.
retiredornot.weextractedsoftware metrics for code process and quality and studied the metricspacedifferencesbetweengraduatedandretiredasfiprojectsat individual metric level metrics over time and in models of sustainability.we foundthe following graduated and retired projects are different in their code graduated have less code per author and less directories perauthor processes graduatedcommitmoreanddelete more and quality graduated have more complexcode and more test code graduatedandretiredprojectsfollowdifferenttrajectories once they enter the incubator.
some projects are somewhat better equipped to graduate fast while others strive for a moreconstantbutlesscommit heavyactivity.finally retired projectsaremorelikelytohaveahigherburdenpercontributorduetohavingfewercontributors anincreasingcodebase size andbeing less likely to attract newcontributors anincreaseinthefollowingmetricsincreasestheoddsof graduation lines of code major and minor contributors featurescommits correctivecommits mediumcomplexity mccabe functions and very largefunctions.on the flip side the increase in the following metrics decreases the odds top level directories avg.
files modified per commit very large file sizes andcode duplicationpercentage.
this paper isa first step showing that it ispossible to associate sustainabilitywithcode quality andprocess metrics.
ourmotivation goesbeyondasfi asmanymore projects failoutsideofasfi therefore maintaining projects with large code bases may be more pertinenttothem.ourreplicationpackageisavailableonzenodo.
backgroundand theory in this section we summarize the underlying mechanism of the apachesoftwarefoundationincubator therelatedworkonoss sustainability and the concepts on code complexity and quality measures.
we alsointroduce the relevantcontingency theory.
.
apachesoftwarefoundationincubator apache software foundation incubator asfi 5is a project incubator thatprovides a deterministic pathfor in the wild oss projects to attract highly skilled developers regulate working behaviors and further joining apache community.
during the incubation theprojects long termgoalistobecomeself sustainable i.e.
the project scommunitycanself governitselftosustainitsactivityand productivity over time.
to help incubating projects achieve such levelofsustainability asf differentfrommostossfoundations provideseachincubatingprojectwithin depthmentorshipfrom senior asf committers.
the incubation process often takes several months andwhentheproject scommunityis readyforexitingthe incubator all contributors have the obligations to vote for either graduation and retirement if the decision from the community ispositive thentheasfcommitteewilladditionallyevaluatethe projects progressoncontributordiversity attractivenesstonew contributors and community building.
if all goes well the project will be graduated otherwise retired.
there is a tenet in apache 496code q uality andprocessmetrics in graduatedandretiredasfi projects esec fse november14 singapore singapore community and that is community over code .
the belief is that if good care is taken of the community good code will emerge from it.
based on such belief projects in asfi are encouraged to build a diverse and meritocratic based community though there is little explicit emphasis on code quality or new features to be developed.previous workhas foundthat thereare strongrelationships between code qualityandproject s progress .
.
osssuccess sustainabilityvis a viscode oss success has been studied from various angles though there isstillnouniversalagreementonthedefinitionofsuccessinoss projects .
some researchers use metrics from the user s perspective to measure oss success e.g.
project downloads usage popularity licenses .
others use project centered metrics e.g.
thenumberofissues commitfrequency activedevelopers .
coelho et al.
surveyed developers and found that projects failfor several reasons lowinterest fromdevelopers lowcode maintainability andnewerprojectsovertakingtheoriginalprojects.
furthermore they discover that failed projects are less likely to follow best practices e.g.
provide contributing guidelines and failedprojectsaremoresimilartolesspopularprojects.acodebase with highcomplexity and manycodedependenciesrequiresmore effortstomaintainortodevelopnewfeatures.codecomplexitycan also increase due to low code ownership developer turnover oracceptingexternalcontributors code .sachsuseddevelopers commentstopredictaproject ssuccess byanalyzingthe interactionsbetweenindividualsasagroup basedonsymlog a bodyofsocialpsychologytheories .theyfindthatdevelopers personas do not increase the accuracy of traditional metrics based methodsfor predictingaproject s success.
code quality is an important non functional requirement in a project s lifecycle.
nagappan et al.
show that organizational metrics fare better than traditional metrics in predicting faults inoss projects .other researchhasshownthat codeandprocess metrics can be useful for detecting code smells design issues predictingdefects orfindingvulnerabilities which can be useful in understanding a project s evolution and potentialissues.
although related oss sustainability and oss success are two differentconcepts.oneprojectcanbesuccessfulandnotsustainable and the most recent log4jvulnerability is a convincing evidence a well known and widely used oss project but barely maintained by a group of only four non paid developers.
xia et al.
used github related metrics pull requests issues etc to predict the healthof a project .
compared toprevious work they achievehighaccuracy errorrate bytuningtheirmodelsand parameters andshowthattheycanaccuratelypredictmanyhealth indicators for the next and months.
more recently yin et al.
showed that socio technical factors mostly social and technical networks can be used to forecast the incubation sustainability outcomeforasfincubatorprojects .theyfindthatahigher numberofnodesinthesocialnetworksispositivelycorrelatedwith graduation whereas the number of nodes in the technical network code and developers coding behavior is negatively associated with graduation for minor projects.
ghapanchi studied project sustainability over time based on two metrics defect rate velocity andfeatureenhancementrate .theyfoundthatahigherbug fixing and feature enhancement rate together with an increase in the frequencyofreleaseshelpswithlongtermsustainability.incomparison we use comprehensive source code and coding process analysis allowing us to be broader in our analysis by including code quality metrics.
izquierdo et al.
studied how oss projects evolve in the eclipse incubator .
they use product and code related metrics to gauge their maturity.
they find that modeling projects that went through the incubator remain stable throughout their lifecycle indicating that they do not grow and are not able to attract new contributors.
as the end result of oss software is producing useful software we expect that project sustainability is associatedwithitscodecharacteristics.however tothebestofour knowledge there is nostudyarticulatingtheassociation between projectsustainabilityandcode process andquality metrics.
.
contingencytheory asfi projects regardless of size naturally form an organization withinternalrules specialregulations andexclusivepersonpower.
structural contingency theory argues that organizations cannot be fully effective without the necessary structural support .
moreover thereisnosingleorganizationalstructurethatisbestfittedfor everyorganization .thus toanorganization themosteffective structureiscontingentuponitsinternalandexternalcontext.according to ruekert et.
al.
organizational performance is a mix ofmanyfactors including structure people technology strategy and culture.
organizations with better fit will achieve higher levels of performance.
in a nutshell the structural contingency theory claimsthat onesizedoesnotfitall andthateffectiveperformance depends on many factors .
in the specific case of asfi projects the context of a project is multi dimensional including communications among contributors seniority of the contributors and programming languages being used to build the project.
therefore it is likely that the association between code quality and sustainabilityiscontingent uponthosecontextvariables.
research questions inthispaperwebuildonthepreviousworkofyinetal.
and study metrics complementary to their socio technical ones.
our focusisoncode process andqualitymetricstoexplore howwritingcodediffersacrossasfiprojects.wehypothesizethatretired projects will exhibit different code complexity process patterns andqualitymeasures thangraduatedprojects.
to have actionable insights intoprojects evolution and sustainability we consider them in a multi dimensional space of our metrics.
understandingprojects in such aspacecangive usaglimpse intoprojects similaritiesanddifferences.evenifprojectscanbe similar in terms of codebase size measured by the number of files and project size measured by the number of active developers we expect that projects can differ in many ways they may differ in some process related aspects such as commit frequency change size commit types or the ability of attracting new contributors.
as predicted by the contingency theory projects that successfully progressedtobeself sustainablecangothroughdifferenttrajectory underdifferentcontext andthesameholdsforretiredprojectsthat theyfailtomaintainsustainabilityduetovariouscontext.therefore 497esec fse november14 singapore singapore s tefanst nciulescu likang yin andvladimirfilkov git repositories on githubcode metrics process metrics regression models glm and glmm projects email archivesdata extraction code quality metricsgraduated and retired projects asf project listdata cleanup and preprocessing remove outliers tokei sokratesrust tool figure1 diagramshowingtheoverallprocessforcollecting and analyzing the data.
glm generalized linear regression model glmm generalized linear mixed effects regression model.
insuchacomplexmulti dimensionalspace itisofimportanceto demonstrate that there is sufficient variance to capture differences and similarities between graduated projects and retired projects.
thus we ask rq1 how do graduated and retired projects differ across our code process and quality metrics?
how are the metrics related pairwise?
next we turn to the temporal evolution of code process and qualitymetrics.inasocio technicalsystem feedbackfromoneside to another side takes time especially in the circumstance of the ossprojectwherepeoplecanworkfromdifferenttimezones.as predictedbythecontingencytheory thecontextofprojectsisof importancetotheorganization andthecontextischangingover time.therefore code process andqualitymetrics evolutionare ideally to be studied temporally which has been shown to perform betterthanstaticmetrics for predictingbuggy code .
we ask rq2 are project trajectories of graduated and retired asfi projectsdifferent alongour code process andqualitymetrics?
finally weputthemetricstogetherinamodelofprojectgraduation.
this question aims at exploring how well can our code metricsassociatewithgraduationfromtheincubator.weexpect theassociationbetweenqualityandsustainabilitycanbeidentified whilecontrolling the context thus we ask rq3 whatarethecode process andqualitymetricsdeterminants of whether a project is graduated versus retired?
are they differentfor differentprogramminglanguages?
data and methods inthissection wepresentthedatacollectionprocessandthemethodsusedinthe study.figure 1presents the overallprocess.
.
data collection we use the apache software foundation podlings.xml file 6for a complete project list.
it contains the project meta data project name incubation start and end date and current status graduated retired orincubating.intotal thelistcontained328projects outof which 236haveagitrepositoryongithub.therestoftheprojects are either svnbased orwe were not able to locate their repository thusweexcludethem.finally wecloneall236gitrepositoriesfrom 6urlto the podlings.xmlfile downloaded june2021apache s github organization.7to collect the metrics from the git repositoriesandthemailingarchives webuiltatoolinrustthat extractsdatafromrepositoriesanddownloadsthemailingarchives.
it then launches two other popular tools tokeifor extracting code size metrics files blanks lines code comments 8andsokrates for calculating code quality metrics 9and collects their output.
for each git repository we extract all commits and organize them into monthlybatches called incubationmonths basedontheirdate.a project s incubation months are computed for each month from their entry into the incubator start date and until they exit the incubator enddate .ifaprojectenterstheincubatoron2006 and leaves the incubator on2007 then the first incubation monthrunsfrom2006 15until2006 thesecondincubation monthrunsfrom until and so on until the incubation month which runs from until .
notethatthefirstandlastmonthmayhavelessdata.thisallows us tomore easilyalign withthe mailingarchives which are stored per calendar month.
we analyze the commits and extract process metrics for each incubationmonth.tocollectcodemetricsandcodequalitymetrics wecheckouttherepositoryatthelastcommitinthatrespective incubationmonthandrunthetoolsonthesourcecode.ourrust tool computesthe numberof directories and rootlevel directories and extracts process metrics.
we use tokeito extract code size metrics.tokei soutputprovidesthesemetricsforeachprogramming languagethatitfindsintheproject whichallowsustoalsoidentify andrecordthe dominantprogramming language i.e.
theonethat hasthemostlinesofcodeforeachincubationmonth.tosmooththe data forsmaller projects if in a particularincubation month there have been no commits we reuse the code metrics values from the previousmonth.iftherehasbeennoactivityinthefirstincubation month we initialize allcode andprocessmetrics to .
for the classificationofcommitsintochangetypes weusethe classifier from and use the available generated model into which we feed all the commits messages.10the output is a list withallcommitsandtheirclassificationlabel feature corrective fixing a bug perfective improving the code non functional not relatedtosourcecode e.g.
documentation orunknown unsure howtoclassify .
we aggregatethisasasum of commitsthat have the same label for eachincubationmonth andproject.
tomeasuredifferencesintheirdevelopmentprocess wecompute for each incubation month a selection of several popular metrics fromtheproject sgitrepository numberofcommits excludingmergecommits averagecommitsperdeveloper number of commit active days files added files deleted files modified average number of files modifiedper commit churn added deletedlines minorcontributors thosethatprovidelessthan5 ofcommits majorcontributors those thatprovide ormore of commits new contributors those that are first time commit contributors number of emails.
for code metrics we record the number of files lines comments blanks and code sloc project root level directories andtotal number of directories.
498code q uality andprocessmetrics in graduatedandretiredasfi projects esec fse november14 singapore singapore for the emails we download the devmailing list archives for each project and each incubation month.11we focus on direct and explicitcommunicationbetweendevelopers thereforewecountthe numberofemailsthatarenotjira relatedemails butwekeepthose jira emails containing commented in the subject.
we ignore other kind of jira emails e.g.
new issue issue resolved issue assigned etc.
.
we then extract a set of the developers emails that sent or replied to an email emails dev and the number of emails.
in amonth withnoemails thesemetrics have avalueof0.
we usesokrates toextract a numberof metricsrelated tofunctions file sizes mccabe complexity metrics at function level code duplication andtestsforeachincubationmonth.whilesokrates is not the most obvious choice due to the fact that our dataset exhibits a large number of programming languages sokrates is to thebestofourknowledge oneofthefewtoolsthatcanperform such widespread sourcecode analyses.
our datasets rscripts andtoolsare available onzenodo.
.
models to analyze how graduation is associated with code processes and codequality we use generalizedlinear regression glm andgeneralizedmixedeffect regression glmer models .we chosethe latter to account for potential random effects introduced by differentprogramminglanguages.weuserandthe glmerfunction fromthelme4package tobuildthemodels.wefirstcleanupthe data by removing a number of projects that have either no activity or have incomplete data.
from the total git repositories we eliminate projects resulting in observations across graduated and retired projects.
we further remove the top of the outliers resultingin5245 observations.
for each incubation month we record the most prevalent programming language in terms of code and we use that as a random effect.
we build three regression models a the base model b the base plus the process metrics c and the base plus process metrics plus code quality metrics.
the goal is to observe how the addition ofprocessandcodequalitymetricsassociatewithpredictingthe outcome graduationorretirement.webuildthesethreemodels fortwodatasets a glmmodelusingonlythejava basedprojects whicharethemajorityoftheprojectsinthedataset anda glmer model that includes all the projects and uses the programming languageasarandomeffect.recallthatwearealsointerestedin understanding if programming languages play a role in predicting the outcome.
next we check for multicolinearity using the variance influence factor vif using the check multicolinearity function from the performance r package .
values below indicate that multicolinearity is not significant.
we use two pseudo r2 valuestoreportthemodel sgoodnessoffit usingthe r2 nakagawa functionfromthesame performance rpackage.themarginalr2 represents the variance solely described by the fixed effects and theconditionalr2representsthevarianceintroducedbybothfixed and random effects in the model .
for creating the results table we use the sjplot package to create an html table which we then convert to latex.
the table shows the dependent variables predictors theodds ratio avalue 1hasapositiveeffect and effect on graduation andpvalues.
the probability definition of odds ration is u1d45d u1d45f u1d45c u1d44f u1d45c u1d451 u1d451 u1d460 u1d45f u1d44e u1d461 u1d456 u1d45c u1d45c u1d451 u1d451 u1d460 u1d45f u1d44e u1d461 u1d456 u1d45c.
for example an odds ratio of .
means the probability of success is higher withaunitincreaseinthe selectedvariable.
.
variablesofinterest formodeling we use23 independent variablesrepresentative of software metrics split intothree categories 1code linesofsourcecodewithoutcomments sloc number ofdirectories number oftoplevel directories .
2process majorcontributors minorcontributors newcontributors thenumberofauthorsthathavenotcontributedbeforethe currentincubationmonth filesadded thenumberoffilesaddedin this incubation month files deleted the number of files deleted in this incubation month avg.
files modified per commit the average numberoffilesthatweremodifiedinacommit itexcludesfiles that were added or deleted only those that existed and were modified active days the number of days in an incubation month that had at least one commit number of emails corrective the number of commits that fixed a bug or an issue features the number of commitsthataddedsomefeature perfective thenumberofcommits that enhanced e.g.
performance the code non functional the number of commits that were not code related for example addingdocumentation and incubationmonth .
3quality testcodesloc thisprovidesaproxyforhowmature a project is and its quality assurance the ratio between test sloc and sloc as a percentage a small value represents a project with few tests and weak code coverage number of functions that have a mediumriskcomplexity mccabeindexbetween11 functions should have a small cyclomatic complexity in order to be more easily maintained andtested number of functions that have avery highriskcomplexity mccabeindex verycomplex functions are indicators of bugs hotspots due to being very difficult to test numberofverylargefiles 1000sloc largefileshavebeenshown tobemorelikelytocontainfaults requiremoreeffortsfrom developerstounderstandandmanage andmakethecodelessreadable numberofverylargefunctions 100sloc largefunctions requireextraefforttomaintainandmakecodelessreadable number oflines ofcode for the most complex function .
results in this section we present the analysis results and summarise our findingsfor eachresearch question.
.
rq1 howdo graduatedandretiredprojects differ across ourcode process andquality metrics?howarethemetrics related pairwise?
ourdataset consistsof5365monthlysnapshotsfrom218projects acrossalltheirincubationmonths .amongthe218projects 184are graduatedand34areretiredprojects.table 1showsthedescriptive statisticsofour data acrossall23 metrics.
in contrast to yin et al.
here we focus on the properties of the code process and code quality metrics.
graduated and retired projects distinguish themselves in several ways.
first one 499esec fse november14 singapore singapore s tefanst nciulescu likang yin andvladimirfilkov table descriptive statistics of graduated projects and retired projects.
the mean median and st. deviation values are computed over all incubation months.
authors are developerswhomadechanges thoughtheydidnotnecessarily commit thosechanges.
graduatedprojects 34retiredprojects mean median st.dev mean median st.dev sloc .
.
.
.
.
.
commits .
.
.
.
.
.
directories .
.
.
.
.
.
top leveldirectories .
.
.
.
.
.
incubationmonths .
.
.
.
.
.
authors .
.
.
.
.
.
majorcontributors .
.
.
.
.
.
minor contributors .
.
.
.
.
.
newcontributors .
.
.
.
.
.
files added .
.
.
.
.
.
files deleted .
.
.
.
.
.
files .
.
.
.
.
.
avgfiles modifiedper commit .
.
.
.
.
.
active days .
.
.
.
.
.
emails .
.
.
.
.
.
corrective .
.
.
.
.
.
features .
.
.
.
.
.
perfective .
.
.
.
.
.
nonfunctional .
.
.
.
.
.
number offunctions .
.
.
.
.
.
test mainlinesofcode percentage .
.
.
.
.
.
functions wmccabe index .
.
.
.
.
.
functions wmccabe index .
.
.
.
.
.
verylargefilesize count .
.
.
.
.
.
verylargefunctionsize count .
.
.
.
.
.
code duplication percentage .
.
.
.
.
.
most complex functionloc .
.
.
.
.
.
requirement for graduating from the incubator is to attract new contributorstotheprojects.ourdataindicatesthatretiredprojects are on average much less likely to attract new contributors during their incubation period and have fewer main contributors.
second projects have different code and process characteristics.
graduated projects have more sloc but retired have more sloc per contributor.
similarly for directories.
and while retired projects are smallerinsize theymodifyonaverage5.2filespercommit.graduated projects modify on average .
files per commit but they are muchlargerandhavemorefiles.thus wecanarguethatretired projects have a different committing style a consequence possibly of less stringent rules on how to make changes.
furthermore retiredprojectsseemtodeletesignificantlyfewerfiles.third there are differences from a code quality perspective.
graduated projects seemtobemorecomplex havingmorelargefiles 1000loc and almost twice the average of the number of very large functions 100loc whencomparedtoretiredprojects.perhapsinlinewith that graduatedprojectsexhibitmore test code thanretiredones.
rq1summary graduatedandretiredprojectsdifferentiatethemselvesthroughtheircode graduatedhaveless codeperauthor andlessdirectoriesperauthor processes graduated commit more and delete more and quality graduatedhave more complex code andmore test code .
.
rq2 areproject trajectoriesofgraduated andretiredasfiprojects different along ourcode process andqualitymetrics?
we find that the average incubation time over all projects is months with the average for graduated projects being months and for retired projects months.
retired projects stayed on average 8months longerin theincubator than graduated projects.
we observethatanumberofprojectsthatstaylongintheincubator stillmanagetograduate 28graduatedprojectsstayed36ormore monthsintheincubatorandstillgraduated whereas16ofthe34 retiredprojectsstayedatleast36monthsintheincubator.afeasible reasonforthisdifferenceisthatonaverage retiredprojectsmay needlonger timeto develop andget theappropriate accommodation for that.
yin et al.
found that while the shorter time spent inincubationisacharacteristicofmanygraduatedprojects that byitself isnot avery goodpredictorof graduation.
.
.
.
incubation monthactive daysincubating months incubation monthactive daysincubating months graduated retired figure the number of commit wise active days per incubation month.
an active day is a day that had at least one commit.
on the left are projects incubating for months or more on the right projects that spent months or less in the incubator.
for readability reasons we show only the first24months ofdata.
on the other hand projects that stay shorter in the incubator seemtodosobecausetheyarebetterequippedtograduatefrom the start see fig.
right plot and even increase their average incubation monthavg.
commits per contributorincubating months incubation monthavg.
commits per contributorincubating months graduated retired figure average number of commits per developer metric.
leftplotshowsprojectsthatwereintheincubatorformore than24monthsandrightplotforprojectsthatspentless24 months or less in the incubator.
for readability reasons we show onlythefirst24months ofdata.
500code q uality andprocessmetrics in graduatedandretiredasfi projects esec fse november14 singapore singapore numberofcommitsperdeveloperinthefirstfewincubationmonths.
figure2showsthenumberofactivedaysineachincubationmonth.
retiredprojectsstartwithonlyfivedaysofcommitactivityamonth for projects incubating months and that decreases towards noactivityafter20monthsofincubation.similarly retiredprojects in projects that are in the incubator for at least months have a linear decrease of activity reaching less than four active days aroundmonth22intheincubator whereasgraduatedprojectstend to average 10active daysper incubationmonth for longer period of times.
it is clear that graduated projects have a more steady commit activity throughout the incubation month which might be one of the main factors for a more successful long term project development.
graduatedretired major contributors graduatedretired minor contributors graduatedretired new contributors figure major minor and new contributors log scale in graduated andretired projects.
along commit activity we want to understand what kind of contributorscontributetoaproject.wedefinethreetypesofcontributors major contributors those that commit or more of the total commits minor contributors those that contribute less than5 ofthetotalcommits and3 newcontributors thosethat are first time contributors have not contributed before .
figure 4shows that graduated projects are capable of attracting a few newcontributors whereasretiredprojectsarelesslikelytodoso.
analyzingtheminor majorcontributorsthroughouttheincubation period we observe a linear increase for both minor and major contributors in graduated projects and the opposite in retired projects.
graduated projects are likely more capable to recruit new developersandretainexistingones indicatedalsobythenewcontributors metric .interestingly minorcontributorsseemtobemoreprevalent ingraduatedprojectsthaninretiredprojects.fromasustainability perspective minor contributors could become committers and maintainers ofthe project.thus projectsand maintainers should considerattractingandprovidingguidancetominorcontributors as awayofexpandingthe project s community.
next wefocusonunderstandingtherelationshipbetweendevelopers and files.
we compute the ratio between the number of files and the number of contributors which provides us with a measure of development effort.
figure 5shows two plots on the left we see the ratio between the number of files and number of contributors whereasontherightweseeevolutionofthecodebasesizeinterms of sloc.
we observe that retired projects size increases in the first18monthsoftheincubation andtheratiooffiles contributors200400600 incubation monthratio between number of files and contributorsratio between number of files and contributors incubation monthlines of codelines of code graduated retired figure plots showing the ratio between files and number ofdevelopers left andtheevolutionofthecodesize right forall218 projects.
increaseslinearlyaswell.thatmeansthatwhileretiredprojects codebase is increasing the number of contributors decreases or staysthesame.inotherwords retiredprojectsdonotseemtobe able to sustain their development efforts due to fewer contributors.
inthecaseofgraduatedprojects weseetheratiooffiles developer alsoincreasing butbeingquitelowerthanthoseofretiredprojects.
this indicates that graduated projects while bigger in size are more capable of attracting or retaining developers to cope with the increaseofthe codebase ssize.
projects evolve differently from a process perspective also leading to different outcomes.
graduated projects exhibit a higher numberofcommitsperdeveloper havemorecommitactivedays throughout the incubation recruit more new contributors and are abletoincreaseandsustaintheiractivityinthefirstfewmonths in the incubator.
they also communicate more via emails.
these projects have a different approach to working once they enter the incubator.
in projects that incubate for a shorter period of time retiredprojects arelessactivefrom thestart and becomeinactive commit wise towards month of the incubation period.
projects thatareabletohavemorecommitactivitythroughouteachmonth are more able to keep ongoing the development.
previous work by yin et al.
showed thatthe number of commitsand the developer network are correlated with graduation.
we further find that not only the number of commits is relevant but also how often and what kind of changes happen.
projects should also keep an eye ontheir code quality andcomplexity in additiontogrooming long termandshort term contributors.
case study.
from the data we collected we posit that there are different incubation strategies.
some projects have a a short but highintensitydevelopmentperiod andthereforetheygraduatefast.
forexample spamassassinspent7monthsintheincubatorand had an average of commits per month from .
contributors.
anotherexampleissparkwhichspent9monthsintheincubator averaging272commitspermonthfrom35contributors.14these were clearlyunderintense andsustaineddevelopment.
other projects strive to keep an ongoing activity despite the fewer commits and email exchanges.
apache celix is a framework 501esec fse november14 singapore singapore s tefanst nciulescu likang yin andvladimirfilkov to develop modular software applications.15the project incubated for45months hadfourcontributorsand308commits.however for 39monthstherewassomeactivityintheproject eitherviacommits orviaemails.theprojectisstillactiveandunderdevelopmentafter its graduation.
an opposite example is weex 16a framework for building mobile cross platform high performance uis.
weex spent months in the incubator and had a very high commit activity for the first months commits .
from month to month there was almost no activity only commits in total and developers faced issues in graduating which ultimately meant that theprojecthadtoberetired.afteritsretirement itmovedunder alibaba s open source organization and continued to be developed.
theseprojectsforgedtheirownpathandevolvedindifferentways.
assuch thereisnoexactonewayaprojectmaygo insteadthey needtoconstantlyadaptandadjustbasedontheircurrentprocesses code andothersocio technical factors.
rq2summary graduated and retired projects follow differenttrajectoriesoncetheyentertheincubator.some projects are better equipped to graduate fast while others strive foramore constantbutlesscommit heavyactivity.
finally retired projects are more likely to have a higher burdenpercontributorduetohavingfewercontributors anincreasingcodebasesize andbeinglesslikelytoattract newcontributors.
.
rq3 whatarethecode process and qualitymetrics determinantsofwhethera project isgraduatedversus retired?
are theydifferentfordifferentprogramming languages?
in the previous rqs we examined metrics pairwise and in relationshiptoasfsustainability.tostudytherelationshipbetween sustainability and code quality in the presence of multiple other metrics weusegeneralizedlinearandmixedeffectslogisticmodels.
we have different programming languages in our data set with a large spread of the number of projects using a specific language from160projectsinjavato1projectusingcvx.asjavaisthepredominant programming language used by asf incubator projects we first provide insights from projects that use java as the primary programming language and then we compare the models built on onlyjavaprojectstomodelsonallprojectsprogramminglanguages intheasfincubator.inthefollowingwepresentthosetwostudies.
java projects.
the results of the first study on all java projects areshownintable .thethreeregressionmodelsarepredicting thebinaryoutcomeofgraduationorretirement thefirstusingbase code metrics thesecondaddsprocessmetricstothebase andthe thirdisthefullmodel withallcode process andqualitymetrics.
this allows us to understand the contribution of the different metricsgroupstotheefficacyofthemodels.wewillusethefullmodel for explainingthe details.
incodemetrics asexpected moreslocincreasestheoddsof graduationby15 .thetopleveldirectorynumberisinteresting it is significant and negative implying lower odds.
this is consistent with the notion that less complex code is easier to maintainandthusneedsfewerpeople.asacontrol havingahigher value for the incubation month decreases graduation substantially lower odds as discussedearlierinrq2.
in process metrics major contributors is positively and significantly associated with graduation yielding increased odds thatis havingmoremajorcontributorsthatcontribute95 ormore of the total commits the more likely it is to graduate i.e.
to become asf sustainable .
the effect of minor contributors is small increaseinodds butsignificant.priorworkhasshowntheyare valuable.theyoftenpicklowhangingfruitissuestofix orwork on the code for their own needs.
in the long term some of those minor contributorsare given commit access and the possibilityto jointhe project enabling aproject s long termsustainability.
code usually evolves through different kind of changes includingaddingfiles removingfiles fixingbugs addingnewfeatures creating documentation or performing re factorings.
we use the numberofaddedfilesandthenumberofdeletedfilestosimulate the dynamics of the code evolution from a file organization perspective.
the model shows that there is a small negative effect decrease in odds and borderline significant for projects that delete more files during their incubation period.
moreover we find that the average number of files modified per commit has a significant negative effect on graduation lowering the odds by .
ideal changes should of course be small and well documented in a commit.
when the code is complex with many dependencies asisthecasewithgraduatedprojectsonaverage itislikelythat more files would have to be modified per commit.
this could be attributed to code dependencies less scrutiny over how to commit changes ordevelopers experimenting more withthe code.
we also find that two types of commit changes are associated withgraduation correctivecommits whichfixbugsandissues and featurecommits whichthataddnewfeatures haveasignificant positive effectongraduation eachadding7 to the odds.
in code quality metrics first having a higher number of files with more than 1kloc has a sizeable negative effect drop in the odds associated with graduation.
one possible reason for this is the fact that large files are more difficult to maintain and test and to collaborate on.
on the other hand projects that have a higher number offunctions of very large size 100loc are more likely to be self sustainable by almost the same odds difference.
this is somewhat surprising and merits further study.
given the verbosityofthejavalanguage wewouldexpectthatsimplyhaving more functions modularity of reasonable sizes is important from themaintenance programcomprehension readability andtesting perspective.whilesometimescodeclonesarenotconsideredharmful many othertimescloned codeleads to more maintenance effort due to the need of fixing the code in multiple places.
the model showsthat themoreduplicatedcodeaproject has theless likelyitistograduate.finally andsurprisinglytestloc codeloc does not appear to be significant for sustainability.
allprojects.
we performed a second study on all projects after excluding nine projects that solely use a certain language i.e.
we eliminateprojectswhosedominantcodinglanguageisonlyused bythem .thereweusedageneralizedlinearmixedeffectmodel withprogramminglanguage astherandomeffect.theresultsare 502code q uality andprocessmetrics in graduatedandretiredasfi projects esec fse november14 singapore singapore table2 summaryofthreeglmmodelsforjava basedprojects.dueto codeanddirectories beinghighlycorrelated weremoved thedirectories variable.similarly we removed the most complex functionloc variable.
base base processes base processes quality predictors odds ratios p odds ratios p odds ratios p intercept .
.
.
.
.
.
sloc .
.
.
.
.
.
toplevel directories .
.
.
.
.
.
incubation month .
.
.
.
.
.
major contributors .
.
.
.
minor contributors .
.
.
.
newcontributors .
.
.
.
files added .
.
.
.
files deleted .
.
.
.
avg.filesmodifiedper commit .
.
.
.
emails .
.
.
.
corrective .
.
.
.
features .
.
.
.
perfective .
.
.
.
non functional .
.
.
.
test main linesofcode percentage .
.
functions wmccabe index .
.
functions wmccabe index .
.
very largefile size count .
.
very largefunction size count .
.
code duplicationpercentage .
.
observations r2tjur .
.
.
shownintable .therandomeffectassumesalargeportionofthe variance in the full model .
conditional vs. .
marginal as expectedduetotheoversizedimportanceofprogramminglanguage choiceonallaspectofcode process andquality.
we note that the results are qualitatively very similar as the resultsononlyjavaprojects.thisisnotunexpectedsince76 of theprojectsarejavaprojects andthusthepropertiesofthejava projectscarryover.still theremainingprojectsdoshowsignificant congruence with table .
it did occur to us to contrast our metrics betweenfunctionalandimperativelanguages.unfortunatelywe didnothaveenoughexamplesofprojectsusingtheformerinorder to fitamodelsuccessfully.
rq3summary we find that an increase in the following increasestheoddsof graduation linesof code major and minor contributors features commits corrective commits mediumcomplexity 25mccabe functions and verylargefunctions.ontheflipside theincreaseinthe following decreases the odds top level directories avg.
filesmodifiedper commit very large filesizes and code duplicationpercentage.
discussion westartwithacaveataboutregressionandcausality.whenmodels are well fitted and confounds are accounted for multiple regression can quantify directional effects e.g.
variable x on variable y and thus methodologically go beyond mere symmetric correlation.
hence the standard language used the effect of changing variable xis thatvariabley willchange etc.however thisisnot toimply any strictcausalityrelationship temporalor otherwise.moreover quasi experimentalstudieslikeoursthatdonotrelyonrandomized groupassignmenthaveingenerallowerdiscoverypowerthanwell designedrandomizedtrials .
we found that the coefficients of some code quality and process measuresareconsistentacrossdifferentprojects whilesomeothers are not.
e.g.
the number of major contributors are positively associated with project sustainability.
it suggests that increased number of champions in technical contributions is a signal for project sustainability.
as for the design implication we suggest thatossmaintainersshouldhelpcreateapositivefeedbackloopfor allcontributors givingmoreownershipandresponsibility while at the same time offering the flexibility to choose what features to work on and contribute to the project s long term vision .
we also find that the number of corrective commits are positive across projects suggesting that the presence of explicit corrective message contained in commits may aid project sustainability.
such 503esec fse november14 singapore singapore s tefanst nciulescu likang yin andvladimirfilkov table summary ofthree glmm models forallprojects.the marginalr2ismuch smaller than forthe java based models.
base base processes base processes quality predictors odds ratios p odds ratios p odds ratios p intercept .
.
.
.
.
.
sloc .
.
.
.
.
.
directories .
.
.
.
.
.
top level directories .
.
.
.
.
.
incubation month .
.
.
.
.
.
majorcontributors .
.
.
.
minor contributors .
.
.
.
newcontributors .
.
.
.
files added .
.
.
.
files deleted .
.
.
.
avg.
files modifiedpercommit .
.
.
.
active days .
.
.
.
emails .
.
.
.
corrective .
.
.
.
features .
.
.
.
perfective .
.
.
.
nonfunctional .
.
.
.
test main lines of codepercentage .
.
functions wmccabe index11 .
.
functions wmccabe index .
.
very large file size count .
.
very large function size count .
.
codeduplicationpercentage .
.
most complexfunction loc .
.
observations marginal r2 conditional r2 .
.
.
.
.
.
resultsuggestscorrectivemessagesdonotmaketheprojectlook bad theymayinsteadsignalagreenlightonthesustainabilityof the project corrections are encouraged.
moreover we found the average file modified per commit among all process measures has the most negative effect on project s sustainability.
along with the evidencethatthenumberoffilesthatcontainmorethan1000loc andthefunctioncomplexitybeingnegative wesuggestthatacommit should only contain the files that are required for that specific change and to consider modularizing and refactoring large files and complex functions to reduce maintenance and development costs .
the fact that code duplication is negatively associated with sustainability makes sense duplicated code is apain to maintain and givesrisetotechnicaldebt .checkingforduplicatedcode and specifically assigning resources to refactor such code clones should be prioritized at different stages throughout the project s evolution.
if possible at all avoiding the practice is good advice that willlower the maintenanceeffortslateron.
weweresurprisedtofindthatthenumberofverylargefunctions increasestheoddsofgraduationasverylargefunctionsaredifficult to maintain.
this can benefitfrom further study.
threats to validity internalvalidity.
collectingcodequalitydataonprojectsinvolving a large number of different programming languages is difficult.
although we found no evidence of this in spite of spot checking one internal threat to our study remains that the sokrates tool may not correctly collect and compute different metrics e.g.
complexitymetricsarenotcomputeduniformlyacrossprogramming languages due to the intricate differences between them .
likewise the commit classifier might not be as accurate on our commit dataset as in the original study even though it was trained on morethan5 000commitsyieldinggoodaccuracy.thisisacceptable forourscope asfindingthebestcommitclassifierisoutofscope for this work.
in our modelingwe use the programming language as a random effect to control for any effects introduced by the programming language.
while most of the projects have sufficient recorded data e.g.
commits some repositories had no history e.g.
guacamole were an umbrella project for several projects myfaces or had too few observations to make any meaningful conclusions.thus weexcludedsuchprojectsand alsoeliminated those projects that have the majority of code written in lua go erlang css c kotlin autoconfduetobeingtoofewprojectsthat use theselanguages andthus havingvery fewobservations.
504code q uality andprocessmetrics in graduatedandretiredasfi projects esec fse november14 singapore singapore external validity.
we carefully validated our hypotheses and answered our research questions based on the asf incubator data.
generalizationbeyondasfprojectsmightbedifficult duetothe specificframeinwhichasfincubatingprojectsevolve.anyfurther generalizationtoprojectsbeyondasfmustbemadewithcare.our aim was to provide evidence that these systems require complex analysis involving multiple perspectives including the source code andthe processes.
conclusion motivatedby priorwork onosssuccess health and sustainability anddrivenbycontingencytheory wehypothesizedthatthereis alink between project graduationand code process and quality metrics of software in asf incubator projects.
in this paper we presentedthefirststudyknowntousassociatingcode processand quality with oss sustainability.
we find that while retired projects have a slightly higher cyclomatic complexity when adjusted for projectsize theirretirementdoesnotseemtobeassociatedwith bugs complexity or technical debt.
we find that both major contributors and minor contributors though less significant play a positiveroleinincreasingthesustainabilityofossprojects.among the process and quality factors the file size function size function complexityseemtobemostnegative suggestingkeepingworkflow simpleandconciseisofimportancetosustainability.weconsolidate thosefindingsintotakeawaysforpractitioners.thinkingahead we hope to generalize our modelto projectsoutside apache software foundation and develop tools for instrumenting general github projectsto helpthemonthe trajectories to sustainability.
acknowledgement we are grateful to the national science foundation for funding this project under gcr grant .
we thank the fse reviewers for theirconstructive comments.