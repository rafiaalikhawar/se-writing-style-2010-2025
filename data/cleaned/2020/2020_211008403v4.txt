nalanda a socio technical graph platform for building software analytics tools at enterprise scale chandra maddila chandu.maddila gmail.com microsoft research usasuhas shanbhogue suhas0711 gmail.com microsoft research indiaapoorva agrawal t aagraw microsoft.com microsoft research india thomas zimmermann tzimmer microsoft.com microsoft research usachetan bansal chetanb microsoft.com microsoft research usanicole forsgren niforsgr microsoft.com microsoft research usa divyanshu agrawal divagrawal microsoft.com microsoft research indiakim herzig kimh microsoft.com microsoft usaarie van deursen arie.vandeursen tudelft.nl delft university of technology the netherlands abstract software development is information dense knowledge work that requires collaboration with other developers and awareness of artifacts such as work items pull requests and file changes.
with the speed of development increasing information overload and information discovery are challenges for people developing and maintaining these systems.
finding information about similar code changes and experts is difficult for software engineers especially when they work in large software systems or have just recently joined a project.
in this paper we build a large scale data platform named nalanda platform to address the challenges of information overload and discovery.
nalanda contains two subsystems a large scale socio technical graph system named nalanda graph system and a large scale index system named nalanda index system that aims at satisfying the information needs of software developers.
to show the versatility of the nalanda platform we built two applications a software analytics application with a news feed named mynalanda that has daily active users dau of and monthly active users mau of and a recommendation system for related work items and pull requests that accomplished similar tasks artifact recommendation and a recommendation system for subject matter experts expert recommendation augmented by the nalanda socio technical graph.
initial studies of the two applications found that developers and engineering managers are favorable toward continued use of the news feed application for information discovery.
the studies also found that developers agreed that permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse november singapore singapore association for computing machinery.
acm isbn .
.
.
.
system like nalanda artifact and expert recommendation application could reduce the time spent and the number of places needed to visit to find information.
ccs concepts software and its engineering programming teams .
keywords collaborative software development socio technical graphs recommender systems for software engineering empirical study acm reference format chandra maddila suhas shanbhogue apoorva agrawal thomas zimmermann chetan bansal nicole forsgren divyanshu agrawal kim herzig and arie van deursen.
.
nalanda a socio technical graph platform for building software analytics tools at enterprise scale.
in proceedings of the 30th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse november singapore singapore.
acm new york ny usa pages.
introduction building software is a highly collaborative process that requires awareness of the activities by many different stakeholders and interaction with many different artifacts such as files pull requests and work items.
at the same time large scale software development creates lots of data about how people work with each other and with software artifacts.
as a consequence finding information can be hard especially when software engineers work on large software projects with thousands of files and team members.
a lot of times this knowledge about software development activity and expertise is hidden in the form of software development process data and the interaction map between stakeholders and artifacts.
this data is hard to mine and represent in a form that allows practitioners to build applications on top of this data.
this is primarily due to the scale at which this data is generated and the fact that this data is scattered across disparate data sources and systems.
therefore it is hard to take full advantage of this data and extract hidden knowledge arxiv .08403v4 sep 2022esec fse november singapore singapore c. maddila et al.
figure nalanda s graph schema without employing a plethora of tailored tools customized for each source control system and the software development environment.
socio technical data that captures social and technical aspects of software development is often captured in graph structures.
for example the hipikat tool builds a project memory from past activities to support newcomers with software modification tasks .
in the codebook framework was introduced with a focus on discovering and exploiting relationships in software organizations to support inter team coordination .
codebook provided a graph and a query language to support a wide range of applications find the most relevant engineers find out why a recent change was made and general awareness of engineering activity .
codebook was built for a single team with developers only.
with the advent of cloud services the scale at which software development happens and the volume of data generated during the software development process increased significantly .
to address the challenges that come with scale in this paper we present a large scale software analytics data platform named nalanda1which is built on top of the software development activity data and the artifacts.
nalanda builds a socio technical graph at enterprise scale with thousands of repositories.
additionally the nalanda index system helps with the search and recommendation of software development artifacts and the experts.
nalanda stores its graph in a native graph database and optimizes heavily to query complex relationships so that software analytics applications can operate directly on the graph via cloud services and a high degree of performance.
the nalanda platform which is a generic and enterprise scale software analytics data platform consists of two subsystems the nalanda graph system which provides a large scale socio technical graph of software data and the nalanda index system which is an enterprise scale index system that can be used to support a wide range of software engineering tasks such as recommendation and search.
nalanda scales to enterprise scale data from repositories.
the socio technical graph has nodes and 1nalanda is named after an ancient university and knowledge center located in india.
it is famous for its huge corpus of scriptures books and knowledge repositories.edges the schema of the nalanda graph is shown in figure .
the index system contains documents.
to show the versatility of the nalanda platform we describe two tools that have been built on top of the nalanda platform and deployed at microsoft a software analytics news feed application built on top of the nalanda graph system named mynalanda and a novel recommendation system nalanda artifact and expert recommendation application leveraging the socio technical graph for ranking the recommendations.
the goal of this paper is to describe the design implementation and deployment of the nalanda graph system the index system and two successful applications mynalanda and the nalanda artifact and expert recommendation application built and deployed at microsoft.
we also share details about the extensive analyses and user studies that we conducted to evaluate the perceived usefulness of mynalanda and nalanda artifact and expert recommendation application from our deployments at microsoft.
additionally we share insights from building the nalanda platform mynalanda and the nalanda artifact and expert recommendation application.
to that end we explain the construction of the nalanda graph system in section and the index system in section .
we explain the applications built leveraging these two systems i.e.
mynalanda in section and the nalanda artifact and expert recommendation application in section .
building the nalanda graph key challenges in the construction of the nalanda graph are scale and consistency.
in this section we lay out what content we store in the nalanda graph from which sources we collect the data and how we ensure that the graph is kept up to date and consistent as hundreds of thousands of events from thousands of repositories arrive on a daily basis.
.
nalanda s graph schema nodes in the nalanda graph represent the actors or entities involved in the software development life cycle while the edges represent the relationships that exist between them.
each node in the nalanda graph has a type associated with it and attributes specific to that node type as listed in figure .
the central node is the pull request which has incoming edges from author reviewer work item and repository nodes and has a outgoing edges to filenodes changed by the pull request.
a developer takes the role of an author when they make source code changes and submit pull requests and they assume the role of a reviewer when they perform code reviews.
these are represented as user nodes in the nalanda graph with different edge types but are listed here as two different nodes in figure for clarity.
for filenodes different types are distinguished including source code configuration and project files.
files are edited by the authors via pull requests.
files are represented as nodes in the nalanda graph with a second order relationship established between the user and file nodes via a pull request node.
edges in the nalanda graph represent the relationships between various actors and entities.
like nodes edges can be of different types and can have properties associated with them.
an edge is created between an author node and a pull request node when analanda a socio technical graph platform for building software analytics tools at enterprise scale esec fse november singapore singapore figure nalanda s data collection and graph construction architecture developer creates a pull request.
similarly an edge is established between the reviewer and the pull request nodes when a developer is assigned a code review.
a linked to edge is created when developers link a pull request to a work item commonly done in azure devops to connect earlier related pull requests to new issues.
likewise a parent of edge is created between two work items if they are linked by the developers with a parent child relationship in azure devops.
finally a reports to edge is created between two user nodes if one of them is the reporting manager of the other.
.
data collection and graph construction the nalanda platform architecture is shown in figure .
the primary source of data for the nalanda graph is azure devops.
instead of directly crawling the azure devops system for data we leverage an intermediate data source called cloudmine .
the nalanda platform takes the raw event data from cloudmine and processes it to create the nodes and edges of the nalanda graph.
the graph can be queried using the apis we provide or directly by means of the graph query language gremlin .
the platform builds upon azure key services used include azure batch azure cosmosdb azure sql server azure blob storage and lens explorer .
as shown in figure the nalanda platform is built using two independently operated pipelines a data aggregation pipeline and a graph construction pipeline as explained below.
.
.
nalanda s data aggregation pipeline.
as indicated as step in figure the data aggregation pipeline is responsible for fetching data from different data sources most notably cloudmine and making it available for the graph construction pipeline to process.
we use lens orchestrator for orchestration and scheduling purposes.
lens has the ability to connect to multiple data sources and systems and move data around.
in the aggregator pipeline lens first connects to the cloudmine data store which is hosted on cosmos and executes scope scripts to gather data from various data streams such as the pull request stream the work item stream the code review stream etc.
lens saves the aggregated data in the form of csv files in cosmos.
then lens connects to azure blob storage to temporarily store these csv files for further processing.
this intermediate store is required as cloudmine does not allow any other service except lens to connect to and access the data files for security and compliance reasons.table comparison of pipeline run time and number of records with the increase in number of repositories mode run time records to process repos repos repos repos bootstrap hrs hrs .05m .41m incremental min min 10k 57k additionally we use the lens job scheduling utilities to configure a job in lens to run once every eight hours to pull the latest data from cloudmine and save it to the azure blob storage.
.
.
nalanda s graph construction pipeline.
once the data is available in azure blob storage we process it using an azure batch job to construct the nalanda graph steps and in figure .
we use azure cosmosdb as our graph data store.
when the batch job discovers new data files as generated by the aggregation pipeline it updates the pipeline registry with new file information.
this includes file names size timestamp whether the file contains data from the bootstrap or the incremental stream file processing status processing duration etc.
the pipeline registry is a sql database whose purpose is to serve as a transactional store for the graph construction pipeline.
we create one row in the pipeline registry database for every file discovered.
after the new data is downloaded for each data file the corresponding node and edges are added to deleted from or updated in the nalanda graph.
once all data for a file is read its registry status is set to completed .
the graph construction pipeline operates in two modes bootstrap mode and incremental mode.
bootstrap mode.
this mode helps ingest all of a repository s data from repository creation time until when it is run.
typically we run this mode for a repository when it is being onboarded onto the nalanda graph platform for the first time.
incremental mode.
this mode helps keep the data in the nalanda graph updated without needing to read the massive original streams of cloudmine whose size is in the orders of hundreds of terabytes using the incremental streams offered instead with sizes in the order of tens of gigabytes .
we run the incremental pipeline once every eight hours.
these separate modes offer the flexibility to bootstrap any new or existing repository data in an independent and asynchronous manner.
furthermore the separation of bootstrap and incremental pipelines offers substantial performance improvement in terms of run time and resource utilization as illustrated in table .
refreshing the data by querying the original streams of cloudmine each time the pipeline is run takes hours for repositories.
as the incremental streams are substantially smaller each incremental job finishes in minutes yielding an improvement of .
in pipeline run time for each pipeline run.
note that for an increase of the number of repositories by a factor of the run time for the bootstrap mode was increased by a factor of only.
this is an effect of the careful design and implementation of the data pipeline by massively parallelizing the data processing code and enabling distributed processing on multiple azure batch nodes.esec fse november singapore singapore c. maddila et al.
table nalanda node and edge types and their prevalence node type count file text pull request work item user repository total nodes 706edge type count changes reviews creates contains linked to parent of comments on total edges .
data consistency and self healing the nalanda graph platform is a distributed system that works with multiple external data sources and large scale data processing systems which are prone to introduce data inconsistencies.
data gaps can manifest due to various factors related to infrastructure and availability of the cloudmine crawlers.
detecting and remediating data gaps in such a massive distributed system is not a trivial task.
we devised a novel self healing system that detects data gaps and consistency issues proactively and performs self healing.
this helps the pipeline to guarantee data consistency irrespective of the failures manifested in external data sources such as cloudmine.
the self healing system uses the pipeline registry to monitor pipeline states and can switch from incremental to bootstrap mode if this is warranted.
when an incremental pipeline is run the timestamp of the oldest record to be processed is compared with the timestamp of the last successful pipeline run.
if the difference between these timestamps is bigger than three days the period for which incremental streams hold their data this means a data gap has occurred.
to address this the bootstrap mode is triggered for the repositories involved and ongoing incremental pipelines are halted.
furthermore the pipeline registry is updated to indicate that bootstrapping is taking place thereby locking new incremental jobs.
.
scale the nalanda graph has been designed to accommodate thousands of repositories.
at the time of writing it holds the software development activity data from repositories at microsoft.
we ingest data starting from january or from more recent repositories when their first pull request is created.
to keep its graph up to date the nalanda platform processes events per day.
these events include new pull requests updates or commits on those pull requests pull request state changes code review assignments and code review comments.
at the time of writing the nalanda graph contains million nodes and million edges as detailed in table .
indexing nalanda for information retrieval many nodes in the nalanda graph contain text.
to facilitate search over such text at the nalanda scale we need to create appropriate indexes.
the actual indices needed may depend on the specific applications built on top of the nalanda graph.
in this section wediscuss the indices we create and how we ensure they remain up to date at scale.
for every search we use the bm25 algorithm for determining text similarity between a query and documents pull requests work items ... and ranking the results.
bm25 is a bag of words model developed based on the probabilistic retrieval framework .
for a given query q containing keywords q ... q n the bm25 score for a document d is score d q n i 1idf qi f qi d k1 f qi d k1 b b d avgdl wheref qi d isqi s term frequency in the document d idf qi is qi s inverse document frequency d is the length of the document din words and avgdl is the average document length in the text collection from which documents are drawn.
k1andbare free parameters.
we use standard recommended values b .
k1 .
for these constants .
.
the nalanda artifact index the nalanda artifact index facilitates search through pull requests and work items.
we index the metadata titles and descriptions of the artifacts pull requests and work items .
the metadata consists of elementary properties namely project name repository name and organization name.
the nalanda artifact index can be used to find relevant pull requests given a work item feature technical or functional concept.
furthermore with this index completed pull requests and work items can be used as a template and inspiration to solve similar problems.
they provide code samples expose code review comments and help as informal documentation to learn the best practices.
additionally they help understand the team or project specific processes involved in getting such pull requests completed.
.
the nalanda expert index the nalanda expert index is built to map subject matter experts smes to technical and functional skills.
experts can be of two types functional and technical.
functional experts have expertise in specific functionality of a software product or service such as the query optimizer in an rdbms product or the ranker in a search engine product.
technical experts have expertise with a technology concept such as socket programming in java.
the nalanda expert index relies on a collaborative software development platform like azure devops to mine and associate expertise with people.
we match pull requests and work items as also used for the artifact index to their authors and contributors.
the process of building the nalanda expert index consists of the following steps find all pull requests and work items completed by a developer and extract key phrases from them.
the key phrases include tokens in pull request minus english stopwords .
create a document using the data from step which is the representation of a developer s skills.
repeat steps for every developer and builds the corpus for the expert indexnalanda a socio technical graph platform for building software analytics tools at enterprise scale esec fse november singapore singapore similar to the nalanda artifact index we use the bm25 algorithm for querying the expert index corpus.
the intuition is that if a developer makes frequent code changes related to a topic functional or technical they must be knowledgeable in that topic area.
we represent the frequency of a topic in a developer s activity as term frequency in the bm25 index.
therefore the more a topic appears in the document corpus constructed for that developer the more weight that topic is given.
we leverage the nalanda socio technical graph for re ranking the search results returned by the artifact and expert indices.
a detailed analysis of the impact of employing the nalanda graph in refining the search results is discussed in section .
.
.
scale building indices such as the artifact and expert index at scale is an expensive operation.
we carefully crafted the system design to make the nalanda index creation and refresh pipelines robust and tolerant to failures details about implementation are explained in section .
.
the nalanda search system has been built as a cloud native service.
this enables us to scale out the system horizontally with the increase in data and query volume.
this also helps us in meeting high uptime service level agreements slas requirements to move to production.
currently the artifact index contains documents and the expert index contains documents.
we ingest data from repositories.
our index data refresh pipeline which runs once every week completes in minutes on average.
the graph data refresh pipeline which runs every hours and finishes in minutes.
we optimized the api service to return the response in .
seconds in accordance to the sla requirements.
nalanda applications i the mynalanda portal the nalanda graph and indexing platform can be used to build many applications to support software development teams and organizations in their daily work.
the first application we discuss is mynalanda an online news feed in production at microsoft in which developers and managers alike can monitor ongoing software development activities.
.
mynalanda motivation the motivation behind mynalanda is that it is common practice for developers to work on multiple work items or pull requests at once.
it is also common practice for developers at microsoft to work on multiple source code repositories simultaneously.
microsoft does not have many large mono repositories but a lot of small or medium sized repositories.
keeping track of one s work items in their repository or across multiple repositories is a difficult and time consuming task.
moreover these tools operate in a workitemcentric fashion i.e.
the primary goal of the tool is to search for and find a work item one is interested in.
by contrast mynalanda is a developer centric news feed.
upon login mynalanda shows the activity pull request work item code review of a developer from multiple repositories in their homepage.
additionally mynalanda enables developers to discover what their teammates and other collaborators are working on without the hassle of going to different azure devops repositories.
figure the mynalanda homepage .
the mynalanda homepage for a user the central hub in mynalanda is their homepage .
an example of such a mynalanda homepage is shown in figure .
its information is organized in the following sections news feed the centralized news feed f in figure is located in the middle of the page.
the news feed shows events such as updates in pull requests code review comments and pull request status changes from all the repositories a developer works in.
for managers the news feed provides updates from their reports activity.
user details this section a in figure provides details about developers such as name email address job title and their expertise extracted from their software development activity data .
this helps in facilitating easy discovery of developers skills and their current projects.
active items there are separate sections for active repositories pull requests work items and code review requests b e in figure .
users of mynalanda can prioritize the discovery of updates from these items by following orunfollowing them.
related people this section g in figure visualizes who a developer collaborates with and how local software development communities are formed.
a developer s collaborators include others who work together with the developer on a coding task or work item or who are either being reviewed by that developer or who are involved in reviewing a developers pull request.
search box the search box h in figure can be used to find developers and discover their activity.
it also can help with searching for technical and functional concepts by leveraging the nalanda artifact and expert indices as explained in section .
all elements in mynalanda such as pull requests work items people and repositories have embedded urls which take them to the corresponding item in azure devops.
this makes it easy for developers to navigate between mynalanda and azure devops.
additionally mynalanda facilitates integration of other machine learning recommenders due to its extensible architecture.
for example overdue pull request are indicated with a subtle warning icon in the active pull requests section.
this is powered by the nudge machine learning models .
.
mynalanda usage mynalanda leverages the graph representation of the data the nalanda graph and its schema design to navigate efficiently through complex relationships and find the content presented in variousesec fse november singapore singapore c. maddila et al.
sections.
as a result the mynalanda homepage including the news feed and the other sections loads in less than a second.
as quoted by one of the mynalanda users it is simple blazing fast to load adapts to screen size .
based on organic growth alone mynalanda reached daily active users dau and monthlyactive users mau in the first six months of deployment of the beta version at microsoft.
.
mynalanda evaluation perceived usefulness to evaluate how developers and engineering managers perceive the usefulness of mynalanda we follow a mixed method research design involving interviews and surveys.
with increasing sources of development related information available there remains an open question about how they want to access and integrate information about their own development activities and the development work done by their peers and if current platforms are adequate.
through this evaluation we assess how mynalanda matches the corresponding information needs.
.
.
evaluation setup.
semi structured interviews.
we conducted interviews to investigate information discovery and overload and if users might use an interface like mynalanda.
participants included five developers and two engineering managers seven participants were men and zero were women.
semi structured interviews were conducted remotely and ranged from minutes.
interview topics included interest in accessing information about their own and peers development activity information overload and how they typically get information in both in office and work from home contexts .
we then showed a deployed version of mynalanda and asked for reactions including if they would like it what information they would find useful and where they would want to see it.
if the interviewee was an engineering manager they were also asked what information they would be interested in seeing related to their team s work.
immediately following the interviews notes were taken by the interviewer to augment the transcription and interviews were coded for emergent themes.
following each subsequent interview themes were revisited to see if any codes should be combined or separated.
once no new themes emerged i.e.
theoretical saturation we concluded our interview phase.
after seven interviews themes remained consistent.
finally we reviewed notable excerpts from all interviews and organized the themes by topic.
surveys.
following interviews we conducted surveys to validate and quantify the themes that emerged.
survey participants included full time employees who were developers or engineering managers.
we designed our survey based on themes that emerged during our interviews resulting in a item instrument that took a median of .
minutes to complete.
participants were shown their mynalanda newsfeed with their own development activity and given the survey.
topics included demographics usefulness of information included in their mynalanda feed information pain points and privacy concerns and current and anticipated work location e.g.
office or work from home .
we included items asking about usefulness of mynalanda information and preferences for possible features based on jobs to be done .
we asked where respondentswould like to see mynalanda integrated if at all and their comfort level in sharing their development activity through something like mynalanda.
the full survey instrument is available online at research.microsoft.com .
the survey was sent to people in total developers and engineering managers with responses developers and engineering managers resulting in an response rate after considering the out of office responses.
our low response rate could be due to the fact that the survey is not a trivial one to fill in cognitively and time it takes to complete the survey and or because we did not offer any incentives for participation.
of those respondents .
were developers including software development engineers senior software engineers etc.
and .
were engineering managers including software engineering manager software engineering lead etc.
.
our respondents included five women .
men .
one who preferred to selfdescribe .
and two who preferred not to answer .
.
they reported an average of .
years working at microsoft ranging from .
to .
years standard deviation .
.
.
.
results of the study.
we first present findings from our semi structured interviews with each noted as developer d or engineering manager em .
we then present our survey results.
interviews.
participants expressed two themes related to information needs integration and overload.
information integration was echoed by many interviewees we define this as having developmentrelated information for self and others integrated into a single easyto access interface.
p1 em and p2 d discussed easily linking design docs and associated artifacts like pull requests.
p1 em discussed the usefulness of graphic summaries for their teams development activity across time periods this reflects consolidation via visualization.
p2 d called out that the ability to see detailed information about peers work is helpful when coordinating work and is not readily available.
p5 d spoke about viewing the information in different ways to deal with information overload and ensure they were not missing things using a most recent view for chronologically ordered information an algorithmic relevance view to combine information across teams and team only view to further filter.
this speaks to strategies they use to ensure keep up on development related information both within and across teams they collaborate with.
similar sentiments were expressed by other interviewees.
surveys.
we asked participants to rate how useful each feature of mynalanda was on a five point likert type scale ranging from not at all useful to extremely useful.
all items were optional of those who took the survey answered questions about mynalanda features developers and engineering managers .
this allowed us to capture participant reactions to a real integrated information platform instead of a hypothetical one.
table lists the accumulated percentages of extremely useful likert and very useful likert for each feature.
here we see that active pull requests .
and .
among developers and engineering managers respectively and active code review requests .
and .
among developers and engineering managers respectively are the highest rated features with user detailsnalanda a socio technical graph platform for building software analytics tools at enterprise scale esec fse november singapore singapore table mynalanda survey feedback featurecumulative n developers n managers n active pull requests c .
.
.
active code review requests e .
.
.
active repositories b .
.
.
active work items d .
.
.
feed f .
.
.
user details a .
.
related people g .
.
figure nalanda recommendations in azure devops .
and .
among developers and engineering managers respectively and related people .
and .
among developers and engineering managers respectively rated the lowest.
based on this we conclude that the active items pull requests code review requests repositories and work items are the most valued features of mynalanda and that user details are primarily of interest to engineering managers.
nalanda applications ii artifact and expert recommender when a developer is working on a work item or feature finding the relevant pull requests and code samples is one of the biggest pain points for developers .
the intensity of the problem multiplies in large organizations with teams working on multiple source code repositories.
similarly finding functional and technical experts in large organizations is a difficult task.
a lot of times this involves the developers to mine git history going through wiki pages design documents etc.
the nalanda artifact and expert recommendation application implements a recommendation plug in for azure devops azdo .
when a new work item is assigned to a developer the plug in triggers an api call to the nalanda search api.
the client passes the necessary input parameters such as the search query work item title and description the work item owner and the repository metadata.
upon receiving the results artifact and expert recommendations the client add recommendations to the work itempage in azure devops .
a sample work item recommendation page from live deployment beta version is shown in figure .
besides through its easy to use apis the nalanda artifact and expert recommendation application system powers other applications such as the search box in mynalanda as explained in section .
.
when a work item or an issue is assigned to a developer the nalanda artifact and expert recommendation application uses a combination of title and description of the assigned work item as an input search query and provides recommendations about work items or pull requests that accomplished similar tasks.
additionally the system also provides a list of subject matter experts whom a developer can reach out to seek help while working on that work item.
.
the nalanda ranking algorithm to construct the nalanda expert and artifact recommenders we devised a ranking algorithm consisting of three steps querying the artifact index see section .
to get the relevant pull requests and work items querying the expert index see section .
to get a list of relevant experts and re ranking the results using the nalanda graph.
to that end we take the following steps step we first construct a query as a combination of the title and description of the work item.
then we tokenize the query using heuristics that we built for the software engineering domain such as splitting strings into camel cased or pascal cased tokens.
we also create n gram based tokens since we found that bi grams and trigrams such as imaptransfer andmailboxsyncengine capture important information.
next we filter out stop words .
we employ the bm25 algorithm which takes care of prioritizing important tokens using inverse document frequency idf scores.
it assigns more weight to the documents with a higher overlap with the search query tokens term frequency and calculates a relevance score as shown in equation .
step we query the expert index which contains one document per person.
these documents contain the tokens mined from a developer s pull requests and work items history.
we perform the same pre processing explained in step on the query.
the bm25 index returns a ranked list of experts.
step a heuristics based filtering scheme is used to filter out results with relevance scores below a threshold.
we determine the threshold empirically to set it at the 75th percentile of the relevance score distribution.
we determined this value based on a series of experiments to optimize the accuracy of the results while reducing the size of the results set that is passed to the next step.
step we use the nalanda socio technical graph to assign proximity scores based on the edge distance between the person performing the search and the results returned by the bm25 index obtained from step .
the proximity score is the length of the shortest path between two nodes.
we use the proximity score to re rank the results.
for example the proximity score is if a pull request work item or people node is edge away from a developer node in their shortest path.
step we then pick the top kresults from the results set and return them to the user.
items that have a higher bm25 relevance score and are in close proximity to a developer are ranked higher.
furthermore we use proximity score to break the tie between results where relevance scores are the same.esec fse november singapore singapore c. maddila et al.
expert index artifact index nalanda graphazure cognitive searchcodemine nalanda indexers azure batchazure cognitive search tele metry nalanda search api filter and rerank azure appservie nalanda recommender plugin azure devops figure nalanda artifact and expert recommendation application architecture .
implementation we implemented the nalanda search system on the azure platform with an emphasis on scalability to thousands of repositories.
the underlying architecture is visualized in figure .
.
.
nalanda indexers.
the backbone of the recommendation system is the batch jobs creating and continuously updating the indices and the socio technical graph as discussed in section and shown at the bottom of figure .
we leverage codemine to help us with aggregating source control system data from thousands of repositories.
we rely on azure cognitive search acs which provides bm25 as a service to store and access the indices.
this helps us in alleviating the problems associated with service maintenance uptime and scale out.
.
.
search api.
given the indices and the socio technical graph the nalanda search api shown in the middle of figure implements the search algorithm from section .
.
each search query typically initiated by the users in mynalanda or through azure devops passed to the nalanda search api is processed in real time.
the mean response time for the api call is .
seconds.
the nalanda api service asynchronously saves telemetry to an azure sql database without impacting the query performance.
the telemetry includes the search query user metadata search results click logs and the api response time.
we use this information to evaluate engagement and to improve the performance of the nalanda search system and the api service.
.
quantitative evaluation to understand the efficacy and usefulness of the nalanda artifact and expert recommendation application we conduct a large scale offline evaluation and a user study.
.
.
experiment setup.
we randomly sample work items from the repositories such that there are at least work items selected from each repository.
subsequently we use the title and description of each of these work items as the input to thetable evaluation data summary artifact recommendation expert recommendation index data pull request title and description socio technical graphpull request title and description socio technical graph test set work item title and descriptioninternal stackoverflow questions ground truth pull requests linked to the work itempeople who answered the post and people who have answered at least five other questions with the same tag as the post data set 80k randomly sampled work items from the repositories10k randomly sampled questions and answers from stackoverflow table evaluation and comparative study for artifact recommendation k k k indexed properties accuracy mrr acc mrr acc mrr pr metadata .
.
.
.
.
.
pr attributes pr title .
.
.
.
.
.
pr description .
.
.
.
.
.
socio technical graph .
.
.
.
.
.
table evaluation and comparative study for expert recommendation k k k indexed properties accuracy mrr acc mrr acc mrr pr metadata .
.
.
.
.
.
pr attributes pr title .
.
.
.
.
.
pr description .
.
.
.
.
.
socio technical graph .
.
.
.
.
.
nalanda search api.
we expect the right pull requests and people to be returned from the search api.
since a recommendation system like ours does not exist in the company we do not have a ground truth to conduct a large scale evaluation.
therefore we rely on the pull requests manually tagged by developers to the work items in azure devops to build the evaluation dataset.
to create the ground truth dataset for the expert recommendations we leverage the private instance of stackoverflow deployed at microsoft.
details about the index ground truth and test sets used for these experiments are shown in table .
.
.
results.
we use two commonly used metrics for recommender systems .
top k accuracy which measures the number of times the correct item is found in the top k recommendations .
mean reciprocal rank mrr which calculates the reciprocal of the rank at which the first relevant document was retrieved .
table shows the results from the evaluation for different values of k. we can see that incorporating more attributes of the pull request such as its title and description improves both the mrr and accuracy considerably.
furthermore re ranking the results using the nalanda graph also substantially improves the recommendations.
similar improvements can be noticed for the expert recommendation task too .nalanda a socio technical graph platform for building software analytics tools at enterprise scale esec fse november singapore singapore figure participants evaluation of the nalanda system .
user perception we conducted a user study among developers regarding the usefulness of the recommendations.
we selected ten participants identified as p1 p10 from microsoft to evaluate the recommendations on their recently completed work items.
.
.
participants and protocol.
we conducted semi structured interviews which were conducted remotely and ranged from minutes.
the average experience of the subjects is .
years in the company and ranged from months to years.
we employ a one group pretest posttest pre experimental design .
we used the likert scale for rating the responses.
the respondents can provide their responses on a to scale ranging from strongly disagree to strongly agree .
we posed them the questions listed below.
when you are working on a work item how useful would the recommendations be in completing the work item on a scale of to you are going to refer to the work items and pull requests recommended as inspiration and informal documentation on accomplishing the work item.
you would likely reach out to the recommended people for consultation on accomplishing the work item.
.
.
results.
do the users feel work item pull request and expert recommendations are useful?
the participants expressed that the nalanda recommendation system can be a great value addition to the software development process.
of the participants rated agree or strongly agree when asked whether they find the artifact recommendations useful and responded favorably to the expert recommendations.
through question we measure the difference between the expectations the participants had of a hypothetical recommendation system with the nalanda artifact and expert recommendation application.
this question measures the dependent variable for the user study introduction of the nalanda system .
in figure the radar chart shows some differences between the participants original expectations and their perception of the nalanda recommendations.
these differences can be observed better in figure in which the averages of the rating are shown.
the difference in expectation versus perception was more apparent with the expert recommendations compared to the artifact recommendations.
to offer an impression we list some typical quotes positive and negative that we received from the developers.
a tool like this will help greatly to understand the processes involved in pushing my changes through.
figure expectations and perceptions of the nalanda system it is great to see the recommendations about people to talk to.
my team is large mostly remote and i am new.
so this is very helpful.
finding people to talk to has never been a problem for me as i have been working in the same org for a while.
discussion .
outlook in the future we anticipate both the nalanda graph system and mynalanda to be scaled out significantly inside microsoft in terms of the number of repositories and users.
furthermore we see opportunities for implementing the nalanda graph platform as a service on top of the open source software development data mined from systems like github.
we also expect the nalanda artifact and expert recommendation application to be employed at substantially more software development systems at microsoft.
future research could entail including other types of useful recommendations such as internal and external documentation tutorials and recommendations from questionanswer forums.
the rich socio technical data in the nalanda graph in combination with advances in deep learning and graph convolutional networks gcns hold promise for applications such as neural reviewer recommendations by leveraging the socio technical structures.
the nalanda graph system lays the foundation to bring various techniques from the graph representation world such as link prediction social network analysis etc.
into the software engineering and analytics domain.
.
threats and limitations .
.
internal validity.
conducting trustworthy experiments on data collected from thousands of repositories is challenging especially due to the problems of avoiding data leakage and obtaining credible ground truth.
in our experiments we addressed this see table .
while our results are highly promising and an important first step more experiments are needed to better understand the true nature of the graph s contribution to expert and artifact recommendation.
the risk of response bias is minimal in all our studies because all the participants of the user study are organizationally distant from the people involved in building this system.
however there remains a small chance that people in the user study may be positive aboutesec fse november singapore singapore c. maddila et al.
the system because they want to make the developers who are from the same company motivated and happy.
.
.
external validity.
the context of our evaluation and user studies is a software development company with a large number of developers.
these developers work on a portfolio of products across many contexts and domains.
by conducting a user study within one single company we were able to control for factors like culture tooling frameworks and programming languages.
however our results may not be generalizable across all developers in all contexts.
hence our results are not verified in the context of other organizations or the open source community.
therefore our findings may be limited and warrant further research.
future work could investigate user interfaces integrating our findings with design guidelines that span usability and technical and organizational complexity .
related work graph representations.
hipikat is one of the earliest works to build a graph for software development entities like tasks file versions and documents using a fixed schema.
it was built for onboarding new hires quickly by providing easy access to relevant artifacts.
codebook builds a prototype graph consisting of various software development entities.
the data was mined from software repositories for a single team at microsoft.
bhattacharya et al.
use graph representation of source code and bug tracking information to construct predictors for software engineering metrics like bug severity and maintenance efforts.
other applications of graph representations of software artifacts include visualizing relationships among project entities and extracting changes in variability models .
compared to all this work the scale of the nalanda graph is significantly larger with 37m nodes and 128m edges and nalanda has been designed to be actively used in a production setting.
source control dashboards.
github offers a dashboard for developers on its homepage .
it displays the repositories active pull requests and issues work items .
a key limitation of the github dashboard is there exists no notion of a team feed in github unlike mynalanda.
team feed helps the discovery of the items worked on by other team members.
information needs.
ko et al.
studied information needs in colocated development teams.
fritz and murphy provide a list of questions developers ask for the most frequently sought after information within a project.
information needs have also been studied in the context of change tasks inter team coordination and software analytics through its applications nalanda can efficiently address most information needs related to people code and work items.
for example the answer to questions such as who is working on what and what are coworkers working on right now is easily available in the mynalanda application.
artifact recommendation systems for software developers.
recommendation systems for software engineering aim at assisting developers with activities such as code reusability writing effective bug reports etc.
.
tools like codebroker help in finding the relevant code samples extracted from the standard java documentation generated by javadoc from java source programs and deliverthe suggestion to the emacs editor.
anvik et al.
proposed a semi automated method to assign bug reports to reporters based on their expertise using a machine learning algorithm.
mockus and herbsleb used quantity as a measure of expertise.
fu et al.
used the node2vec algorithm to convert file entities within projects into knowledge mappings.
they proposed four features to capture the social relationships between developers.
devrec a developer recommendation system mines the development activities of developers in github and stackoverflow to recommend collaborators for a given project.
hammad et al use keywords from the textual content of commits.
on the other hand canfora et al use mailing lists and versioning systems to recommend experts for newcomers joining a software project.
compared to these approaches the nalanda artifact and expert recommendation application is designed to be highly scalable and provide responses in real time.
conclusion in this paper we seek to build a large scale software analytics data platform named nalanda with two subsystems the nalanda graph systemand the nalanda index system .
the nalanda graph system consists of a socio technical graph encompassing the entities people and relationships involved in the software development life cycle.
the nalanda index system is an enterprise scale index system that can be used to support a wide range of software engineering tasks such as recommendation and search.
we built the nalanda graph system using software development activity data from source code repositories.
the graph consists of nodes and edges.
to the best of our knowledge it is the largest socio technical graph built to date using private software development data.
similarly the nalanda index system contains documents in its artifact index and documents in its expert index with data ingested from repositories at microsoft.
the nalanda platform and its applications mynalanda and nalanda artifact and expert recommendation application help in developing awareness of each other s work and building connections between developers across repositories while offering mechanisms to discover information while managing information overload.
we also seek to address the problems of information discovery by finding related work items and experts for software developers.
based on organic growth alone mynalanda has daily active users dau of and monthly active users mau of .
a preliminary user study shows that of developers and engineering managers surveyed are favorable toward continued use of mynalanda for information discovery.
the nalanda artifact and expert recommendation application with the help of the socio technical graph for customization lifted the accuracy of artifact recommendations by .
percentage points to .
.
in a study with ten professional software developers participants agreed that a system like nalanda artifact and expert recommendation application could reduce the time spent and the number of places needed to visit to find information.
in the future we anticipate both the nalanda graph system and mynalanda to be scaled out significantly inside microsoft in terms of the number of repositories and users.
we believe the systems and the techniques have applicability beyond microsoft.
furthermore we see opportunities for implementing the nalanda graph platformnalanda a socio technical graph platform for building software analytics tools at enterprise scale esec fse november singapore singapore as a service on top of the open source data mined from platforms like github.