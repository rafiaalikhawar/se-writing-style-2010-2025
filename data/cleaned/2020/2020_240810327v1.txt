an empirical study on package level deprecation in python ecosystem zhiqing zhong shilin he haoxuan wang boxi yu haowen yang pinjia he school of data science the chinese university of hong kong shenzhen cuhk shenzhen china microsoft beijing china zhiqingzhong haoxuanwang boxiyu link.cuhk.edu.cn shilhe microsoft.com hepinjia cuhk.edu.cn abstract open source software oss plays a crucial role in modern software development.
utilizing oss code can greatly accelerate software development reduce redundancy and enhance reliability.
python a widely adopted programming language is renowned for its extensive and diverse third party package ecosystem.
however a significant number of oss packages within the python ecosystem are in poor maintenance leading to potential risks in functionality and security.
consequently it is essential to establish a deprecation mechanism to assist package developers and users in managing packages effectively.
to facilitate the establishment of the package level deprecation mechanism this paper presents a mixed method empirical study including data analysis and surveys.
we investigate the current practices of announcing receiving and handling package level deprecation in the python ecosystem.
we also assess the benefits of having deprecation announcements for inactively maintained packages.
furthermore we investigate the challenges faced by package developers and users and their expectations for future deprecation practices.
our findings reveal that .
of inactive package developers have no intention of releasing deprecation declarations for various reasons while .
of users express a desire to be notified about the deprecation highlighting a gap between developers and users in many cases no alternative solutions are available when deprecation occurs emphasizing the need to explore practical approaches that enable seamless package handover and require less maintenance effort.
our work aims to enhance the understanding of existing packagelevel deprecation patterns within the python oss realm and facilitate the development of deprecation practices for the python community in the future.
index terms deprecation open source empirical study i. i ntroduction open source software oss has become a ubiquitous and influential presence in the software industry resulting in considerable economic ramifications .
notably a recent survey uncovered that of uk companies utilize oss.
however oss projects are usually developed and maintained by volunteers who may discontinue their involvement due to time constraints lack of interest or personnel turnover resulting in inadequate or no maintenance for the software.
adopting poorly maintained oss projects poses significant risks and potential losses to the software industry.
synopsys recent report on open source security and risk analysis ossra revealed that of the analyzed pinjia he and shilin he are the corresponding authors.codebases contained outdated open source components that were over four years old and of them had at least one known open source vulnerability.
to mitigate the challenges resulting from outdated code and its associated issues such as the propagation of vulnerability researchers have recommended the implementation of a deprecation mechanism .
the deprecation mechanism allows developers to officially declare the software as obsolete and discourage users from using it .
various programming language ecosystems have embraced the concept of deprecation including languages such as javascript and rust.
for instance in javascript node package manager npm provides a deprecation mechanism that allows developers to mark packages as deprecated thereby warning users about their outdated nature and suggesting alternative solutions.
surprisingly despite being one of the most popular programming languages with over 400k third party packages python lacks a formal or widely recognized package level deprecation mechanism in its ecosystem hindering package developers from releasing explicit deprecation announcements.
in this paper deprecated packages in the python ecosystem are identified as those that include an explicit deprecation declaration indicating that they will no longer receive maintenance.
we consider inactive packages as those that have not received any updates for a long time surpassing their regular maintenance schedule.
it is important to note that not all inactive packages are necessarily abandoned.
some may be considered complete in functionality thus slowing down their maintenance .
this intricate nature of inactive packages poses challenges for users in determining the package s status when no deprecation announcement is available subsequently exposing them to potential risks and issues .
to mitigate these negative impacts there is a strong demand to develop a deprecation mechanism in the python ecosystem that enables developers to deliver explicit and effective information.
while the python ecosystem does not have an official package level deprecation mechanism developers have implemented their own approaches to announce deprecation in recent years.
one common practice is to include deprecation information in the readme file of the package repository.
furthermore developers often offer alternative package options as part of the deprecation process.
however there is aarxiv .10327v1 aug 2024lack of awareness regarding the existing deprecation patterns throughout the entire python ecosystem.
the prevalence of these deprecation patterns is also unknown.
in addition it is important to investigate whether these existing deprecation patterns meet the requirements of both package developers and users.
to address this gap we conducted a mixed method empirical study to examine the early efforts made in deprecating python packages and gather feedback from package developers and users regarding the current deprecation patterns.
concretely we address the following research questions rq1 how is package level deprecation currently made received and handled?
we successfully identified deprecated packages that announce their deprecation through various methods such as github archiving homepage notifications issue trackers e.g.
github issues when users inquire and warnings during installation.
however these deprecated packages only account for of the inactive packages and for the remaining ones we are unable to determine their status.
among the identified deprecated announcements only .
have provided alternative solutions.
even after six months since the deprecation was announced two thirds of the users remain unaware of the deprecation.
this is primarily due to infrequent checks on the maintenance status of the dependencies of their packages.
nevertheless over two thirds of the users are willing to take action regarding the dependency when directly or transitively affected by vulnerabilities.
this includes removing the deprecation finding alternative solutions and creating a new fork.
rq2 can deprecation announcements mitigate the negative impacts of inactive maintenance?
we verified that having a deprecation announcement can reduce the unresolved issues on github and the adoption of downstream packages indicating the alleviation of risks.
additionally most users agree that having a deprecation announcement helps reduce the decision efforts when deciding whether to adopt or remove an inactive package.
rq3 why do inactive packages rarely release a deprecation announcement?
this is primarily attributed to a lack of time and resources uncertainty about how to provide an announcement and make future plans.
moreover it is worth noting that developers often have limited awareness of the usage of their packages which further complicates their decision making process regarding future plans and whether to announce a deprecation.
rq4 what are the expectations of package developers and users regarding the future deprecation pattern?
while the majority of the package developers expressed their willingness for the package manager to automatically handle deprecation tasks upon their request announcing the deprecation manually is still preferred by many developers.
as for package users the majority of them express their need to receive deprecation notifications through warningsduring installation or via email which should also include information about alternative solutions.
they also want additional support such as migration guidelines and guidance on taking over the projects.
in summary we made the following contributions we performed an empirical study to understand the status quo and challenges of package level deprecation in the python ecosystem.
this study can serve as a cornerstone for establishing a deprecation mechanism for python.
we discussed the practical implications of managing package level deprecation for the community.
we collected and released a large scale dataset at https consisting of packages.
the dataset can be used to facilitate future research.
ii.
b ackground inactive packages also known as dormant abandoned halted or unmaintained packages have not received sufficient maintenance in recent times posing risks to users who integrate the packages into their projects.
the lack of maintenance can lead to package incompatibility with new modules or environments over time thereby impacting the functionality.
when users seek assistance by submitting an issue it is likely that they will receive no support from the package developers.
even if the functionality remains unchanged packages can still be affected by vulnerabilities from their dependency silently.
for example in the discovery of a severe vulnerability in log4j caused widespread panic in the entire internet industry as many software directly or transitively adopted this library.
although the vulnerability was patched rapidly the propagation of these patches to downstream packages can be hindered by inactive packages in the software supply chain.
consequently the vulnerability remains a persistent risk for years .
in general developers utilize a deprecation mechanism to discourage consumers from adopting obsolete functionalities.
a typical deprecation mechanism follows three steps.
the first step is declaration where the deprecation status is explicitly stated.
the second step is to deliver the deprecation message to the consumers.
lastly index update prevents consumers from searching for deprecated packages or releases.
depending on the objects or functionalities to be deprecated different levels of deprecation mechanisms exist.
traditionally developers can leave warnings with an api level deprecation mechanism to discourage consumers from adopting an abandoned object or functionality .
with the evolution of software numerous historical releases remain in the ecosystem and are available for consumers to choose from.
if specific versions of package releases are found to be buggy or even vulnerable developers may consider using a releaselevel deprecation mechanism to deprecate those specific versions .
however developers who adopt these practices do not necessarily intend to give up the maintenance of entire packages.
in cases where developers decide to give up main pypigithub inactive and deprecated packages dependency networksurveysregression analysis fig.
.
the methodology of our study taining packages and discourage consumers from further using the package a package level deprecation mechanism can be employed to deprecate the unmaintained packages and deliver the deprecation declaration.
various programming languages already have existing package level deprecation mechanisms.
for instance in npm for javascript developers can implement a package level deprecation mechanism to leave a message for new consumers attempting to install a deprecated package.
however despite discussions regarding a package level deprecation mechanism for the python ecosystem for years no existing package level deprecation mechanism currently exists within the python ecosystem.
the absence of the deprecation mechanism leaves package users unaware of the risks associated with adopting the package thereby increasing the decision effort required.
one motivating example is python kafka which has no release in the last .
years.
users are concerned about the compatibility risks of using the package and have already encountered bugs.
as a result they have inquired about whether the package has been deprecated via submitting a github issue.
however the reply remains ambiguous leaving users in a state of uncertainty .
to facilitate the establishment of a deprecation mechanism in the python ecosystem we conducted a mixed method empirical study that included data analytics and two user studies.
iii.
m ethodology figure illustrates the overview of our methodology for addressing the research questions.
initially we collected data from pypi and github allowing us to identify both inactive packages and deprecated packages.
next we extracted the dependency relationships among packages from the collected data.
subsequently we analyzed the benefits of deprecation announcements via regression analyses.
to delve deeper into the practices challenges and expectations regarding packagelevel deprecation in the python ecosystem we designed two surveys from inactive package developers and deprecated package users and collected their feedback.
a. data collection pypi we initially obtained the metadata for all available packages using the official pypi api as of january09 where the release history and urls are used in the follow up analyses section iii b iii c .
furthermore we downloaded every release for each package to extract the dependency information .
github data to gather more data about pypi packages we collected additional information from their corresponding repositories on github.
following a similar procedure to prior work we initially mined the relationship between pypi packages and their repositories.
specifically we first examined three metadata fields homepage repository and project urls to identify urls that match popular code hosting platforms e.g.
github.com gitlab.com .
in cases where no url was found we subsequently searched all other metadata fields for urls containing the package name.
if a url was not still found we downloaded the latest package release and searched for urls in all package files that contained the package name.
overall out of the packages on pypi we successfully identified urls .
with .
of them originating from github which is consistent with the earlier report .
since most of the identified urls are from github we focused our data mining efforts on packages associated with github repositories for simplicity.
after establishing the relationship between pypi packages and their corresponding github repositories we utilized the github rest api to collect various data such as readme open issues and commit histories.
b. dependency network to analyze the benefits of deprecated packages we constructed a dependency network for the whole pypi ecosystem.
our analysis focuses on packages explicitly declared as dependencies in other pypi packages.
this excludes dependencies outside the pypi ecosystem such as system dependencies and github projects unrelated to pypi.
in the pypi package context we refer to packages used by the current package as upstream packages or upstream dependencies .
conversely downstream packages or downstream dependencies are packages that depend on the current package.
in order to ensure comprehensive and up to date dependency information we extracted this data from distribution files of each version following the approach of prior work .
pypi supports two types of package distributions built distribution and source distribution.
initially we prioritized the built distribution as it contains machine readable metadata for dependencies.
if built distributions were unavailable we performed a mimic installation using the source distribution in a sandbox environment.
throughout this process we logged the dependencies required for installation.
in total we obtained dependency information from releases.
c. identifying inactive packages to facilitate understanding the maintenance status of the packages in the pypi ecosystem and identifying the deprecated packages we first identified inactive packages from the entire set of packages on pypi following the approaches used in prior works.
there are two main typestable i the definitions of the variables in our models outcome variables package characteristics gain of downstream dependencieswe define the gain of downstream dependencies in pypi as follows if the current package is solely depended on by the latest version of a downstream package we consider it an increase in downstream dependencies.
conversely if there are versions other than the latest one that depend on the current package we consider it a decrease in downstream dependencies.
the gain of downstream dependencies is calculated as the difference between the increase and decrease in downstream dependencies.is deprecateda boolean variable indicating whether the package is deprecated or not.
number of downstream dependencies everthe number of downstream packages that have either adopted or previously adopted the current package.
project agethe duration in days from the first commit to the last commit.
project starsthe number of stars received by the corresponding github repository.
gain of unresolved issuesthis variable refers to the number of github issues that are in an open state and have not received any reply from any official member of the repository.
specifically we consider issues that were created after the last commit to the repository.number of contributorsthe number of contributors involved in the corresponding github repository.
number of releases the number of releases uploaded to pypi.
duration since last committhe number of days from the last commit to the present as of .
.
.
of methods used to identify inactive packages.
one type of method considers a specific number of commits within a defined duration such as no commit in the last year as criteria for determining inactive packages .
the other type of method identifies packages as inactive if they exceed the expected time to release a new version based on their release history .
however both of these methods can result in many false positives.
for mature packages it may take a long time to release a new version.
while for those new packages their releasing schedule may be irregular.
to minimize false positives we only considered packages as inactive if both methods identified them as such.
specifically for the first type of method we adopted the widely used criteria of identifying packages without any commits in the last year.
for the second type of method we employed an exponential smoothing model to calculate the next expected release date following the approach outlined in prior work .
the model is presented in equation where represents the smoothing parameter that takes a value of .
as consistent with prior work .
ndenotes that there arenintervals in the release history i.e.
n releases while release time idenotes the time required to release a new version after the i th version.
this model assigns greater weight to more recent release intervals compared to older intervals.
by combining these two methods we identified a total of unique inactive packages within the ecosystem.
next release interval n 1x i i release time n i expected release date next release interval last release date d. identifying deprecated packages to identify deprecated packages we first collected packages labeled as archived on github.
the archive feature allows github developers mark a package as obsolete and discourageits use which aligns with the definition of deprecation in this paper.
we used a web crawler to check the corresponding github repositories of pypi packages and determine if they were archived on github.
through this process we successfully identified packages that had been archived.
in addition we labeled inactive packages that contain a deprecation announcement as deprecated resulting in inactive packages.
to achieve so we initially conducted keyword searches for a set of commonly used phrases e.g.
deprecated unmaintained not maintained anymore etc.
in the readme files issues created after the last commit and the setup program in the pypi distributions following prior work .
if any of these phrases were found two of our authors independently performed manual validation to determine whether the identified keywords indicated package deprecation.
the inspection results achieved a cohen s kappa score of .
indicating an almost perfect interrater agreement .
we also collected the rationales and alternative solutions if available.
in total we have identified deprecated packages.
e. estimating effect of deprecation announcement we performed a regression analysis to examine whether a deprecation declaration can alleviate the negative impacts of inactive packages.
the unit of analysis is a package that is either deprecated or just inactive.
all variables we adopted in the regression analysis and their definitions are listed in table i. for every package we leveraged data that was collected in section iii a and section iii b to capture the characteristics of the packages.
given that unresolved github issues and downstream dependencies are commonly considered as negative impacts of inactive packages we also include these two variables as the dependent variables in the regression analysis.
model specification we utilized linear mixed effect regression lmer models to estimate the impact of hav ing a deprecation announcement which is demonstrated in equation .
specifically we want to estimate whether the deprecation will lead to the change of unresolved issue amount model i .
besides we try to understand whether it could also affect the number of downstream dependencies model ii .
y 0d 1r here dis a boolean variable indicating whether the package is deprecated or not and rdenotes other repository characteristics outlined in table i. the coefficients of the corresponding variables are denoted as i and the owner cohort random effect is represented by .yrepresents the outcome variables.
model estimation before estimating the regression we carefully selected subsets of inactive packages and deprecated packages to minimize bias.
we utilized a sample size calculator that is widely adopted by many prior se works to determine the sample size with statistical significance.
for model i we sampled deprecated packages.
as for model ii we sampled deprecated packages from deprecated packages that announce their deprecation through methods except for github archiving.
this is because once a package is archived on github all the open issues are closed and no more new issues can be submitted to the repository.
next we traversed the dependency network for each deprecated package and identified all its brother packages i.e.
those that share at least one common dependency among all inactive and deprecated packages.
this step was taken to manage risks associated with the upstream dependencies.
for example these packages may become inactive as a result of the same incident occurring in the upstream dependency.
rather than including all its brothers in the subset we only selected packages with the closest number of stars in the corresponding github repository.
moreover we took standard precautions while estimating the models in the following manner.
we used log transforming variables to mitigate heteroscedasticity with skewed distributions except for the gain of downstream dependencies which includes negative values.
to assess multicollinearity we utilized the variance influence factor vif from the car package in r .
the results are presented in table iv.
f .
survey for developer and user to gain an in depth understanding of the practices and demands of both package developers and users in the ecosystem when encountering deprecation we conducted two separate surveys for package developers and users.
similar to prior work we used microsoft forms to design two survey questionnaires .
we then separately sent our invitation emails to package developers and users providing them with the purpose of the survey and a link to the respective questionnaire.
after that two of our authors analyzed the results following the standard procedure.
in the following sections we provide details about participant selection study design and the analysis of the obtained results.table ii survey for inactive package developers id question q1what s the maintenance status of the package?
maintenance statusq2what are the reasons for not maintaining the package?
q3do you know any alternative solution or package?
practices and challengesq4do you intend to announce the deprecation in the future with the option to withdraw it if you decide to restart the package?
q5what s the difficulty that prevents you from providing an explicit announcement?
q6if you want to announce the deprecation how would you like to make the announcement?
participant selection from the collected results of section iii d we found that only a small proportion of the inactive packages have released a depreciation announcement.
for the remaining inactive packages we are curious about their maintenance status as well as the current practices and preferences of their developers when it comes to deprecation.
therefore we sampled packages from inactive packages that did not release deprecation announcements and designed a questionnaire for their developers.
we obtained the email addresses of their developers from the package metadata and sent them an invitation email.
eventually we received valid responses.
once deprecation occurs we aim to understand how users of deprecated packages perceive and handle deprecation.
to achieve this we leveraged the dependency network to identify downstream packages that directly depend on deprecated packages.
similarly we sampled of those downstream packages that have adopted deprecated packages and designed a questionnaire for their developers.
to gather more valuable insights from users we ensure that the deprecated package they adopted has released its deprecation announcement for at least six months.
so that the users are more likely to have a deeper understanding and more thoughts about the deprecation.
eventually we received valid responses.
survey design survey for inactive package developers.
the survey for inactive package developers consists of seven questions six of which are closed ended and listed in table ii.
the remaining question an optional open ended one is not included in table ii.
this optional question aims to gather advice on the survey and any additional thoughts that participants want to share.
the options for the six questions are provided based on our domain experience.
except for q3 each question includes an others option allowing participants to provide a free text response if their desired answer is not among the provided options.
in addition q2 q5 and q6 allow participants to choose more than one option.
the first three questions mainly focus on the maintenancetable iii survey for inactive package users id question awareness q1do you know that there is a deprecated package in your codebase?
practices for checking deprecationq2how often do you check for deprecated dependencies in your projects?
q3how do you check whether one package is deprecated or not?
expectations on deprecation patternq4do you want to be notified when there are deprecated dependencies in your codebase by the package manager i.e.
pypi or package owner?
q5how would you expect to be notified about the deprecation of a package?
q6what content do you expect to be included in the deprecation announcement?
willingness q7is it more difficult to make the decision without an explicit deprecation announcement regarding whether to adopt remove or take other actions on an inactively maintained package that has not been updated for a long time?
practices of taking actionsq8in what situation will you take actions on deprecated packages?
q9what actions will you take on the deprecated dependency?
q10are there any challenges when taking action on the deprecated packages?
further expectationsq11what kind of support do you expect from developers and package managers?
status of inactive packages.
in particular the first question asks whether the package will continue to receive maintenance in the future.
if the participant confirms that the package is no longer maintained we then inquire about the reasons behind this decision and alternative solutions in q2 and q3.
considering that only a few inactive packages choose to release a deprecation announcement and even when such an announcement exists the approaches to make it vary.
therefore we are interested in understanding the current practices followed when handling the inactively maintained packages.
consequently we asked about their willingness to release a deprecation announcement and the potential difficulties they encountered in q4 and q5.
additionally we investigate their preferred methods for announcing deprecation in q6.
this feedback will provide valuable insights for developing a package level deprecation mechanism in the future.
survey for deprecated package users.
the survey for deprecated package users consists of twelve questions eleven of which are closed ended and presented in table iii.
we also included an optional question for advice and additional thoughts which is consistent with the survey for deprecated package developers.
the options for the eleven questions were provided based on our domain experience.
for every question we also included an others option.
apart from q1 q2 q4 and q7 participants can select multiple options for the remaining questions.
in addition we introduced some preliminary concepts before presenting the questions to the participants including our definition of deprecated packages deprecation announcements risks of using deprecated packages and common actions taken on the deprecated packages.
this context was intended to enhance participants understanding of the subsequent questions.
considering the diverse approaches to announcing the deprecation announcement we wonder whether these announcements can efficiently reach its users.
therefore we investigate users awareness of the deprecation in q1.
then we investigate what practices users adopt to get themselves notified about the maintenance status of their dependencies in q2 and q3.
in q4 q5 and q6 we also collect users expectations on methods of being notified about the deprecation if they want.
we believe that the feedback can be complementary insights that originate from the point of view of package users.
since taking actions on the deprecated dependencies consumes time and effort users may not always choose to take actions.
we investigate whether a deprecation announcement helps users better make decisions on whether to take actions in q7.
then we investigate under what situations users would take actions in q8.
in q9 and q10 we specifically investigate the practices and potential challenges they would encounter when taking action on the deprecated packages.
additionally we investigate their potential additional needs in q11.
organizing survey results to analyze the survey results we followed the survey practices presented in recent studies .
specifically for closed ended questions we summarized the responses by plotting the distribution or counting the number of participants who selected each option when multiple options were allowed.
regarding the free text responses collected through the other option we employed widely adopted open coding methods for summarizing the results in line with recent studies .
specifically two of our authors independently went through each response and assigned preliminary labels.
then they reviewed the responses again to refine the labels.
finally the two authors discussed their refined labels and compiled a final list of the labels.
with this final list we proceeded to relabel each response accordingly.
if both authors agreed that certain responses were actually pre existing options that we have provided in the questionnaire we labeled those responses accordingly.
we also excluded any responses that were not relevant to the questions.
g. ethics to minimize unnecessary spamming when designing the surveys we specifically targeted people who might be interested in participating including inactive package developers and deprecated package users.
we only sent one invitation email to the potential participants rather than multiple emails to everyone.
in the email we explained that the purpose of the surveys is to understand their needs and expectations as well as to promote the establishment of a package level dep yes .
no .
others .
deprecated .
finished .
being maintained .
not sure .
a maintenance status of the package b plan for announcing the deprecationfig.
.
results of q1 and q4 in the survey for inactive package developers recation mechanism for the community.
from the responses we received some expressions of gratitude from participants for notifying them about the deprecated packages and for the study.
they also asked to be informed about the study s progress and findings once it is completed and prepared for public release.
iv.
r esults a. rq1 how is package level deprecation currently made received and handled?
how is package level deprecation made by developers we answer this question by investigating the incidence of deprecation the approaches employed and the content included in the announcements.
we identified a total of distinct deprecated packages which consist of packages archived on github and inactive packages with deprecation announcements.
notably the deprecated packages make up only of the total inactive packages.
nevertheless as figure a depicts over half of the inactive package developers acknowledge that their packages are indeed deprecated.
figure b reveals that most of them do not plan to make a deprecation announcement indicating a low willingness to announce deprecation.
for the methods employed to announce deprecation it was found that .
of the deprecation announcements can be accessed on the homepage typically through the presence of an archived banner or a notification on the readme file.
in addition .
of the announcements can only be accessed via checking the issues.
.
of the deprecation announcement can be found within setup programs.
regarding the contents included in the deprecation announcements it was found that only .
of them contain the rationales for the deprecation.
the most common rationales identified are the lack of time and resources and the existence of better alternatives which aligns with the findings from q2 in table ii and prior work .
according to the results of q3 in table ii .
of the respondents are aware of alternative solutions for their deprecated packages.
however among the identified deprecated packages only .
of them provide an alternative solution which is even lower.
very often .
occasionally .
rarely .
never .
conditional .
automatically .
homepage .
issue tracker .
emails .
warning from code .
others .
a frequency of checking the maintenance status of dependencies b apporaches for checking the maintenance statusfig.
.
results of q2 and q3 in the survey for deprecated package users finding .
despite the high possibility that an inactive package is indeed deprecated only a small number of developers are willing to announce the deprecation leading to a scarcity of deprecation announcements.
most of the identified deprecation announcements can be accessed on the respective package s homepage.
moreover only a few participants in our survey are aware of alternative solutions and the announcements that actually contain alternative solutions are even fewer.
how is deprecation received by package users to answer this question we mainly focus on the responses from the survey for deprecated package users.
we specifically investigated their awareness of deprecation and the practices they adopted to perceive deprecation.
based on the results obtained from q1 in table iii we found that even after the deprecation has been announced for over six months two thirds of the deprecated package users remain unaware of the deprecation.
we further investigated their frequency and methods of checking the maintenance status of the dependencies of their packages in q2 and q3.
as figure depicts over two thirds of the users rarely or never check the maintenance status.
when users do decide to check the most commonly adopted approach is to review the homepage or the issue tracker.
moreover from the responses of q4 in the same survey we found that most .
users are willing to be notified about the deprecation.
finding .
two thirds of deprecated package users are unaware of their dependencies deprecation likely due to infrequent checks on the maintenance status.
however it is worth noting that most users are willing to be notified about the deprecation.
how is deprecations handled to answer this question we also focus on the responses from the surveys for deprecated package users.
we specifically investigated the circumstances in which package users take action on the deprecated packages and the specific actions they would take.
as depicted in figure a vulnerability related cases are the most commonly mentioned circumstances triggering users to take action.
besides .
of the users expressed that they would take action if better alternatives were available.
furthermore .
of users mentioned that they would take action when future bug patches are no longer provided.
moving on to the specific actions users would take as explored in q9 figure b no more new features no future bug patches supported deprecated package with vulnerable dependencies existing vulnerabilities or bugs better alternatives take no action not compatible with other new dependencies3687 fork and develop a new version seek another solution remove the dependency take no action fork and maintain the part they need a conditions that lead users to take actions on deprecated dependencies b actions taken on deprecated dependenciesfig.
.
results of q8 and q9 in the survey for deprecated package users reveals that .
of the users will seek alternative solutions while .
of them will remove the dependencies.
moreover .
mentioned they will fork the old project and develop a new version.
however when considering the challenges associated with taking action the responses from the q10 indicate that a majority of users cited a lack of time and resources as significant obstacles.
finding .
two thirds of users are willing to take action on the deprecated dependencies in cases involving vulnerabilityrelated issues or the availability of better alternatives.
the most common actions taken include removing the dependency and seeking another solution.
in addition one third of users would like to fork the project and develop a new version.
b. rq2 can deprecation announcements mitigate the negative impacts of inactive maintenance?
to answer this question we verified the benefits of having a deprecation announcement from both quantitative and qualitative perspectives.
quantitatively we leveraged the regression models estimated in section iii e to verify the impact of such deprecation announcements.
from a qualitative perspective we analyzed the results of q7 in table iii.
table iv presents the estimated coefficients and standard deviations of predictors in two models.
starting with model i the results indicate that a deprecation announcement has a statistically significant impact on reducing the gain of downstream dependencies.
on average having a deprecation declaration corresponds to approximately .
downstream package decreases.
it is important to note that our observations may not include numerous downstream projects not listed on pypi such as those hosted on github.
moving to model ii we analyze the impact of preventing the gain of unresolved issues.
similarly a deprecation announcement also demonstrates a statistically significant impact on reducing the gain of unresolved issues.
on average it corresponds to a decrease of approximately a in unresolved issues.
from a qualitative standpoint the results of q7 in table iii reveal that the majority .
of package users agree that the absence of a deprecation announcement can increase difficulties in determining how to handle the inactive packages.
in con2297 not sure how to take action lack of time and resources no alternatives exists not aware lack of support documents b challenges in taking actions on deprecated dependencies lack of time and resources uncertainty about future plans not sure how to provide an explicit announcement not willing to provide an explicit announcement legal or licensing considerations no need do not consider pypi after archiving at github a challenges in announcing deprecationfig.
.
results of q5 in the survey for inactive package developers and q10 for in the survey for deprecated package users table iv summaries of linear mixed effect model regressions gain of downstream gain of unresolved dependencies issues log model i model ii characteristics is deprecated .
.
.
.
project stars log .
.
.
.
project age log .
.
.
.
num.
of releases log .
.
.
.
num.
of downstream dependencies ever log .
.
.
.
num.
of contributors log .
.
.
.
duration since last commit log .
.
.
.
num.
of observation note p .
p .
p .
clusion we have quantitatively and qualitatively verified the benefits of making a deprecation announcement underscoring the necessity of such announcements.
finding .
deprecation announcements deter both new and existing users from adopting the packages.
they also help minimize the occurrence of unresolved issues that may arise after the packages become inactive.
furthermore they simplify the decision making process for users when determining whether to adopt or remove the packages.
c. rq3 why do inactive packages rarely release a deprecation announcement?
despite the benefits of having a deprecation announcement the results of rq1 indicate that most developers are unwilling to make such announcements.
consequently we further investigated the challenges hindering them from providing deprecation announcements in q5 of table ii.
as figure a illustrates the most frequently mentioned challenge is the lack of time and resources.
notably .
of respondents expressed uncertainty about how to provide explicit deprecation announcements.
interestingly these two challenges are also commonly mentioned challenges by users when it comesto taking action on deprecated dependencies as shown in figure b .
these findings highlight the necessity of developing an official deprecation mechanism that reduces effort and provides explicit guidelines for both package developers and users.
additionally .
of respondents expressed uncertainty about future plans.
we also observed in the last open ended question that some participants mentioned a lack of usage information or feedback about the packages which may weaken their motivation to announce deprecation.
finding .
inactive package developers are unwilling to announce deprecation primarily due to the lack of time and resources and uncertainty about how to make the announcement.
in addition they are unsure about the necessity of the deprecation announcement due to the lack of feedback.
d. rq4 what are the expectations of package developers and users regarding the future deprecation pattern?
now we present the results of q6 from the survey for inactive package developers which reveals their preferred method for announcing deprecation.
as figure a depicts more than half of the developers expect the package manager to take over the tasks upon request while there are still more than one third of developers who will publish the deprecation announcement on the homepage manually.
moreover approximately .
are willing to manually announce in the issue tracker.
one developer stated that after announcing deprecation via github he no longer cares about the pypi.
this is understandable since github is a powerful tool for developers while pypi serves as an archive.
therefore developers naturally pay more attention to github.
however users may have a different perspective resulting in less attention being paid to the corresponding github repository compared to developers.
this emphasizes the necessity for an automated tool or feature that actively monitors the deprecation status on the corresponding github repository.
now moving to the perspective of deprecated package users the result in section iv a2 shows that most users want to be notified about the deprecation.
therefore we further investigated the notification approaches they preferred in q5 and the desired content for deprecation announcements in q6.
figure b depicts the most favored approaches warnings displayed during installation email notifications and warnings displayed when using the package.
all these methods eliminate the need for users to actively check for deprecation on their own.
regarding the content to be included in the deprecation announcement we found that most users want alternative solutions and more than half of them want the reasons for depreciation.
however it is rare for developers to know alternative solutions and thus they do not provide them in deprecation announcements.
furthermore one third of users require a severity report on the deprecation and one user also wants to know whether the package can be handed over to other maintainers.
in terms of additional support apart from requested migration guidelines over one third of users also want guidance on taking over the package.
this becomes package manager takes over the task automatically manually publish in homepage manually publish in issue tracker manually publish in source code as a warning3659 announcement on the homepage warning displayed during package installation warning displayed when using the package an email containing the deprecation announcement pip flag a expected approaches for announcing deprecation b expected approaches for receiving deprecation notificationfig.
.
results of q6 in the survey for inactive package developers and q5 for in the survey for deprecated package users particularly effective when there are no potential alternatives or when the migration process is prohibitively costly.
finding .
over half of the developers would like the package manager to handle deprecation announcements but many still like to manually announce deprecation.
as for users they prefer to receive deprecation notifications through email and warnings with alternative solutions and reasons included.
they also require a severity report guidelines for taking over the package and migration guidance.
v. d iscussion and implications in this section we will discuss the observations and implications derived from the findings of our research questions which can provide valuable insights for the community.
a deprecation mechanism in the python ecosystem that is developer friendly and effective for users is needed.
in section iv b we have demonstrated the benefits of having a deprecation announcement.
considering the low proportion of deprecation announcements and the lack of information it is recommended to develop a deprecation mechanism that assists developers in effortlessly providing detailed deprecation announcements and effectively communicates the message to users.
moreover many developers have already announced or prefer to announce deprecation on github as it is a developercentric tool and the platform where developers primarily focus their attention.
therefore it is also recommended for the future deprecation mechanism to establish a connection with code hosting platforms such as github which enables comprehensive monitoring of maintenance status and a more comprehensive collection of deprecation announcements.
when no explicit deprecation announcement is available having finer grained categories of statuses that indicate different levels of risks may be beneficial.
figure a demonstrates that developers may choose not to provide a deprecation announcement for various reasons even if their packages have been without maintenance for a significant period and some are unlikely to be revived in the future.
while some packages may still function well others may encounter compatibility or security issues.
these diverse statuses indicatevarying levels of usability and security risks suggesting that deprecation status can extend beyond binary options to include finer grained categories.
if the risks associated with packages in different statuses can be evaluated and separated using defined boundaries along with explicit descriptions it would also assist package users in determining whether to adopt or remove a package even in the absence of explicit messages from developers.
we recommend that further attention be given to this research topic.
a more user friendly practice is needed for users who want to take over the package.
although most users express a desire for alternative solutions to be included in the deprecation announcements the findings in section iv a1 reveal that only a low proportion of deprecation announcements actually provide such alternative solutions.
while previous works have focused on recommending alternative solutions at the package level and api level one concern is the lack of potential alternative solutions.
in such situations users can only maintain the dependencies themselves if they want to keep risks under control.
instead of creating a new forked version inheriting the deprecated package can retain users saving them the effort of finding an alternative solution.
additionally developers will not need to find new users since existing users can act as good testers of the package reducing maintenance efforts.
however a user who has decided to maintain the dependency himself mentioned that the requirements set by pep which is the official practice for inheriting the package are too high.
furthermore even if all the conditions are met the review process by the python software foundation official member may take a long time due to the volunteer staffing shortage .
while pep can ensure security through its conservative strategies it is suggested to have a supplementary mechanism with looser conditions to facilitate the takeover of packages.
this mechanism should also inform users about the associated risks.
exploring better solutions for backward compatibility in the python ecosystem is necessary.
despite the developers having completed the development of all the planned features keeping the packages up to date remains a nontrivial task.
some developers as expressed in our surveys have indicated that maintaining the package is labor intensive and sometimes annoying.
it often requires more time than the initial development process itself.
in general to prevent functionality and security issues packages need to update their dependencies with patches.
however the frequent occurrence of breaking changes in these dependencies further complicates the maintenance process leading to developer frustration.
from the perspective of upstream dependencies backporting patches to older versions that have no breaking changes is also a labor intensive task especially considering the existence of multiple previous version tracks.
therefore it is recommended to explore the possibility of automatically backporting patches without causing breaking changes.
by improving the backward compatibility of the python ecosystem maintenance tasks could become more manageable and potentially even automated.vi.
r elated work a. open source sustainability early research focuses on attracting new contributors and retaining volunteers .
however abandonment is inevitable in the ecosystem.
while some oss projects have long lifespans e.g.
linux eclipse and apache others may become inactive or abandoned.
subsequent studies analyzed the nature of abandonment.
khondhu et al.
and ait et al.
found a significant population of inactive oss projects on platforms like sourceforge and github.
further research delved into the reasons why developers give up on oss projects .
in addition valiev et al.
investigated ecosystem level factors that affect the sustainability of oss projects.
regarding the projects that were abandoned miller et al.
summarized the impacts and practices adopted to manage these projects via interviewing their users.
in this paper we explore the demands of both package developers and users providing insights into managing deprecation at the ecosystem level.
b. deprecation mechanism early research focused on api level deprecation mechanisms.
sawant et al.
explored developers needs regarding api level deprecation mechanisms.
however subsequent findings revealed that api level deprecation strategies in the python ecosystem are often ad hoc resulting in deprecated apis not being adequately handled .
for package level and release level deprecation cogo et al.
and li et al.
have previously studied the deprecation mechanisms in the npm and cargo ecosystems respectively and found that the existing mechanisms are rudimentary and in need of improvement .
however little is known about the status quo of packagelevel deprecation in the python ecosystem.
this paper fills this gap and offers practical implications for establishing a deprecation mechanism within the python ecosystem.
vii.
t hreats to validity a. internal validity we did not include some other practices that may be adopted to announce deprecation in this study such as the api level deprecation mechanism and the yanking mechanism .
this is mainly because these methods are not typically intended for deprecating an entire package which limits their effectiveness for package level deprecation.
for example we scanned the metadata and identified packages that yanked all their releases to deprecate themselves and most of these had only one release in total.
this suggests that such approach is less user friendly and less recognized than other unofficial practices e.g.
publishing deprecation announcements on github readme or issues especially for packages with multiple releases.
consequently we did not consider pep and the yanking mechanism in our study.
when conducting the study we encountered challenges in collecting comprehensive data from the sources.
one challenge involved collecting dependency information for the entirepython ecosystem which can be difficult.
various methods for obtaining dependency information have been adopted in many papers.
a common data source used by researchers is the data dump from libraries.io .
however this data dump suffers from certain weaknesses.
firstly it is outdated with its last dump released on january lacking information on packages and releases in recent years.
additionally it may contain missing dependencies a common and easily detectable issue.
researchers can also access dependency information by utilizing the api provided by pypi .
however this source also suffers from incompleteness similar to libraries.io.
to overcome these limitations we leveraged the code provided by valiev et al.
to extract dependency information from distribution files on pypi.
this approach surpasses the previous methods in terms of timeliness and completeness.
additionally we encountered rare instances of missing distribution files on pypi and missing issues on github due to deletion.
however such occurrences are not substantial enough to affect the validity of our results.
when identifying deprecated packages from inactive ones we adopt a keyword search strategy to identify deprecation announcements from related readme and issues.
however this strategy can miss some packages that did have a deprecation announcement without those keywords and incorrectly consider these packages as inactive ones.
to validate this risk we sampled inactive packages without keywords.
the sample size was determined using the sample size calculator following the same procedure described in section iii e. subsequently two of our authors checked for any deprecation announcements that might have been missed by our previous identification method.
we found that there are packages where this was the case indicating that the accuracy of our previous method is .
with a confidence interval.
the two surveys are also influenced by social desirability bias and self selection bias .
to alleviate these biases we tried to collect more responses by sending invitation emails to people who may be interested in the study.
in addition we informed the respondents that their responses would remain anonymous.
b. external validity our study focuses on analyzing the current deprecation pattern in the python ecosystem.
it is important to note that since there is currently no existing deprecation mechanism for this ecosystem the results obtained may not necessarily generalize to other programming language ecosystems that do have a deprecation mechanism in place.
for this work we specifically concentrated on packages that have corresponding github repositories.
while it is true that some packages may be hosted on other code control platforms such as gitlab most of the repository related information we collected such as issues and stars is also available on other platforms.
viii.
c onclusion in this paper we have presented an analysis of package level deprecation in the python ecosystem providing insights intoits status quo.
we further demonstrated the impact of making deprecation declarations.
to offer valuable guidelines for the future development of package level deprecation mechanisms we have conducted an investigation into the challenges that package developers and users faced as well as expectations on the future deprecation pattern.
additionally we have released a new dataset serving as a foundation resource for future deprecation mechanisms.
an in depth discussion has been carried out to serve as a guideline reference for future research and the advancement of package level deprecation mechanisms.
ix.
d ata availability the dataset we collected and the related source code can be found at x. a cknowledgment this paper was supported by the national natural science foundation of china no.
guangdong basic and applied basic research foundation no.
2024a1515010145 and shenzhen research institute of big data innovation fund no.
sif20240009 .