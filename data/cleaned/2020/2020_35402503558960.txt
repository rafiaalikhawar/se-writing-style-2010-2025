sometimes youhavetotreatthesymptoms tackling model driftin an industrial clone and own softwareproductline christof tinnes siemens ag technology m nchen germanywolfgang r ssler siemens mobility gmbh m nchen germanyuwe hohenstein siemens ag technology m nchen germany torstenk hn siemens mobility gmbh m nchen germanyandreasbiesdorf siemens ag technology m nchen germanysvenapel saarlanduniversity informatics campus saarbr cken germany abstract many industrial software product lines use a clone and own approachforreuseamongsoftwareproducts.asaresult thedifferent productsintheproductlinemay driftapart whichimpliesincreased efforts for tasks such as change propagation domain analysis and qualityassurance.whilemanysolutionshavebeenproposedinthe literature theseareoftendifficulttoapplyinareal worldsetting.
westudythisdriftofproductsinaconcretelarge scaleindustrial model driven clone and own software product line in the railway domain at our industry partner.
for this purpose we conducted interviewsandasurvey andweinvestigatedthemodelsinthemodel historyof thisproject.
we foundthat increasedefforts are mainly caused by large model differences and increased communication efforts.
we argue that in the short term treating the symptoms i.e.
handling large model differences can helpto keep effortsfor software product line engineering acceptable instead of employingsophisticatedvariabilitymanagement.totreatthesymptoms weemployasolutionbasedonsemantic liftingtosimplifymodel differences.usingtheinterviewsandthesurvey weevaluatethe feasibility of variability management approaches and the semanticliftingapproach in the context ofthis project.
ccsconcepts softwareanditsengineering softwaredevelopmentmethods software product lines software configuration managementand versioncontrol systems .
keywords model driven engineering software evolution software product lines acm referenceformat christoftinnes wolfgangr ssler uwehohenstein torstenk hn andreas biesdorf andsvenapel.
.sometimesyouhavetotreatthesymptoms tackling model drift in an industrial clone and own software product line.inproceedingsofthe30thacmjointeuropeansoftwareengineering esec fse november 14 18 singapore singapore copyright held bytheowner author s .
acm isbn978 .
symposium on thefoundations of softwareengineering esec fse november14 18 singapore singapore.
acm newyork ny usa 12pages.
introduction softwareproduct lineengineering aimsatdevelopingafamily ofsoftwareproductsbyreusingsoftwareartifactsaswellasprocesses across the family.
there are several software product line engineering methodologies ranging from simple cloning of artifactsacrossproducts clone and own toplatformswithbuiltinvariabilitysupport whichallowtogenerateproductsbasedon a configuration i.e.
a feature selection .
depending on various factors e.g.
thenumberofproducts itmakessensetofavorone approachoveranother .forexample theoverhead for establishing and using a platform will only pay off when the platformisusedforalargernumberofproducts .itisimportant tonotethatthereuseofartifactsinsoftwareproductlinesisnot limited to source code but can also include other artifacts such as documentation requirements andmodels .
many industrial software product lines have been grown organically using some form of managed cloning clone and own withsomeformofclonemanagementinplace .asaconsequence changeshavetobepropagatedfromoneproducttoanother.
this is often done manually and therefore time consuming and error prone .akeychallengeoftheevolutionofclone and own softwareproductlinesisthatproductstendtodriftapart .
thisleadstoariskoflosingthebenefitsofreuseifeffortsrelated tocloningandmergingexceedthe savings ofreuse.
inthis experience paper we report ona model drivensoftware productline i.e.
modelsaretheprimaryartifacts intherailway domainatourindustrypartner whichemploysaformofmanaged cloning.
in particular we study the divergence of models in this setting.weobservedthatqualityassurance changepropagation and domain analysis are the main drivers for increased effort or costs due to the cloning approach an observation consistent with the literature .
nevertheless these activities are indispensable.
especially for safety relevant parts of the system a thoroughqualityassuranceofthechangesmadetothesystemis critical to decrease the risk of failing software qualification which in turn leads toan increase in time to market.
common to all of these activities is the analysis of differences between products or between a product and the common platform.
in large software product lines the models and also the differences betweenmodelseasilybecome huge.we found that indeed large model differences are a major symptom of the drift at our industry thisworkislicensedunderacreativecommonsattribution sharealike4.
internationallicense.
esec fse november14 18 singapore singapore christof tinnes wolfgang r ssler uwe hohenstein torstenk hn andreas biesdorf andsvenapel partner.itisincreasinglydifficulttoidentifycommonalitiesthatcan beliftedtoacommonplatformorpropagatedacrossproducts.many small but uncritical changes such as model element renamings make model differences unnecessarily verbose and confusing.
for example inourcasestudy renamingapackageleadstothechange of the fully qualified name of subordinated elements and therefore to plenty offine grainedchanges inthe modeldifference.
a solution to the divergence problem might be to migrate to a platform based approach .
this is not only a timeconsumingtask butthereisalsoariskoflosingflexibilitytocreate new products.
moreover the independence of products in a clone and ownsoftwareproductlineissometimesdesiredtoavoid unintended side effects .
in general many of the assumptionsmade byplatform approachesareoften notcompatiblewith real worldconstraintssuchasorganizationalstructureswithina company.
an alternative to platform based approaches is to utilize featuretracesinabottom upmannerforchangepropagationand thecomposition of newproducts .unfortunately state ofthe art tools are not mature yet e.g.
scalability to large product lines has not been shown yet and are not available for model artifacts.
whileitisdesirableinthelongtermtosystematicallymanage variability itisimperativeintheshorttermto treatthesymptoms of a clone and own approach.
that is we need to reduce the effort required for critical activities such as quality assurance change propagation and domain analysis.
for this purpose we have combinedsemanticlifting witharecentapproachforeditoperation mining toeffectivelysimplifylargemodeldifferencesatour industry partner.
the idea of this semantic lifting approach is to compress the differences that is to combine many fine grained differences intohigher level reusablechangepatterns.
basedonsemi structuredinterviewsandaquestionnairesurvey weexplorethemeritsandbarriersofplatform basedapproaches bottom up approaches and the semantic lifting approach in the contextofdrift between products inan industrialsetting.
in asummary we make the following contributions wereportonacasestudyandchallengesrelatedtomodeldrift in a real world industrial clone and own software product line in the railway domain with more than engineers 300gb ofartifacts andover 7years ofhistory.
weconductedinterviewsandasurveywithpractitionersin this projectto verify the presence of model drift in this real world case study study symptoms andcauses for the modeldrift evaluatewhetherapproachesproposedintheliteraturecan be appliedandwhether amigrationwouldbe feasible evaluateabottom upapproachbasedonsemanticlifting and pattern mining to mitigate one of the major symptoms ofmodeldrift that is large modeldifferences.
we find that major symptoms of model driftare largemodel differencesaswellasincreasedcommunicationefforts mainly for tasks such as quality assurance change propagation and domain analysis.
there are several causes most prominently anincreasingmodelsizeaswellasmissingtoolsupportfor several variability related tasks.
worse available approachescannot be applied because the cost and risk of a migration wouldbetohigh existingtoolsarenotmature andcritical features are missing.
a semantic lifting approach can help to mitigate challenges relatedto large modeldifferences.
stateofthe art supporting andmanagingmodelevolution for example supporting collaborative work on models versioning of models or quality assurance of the models has been studied extensively in the literature .thestudiesbystraetenetal.
kahliletal.
andpaigeetal.
provideanextensiveoverview.
whereas modelevolutionresearchisfocusingonthe evolution inthetemporaldimension thesoftwareproduct lineengineering community is interested in differences in the product dimension .
in the literature severalalternativesandapproachescomplementary to clone and own are proposed.
in what follows we will recapture the clone and own approach describe the problem of the so called unintentionaldivergence inclone and own anddescribepossible solutions proposed in the literature.
furthermore we provide an overviewofindustrialclone and owncasestudies.
.
clone and own clone and own describes the ad hocprocess of cloning existing products and developing the cloned products independentlyfromeachother.therehasbeenadebateinthesoftware product lineengineeringcommunityaboutwhetheraclone andown approach should be discouraged or not .
nevertheless as amatter offact clone and own approaches are used in the industrial practice.
in many cases utilizing cloneand own approaches there exists a single product which has to be modifiedslightlytosatisfytheneedsofothercustomers.cloningis then an available mechanism which can be rapidly used to satisfy this customers needs.
often it is not known in advance whether an existing product will evolve into a family of products.
therefore it ishardtoassesswhethertheinitialefforttosetupaplatformfor theproductfamilywillpayoffinthelongrun .anobservation madebybergeretal.
is thatnoneofoursubjectsexercisespure clone own but that variants already use variation points .
this observationis alsotrueforour railwaycasestudy wheretrainset platforms alsohave someinternal variability see section .
acommonissuerelatedtotheclone and ownapproachistheunintentionaldivergencebetweentheproducts .unintentional divergence describes the increasing difference between products intheproductfamily.therearemultiplepossiblereasonsforthis divergence for example missing reuse opportunities e.g.
commonalities are not identifiedduring domainanalysis noisedue to differences in the implementation of features in different products or even the increased complexity of the individual products as a consequenceoftheevolutionoftheproducts.inthecontextofa model driven product line we will refer to model drift as a specific instanceofunintentionaldivergence inmodelartifacts.
.
platform approaches one solution to the divergence problem is to migrate the cloned product line to a platform .
there are only a few 1356sometimesyou have to treat the symptoms tacklingmodel drift in anindustrial... esec fse november14 18 singapore singapore tools that support platform approaches for model driven softwareproductlines.
supermod reliesonso called filteredediting andfeature ambitions which a user can select when committing changes.the magicdraw product line engineering plugin is more mature but the user has to explicitly model the variability for every variable model element.
in contrast to platform approaches whereaproductisgeneratedbyselectingasubsetof the functionality implemented in the platform compositional approaches have been proposed in the literature.
for example apel et al.
propose an approach to compose a specific product by superimposing model fragments typically one model fragmentper feature.
jayaraman etal.
describe auml composition language based on graph transformations for reusing features.
another compositional approach is delta modeling whereaproductiscomposedoutofa coremodel avalidproduct and multiple delta models that encapsulate modifications to the coremodel.delta modelsarenotnecessarilyinone to onecorrespondence with features.
elrad etal.
propose an approach for aspect orientedmodellingtoseparatecrosscutting concernsand core functionalityinumlmodels.
amigrationfromaclone and ownapproachtoaplatformapproachisnotonlytime consuming butthereisalsoariskoflosing flexibility to create new products and the independence of the products in a clone and own software product line is sometimes desiredto avoid unintendedsideeffects .
.
bottom up productlineengineering someauthors observe that withanincreasingnumberof products maintenance efforts for a clone and own approach will rapidly grow buttheyalsoacknowledgethat insomesettings e.g.
a small number of products a cloning approach is viable .
furthermore many industrial product lines startwithasingleproduct anditisnotclearatthebeginning how many products there will be in the future or how long the product linewillbe usedat all .
for this reason approaches supporting variability management inclone and ownproductlineshavebeenproposed .the basic idea is to utilize feature traces in a bottom up manner for changepropagationandthe composition ofnew products.
some authorspropose variationcontrolsystems which aim at unifyingversioncontrolandvariability management1.
.
industrialclone and own casestudies some authors study clone and own in multiple case studies i.e.
havingmorethanoneconcretesubjectproject .forexample rubin etal.
evaluateaframeworkformanagingcollectionsofrelated productsbasedonthreeindustrialcasestudies.dubinskyetal.
study cloning practices in six industrial clone and own software productlines.morerecently kr geretal.
comparecostand costfactorsofclone and ownandplatform orientedreuseinindustrialsettingsusingaliteraturereviewandinterviewswithinone company.bergeretal.
studythestateofadoptionofasystematic variability management in twelve industry case studies across severaldomains.whilethisresearchcomparesplatform oriented 1somevariationcontrolsystemsinternallymaintain150 model andthereforebelong to the categoryof platform approaches.researchandclone and ownorinvestigatesatransitionfromcloneand owntoamoresystematicvariabilitymanagement westudy theconcretechallengeofdriftbetweenproductsinoneconcrete industrialclone and ownsoftware product line.
there are also single case studies in an industrial context for example jepsen et al.
or weston et al.
focusing on the extractive adoption of software product lines.
other single case studies compare platform based and clone and own approaches forexample echeverr aetal.
compareeffectiveness efficiency andsatisfaction ofclone and own anda platform basedapproach in a controlled experiment.
a comprehensive list of case studies using extractive adoption is given by the espla catalog .
to thebestof ourknowledge there isnowork studyingdriftbetween products inan industrialsetting.
railwaycase studysetting in this section we describe the setting of our case study that we conductedwithour industry partner.
our industry partner offers a wide range of trains from small commuter rails to high speed trains.
their trains include a lot of software componentsthat providevariousfunctionality fromheating ventilation and air conditioning hvac systems to highly safety relevant systems such as the drive control system.
the software components consist mainly of scl code2.
over the years our industry partner s code bases have become large and complex.
for thisreason theengineeringteamthatisresponsibleforthetrain softwaredecidedin2014tofollowa model drivenengineering mde methodology.thiseasesthedocumentationofthetrainsoftware andmaintainstraceabilitybetweenrequirementsandsoftwarecomponents.the team ofaround 200engineers uses magicdraw astheirmodellingenvironment becauseitisanindustry proven tool supports modelling in the modelling language used in this project i.e.
sysml and is capable of handling large models.
as afurtherbenefitofmde largepartsofthesoftwarecomponents sourcecodearegeneratedoutofthesysmlmodels.forcodegeneration magicdraw models are transformedintoeclipse modeling framework emf models which are then transformed into sclsourcecodecomponents.thereasontouseemfinanintermediate step is the availability of tooling and libraries from the emf ecosystem.
code generation is a one way process that is no round tripengineeringisperformed.
at the time of the study the model base consisted of approximately 300gb of artifacts including image data for diagrams .
the overallmodelfortheentiretrainsoftwareisdividedinto122weakly coupledsubmodels whichareevolvedandversionedindependently fromeachother.forinstance thereisonesubmodelforhvacand anothersubmodelfor drive andbreakcontrol.
the traindomain isahighlyregulated domain sothe software is subject to qualification and certification requirements according toiec61508 en50126 en50657 anden50129 .
maintainingrequirementstraceabilityandexhaustivedocumentationisthereforerequired and followingamodel drivenapproach helps to automate many of the documentation related tasks.
in table1 we give an overviewof the projectsetting.
2aka.structuredtext ablock structurediec61131 3language mainlydesignedfor programmable logic controllers.
1357esec fse november14 18 singapore singapore christof tinnes wolfgang r ssler uwe hohenstein torstenk hn andreas biesdorf andsvenapel sincemanyofthesoftwarecomponentsshallbereusedacross different trainsets such as commuter rail light rail and high speed trains the software is developed as a software product line.
the artifacts are versioned in a repository with one branch per trainset called trainset platform .
there is also a platform called the commonplatform whichholdsthetype independentpartsofthe modelsandtheonesthatcanbeconfigured adjustedinthetrainspecificbranches.thecommonplatformisevolvedbyfollowingan extractivesoftwareproductlineadoptionpath thatis newly developedfeaturesandreusablepartsare manually identifiedand regularlymergedintothecommonplatform seefigure .common functionalityisevolvedinthecommonplatformandpropagatedto trainsetplatforms ifdesired.furthermore fixesorchangestothe modelsforthetrainsettypeshavetobepropagatedtothecommon platform andtrainsettypes that use the affectedparts.
in general changeandfeature propagation hastobe performed carefully since parts of the software system might have been qualified already and must not be modified thereafter.
several times permonth for qualityassurance purposes thecommonplatform and trainset platform branches are compared in the modelling tool magicdraw andmanuallychecked.incompatibleorincomplete changeshavetobebeidentifiedduringthesechecks.somechanges might even cause serious problems if merged into the common platformandthereforeneedtobeidentifiedandfixed.furthermore based on the model differences a domain analysis is performed by adomainexpertto identifycommonalitiesand reuseopportunities.
table1 projectcontextforourrailwaycasestudy.themodel size is given in number of model elements attributes not included .
model differences are between a trainset platform andthecommonplatformandinclude changed attributes.
number of train sub avg.model avg.number artifact age developers types models size of differences size .
.
300gb yrs semanticliftingto reducethe complexityofmodel differences as a consequence of unintentionaldivergence large model differences e.g.
thousands to hundreds of thousands of changes can increasetheeffortsintasks suchaschangeandfeaturepropagation quality assurance or domain analysis.
the large model differences leadtoincreasedeffortsforthesetasks.otherthancommonvariability management approaches we were therefore interested in the feasibility of a treatment of the large model differences that is atreatment ofthe symptoms ofunintentionaldivergence.
inthissection wedescribeanapproachtoreducethecomplexity of model differencesthat isbased on semanticlifting and edit operationmining .semanticliftingisnotaproductlineengineeringapproachbutameansforhandlinglargemodeldifferences.
.1model transformations and edit operations theapproachpresentedhereisbasedoneditoperations .an editoperation representsamodelingoperationthatauserofamodeling tool can perform on a model.
we consider edit operations asaspecialkindofmodeltransformation .modeltransformationsareacentralandubiquitouselementinmodel drivenengineering .
the concept of edit operations which are endogenous i.e.
sourceandtargetmeta modelareequal in place i.e.
the output of the model transformation overrides the input model modeltransformations canbeformalizedbygraphtransformations on typed graphs.
we refer the readers to the work of biermanetal.
andehrigetal.
fordetails.notethat since onemodelrevisionistheresultoftheapplicationofeditoperations to the previous model revision every model difference between two model revisions can be described as a partially ordered set of edit operations.
in this context we also speak of change patterns when we refer to editoperations.
.
description oftheapproach thehigh levelideaofourapproachistosimplifythepresentationof model differences and to provide further insights for the user.
this canspeeduptaskssuchaschangepropagation.weapproachthe problemoflargemodeldifferencesbyreducingthe perceived size ofthemodeldifference.thisisrealizedbygroupingfine grained differences tohigher level semantic changes.thesechangescan also be classified or tagged e.g.
a change can be a violation to supportthearchitectordeveloperduringanalysisandqualityassurance related tasks.furthermore higher level changes can help inthe identification ofcommon functionalities.
technically weachievethisbyasemanticliftingofthemodel differences.
as shown by kehrer et al.
a set of defined edit operations orhigh levelchanges inourcase canberecognizedin a model difference and each model difference can be expressed in termsofthesehigh levelchanges.inthissemanticliftingapproach high levelchangesaredefinedby editrules whichareanexecutable form of edit operations.
edit rules are then lifted to recognition rules which can be applied to a model difference to group the low levelchangesinthemodeldifferenceinto semanticchangesets .
furthermore if low level changes are contained in more than one change set a heuristic is applied to select only disjoint change sets.
largerchangesetsarepreferredoversmallerones.theresultof lifting is a difference containingall original changes grouped into disjointsemanticchangesets.forexample achangepatternthatwe observe quite often in the models from our case study in section isaconnectorandtwoportsaddedbetweentwoexistingpartsin an sysml internal block diagram see figure .
this high level change comprises low level changes.
for many tasks related tothemodeldifferences itwillbesufficienttoseethishigh level information andonly drilldownif necessary.
inasubsequentstep filterscanbeappliedtothelifteddifferences whichisespeciallyhelpfulforqualityassurance.somechangeswill be less interesting while others will be more interesting.
for example a renaming operation might be less interesting than adding interfacesbetweencomponents.filteringthesekindsofchanges improves the clarity of the model difference especially since these changes will typically be scattered across the model difference.
furthermore illegalchangescanbehighlightedinthemodeldifferences bytaggingcertaineditoperations.
a difficulty of this approach is that the high level changes have to be known and defined as input to the semantic lifting step.
this requires a deep knowledge of the modeling language s meta model 1358sometimesyou have to treat the symptoms tacklingmodel drift in anindustrial... esec fse november14 18 singapore singapore figure1 schematicrepresentationofmodeldriftbetweentrainsetplatformsandcommonplatformintherailwayproductline.
figure results of thesemantic liftingof aconnectorthat isadded between acomponentandasubsystem.
i.e.
sysml in our case and the underlying paradigm of the transformation language.
some of the high level changes might even be project specific.
moreover some of the changesare a form of tacit knowledge and it will be hard for domain experts to externalize this knowledge.
leaving the definition of high level changes totheengineersoftheprojectcausesalargeoverhead whichwe want to avoid.
in our previous work we therefore developed an recommendersystem ockham whichisabletominehigh level change patterns from model repositories .
the tool is based ontheso called minimumdescriptionlengthprinciple which statesthatthebest model in ourcase a set ofchangepatterns to explain a dataset in our case model differences from the model repository is the one that provides the best compression of the data.ockham considerstheproblemofautomaticallyidentifying semanticchangesetsfromagraphminingperspective.themining of high level changes is done in steps.
in step we compute modeldifferenceforsuccessivemodelrevisions.instep2 webuild so called simple change graphs for these model differences.
simple change graphs are labeled directed graphs that break the typically large modeldifferencesintoasetofsmallerconnectedcomponents.instep3 frequentsubgraphmining isappliedtothissetofconnected components for a large number of model differences.
step usesacompressionmetrictofilterforthe relevant subgraphsand torankthesubgraphsfortheoutputoftherecommendersystem.
in thelast step step executable edit operations forthe semantic lifting approach are computedfrom the labeledgraphs.
in our previous work we have shown our automatically discoveredchangepatternsarerelevantandhelpinameaningfulmanner.
detailsofthisrecommendersystemcanbefoundelsewhere and we show there that the edit operations discovered by ockham are meaningfulfor the models from the casestudy insection .
compared to the original semantic lifting approach our combined approach automatically recommends meaningful edit operations forlifting model differences.
moreover edit operations can be classifiedfor efficient filtering of large differences.
.
putting thepiecestogether the engineering team at our industry partner uses magicdraw for their sysml models but there is an export to emf.
many tools such as code generation tools are based on emf.
the approach presentedhere alsobuildson top of an intermediate emf model.
forsemanticlifting weuse silift whichuses sidiff for computingstructuraldifferences.forthedefinitionandexecutionof therecognitionrules siliftuseshenshin .siliftoutputsalist ofchangesandsemanticchangesets seefigure whichcanthen be filtered and sorted.for the edit operation recommendation we useockham whichuses sidifftocomputemodeldifferences andgaston for frequentsubgraph mining.
ockham outputs the recommendededitoperations as henshin rules.
case study in this section we report on our case study conducted with our industry partner.
we analyze the symptoms of model drift influencing factors andpossible solutions.
1359esec fse november14 18 singapore singapore christof tinnes wolfgang r ssler uwe hohenstein torstenk hn andreas biesdorf andsvenapel table overview oftheinterviewees.
role scope experience level systemengineer singlemodel entry level systemengineer singlemodel intermediate tool support cross cutting intermediate chiefarchitect cross cutting senior headoftool development cross cutting senior .
research questions to better understand the model drift our goal is to answer the following research questions.
rq rq study the problem side whilerq4andrq5study the solution side rq can model drift be observed in this product line and how is itperceivedbythe developers?
rq whatare symptoms ofmodeldrift?
rq what are causes of model drift and large model differences?
rq4 canexistingsolutions i.e.
bottom upapproachesandplatformbasedapproaches to the modeldrift be applied?
rq5 canthe semanticlifting approachsupportthe engineersin handling large modeldifferences?
.
studysetup andconduct semi structured interviews to get a first impression of the modeldriftchallengeinthisproject weconductedsemi structured interviewswithfiveengineersoftheproject seetable among them the head of the tool development team and one of the lead architects.
three of the participants were working with more than one of the products of the product line and two of the participants did contribute to a single product.
the interviews lasted minutes.
the interview had three sections challenges in cloneand ownproductlineengineering unintentionaldivergence and variability management solutions.
in the last section we presented the approach form section 4and asked the participants for their feedback regardingtechnical organizational aswellaseconomic feasibility.we askedonly open ended questionsand didnot have any further constraints except covering the three sections mentionedabove.
questionnaire survey we then used the input from the semistructuredinterviewinthedesignofaquestionnaire.weconducted a web based3questionnaire survey with project employees of theprojectfromsection .thequestionnairewasdistributedvia a mailing list of the architects of the project.
therefore the majority of the recipients were architects and developers involved in architectural decisions.
the survey had four sections the first section asked the interviewees about their role and experience the secondaboutevolutionandtrendsoftheproject thethirdabout model differences in the project and the last one about solution ideasandtheirfeasibility.wegaveanintroductionintothetopic andshortlysummarizedvariabilitymanagementsolutions.wealso explained the semantic lifting approach.
all together we asked questions.
since a majority of the employees are german speaking weaskedallthequestionsingerman.thequestionnairewas sent to candidates and filled out the questionnaire.
of the 3we used microsoft forms since it is easily accessible and employees at our industry partnerarefamiliar with thistool.respondentswerearchitects while4oftherespondentsweredevelopers.theprojectexperienceoftherespondentsrangedfrom years to more than years.
the questionnaire is available at .
repositorydata toalsogetquantitativeinsights wegotaccess to the sysml models in the project.
the repository used is the teamwork server which is the default solution for collaborative developmentin magicdraw .thereisoneprojectforeachofthe submodelsandtherepositoryholdstheentirehistoryforeachof the submodels and all trainset platforms as well as the common platform.
table 1shows the number of submodels trainset platforms aswellastheaveragesizeofthemodels.wealsousedthe datainthisrepository toexemplaryvalidate statementsmade by interviewees andsurvey respondents.
to answer the research questions we use the input from the semi structuredinterviews theresultsfrom thequestionnaire as well as insightsfrom the models inthe modelrepository.
.
results semi structured interviews.
during the interviews four out of fiveinterviewpartnersmentionedchallengesrelatedtolargemodel differenceswhenaskingaboutgeneralchallengesintheirproject.
for example they stated that during the propagation of changes from one product variant to another variant the model differences canbehardtounderstandbecauseofchangesconcurrentlymade byotherdevelopers.oneoftheinterviewpartnersdidnotmention challenges related to the variability at all.
when we asked about thetasks androlesintheproject itturnedoutthat shewas mainly involvedintheevolutionofasingleproductandnotinanyactivities related to variability management.
as major drivers for variability differences in hardware as well as different customer requirements have been mentioned.
all interviewees ruled out a migration to a platform based productlineengineeringapproach becauseofmigrationefforts risks and immature tooling.
furthermore there are less than a dozen of product variants and therefore the effort for maintaining the platformpossiblywouldexceedthebenefits.bottom upapproaches are conceptuallymore realistic butthere exists nomature tooling yetand asaprerequisite thevariabilityhastobeknownexplicitly whichisnot yetthe caseintheir setting.
the most time consuming tasks for the interviewees are variant synchronization tasks e.g.
change propagation .
merging appears to be difficult because it is hard to define what belongs to a feature and what does not.
there are many interfaces between different submodels which further complicates merging.
computing the differencesthemselvesisalreadytime consumingandtakes15to 30minutespermodeldifference.worse manyfine grainedchanges suchasrenamingoperations makethemodeldifferenceshardto read.
this is also the case for frequently performed refactorings that are introduced because the models are adapted to new tooling.
whenweexplainedsemanticliftingtotheinterviewees fourout offiveparticipantsstatedthatasemanticliftingapproachhasto potential speed up several of their activities in the project.
for example the analysis of model differences for review purposes could be supportedandirrelevantchanges can be filteredout.
1360sometimesyou have to treat the symptoms tacklingmodel drift in anindustrial... esec fse november14 18 singapore singapore questionnaire.
all of the answers were optional but most of the participants of our industry partner answered to all of the closed endedquestions.wealsoreceived10answerstoopen ended questions.
of the respondents said they observe a drift between the different products.
all of them see model drift even among the biggest challenges in the project.
of the respondents say that withoutasolution seriousproblemsmightarise ofthe respondentssay that asolution willincreasethe efficiency.
as symptoms of model drift respondents report increasingly large model differences increasedeffort for change propagation increasing numbers of inconsistencies increasein communicationefforts increaseinfeatureinteractionbugs and increased effort for domain analysis .
furthermore for89 oftherespondents modeldifferencesplayaroleinsomeof their tasks in the project for even a significant role.
while for only of the survey participants model differences between two revisionswithinoneproductvariantcanbechallenging ofthe respondents experience model differences between two product variantsaschallenging.fortheserespondents differencesplaya role and can be challenging during the following tasks reviews changesandbugfixesbetweentwovariants anddomain analysis .
one of the participants pointed out that even inrequirementsengineering requirementsarealsopartofmodels unintendeddivergenceisachallenge.
ascausesofthemodeldrift alloftherespondentsmentioned different hardware of the products and parts of the architecture not being reused even report a significant influence of not reusing parts of the architecture.
think that it is difficult to defineandunifyfeaturesacrossmultipleproductsandevolution of the single products has been mentioned by .
according to the respondents large model differences are also caused by the size of the models themselves missing explicit variability information missing tool support for filtering and cherrypicking of model differences and no distinction between architectural i.e.
refactorings andfunctional evolution .
in figure we show a violin chart of the likert scale data for the survey participants opinions about platform approaches bottom up approaches and the semantic lifting approach.
the plots shows their opinions along several dimensions whether the approaches are suitable to provide improvement regarding the modeldriftchallenge whethertheadvantagesofutilizingtheseapproaches would outweigh the cost and risk of development and migration whetherthecurrenttoolingwouldsupporttheapproaches whether the approaches are organizationally and technically feasible andwhether tooling for theseapproachesisknownalready.
repository data.
in order to also quantify the model drift we computed the model differences between the common platform and the trainset platform for a selection of submodels and trainset platforms and three time regions we can not take time points because we do not have revisions at the same time points for all of the submodels .
figure 3shows a violin plot of the size of the modeldifferences.inthisplot wegroupedthedifferencesintothree groups spring2022 spring2021 winter2019 .evenmore ifwe considerasingletrainsetplatformandasinglesubmodel wecan observe an increaseinthe size ofthe modeldifference.wealsomadespecificobservationsinthemodelhistories specifically withthepurposeof cross validatingsome of the statements oftheinterviewandsurveyparticipants.forexample wecansee thatthereareentiremoduleswiththesamepurposethatarenot reused but evolve independently for each of the trainset platforms.
wealsoseethatrefactorings suchasrenamingsorchangingthe structureinthepackagehierarchycanobfuscatemodeldifferences.
for example the renaming of a root package will lead to a change inthefullyqualifiedname ofallsubpackages.alsoweencountered submodel revisions for which computing the model differences usingmagicdraw failed because of a memory limit.
we will refertospecificobservationslikethesedirectlyinthediscussionin section5.
.
.
discussion inthissubsection weusetheresultsfromtheexperimentstoanswer the researchquestionsfrom section .
.
rq model drift.
four out of five participants of the semistructured interviews as well as of the survey participants stated that they experience model drift and that model drift is a serious challenge.
as can be seen from figure in terms of the size of model differences the common platform and the trainset platformexperienceadrift.thetimeforcomputingthedifferences of the latest models in magicdraw was 25min on average on a lenovop51withanintelcore tmi7 7820hqcpuand10gbram for the magicdraw java application.
summary model drift is perceived as serious challenge fortherailwayscasestudy.modeldriftismanifestedinthe modelhistoriesandisalsoperceivedbyamajorityofthe engineers from our interviewsandquestionnaire.
rq2 symptomsofmodeldrift.
accordingtotheinterviewsas wellasthequestionnaire changepropagation domainanalysis and qualityassurancearetasksthathavebecomeincreasinglychallenging because of the model drift.
this ismainly because of the huge size of modeldifferences involved in these activities.
for example for the heating ventilation and air conditioning model i.e.
one of the submodels magicdraw presents .
differences betweenonetrainsetplatformandthecommonplatform.thisinduces considerableeffortforanalysistasksandvariantsynchronization tasks e.g.
change propagation .
for instance in our interviews the engineers at our industry partner confirm that on average the analysis for quality assurance purposes takes minutes per submodel.giventhatoftenmultiplesubmodelshavetobeanalyzed on a regular basis often several times per month this leads to significant efforts and costs.
furthermore the risk of making mistakes forexample missingatouched sealedcomponent i.e.
a component which is marked as unmodifiable raises.
if disallowed changesarediscoveredonlylateintheprocess atworstduring softwarequalification thisleadstodelaysinthedevelopmentprocess which in the end leads to delayed delivery of the products to customers and penalties by customers.
another symptom of model drift are increased communication efforts which were reported by ofthe participants.
1361esec fse november14 18 singapore singapore christof tinnes wolfgang r ssler uwe hohenstein torstenk hn andreas biesdorf andsvenapel a violin chart of the opinionsabout bottom up approaches platform approaches and the semantic liftingapproach.likertscoresrangefrom disagree to agree .
b violineplotshowingthenumberofchangesperdifference between common platform and trainset platforms.
figure left comparisonofthesolutionapproaches.
right modeldrift inthetrend ofthe modeldifferencesize.
missingreuseopportunities duetothesheernumberofdifferences further accelerates the drift between the different trainset platforms.
this causes redundant work for the different trainset platforms.accordingtooneofthesurveyparticipants rebasingof aproducttoanewversionoftheparentplatformisnotpossiblefor monthsbecausethediffsaresolargethattoolcrashesreproducibly which then leads to some of the work been done multiple times or even newduplicatesbeing created.
besides the sheer number of changes changes may be scattered acrosstheentiremodeldifference.asanextremeexample recently the engineering languagehas been changed from german toenglish.
in total more than .
or changes in total of the changes are related to renaming refactorings.
for some of the analysis tasks e.g.
reviews these changes are irrelevant but the modellingtooldoesnotprovidefiltersforthesechanges.forothertasks suchasdomainengineering itwouldbehelpful toclassifythese changes and merge them contiguously instead of being intermixed withothertypes ofchanges e.g.
functional changes .
summary large model differences and increased communicationefforts are the main symptoms for model drift experiencedatourindustrypartner.findingcommonalities or reuse opportunities in these large differences has also become challenging.
mostly tasks such as change propagation domainanalysis andqualityassuranceseem tobe affectedbythe drift.
rq3 causesofmodeldriftandlargemodeldifferences.
wefound the following drivers for modeldrift andlarge modeldifferences.
hugemodels accordingtotheinterviewees onereasonforthe enormoussizeofmodeldifferencesisthe sizeofthemodels themselves.themodelsgrewsteadilyinsizeoverthelastsevenyears.
theaveragesizeis24.627objects whereanobjectisaninstanceof aclassinthemeta model.thatis attributesandreferencesarenot evenincludedinthiscount.thereasonisthatthetrainsoftwareand system is modeled with a high degree of detail.
various additionalinformation is provided for example requirements traceability or organizational information.
duplicated architecture in the model repositories we found parts of the models that seem to have a similar purpose but are modelledindividuallyforeverytrainsetplatform.theseduplicated parts appear in every model difference and also inflate the number of changes in these differences.
different hardware used for the differenttrainsetplatformsappearstobeoneofthemaindrivers for inducing new variability and duplicated parts of the models.
the interviews and survey support this finding.
one of the survey respondents said that under time pressure often only a single solution is sought for the concrete problem in the concrete project instead ofasolution suitable for the platform.
implicit variability many of the problematic changes that are typically found during quality assurance are related to missing explicit constraints related to variability.
for example there are componentswhichmustnotbemodifiedinoneofthetrainsetplatforms.
because this information is often implicit trainset platform engineers sometimes change parts of a model where actually no change should occur.
missing variability information increases the size of the model differences features that are only part of the platform but not present in a specific train type will be always showninamodeldifference eventhoughtheymightnotberelevant.
likewise features that are only part of the specific trainset platformsbutirrelevanttotheplatformshouldbeexcludedfrom theplatformwhenmergingtraintypechanges.fortaskssuchas extractingcommonalities suchfeaturesareofspecialinterest.this extractionwouldbeeasierifonlyproduct specificfeaturesarecompared across the different train types that is explicit variability should be usedfor isolatedfeature development.
missing tool support especially for domain analysis a model differencebetweenatrainsetplatformandthecommonplatform orbetweentwotrainsetplatforms is computed.inthedifferences there will be many changes that are not relevant for the domain analysis.
one limitation of magicdraw is that it does not support filtering model differences.
even given a concrete feature mapping 1362sometimesyou have to treat the symptoms tacklingmodel drift in anindustrial... esec fse november14 18 singapore singapore magicdraw doesnotprovideanyfilteringfunctionalityout of the box.thisisalsopartlyrelatedtothefactthatthereisnocommonly acceptedwaytoexpressvariabilityinsysmlmodels.theengineers at our industry partner not only need support for boolean features but also numeric and topological features.
furthermore magicdrawonlysupportstwo wayandthree waymergingtopropagate the changes between branches.
merging aims at including as many changesaspossible whileindifferentvariants somedifferencesare desired .cherry picking changes i.e.
onlyselectingchanges betweentwoconsecutiverevisions wouldsupportchangepropagation but magicdraw doesnotsupportcherry pickingasofnow.
onofthesurveyrespondentsmentionedthat poortoolsupport for taking over simple changes leads to the same changes being broughtinindividually andthusonlybeingthesame butnotthe sameelements sothattechnicallyfurtherdiffsarise.
inourrepositorydata wecanalsoseetheseduplicatedblocks whichwillshow upinthe modeldifferences.
classification of changes model differences typically show manyfine grainedchanges.someofthesefine grainedchangesbelong to higher level changes but they are not grouped together in thepresentationofmodeldifferences.thisincreasesthe perceived size of the model differences.
another challenge that increases the complexityofmodeldifferencesisthelackofadistinctionbetween architecturalevolution i.e.
refactoring andfunctionalevolution.
forexample correctingatypoinacomponentnameispresented inasimilarwaytotheuseraschangingaconnector.anotherexamplearemoverefactorings forexample apackageismovedinthe containmenthierarchy orgraphicalchangesindiagrams.asone of the survey respondents states semi automatic changes example upper lowercaseofelements leadtohugediffs sothatno manual diff and merge is possible for a long time.
these changes are typically scattered across a model and they are ubiquitous.
for some activities such as quality assurance it would be helpful to distinguishthesechanges from other more importantchanges.
summary largemodelstogetherwithalackofsupport for explicit variability as well as missing tool support for filteringmodeldifferencesresultinlargenumbersofmodel differencesthathavetobeanalyzed.therefore itisincreasinglydifficulttoreusepartsofthesystemacrossmultiple trainset platforms.
parts of the models can not be reused even though they have a similar purpose.
these factors cause the variants driftingapart over time.
rq solution approaches.
during our interviews and in the survey we identified several hindrances using existing solution approaches seesection .2andsection .
whichwediscussin this subsection w.r.t.
possible solution approaches.
platform approaches our interviewees and survey participants mentioned several barriers to use platform approaches.
most prominently platform approaches can not be used because of thecostandriskofamigration.atourindustrypartner thereisalreadyasignificantamountofmodellingdatathatwouldhavetobe migrated.
one of the participants of the interview mentioned that many of the developers think in terms of concrete products and not the entire product line .
this also shows that a migration frompure clone and own to a platform software product line approachwillfaceorganizationalhindrances.furthermore thereisno variabilitymodellingapproachthatsupportsbooleanconstraints numeric constraints as well as also topological constraints.
one of thesurveyparticipants evensaidthat thestructuralvariabilityis solargethatitcannotbemodelledusinga150 platform.
some mentioned that such an approach could be useful as a basis which is also a goal of current efforts but some of the differences will be toospecialandneedindividualsolutions.
bottom up approaches according to our interviews a support for understanding the variability and commonalities between the different trainset platforms is clearly desirable.
nevertheless according to interviews and survey approaches proposed in the literature are not mature enough.
for example as for the platformapproaches thereisnoapproachthatsupportsboolean constraints numericconstraints andtopologicalconstraints.additionally variationcontrol systems proposed for models e.g.
supermod havenotyet beenevaluatedinanindustrialsetting.
thisiscomplicatedbythefactthatthereisnouniversallyaccepted standardfor expressing variability inmodelinglanguages .
typically bottom up approaches make use of traces between featuresandimplementation artifacts.automatically reverse engineeringthefeaturetracesinthisproductlineisnotfeasible.this is not only because of non booleanconstraints but also because of thesizeofthemodels andthereforescalabilityissues andbecause these approaches discover many merged feature candidates that contain more than one feature.
furthermore there are not enough products available to discover a useful set of feature candidates.
in general the development of methodology and tooling in the domainwouldbe ofenormous complexity according to asurvey respondent.
nevertheless the engineering team at our industry partnerdevelopedanapproachtofeaturetraceability andthemanualincorporationofexplicitvariabilityinformationintothemodels is an ongoing activity.
still there are only a few feature traces yet whichcould be used.
summary commonvariabilitymanagementsolutionsproposedintheliteraturearenotapplicabletothesettingatour industrypartner.thisismainlyduetoimmaturityofthe available tooling but also because many approaches make simplifying assumptions not taking real world and organizationalconstraintsintoaccount.amigrationtoanother approach comes withhigh costsandrisk inany case.
rq semantic lifting.
while platform based and bottom up approachesarenot yet applicableinthissetting theresultsfromthe interviews and the questionnaire survey suggest that the semantic liftingapproachfromsection 4appearstobesuitabletosupport the engineers inhandling large modeldifferences.
having a semantic change log for model differences has already beenhypothesizedasavaluablesolutioninaworkshop according tooneoftheinterviewparticipants.fouroutoffiveinterviewees stated that using higher level change patternsin the presentation ofmodeldifferenceswouldsupportmanytasks suchasmerging features filtering the differences during reviews identifying illegal changesinmodeldifferences andunderstandingmodeldifferences 1363esec fse november14 18 singapore singapore christof tinnes wolfgang r ssler uwe hohenstein torstenk hn andreas biesdorf andsvenapel in general.
the remaining participant did not perform any tasks where the current size of the model difference was considered as a problem.
two interviewees who were responsible for propagating changesbetweenthecommon platformandtrainsetplatformsdescribedthemergeprocessasoneoftheirbiggestchallenge since they workwithseveralworkersintheproject itisalsovery time consuming tofilteroutwhatmyownchanges were.
usually several points in the model are affected by a small change external interfaces software product structure physicalstructures sotherearechangedelementsineveryfolder so to speak.
grouping related changes can support here as well.
twooftheintervieweesmentionedthatchangepatternscouldalso be used to easier recognize complex refactorings in model differences.
in earlierwork4 it hasbeenshown that in this productline recommended edit operations for the semantic lifting achieve a compressionratioofabout .
onaverage withoutfiltering yet .
the current tooling does not support such an approach natively but according to one of the interview participants it would be possibletodevelopapluginfor magicdraw .unlikethebottom up approaches semantic lifting appears to be more feasible from a technical viewpoint see figure .
nevertheless one of the survey participants is also concerned that the current lack of experience in that field could be an obstacle in the development of a production ready solution.
interviewandsurveyparticipantsatourindustrypartner largely support the hypothesis that a semantic lifting approach mitigates challenges arising from the model drift.
thehypothesisisfurthersupportedbytheobservationthat thedifferencescanindeedbecompressedusingsemantic liftinginthisproductline.nevertheless thereareconcerns that the production ready implementation of a semantic lifting approach can be challenging.
.
threatsto validity thepurposeofthisworkistoreportonaconcretelarge scaleproductlineinanindustrialsetting.wedonotclaimthegeneralizability tootherlarge scaleproductlineshere althoughwestronglybelieve thatsimilarchallengesexistinmanyindustrialsettings.thisisalso suggested by the work of dubinsky et al.
and rubin et al.
.
athreat tointernalvalidityiscausedbyoursetupof theinterviews and the questionnaire.
we had no control group because we only had asmallgroupof participants.
nevertheless inparticular regarding the existence of the drift we used three different methods interviews survey andrepositorydata tovalidatethe presences of an unintentional divergence.
furthermore we did not evaluatethesemanticliftingapproachinalong termapplicationat ourindustrypartner.forfuturework weneedtoputtheapproach to the acid test bylettingthe engineers work withthe tooling.
a threat to external validity is that we only used a small sample of engineers from the project for our interviews and in the survey.
nevertheless the engineers participating in the interviews and the 4an extension of is currently under review and available as preprint at https intoarchitecturaldecisionsorhadanotherwiseleadingrole.wealsousedonlyasubsetofallsubmodelsinthe project for our repository analysis.
anyhow because the results of interviews survey and the repository analysis are consistent weareconfidentthatourresultsholdfortheentireproject.also many results were evident from a small sample set for example we could find the drift for allsingleproducts inthe sample.
conclusion and outlook inthispaper wereportonastudyonmodeldriftinanindustrial large scale model driven clone and own software product line.
we conducted semi structured interviews a questionnaire survey and we analyzed the model repository to understand model drift in this product line.
we found substantial model drift that impairs several tasks such as change propagation domain analysis and quality assurance.
the main reason is that these tasks are based onlargemodeldifferencesthathavetobeanalyzedmanuallyby engineers.wefoundthatsolutionsdescribedintheliteratureare oftennotapplicableinareal worldsetting forexample filtering modeldifferencesforcertainfeaturesrequiresarigorousmodelling of variability in the models and existing tools miss some critical functionality forexample handlingstructuralvariability.instead of addressing variability management as one of the root causes for large model differences we also studied the alternative route of addressing large model differences directly.
based on our observations weproposedaconcretesolutiontomitigatetheproblem by summarizing the model differences in terms of higher level change patterns that are automatically derived from model repositories based on the idea that meaningful patterns are the ones that compressesmodel differences.in thecontext oftheprojectatour industrypartner thisideaappearstoholdtrue.ourmixedmethods studyprovidesevidencethatsemanticliftingcansupportengineers in tackling large model differences.
the approach is orthogonal to variability management solutions.
for example even using variabilitymanagementsolutions modeldifferencescanstillbelarge e.g.
becauseofthesizeofthemodelsormissingtoolsupportfor filtering modeldifferences properly .
other existing solutions to support software product line engineering related tasks require explicit variability in the models.
establishing a bottom up managed cloning productline engineeringisalong termtargetatourindustrypartner.theengineering team at our industry partner is currently working on making variabilityexplicitbycreatingexplicitmappingsfromfeaturestomodel elements.
as a long term solution it is conceivable to use this variability information for instance to propagate changes between trainset platformsorforfilteringofmodelsand modeldifferences.
while in the long run it is imperative to establish a working variabilitymanagementapproach intheshort term treatingsymptomsofunintentionaldivergencecansupportengineersandavoids costsandriskofmore costlysolutions.