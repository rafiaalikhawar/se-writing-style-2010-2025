cost measures matter for mutation testing study validity giovani guizzo federica sarro mark harman g.guizzo ucl.ac.uk f.sarro ucl.ac.uk m.harman ucl.ac.uk department of computer science university college london london united kingdom abstract mutation testing research has often used the number of mutants as a surrogate measure for the true execution cost of generating and executing mutants.
this poses a potential threat to the validity of the scientific findings reported in the literature.
out of works surveyed in this paper we found that are vulnerable to this threat.
to investigate the magnitude of the threat we conducted an empirical evaluation using real world programs.
the results reveal that i percentages of randomly sampled mutants differ from the true execution time on average by varying in difference from to ii errors arising from using the surrogate correlate with program size .
and number of mutants .
making the problem more pernicious for more realistic programs iii scientific findings concerning sampling strategies would have approximately rank disagreement indicating potentially dramatic impact on experiment validity.
to investigate whether this threat matters in practice we reproduced a seminal study on selective mutation widely relied upon for more than two decades .
the impact is stark an inconclusive scientific finding using the surrogate is transformed to an unequivocal finding when using the true execution cost.
ccs concepts software and its engineering software testing and debugging general and reference empirical studies measurement.
keywords software testing mutation testing mutation analysis cost reduction number of mutants execution time mutant reduction acm reference format giovani guizzo federica sarro mark harman.
.
cost measures matter for mutation testing study validity.
in proceedings of the 28th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse .
acm new york ny usa pages.
introduction mutation testing has been widely studied and empirically evaluated in academia for several years .
a mutant program is a copy of the original program with a seeded fault which is permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse november sacramento california united states association for computing machinery.
acm isbn x xxxx xxxx x yy mm.
.
.
.
when the output of a test case for the original program differs from the output of the same test case when executed against the mutant in which case the mutant is said to be killed .
if no possible test case can kill a mutant then the mutant is defined to be an equivalent mutant.
assessing the equivalence of mutants is generally undecidable and usually is done at least partly manually by the engineer.
the primary goal of mutation testing is to kill as many non equivalent mutants as possible increase the mutation score i.e.
percentage of killed mutants and improve the test suite as a consequence.
the greater the mutation score the better the test suite.
this makes mutation analysis1one of the strongest testing criteria for evaluating or guiding the creation of test suites .
however its high cost is one of the primary reasons why it has not been extensively adopted in industry.
the cost of mutation analysis comes mainly from i mutant generation ii mutant execution and iii equivalent mutant assessment.
during the first step mutants are generated by mutation operators that seed a fault mutation in the original program.
then test cases are executed against mutants in the second phase to try to reveal the faults represented by such mutants.
alive mutants are then evaluated to check for equivalence.
as one can infer generating several mutated programs executing them against multiple test cases and manually deciding which ones are equivalent demand a large amount of computational and manual resources.
in the end the cost of mutation analysis can be broken down into two i mutant generation and execution time i.e.
computational cost and ii person hours for assessing mutant equivalence i.e.
human cost .
several cost reduction techniques have been proposed to minimise the computational cost .
these techniques can be classified into three main categories i do faster ii do smarter and iii do fewer .
do faster approaches focus on generating and executing mutants as fast as possible e.g.
mutating compiled programs instead of source code or using compiler related optimisation .
do smarter approaches try to distribute the execution of mutants over several machines or even avoid their complete execution e.g.
stopping the mutant execution after the mutated line is executed .
do fewer strategies try to generate or execute fewer mutants consequently reducing the computational time needed for such tasks e.g.
by randomly sampling and executing x out of all the generated ones random mutant sampling rms or by using only a subset of operators to generate the mutants selective mutation sm .
do faster and do smarter approaches usually measure the cost reduction in terms of execution speed up.
on the other hand do fewer approaches usually rely on the assumption that there is a correlation between the number of mutants and the computational 1mutation analysis can be defined as the testing criterion used to measure the quality of a test suite whereas mutation testing is the process of testing the software based on the results of mutation analysis .esec fse november sacramento california united states guizzo et al.
cost of generating and executing them.
the existence of a correlation is undeniable the fewer mutants generated and executed the faster the mutation analysis.
this assumption is so widespread that according to the recent findings of pizzoleto et al.
number of mutants has become the single most used cost reduction measure in the mutation testing literature.
however even though the assumption of correlation holds it does not mean that a reduction of x mutants necessarily translates into x reduction in the computational cost of executing them.
hence stating that by reducing the number of mutants the mutation cost is also reduced is not the same as stating that by reducing the number of mutants by x the mutation cost is also reduced by x .
this is a threat to validity that can lead to misleading conclusions about which strategy will be more effective on reducing the cost of mutation analysis.
despite being a known threat to validity researchers usually report the cost reduction in terms of x fewer mutants and do not measure the reduction in execution time.
as described in section out of analysed papers only report execution time and of them are vulnerable to the threat presented in this work.
this might seem to be a mere detail concerning the choice of measures but we present results that demonstrate that this choice has a profound impact on the scientific conclusions that have been and will continue to be drawn on mutation analysis.
to the best of our knowledge there is no work in the literature that investigates the validity of using number of mutants as a surrogate for execution cost nor the magnitude of the error that may result in consequent threats to the validity of scientific conclusions.
therefore in this paper we investigate the effects of using and reporting number of mutants rather than the actual execution time.
to this end we carry out an empirical study encompassing programs and cost reduction strategies based on rms and sm for which we measure both number of mutants and execution time percentages in relation to all mutants.
the results of our study show that there is an error of on average between number of mutants and execution time measurements.
this error varies from to depending on the program.
we also found that the mean percentage error is significantly p values .
and positively correlated to the size of the program spearman s .
and to the number of generated mutants .
i.e.
as the program grows the relative errors also grow thus making number of mutants an unreliable measure for assessing the cost of mutant cost reduction techniques in large real world programs.
when ranking and comparing rms and sm strategies using both number of mutants and execution time we found that of the ranks are disrupted.
the changes of ranks are always favourable to sm i.e.
for out of programs at least one sm strategy that is considered more expensive than rms according to number of mutants turns out to be cheaper according to execution time.
in order to determine whether this threat to validity matters in practice we reproduce the work by offutt et al.
with realworld large scale java programs.
the results show that rs selective is the cheapest strategy according to execution time for all programs.
however if we use number of mutants instead this scientific conclusion changes from unequivocal to inconclusive both eand rs selective generate fewer mutants for programs each.
as a result we conclude that all work that relies on selective mutationneeds to be re evaluated to take account of the true execution time rather than the widely used surrogate.
the main contributions of this work are relevance a survey of mutant reduction papers.
of them do not report execution time and also use the number of mutants as a proxy for cost being directly affected by the threat presented in this work.
problem the quantification of this threat.
there is an average error of between the number of mutants and execution cost varying from to depending on the program.
problem is worse at scale an assessment of correlations between the program s properties and errors.
positive significant correlations p values .
with the programs size .
and the number of generated mutants .
.
changes scientific findings an analysis of the impact of these errors when comparing rms and sm strategies.
disagreement on of the ranks when using execution time instead of number of mutants.
changes foundational scientific conclusions the reproduction of an sm work .
ranks between the cheapest strategies change for out of programs fundamentally changing the scientific conclusions as a consequence.
the rest of the paper is organised as follows.
we survey previous work on cost reduction in section assessing which ones report execution cost and which ones acknowledge the investigated threat.
section describes the research questions rqs and the empirical evaluation conducted to answer them.
in section we report the results answer the rqs and then highlight our main observations.
section discusses the threats to validity.
in section we describe related work that acknowledges the threat to validity investigated in this paper.
section concludes the paper and presents future work.
mutation analysis cost reduction in a recent systematic review of the mutation cost reduction literature pizzoleto et al .
collected and reported the most common types of strategies goals and metrics used for achieving cost reduction.
after analysing peer reviewed papers published between and the authors found that do fewer approaches are the most common ones approximately of all analysed papers for which the goal is usually to reduce the number of mutants in general or equivalent mutants.
furthermore among all types of strategies the number of mutants is the single most used measure and mutant execution speed up follows as second.
starting from the literature review of pizzoleto et al .
we collected and then evaluated works that use do fewer strategies and that report number of mutants and or execution time as a cost measure.
then we performed snowballing on the selected set and also searched for more papers in popular repositories such as google scholar.
based on this process we identified papers while pizzoleto et al .
include only papers as do fewer .
we analysed these papers with respect to two main aspects the specific type of mutant reduction technique with a simplified categorisation random mutation selective mutation or others and if they acknowledge the threat investigated in our study whichcost measures matter for mutation testing study validity esec fse november sacramento california united states was not analysed by pizzoleto et al .
.
in other words we are interested in identifying which of those papers report both number of mutants and execution time and which ones acknowledge the threat investigated in this paper about the accuracy of number of mutants in capturing execution time.
table presents the results of our survey.
we observe that rms and sm are the two most used strategies among the papers whereas of them use other kinds of strategies such as higher order mutation hom or evolutionary algorithms .
papers use either rms sm or both usually comparing them to different types or even newly proposed strategies.
these two strategies are also commonly used as a baseline for comparison serving as sanity check .
among all papers different tools are used targeting c c c java python and other languages.
out of the papers surveyed only use execution time to measure cost reduction.
similarly to what was observed by pizzoleto et al.
number of mutants is the most common measure for cost reduction among the papers found.
out of .
of the surveyed papers claim a relation between the number of mutants and cost reduction and subsequently use it as a direct measure for comparisons in computational cost saving or efficiency gain.
out of .
of the papers use the number of mutants indirectly e.g.
as an efficiency baseline for effectiveness comparison but do not use it to draw a direct cost comparison.
out of of the papers report the number of mutants but either compare the computational cost in terms of execution time or use it for other purposes e.g.
proxy for equivalence determination cost thus they are not affected by the threat.
all in all out of the papers we surveyed are susceptible to the threat.
six papers acknowledge that this is a threat and five of those try to deal with it but none of them evaluated the degree to which this threat affects scientific conclusions of previous work.
only three of the papers that measure the time also acknowledge the threat of using number of mutants as a surrogate for execution time.
the other papers implicitly mitigate such threat by simply measuring and reporting the execution time.
if the assumption of equal ratio between the two measures does not hold then it is a construct validity threat to the papers that do not report execution time and use number of mutants as a proxy for real computational cost.
the underlying questions are what is the difference if any between the number of mutants and the true execution time and how does this affect previous scientific conclusions?
empirical study design this section describes the design of the empirical study we conducted to evaluate the differences between the execution time and number of mutants measures in mutation analysis.
we do not evaluate the whole cost of mutation testing i.e.
we do not measure the manual or computational cost of determining mutant equivalence neither the cost of creating and assessing new test cases because our objective is to focus on the generation and execution of mutants during the mutation analysis task.
during this evaluation we consider execution time as a direct measurement of cost theless execution time spent on mutation analysis the cheaper it is.
therefore execution time means computational cost in the context of this work.
for all rqs the mutants are executed until they are killed i.e.
we use partial mutation as opposed to generating the whole killing matrix.
with this approach we intend to evaluate the cost of mutants in a real world setting.
.
research questions the goal of this evaluation is to answer the following four rqs rq1 random mutant sampling what is the difference between execution time and number of mutants when using rms?
rq2 statistical correlations what are the statistical correlations if any between errors and the properties of the systems under test?
rq3 strategy differences how the rankings of rms and sm strategies change when comparing their cost based on number of mutants and execution time?
rq4 does it matter?
can we reproduce previous foundational results on mutant selection?
.
.
rq1 random mutant sampling the first rq is designed to assess the differences between execution time and number of mutants obtained by rms strategies.
by randomly sampling subsets of mutants in different percentages we can evaluate whether the ratio is for the percentage of sampled mutants to the execution time needed to execute the strategy.
in other words we are investigating whether by randomly reducing the number of mutants by x we also reduce the execution time by x the ratio assesses how close the empirical data come to this idealised parity.
rms is arguably the most naive type of mutant reduction approach as mutants are discarded with no particular preference thus representing an unbiased reduction.
this strategy has also served as a baseline comparison for several other work in the literature .
therefore assessing the error for this type of strategy provides a meaningful overview of what to expect from mutant reduction strategies in general.
to answer this question we execute rms strategies with percentages varying from to in steps of for a total of nine strategies .
setting a x step is a common practice when dealing with such kind of strategy since it would be impractical to evaluate all percentages in the range.
in order to generate and execute mutants we use pit v1.
.
one of the most common and fastest java mutation tools in the literature .
pit has seven default operators and several default execution cost reduction strategies such as bytecode manipulation test case prioritisation and test case filtering based on coverage.
we used the default configuration of pit in order to minimise threats to internal validity see section .
these nine rms strategies are evaluated with real world programs and their original test suites.
table presents data concerning the characteristics of the programs used as subjects to answer all rqs.
these systems are also used in other related work on cost reduction in mutation analysis .
we selected the latest version of open source programs of various sizes coverages 2this is a threat to validity discussed in section .esec fse november sacramento california united states guizzo et al.
table do fewer papers that use number of mutants or execution time as cost measure.
m use number of mutants as cost measure.
time report execution time.
rms sm and other use random mutant sampling selective mutation and other types of do fewer strategies respectively.
ack papers that acknowledge the validity threat of using number of mutants as cost indicator.
mitigates if the paper acknowledges how does it try to mitigate the threat?
the last row shows the sum of each column venue and mutation tool sums present unique values .
papers are sorted by authors.
paper year venue mutation toolmetrics strategiesack mitigates m time rms sm other al hajjaji et al.
vace proteum x x x ammann et al.
icst proteum x x x barbosa et al.
jstvr proteum x x bluemke and kulesza aisc mujava x x bluemke and kulesza aisc mujava x x bluemke and kulesza icsoft ea mujava x x delamaro et al.
icst proteum x x delamaro et al.
icst proteum x x delamaro et al.
sbes proteum x x x delgado p rez et al.
jstvr mucpp x x delgado p rez et al.
ist mucpp x x x deng et al.
icst mothra x x derezi ska and rudnik tools cream x x x x derezi ska aisc cream x x x derezi ska and ha as icstw mupy x x x x derezi ska and ha as aisc mupy x x x x derezi ska aisc cream x x x x x measures execution time derezi ska and rudnik fedcsis cream x x x x measures execution time dom nguez jim nez et al.
ist gamera x x x gligoric et al.
issta comutation x x x x measures the number of states gong et al.
ist mujava x x x gopinath et al.
issre pit x x x gopinath et al.
icse pit x x x gopinath et al.
tr pit x x x x guizzo et al.
tse pit x x x x x x measures execution time harman et al.
ase bacterio x x iida and takada mutation mujava x x x inozemtseva et al.
fse gigan x x x ji et al.
seke mujava x x just and schweiggert jstvr major x x x just et al.
issta major x x kaminski and ammann icst trf tif x x kaminski et al.
ist trf tif x x x kaminski et al.
jss mumcut x x kintis et al.
apsec mujava x x kurtz et al.
fse proteum x x x lacerda and ferrari sast proteum aj x x lima et al.
sast mujava x x x x ma et al.
etri mujava x x madeyski et al.
tse judy x x x mateo et al.
tse bacterio x x mresa and bottaci jstvr mothra x x x x x proposes a different metric nam et al.
icstw javalanche x x x siami namin and andrews mutation proteum x x namin et al.
icse proteum x x nobre et al.
ijncr proteum im x x x x offutt et al.
icse mothra x x offutt et al.
tosem mothra x x de oliveira et al.
cec mujava x x x omar and ghosh issre homaj x x papadakis and malevris icstw proteum x x x papadakis and le traon sac proteum x x papadakis and le traon jstvr proteum x x parsai et al.
qrs littledarwin x x parsai et al.
ease littledarwin x x patrick et al.
icst mujava x x patrick et al.
icstw mujava x x polo et al.
jstvr mujava x x praphamontripong and offutt icstw webmujava x x quyen et al.
iceic musimulink x x reuling et al.
splc splar x x x sridharan and siami namin issre proteum x x steimann and thies icse mujava x x x x sun et al.
ist proteum x x x sun et al.
cj bpel x x tuya et al.
ist sqlmutation x x untch acm se proteum im x x vincenzi et al.
jstvr proteum im x x wong et al.
sqp mothra x x x wong and mathur jss mothra x x x zhang et al.
icse proteum x x x x zhang et al.
ase javalanche x x x x x zhang et al.
issre javalanche x x x zhu et al.
mutation pit x x x x zhu et al.
icst pit x x x x total 5cost measures matter for mutation testing study validity esec fse november sacramento california united states mutation score number of mutants number of test cases that could be used with pit and that had green test suites all test cases pass .
each strategy was executed for independent runs.
the execution of multiple independent runs is conducted to minimise the threat related to variations in the mutants execution such as the order in which mutants and test cases are executed.
it is also a common practice to cater for stochastic behaviour of algorithms in this case the prioritisation of test cases default in pit that depends on the test case execution times and the random sampling of mutants done by rms.
running the mutation analysis process and the strategies multiple times is done to mitigate these uncertainties more details in section .
hence in the end of the experiment execution we have execution times for each strategy per system.
the execution time of a strategy is computed from the start of its execution until the end of the execution of the sampled mutants.
therefore the execution time measure comprises the whole process of generating sampling and then executing the mutants which reportedly represents the computational cost of the mutation analysis activity .
the execution time of each strategy sis then compared to the execution time of the conventional mutation processcm without any mutant reduction for a given independent runras follows time s r time sr time cmr equation computes the percentage of execution time needed by a strategy to perform the mutation in relation to using the full set of operators and mutants.
similarly the relative number of mutants is computed using equation .
it computes the percentage of mutants inmsobtained by sin relation to all mutants m. number s ms m since our goal is to analyse the difference i.e.
error between the two measures we use a set of traditional error measures to quantify such errors.
we compute and report the mean signed difference msd between execution time and number of mutants for each tested rms strategy across independent runs.
the msd of a given strategy sis computed using equation .
msd s 30 r 1time s r number s msd indicates the difference error between the two measures and its direction sign .
a negative msd means that sobtained a lower execution time than predicted by the number of mutants measurement or greater execution time otherwise.
for completeness we also report the mean absolute error mae mean squared error mse and the mean absolute percentage error mape for each strategy.
mae mse and mape values for a given strategy s are computed using equations respectively.
mae s 30 r time s r number s mse s 30 r time s r number s 3the replication package and all other information about the programs can be found at r time s r number s time s r we also report the average mae mse and mape values for each system and for the complete set of observed data.
if the msd mae mse and mape values are close to zero then the ratio between those two measures is close to and the number of mutants can reliably be used as a surrogate for execution time.
.
.
rq2 statistical correlations based on the error values found when answering rq1 we investigate if there are statistical correlations between these errors and system properties such as size of the test suite testing time mutation score and number of mutants shown in table .
for instance we suspect that there might be a positive correlation between the sizes of the programs under test and the errors between number of mutants and the execution time when sampling mutants for that program.
by assessing the correlations of properties such as size of the test suite number of test cases and mutation score we can verify if any of those properties can indicate smaller or larger error when using execution time vs. number of mutants.
we use the spearman s rank correlation coefficient test to assess the correlations because we cannot assume that any correlation is necessarily linear.
according to finkelstein et al .
a spearman s threshold of .7indicates a strong correlation between the variables thus following previous work in this paper we consider as positive correlation any result of .7and as negative correlation any result of .
.
furthermore we discard any correlation with a p value that is not .
.
.
.
rq3 strategy differences the random sampling of mutants gives each mutant an equal probability of being chosen.
observing differences for this kind of strategy gives us an overview of how much the differences can affect an unbiased mutant reduction.
however other strategies such as sm rely on specific properties of operators e.g.
type of mutation and number of generated mutants to select or discard mutants.
removing operators from the set of operators before generating and executing mutants might affect not only the cost of generating mutants but also the execution cost of the reduced set depending on the type of the mutants discarded.
for example a mutant operator that changes the return value of a method might not have the same cost as an operator that changes conditions in forloops.
selecting such operators using sm may change the execution cost results for the same number of mutants when compared to rms.
we chose to investigate both sm and rms because they are the two most used mutant reduction strategies in the literature .
as we showed in section out of evaluated papers use either one or the other.
furthermore they both are commonly used as a baseline for comparison in mutant reduction work .
for evaluating the differences between these two types of strategies we compare the results of the same rms strategies used in rq1 to the results of six sm strategies also executed for independent runs.
each sm strategy removes noperators from the set of operators to be executed.
to do so the strategy first sorts the operators in descending order based on the number of mutants they generate and then removes the first noperators from the list.
this is a type of selective mutation also called constrained mutation oresec fse november sacramento california united states guizzo et al.
table subject programs.
lloc number of logical lines of code executable lines t test suite size of the program t. lloc number of logical lines of test code cov statement and branch coverage percentages m number of mutants generated by pit am number of alive mutants after executing t ms mutation score of the test suite mut.
time execution time for the conventional mutation process with the test suite t test time execution time for the test suite against the original program.
program lloc t t. lloc cov m am ms mut.
time test time beanutils .
20m 32s 3s codec .
1h 49m 38s 26s collections .
1h 47m 43s 2m 31s lang .
5h 05m 02s 20s validator .
24m 59s 2s jfreechart .
4h 11m 57s 4s jgrapht .
15h 46m 57s 01m 16s joda time .
1h 50m 28s 10s ognl .
44m 39s 27s wire .
4m 30s 1s n selective mutation .
we use six strategies because pit has seven default operators thus we test all six possible strategies of this type removing n 7of available operators .
both types of strategies are evaluated using the execution time and number of mutants as done for rq1.
for assessing the difference we rank the strategies according to the two measures.
then we assess the disagreement between the two rankings.
if the ranks of strategies change then it indicates that reporting results based on one measure may yield different conclusions than reporting results based on the other measure.
.
.
rq4 does it matter?
whereas rq3 asks whether scientific findings might be affected in general rq4 targets a specific previous finding to check whether the practice of using surrogate cost measures impacts a specific important foundational finding on which the testing community relies.
in order to assess the scientific impact of the differences between number of mutants and execution time we conduct a set of experiments with the aim of reproducing the seminal work of offutt et al.
.
offutt et al.
answered the foundational problem of how to tackle the potentially prohibitive cost of mutation analysis.
this was and remains one of the most important problems for the practical application of mutation testing.
in their work offutt et al.
compare four types of sm strategies i replacement and statement operators rs selective ii replacement and expression operators re selective iii expression and statement operators es selective and iv expression operators e selective .
one of the key actionable questions asked by the authors was which mutant operators generate the most mutants?
.
this question was answered in by offutt et al.
and the answer has been relied upon in much of the subsequent work over the past quarter of a century.
offutt et al.
applied the four strategies to small fortran programs with the mothra mutation tool .
of course two and a half decades of change means that we now use different tools and platforms.
it is also now customary for empirical software engineering research to use larger programs.
indeed this is necessary in order to enhance the generalisability of any findings to realworld systems.
with this in mind our reproduction experimentuses programs that are two orders of magnitude larger than the original set in lloc.
however for due diligence we also repeated the experiment with the same set of programs that were used in the original work modulo translation from fortran to java .
to answer rq4 we divided pit s mutation operators4into the three categories defined by offutt et al.
expression statement and replacement and then applied the rs re es and e selective strategies.
we rank all strategies according to both measurements and then compare the ranks across the real world programs.
results this section presents the results and answers to the rqs.
.
answer to rq1 random mutant sampling table shows the msd mae mse and mape equations between the obtained percentages for the average execution time and number of mutants.
a positive msd indicates that the strategy costs more in terms of execution time than number of mutants whereas a negative error means that the strategy executed faster than expected compared to number of mutants.
errors closer to indicate a ratio closer to for the two measures.
the msd error between execution time and number of mutants varies widely from to .
for example the mean error of was yielded by rms when executed on wire thus the execution time of this strategy for this system is on average number of mutants error of the total time used to perform the mutation analysis procedure with all mutants for this system.
conversely this same strategy yielded an error of for jfreechart meaning that it takes on average error of the total mutation analysis time for this system to generate select and then execute the mutants.
the mae value of all observations is and mape is .
in other words the number of mutants differs from the execution time on average absolute percentage units representing a percentage error of .
the relative mape variation between the 4we used pit v1.
.
as opposed to pit v1.
.
rqs .
the latest version has more operators we use of them including specific operators used by offutt et al.
thus allowing a more faithful implementation of the original strategies.cost measures matter for mutation testing study validity esec fse november sacramento california united states table rq1 msd of execution time percentage minus percentage of mutants for each strategy.
the last three columns present the mae mse and mape error indicators for each program and the last three rows present the mae mse and mape for each strategy.
the bottom right cells present the mae mse and mape for all observations.
the stronger the cell highlight the greater the difference between the two measures.
programrandom mutant samplingmae mse mape10 beanutils .
.
.
.
.
.
.
.
.
.
.
.
codec .
.
.
.
.
.
.
.
.
.
.
collections .
.
.
.
.
.
.
.
.
.
.
.
lang .
.
.
.
.
.
.
.
.
.
.
.
validator .
.
.
.
.
.
.
.
.
.
.
jfreechart .
.
.
.
.
.
.
.
.
.
.
.
jgrapht .
.
.
.
.
.
.
.
.
.
.
.
joda time .
.
.
.
.
.
.
.
.
.
.
.
ognl .
.
.
.
.
.
.
.
.
.
.
.
wire .
.
.
.
.
.
.
.
.
.
.
.
mae .
.
.
.
.
.
.
.
.
.
mse .
.
.
.
.
.
.
.
.
.
mape .
.
.
.
.
.
.
.
.
.
two measures is across all systems studied and over all strategies studied.
when analysing the relative error mape between number of mutants and execution time across strategies last row we observe a trend the more mutants sampled the less relative error between the measurements.
hence as both measurements increase the average relative gap between them decreases.
this makes sense since mape is computed in relation to the execution time percentage equation thus the errors are relatively less meaningful when considering higher percentages but potentially more impacting for lower sampling execution times.
this is an important observation since several papers conclude that a lower percentage such as or even a constant sample of mutants are sufficient for testing the software.
however as shown by our analysis mape values for low sampling percentages such as can represent of relative error to the real execution cost on average thus making these sampling strategies cost from approximately a third jfreechart to .
times more wire than the inaccurate prediction given by number of mutants.
the mae and mse values do not catch the same problem since these two indicators are based on absolute values.
given the observed errors between the two measures we can answer rq1 as follows answer to rq1 when sampling mutants the average difference between percentage of sampled mutants and percentage of execution time of the sampled mutants is i.e.
when compared to the whole set of mutants a subset of mutants obtain a relative execution time that is on average erroneous to the relative number of mutants estimated cost .
hence there is a non trivial error between using number of mutants and execution time as a cost measure.
.
answer to rq2 statistical correlations there is a series of factors that can relate to the results presented in section .
such as the test suite of the program the size of the program and others.
we found two positive correlations between the error metrics and the attributes presented in table i mape vs. lloc .
p value .
and ii mape vs. total number of mutants generated for the program .
p value .
.
in other words the greater the program in lloc the greater the mape for the sampled mutant sets.
furthermore when the program grows in lloc the number of generated mutants also increases thus the correlation with mape also holds for this property.
hence the bigger the program the less reliable the number of mutant measure is in predicting the real cost of the mutant subset.
we did not find any correlation between the remaining programs attributes and the error metrics.
all in all program size and number of mutants that can be generated for a given program are the only observed indications of errors between the number of mutants and execution time measurements.
with that in mind we can answer rq2 as follows answer to rq2 the bigger the program the greater the mape errors between the number of mutants and execution time measures for sampled subsets .
p value .
.
the mape results of rq1 are also positively correlated to number of generated mutants .
p value .
.
in other words the bigger the program the less reliable the number of mutants measure is at capturing the true mutation cost of a given reduced mutant set.
.
answer to rq3 strategy differences table presents the disagreement between rankings for the strategies we considered.
there are evaluated strategies nine rms 5we are not implying causation as we have not tested for causation links.esec fse november sacramento california united states guizzo et al.
and six sm.6we can observe that for out of systems there is at least one rank change i.e.
a strategy that would be believed to be costlier than others when using number of mutants becomes cheaper when using execution time.
there is a difference in of the ranks across all systems.
interestingly all rank upgrades cheaper than expected from number of mutants to execution time happen for the sm strategies whereas all rank downgrades costlier than expected happen for the rms strategies.
for out of systems some sm strategies upgraded by two ranks meaning that they were revealed to be actually cheaper than two other rms strategies i.e.
the number of mutants of an sm strategy is greater than an rms strategy in at least percentage points but the sm strategy is still cheaper in terms of execution time.
this is most likely happening for two main reasons removing operators with sm from the mutation procedure further reduces the cost of generating mutants not only executing them whereas rms first generates all mutants and then sample them.
this means that if an sm and an rms strategy both select the same number of mutants the former has the advantage of also reducing the mutant generation time.
this reduces the overall computational time for the whole mutation process and is specially impactful on smaller programs for which the overhead of generating mutants can be as costly as the execution of a small set of mutants.
different mutation operators generate different mutants.
therefore depending on the removed mutation operators and the program under test the tester may exclude mutants that are potentially more expensive as the results of section .
show .
rms does not distinguish mutants by their operators and sample them uniformly at random thus it does not benefit from the same feature.
summarising there are two major implications about these observations i even though a given sm strategy generates more mutants than an rms strategy sometimes the general execution cost of using sm to generate mutants and then executing them is lower than the cost of the previously considered cheaper rms strategy and ii when reporting results about which sm strategy is costlier than rms if one considers only number of mutants then they may end up making incorrect scientific conclusions.
these are important findings because they suggest that some scientific conclusions drawn in previous work could be reversed when accounting for this threat to validity.
with that in mind we can answer rq3 as follows answer to rq3 when ranking strategies based on execution time instead of number of mutants we observed a disagreement in of the ranks on average.
rank changes usually favour sm rather than rms i.e.
even though some sm strategies select more mutants than other rms strategies they can actually be cheaper in terms of execution cost.
.
answer to rq4 does it matter?
figure presents slopegraphs summarising the results for our reproduction study of offutt et al.
s work.
the graphs show the 6for some systems strategy s6 is missing because it failed to generate any mutant.differences observed when using the two different ways of measuring mutation cost true execution time and its surrogate number of mutants .
as revealed by figure using true execution time yields an unequivocal finding rs selective is superior for all ten programs.
however using number of mutants current practice the results would have been inconclusive.
that is e selective generated fewer mutants for out of programs i.e.
beanutils collections ognl validator and wire whereas rs selective generated fewer mutants for the other programs i.e.
codec lang jfreechart jgrapht and joda time .
by computing the true execution time we can see that in fact rsselective is the cheapest selection strategy for all programs even for the programs for which e selective generated fewer mutants change of ranks is highlighted in the picture .
for completeness we also collected results for the ten original toy programs used in the study.
we used evosuite to generate test cases similarly to the original study in which godzilla was used as a test data generation tool.
for these ten programs rs selective is the cheapest in terms of number of mutants for of them.
offutt et al.
observed that e selective was the cheapest for out of the fortran versions using mothra .
this difference in the strategy that generates fewer mutants may be explained by the different experimental set up i.e.
we used a different mutation tool i.e.
pit and programming language i.e.
java .
also and arguably more importantly we know from rq2 section .
that results for toy programs will likely differ from those collected for more realistic larger programs.
nevertheless we include these results for the original ten toy programs for completeness and in order to fully observe due diligence in our reproduction of the original study.
considering the results presented in this section we can answer rq4 as follows answer to rq4 the reproduction of offutt et al.
work shows that it does indeed matter whether experiments use number of mutants or execution time.
a key finding relied upon for years is transformed from inconclusive to unequivocal by choosing to use the true execution cost in place of its surrogate number of mutants .
threats to validity threats to external validity as happens with most software engineering experiments the program subjects used in our empirical evaluation might not be representative of the whole software population.
in order to minimise this threat we selected systems of various sizes types mutation scores and levels of test coverage.
to increase the relevance to the mutation literature we also chose systems used in previous work .
another threat to the external validity is that we only compared results for java programs and used only one yet popular mutation tool pit .
caution is required when generalising to other languages and mutation tools.
we limited our experimentation to rms and sm strategies.
we decided to study those two strategies because they are two of the most common mutant reduction strategies in the literature and because they are commonly used as a baseline for newly proposed strategies .
in fact out of papers wecost measures matter for mutation testing study validity esec fse november sacramento california united states table rq3 disagreement between rankings with each measure in ascending order.
sm strategies are labelled s xand rms strategies are labelled r x wherexis respectively the number of discarded operators and the sampling percentage.
the m column shows the ranking based on number of mutants and the time column shows the ranking based on execution time.
highlighted cells represent upgrades blue with and downgrades red with .
beanutils codec collections lang validator jfreechart jgrapht joda time ognl wire m time m time m time m time m time m time m time m time m time m time s5 s5 s5 s5 s5 s5 s6 s6 s5 s5 s6 s6 s6 s6 s6 s6 s5 s5 s5 s5 s4 s4 r10 s4 s4 s4 s5 s5 s4 s4 s5 s5 s5 s5 s5 s5 s4 s4 r10 s4 s3 s3 s4 s3 r10 s3 r10 s4 r10 s3 s4 s4 r10 s4 s4 s4 r10 s3 s4 s3 r10 s2 r20 r10 s3 r10 s4 r10 s3 s2 r10 r10 s4 s3 r10 s3 s3 r10 r20 s2 s2 r10 s3 r20 r20 r20 s3 s3 r20 r10 r20 r20 r20 r10 s3 r10 r20 r20 s3 r10 r20 r20 r30 r30 s2 s2 r20 r20 s2 r20 s3 s3 s3 r20 r20 s2 r30 s2 r30 r20 r30 r30 r40 s2 r30 r30 r30 s2 r30 r30 r30 r30 r30 s2 s2 r20 s2 r30 r40 r30 r40 s1 s2 r40 r40 r40 s2 r30 r40 r40 r40 r40 s2 r30 r30 r30 r40 r40 s2 r40 r50 r40 r50 r50 r50 r50 r40 r40 r50 r50 s2 s2 r40 r40 r40 r40 r50 r50 r50 r50 s1 r50 r60 s1 r60 r60 r50 r50 r60 s1 r50 r50 r50 r50 r50 r50 s1 s1 r60 s1 r60 r60 r70 r60 s1 s1 r60 s1 s1 r60 r60 r60 s1 s1 r60 s1 r60 r60 s1 r60 r70 r70 s1 r70 r70 r70 s1 r60 r70 r70 s1 s1 r60 r60 s1 r60 r70 r70 r70 r70 r80 r80 r80 r80 r80 r80 r70 r70 r80 r80 r70 r70 r70 r70 r70 r70 r80 r80 r80 r80 r90 r90 r90 r90 r90 r90 r80 r80 r90 r90 r80 r80 r80 r80 r80 r80 r90 r90 r90 r90 r90 r90 r90 r90 r90 r90 r90 r90 figure rq4 slopegraph for the results of the reproduction study.
the findings enclosed in rectangles fundamentally change when we adopt the true execution time measure in place of the previously used surrogate number of mutants .
the x axis represents the two cost measures points on the left represent the number of mutants equation and points on the right represent the true execution time equation .
the y axis represents the percentages of mutants or time needed to perform the mutation analysis.
increasing slopes represent strategies that have an execution cost greater than the surrogate whereas decreasing slopes represent strategies that are cheaper than the surrogate.
the e rs es and re selective strategies are represented each by a different symbol.
surveyed on mutant reduction section use either rms or sm and of them use both.
the reproduction study conducted to answer rq4 section .
was done in a different setting than that of offutt et al.
.
therefore our assessment might not generalise to the mothra tool and to fortran programs.
in order to minimise this threat we checked the results on java implementations of the same toy programs usedby the authors in their original paper while also testing the generalisability on real world large scale java programs and we used a similar approach to generate test cases for the testing phase.
threats to internal validity pit is one of the fastest java mutation tools in the literature as it performs several cost reduction tasks before generating and executing mutants.
for instance pitesec fse november sacramento california united states guizzo et al.
mutates bytecode directly instead of source code and it uses test case prioritisation and coverage analysis to avoid running test cases that cannot reach a mutated line.
each of these optimisations may change the execution time of a strategy yielding an undesirable cause of result variation and introducing bias that would reduce the internal validity of the study.
furthermore rms strategies sample different mutant sets in each execution which can also introduce uncertainty to the results.
in order to minimise this threat we executed multiple independent runs for each of the strategies and computed their respective execution times.
the average coefficient variation of the execution times across independent runs is .
which indicates that inter execution variations are low.
moreover we do not include non default optimisations because these might introduce further bias that would reduce the internal validity of the study for example parallelisation and history based mutation might be biased due to thread synchronisation and the use of different mutants in different histories respectively .
our experimental design tries to reflect as much as possible the real world scenario where mutation analysis is applied.
for example we use the partial mutation procedure each mutant is executed until it is killed as opposed to the execution of all mutants against all test cases generation of killing matrices .
partial mutation is what we expect an engineer to perform when applying mutation analysis thus our cost evaluation aims to measure the differences in a real world scenario.
we grouped pit s mutation operators in three categories in order to allow the creation of the required sm strategies for the experiments conducted to answer rq4.
during this task operators might have been misclassified.
however several operators have the same name and functionality as the ones used by offutt et al.
making the grouping mostly straightforward.
threats to construct validity measuring execution time for the multiple executions of strategies and mutants is not a trivial task.
several factors may add noise to the measurement.
in order to mitigate this threat we used the exact same environment for answering the rqs and performed multiple independent runs.
the indicators we used to assess the differences between number of mutants and execution time are mainly based on error differences and ranks.
other indicators may capture other views on the differences between number of mutants and execution time.
moreover we carefully applied the statistical tests and verified all the assumptions required.
related work we consider as related work the papers that acknowledge the threat to validity of using number of mutants as a direct measurement of computational cost.
of the papers surveyed in section do not consider nor report execution time.
however papers do correctly account for the time being less susceptible to the mentioned threat to validity.
such a threat is observed and directly reported in six papers three of which address it by also computing and reporting execution time.
we describe next what these six papers report in regard to this topic.
in terms of individual mutant cost mresa and bottaci observe that different types of mutants have different costs.
gligoricet al.
observe that the cost of mutants varies widely in concurrent code for which multi thread scheduling states impact the overall cost of mutants.
they also could not tell beforehand how reducing the number of mutants affects the execution of multiple scheduling states in concurrent code.
this reported variation in execution costs of different types of mutants is aligned to the results we reported in sections .
and .
answer to rq3 and rq4 by removing specific operators and consequently not generating the respective mutant types we observed changes in ranks where the strategy revealed to be cheaper than expected.
when reducing sets of mutants mresa and bottaci state that reduction in the number of mutants does not imply a reduction in the cost of the test .
derezi ska states that based on her experiments the lower the number of mutants the lower the time needed to execute them but on the other hand the mutant generation process demanded more time.
she argues that the number of mutants cannot be overstated as a cost factor the mutation time does not depend linearly on the number of mutants and that a real cost measure is the mutation testing time including generation and execution of mutants.
derezi ska and rudnik observe differences between number of mutants and execution time using rms and state that in practice the number of mutants is not the most important factor.
the authors suggest that the test suites number of executed test cases number of equivalent mutants and other factors play more important roles in the cost of mutation analysis.
regarding strategy comparisons mresa and bottaci observe that when considering the number of generated test cases for instance the cost reduction of sm is less impactful.
moreover zhang et al.
acknowledge that mutants have different compilation and execution times depending on the operator while also suggesting that the investigation of sm scalability considering mutants cost may incur in different results.
finally guizzo et al .
observe that the number of mutants is an inaccurate proxy for computational cost of mutation analysis and suggest engineers to use execution time whenever possible.
as other authors have observed the real cost of mutation analysis is more than just the size of the set of mutants it also depends on the set of test cases number of equivalent mutants whether the test cases were automatically created or designed by a tester program type e.g.
concurrent and many other factors.
in fact the results our work are aligned to the observations of these papers.
our work shows concrete evidence that the ratio of number of mutants to execution time is not for the programs and strategies we investigated while also quantifying the error between these two measures and showing that it indeed matters by reproducing a previous work.
conclusion and future work in this paper we investigated the differences between measuring number of mutants and measuring execution time to assess computational cost reduction in mutation analysis.
when surveying the mutation cost reduction literature we found only papers which compare do fewer strategies in terms of execution time and only six of them acknowledge that number of mutants may not be able to fully capture the real cost of mutation analysis.cost measures matter for mutation testing study validity esec fse november sacramento california united states with our experiments we show that when using rms strategies the error between number of mutants and execution time is on average .
depending on the system this difference varies from to .
these errors are positively correlated to the size of the programs and to the number of mutants that can be generated according to the spearman s rank correlation coefficient test i.e.
the errors increase as the programs grow in size.
after ranking rms and sm strategies using the number of mutants and the execution time we observed that of the ranks would have been incorrectly reported by empirical studies.
we further evaluated the impact of these findings by reproducing the work of offutt et al.
.
we found that the scientific conclusion as to which strategy is the cheapest changes from inconclusive to unequivocal when using the true execution time instead of the traditional number of mutants measurement.
as a consequence the findings of previous work are vulnerable to the notable and overlooked threat to validity reported in this paper.
taken together our results indicate that it is important to consider and report on mutant execution time and number of mutants to avoid a potent threat to scientific validity.
previous results on mutation analysis cost need to be revisited in the light of this finding.
in future work we intend to compare the execution cost of hom and assess if it is indeed the expected1 order.
moreover the real cost of determining mutant equivalence might be assessed by measuring the human effort required for this task as opposed to estimating the cost by using the number of alive mutants.