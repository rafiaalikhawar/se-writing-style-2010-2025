enhancing fault localization in industrial software systems via contrastive learning chun li hui li zhong li minxue pan and xuandong li state key laboratory for novel software technology nanjing university china software institute nanjing university china samsung electronics china r d centre china chunli smail.nju.edu.cn hui.li samsung.com lizhong mxp lxd nju.edu.cn abstract engineers utilize logs as a primary resource for fault localization in large scale software and system testing a process that is notoriously time consuming costly and labor intensive.
despite considerable progress in automated fault localization approaches their applicability remains limited in such settings due to the unavailability of fine grained features in logs essential for most existing fault localization methods.
in response we introduce f alcon a novel log based fault localization framework.
falcon organizes complex semantic log information into graphical representations and employs contrastive learning to capture the differences between passed and failed logs enabling the identification of crucial fault related features.
it also incorporates a specifically designed transitive analysis based adaptive graph augmentation to minimize the influence of fault unrelated log information on contrastive learning.
through extensive evaluations against spectrum based and learning based fault localization methods f alcon demonstrates superior performance by outperforming all the methods in comparison.
in addition f alcon demonstrated its practical value by successfully identifying out of faults with a file level top accuracy rate during a one month deployment within a global company s testing system.
index terms industrial software debugging fault localization contrastive learning.
i. i ntroduction locating the root cause of a fault is the critical first step in the debugging process for software programs.
this endeavor can often be time consuming costly and labor intensive .
the complexity of this task is further exacerbated in an industrial context particularly when dealing with system testing procedures for large scale software systems.
to alleviate the intricacies of debugging engineers frequently rely on log files as a valuable source of information as evidenced by a recent survey indicating that logs are the most commonly utilized resource by industry professionals in the process of locating faults.
however system testing of large scale software often generates logs exceeding tens of thousands of lines.
the complexity of such software and its logs presents significant challenges to engineers in debugging.
consequently there is a tremendous demand in the industry for automated fault localization tools.
extensive research has been conducted on fault localization fl methods to fully automate the process of diagnose program entities files methods or statements related corresponding author.to faults and facilitate the software debugging process.
more specifically fault localization techniques compute suspiciousness scores for different program entities and then rank the program entities in descending order based on these scores.
although fault localization has evolved significantly over decades and achieved considerable success current methods are primarily evaluated on datasets such as defects4j and unit tests leaving their effectiveness in large scale software and system testing yet to be determined.
in particular existing fault localization tools may encounter specific challenges in this context.
these challenges primarily arise from the limitations in the availability of information used in localization.
due to the large scale of industrial software it becomes impractical to collect fine grained information such as line coverage data control flow dependencies line level execution paths or mutation based coverage .
the collection of these data often involves static dynamic analysis instrumentation and mutation which significantly impacts the efficiency of testing.
even if we could given that system testing may involve thousands of methods the fine grained features would cause a rapid expansion in the size of logs significantly increasing the spatial requirements of the method.
furthermore information such as bug reports may also be missing.
all these restrictions would lead to the ineffectiveness of many fault localization methods in the industrial context including those based on slicing mutation information retrieval and code change .
logs being the most frequently used information by engineers when debugging in the industry are generally available.
logs typically contain information about the threads packages files and methods involved during the testing process.
by analyzing logs we can only obtain the methods executed during testing their corresponding files and packages achieving coarse grained method level coverage.
this limitation means that while spectrum based and some learning based fault localization approaches sbfl and lbfl remain viable their effectiveness is notably reduced under these conditions as highlighted in section ii.
consequently in the realm of largescale software and system testing existing methodologies either become impractical or their efficacy is significantly diminished due to these data constraints.
there is a pressing needwithin the industry for a novel fault localization framework designed specifically for this scenario.
to address this need we propose f alcon fault localizati on a novel log based fault localization framework specifically designed for industrial applications.
the key insight underlying f alcon is the observation that faults can alter a software system s behavior as elaborated in section ii.
f alcon organized complex semantic information from logs into graphical representations and employs contrastive learning to capture the differences between passed and failed logs and link these differences to the responsible faults achieving effective fault localization.
contrastive learning is particularly suitable for this purpose given that it can capture the differences in features between various samples effectively and accurately .
another key insight is the prevalence of fault irrelevant data within logs which can obscure fault localization efforts.
to counter this f alcon incorporates a unique transitive analysis based adaptive graph augmentation technique reducing the influence of irrelevant information on the constrastive learning process and thus enhancing localization accuracy.
our evaluation of f alcon s performance in large scale software and system testing involved over two thousand logs from system tests of eleven software projects each exceeding one million lines of code supplied by a global company.
we benchmarked f alcon against spectrum based and learning based fault localization methods demonstrating its exceptional efficacy by significantly outperforming all compared methods including a remarkable .
improvement over the top performing method grace .
additionally a deployment within the testing system of our industrial partner highlighted f alcon s practical value where it successfully pinpointed out of faults at a file level top accuracy rate over one month.
the main contributions of this paper are as follows we propose a novel log based fault localization framework f alcon which organizes complex semantic log information into graphical representations and employs contrastive learning to capture the differences in key features between passed and failed logs to facilitate fault localization.
we develop a transitive analysis based adaptive graph augmentation technique to mitigate the effects of substantial volumes of fault irrelevant information in logs on the contrastive learning process thereby enhancing the accuracy of fault localization.
we conduct extensive evaluations of f alcon within an industrial context and the results not only prove falcon s superior performance over existing state ofthe art approaches but also validate its practical utility and effectiveness.
ii.
m ethodology a. motivating example in industry contexts logs frequently act as the exclusive source for fault localization .
as discussed in section i this ... ... ... ... bug triggered a bug triggered no bug triggered ... ... ... ... b no bug triggered k k k k k k 5log classa ret if ret isxxx ret else ret getxxx c code snippet of m1 fig.
motivating example a simplified real bug and corresponding log.
reliance can significantly reduce the effectiveness of current fault localization methods.
the core issue is the absence of necessary fine grained information such as data control flow dependencies line level coverage and additional resources like bug reports that existing methods depend on but which are difficult or too costly to obtain in industrial environments.
to further illustrate the difficulties encountered by existing fault localization methods we further present a motivating example in figure .
figure shows two real logs obtained from our industrial partner which have been simplified and anonymized.
more specifically figures 1a and 1b respectively depict partial logs resulting from whether the bug in the faulty method m2was triggered or not triggered where t p f and mdenote the thread package file and method associated with each log entry.
fault related and fault unrelated sections are colored as red and gray respectively for presentation.
figure 1c provides the context of method m1involved in line3453 of the bug triggered log.
due to the triggering of the bug in m2 the erroneous boolean value returned by the isxxx method called by variable retat line k leads to the invocation of m3 ultimately resulting in differences in the log compared to the log when the bug is not triggered andm4is invoked instead.
for this case all sbfl and lbfl methods that involve fine grained coverage fail to rank the faulty method within the top .
this is because under coarsegrained coverage we can only observe that m2appears in both the passed and failed logs however we cannot observe the differences in internal method execution paths between passed and failed test cases.
from a spectrum perspective alone m3 only appears in the failed log while the faulty method m2 appears in both the failed and passed log.
therefore all sbfl formulas assign a higher suspiciousness score to m3.
this not only renders sbfl methods ineffective but also reduces the effectiveness of lbfl methods that rely on sbfl calculated suspiciousness scores or fine grained coverage data.
therefore there is an urgent need for an improved fault localization method in the industry context.
b. problem statement the main problem tackled in this paper is how to effectively and efficiently analyze logs to localize faults in industrial software systems .
a log as depicted in figure consists of multiple lines with each line containing information such as the running thread number package file and method.
formally let l l1 l2 .
.
.
l n be a log where l1 l2 .
.
.
l ndenotes the lines of the log lordered chronologically.
each line li in general comprises the running thread number the package file and method executed.
that is li t p f m with t p f m respectively representing the thread package file and method.
the vast and diverse content of logs significantly complicates the analysis for fault localization presenting notable challenges.
firstly these logs are not only voluminous but also entangled.
given the large scale of industrial software systems the resulting testing logs can easily span over ten thousand lines containing a multitude of messages related to packages files and thousands of methods which complicates the analysis process.
furthermore the involvement of multiple threads in testing introduces concurrent logging of information.
this concurrency results in the intermixing of messages and states from different threads within the logs increasing the difficulty of extracting relevant and critical information for fault localization.
secondly pinpointing bug related features presents a significant challenge.
effective fault localization requires the identification of unexpected or suspicious features within failed logs that could be indicative of bugs.
the reliance on failed logs alone means we are without