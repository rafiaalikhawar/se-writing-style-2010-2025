multi objectivizing software configuration tuning for a single performance concern tao chen loughborough university loughborough united kingdom t.t.chen lboro.ac.ukmiqing li university of birmingham birmingham united kingdom m.li.
cs.bham.ac.uk abstract automatically tuning software configuration for optimizing a single performance attribute e.g.
minimizing latency is not trivial due to the nature of the configuration systems e.g.
complex landscape and expensive measurement .
to deal with the problem existing work has been focusing on developing various effective optimizers.
however a prominent issue that all these optimizers need to take care of is how to avoid the search being trapped in local optima a hard nut to crack for software configuration tuning due to its rugged and sparse landscape and neighboring configurations tending to behave very differently.
overcoming such in an expensive measurement setting is even more challenging.
in this paper we take a different perspective to tackle this issue.
instead of focusing on improving the optimizer we work on the level of optimization model.
we do this by proposing a meta multi objectivization model mmo that considers an auxiliary performance objective e.g.
throughput in addition to latency .
what makes this model unique is that we do not optimize the auxiliary performance objective but rather use it to make similarly performing while different configurations less comparable i.e.
pareto nondominated to each other thus preventing the search from being trapped in local optima.
experiments on eight real world software systems environments with diverse performance attributes reveal that our mmo model is statistically more effective than state of the art single objective counterparts in overcoming local optima up to gain while using as low as of their measurements to achieve the same or better performance result.
ccs concepts software and its engineering software performance software configuration management and version control systems .
keywords configuration tuning performance optimization search based software engineering multi objectivization both authors contributed equally to this research.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse august athens greece association for computing machinery.
acm isbn .
.
.
.
reference format tao chen and miqing li.
.
multi objectivizing software configuration tuning.
in proceedings of the 29th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse august athens greece.
acm new york ny usa pages.
introduction all i want is to optimize the latency of my software any other performance attributes are out of interest.
an anonymous industry partner the above quotation comes from one of our industry partners who is working in the finance sector commenting on the need of tuning the configuration of a software system that manages all financial trading in his company.
in this case only a single performance attribute matter i.e.
latency in the finance sector a millisecond decrease in the trade delay may boost a high speed firm s earnings by about million usd per year .
indeed given the flexibility of highly configurable software systems automatically tuning their critical configuration options will affect a set of performance attributes such as latency throughput and energy consumption .
however there are also many other cases such as the above one wherein only the optimization of a single performance attribute is of interest whose minimization or maximization serves as the sole performance objective in consideration.
in another scenario machine learning systems deployed by large organizations e.g.
gpt or those in the health care domain often concern mainly on the accuracy while caring little about the overhead resources incurred for training.
this has been well echoed from the literature on software configuration tuning in majority of which only a single performance attribute is considered at a time .
despite only a single performance attribute is of concern such an optimization scenario is not easy to deal with.
this is because the configurable systems involve a daunting number of configuration options with complex interactions rendering a black box to the software engineers the number of possible configurations to examine can be high and the measurement of each configuration through running the software system is often expensive and there is generally a high degree of sparsity in the configurable software systems i.e.
the close configurations can also have radically different performance.
the last characteristic poses a particular challenge to any automatic tuning process in finding the optimal configuration performance because firstly different configurations may achieve locally good but globally undesired performance e.g.
local optima and secondly the landscape of a local optimum s neighborhood can be steep andarxiv .01331v1 may 2021esec fse august athens greece tao chen and miqing li counters splitterslatency ms figure a projected landscape of the performance objective latency with respect to configuration options splitters and counters forstorm under the wordcount benchmark.
is the global optimum and is one of the locally optimal latency that an optimizer needs to escape from.
rugged if the tuning is trapped in a local optimum it may be hard to escape from it as their neighboring configurations often perform worse than it.
as an example figure shows the projected configuration landscape for apache storm out of configuration options where it can be clearly seen that even with this simplified version the landscape is rather rugged and contains steep local optimum traps resulting in significant difficulty in the tuning.
to address the above challenges a number of optimizers from the search based software engineering sbse paradigm have been presented such as random search hill climbing genetic algorithm and simulated annealing .
to seek the global optimum best performance of the concerned performance attribute while avoiding being trapped in local optima these methods focus on the internal components of the optimizer.
they work on designing novel search operators i.e.
the way to change the configuration structure for example increasing the neighbourhood size of randomly mutated configurations or developing various search strategies i.e.
the way to balance exploration and exploitation for example restarting the search in hill climbing .
however a major limitation of such single objective optimizers is that the goal to find the global optimum is less oriented as there is no clear incentive to encourage them to traverse the wide search space and locating many local optima as possible thus finding the best one in a resource efficient manner.
in this paper we look to tackle this software configuration tuning problem with a single performance concern from a different perspective.
in contrast to the effort made by the existing works on the development of the optimizer we work on the optimization model.
we present a multi objective optimization model for this single objective problem to help the search avoid being trapped in local optima and progressively explore the entire objective space an approach that belongs to the concept called multi objectivization .
multi objectivization which transforms a single objective optimization problem into a multi objective one is not particularly unusual in sbse.
in several se scenarios researchers carefullydesign an auxiliary objective as a helper along with the target objective i.e.
the original objective for a multi objective optimizer to deal with .
for example in the crash reproduction problem a new auxiliary objective was created to check how widely a test case covers the code which is in strong conflict with the target objective that measures how far a test is from the particular line s of code that reproduces the crash.
however a pitfall of this approach is that the auxiliary objective needs a delicate design e.g.
to make it rather conflicting with the target objective in order to help the search on the target objective jumps out of local optima.
the design often requires some similar domain properties between scenarios such as the test cases in the example above which could share some common structures for different software systems at the code level.
yet this assumption does not hold in software configuration tuning which lies in the configuration level as their configuration options and characteristics can be intrinsically different while it is difficult to identify the commonality if any due to the black box nature.
another drawback of this approach is concerned with its optimization model.
since the approach treats the two objectives equally during the search solutions that perform well on the auxiliary objective but poorly on the target objective will still be regarded as optimal in the sense of pareto optimality see section thus being preserved exploited and explored repetitively during the search process.
however such solutions are meaningless to the considered optimization problem keeping exploiting them can cause waste of resources search budget which eventually lowers the chances of finding a better target objective.
in this work we propose a different multi objectivization model which contains two meta objectives to optimize hence called meta multi objectivization model or mmo in contrast the preceding model which directly optimizes the target and auxiliary objectives is called plain multi objectivization or pmo .
each of the two meta objectives has two components.
the first component of both meta objectives is the target performance objective e.g.
latency thereby only those configurations that perform well on the target being in favor.
the second component which is related to the other given auxiliary performance objective e.g.
throughput based on whatever that is available is a completely conflicting term for the two meta objectives.
the reason for this design is that we hope to keep the target performance objective as a primary term in the model to preserve the tendency towards its optimality and at the same time we want the configurations with different values on the auxiliary performance objective to be incomparable.
we are not interested in minimizing maximizing the auxiliary performance objective since we do not know which value of it can lead to the best result on the target performance objective but we wish to keep a good amount of configurations with various values of the auxiliary performance objective in the search thus not being trapped in local optima we will elaborate this in section .
it is worth mentioning that software configuration tuning provides a well fitting avenue for multi objectivization similar kind of configurable software systems would inherently come with at least two prevalent performance attributes e.g.
the latency and throughput for stream processing systems the accuracy and training inference time for machine learning systems .
since we run the software system in the tuning anyway one would merelymulti objectivizing software configuration tuning esec fse august athens greece need to measure how the configurations affect at least one other performance attribute using penalty of readily available tools api .
such an attribute can then contribute to the auxiliary objective in multi objectivization without the need for a specific design.
overall the contributions of this work are unlike existing work for the software configuration tuning which puts efforts on the internal part of the optimization i.e.
improving the search operators of various optimizers we work on the external part multi objectivizing this single objective optimization scenario.
we present a meta multi objectivization model mmo as opposed to the existing multi objectivization model considered in other sbse scenarios which directly optimizes the target and auxiliary objectives simultaneously i.e.
pmo .
we show analytically and experimentally why mmo is more suitable than pmo for software configuration tuning.
we conduct extensive experiments on eight commonly used real world software systems environments that are of diverse domains scales settings search space and performance attributes.
equipped with a classic multi objective optimizer nsga ii we compare our model with four state of the art single objective optimizers that underpin many prior works on software configuration tuning i.e.
random search with high neighbourhood radius stochastic hill climbing with restart single objective genetic algorithm and simulated annealing .
we investigate three different instances of mmo and their sensitivity to a critical internal parameter in the model.
the experiment results are encouraging.
we show that the proposed mmo model compared with the best state of the art singleobjective optimizer achieves better result up to gain with statistical significance and non trivial effect sizes on the target performance objective for the majority of the cases while generally consuming less resources number of measurements that reflects the time and computation needed as low as .
this contrasts with the pmo model which in general performs worse than the best single objective optimizer.
we can conclude that our model is generally safe and effective to use while exhibiting marginal differences between different model instances is overall resource efficient meaning that it is suitable for expensive problems like software configuration tuning may be sensitive to its parameter setting however there exist some good rule of the thumb values across the cases.
all source code and data can be accessed at our github repository .
the rest of this paper is organized as follows.
section introduces some background information.
section elaborates the design of our meta multi objectivization model.
section presents our experiment methodology followed by a detailed discussion of the results in section .
the usefulness of the proposed model and threats to validity are discussed in section .
sections and analyze the related work and conclude the paper respectively.
preliminaries in this section we describe the necessary background.
.
software configuration tuning problem a configurable software system often comes with a set of critical configuration options such that the ith option is denoted as xi which can be either a binary or integer variable where nis the total number of options.
the search space x is the cartesian product of the possible values for all the xi.
formally when only a single performance concern is of interest such as latency throughput or accuracy the goal of software configuration tuning is to achieve1 argminf x x x where x x1 x2 ... xn .
this is a classic single objective optimization model and the measurement of fis entirely case dependent according to the target software and the corresponding performance attribute thus we make no assumption about its characteristics.
.
multi objectivization multi objectivization is the process of transforming a single objective optimization problem into a multi objective one in order to make the search easier to find the global optimum.
it can be realized by adding a new objective or several objectives to the original objective or replacing the original objective with a set of objectives.
the motivation is that since in complex problem landscape the search may get trapped in local optima when considering the original objective due to the total order relation between solutions on the objective considering multiple objectives may make similarlyperformed solutions incomparable i.e.
pareto nondominated to each other thus helping the search jump out of local optima .
two solutions being pareto nondominated means that one is better than the other on some objective and worse on some other objective.
formally for two solutions xandy we call xandynondominated to each other if x y y x where is the negation of to pareto dominate the superiority relation between solutions for multi objective optimization.
that is considering a minimization problem with mobjectives xis said to pareto dominate y denoted as x y iffi x fi y for1 i mand there exists at least one objective jon whichfj x fj y .
pareto dominance is a partial order relation and thus there typically exist multiple optimal solutions in multi objective optimization.
for a solution setx a solution x xis called pareto optimal toxif there is no solution xthat dominates x. when xis the collection of all feasible solutions for a multi objective problem xbecomes an optimal solution to the problem and the set of all pareto optimal solutions of the problem is called its pareto optimal set .
multi objectivization is not uncommon in the modern optimization realm particularly to the evolutionary computation community .
to tackle various challenging single objective optimization problems researchers put much effort in introducing designing additional objectives e.g.
creating sub problems subobjectives of the original objective converting the constraints into an additional objective constructing similar adjustable objectives considering one of the decision variables or even adding a man made less relevant objective function .
1without loss of generality we assume minimizing the performance objective.esec fse august athens greece tao chen and miqing li multi objectivization in software configuration tuning here we present the designs of our moo model and how they are derived from the key properties in software configuration tuning.
.
key properties in configuration tuning we observed that in general software configuration tuning bears the following properties.
property as shown in figure and what has already been reported the configuration landscape for most configurable software systems are rather rugged with numerous local optima at varying slopes.
therefore the tuning once the search is trapped at a local optimum would be difficult to progress.
this is because if only the concerned performance attribute is used to guide the search and all the surrounding configurations on a local optimum are significantly inferior to it then the search focus would have no much drive to move away from that local optimum.
as a result a good optimization model has additional tricks to avoid comparing configurations solely based on the single performance attribute.
property a single measurement of configuration is often expensive.
for example valov et al.
reported that sampling all values of configuration options for x264 needs hours.
this means that the resource search budget in software configuration tuning is highly valuable hence utilizing them efficiently is critical.
property the correlation between different performance attributes is often uncertain as different configurations may have different effects on distinct attributes.
as such we observed that the configurations may achieve extremely good or bad performance on one while having similarly good results on the other as illustrated in figure .
the reasons for this can vary.
taking the storm from figure left as an example suppose that in a multi threaded and multi core environment with successful messages if a configuration aenables each of these messages to be processed at 30ms then the latency and throughput are100 30ms and100 .
msgs ms respectively.
in contrast another configuration bmay restrict the parallelism e.g.
lower spout num hence there could be messages processed at 20ms each2while the other are handled at 40ms each including 20ms queuing time due to reduced parallelism .
here the latency remains at50 30ms but the throughput is changed to100 .5msgs ms which is a drop.
therefore we should not presume either a strict conflicting or harmonic correlation between the performance attributes.
as such a good optimization model for software configuration tuning should take the above properties into account.
.
plain multi objectivization model pmo a straightforward idea to perform multi objectivization is to add an auxiliary objective to optimize along with the target objective.
this is what has been commonly used in other sbse scenarios e.g.
.
that pmo model can be formulated as minimize ft x fa x 2the relief of peak cpu load could allow the process of each message faster.
rmseinference time s keras lstm1 throughput msgs s latency ms storm good throughput rmse can correspond to very different latency inference time good latency inference time can correspond to very different throughput rmse figure measured configurations for storm andkeraslstm .
the points that property refers to are highlighted very good or bad results on one performance objective can both correspond to similarly good value on the other.
whereft x denotes the target performance objective i.e.
the concerned one and fa x denotes the auxiliary performance objective3.
putting in the context of software configuration tuning the pmo model may cover property because the natural pareto relation ensures that the target performance objective is no longer a sole indicator to guide the search.
however it does not fit property as pmo additionally optimizes the auxiliary performance objective.
as such configurations that perform well on the auxiliary performance objective but poorly on the target performance objective are still regarded as optimal in pmo despite being meaningless to the original problem.
this can result in a significant waste of resources.
in addition pmo does not consider property as it often assumes conflicting correlation between the two objectives which is hard to assure in software configuration tuning.
.
our meta multi objectivization model unlike pmo our meta multi objectivization mmo model creates two meta objectives based on the performance attributes.
the aim is to drive the search towards the optimum of the target performance objective and at the same time not being trapped in local optima.
specifically we want to achieve two goals goal optimizing the target performance objective still plays a primary role thus no resource waste on for example optimizing the auxiliary one this fits in property goal but those with different values of the auxiliary performance objective are more likely to be incomparable i.e.
pareto nondominated thus the search would not be trapped in local optima this relates to properties and3 .
formally the proposed model with two meta objectives g1 x andg2 x is constructed as minimize g1 x ft x fa x g2 x ft x fa x whereby each of the two meta objectives shares the same target performance objective ft x but differs effectively being opposite regarding the auxiliary performance objective fa x .
is a 3without loss of generality we use the minimization form of the auxiliary performance objective the maximization ones can be trivially converted e.g.
by multiplying .multi objectivizing software configuration tuning esec fse august athens greece composite function that balances the ft x andfa x .
in theory the mmo model is generic and hence can take different forms to implement specific instances of the model.
here we consider its simplest instance fa x wfa x we will investigate other instances in section .
that is minimize g1 x ft x wfa x g2 x ft x wfa x wherewis a weight parameter that allows fine tuning of the balance different systems may need different settings.
note that in the mmo model both the target and the auxiliary performance objectives need to be normalized for commensurability.
to understand the proposed mmo model figure gives an example of storm on how it distinguishes between different configurations in comparison with the pmo model when using latency as the target performance objective ftand throughput as the auxiliary performance objective fa.
suppose that there is a set of four configurations a b candd.
let us say if we want to choose two of them based on their fitness e.g.
in order to put some promising configurations into the next generation population .
for the pmo model figure 3a that minimizes latency and maximizes throughput the configuration d which performs extremely poor on latency will certainly be chosen by any multi objective optimizer since it is pareto optimal and also less crowded than the other pareto optimal configuration aandb.
in contrast for our mmo model figure 3b which minimizes the two meta objectives the two configurations that will be chosen are aandcsince they are the only two pareto optimal ones.
it is worth noting that for the single objective optimization model which only considers latency the two chosen configurations will beaandb.
however since candabehave much more differently than bandaon the throughput it is often more likely that they are located in distant regions in the configuration landscape thus preserving crather than b when ais preserved is generally more likely to help the search to escape from the local optimum.
by further help to grasp the characteristics of the mmo model we provide five remarks below.
remarks are related to why the target performance objective remains primary in the model goal .
remarks and show how it helps to escape local optima via creating incomparability between the configurations with dissimilar values on the auxiliary performance objective goal .
remark the global optimum of the original single objective problem i.e.
the configuration with the best target performance objective is pareto optimal in mmo e.g.
the configuration ain the example of figure .
this can be immediately obtained by contradiction from equation .
remark a similar but more general observation is that a configuration will never be dominated by another that has a worse target performance objective.
this can also be derived from equation if configuration x1has a better target performance objective than x2 i.e.
ft x1 ft x2 then whatever their auxiliary performance objective values are x2will not be better than x1on bothg1andg2 in the best case for x2 they are nondominated to each other e.g.
the configuration bversus cin figure .
remark the above two remarks apply to the target performance objective but not to the auxiliary performance objective.
.
.
0ft latency .
.
.
.
.
.
.
.
fa throughput ab cdmin max .
.
.4g2 ft .5fa .
.
.
.
.
.
.
.
.
g1 ft .5fa abcdmin min a the original target auxiliary space b our meta bi objective space figure an illustration of comparison between a the pmo model and b our mmo model with the instance of equation on storm where the target performance objective is latency to minimize and the auxiliary performance objective is throughput to maximize .
both of them are normalized and the weight is .5in mmo.
let us saya b canddbe a set of four configurations to be selected by the two models.
the solid circle means the configuration being pareto optimal to the set.
since the pmo model directly minimizes latency and maximizes throughput figure 3a configurations a b andd are pareto optimal.
however dperforms very poorly on latency preserving it during the search is a waste of resources.
in contrast in our mmo model figure 3b configurations aandcare pareto optimal.
now comparing configurations cwithb since canda behave much more differently than bandaon the throughput it is often more likely that they are located on distant regions in the configuration landscape thus preserving crather than b in case ais preserved is generally more likely to avoid the search being trapped in the local optimum.
this is a key difference from the pmo model where both objectives are subject to these remarks thus the configuration din the example of figure which is meaningless to the original problem is treated as being optimal in pmo but not in mmo.
remark mmo does not bias to a higher or lower value on the auxiliary performance objective in contrast to pmo.
this makes sense since as explained in property we do not know for certain that what value of the auxiliary performance objective corresponds to the best target performance objective.
remark configurations with dissimilar auxiliary performance objective values tend to be incomparable i.e.
nondominated to each other even if one is fairly inferior to the other on the target performance objective.
for example the configuration cin figure which has worse latency than a is not dominated by aas their throughput are rather different.
in contrast the configuration b which even has better latency than c is dominated by a as they are similar on throughput.
this enables the model to keep exploring diverse promising configurations during the search thereby a higher chance to find the global optimum.
experimental setup in this section we articulate the experimental methodology for evaluating our mmo model and its instances.
.
research questions our experiment investigates the following research questions rqs rq1 how effective is the mmo model?esec fse august athens greece tao chen and miqing li table configurable software systems studied.
software domain performance objective o search space trimesh mesh o1 iteration o2 latency x264 video o1 psnr o2 energy usage storm wc sp o1 throughput o2 latency storm rs sp o1 throughput o2 latency storm sol sp o1 throughput o2 latency keras dnn dsr dl o1 auc o2 inference time .
keras dnn coffee dl o1 auc o2 inference time .
keras lstm dl o1 rmse o2 inference time o denotes number of options.
we run all systems under their standard benchmarks.
more details can be found at .
rq2 how resource efficient is the mmo model?
rq3 what is the sensitivity of the mmo model to its weight?
we ask rq1 to verify whether our mmo model can better help to overcome the issue of local optima i.e.
by providing better results than the single objective counterpart and pmo under the same search budget.
we investigate rq2 to examine whether the resources the number of measurements are consumed to reach a certain level of performance in a reasonably efficient manner.
we userq3 to study whether the weight in mmo is critical.
.
subject software systems as shown in table we experiment on a set of commonly used realworld software systems and environments whose single measurement is expensive4.
they come from diverse domains e.g.
stream processing sp and deep learning dl while having different performance attributes scale and search space.
each software system comes with two performance objectives which are chosen arbitrarily from prior work .
in all experiments we use each of their two performance attributes as the target performance objective in turn while the other serves as the auxiliary performance objective.
we use the same configuration options and their ranges as studied in the prior work since those have been shown to be the key ones for the software systems under the related environment.
as a result although some subject software appears to be the same their actual search spaces are different such as storm wc andstorm rs .
.
tuning settings .
.
models mmo instances and optimizers.
for the single objective optimization model we examine four state of the art optimizers that are widely used in software configuration tuning all of which deal with local optima in different ways random search rs with a high neighbourhood radius to escape from the local optima .
stochastic hill climbing with restart shc r aiming to avoid local optima by using different starting points.
single objective genetic algorithm soga that seeks to escape local optima by using variation operators.
simulated annealing sa that tackles local optima by stochastically accepting inferior configurations.
4to ensure robustness each measurement consists of repeated samples and the median value is used.recall from equation our mmo model can be instantiated in different forms.
in the experiments we consider three alternatives mmo linear fa x wfa x .
mmo sqrt fa x w fa x .
mmo square fa x wf2a x .
we examine all the above instances of the mmo model together with the pmo.
while our model does not tie to any specific multiobjective optimizer we use nsga ii for both mmo and pmo in this work because it has been predominately used for software configuration tuning in prior work when multiple performance attributes are of interest it shares many similarities with the soga that we compare in this work.
note that mmo may not be able to work with some multi objective optimizers specifically designed for sbse problems where the objectives are not treated equally such as .
all those optimizers can but do not have to rely on a surrogate.
since we focus on the optimization model the ability to omit the surrogate model is desirable as it has been shown that such a surrogate can be highly inaccurate and hence creates noises in our experiments.
in this work all optimization models and optimizers are implemented in java using jmetal and opt4j .
.
.
weight values.
in our experiments we evaluate a set of weight values i.e.
w .
.
.
.
.
.
for all mmo instances.
those are merely pragmatic settings without any sophisticated reasoning.
in this way we aim to examine whether the mmo model can be effective by choosing from some randomly given weight values.
to make the performance objectives commensurable in mmo we use max min scaling .
however since the bounds are often unknown we update them dynamically as the tuning proceeds this is a widely used approach in sbse .
.
.
search budget.
since the measurement is expensive we repeat all experiments runs with a search budget of hours each as suggested in prior work .
however directly using the time as a termination criterion would cause the search to suffer non trivial interference given the number of experiments we need to run in parallel.
to avoid this for each software system we incrementally each step measured distinct configurations on a dedicated machine using random sampling until the time budget is exhausted.
in this way we collect the number of measurements the median of repeats as shown in table that serve as the termination criterion for the configuration tuning thereafter.
since the search budget reflects the number of measurements permitted in hours in each run we cached the measurement of every distinct configuration which can be reused directly when the same configuration appears again during the search.
in other words only the distinct configurations would consume the budget.
.
.
other parameters.
for soga and nsga ii we apply the binary tournament for mating selection together with the boundary mutation and uniformed crossover as used in prior work .
the mutation and crossover rates are set to .
and .
respectively as commonly set in software configuration tuning .
however what we could not decide easily is the population size for soga and nsga ii.
therefore for each software system we examine different population sizes i.e.
... in preliminary runs.
we used the largest size that enables the populationmulti objectivizing software configuration tuning esec fse august athens greece table population size and measurement search budget.
software pop.
size budget software pop.
size budget trimesh x264 storm wc storm rs storm sol keras dnn dsr keras dnn coffee keras lstm change to be less than in the last of the generations over both optimizers performance objectives and weights.
the results are shown in table .
in this way we seek to reach a good balance between convergence smaller population change and diversity larger population size under a search budget.
.
comparison and statistical test .
.
metric.
since only the target objective is of interest we do not need to consider the quality of the auxiliary objective .
we use the average normalized percentage gain of the target objective on the mmo or pmo model against on the single objective counterpart5 which is defined as normalized gain n n i 1yi xi yi yo wherebyxiandyiare the objective value of the single performance concern at the ith run for a multi objectivization model and the best average single objective counterpart respectively.
yois an utopian performance that none of the optimizers can achieve.
in this work we set yo vo qwhereinvois the optimal performance value found from all optimizers and qis the distance of the closest samplestovoover all cases such that s vo6.
clearly when the normalized gain is zero or negative it implies that the multiobjectivization model is similar or even worse off respectively.
note that the objective values are sorted for a total of nruns wheren .
according to hake the normalized gain is a more suitable metric than its non normalized version without yo because it has been used as a standard metric in many domains .
it can more accurately capture the spread .
more importantly it rewards or penalizes improvement or degradation more when the yiis closer to the approximately optimal value.
for example improving the latency from 100s to 50s shares the same non normalized gain as from 50s to 25s i.e.
.
however given the severe issue of local optima in software configuration tuning the latter case can be much more difficult to achieve than the former and hence deserves a greater reward.
suppose that the utopian performance is 20s in the above example the normalized gain for the two cases would be .
and .
respectively.
.
.
statistical methods.
we use the following statistical methods wilcoxon signed rank test we apply this with a .05to investigate the statistical significance of the performance objective comparisons over all runs as it is a nonparametric statistical test and has been recommended in software engineering research for its strong statistical power 5we convert all maximizing objectives by multiplying .
6we found that for all software systems studied in this work there exist q vo.on pair wise comparisons .
if thep .
we say the magnitude of differences in the comparisons are significant.
a12effect size we use a12to verify the effect size over runs.
when comparing a multi objectivization model and its single objective counterpart in this work a12 .
denotes that the multi objectivization is better for more than of the times.
in particular .
a12 .64indicates a small effect size while .
a12 .71and a12 .
mean a medium and a large effect size respectively.
evaluation results in this section we present the results of our experimental evaluations and address the research questions posed in section .
.
the experiments were run in parallel on several machines each with six cores cpu at .9ghz and 8gb ram for two months .
all settings discussed in section are used unless otherwise stated.
.
rq1 effectiveness .
.
method.
to answer rq1 we examine all the eight software systems environments with two performance objectives each giving us cases of study.
in each case we compare the best singleobjective counterpart7with all instances of mmo and pmo.
to set the weight for each mmo instance in a case we firstly conduct preliminary runs under of the search budget and population size one run each value .
the weight with the best target performance objective is then used in the full scale experiments if more than one weight is the best we chose one randomly .
for all pair wise comparisons both wilcoxon sign rank test and a12are used.
7we identified the best one among rs shc r soga and sa based on the best rank from the scott knott test over runs for stronger statistical power.
if multiple optimizers share the best rank we picked the one with the best average result.
note that the best single objective counterpart may differ case by case.
trimesh o1trimesh o2x264 o1x264 o2storm wc o1storm wc o2storm rs o1storm rs o2storm sol o1storm sol o2dnn dsr o1dnn dsr o2dnn coffee o1dnn coffee o2lstm o1lstm o2 50050pmo0255075mmo linear 250255075mmo sqrt 250255075mmo square figure average and standard deviations on gain of mmo and pmo over the best single objective counterpart for runs.
the blue pink and yellow denote positive negative and zero average gain respectively.esec fse august athens greece tao chen and miqing li .
.
results.
from figure we see that on average the mmo model achieves reasonably positive gains for at least cases across the instances.
this is a sign that the mmo model suffers less on the local optima issue than its best single objective counterpart.
moreover it achieves improvements for more than an average of in some cases e.g.
storm sol o2 as in those cases the distance between local optima can be large.
yet we observe no obvious difference among the mmo instances.
pmo albeit leads to acceptable results for some cases often performs worse than the best singleobjective counterpart as the gains are generally similar or negative out of cases .
this can be attributed to the fact that it wastes a significant amount of resources on optimizing the auxiliary performance objective.
interestingly for trimesh o1 all the models have the same results as the best single objective counterpart.
although rare this is a possible case where the landscape of the target performance objective is simpler e.g.
fewer local optima hence all the models optimizers can find the globally optimal configuration.
table shows the results of the statistical tests in which we see that similar to the gains the mmo model wins a larger majority in general in which most of them are statistically significant p .
with non trivial effect size a12 .
.
again the pmo performs the worst with no wins on out of cases.
to provide a detailed understanding figure shows all the explored configurations for trimesh with latency as the target performance objective.
clearly we see that the result confirms our theory the single objective counterparts do explore some good ranges of configurations but they remain mostly trapped in a large region of local optima.
the pmo performs the worst with fewer points in the projected area because it over empathizes on optimizing the auxiliary performance objective which negatively affects the target performance objective.
our mmo model in contrast escapes from local optima by exploring an even larger area while keeping the tendency towards better target performance objective which is precisely our goals and2from section .
therefore we say table a12andpvalues on comparing multi objectivization mmo and pmo model against the best single objective counterpart over runs.
software system mmo linear mmo sqrt mmo square pmo trimesh o1 .
.
.
.
.
.
.
.
trimesh o2 .
.
.
.
.
.
.
.
x264 o1 .
.
.
.
.
.
.
.
x264 o2 .
.
.
.
.
.
.
.
storm wc o1 .
.
.
.
.
.
.
.
storm wc o2 .
.
.
.
.
.
.
.
storm rs o1 .
.
.
.
.
.
.
.
storm rs o2 .
.
.
.
.
.
.
.
storm sol o1 .
.
.
.
.
.
.
.
storm sol o2 .
.
.
.
.
.
.
.
keras dnn dsr o1 .
.
.
.
.
.
.
.
keras dnn dsr o2 .
.
.
.
.
.
.
.
keras dnn coffee o1 .
.
.
.
.
.
.
.
keras dnn coffee o2 .
.
.
.
.
.
.
.
keras lstm o1 .
.
.
.
.
.
.
.
keras lstm o2 .
.
.
.
.
.
.
.
thepvalues are shown in the bracket.
a12 .5means the mmo or pmo is better in blue a12 .5denotes the best single objective counterpart is better inpink a12 .5means a tie.
the comparisons for which there is a p .
and a12 .44or a12 .
are highlighted in bold .
presmoothingpostsmoothinglatency s mmosinglepmoa large region of local optima approx.
global optimumfigure a projected landscape of trimesh explored by mmo since all instances perform similarly here we use mmo linear as an example pmo and the best singleobjective counterpart.
each point is a configuration measured in the run regardless whether it is preserved or not.
rq1 the mmo model regardless of its instance is effective in overcoming local optima providing considerably better results than the best single objective counterpart in general up to mean gain .
it also significantly outperforms the pmo model.
the mmo instances do not differ much though.
.
rq2 resource efficiency .
.
method.
to investigate rq2 for each case we use a baseline b taken as the smallest number of measurements that the best single objective counterpart consumes to achieve its best average result over runs.
we then record the smallest amount of budget consumed by the mmo and pmo to achieve the same or better target performance objective on average denoted as m. the ratios i.e.
r m b are reported implying that if the mmo instances are resource efficient then we would expect r .
since in our context the resource is the number of measurements it reflects the tuning time and computation required by a model.
again as for rq1 only the best weight for each mmo instance identified from the preliminary runs is examined in a case.
.
.
results.
as can be seen from figure despite a small number of cases where the mmo model cannot reach the performance level as achieved by the best single objective counterpart the divided bars denoted as r most commonly it uses less number of measurements than or at least identical to the baseline to find the same or better results e.g.
it can be as significantly low as .
in particular the mmo instances have cases of r cases ofr and cases of r .
this indicates that the mmo model overcomes local optima better and more efficiently a key attraction to software configuration tuning due to its expensive measurements.
in contrast the pmo exhibits the worst resource efficiency as it has cases of r together with and cases ofr andr respectively while the remaining cases ofr .
this is a clear sign that pmo is generally resource hungry as discussed in section .multi objectivizing software configuration tuning esec fse august athens greece 50100150200250300keras lstm o2keras lstm o1keras dnn coffee o2keras dnn coffee o1keras dnn dsr o2keras dnn dsr o1storm sol o2storm sol o1storm rs o2storm rs o1storm wc o2storm wc o1x264 o2x264 o1trimesh o2trimesh o1budget runs out of measurementsmmo linearmmo sqrtmmo squarepmo figure of measurements r for the mmo and pmo models to converge to the best average performance objective by the best single objective counterpart over runs using its budget consumption as the baseline the dashed line .
the divided bars denote no convergence when the total search budget runs out i.e.
r .
notably the resource saving of mmo is more significant on systems with larger search space e.g.
keras dnn andtrimesh .
this is because that the larger the search space the more the resources are required for the single objective model to find good configurations.
in contrast our model mmo which is designed to keep a set of diverse high quality configurations during the tuning needs less effort to find better ones.
as a result we conclude that rq2 the mmo model is resource efficient consuming generally fewer measurements than the best single objective counterpart to reach the same or better results as low as of it .
the pmo in contrast is much more resource hungry.
.
rq3 sensitivity to weight .
.
method.
to address rq3 we check how do the mmo instances perform compared with the best single objective counterpart under different weight settings for the full scale experiments.
hence for each instance there are seven settings and systems environments leading to cases.
in each of these cases we conduct a pair wise comparison using the a12and wilcoxon sign rank test.
.
.
results.
the results are shown in table in which we see that the mmo model regardless to its instance may indeed be sensitive to the weight as it could win or lose with different a12values and statistical results depending on different settings.
although the best weight can be different for specific cases we do observe a general pattern according to the last row setting the weight as an edge value like .
.
.
or tends to be the best among others in general.
this is clearer for mmo linear and mmo sqrt while mmo square prefers .
more.
we also note that the best weights identified from the preliminary runs are generally consistent with those best ones under the full scale experiments.
in particular we see that all the mmo instances can be more beneficial more weight values if not all can lead to significantlybetter results in some cases of the complex systems e.g.
x264 and keras dnn than others with smaller search space and dimension of options e.g.
storm .
this could be due to the fact that for more challenging systems the advantage of our model over the singleobjective counterpart is clearer thus it is easier to have a better result over different weight settings.
in summary we state that rq3 the mmo model is sensitive to the weight but there exist a common pattern such that some extreme weight e.g.
.
.
.
or is often the best value.
discussion .
why software configuration tuning?
a natural question to ask is why our mmo model is specific for software configuration tuning rather than as a general searchbased solution for all sbse problems.
the answer is three fold.
firstly we took three important properties of software configuration tuning into account when designing the mmo model the high degree of sparsity in software systems exacerbates the issue of the search being trapped in local optima property .
the measurement is expensive thus efficiently escaping the local optima with less resources is desirable property .
the correlations between performance attributes are uncertain i.e.
extremely well or poor auxiliary performance objective may both lead to similarly good target performance objective property .
secondly the configurable software systems provide a wellfitting avenue for multi objectivization as it is common that they inherently come with at least two performance attributes e.g.
latency and throughput that can be directly used in the multiobjectivization.
some other sbse problems in contrast may not have a readily available attribute s that can serve as the auxiliary objective.
for example in the code refactoring problem the robustness of the code as an auxiliary objective is not a straightforward and widely known metric that can be easily quantified .
finally how the configurations can affect the performance attributes is often a black box.
in contrast in many other sbse problems the objective function can be specifically designed based on some shared domain properties between scenarios.
for example in crash reproduction problem it is possible to engineer a new auxiliary objective to check how widely a test case covers the code based on some common code structures for a software system e.g.
function access levels such that it is strongly conflicting with the target objective i.e.
distance to the particular line s of code that reproduces the crash .
however it is difficult if not impossible for the configuration options in software configuration tuning to achieve the same.
our mmo model explicitly considers such a black box nature of software configuration tuning as we make no assumption about the performance attributes and their correlations.
.
how to use mmo in practice?
here we elaborate on the guidelines for using mmo in practice.
.
.
choosing the mmo instance.
sections .
and .
reveal that the mmo instances perform similarly for software configuration tuning all better than the best single objective counterpart and pmo in general.
it is therefore safe to choose any of them.
inesec fse august athens greece tao chen and miqing li table sensitivity analysis on different weights in the mmo model full scale experiments .
the cells report the a12values and whether p .05on comparing a mmo instance and the best single objective counterpart over runs.
the last row counts how many times a weight value is the best in a case based on scott knott rank primary and the average result secondary .
software systemmmo linear mmo sqrt mmo square .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
trimesh o1 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
trimesh o2 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
x264 o1 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
x264 o2 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
storm wc o1 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
storm wc o2 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
storm rs o1 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
storm rs o2 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
storm sol o1 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
storm sol o2 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
keras dnn dsr o1 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
keras dnn dsr o2 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
keras dnn coffee o1 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
keras dnn coffee o2 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
keras lstm o1 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
keras lstm o2 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
best over cases denotes a statistically significant comparison with p .
.
other formats are the same as table .
trimesh o1trimesh o2x264 o1x264 o2storm wc o1storm wc o2storm rs o1storm rs o2storm rc o1storm rc o2dnn dsr o1dnn dsr o2dnn coffee o1dnn coffee o2lstm o1lstm o201 000max.
time ms figure the maximum running time for a full scale run when using previously measured data to identify the best weight over all seven weight values and runs .
denotes the best weight concluded using data is identical to that obtained from profiling the system means otherwise.
general we suggest to use mmo linear by default as it is the simplest form among the others.
.
.
setting the weight.
we recommend two alternative methods to identify the best weights during preliminary runs physically profiled method and data driven method.
to set a good weight one can profile the actual system with a reduced budget e.g.
as what we have done in this work.
in fact the findings from section .
has provided useful insights to simplify the process albeit the difficulty of setting weight varies depending on the case we observed that the edge weight value e.g.
.
.
.
or is generally a reliable setting8.
further there are also cases where nearly all weights we examined are highly effective such as x264 o1 andkeras dnn coffee o2 .
therefore we suggest trying at least the above values in the preliminary runs.
8we have additionally examined values .01or 10in our experiments but the results make no statistically significant improvements across the cases.when previously measured data is available the data driven method for identifying the weight becomes possible.
we have found that for all the mmo instances and cases under the full scale experiments the best weight value concluded based on the data is the same as that identified by measuring the system but the former can terminate several orders of magnitude faster.
as shown in figure when examining the weight using all data collected from the previous experiments we see that the resulted best weights are generally consistent with those identified by physically profiling the systems as in section .
.
for the few cases where there is an inconsistency all the weights in fact perform rather similar e.g.
x264 o1 therefore it is safe even if the actual best one has not been chosen.
more importantly the maximum running time is negligible when using data it is merely seconds or less.
.
threats to validity threats to internal validity can be related to the search budget.
to tackle this we have used two hour budgets as suggested in prior work .
the parameter settings follow what has been used from the literature or tuned through preliminary runs.
to mitigate bias we repeated experiment runs under each case.
the metrics and evaluation used may pose threats to construct validity .
since there is only a single performance concern we conduct the comparison based on the gains on the target performance objectives over the best single objective optimizer together with the resources number of measurements required to converge to the same result.
both of these are common metrics in software configuration tuning .
to verify statistical significance and effect size we use wilcoxon sign rank test and a12to examine the results.
threats to external validity can be raised from the subjects studied.
we mitigated this by using eight systems environments that are of different scales and performance attributes.
we also compared the mmo model with four state of the art single objective counterparts for software configuration tuning.
nonetheless we agree that using more systems and optimizers may prove fruitful.multi objectivizing software configuration tuning esec fse august athens greece related work broadly optimizers for software configuration tuning can be classified into two categories measurement based andmodel based .
measurement based optimizers in measurement based methods the optimizer is directly used to measure the configuration on the software systems.
despite the expensiveness the measurements can accurately reflect the good or bad of a configuration.
the optimizer can be based on random search hill climbing single objective genetic algorithm and simulated annealing to name a few.
under such a single objective model various tricks have been applied.
for example some extend random search to consider a wider neighboring radius of the configuration structure hence it is more likely to jump out from the local optima .
others rely on restarting from a different point such as in restarted hill climbing hence increasing the chance to find the right path from local optima to the global optimum .
our mmo model differs from all the above as it lies in a higher level of abstraction the optimization model as opposed to the level of optimization method.
model based optimizers instead of solely using the measurements of software systems the model based methods apply a surrogate model analytical or machine learning based to evaluate configurations which guides the search in an optimizer.
the intention is to speed up the exploration of configurations as the model evaluation is rather cheap.
yet it has been shown that the model accuracy and the availability of initial data can become an issue .
among others jamshidi and casale use bayesian optimization to tune software configuration wherein the search is guided by the gaussian process regression trained from the data collected.
nair et al.
follow a similar idea but a regression tree model is used instead.
since mmo lies in the level of optimization model it is complementary to the model based methods in which the mmo would take the surrogate values as inputs instead of the real measurements.
general parameter tuning optimizers proposed for the parameter tuning of general algorithms can also be relevant including irace paramils smac gga as well as their multi objective variants such as mo paramils and sprint race .
to examine a few examples paramils relies on iterative local search a search procedure that may jump out of local optima using strategies similar to that of sa and shc r. further a key contribution is the capping strategy which helps to reduce the need to measure an algorithm under some problem instances hence saving computational resources.
this is one of the goals that we seek to achieve too.
similar to nair et al.
smac uses bayesian optimization but relying on a random forest model which additionally considers the performance of an algorithms over a set of instances.
however their work differs from ours in two aspects.
firstly general algorithm configuration requires to work on a set of problem instances each coming with different features.
the software configuration tuning in contrast is often concerned with tuning software system under a given benchmark i.e.
one instance .
therefore most of their designs for saving resources such as the capping in paramils were proposed to reduce the number of instances measured.
of course it is possible to generalize the problemto consider multiple benchmarks as the same time yet this is outside the scope of this paper.
secondly none of them works on the level of optimization model and therefore our mmo is still complementary to their optimizers.
multi objectivization in sbse multi objectivization which is the notion behind our mmo model has been applied in other sbse problems .
for example to reproduce a crash based on the crash report one can purposely design a new auxiliary objective which measures how widely a test case covers the code to be optimized alongside with the target crash distance .
a multiobjective optimizer e.g.
nsga ii is directly used thereafter.
a similar case can be found also for the code refactoring problem .
however during the tuning process such a model i.e.
pmo in this paper could waste a significant amount of the resources in optimizing the auxiliary objective which is of no interest.
this is a particularly unwelcome issue for software configuration tuning where the measurement is expensive.
as we have shown in section pmo performs even worse than the classic single objective model in most of the cases.
conclusion and future work this paper tackles the local optimum issue in software configuration tuning from a different perspective multi objectivizing the single objective optimization scenario.
we do this by proposing a meta multi objective model mmo at the level of optimization model external part as opposed to existing work that focuses on developing an effective single objective optimizer internal part .
we compare mmo with four state of the art single objective optimizers and the plain multi objectivization model over various scenarios.
the results reveal that the mmo model can generally be more effective in overcoming local optima and do so by consuming less resources in most cases can be sensitive to the weight but there exist some commonly best values.
the idea of mmo is essentially to rotate the original space of target and auxiliary objectives hence that solutions with good target objective value and various auxiliary objective values incomparable.
in this geometrical transformation the weight parameter determines how far in terms of the auxiliary objective solutions are incomparable relative to the target objective.
a comparison with methods of the similar idea e.g.
select solutions with good target objective and diverse auxiliary objective values can be beneficial as it can help answer an underlying question can maintain the diversity of the auxiliary objective help optimization of the target one.
this is one of our subsequent studies.
another direction of future work is to add more auxiliary objective.
in this regard how to do the transformation in the 3d space is the key.
on top of the above an adaptive weight adjustment approach for the mmo model as suggested by the findings from rq3 is certainly more desirable which is worth investigating in depth.