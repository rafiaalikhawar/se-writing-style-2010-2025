how to identify boundary conditions with contrasty metric?
1stweilin luo school of computer science and engineering sun yat sen university guangzhou china luowlin3 mail2.sysu.edu.cn2ndhai wany school of computer science and engineering sun yat sen university guangzhou china wanhai mail.sysu.edu.cn 3rdxiaotong song school of computer science and engineering sun yat sen university guangzhou china songxt5 mail2.sysu.edu.cn4thbinhao yang school of computer science and engineering sun yat sen university guangzhou china yangbh7 mail2.sysu.edu.cn 5thhongzhen zhong school of computer science and engineering sun yat sen university guangzhou china zhonghzh5 mail2.sysu.edu.cn6thyin chen school of computer science south china normal university guangzhou china ychen scnu.edu.cn abstract the boundary conditions bcs have shown great potential in requirements engineering because a bc captures the particular combination of circumstances i.e.
divergence in which the goals of the requirement cannot be satisfied as a whole.
existing researches have attempted to automatically identify lots of bcs.
unfortunately a large number of identified bcs make assessing and resolving divergences expensive.
existing methods adopt a coarse grained metric generality to filter out less general bcs.
however the results still retain a large number of redundant bcs since a general bc potentially captures redundant circumstances that do not lead to a divergence.
furthermore the likelihood of bc can be misled by redundant bcs resulting in costly repeatedly assessing and resolving divergences.
in this paper we present a fine grained metric to filter out the redundant bcs.
we first introduce the concept of contrasty of bc.
intuitively if two bcs are contrastive they capture different divergences.
we argue that a set of contrastive bcs should be recommended to engineers rather than a set of general bcs that potentially only indicates the same divergence.
then we design a post processing framework ppfc to produce a set of contrastive bcs after identifying bcs.
experimental results show that the contrasty metric dramatically reduces the number of bcs recommended to engineers.
results also demonstrate that lots of bcs identified by the state of the art method are redundant in most cases.
besides to improve efficiency we propose a joint framework jfc to interleave assessing based on the contrasty metric with identifying bcs.
the primary intuition behind jfc is that it considers the search bias toward contrastive bcs during ycorresponding author.
this paper was supported by the guangdong province science and technology plan projects no.
2017b010110011 national natural science foundation of china no.
national key r d program of china no.
2018yfc0830600 guangdong province natural science foundation no.
2018a030313086 and 2017a070706010 soft science .identifying bcs thereby pruning the bcs capturing the same divergence.
experiments confirm the improvements of jfc in identifying contrastive bcs.
index terms goal oriented requirement engineering boundary conditions goal conflict identification i. i ntroduction goal oriented requirement engineering gore is an essential phase of the software development life cycle the important task of which is to attain correct software requirements specifications.
many researches have demonstrated the significant advantages that formal and goal oriented approaches help generate correct specifications .
in such approaches domain properties andgoals are represented inlinear time temporal logic ltl because ltl is proved convenient for abstracting specifications of a large class of requirements assumptions and domain properties .
the identify assess control cycle in gore aims at identifying assessing and resolving inconsistency in which the goals of the requirement cannot be satisfied as a whole.
the divergence is a weak inconsistency i.e.
particular circumstances where the satisfaction of some goals inhibits the satisfaction of others.
a divergence is captured by boundary conditions bcs which explain why the divergence happens.
various approaches have been proposed to automatically identify bcs in the context of gore.
as the number of identified bcs in the identification stage increases for example there are more than bcs in the case named london ambulance service in the assess14732021 ieee acm 43rd international conference on software engineering icse .
ieee ment stage and the resolution stage become very expensive and even impractical.
in order to provide engineers with an acceptable number of bcs to analyze the generality metric definition has been proposed to automatically filter out the less general bcs.
the generality metric qualitatively distinguishes the importance of bc using the implication relationship of bcs.
intuitively a more general also known as weaker bc is more important because it potentially covers more circumstances to represent a divergence.
therefore the less general bcs can be filtered out by the more general one.
unfortunately we observe that a set of general bcs still retains a large number of redundant bcs.
the reason is that the generality metric can be considered as a coarse grained metric.
a general bc potentially captures redundant circumstances that do not lead to a divergence.
furthermore the accuracy of the assessment step based on likelihood is sensitive to the redundant circumstances so a set of general bcs can lead to mistakes in the assessment step an example shown in section iii .
the assessment stage is concerned with evaluating how likely the identified conflicts are and how likely and severe are their consequences.
degiovanni et al.
proposed an automatically assessing method based on model counting which can be used to prioritize bcs to be resolved.
however a set of general bcs misleads to prioritize the bcs because a general bc potentially captures redundant circumstances that do not lead to a divergence.
in this paper we present a new metric to assess the differences among the divergences captured by bcs.
our approach is novel in the following respects it is a fine grained metric because it can filter out not only the less general bcs but also the bcs that capture the same divergence and it measures the differences between bcs from the different divergences captured by them.
we first introduce the concept of contrasty of bcs motivated by avoiding boundary conditions in resolving divergences.
more precisely given two bcs and we consider whether and are bcs.
resp.
represents the circumstances left by removing the circumstances captured by resp.
from that captured by resp.
.
if neither 0nor 0is bc and are contrastive.
intuitively if two bcs are contrastive they capture different divergences.
we argue that a set of contrastive bcs should be recommended to engineers rather than a set of general bcs since they potentially only indicate the same divergence.
based on the contrasty metric we design a post processing framework ppfc to produce a set of contrastive bcs after identifying bcs.
experimental results show that the contrasty metric can filter out all the bcs that capture the same divergence which dramatically reduces the number of bcs recommended to engineers.
furthermore experiments show that the bcs identified by the state of the art method are not contrastive in most cases.
in other words these bcs capture the same divergence in which engineers only consider one bc to resolve a divergence while others are redundant.
in order to improve efficiency we propose a joint framework jfc to interleave assessing based on the contrasty metric with identifying bcs.
specifically when a bc is identifiedduring the search we add its negation as an additional constraint to domain properties.
the additional constraint makes the domain properties dynamically change so that it prevents the same circumstances from being identified as a bc again.
the insight behind this is that it produces the search bias towards the bcs that capture different divergences.
besides we propose a sufficient condition for the case where there not exist bcs.
it guarantees that if we resolve the divergences captured by the bcs in the set of contrastive bcs there not exist divergences under the original domain properties and goals.
experiments confirm the improvements of jfc in identifying contrastive bcs.
our main contributions are summarized as follows.
we present the novel contrasty metric to evaluate the differences between bcs which can filter out more redundant bcs that capture the same divergence.
we design a post processing framework ppfc to produce a set of contrastive bcs.
in order to improve efficiency we also design a joint framework jfc to capture different divergences during the search.
experiments show that the contrasty metric is better than the generality metric for filtering out redundant bcs.
ii.
b ackground in this section we introduce the background of goal conflict analysis and linear time temporal logic.
we briefly recall some basic notions for the rest of the paper.
a. goal conflict analysis in gore goals are prescriptive statements that the system must achieve and domain properties are descriptive statements that capture the domain of the problem world.
in practice it is unrealistic to require requirements specifications to be complete or all goals to be satisfiable because inconsistencies may occur.
goal conflict analysis deals with the inconsistencies via the following identify assess control cycle the identification stage is to identify a condition whose occurrence makes some inconsistencies the assessment stage is to assess and prioritize the identified inconsistencies according to their likelihood and severity the resolution stage is to resolve the identified inconsistencies by providing appropriate countermeasures.
goal conflict identification.
in this paper we focus on a weak inconsistency i.e.
divergence .
a divergence essentially represents a boundary condition bc whose occurrence results in the loss of satisfaction of the goals which makes the goal divergence .
definition .
letg fg1 gngbe a set of goals and dom a set of domain properties.
a divergence occurs within 1474dom iff there exists a boundary condition underdom and gsuch that the following conditions hold dom g j ?
logical inconsistency dom g i 6j ?
for each i n minimality g6 non triviality whereg v i ngiandg i v j6 igj.
intuitively a bc captures a particular combination of circumstances in which the goals cannot be satisfied as a whole.
the logical inconsistency property means the conjunction of goals becomes inconsistent when holds.
the minimality property states that disregarding any of the goals no longer results in inconsistency.
the non triviality property forbids a bc to be a trivial condition which is the negation of the conjunction of the goals.
note that bcs are not false due to the minimality property.
specifying software requirements in the ltl formulation allows us to employ automated ltl satisfiability solvers to check for the feasibility of the corresponding requirements.
with an efficient ltl satisfiability solver we can automatically check if the generated candidate formulae are valid bcs or not by checking if they satisfy the properties.
in the identification stage the generality metric has been proposed to reduce the redundant bcs.
it is defined as follows.
definition .
letsbe a set of bcs.
a bc i2sismore general than another bc j2sif jimplies i. intuitively a more general bc captures all the particular combinations of circumstances captured by the less general bcs than .
therefore it is important to provide engineers with more general bcs.
as far as we know the generality metric is the only metric to filter out bcs.
goal conflict assessment.
in the assessment stage in order to give engineers more guidance on which bcs need to get attention probabilities of their occurrence are considered as an important indicator.
for systems without extra probabilistic information there is an approach based on model counting to analyze the likelihood of bcs.
it is defined as follows.
definition .
let be a bc dom domain properties and k a positive integer.
the likelihood of isl dom k dom k where c k denotes that the total number of models bases of lengthksatisfying constraints in c. intuitively the larger likelihood of a bc indicates that the divergence captured by the bc is more likely to happen.
goal conflict resolution.
in the resolution stage as the bcs malfunction the system when the system reaches the circumstances captured by bcs the engineers need some strategies to resolve the divergences captured by the bcs.
definition .
letdom be domain properties ggoals and a bc under dom andg.resolving divergences aims to modifydom andgto getdom0andg0 so that under dom0andg0does not fulfill at least one of the following constraints dom0 g0 j ?
dom0 g0 i 6j ?
for each i n g06 .
intuitively after resolving divergences the circumstances captured by the bc do not happen under the new system expressed by updated domain properties and goals.
van lamsweerde et al.
proposed that generating reasonably updated domain properties and goals is an open problem because it requires a lot of experience.
we will illustrate an example of resolving divergences in viii.
therefore a large number of identified bcs make the resolution stage very expensive.
a straightforward strategy can be adopted to avoid the circumstances captured by a bc.
the avoid pattern is therefore introduced dom!
b wherebdenotes a bc to be inhibited.
b. linear time temporal logic linear time temporal logic ltl is widely used to describe infinite behaviors of discrete systems which is suitable for specifying software requirements .
throughout this paper we use lower case letters e.g.
p h to denote propositions.
the syntax of ltl for a finite set of propositionspincludes the standard logical connectives b f?
g and temporal operators next until u .
?j jpj 2j 1 2j j j 1u operator release r eventually always and weak until w are commonly used and can be defined as 1r 1u u u and 1w 1u 2 respectively.
we use j jto denote the sizeof the formula i.e.
the number of temporal operators logical connectives and literals in .
ltl formulae are interpreted over a linear time structure .
a linear time structure is a pair of w s wheresis a state sequence and s!2pis a function mapping each state sito a set of propositions.
let wbe a linear time structure i a position and 2two ltl formulae.
the satisfaction relationj is defined as follows w ij p iffp2 si wherep2p w ij iffw i6j w ij iffw ij 1andw ij w ij iffw i 1j w ij 1u 2iff9k is.t.w kj 2and 8i j k w jj an ltl formula is called satisfiable if and only if there is a linear time structure model satisfying .
an ltl formula implies an ltl formula noted !
if the models of are also models of .
the ltl satisfiability problem is to check whether an ltl formula is satisfiable which is pspace complete .
recently ltl satisfiability checkers based on different techniques have been developed.
among these checkers nuxmv and aalta have achieved better performance.
1475iii.
m otivating example in this section we will illustrate the drawbacks of the generality metric through an example and discuss the insights behind the contrasty metric.
below we illustrate an example minepump .
example .
consider a system to control a pump inside a mine.
the main goal of the system is avoiding flood in the mine.
the system has two sensors.
one detects the high water level h the other detects methane in the environment m .
when the water level is high the system should turn on the pump p .
when there is methane in the environment the pump should be turned off.
domain property dom and goals g are represented via the following ltl formulae.
domain property name pumpeffect d1 description the pump is turned on for two time steps then in the following one the water level is not high.
formula p p !
h goals name noflooding g1 description when the water level is high the system should turn on the pump.
formula h!
p name noexplosion g2 description when there is methane in the environment the pump should be turned off.
formula m!
p although the specification is consistent i.e.
all domain properties and goals can simultaneously be satisfied this specification exhibits some goal divergences.
one of the bcs is h m which captures the circumstances where the high water level and the methane occur at the same time.
under this situation two goals are unsatisfiable simultaneously within domain property.
we also consider other two bcs h mand h m p h p h m p .
2captures the circumstances that the water level is high and the methane occurs at the beginning.
through equivalent transformation we can obtain h m p h m p h m p h m p h m p h m p .
clearly 3captures five circumstances where in the future the system will migrate from the state where the high water level occurs the methane does not occur and the pump is turned on h m p to the state described as follows.
the high water level does not occur the methane occurs and the pump is not turned on h m p the high water level and the methane occur and the pump is turned on h m p the high water level and the methane do not occur and the pump is not turned on h m p the high water level and the methane occur and the pump is not turned on h m p the high water level occurs the methane does not occur and the pump is not turned on h m p .existing methods can search for a large number of bcs.
it makes the assessment and resolution stages very expensive and even impractical.
in order to provide engineers with an acceptable number of bcs to be analyzed it is necessary to proposed metric to filter out the redundant bcs.
if we apply the generality metric we filter out 2because 1is more general than .
however the generality metric cannot evaluate 1and 3since the generality relationship between them does not hold.
in the assessment stage if we compute the likelihood based on the method we can classify 3as being more likely than 1in the long term and engineers should prioritize 3in the search for mechanisms that would allow us to reduce the chances of reaching .
unfortunately the assessment method lacks the accuracy to compute the likelihood by model counting because some models are meaningless i.e.
there does not exist the circumstances to lead the divergence in reality.
considering the circumstances captured by we observe that the circumstances and violate g1.
therefore they cannot satisfy the minimality of bc which means that they cannot capture the divergence in reality.
these circumstances areredundant so h m p h p m stands for the circumstances captured by .
we find that is more likely than 3using the assessment method so 1should be prioritized.
situations like this show that the accuracy of the assessment method based on likelihood is sensitive to redundant circumstances.
in addition we find that and 3capture the same divergence in which the high water level and the methane occur at the same time i.e.
the circumstance captured by .
it is very useful to identify the bc like 1in resolving divergences.
engineers only resolve 1instead of resolving 3first and then .
it avoids wasting computing resources caused by assessing and resolving redundant bcs.
in this paper motivated by avoiding boundary conditions in resolving divergence we introduce the concept of witness definition and contrasty definition of bcs.
intuitively the witness of a bc indicates the cause of divergence.
if the two bcs are not mutual witnesses then the two bcs are contrastive i.e.
they capture different divergences.
in this case 1and 3are not contrastive because 1is a witness of but not vice versa which means that the divergences captured by 1are wider than that captured by .
therefore we recommend 1to engineers and filter out .
iv.
i dentifying boundary conditions with contrasty metric in this section we first introduce the concept of contrasty of bcs.
then we design a post processing framework to identify a set of contrastive bcs.
a. contrasty we first introduce the concepts of witness andcontrasty .
definition .
letfbe an ltl formula and a bc.fis a witness of iff fis not a bc.
1476in the definition motivated by avoiding boundary conditions in resolving divergences we use a negative ltl formula to avoid some circumstances i.e.
resolving the divergence.
therefore the witness fof a bc indicates why is a bc.
iffis a bc it means that the divergence captured by is also captured by f. definition .
let and be bcs.
and arecontrastive iff is not a witness of and is not a witness of .
definition .
letbcbe a set of bcs.bcis contrastive iff 2bc and is contrastive.
intuitively the contrastive bcs capture different divergences.
we use an example to illustrate the definition of witness and contrasty.
example example cont.
.
h m h m and h m p h p h m p .
because 3is also a bc e.g.
it captures the circumstances where the high water level and the methane occur at the beginning 3is not a witness of .
1is a witness of 3since does not satisfy the minimality constraint of bc i.e.
d1 g1 is unsatisfiable.
therefore 1and 3are not contrastive.
1is a witness of 2and 2is not a witness of so 1and 2are not contrastive.
intuitively 1is more important than 2since the divergence captured by is wider than that captured by 2is a special case of .
2and 3are contrastive since they express the occurrence of the high water level and the methane in different situations.
based on the definition we have the following theorems.
these theorems indicate the highlight of the contrasty metric.
theorem .
let and be bcs.
if !
then is a witness of .
it is straightforward to prove theorem because is unsatisfiable.
because of theorem we have theorem .
theorem .
letbcbe a set of contrastive bcs.
bc !
!
.
theorem shows that there is not a general relation between any two bcs in a contrastive bc set while there can be a witness relation between some two bcs in a general bc set.
according to theorem the contrasty metric can be regarded as a finer grained metric than the generality metric because contrasty metric can filter out more redundant bcs than the generality metric.
let us recall example .
f 3gis general but not contrastive.
if the contrasty metric is considered then f 1gis a contrastive.
property .
let and be bcs.
if is a witness of and is not a witness of then resolving the divergence captured by leads to resolving the divergence captured by .
property shows that it is reasonable that engineers prioritize to resolve since the circumstances captured by include the circumstances captured by .theorem .
let and be two bcs.
if and are contrastive then and capture different divergences.
sketch of proof.
and are contrastive so resp.
is not the witness of resp.
which means that resp.
is still a bc.
the primary intuition behind resp.
is that after resolving the divergences captured by resp.
there are still divergences captured by resp.
.
therefore and capture different divergences.
theorem shows that contrastive bcs capture different divergences.
therefore it is meaningful to recommend a set of contrastive bcs to engineers.
according to the above analysis we argue that a set of contrastive bcs should be recommended to engineers rather than a set of general bcs since they potentially only indicate the same divergences.
in section v we will discuss the different divergences captured by contrastive bcs and report the advantage of the contrasty metric.
b. post processing framework we design a p ost p rocessing framework for f iltering the bcs based on the c ontrasty metric ppfc .
it takes a set of bcs b identified by a bc solver as inputs.
its output is a set of contrastive bcs bc .
algorithm ppfc input a set of bcsb.
output a set of contrastive bcs bc.
1bc b 2foreach bc 2bcdo 3b0 c bc 4iscontrastive w external contrasty filter b0 c ifiscontrastive then 6bc bc w else 8bc bc 9returnbc the pseudo code is outlined in algorithm .
at each iteration we choose a bc 2bc alg.
of line then discuss its relationship with other bcs inbc alg.
of line .
if and are witnesses of each other alg.
of line which means that and capture the same divergences we select the one with smaller size1to stay inbc.
if is a witness of and is not a witness of alg.
of line which means that the divergences captured by is wider than that captured by we retain otherwise alg.
of line we remove .
if and are not witnesses of each other we do not delete any one because they are contrastive.
theorem .
when algorithm terminates bcis contrastive.
1the bc with smaller size is more compact and easier to interpret.
1477algorithm external contrasty filter input a bc and a set of bcsb.
output whether is contrastive inband a set of bcswfiltered by .
1w 2foreach bc 2b do if is a witness of and is a witness of then ifthe size of is larger then that of then return false else w w f g else if is a witness of and is not a witness of then 9w w f g else if is not a witness of and is a witness of then return false 12return true w it is straightforward to prove theorem .
theorem guarantees that algorithm returns a set of contrastive bcs.
we illustrate our method through a running example as follows.
example example cont.
.assume that the bc solver returns the set of bc b f 3g where h m h m and h m p h p h m p .bcis initialized tof 3g.
at the first iteration assume that ppfc chooses .
2will be compared with 1and .
because 2is not a witness of 1and 1is a witness of external contrasty filter returns false and an empty set.
bcwill be updated as f 3g.
at the second iteration assume that ppfc chooses .
1will be compared with .
because 1is a witness of 3and 3is not a witness of external contrasty filter returns true andf 3g.bcwill be updated as f 1g.
then ppfc returns f 1gand terminates.
c. discussion about completeness and performance in this paper we are not concerned with the completeness of identifying contrastive bcs i.e.
the divergences captured by contrastive bcs cover all the divergences captured by bcs that have been found.
the reason is as follows.
firstly we focus on filtering out redundant bcs for better resolving divergences which is the fundamental purpose of gore.
in general the better the identification result is the easier the resolution stage is.
therefore we argue that the identified bcs should be conducive to resolving divergences as much as possible rather than completeness.
furthermore the completeness of the bc set does not help to resolve divergences.
resolving divergences is a dynamic process.
after resolving a bc some bcs in the original bc set are no longer bcs under the updated domain properties andtable i the details of cases case dom goal var size retractionpattern1 rp1 retractionpattern2 rp2 elevator ele tcp achieveavoidpattern aap minepump mp atm rail road crossing system rrcs telephone tel london ambulance service las prioritized arbiter pa round robin arbiter rra simple arbiter sa load balancer lb liftcontroller lc arm s advanced microcontroller bus architecture amba goals.
in this way for resolving divergences it is meaningless to get the complete bc set in the bc identification stage.
for example a set of general bcs fulfills the completeness but it still retains a large number of redundant bcs that capture the same divergences so that engineers will do a lot of meaningless work for resolving divergences.
in other words although the generality metric satisfies the completeness it will also increase the burden of resolving divergences.
by comparison the contrasty metric first considers the optimization of bc resolving divergences.
ppfc only begins to filter out redundant bcs after the bc solver returns a set of bcs.
a natural idea is to directly identify contrastive bcs during searching for bcs.
in this way pruning the bcs capturing the same divergence can be performed directly in the search process thereby speeding up the searching process.
based on this idea we will discuss a joint framework for identifying contrastive bcs in section vi.
v. e valuation of contrasty in this section we reported the advantage of the contrasty metric.
here we presented the first research question.
rq .
compared with the generality metric what are the advantages of the contrasty metric?
given a set of bcs bidentified by a bc solver we applied different metrics to filter out redundant bcs.
for the competitor we combined the generality metric and the likelihood to filter and sort the bcs.
specifically we first filtered out the less general bcs to produce a set of general bcsbgand then sorted them according to the likelihood of bc from high to low.
based on ppfc we computed a set of contrastive bcs bcand sorted them by the likelihood.
we analyzed the shortcomings of the generality metric and reported the advantages of the contrasty metric by comparing bgandbc.
1478table ii thebcs produced by different metrics casegl cl rank bc rank bc witness rp11 p q u q p p q p q q p p q q p qu q p u p q qu q p p q q p rp21 p q s q r q r p su q s p su q s q r p su q s q r ele1 call open call open atfloor open u call open atfloor open openu call open atfloor call call open call open openu call open call open call open tcp1 delivered send ack send ack delivered send ack u send ack delivered send ack send ack u send ack delivered send ack delivered ack u send ack delivered delivered ack aap1 r p r p r p r s r p r p r q r p r p u p q r p mp1 h m p h p hw m p h m m h m h h p m h m p m p u m h m p h m h atm1 p l m p l p l m p l p m l m p l m p l u p m l m p l pu m p l p m p u p m l m p p m l m p l p m l m p l pu l p m l rrcs1 cc tc go ta cc tc go ta cc tc go ta cc tc go ta cc tc go tc tel1 d u c d c du f d c du o d c du f d c du c d d c rra1 r1 g1 u g0 g1 r1 g1 r0 g1 r1 g1 r0 g1 r1 g1 r0 g1 r1 g1 u g0 g1 r1 g1 r0 g1 r1 g0 u r0 r1 r1 g0 r1 g1 u r1 g1 r1 g1 u r0 g1 r1 g1 u r1 g1 r1 g1 1479a.
benchmarks we evaluated contrasty on 16different cases introduced by .
the details of each case are shown in table i including the numbers of domain properties column dom goals column goal variables column var and the total size of all formulae column size for the specification of each case.
the order of the cases is sorted by the size of all formulae from small to large.
b. experimental setups we used the following experimental setups.
we employed the state of the art bc solver2 denoted bygato identify bcs.
it is based on a genetic algorithm to search bcs.
we followed the configuration of gadescribed in the paper including the size of the initial population generated from such a specification and the limit of generations i.e.
50evolutions of the genetic algorithm population.
we invoked aalta as the ltl satisfiability checker to check whether an ltl formula is a bc whether one bc is more general than the other and whether one bc is a witness of the other.
note that ga also used aalta as the ltl satisfiability checker.
we computed the likelihood of a bc by the method .
and we set kto1000 which is used in the paper for good accuracy.
for each case we ran the algorithm 10times and reported the mean data.
all the experiments were run on the 13ghz intel e with 128gb memory under gnu linux ubuntu .
c. experimental results table iii summarizes the number of bc in b jbj bg jbgj andbc jbcj where the column suc.
means the number of successful runs out of runs .
if gafails in all runs the results are marked by n a .
overall our method can solve all the cases that can be solved by gato identify bcs.
clearly if the solver cannot identify bcs our method cannot perform the post processing.
for most cases gareturns a large number of bcs thanks to the development of search based methods.
note that such a large set of bc can cause a huge burden in the assessment stage and the resolution stage.
seeing the columns jbgj and jbcj we observe that the size of bcis much smaller than that ofbgfor all cases.
it means that compared with the generality metric the contrasty metric can considerably reduce the number of bcs to be analyzed by engineers.
table ii summarizes the results of the different metrics for the bcs identified for each of the case studies.
we selected the data that gagot the most number of bc from times experiments for display.
the column gl resp.
cl illustrates the bcs bc in bg resp.bc and their rank iii the number of bc recommended by different metrics casejbjjbgjjbcj suc.
rp1 .
.
.
rp2 .
.
.
ele .
.
tcp .
.
.
aap .
.
.
mp .
.
.
atm .
.
.
rrcs .
tel .
las n a n a n a n a pa n a n a n a n a rra .
.
sa n a n a n a n a lb n a n a n a n a lc n a n a n a n a amba n a n a n a n a rank based on the likelihood metric.
we also use the column rank as the identification of bcs.
for every bcs inbc we report which bcs in bg witness is a witness of and the identification of inbgis marked in red.
for all cases bcis much smaller than bgandbcis a subset ofbg which confirms that the contrasty metric is a more finer grained metric than the generality metric.
the results also show that a set of general bcs still retains the bcs that represent the same divergence.
particularly for mp atm and rra the redundant bcs are too much to assess and resolve divergences efficiently.
from the column witness every bc in bgcan find a witness of it inbc.
this observation means that the bcs in bccapture all the divergences captured by the bcs in bg.
therefore engineers only need to consider the bcs in bc when resolving divergences.
in addition we also observe that the contrastive bcs rank lower in bgin ele tcp aap mp rrcs tel and rra.
the reason as mentioned above is that the circumstances that cannot describe the divergence lead to mistakes of likelihood.
such mistakes are serious which will prevent engineers from grasping the main cause of the divergence quickly.
it leads to costly assessing and resolving the same divergence repeatedly.
in summary the generality metric cannot capture the difference between bcs.
surprisingly lots of bcs identified by the state of the art bc solver are redundant in most cases.
it puts an expensive burden on assessing and resolving divergences.
the method we propose can compare this well and give a recommendation that is more conducive to saving the costs of assessing and resolving divergences.
vi.
j oint framework in this section we design a j oint framework to interleave filtering based on the c ontrasty metric with identifying bcs jfc .
we first introduce the termination condition for identifying bcs and then propose jfc.
motivated by the blocking clause approach to solving allsat problem we consider excluding the circumstances 1480captured by identified bcs in the search process to generate a search bias towards the bcs that capture different divergences.
specifically in the process of searching for bcs once a bc is identified we add as an additional constraint to domain properties.
the additional constraint makes the domain properties dynamically change so that it can prevent the same circumstances from being identified as a bc again theorem .
moreover we will prove that the bcs under the additional constraint are also bcs under the original domain properties and goals theorem .
before introducing jfc we first propose a sufficient condition for the case where there does not exist a bc called bc termination condition .
theorem .
letdom be domain properties and ggoals.
if i jgj dom g i gij ?
then there does not exist a bc under dom andg.
sketch of proof.
we prove that if there exists a bc then i jgj dom g i gi6j ?.
if there is a bc under dom andg thendom g j ?
logical inconsistency and81 i jgj dom g i 6j ?
minimality .
because of the logical inconsistency we have !
dom g .
therefore dom g i !dom g i dom g .
consider the minimality we have i jgj dom g i dom g 6j ?
i.e.
i jgj dom g i gi6j ?.
based on theorem we can check whether there still exists a bc under the dynamical domain properties and goals.
algorithm jfc input domain properties dom and goalsg.
output a set of contrastive bcs bc.
1bc 2while true do 3isend call bcs olver dom f j bcg g ifisend then returnbc else 7w internal contrasty filter bc 8bc bc w ifthere is not a bc under dom f j 2bcgandgthen returnbc jfc takes the domain properties dom and goalsgas inputs.
its output is a set of contrastive bcs bc.
the pseudo code is outlined in algorithm .
in order to identify bcs we involve existing bc solvers e.g.
ga and tab alg.
of line .
note that we consider the dynamical domain properties dom f j 2bcg .
if the bc solver terminates we returnbc alg.
of line .
otherwise unlike ppfc we updatebcwhen identifying a new bc alg.
of line .algorithm internal contrasty filter input a bc and a set of bcsb.
output a set of bcs wfiltered by .
1w 2foreach bc 2b do if is a witness of then 4w w f g 5return true w note that we only remove the bcs which the new bc is a witness of alg.
of line because none of the bcs in bcis a witness of the new bc theorem .
afterward if there still exists a bc under dom f j 2bcgandg we continue to involve bc solver otherwise return bc alg.
of line .
theorem .
letdom be domain properties ggoals andb a set of bcs that has been identified.
a ltl formula is a bc underdom andg if is a bc under dom f j 2bg andg.
sketch of proof.
because8 2b is a bc under dom andg we havedom v 2b g dom g .
therefore dom v 2b g j ?
logical inconsistency holds.
becausedom v 2b g i !dom g i i jgj dom v 2b g i 6j ?
minimality holds.
the non triviality obviously holds.
theorem shows that although the additional constraint is considered the results are still bcs under the original domain properties and goals.
theorem .
in algorithm 2bcs.t.
is a witness of .
sketch of proof.
we prove theorem by inductive hypothesis as follows.
at the first iteration where bcis an empty set assume we get a bc theorem holds.
we suppose that at the k th iteration where we get a bc k theorem holds.
at thek th iteration where bc f kg assume we get a bc .
because is a bc under dom f j bcgandg i jgj dom v 2bc g i 6j ?.
therefore for every j2bc jis a bc underdom f j 2bc jgandg.
because of theorem jis a bc under dom andg.
intuitively based on theorem jfc can produce a search bias towards the bcs that capture different divergences.
theorem .
in algorithm the bcs in the final bcare not witnesses with each other.
it is straightforward to prove theorem because of theorem and algorithm .
theorem guarantees that algorithm returns a set of contrastive bcs.
1481table iv the overall performance of ppf candjfc caseppfc jfc jbj jb cjga t. s t. s suc.
jbj jb cj t t. s suc.
rp1 .
.
.
.
.
rp2 .
.
.
.
.
.
ele .
.
.
.
.
.
tcp .
.
.
.
.
.
.
aap .
.
.
.
.
mp .
.
.
.
.
atm .
.
.
.
.
rrcs .
.
.
tel .
.
.
las n a n a n a n a n a n a n a pa n a n a n a n a n a n a n a rra .
.
.
.
sa n a n a n a n a n a n a n a lb n a n a n a n a n a n a n a lc n a n a n a n a n a n a n a amba n a n a n a n a n a n a n a vii.
e xperiments in this section we conducted extensive experiments on a broad range of benchmarks shown in table i to evaluate the performance of jfc by comparing with ppfc .
we first presented the research questions.
rq .
what is the performance of the joint framework jfc for producing the contrastive bc set compared with the postprocessing framework ppfc ?
a. experimental setups the experimental setups used in this section was the same as the one described in section v. in addition we added the new experimental setups.
we set the same bc solver ga for ppfc andjfc.
we invoked aalta to check the bc termination condition.
b. experimental results table iv shows the overall performance of ppfc and jfc including the running time of ga ga t. the running time of the framework t. and the number of meeting the bc termination condition t .
in jfc brecords all bcs identified during the search.
from the column jbcj the contrastive bcs obtained by jfc is slightly less than that obtained by ppfc .
this is because jfc not only considers the contrasty in bc but also considers the bc termination condition where jfc searches for a set of contrastive bcs that is enough so that there is no bc in the domain properties and goals after avoiding these contrastive bcs.
we also observe that the size of bofjfc is much smaller than that of ppfc .
moreover for jfc the size ofbis close to that ofbc.
these observations show that jfc produces a strong search bias towards the bcs that are contrastive with the identified bcs.
inppfc the running time of gais approximately the same as that of producing a set of contrastive bcs.
and the runningtime of producing a set of contrastive bcs increases as the number of bcs identified by gaincreases.
in particular in aap mp and atm the running time of producing a set of contrastive bcs is about 5times that of ga. it indicates the drawback of ppfc namely the cost of producing a set of contrastive bcs is proportional to the number of bcs identified by a bc solver.
it is foreseeable that the redundant bcs in bwill greatly reduce the efficiency of producing a set of contrastive bcs.
jfc deals with the drawback of ppfc because jfc uses the identified contrastive bc for pruning during the search process thereby avoiding searching for the redundant bcs.
the shorter running time for meeting the bc termination condition confirms this conclusion.
if jfc meets the bc termination condition jfc will produce a set of contrastive bcs efficiently.
particularly in rp1 and atm jfc is10times faster than ppfc .
we also observe that if jfc does not meet the bc termination condition only tcp jfc is slower than ppfc .
it is reasonable because jfc additionally checks the bc termination condition after finding a new bc.
conclusively jfc produces the search bias towards contrastive bcs.
in addition the efficiency of jfc is not limited to the number of bcs identified by a bc solver.
viii.
r elated work inconsistency management i.e.
how to deal with inconsistencies in requirements has also been the focus of several studies in particular on the formal side.
besides the inconsistency management approaches based on the informal or semi formal methods such as a series of formal approaches recently have been proposed which only focus on logical inconsistency or ontology mismatch.
another related approach is proposed by nuseibeh and russo which generates the conjunction of ground literals as an explanation for the unsatisfiable specification based on abduction reasoning.
as for consistency checking methods we 1482have to mention the approach of harel et al.
which identifies inconsistencies between two requirements represented as conditional scenarios.
moreover the work studied the reasoning about conflicts in requirements.
in this paper we focus on the situations that lead to goal divergences which are nothing but weak inconsistencies.
goal conflict analysis has been widely used as an abstraction for risk analysis in gore.
it is typically driven by the identify assess control cycle aimed at identifying assessing and resolving inconsistencies that may obstruct the satisfaction of the expected goals.
in identifying inconsistencies we have to mention the work on obstacle analysis.
an obstacle first proposed in is a particular goal conflict which captures the situation that only one goal is inconsistent with the domain properties.
alrajeh et al.
exploited the model checking technique to generate tracks that violate or satisfy the goals and then to compute obstacles from these tracks based on the machine learning technique.
other approaches for obstacle analysis include .
whereas as obstacles only capture the inconsistency for single goals these approaches fail to deal with the situation where multiple goals are conflicting.
in this work we focus on the other inconsistencies boundary condition.
let us come back to the problem of identifying bcs.
existing approaches mainly categorize into construct based approaches and search based approaches.
for construct based approaches van lamsweerde et al.
proposed a pattern based approach which only returns a bc in a pre defined limited form.
degiovanni et al.
exploited a tableaux based approach that generates general bcs but only works on small specifications because tableaux are difficult to be constructed.
for the search based approach degiovanni et al.
presented a genetic algorithm which seeks for bcs and handles specifications that are beyond the scope of previous approaches.
moreover degiovanni et al.
first proposed the concept of generality to assess bcs.
their work filtered out the less general bcs to reduce the set of bcs.
however the generality is a coarse grained assessment metric.
as the number of identified inconsistencies increases the assessment stage and the resolution stage become very expensive and even impractical.
recently the assessment stage in gore has been widely discussed to prioritize inconsistencies to be resolved and suggest which goals to drive attention to for refinements.
however some of the work assume that certain probabilistic information on the domain is provided and analyzes to simpler kinds of inconsistencies obstacles .
in order to automatically assess bcs degiovanni et al.
recently have proposed an automated approach to assess how likely conflict is under an assumption that all events are equally likely.
they estimated the likelihood of bcs by counting how many models satisfy a circumstance captured by a bc.
however the number of models cannot accurately indicate the likelihood of divergence because not all the circumstances captured by a bc result in divergence.
in this paper wediscovered the drawbacks and proposed a new metric to avoid evaluation mistakes for the likelihood.
for the resolution of conflicts murukannaiah et al.
resolved the conflicts among stakeholder goals of system to be based on the analysis of competing hypotheses technique and argumentation patterns.
related works on conflict resolution also include which calculates the personalized repairs for the conflicts of requirements with the principle of model based diagnosis.
however these approaches presuppose that the conflicts have been already identified and our approach for boundary condition discovery provides a footstone for solving these problems.
let us recall example .
letier et al.
resolved the bc by refining the first goal as the pump is switched on when the water level is high and there is no methane.
formally h m !
p .
ix.
c onclusion and future work providing a reasonable set of bcs for assessing and resolving divergences is of great significance both from an economical perspective and an impact on software quality.
in this paper we have proposed a new metric contrasty to deal with the drawbacks caused by the generality metric.
because bcs are ultimately used for resolving divergences we argue that the identified bcs should help to assess and resolve divergences.
the contrasty metric mainly distinguishes the difference between bcs from the point of resolving divergences.
experimental results have shown the advantage of contrasty metric namely it filters out the bcs capturing the same divergence.
it helps to avoid costly reworks i.e.
assessing and resolving the same divergence captured by redundant bcs.
in addition we have designed a joint framework to improve the performance of the post processing framework.
future work will extend our contrasty metric to the assessment stage and the resolution stage.
acknowledgment we thank fangzhen lin yongmei liu jianwen li and ximing wen for discussion on the paper and anonymous referees for helpful comments.