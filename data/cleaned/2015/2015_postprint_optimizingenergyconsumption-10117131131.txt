optimizing energy consumption of guis in android apps a multi objective approach mario linares v squez1 gabriele bavota2 carlos bernal c rdenas1 rocco oliveto3 massimiliano di penta4 denys poshyvanyk1 1the college of william and mary williamsburg va usa 2free university of bozen bolzano italy 3university of molise pesche is italy 4university of sannio benevento italy abstract the wide di usion of mobile devices has motivated research towards optimizing energy consumption of software systems including apps targeting such devices.
besides e orts aimed at dealing with various kinds of energy bugs the adoption of organic light emitting diode oled screens has motivated research towards reducing energy consumption by choosing an appropriate color palette.
whilst past research in this area aimed at optimizing energy while keeping an acceptable level of contrast this paper proposes an approach named gemma gui energy multi objective optimization for android apps for generating color palettes using a multiobjective optimization technique which produces color solutions optimizing energy consumption and contrast while using consistent colors with respect to the original color palette.
an empirical evaluation that we performed on android apps demonstrates not only signi cant improvements in terms of the three di erent objectives but also con rmed that in most cases users still perceived the choices of colors as attractive.
finally for several apps we interviewed the original developers who in some cases expressed the intent to adopt the proposed choice of color palette whereas in other cases pointed out directions for future improvements.
categories and subject descriptors d. .
design tools and techniques general terms user interfaces keywords energy consumption mobile applications empirical study .
introduction the impressive adoption and inclusion of mobile devices and apps in daily activities has motivated the need for reducing their energy consumption.
while signi cant e ortshave been aimed at engineering energy friendly hardware components in mobile devices some recent research has also focused on energy aware development practices for reducing the energy consumption in mobile apps.
for instance common energy bugs in mobile apps have been identi ed and catalogued as well as typical hot spots together with energy greedy apis .
in addition several infrastructures and methods have been proposed to measure and estimate the energy consumption of mobile devices and apps .
some practices for avoiding and xing energy hotspots bugs in mobile apps focus on how the apps should use energy greedy hardware components in the device such as gps wi fi or the screen.
in the case of lcd displays the energy drawn from the battery is constant regardless of the colors displayed on the screen.
however this is not the case for oled displays for which the energy consumption depends on the combinations of colors at the sub pixel level.
this property of oled displays motivated the adoption of power models for estimating the energy drawn by the graphical user interfaces gui displayed on the screen.
in fact previous work have used power models to estimate and improve the energy consumption of web browsers mobile web apps and mobile apps in general .
all these prior techniques on improving energy consumption of guis running on oled devices have been mostly driven by a single objective to reduce energy consumption at all costs.
also these approaches generally exploit only a small subset of possible color schemas one can de ne to optimize the gui.
for example using prede ned themes or using color transformations starting only from the original scheme can drastically reduce the color palettes and compositions that can be explored as a potential solution .
this is also the case when the proposed solution uses by default dark colors in the background and generates the composition using the background as a reference .
another issue with previous approaches is that the solutions are generated individually for each gui in the app which can leed to inconsistencies in the whole design concept .
in this paper we propose a multi objective approach namely gemma1 for generating color compositions that reduce the energy consumption of guis in android apps and are visually attractive at the same time.
gemma combines power models pixel based engineering color theory dynamic analysis and a multi objective optimization technique namely nondominated sorting genetic algorithm nsga ii to produce a pareto optimal set of design solutions i.e.
gui 1guienergy multi objective opti mization for android appscolor compositions across three di erent objectives i reducing energy consumption ii increasing contrast and iii improving the attractiveness of the chosen colors by keeping the palette close to the original one.
to the best of our knowledge gemma introduces the following unique advantages is multi objective.
this is the rst approach adopting multi objective optimization to choose colors for mobile apps with the main goal of reducing energy consumption.
multi objective optimization avoids a direct aggregation of di erent potentially con icting objectives and as it will be shown in our empirical evaluation it allows developers to evaluate di erent possible solutions that optimize speci c objectives or achieve a compromise between two or three of them accounts for multiple screens and the duration of time they are displayed.
since a gui consists of multiple screens it is particularly important to optimize colors for screens that are used longer in typical usage scenarios while screens that just appear for few moments may have lesser contribution to the overall energy consumption.
this is accounted for in the gemma s energy objective function produces pleasant and consistent color combinations.
in addition to energy consumption and contrast this is the rst approach taking gui design principles at least in terms of choosing colors into account.
first for the color palette generation we combine the original color scheme in an app with three models based on color theory harmonies.
then gemma generates compositions such that if two or more components have a given color say yellow in the original palette they will appear with the same color say blue in the proposed solutions so to avoid producing inconsistent guis.
finally as mentioned before the multi objective optimization has a third design related objective aimed at choosing colors that are not too distant from the original ones.
to validate the quality of the color schemas recommended bygemma we used it to generate optimized guis for free apps available in google play and for ve commercial apps developed by italian companies.
the colorfulness of the guis derived for the apps was evaluated by mobile apps users in an online survey also we interviewed developers and managers from italian companies to gather their feedback concerning the guis generated by gemma for their apps.
overall gemma has been evaluated across three dimensions i the ability to optimize the three objectives ii the extent to which potential users consider the choices of colors acceptable enough and iii the extent to which the original developers of commercial apps would be willing to account for gemma s recommendations.
.
optimizing energy consumption of guis with gemma this section describes gemma a multi objective searchbased optimization technique that suggests possible color alternatives achieving a tradeo between three desirable and possibly con icting objectives i reducing energy consumption on oled displays ii increasing contrast betweenadjacent gui elements and iii preserving a consistency in the color usage with respect to the original design i.e.
proposing color schemas that are close to the one adopted by developers in the original app s gui .
in addition to nearly optimizing the objectives mentioned above gemma can also verify that the proposed guis satisfy some speci ed constraints.
for instance the current implementation of gemma does not consider guis color schemas as valid in which adjacent elements have the same color or colors having a very low contrast between them in order to promote the readability of the recommended guis.
to solve the optimization problem rst we obtain a power model of the corresponding display relating pixel colors to power consumption section .
.
then we identify gui elements composing each screen section .
.
finally we de ne a multi objective genetic algorithm ga aimed at nding near optimal solutions to the stated problem section .
.
.
estimating the power consumption the power consumption of oled screens can be estimated by using the color components of each pixel .
according to the speci c pixel matrix of the screen each color in a pixel is rendered by using a combination of red green andbluesub pixels at di erent levels a.k.a.
intensity in the standard rgb srgb color model.
in the case of oled screens the power consumption of sub pixels depends on the color component level.
the power consumption of an oled pixel is a linear function of its linear rgb values i.e.
the gamma decoding result from its values in the standard rgb space .
therefore given a power pro le phcolori level that returns the power consumption of a color level the power consumption of a pixel in the positionhx yiwith color x yand components red green andblue is estimated as in equation and the total power consumed by the screen when painting a gui is the sum of pixel power consumption over all the x ypixels in the screen equation .
p color x y phri rx y phgi gx y phbi bx y tp gui xx x 1yx y 1p color x y the power pro le of the color components represented by thephcolorifunctions is screen speci c. in fact this characteristic of the oled screen has been exploited before to build power models that estimate the consumption of guis .
in our case we built the power model for a super amoled screen pixels in a samsung galaxy s4 by using a monsoon power monitor .
to de ne each phcolorifunction we measured the current drawn by the screen when painting it with all the pixels set to black i.e.
idleperiod during seconds and full screen with all the pixels set to the same primary color component for eachlevel2 during seconds i.e.
measurement period .
we are not considering the e ect of the screen brightness consequently we set the display brightness to the maximum value.
for both idle and measurement periods we computed the average current of a pixel dividing the raw value measured with the power monitor by the total number of pixels in the screen .
after collecting all the values we subtracted the current in idlekfrom the current in the corresponding measurement kto account only for the current drawn by the screen pixels.
finally we removed noise by using the tukey s smoother implemented in r .
.
.
.
.
.
.
color levelavg current ma linear rgb p r .23x .
p g .97x .
p b .40x .
figure current ma consumption models for primary colors of the galaxy s4 super amoled screen in linear rgb color space.
to derive the power model we followed the same procedure previously adopted in .
with the measurements representing the power pro le of a primary color in srgb we transformed the intensities to linear rgb and then we found the linear function describing the power consumption .
the linear rgb simpli es the construction of the model without loss of information .
with the power models using as input the color intensities in linear rgb it is possible to estimate the current drawn by all the pixels in the galaxy s4 amoled screen when a speci c gui is painted by using equation .
the model in fig.
shows current measurements in ma milli amperes the current is proportional to power watts because the voltage is constant during the measurements thus there is no need to plot the results in terms of watts.
these measurements are consistent with the ones by dong et al.
for oled screens.
.
extracting color composition from guis using the power model to estimate the power consumption of guis requires extracting pixel based representations of the guis.
this extraction can be done online when the target guis are displayed on the device s screen or o ine by relying on screenshots or server side code .
the representation is usually the gui based color histogram or a set of tuples hpixel red level green level blue level i. gemma relies on dynamic analysis of an app to extract gui based information since the gui is shown on the device or emulator and the android view server running on the device can be queried to collect features of the gui components such as location dimensions text and component s hierarchy.
with this information available the extraction can be focused on detecting the color scheme i.e.
individual colors and composition instead of detecting shapes representing gui components.
moreover the information provided by theview server allows us to distinguish components with images components with without text and containers.
this is particularly important to avoid transformation distortion of images logos that belong to the gui or even to third parties.
in terms of representation gemma extracts bag of colorpixels bocp and bag of color components bocc of android app guis.
a bocp is a collection of pixels with the same color in the gui and a bocc is a collection of components having pixels with the same color in the gui.
the bocps boccs extraction procedure starts with getting a snapshot of the current gui in the device and the components in the gui by querying the view server with theui automator utility in the android sdk.
the snapshot contains an xml based representation of the gui hierar chy including location type dimensions and text for each component and a screenshot of the gui.
to identify the representative colors of each component we used a clusteringbased quantization on the color histogram of the component.
only components di erent from imageview and imagebuttonwere considered.
pixels belonging to each component are detected by traversing the gui hierarchy in a bottom up fashion i.e.
deepest level is processed rst.
a pixel in the screen is assigned to only one component and the priority for this assignment is based on the depth of the gui hierarchy.
these heuristics allow assigning pixels according to the zindex in the gui if there are components inside a container the pixels are rst assigned to the components and then the leftover pixels are assigned to the container.
the set of pixels assigned to a component container are then used to derive a color histogram.
top kcolors i.e.
centroids are detected in the histogram of each component while avoiding gradients and font shadows.
for that gemma traverses the sorted histogram from high to low frequency looking for changes in the contrast ratio higher than a threshold r. for instance let us assume a text edit component with dark gray gradient background and white fonts a lot of grays will surface at the beginning of the sorted histogram and then white will appear.
however the contrast ratio between the grays is going to be low close to one and the ratio between grays and white is going to be higher.
thus the top color in the histogram is the centroid for the rst cluster then a new cluster is detected when the contrast ratio is higher than r. this procedure is applied until kcentroids are detected.
the values we adopted for kandrare reported in section .
.
finally the colors of the gui components are discretized i.e.
color quantization using the color centroids in the histogram.
it means that the pixels are assigned the closest quantized color i.e.
color centroid to the original pixel color.
the bocps is a hash map structure for all the pixels in the gui in which the key is a quantized color color and the value is a list of pixels assigned to that color.
the boccs is a hash map too in which the key is a quantized color color and the value is a set of the components associated with the pixels in bocps .
.
multi objective optimization model in the following we describe the ga component in gemma .
the values we use for the ga parameters are reported in section .
.
the ga has been implemented using jmetal .
representation .
our representation contains a gene for each bocp i.e.
each gene will de ne the color to all the pixels assigned to that bocp.
we indicate a generic solution of our optimization problem as s and withs we denote the color this solution assigns to the i thbocp.
multi objective genetic algorithm.
rather than evaluating each solution according to a single tness function a multi objective ga produces frontiers composed of pareto optimal solutions.
a solution xis said to be paretooptimal if and only if it is non dominated by any other solution within the search space i.e.
if and only if no other solutionyexists which would improve one of the objective functions without worsening other objectives.
all the solutions that are not dominated by any other solution are said to form a pareto optimal set while the corresponding objective vectors containing the values of the objective functions are said to form a pareto frontier .
identifying a paretofrontier is useful because the software engineer can use the frontier to make a well informed decision that balances the trade o s between the di erent objectives.
in our context one could select color choices achieving the lowest energy consumption having the highest contrast being the closest to the original design or a compromise among these objectives.
the speci c multi objective ga we use for gemma is the non dominated sorting genetic algorithm nsga ii .
nsga ii tries to ensure diversity in the evolving populations to avoid the situation where populations have been lled only with dominating solutions because of the elitism e ect i.e.
best solutions are preserved .
initial population generation.
the initial population of each ga execution uses a color palette composed of colors including mcolors from the bocps white black a palette in equidistant color harmony with m 3colors a monochromatic palette of m colors with di erence in saturation and brightness and the equidistant harmony palette but with random saturation and brightness for each of the colors.
the starting point of the equidistant harmony and monochromatic palette i.e.
initial values for the tones are randomly selected.
our choice for a diverse palette that include equidistant harmonies and monochromatic scale is to provide the ga with colors that can drive it to producing visually appealing guis.
equidistant harmony is the rule for color composition in the hsb hsv hue saturation brightness value color space that derives a color palette with the same saturation and brightness but modulating the tone i.e.
hue by taking proportional spaces in the hsb hsv color wheel.
because the tone in the hsb hsv space varies from to and each integer value corresponds to one color e.g.
is red is green and is blue equidistant colors can be derived by dividing the hue space in a target number of colors.
for instance an equidistant harmony of colors i.e.
a di erence of between each color starting at and xed values for saturation sand brightness b would beh10 s bi h28 s bi h46 s bi ... h334 s bi h352 s bi.
equidistant harmonies can also derive into palettes with value and saturation contrast by changing randomly the saturation and brightness of the colors in the original equidistant harmony.
monochromatic palettes can be generated by using the same hue but varying the saturation and brightness randomly.
in the three composition schemes we used a brightness range to avoid colors that are too bright or too dark.
genetic operators.
in order to evolve ga individuals we use selection crossover and mutation operators.
the crossover operator is the one point crossover.
given two parents a one point crossover cuts them i.e.
the array of bocp in a random position p and then all genes after positionpare exchanged to produce the o spring.
crossover is applied to individuals of the population with a probability pcross.
the mutation operator is the uniform bitip mutation that with probability pmut changes the color for one bocp to a di erent color randomly selected from the palette.
the selection operator is the binary tournament selection operator described by deb et al.
for nsga ii .
a binary tournament selection holds a competition between two solutions selecting the rstly ranked one with a probability p and the second one with probability p p .
fitness functions and constraints.
let us consider an app having nsscreensscr wwithw ns.
for eachof these screens let us assume that it has been estimated that on average the h th screen is being displayed for a percentage pthof the total application usage time.
such estimates can be obtained by pro ling application usages and are needed so to prioritize low energy consumption on screens that are displayed for a long duration of the overall usage time.
that is having bright colors on a splash screen appearing for a few seconds is not as crucial as having them on the main application gui.
now let us also assume that each screen has a x yresolution and that given a pixel in positionhx yiof the screen h the function b x y h returns the index of the bocp that the pixel belongs to.
therefore given a ga individual solution s the color that such a solution assigns to a pixel hx yiin screenhiss .
the rst tness function to be minimized is the energy consumption fitness ecf .
given a solution s it computes its estimated consumption per unit of time based on equation as in the following ecf s nsx h 1ph xx x 1yx y 1p s whereecf s sums the estimated power consumptions of all the pixels in all the screens weighting them for the estimated fraction of time phfor a particular screen in use.
the second tness function to be maximized is the contrast tness cf which relies on the gui model extracted as explained in section .
.
let us consider that each screen h is composed of nchcomponents ci h theadj ci h function returns the set of adjacent components to ci h andbc ci j returns the bag of pixels to which the component belongs.
tcon ci h x cj h2adj ci h con s s cf s x hnchx i 1tcon ci h that is cf s sums for each screen the contrast between each component ci hin the screen hand all its adjacent components cj h2adj ci h using the function con a b that returns the contrast between two colors aandbusing a formula de ned by w3c con a b reda green a bluea redb green b blueb the third tness function to be minimized is the design tness df and it aims at producing guis with a set of colors that are close to the ones used in the original design.
basically while it can be acceptable to swap colors with respect to the original design e.g.
to use the darker color for the background and the brighter color for the text or for small components or to have relatively similar colors changing completely the palette might result in a gui with a choice of colors deviating drastically from the designer s intention.
for this reason the idea behind the third tness function for a solution sis to use the distance between each colors insand the closest color or in the original palette.
to compute the distance between two colors aand b we use according to existing literature the euclidean distance along the green red and blue components of the color.
given d a b the distance between two colors aandb andor color is a function that given a color returns the closest color in the original palette color ifboccs boccs otherwise df s nx i s d s or s namely for each color in s df s sums the distance to the closest color or s according to a penalization factor de ned by equation .
the rationale here is that we want to penalize twice color di erences when they occur on the same components i.e.
same bocc though this can be a con icting objective with respect to the ecf s .
therefore if the color s is used in sfor the same set of components with coloror s in the original design the distance is penalized twice.
besides the three tness functions we also de ne a constraint aimed at avoiding solutions with low contrast.
specifically we consider one constraint violation every time there is a pair of adjacent components ci h cj h when con s s cnth wherecnth is a contrast threshold.
constraints are handled using the mechanism de ned in nsga ii .
constraint violations in uence the binary tournament selection and this is done using an additional domination principle named constraint domination.
namely i feasible solutions not violating any constraints are ranked better than infeasible ones ii feasible solutions are ranked in terms of the objectives dominance and iii infeasible solutions are ranked based on the number of violated constraints.
as a consequence of the latter point solutions violating constraints are not necessarily discarded but for the sake of diversity they survive.
clearly once the resulting pareto front has been obtained when the evolutionary algorithm stops solutions violating constraints are discarded in case they are still present.
.
empirical study design the goal of the study is to evaluate gemma in terms of i the energy savings that could be achieved by running android apps when adopting the gui color design recommended by gemma ii the colorfulness of the guis that gemma produces as assessed by mobile apps users and iii gemma s suitability in an industrial context when applied to minimize gui energy consumption of existing commercial apps.
the context of the study consists of apps from the google play and f droid markets mobile app users and three software companies for a total of three project managers involved .
the quality focus is the e ectiveness of gemma in producing guis aimed at reducing the energy consumption of android apps while also keeping a visually attractive color composition and ensuring su cient contrast.
all the materials used in our study are publicly available in our replication package .
.
research questions in the context of our study we formulated the following three research questions rq rq to what extent is gemma able to optimize the gui energy consumption contrast and design objectives?
this rq aims at investigating the e ectiveness of gemma in reducing the energy consumption of the apps guis while keeping a high contrast between its underlying components and staying as close as possible to the original design.
suchinvestigation is merely performed in terms of the metrics used to compute the tness functions de ned in section .
rq are the color compositions generated by gemma visually attractive as perceived by android users?
this rq focuses on the colorfulness of the guis generated by gemma as it is perceived by humans instead of being evaluated in terms of metrics.
in visual aesthetics colorfulness is the factor used to evaluate elements related to individual colors and compositions .
we do not focus on the whole concept of visual attractiveness a complete appraisal of visual aesthetics should include other facets such as simplicity diversity and craftsmanship that are related to the gui layout and design concepts .
therefore we focus on the colorfulness only because gemma only generates alternative color schemes and keeps the gui layout intact.
rq would actual developers of mobile applications consider changing colors in an app as recommended by gemma ?
for an approach like gemma a successful technological transfer is the main target objective.
in the context of this research question we investigate the industrial applicability ofgemma with the help of three software companies developing android apps.
note that our three research questions have a high degree of complementarity in gemma s evaluation.
the rst two research questions quantitatively analyze the e cacy ofgemma in producing energy saving gui color schemas while still keeping those guis visually attractive for the apps users.
these two aspects are then qualitatively investigated in an industrial context in our rq .
.
context selection the list of the apps considered in our study is reported in our replication package .
it is worth noting that while all apps have been used in the context of the rst two research questions the investigation performed in the software companies i.e.
rq is clearly limited to the set of ve apps they developed and provided to us for the study.
as for the remaining apps considered in our study we targeted a diverse set of apps in terms of domain categories.
two of the authors inspected google play and f droid to randomly select a set of native apps i.e.
non html based to use in the context of our study.
the selected set of apps cover ten categories e.g.
productivity weather etc.
.
in the context of our rq we involved app users2 asking for their opinion about the look and feel of the guis generated by gemma .
since rq 2only aims at assessing how visually attractive the generated color schemes are the only requirement we had for participants is to have some basic experience with mobile apps.
as for rq we involved three italian companies namely genialapps next and ideasoftware that provided us a total of ve apps to use in the context of our study.
all the companies have a multi year experience in mobile apps development and each of them count between ten and developers.
as it will be detailed later we performed semi structured interviews with people from these companies with the aim of gathering qualitative feedback about the guis generated by gemma .
in particular two project managers from genialapps and next and one developer from mediastudio participated in our study.
2including bs ms and phd students industrial developers professional graphical designer and others .
data collection to answer our rqs we applied gemma on the apps in order to generate color schemas for guis.
as explained in section gemma is able to work on multiple guis of the same app.
since each of the apps includes a speci c number of di erent guis or gui states for the sake of consistency in our data analysis we decided to consider three guis per app as the objective of gemma s optimization process.
in particular we always consider the main gui of the app i.e.
the one visualized when the app is launched on the device plus two randomly selected gui states.
we used the following settings for gemma3 extracting color composition from guis section .
k to extract three di erent colors from each gui component background text or second main color and the third color for the border.
as for the contrast ratio r we found .
to be a common lower bound for the contrast between colors in borders and background as well as background and text in the android apps considered in our study.
ga parameters section .
pcross pmut jbocpj wherejbocpjis the number of bags of pixels identi ed in a gui.
such parameters were the default ones in jmetal we at least checked whether a lower crossover rate or higher mutation did not produce better results than ours.
the other choices were population size and ga number of evaluations larger populations and higher number of evaluations did not produce better results .
finally we set the minimum contrast ratio between adjacent components cnth to as we found this value to be su cient to ensure readability of a text over a background.
for each app i.e.
for each of its three considered guis we run gemma times to account for the randomness of the multi objective ga .
at each run we stored for each solution in the pareto front respecting the contrast ratio constraint see section as well as for the original color schema of the app i its energy consumption ecf function ii its contrast ratio cf function and iii its distance from the original design df function see section .
to answer rq 2we designed an online survey aiming at collecting the participants opinion about the aspect of the guis generated by gemma .
we wanted to verify if the energy saving guis generated by gemma are also attractive in terms of colorfulness.
the rst part of our survey included three questions aimed at gathering information about the background of the study s participants.
the second part of the questionnaire asked participants for their feedback about the colorfulness of the original apps guis as well as of those recommended by gemma .
since gemma provides as output a set of solutions i.e.
all those in the pareto front respecting the contrast ratio constraint and that we rungemma times on each app we needed to make a selection of the recommended guis to be shown to the survey s participants.
for each of the apps involved we showed to participants i the original three selected guis ii the gemma s solution having the lowest energy consumption across those generated in the executions and iii the gemma s solution having the median energy consumption across those generated in the executions.
thus for each app a participants examined in a single page of the survey three sets of guis each one containing 3due to space limitations we explain how we chose the settings without reporting calibration details.a di erent color schema for the three guis selected for a. for each of them participants had to answer the following questions from the colorfulness evaluation as suggested by moshagen and thielsch is the color composition visually attractive?
do the colors match?
is the choice of colors botched?
and are the colors appealing?
the possible answers for each question were presented with a four point likert scale absolutely not more no than yes more yes than no absolutely yes .
each participant evaluated the colorfulness of ve apps in order to reduce the participants workload.
speci cally we created ve groups of apps and we assigned round robin each participant to a speci c group aiming at balancing the number of evaluations for each app.
given the participants to our study each app has been evaluated by at least participants.
all guis for the same app were shown in the same page to allow an easy comparison between the di erent guis by participants.
the order in which the apps were evaluated by the participants was randomized as well.
finally note that none of the participants was aware of the experimental goals nor which of the guis in each page was the original one.
to address rq 3we conducted semi structured interviews with the project managers of the three involved companies.
the interviews lasted for two hours with each company.
given that we had su cient time available and only a few apps for each interview for each app we showed the whole set of solutions provided by gemma in a single run i.e.
the run among the we executed that provided the largest set of solutions.
this choice was made in order to have a larger set of alternative designs to discuss with the companies.
we accompanied each of the shown solutions with information about its energy consumption and potential saving with respect to the original design.
during the interview for each solution we asked the participant to answer the following question given the energy saving provided by this design with respect to the original design would you adopt it in your app?
using a score on a four point likert scale absolutely no no yes absolutely yes.
in addition we also asked questions to understand the principal reasons why the participants liked or not the suggested colors and which are the components for which the participants noticed a poor choice of colors.
the interviews were conducted by one of the authors who annotated the provided answers as well as additional insights about the gemma s points of strength and weakness that emerged during the interviews.
.
data analysis to answer rq 1we show boxplots of the energy consumption the contrast ratio and the distance from the original design measured as reported in section obtained by runninggemma times on each app.
we report such information for six categories of solutions having the lowest and the median energy consumption having the highest and the median contrast ratio and having the lowest and the median distance from the original design i.e.
six solutions for each run .
we statistically compare the energy consumption and the contrast ratio of the generated solutions with those of the original design of the considered apps by using the wilcoxon test .
the results are considered statistically signi cant at .
since we perform multiple tests the original gui of each app is compared against di erent categories oftable ecf and cf wilcoxon test adjusted pvalues and cli s delta d .
test adj.
p value d ecf original design vslowest ecf .
.
large original design vsmedian ecf .
.
large original design vshighest cf .
.
medium original design vsmedian cf .
.
large original design vslowest df .
.
large original design vsmedian df .
.
large cf original design vslowest ecf .
.
negligible original design vsmedian ecf .
.
medium original design vshighest cf .
.
large original design vsmedian cf .
.
medium original design vslowest df .
.
small original design vsmedian df .
.
medium generated guis we adjust our p values using the holm s correction procedure .
we also estimate the magnitude of the observed di erences by using the cli s delta or d a non parametric e ect size measure for ordinal data .
cli sdis considered negligible for d positive as well as negative values small for d medium for d and large for d .
as for rq we must rstly note that our goal is not to determine whether guis recommended by gemma are considered more attractive than the original guis but rather whether they are acceptable enough and to know what is the price to pay in terms of visual aesthetics for the energy saving solutions provided by gemma .
to this aim we report boxplots of the ratings assigned by participants to the colorfulness of the di erent categories of guis.
also we statistically compare the ratings assigned to the original guis of the apps to those assigned to generated solutions with lowest and median energy consumption by performing the same statistical analysis used in rq .
finally for rq 3we qualitatively discuss the outcomes of the semi structured interviews.
.
study results this section reports the analysis of the results for the three research questions formulated in section .
.
rq to what extent is gemma able to optimize the gui energy consumption contrast and design objectives?
boxplots in fig.
show the distribution of values for the three tness functions described in section .
exhibited by the original design4and by solutions in the pareto front obtained at each gemma s run having the lowest ecf median ecf highest cf median cf lowest df andmedian df .
in addition table reports the results of the wicoxon test adjusted p values and the cli s de ect size.
we compared the values for the ecf energy consumption and cf contrast ratio tness functions between the original designs and the di erent categories of solutions considered in this research questions.
the design achieving the best value for a tness function i.e.
the lowest value for ecf or the highest value for cf is highlighted in bold for each test.
fig.
a highlights that the design solutions generated bygemma have a lower energy consumption as compared to the original design.
in particular picking on each pareto front the solution having the lowest value for ecf ensures a mean energy saving of median .
in other words 4for the original design there is no value for the df since this tness function re ects the distance of the color schema of a solution from the original design.the most energy e cient colour schemas recommended by gemma consume on average one third of the original color design.
interestingly enough the other categories of solutions proposed by gemma and considered in this research question o er a substantial energy savings as compared to the original design.
for instance the solution ensuring the highest contrast level between the gui components highest cfin fig.
o ers a mean energy saving of median with respect to the original design.
the statistical comparison in terms of energy consumption ecf between the original design and the solutions proposed by gemma top part of table always highlight a statistically signi cant di erence in favor of the gemma s solution accompanied by a large e ect size for all categories of solutions but the one ensuring the highest contrast level medium e ect size .
the results in fig.
b highlight that besides ensuring a lower energy consumption the color schemas recommended bygemma also help in improving the contrast ratio between the gui s components i.e.
higher values for the cf function .
the gemma s solutions providing the best contrast ratio are able to obtain a mean improvement of the contrast of median .
it is surprising to see howgemma s solutions having the lowest energy consumption are able to improve the contrast of the original design mean median .
while this result does not ensure the pleasantness of the color schemas generated by gemma this aspect is investigated in rq 2andrq at least it should ensure the readability of the generated guis i.e.
high contrast between the guis components .
the results of the statistical test bottom part of table show that the contrast ratio ensured by the gemma color schemas is signi cantly higher with respect to the original ones.
the effect size ranges between negligible for the solutions ensuring the lowest ecf values and large for the solutions having the highest cf .
while the negligible e ect size achieved for solutions in the lowest ecf group might seem like a negative result it is worth noting that such color schemas are able to achieve a mean reduction of energy consumption of while also being able to improve its contrast ratio even with a negligible e ect size .
an example of a solution generated by gemma for one of the subject apps in our study is shown in fig.
anked by the original design left side .
the proposed solution o ers energy consumption savings of up to as well as an increase in terms of contrast ratio by .
finally by looking at fig.
c it is interesting to understand what happens to the df tness function.
remember that this function equals zero when the evaluated solution i.e.
color schema exactly matches the original design.
in all categories of solutions we selected and reported there are solutions having zero as value for df as visible by the lower whisker of the boxplots touching the zero value .
this indicates that df function in gemma lets the ga search for solutions that very close to the original design.
rq are the color compositions generated by gemma visually attractive as perceived by android users?
boxplots in fig.
show the distribution of answers for the visual aesthetics related questions from the participants.
the boxplots summarize the answers regarding the original design lowest ecf and median ecf solutions of the considered apps.
in addition table reports the results of the wicoxon test adjusted p values and the cli s d e ect size.
fig.
highlights that the solutions generated originaldesignlowestecfmedianecfhighestcfmediancflowestdfmediandf010000300005000070000cf originaldesignlowestecfmedianecfhighestcfmediancflowestdfmediandf0200400600800100012001400ecf energy consumption fitness ecf originaldesignlowestecfmedianecfhighestcfmediancflowestdfmediandf0400600 a contrast fitness cf originaldesignlowestecfmedianecfhighestcfmediancflowestdfmediandf02000040000 b lowestecfmedianecfhighestcfmediancflowestdfmediandf010002000300040005000df design fitness df lowestecfmedianecfhighestcfmediancflowestdfmediandf020004000 c figure boxplots of ecf cf and df for the original design and for solutions provided by gemma .
original designgemma s lowest ecf solution figure original design vsgemma s solution.
bygemma have a cost in terms of visual aesthetics as perceived by end users.
answers from the participants to the colorfulness factor described by the four questions presented in section .
show a low evaluation for the solutions with the lowest ecf i.e.
the one saving the maximum amount of energy .
although end users do not totally dislike the lowest ecf solutions the di erence with the original design is statistically signi cant with a large medium e ect size.
by looking at the comments left by participants and justifying their low ratings for the solution having the lowest ecf it appears clear that most of them simply do not like guis having dark colors as main base black backgrounds can look very good but not when there is a lot of text i prefer other colors than black for the mobile applications .
instead participants found the median ecf solutions more visually appealing than the lowest ecf ones.
the di erences reported between the original designs and the median ecf solutions are small for the investigated colorfulness factors.
indeed fig.
highlights how the median and average answers for the four questions are close when comparing the original designs with the median ecf solutions.
this is also con rmed by the statistical analysis reported in table while there is a signi cant di erence in the participants ratings in favour of the apps original design when comparing it with the median ecf solutions such a di erence only results in a small e ect size.
remember that as shown in the context of rq solutions having a median originaldesignmedianecf1.
.
.
.
odleme1234is the color composition visually attractive?
originaldesignmedianecf1.
.
.
.
odleme1234do the colors match?
originaldesignmedianecf1.
.
.
.
odleme1234is the choice of colors botched?
originaldesignmedianecf1.
.
.
.
odleme1234are the colors appealing?
a b c d figure rq boxplots of answers provided by participants.
od original design le lowest ecf me median ecf.
table rq wilcoxon test p value and cli s delta d .
test adj.
p value d is the color composition visually attractive?
original design vslowest ecf .
.
large original design vsmedian ecf .
.
small do the colors match?
original design vslowest ecf .
.
large original design vsmedian ecf .
.
small is the choice of colors botched?
original design vslowest ecf .
.
small original design vsmedian ecf .
.
small are the colors appealing?
original design vslowest ecf .
.
large original design vsmedian ecf .
.
small ecf are still able to achieve a substantial energy savings with respect to the original design on average .
this illustrates gemma s ability to balance multiple objectives i.e.
generating energy saving guis that use colors close to the original composition and being accepted by end users.
rq would actual developers of mobile applications consider changing colors in an app as recommended by gemma ?
in the following we report the results of the interviews we conducted with project managers of three italian companies aiming at analyzing the practical applicability of gemma in a real development context.
as explained in section .
we asked the participants to answer the following question given the energy saving provided by this design with respect to the original design would you adopt it in your app?
using a score on a four point likert scale absolutely no no yes absolutely yes.
next .
the rst person we interviewed was nicola noviello the project manager of next.
such a company provided us with two apps namely bollate and petrella .
the two apps are from the category places and travels and providetourist with information on two italian towns.
before starting the interview nicola con rmed that gemma might have a high practical applicability even if it would be important to assess which percentage of the overall app energy consumption is actually amenable to its gui and thus could be optimized by gemma .
this is something we plan to explore more in the future.
as for the evaluation of the solutions provided by gemma for the bollate app we showed to nicola eleven design alternatives asking him if he would adopt them in his app.
none of them was considered acceptable answer absolutely not despite the average energy saving around .
the reason why nicola discarded such alternatives is represented by the color of the background.
all the alternatives provided by gemma had a black background.
in the context of nicola s experience it is hard to make attractive an interface with a black background .
speci cally nicola claimed that he uses a black background only if it is explicitly required by the customer.
otherwise he designs apps with more vivid colors even if he recognized that this could negatively impact the energy consumption of the app.
this suggests an interesting future direction to explore i.e.
usage of interactive gas where the developer can be integrated in the evolutionary loop and set personalized constraints e.g.
do not use this color for this component during the generation of solutions.
the results were di erent for the petrella app.
among the ve di erent alternatives nicola considered three as good alternatives to the original design claiming that he would consider their adoption answer yes .
it is worth noting that the solution considered the best by nicola is also the one that provides the highest energy savings .
for this app nicola particularly appreciated the recommended solutions due to their high similarity with the original design.
this characteristic allows obtaining substantial energy savings just by performing small adjustments to the original gui.
in addition nicola claimed that even if the colors of these alternatives are less vivid than the original design i believe that the proposed combinations with some smalls adjustments will make the app attractive .
genialapps .
the second person we interviewed was giuseppe socci the project manager of genialapps.
the app that they provided was sing happy birthday songs hbs which has around ratings on the google play market and a number of installations between 100k and 500k.
the app is from the category music and songs and it can be used to send happy birthday wishes with a personalized phone call.
giuseppe was particularly interested ingemma .
he claimed that such an approach might have an high industrial impact.
we provided him with a set of di erent alternatives.
among them were discarded as not adoptable as alternative to the original design answer absolutely not .
the reason why giuseppe did not like those alternatives is that the colors are too dull and in a joyful app like hbs colors must be vivid .
the other alternatives were considered good ones with three of them gathering an absolutely yes to the posed question see section .
.
one of these three solutions provides an energy savings of .
such an alternative again with some small adjustments was considered by giuseppe an excellent solution for his app.
during the interview giuseppe also pointed out an important issue that approaches like gemma should take into account.
gemma is particularly useful for apps that are used for a rather long period of time e.g.
social network app .
although it is true that many drops make the ocean original designgemma s lowest ecf solution figure ideasoftware app original design vs gemma s solution excerpts .
and therefore in our case many apps not optimized used for a short time still consume a lot of energy it is also true that developers are not very likely to change the gui aiming at saving battery.
the reason is that this non functional requirement is quite di cult to sell unless the app is used for rather long time periods and thus the customer has a tangible evidence of the energy saved.
this consideration is perfectly inline with our weighted model for power consumption in which we give more importance to screens that are used more.
as well as nicola giuseppe is also interested in the actual impact that the colors of the gui have on the overall energy consumption of the app .
he also pointed out that in the case of hbs since it has a lightweight logic the server is in charge of the application logic i suppose that the in uence of the gui is considerable .
ideasoftware .
the last person we interviewed was luciano cutone co founder and the project manager of ideasoftware.
the company requested to anonymize both of the apps that they provided for our study.
in the following we refer to such apps as app1 and app2.
both apps have thousands of installations on the google play market.
luciano was particularly interested in gemma that he de ned as a tool that should be integrated in an ide and used daily .
this con rms the high industrial impact that gemma might have.
as for app1 we provided to luciano a set of di erent alternatives.
among them were not considered acceptable answer absolutely not by luciano because the combination of colors was not exciting .
the other solutions were instead considered as good alternative to the original design answer absolutely yes .
luciano particularly liked one solution that is reported compared to the original design in fig.
.
due to the need for anonymization we only report a portion of the original and recommended guis.
luciano claimed i would de nitively use this combination of colors in my app.
the nal result is excellent and i really like the e ect of the gui with a black background.
this helps in saving battery and makes the app more elegant.
i will propose the new combination of colors for the next release of the app .
such a consideration highlights di erent points of view by luciano and nicola about black background emphasizing that the choice of colors is subjective and as mentioned before an interactive version of gemma could be worthwhile.
for the app2 we only provided three different solutions.
in addition the average energy savings for such solutions is around due to the already energy e cient original design.
indeed as pointed out by luciano when designing the gui the developers used low bright colors in order to i make the app more professional and ii save the battery of the phone since the app was designed to be used continuously during the day.
such considerations con rmed that the energy consumption is a problem relevant for industry when the app is used frequently.
nevertheless among the three solutions luciano classi ed two of them as good alternatives answer yes .
.
threats to validity threats to construct validity concern the relationship between theory and observation and in this work are mainly related to the measurements we performed in our study.
one major threat is that the measures of contrast and pleasant design i.e.
thecf s anddf s objectives which we use in the optimization process and quantitatively compare with values of the original colors rq might not represent a proxy of what actually is perceived by users.
rq within its generalizability limitations is intended to mitigate such a threat.
another possible threat is related to the fact that we used power models to estimate energy consumption.
so far such models have been already used in previous studies and considered reliable enough and our models are consistent with the ones by dong et al.
for oled screens.
threats to internal validity are related to factors internal to our study that can in uence our results.
we have used ga settings that are frequently used in the research literature and calibrated the number of evolutions so that longer evolutions did not produce better results.
of course we cannot exclude that a better calibration would produce better results.
last but not least we accounted for ga randomness by executing gemma times .
threats to conclusion validity concern the relationship between experimentation and outcome.
for rq 1andrq as described in section .
we have quantitatively assessed our results using appropriate statistical procedures.
instead rq 3is exploratory in nature intended to collect some preliminary feedback about the practical applicability ofgemma in a real development context.
threats to external validity are related to the generalizability of our ndings.
we are aware that our results have to be interpreted carefully because i they may depend on the speci c device for which we extracted the color power model ii results of rq 2may depend on people s preferences and other people might have di erent opinion on the chosen colors and iii although we applied gemma on di erent apps we are aware than gemma might produce di erent results in terms of energy consumption reduction and colorfulness on a di erent set of apps.
.
related work gemma is mostly related to previous work on energy optimization of guis in mobile apps as well as approaches for detecting energy greedy units in such apps.
.
improving energy consumption of guis oled screens are suitable for optimizing energy consumption of guis in apps because the power consumed by oled screens depends on the combination of color levels in the screen s sub pixels.
therefore power models of oled screens estimate the energy by combining individual consumption of the color sub pixels .
these models are particularly useful since they allow researchers to estimate energy consumption without using expensive power monitors.
thus power models have been used for energy saving visualization of sequential data design of energy adaptive displays and design of color adaptive browsers .
as for mobile apps representative works are the ones by dong and zhong for windows mobile apps li et al.
s approach for mobile web applications and wan et al.
s work on screenshots of android apps.
the three approaches and gemma are compared in table .
while wetable gui based energy optimization in android.
approach opt.
problem color palettes min energy s t similar contrast than in original gui1 prede ned themes monochromatic palette black assigned to most frequent color in original gui then subsets of r g b assigned to the rest of pixels min energy s t keep color distance between neighboring html elementsbackground replaced with dark colors randomly selected colors are assigned to the rest of pixels gemma min energy max contrast min distance to original design s t contrast 4palette contains colors original black white equidistant harmonies and monochromatic palette share with these approaches the goals of minimizing energy consumption through properly choosing colors and using color power models gemma introduces novel aspects related to i multi objective optimization ii considering contribution of di erent screens based on their usage duration and ii ensuring a pleasant and consistent choice of colors.
.
detecting energy bugs in mobile apps energy bugs and energy hot spots in android apps at different granularities have been catalogued extensively.
for instance pathak et al.
describe a taxonomy of energy bugs that depends on the hardware software or external conditions.
kwon and tilevich focused on cloud o oading energy consumption.
pathak et al.
and linares v asquez et al.
reported energy greedy android apis.
hao et al.
and li et al.
identi ed energy greedy apps meanwhile li et al.
focused on energy measurement at code statement level.
liu et al.
detected energy bugs related to misuses of wake locks and sensors.
finally rasmussen et al.
measured the impact of ads in apps on energy consumption.
all the approaches mentioned in this section detect di erent kinds of energy greedy units in the source code yet not speci cally related to the screen usage.
for this reason gemma can be considered complementary to those approaches in other words reducing the energy footprint of mobile apps concerns considering various aspects including among others screen usage and colors.
.
conclusion and future work we presented gemma a multi objective approach for generating energy friendly color schemas for android app guis.
the multi objective optimization balances the energy reduction objective with other objectives related to contrast and closeness to the original design.
gemma successfully generated designs for android apps with signi cant reduction in energy consumption.
while the empirical evaluation highlighted that solutions with the highest energy savings are usually not preferred by endusers mainly because of the dark background gemma still generated solutions that achieve a good energy reduction while being acceptable by end users.
also by evaluating the solutions on ve commercial apps we con rmed that some project managers and developers are ready to account for gemma s recommendations in future app releases.
in the future work we are planning on relying on a more precise approach for reverse engineering app guis which would account for a proper choice of colors for gui elements such as text elds and buttons.
.