synthesizing web element locators kartik bajaj university of british columbia vancouver bc canada kbajaj ece.ubc.cakarthik pattabiraman university of british columbia vancouver bc canada karthikp ece.ubc.caali mesbah university of british columbia vancouver bc canada amesbah ece.ubc.ca abstract to programmatically interact with the user interface of a web application element locators are used to select and retrieve elements from the document object model dom .
element locators are used in javascript code cascading stylesheets and test cases to interact with the runtime dom of the webpage.
constructing these element locators is however challenging due to the dynamic nature of the dom.
we find that locators written by web developers can be quite complex and involve selecting multiple dom elements.
we present an automated technique for synthesizing dom element locators using examples provided interactively by the developer.
the main insight in our approach is that the problem of synthesizing complex multi element locators can be expressed as a constraint solving problem over the domain of valid dom states in a web application.
we implemented our synthesis technique in a tool called led which provides an interactive drag and drop support inside the browser for selecting positive and negative examples.
we find that led supports at least of the locators used in the javascript code of deployed web applications and that the locators synthesized by led have a recall of and a precision of .
led is fast taking only .
seconds on average to synthesize a locator.
keywords program synthesis programming by example element locators css selectors web applications i. i ntroduction over the past few years the number of web applications has exploded.
these web applications consist of three parts namely html code that is used to define the document object model1 dom css stylesheets that are used to define the layout of the web page and javascript code that interacts with and updates the dom tree for the web application.
dom element locators define the rules required to traverse the dom tree defined by the html.
both css and javascript utilize these rules and the information present in the dom tree to interact with the elements present in it.
writing dom element locators is a complex task for developers as they need a mental model of the valid dom elements in each dom state that they want to access and they need to find the common properties that are shared by the elements they want to access to be inclusive but also those that are not shared by any other element in the dom state to be exclusive .
developers typically perform this task by manually inspecting different elements of the dom in the state of interest and formulating dom element locators through trial and error.
this often leads to bugs and inconsistencies.
for example in our prior work we found that of 1the document object model is a cross platform and language independent convention for representing and interacting with objects in html xhtml and xml documents.the client side javascript errors within a web applications are caused by faulty interactions between javascript and dom.
in this paper we present an automated approach to synthesize dom element locators that can be used to select multiple dom elements within javascript or css code.
we leverage program synthesis techniques to convert the problem of dom element locator synthesis into a constraint solving problem.
our technique falls in the category of programming by example pbe which involve generating code based on input output examples provided by the developer in our case the input is provided as positive and negative examples of dom elements.
we devise a mathematical model for translating the examples to constraints that are then fed into a satisfiability sat solver.
the output of the solver is converted back to the dom element locators that can be used as parameters to dom api methods within javascript code.
the synthesized code snippets are then ranked based on programmer provided criteria and presented to the programmer.
these can be used in javascript css code that may be used within the web application to select the relevant dom elements.
our code synthesis technique is implemented in a tool called led live editor for dom .
led has a visual interface that is interposed on the web application allowing developers to interactively provide i.e.
drag and drop examples of dom elements they wish to select in a given dom state.
developers can also augment the input with negative examples to further refine the synthesized code.
led also provides the developers the ability to configure the type of dom element locators such as minimum length maximum length selection scope that they want to generate.
prior work has explored the problem of constructing dom element locators in javascript applications .
however their focus has been on generating selectors for test cases in automated testing frameworks such as selenium.
the main difference between our work and these is that the work on test case generation is concerned with accessing a single element while our work is concerned with selecting multiple dom elements.
this is an important difference as programmers often access multiple dom elements with a single locator as we show later in the paper.
another major difference between led and prior work is that we not only capture the dom elements required by the developer but also the dom elements that the developer does not to select.
to the best of our knowledge we are the first to propose an automated approach for dom element locator synthesis that can select multiple dom elements based on examples provided by the programmer.body......nav globalheader .apple .globalheader js .svg .gloabl header loadedul globalnavli gn ipodli gn macli gn appleli gn storeli gn ipadli gn iphoneli gn itunesli gn search1234567891011fig.
overview of the dom structure for the running example.
our work makes the following contributions a discussion of the problem of synthesizing javascript code that interacts with multiple dom elements in one or more dom states of the web application.
an example based automated approach to analyze multiple dom elements and generate constraints based on the provided examples which are then input to a sat solver.
an implementation of our approach in an open source tool called led.
an empirical evaluation to validate the proposed technique demonstrating its efficacy and real word relevance.
our examination of real world web applications indicate that led can support of the total dom element locators used by web developers.
further developers often write complex locators to choose multiple dom elements.
the results of our empirical evaluation on three web applications show that led can achieve a recall of and precision of with a maximum execution time of .
seconds.
ii.
m otivation in this section we first provide a running example to demonstrate the problems faced by web developers.
we then discuss the challenges involved in synthesizing dom element locators using our approach.
a. running example figure presents the screenshot of a navigation menu from the apple website.
the dom tree structure of the menu is presented in figure .
certain elements and class names have been omitted for the sake of simplicity.
each node within the dom tree represents a dom element.
we use the css selector notation to present the dom tree2.
words proceeded with represent id attributes .
represents classes attributes and words without any prefixes represent the type of dom element.
every dom element will have a type associated with it while class names and ids are optional attributes.
ids are required to be unique within the dom tree and can be used to refer to a specific dom element.
2we use the terms dom element locators and css selectors interchangeably in the rest of this paper.1varelems document.queryselectorall gn store gn mac gn ipod gn iphone gn ipad gn itunes 3for vari i elems.length i 4elems .addeventlistener onmouseover changecolor 5elems .addeventlistener onmouseout restorecolor 8function changecolor change element color here 12function restorecolor restore element color here fig.
javascript code required to perform the sample task table i subset of types of dom element locators available to developers type example description id globalnav select an element with id globalnav .
.class .apple select all elements with class apple .
select all dom elements.
element li select all li elements.
element element ul li select all ul and li elements.
element element ul li select all li elements where the parent is a ul element.
sample task.
assume the user needs to highlight the menu item elements excluding the logo and search box when the mouse hovers over the menu.
solution.
figure shows the javascript code required to perform the given task.
at line we can see that the developer needs to pass a dom element locator as a parameter to the dom api function.
the traditional way of writing dom element locators involves the following steps load the web application navigate to a particular dom state analyze the available dom elements and write a dom element locator using the information attached to each dom element.
b. dom element locators and challenges table i provides a subset of types of dom element locators that can be used by web developers to select the dom elements.
a complete list of types of dom element locators can be found on the w3schools website .
developers can use any of these dom element locators depending upon the type of task as well as the information available in the dom tree.
developers can also use additional information such as class names attached to each element in the dom element locator.
for the running example table ii lists a subset of the possible dom element locators that can be used to select elements in the figure .
however all of the dom element locators are not equally precise and durable.
for example locator points to elements only whereas locators point to additional elements including element and as well.
similarly a dom element locator that includes all selectors along the path from root node to target dom element e.g.
locators is precise but fragile to minor modifications infig.
screenshot of navigation menu from apple website table ii subset of possible dom element locators used to select elements locator locator code locator type count gn store gn mac gn ipod gn iphone gn ipad gn itunes id li element body nav ul li element element body .apple ul li element element body .globalheader js lielement element globalheader ul li element element globalheader li element element globalnav li element element the dom tree.
on the other hand a dom element locator that excludes the hierarchical information and only uses locators attached to target dom element e.g.
locators is resistant to dom tree manipulations but sometimes cannot precisely locate the target dom element.
therefore writing a dom element locator is a nontrivial task and requires a significant amount of effort by the developer.
further since a single web application often involves multiple developers each responsible for different parts of the application the developer needs to carefully analyze and select the elements that she wants to interact with.
this process is time consuming and is a major source of errors for many web applications .
despite all these issues however dom element locators are heavily used by developers to obtain