supermod tool support for collaborative filtered model driven software product line engineering felix schw gerl applied computer science i university of bayreuth bayreuth germany felix.schwaegerl uni bayreuth.debernhard westfechtel applied computer science i university of bayreuth bayreuth germany bernhard.westfechtel uni bayreuth.de abstract the increase in productivity implied by model driven software product line engineering is weakened by the complexity exposed to the user having to manage a multi variant model.
recently a new paradigm has emerged ltered software product line engineering transfers the established check out modify commit work ow from version control to variability management allowing to iteratively develop the multi variant model in a single variant view.
this paper demonstrates supermod a tool that supports collaborative ltered model driven product line engineering implemented for and with the eclipse modeling framework.
concerning variability management the tool o ers capabilities for editing feature models and specifying feature con gurations both being well known formalisms in product line engineering.
furthermore collaborative editing of product lines is provided through distributed version control.
the accompanying video shows that supermod seamlessly integrates into existing tool landscapes reduces the complexity of multi variant editing automates a large part of variability management and ensures consistency.
a tool demonstration video is available here ccs concepts software and its engineering software con guration management and version control systems software maintenance tools keywords model driven software engineering software product line engineering version control ltered editing .
introduction software product line engineering sple exploits commonalities and di erences of related software products in order to achieve organized reuse.
from a multi variant platform speci c products having exactly the functionalproperties desired by a customer may be derived on demand mass customization .
in the last decade sple was combined with model driven software engineering mdse .
in addition to the variability model both the platform and speci c products are represented as well de ned models.
tools and approaches to model driven software product line engineering mdple can be distinguished as follows positive variability is realized by extending a small core realizing only the commonalities of product line members with feature speci c parts.
often model transformations are applied to compose products.
negative variability means that from a multi variant domain model realizing all features at a time those parts are ltered out which are not relevant for speci c products.
typically this has been realized by preprocessor like tools .
while positive variability su ers from requiring specialized transformation languages in addition to the domain language negative variability impedes mdple due to the architectural complexity of the multi variant domain model .
the tool supermod presented in this paper internally relies on negative variability but reduces the aforementioned complexity by having the user working in a single variant workspace i.e.
in one product representatively.
the tool follows the paradigm of ltered mdple adopting the iterative check out modify commit work ow known from version control systems .
it has been implemented for and with theeclipse modeling framework emf .
the variability model is represented as a feature model an established formalism in sple.
the speci c variant to be edited and the set of variants to which the change applies are described by feature con gurations which resolve the variability de ned in the feature model.
supermod addresses two groups of users rst software product line engineers who consider their productivity to be limited by the aforementioned disadvantages of positive or negative variability.
second the tool may be used as an ordinary version control system that o ers variant management capabilities in addition.
supermod s functionality goes far beyond branches which are typically o ered for this purpose .
an agile style of product line engineering is encouraged by an iterative and incremental editing model .
therefore the tool suits product lines in which the variability model may evolve during product development.
subsequently we explain ltered mdple .
in section the tool supermod and its functionalities are presented.
section recapitulates supermod s distinguishing properties demonstrated by the tool video.
section compares supermod with related tools before the paper is concluded.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
ase september singapore singapore c acm.
... .
.
check out .
modify .
commit repository repositorychoice ambition figure a sketch of ltered mdple.
.
filtered model driven product line engineering the paradigm of ltered software product line engineering emerged recently and o ers di erent avors such as partially ltered editing cf.
section .
in this section we characterize our representative of totally ltered editing supermod combines ltered sple with model driven engineering and version control .
as shown in figure the editing model resembles version control.
an iteration consists of three steps first a version to be edited is checked out from a repository into the workspace using a two stage selection process.
in addition to version control where a speci c revision is selected a choice i.e.
a product variant is de ned in the form of a feature con guration which assigns a selection state selected or deselected to each feature.
second the checked out version may be modi ed using arbitrary modeling tools.
in addition the feature model itself is made available for modi cation.
third the performed modi cations are written back to the repository.
they typically a ect a broader set of product variants than only the choice this set is speci ed by the user as the ambition a feature con guration where features to which the modi cations are immaterial may be left unbound.
during commit the contents of the repository are updated automatically inserted deleted elements become visible invisible for variants included in the ambition.
let us reconsider figure at a greater level of detail.
the illustrated iteration refers to a product line of metamodels for graphs having optional features such as weighted directed orcolored .
the metamodel is represented as a uml class diagram.
during check out aweighted and directed variant is chosen such that the workspace is populated with a class diagram that includes among others the attribute weight .
during modify both the feature colored and its realization the class color including an association to vertex are de ned in the feature model not shown and in the product variant respectively.
in the subsequent commit the change is associated only with the new feature colored while all other features remain unbound neither selected nor deselected in the speci ed ambition .
this conceptual overview has highlighted the role of tool support in our approach.
the user interacts with supermod for editing the variability model during modify and for variant selection i.e.
choice ambition speci cation during check out and commit .
while evolving the product during the respective development iterations the user is not occupied with architectural decisions involving variability such as modeling variation points and variants explicitly in the platform but he she may concentrate on the variant provided in the workspace.
thus supermod behaves as non disruptively as an ordinary version control system while o ering a much higher degree of automation concerning variability management.
furthermore the distinction between domain engineering where the platform is developed and application engineering where speci c products are customized is blurred intentionally.
.
tool functionalities this section provides a functionally organized tool description.
in the respective subsections the provided user interface ui commands are described one after another.
as shown in figure the commands have been integrated into a context menu which has been implemented as an eclipse team provider extension1.
supermod is available as a modular set of eclipse plug ins on the update site .
when running in multi user mode supermod requires a server application which may be installed as tomcat servlet using the following web archive .
figure supermod s team context menu.
.
workspace management the workspace presents the currently selected product variant described by the choice represented as eclipse project.
supermod server.war 823figure the eclipse project explorer with an active supermod project.
supermod imposes only few restrictions on the versioned products they may consist of arbitrary emf model resources or plain text les.
for our purely state based approach no tool extensions are required to be supported by supermod.
transparently all versioning metadata are stored in a hidden folder .supermod .
a non versioned eclipse project may be put under version control using the ui command share .
as in ordinary version control systems individual folders and les may then be added to or removed from version control see corresponding ui commands in figure .
in case the user has not decided on whether a le is to be versioned a dialog is shown in the beginning of commit where the user may select deselect les to be added to removed from version control.
the ui command disconnect removes all local version control metadata and retains only the current variant of the project in the local workspace.
for a better overview the active choice is presented in a condensed textual form in the project explorer next to the project name.
furthermore in case an ambition is reserved see below it is also displayed here.
figure shows an example corresponding to the iteration from figure .
.
feature model editor conceptually the feature model is part of the workspace yet physically hidden in the metadata folder .supermod .
for its editing a dedicated ui command edit version space is provided see figure .
once selected the feature model editor cf.
screenshot in figure is opened.
here features may be added or removed toggled mandatory lled circle or optional empty circle or renamed.
furthermore the tree structure may be modi ed arbitrarily and feature groups andrequires excludes constraints may be speci ed.
emf validation ensures that the feature model remains satis able e.g.
that there exist no contradicting requires and excludes constraints.
.
check out update and commit a typical development iteration is embraced by the commands check out and commit .
as shown in figure ui commands are provided for both operations.
this subsection figure the feature model editor.considers the straightforward work ow where the choice is speci ed during check out and the ambition during commit.
however the user may deviate from this by using one of the specialized commands presented subsequently.
having executed the command check out the user is asked to de ne a version of the product to populate the workspace.
since both the primary product and the feature model are subject to historical version control a revision must be selected rst cf.
left hand part of figure column scope displays the ambition used for the respective commit .
then the selected revision of the feature model is presented to the user who must then specify a feature con guration binding all visible features to either true cyan or false orange symbols in the right hand part of figure .
the feature conguration speci cation dialog also ensures that the selected con guration is consistent according to all constraints dened in the feature model e.g.
mandatory features must be selected .
the inconsistency reported in the gure is caused by none of the features undirected anddirected located in an xor group being selected.
figure dialogs for revision and feature con guration selection shown during check out.
figure dialogs for commit message and feature ambition selection shown during commit.
technically the ui command update specializes check out in a non interactive way.
in the revision graph the latest revision is selected in the feature model the current choice is retained.
the ui command commit terminates an iteration and prompts the user for an ambition that delineates the set of versions for which the change representatively applied in the version described by the choice is intended.
as usual in version control a new revision is introduced transparently.
the user is only asked for a commit message see left hand part of figure .
thereafter the feature ambition speci cation dialog appears right hand part .
in addition to 824true and false the value unbound yellow is permitted here signaling that the change is immaterial to the respective feature.
typically few features are bound in order to a ect as many variants as possible.
the dialog ensures that the ambition is consistent and includes the previously de ned choice.
please note that in the editing model realized by supermod the operation check out is optional such that after having committed it is assumed that the user wants to stay in the current variant.
the choice is migrated using the ambition transparently.
following this common assumption from version control systems the work ow becomes even more non disruptive and automated.
.
exporting products to nally deploy products to customers the development loop may be left by the ui command export project .
when referring to sple terms this performs fully automated application engineering .
a revision and feature con guration must be selected by the user the speci ed version is exported into a new eclipse project clear of version control metadata.
.
reserving and amending ambitions as aforementioned supermod weakens the assumption that the choice is always speci ed during check out and the ambition during commit.
first of all the tool may be used in a more conservative way provided by the ui command scope and check out .
here both the ambition and the choice are speci ed already during check out in order to x the scope of the change as early as possible.
after selecting a revision the ambition selection dialog is shown rst thereafter the user selects a representative choice the validation of according consistency constraints is preponed.
the conservative ltered editing model as opposed to the agile work ow presented here was realized by early related work .
second when selecting only a choice during check out or when omitting the check out it is still possible to reserve an ambition at arbitrary points in time during modify .
after selecting the ui operation scope the ambition selection dialog appears.
reserved ambitions are displayed in the project explorer cf.
colored in figure .
during commit the ambition selection dialog is omitted.
last an erroneously speci ed ambition can be corrected using the ui command amend previous commit .
when selected the ambition speci cation dialog shows up where the ambition used for the preceding iteration may be altered.
local repositoryworkspacecheck out commituser a local repositoryworkspacecheck out commituser zremote repositorypull pullpush push figure distributed version control architecture.
figure revision selection dialog in collaborative versioning mode.
.
collaboration being a version control system supermod naturally supports collaborative development .
this has been realized using the distributed architecture shown in figure which resembles git .
each user interacts with a local repository using the commands update and commit see above .
in order to orchestrate multiple copies of the repository the ui commands pullandpush are provided which communicate with a central remote repository.
as a consequence organizational overhead caused by multi user operation is not created at each check out or commit but only at distinct synchronization points de ned by the user s .
the distinction between check out commit and pull push gives rise to the distinction between private and public revisions leading to a two level revision naming scheme public.private .
in multi user mode the revision selection dialog shows additional details see figure .
the private revision counter is incremented after each commit.
complementarily when pushing the current public revision is nalized and a new public revision is started automatically setting the private revision counter to zero.
the public revision counter is organized by the remote repository unambiguously.
.
demonstration the accompanying demonstration video refers to the collaborative development of a product line of graph metamodels cf.
sections and .
two hypothetical users alice and bob are involved alice creates and initializes the product line and develops an initial feature model and platform using multiple iterations.
in particular the root feature graph its children vertices andedges and the optional features weighted labeled and undirected are de ned and realized.
bob connects to the remote repository thereafter.
alice and bob concurrently realize di erent features using disjoint ambitions for their commits bob realizes directed alice focuses on a new feature colored .
synchronization is explicitly triggered by pulland push.
the demonstration video illustrates four important properties of supermod and its underlying approach.
reuse of preferred editing tools.
supermod integrates into existing eclipse based tool landscapes in an unobtrusive way.
for editing the domain model i.e.
the platform familiar single version editing tools may be reused without the necessity of any further tool extensions.
in our example the protagonists employed the emf based uml modeling tool valkyrie .
825reduced complexity.
related approaches and tools dedicated to un ltered product line engineering require to edit and maintain multi variant domain models in connection with presence conditions negative variability or to specify composition rules positive variability both facing the user with a high cognitive complexity.
in contrast supermod provides the user with a single version workspace where the change may be applied without involving multi variant modeling decisions or model composition languages respectively.
the reduced cognitive complexity signi cantly eases collaborative development.
e.g.
the changes performed by bob at and by alice at 41002are independent and integrated later .
automated variability management.
supermod internally relies on negative variability the repository contains a multi variant domain model whose elements carry visibilities denoting in which revisions and variants they are included .
visibilities of a ected elements are updated during commit transparently.
by intention neither the multi variant domain model nor visibilities are shown to supermod users.
however the user is always aware of the current workspace version which is displayed next to the project root cf.
figure .
after each commit the workspace choice is migrated automatically in order to obviate a subsequent check out an example is given at .
consistency control and error correction.
as outlined in section .
the functionalities of reserving and amending ambitions allow for more exibility and reduce potential sources of errors.
furthermore during the choice selection dialog it is ensured that the selection is complete and complies with the rules de ned in the feature model .
further consistency constraints which refer to the satis ability of the feature model and to the syntactical correctness of the product are not subject of this paper.
taken together supermod automatically ensures several consistency constraints that have to be checked manually when relying on explicit variability management as realized by approaches to un ltered sple.
.
related tools this demonstration paper complements a series of previous publications referring to the theoretical foundations of our approach its implementation the underlying development process and collaborative versioning .
with branches many contemporary version control systems e.g.
git o er logical variants to a limited extent.
however they only allow to restore variants that have been committed earlier but not to re combine new variants based on predicates similar to feature con gurations.
a few software con guration management systems have been extended with partial support for sple and vice versa.
the scm system adele has logical variants built into its object oriented data model as symmetric deltas which are exposed to the user.
temporal variability is realized by a versioning layer on top.
conversely in an extension to the sple toolchain biglever is presented that deals with controlling the variability of di erent diverging products.
in both approaches however logical and cooperative versioning are not integrated at the same conceptual level.
the approach presented in relies on explicit historicalversioning of the variability model.
both historical and logical versioning are realized upon a directed delta language for emf models such that for each increment added to the product line a forward delta must be speci ed manually.
to derive a speci c version of the product a revision must be selected for each active feature independently.
in contrast our tool manages symmetric deltas transparently and removes the necessity of specialized editing tools.
the source code centric product line tool cide colored ide generalizes preprocessors using a colored representation to distinguish features.
cide o ers the possibility to temporarily restrict a variational project to views on a speci c feature or variant.
then irrelevant source code fragments are hidden.
the performed changes only a ect the selected feature or variant choice andambition are mutually equal.
similarly the mdple tool feature mapper provides change recording during creation of the multi variant domain model.
all changes are associated with a feature expression derived from the provided feature selection.
however only insertions are supported.
the product line version control system introduced in relies on change propagation at con guration level.
though change propagation as opposed to state based versioning requires deep integration into the toolchain.
moreover a solution for semi automatic backward propagation of product speci c changes to the product line is described.
though instead of connecting of updated elements to an ambition manual updates in the platform are required.
supermod s conceptual predecessor uvm supports conservative ltered editing where both the choice and the ambition are speci ed during the mandatory check out operation.
in contrast in our tool the check out is optional and the ambition may be speci ed later furthermore in uvm both the product space and the version space are represented at a low level of abstraction plain text les and propositional logic respectively .
the source code centric approach presented in does not distinguish between choice and ambition but uses a single lter a projection for both purposes.
in contrast to supermod the variant available in the workspace is only partially ltered variability is represented using preprocessor directives.
to the best of our knowledge this approach has not been implemented yet .
.
conclusion the high cognitive complexity introduced by model driven software product line engineering has given rise to a new class of tools and approaches that apply ltered editing instead of developing the platform of a software product line as a whole only the parts relevant for the intended change are accessed through a lter.
in this demonstration paper we have presented a tool that realizes totally ltered editing where changes are applied on one speci c product variant representatively but the changes are propagated to a larger set of variants.
supermod adopts the iterative checkout modify commit work ow from version control systems making it naturally suited for collaborative sple.
the accompanying demonstration video shows four important properties of our tool it seamlessly integrates into existing tool landscapes reduces the cognitive complexity of multi variant editing automates a large extent of variability management and o ers dedicated consistency control.
these properties have also been con rmed by a larger case study 826in the domain of home automation systems .
current work focuses on a more ne grained consistency control and con ict management in connection with supermod s multi user mode.
in addition more standard vcs facilities including di branch orlock will evolve the tool to a fulledged version control system.
.