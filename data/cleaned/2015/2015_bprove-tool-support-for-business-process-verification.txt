bprove tool support for business process verification flavio corradini fabrizio fornari andrea polini barbara re francesco tiezzi university of camerino italy email fname.surnameg unicam.itandrea vandin dtu compute denmark email anvan dtu.dk abstract this demo introduces bprove a tool supporting automated verification of business process models.
bprove analysis is based on a formal operational semantics defined for the bpmn .
modelling language and is provided as a freely accessible service that uses open standard formats as input data.
furthermore a plug in for the eclipse platform has been developed making available a tool chain supporting users in modelling and visualising in a friendly manner the results of the verification.
finally we have conducted a validation through more than one thousand models showing the effectiveness of our verification tool in practice.
demo video index terms business processes bpmn structural operational semantics maude software verification.
i. i ntroduction one of the most important factors impacting on the effectiveness of software engineering processes is a clear communication among domain and it experts.
indeed errors introduced during the design phase lead to more complex and costly problems in the subsequent phases of the development.
to improve communication effectiveness the notion of business process originally introduced in the business management and organisation field is gaining an ever growing acceptance as modelling tool also in the software engineering field.
a business process model generally describes a set of activities that an organisation should perform to fulfil a specific business goal .
in addition models of this kind can be composed to form a so called collaboration model used to describe the coordination of different organisations that cooperate to achieve shared goals.
currently one of the most accepted notations for defining such models is the standard business process modeling notation bpmn .
maintained by the object management group omg .
even more interestingly is probably the case of process aware information systems where defined bp models constitute the main input to set the functionality and behavior of the deployed software system.
aiming at achieving high quality bpmn models and giving to domain experts and process designers an easy to use modelling and analysis environment we have developed a novel tool for b usiness pro cess ve rification bprove .
it 1bprove is a free software it can be redistributed and or modified under the terms of the gpl2 license.
bprove source code as well as instructions and software for installing its tool chain can be found at to automatically verify relevant properties for business process based software systems like soundness and safeness.
differently from similar tools bprove is based on a native bpmn semantics defined according to a structural operational semantics style which makes it suitable for a maude implementation.
this approach has the great benefit of ensuring the faithfulness of the implemented semantics with respect to its theoretical definition as operational rules of are directly implemented as maude rewriting rules.
a further distinctive characteristic of our tool is that it does not make any assumption on the structure of analysed business processes thus supporting the verification of models with an arbitrary topology.
we are aware that this may be not in line with recommendations to use structuredness in modelling .
however in the real world modelling practice most process designers do not always follow such a guideline as witnessed by a study we carried out on the bpm academic initiative repository resulting that more than of models in the repository are not ws.
on the other hand the restrictions imposed by structuredness are sometime considered too strict instead by following an arbitrary topology designers are free to model the process according to the reality they feel .
in this way the modelling activity is less complex and more expressive .
therefore we believe that considering models with an arbitrary topology is somehow important for a verification tool and can help bprove in having a real impact on the development of complex information systems.
nevertheless considering a wider class of models allows bprove to verify also structured processes.
bpmn .
is a quite complex modelling notation including around one hundred graphical elements even though some actually used in practice.
bprove permits to easily handle a wide set of bpmn elements in particular those that can have non local effects which are difficult to handle with tools transforming bpmn models to petri nets.
for instance the handling of termination end events that permit to quickly abort a running process is usually not supported due to the inherent complexity of managing non local propagation of tokens in petri nets.
instead this feature is natively supported by our semantics.
moreover the main motivation to use petri nets encodings is the availability of already developed tools supporting verification .
however such tools generally work well for standard petri nets but they do not support extensions necessary to encode bpmn specific features such as the .
c ieeease urbana champaign il usa tool demonstrations937 authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
management of task state evolution e.g.
enabling running and complete .
bprove instead is based on an extensible framework that is able to potentially support all the features of bpmn as the approach permits to apply language extensions to cover new features without affecting the verification phase.
a further advantage of bprove is its support for bpmn collaborations.
this enables the analysis of inter organisational correctness which is still not supported by most of the available tools .
results of checking safeness and soundness over bpmn collaborations differ from results obtained through encodings which usually introduce a mapping at process level and then compose the processes in a collaboration by means of an inner transition often imposing an a priori upper bound on the number of pending messages .
finally due to its direct bpmn semantics bprove reconducts verification results to elements of the original model so that diagnostic information can be reported on the diagram in a way that is understandable by process stakeholders.
this is especially useful when many parties with different background need to quickly interact on the base of the models.
overall the mentioned aspects of bprove have made possible the concrete verification of more than one thousand models coming from a public available repository supported by the bpm academic initiative.
the tool described in this paper relates to a verification framework extensively described in .
in particular with respect to this paper provides additional details on the implementation of the tool as well as on the envisioned users and on how the tool could be introduced in a general modelling methodology.
ii.
i mplementation details the architecture of the tool chain that we propose is synthesised in the component diagram of fig.
and it represents a quite standard organisation of components to organise a verification as a service framework.
from the left side of the figure to the right we can see three main components modelling environment bprove webservice and bprove framework.
the modelling environment component represents the tool used to design bpmn models and to specify which properties of the model the user wants to verify.
this component realised as an eclipse plug in extending the eclipse bpmn2 modeler is connected to the bprove webservice and interacts with it via http requests.
a bpmn model and a property to verify are automatically sent to the web service which handles the requests by parsing the bpmn model and the property into the syntax accepted by the bprove framework.
in addition it also formats the verification results in an xml file that can be successively loaded by the graphical user interface which visualises the violations of the properties in the model.
notably the use of a restful interface allows the bprove framework to be integrated as a plug in in different modelling environments.
in particular the result of parsing the property is an ltl formula.
the bprove framework component is based on a running instance of maude loaded with the maude modules fig.
.
component diagram of the bprove tool chain.
implementing the bpmn semantics and the ltl maude model checker .
iii.
w orking scenarios in this section we provide an overview of the bprove potentialities discussing its impact on the typical phases of the lifecycle of a business process bp see fig.
.
the starting point to exploit the bprove functionalities is a bp model resulting from the design done by means of a modelling environment.
business analysts who are business domain experts responsible for defining organisational bps together with process designers who are responsible for modelling bps by communicating with business domain experts and other stakeholders collect domain requirements to produce bp models suitable to represent as is or to be scenarios in organisations.
this can be done following different methodologies and using the eclipse bpmn2 modeller in the case of our tool chain.
as soon as each model reaches a stable version analysis can be done to detect syntactic structural and behavioral problems.
at this level the bprove framework contributes underlining problems and providing feedbacks to theprocess designer who iteratively improves the models by discussing with the business analysts.
in particular the bprove framework permits to analyse correctness of models with respect to domain independent properties such as soundness and safeness .
informally soundness can be described as the combination of three basic characteristics concerning the dynamic behavior of a process model i option to complete requiring that a process instance should always complete once started ii proper completion requiring that there exists no running or enabled activity for this instance when the process instance completes iii no dead activities requiring that a process model does not contain any dead activity i.e.
for each activity there exists at least one producible trace which contains the activity.
instead safeness refers to the occurrence of no more than one token at the same time along the same sequence edge of a bp instance.
besides these general properties of bp models bprove also allows the analysis of application domain specific properties defined bybusiness analysts and codified by the process designer.
once the models satisfy all the needed properties further development activities as well as bp enactment and execution are enabled and the models can be deployed in the underlying it infrastructure.
successively the running process can authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
bprove impacts on the business process lifecycle.
customertravel agency airlinecheck offerreject offerbook travelis the offerinteresting?booking confirmedoffer rejectedpay travelpayment confirmation travel paidoffer neededmake travel offerbooking receivedoffer rejectionreceivedoffer cancelledconfirm bookingorder ticketpaymentreceivedticketordered ticketorderreceivedhandle paymentconfirm payment was payment made?paymentconfirmedpayment refusednoyes yesoffer travel rejectionpayment confirmitation order confirm no offer receive fig.
.
airline collaboration example source .
bemonitored andimproved and further verification activities can be performed in order to guarantee that modifications do not affect previously or newly specified properties.
iv.
bp rove at work on an airline scenario this section shows bprove at work on a bpmn collaboration which combines the activities of a travel agency a customer and an airline reservation system.
the scenario is borrowed from and it is represented in fig.
.
the collaboration allows these participants to interact in order to complete a commercial transaction related to the booking of a travel.
after the travel agency makes a travel offer it proposes such offer to the customer by sending an offer message.
the customer evaluates the offer and takes a decision represented in figure by a xor gateway according to which one of the two exclusive paths outgoing the gateway is activated.
the upper path is activated in case of rejection a rejection message is sent to the travel agency and then both the customer and the travel agency processes terminate.
the lower path instead is activated if the customer accepts the offer the customer books the travel by sending the travel message to the travel agency and waits for the confirmation message.
once the travel is confirmed the customer pays the travel and sends the payment message to the travel agency.
finally the customer waits for the payment confirmation message before terminating.
this message exchange is supported by the behaviors of the travel agency and the airline.
in particular the travel agency after the offer is sent waits for the decision of the customer.
this is represented by means of an event based gateway.
if the customer rejects the offer the travel agency cancels it as soon as the rejection message isreceived.
on the other hand if the customer accepts the offer the travel agency receives the travel message and hence confirms the booking by sending the confirmation message.
then as soon as the payment is received before terminating the travel agency activates the airline to order the flight tickets by sending the order message.
the airline handles the payment and according to this activates one of two exclusive paths by means of a xor gateway.
the upper path is activated if the payment is confirmed this leads to the sending of the payment confirmation message to the customer and then to the termination of the collaboration.
the lower path is activated if the payment is not properly made in this case the airline immediately terminates thus refusing the ticket order.
the user after having designed the bpmn model with the modelling environment requests the execution of the verification step see fig.
left hand side .
the modelling environment sends a request to the bprove webservice asking for a parsing of the bpmn model.
the bprove webservice evaluates the model verifying that it does not contain bpmn elements that cannot be handled by the core framework.
in case of a negative answer bprove would inform the modelling environment and hence the user on the ineligibility of the model for parsing.
in case of a positive answer like for the airline scenario the model is parsed and sent back to the modelling environment.
the user is then requested to specify a property he she wants to verify over the model by just clicking on the button referring to the codified property.
the modelling environment sends a verification request to the bprove webservice which transforms the property in an ltl formula compatible with the maude ltl model checker and it passes the property together with the model to the bprove framework.
this latter component starts an instance of maude loaded with the ltl maude model checker and the maude modules containing the semantic rules.
then it verifies the property and sends the result back to the bprove webservice which handles the result properly formatting it and sends it to the modelling environment that will display it to the user.
when the property verification result is negative it means that the property is not satisfied by that bpmn model and a counterexample is reported to the user.
this information is visualised directly within the bpmn model see the elements colored in magenta in the screenshot in fig.
.
this facilitates the interpretation of the verification result to users especially for those unfamiliar with the underlying formal verification technique.
instead if the property verification result is positive it means that the property is satisfied and a message stating this is displayed.
table i soundness and safeness checking for the airline scenario .
property ltl formula result soundness i apoolcanstart poolname false option to complete apoolends poolname soundness ii apoolends poolname true proper completion nodandlingtoken poolname soundness iii ataskrunning taskname true nodead activities safeness safestate poolname true authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
bprove user interface counter example visualisation.
for the airline scenario the verification results shown in table i report that the collaboration is not sound but it issafe.
in particular option to complete is violated.
more in detail considering option to complete we may wonder if the collaboration involves processes that can start and then also end if this is not the case probably there is something wrong with the model.
this property would hold if we would only focus on the airline and travel agency processes but it does not hold when we consider also the customer who can be stack waiting for a message from the airline that will never arrive.
we may also want to check if the collaboration has no pending token once the process has finished.
to verify this we can use proper completion.
as it is not difficult to observe this property is satisfied since there is never the possibility that in a process there is more than one token.
finally also the no dead activities property is satisfied as all tasks are not dead and for each of them there exists at least one execution trace that includes it.
considering application domain properties it is possibile to verify whether the completion of a specified task say handle payment implies the completion of another task such as confirm payment.
this property does not hold since the former task can actually be executed without the implication of executing the latter task.
the issues raised by the verification activity can be now easily fixed as shown in the model in fig.
.
in particular in the new model the customer after the payment waits for the payment management involving travel agency and airline.
this is represented by means of an eventbased gateway.
if the airline rejects the offer the customer marks the travel as not paid as soon as the reject message is received.
otherwise the payment is confirmed to the customer.
this new model successfully passes all verification checks.
v. e xperimental evaluation this section focuses on answering to a concrete research question can the proposed tool chain efficiently and effectively be used in practice?
our objective is mainly to assess the characteristics of the tool with respect to properties related customertravel agency airlinecheck offerreject offerbook travelis the offerinteresting?booking confirmedoffer rejectedpay travelpayment confirmation travel paidoffer neededmake travel offerbooking receivedoffer rejectionreceivedoffer cancelledconfirm bookingorder ticketpaymentreceivedticketordered ticketorderreceivedhandle paymentconfirm payment was payment made?paymentconfirmedpayment refusednoyes noyesoffer travel rejectionpayment confirmitation order confirm reject paymentnopayment rejection travel not paid reject offer receivefig.
.
airline collaboration example issues resolved.
to performance while usability characteristics are not targeted here.
more details on the evaluation can be found in .
to carry on the evaluation we run bprove using a collection of real world bp models provided by the bpm academic initiative.
the set up and the results of the performed experiments are described below.
the experiments can be replicated using a virtualbox virtual machine containing an installation of our framework available at a. experiment set up the bpm academic initiative repository consists of bpmn models.
however we restricted to the latest revision of the models with connectedness this measure refers to the size of the largest connected sub graph against the size of the overall model .
a model without this level of connectedness includes disconnected fragments which typically means that the model has not been finalised.
including such models in our validation would have resulted in verification data difficult to interpret.
this gave us a dataset of models with reasonable quality assurances.
from these models we selected models including more than bpmn elements.
this constraint is motivated since our focus is on collaboration and is the minimum number to have two pools exchanging authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
a message.
considering our reference dataset we perform a preliminary transformation step from .json the repository format to .bpmn the format we manage and then we checked soundness and safeness.
the verification has been performed on the above mentioned virtual machine located into a beta version of the garr cloud platform the machine runs ubuntu .
.
lts bits and it has vcpu and gb of ram.
b. experimental results table ii provides more insights on the complexity of the considered models and on the time necessary to parse them.
in particular we classified the models in terms of the number of bpmn elements they contain column class .
column avg elements provides the average number of elements of models in the class while column time provides the average time in milliseconds necessary to parse each model in order to derive the format needed by maude.
as it can be observed the parsing time slightly increases with model dimension.
table ii complexity of the considered models and parsing time .
class avg elements models time ms table iii provides more information on the complexity of the verification in terms of the time needed to check the considered properties.
in particular for each class of models the columns of the table report minimum maximum average and median time as well as standard deviation.
time values are indicated as milliseconds needed to verify each property.
it is worth mentioning that the values observed for class are not fully significant given the small number of models belonging to such a class.
overall the observed data shows that properties can be verified in reasonable time and we were able to assess the properties in less than minutes.
as it can be expected verification time increases with the size of the considered model.
there is also a high variability justified by the rather high values assumed by the standard deviations.
this is mainly due to the fact that verification activities are particularly affected by the presence of notation elements leading to the interleaving of activities such as parallel or pool statements that are not always included in models.
nonetheless the tool was able to provide an answer in reasonable time also for the most complex models in the repository.
finally considering the median values we discover that the used repository includes for a large fraction very simple models.
the value of the median is indeed much smaller up to times than the average.
this tells us that most of the considered models are rather simple and that few models present real issues for checking.
nevertheless the conducted experiments confirmed the applicability of our approach.table iii running times in ms .
a option to complete.
class min max avg median std dev.
b proper completion.
class min max avg median std dev.
c no dead activities.
class min max avg median std dev.
d safeness.
class min max avg median std dev.
vi.
r elated works considering commercial and open source solutions bpmn is currently supported by several tools.
to get an idea of the state of the art we made an analysis considering the modelling environment listed in the omg website in order to check if they support formal bp verification.
we observed that none of them support formal verification.
successively we focused on tools mainly related to academic efforts.
in particular grgen.net is.tm.tue.nl staff rdijkman bpmn.html bpmn transform is.ieis.tue.nl staff rdijkman bpmn.html bpmn to csp wong bpmn bpmn checker recatnets.cnam.fr promicat github.com tobiashoppe promnicat bpmn to yawl is.tm.tue.nl staff rdijkman bpmn.html and bp4pa bp4pa.
sourceforge.net .
grgen.net implements bpmn .
formalisation using graph rewriting rules .
it focuses on the capabilities of groove to automate orchestration and choreography engines verification.
the benefits of the solution are illustrated by means of a simple scenario which showcases the approach.
dijkman et al.
present a transformation from bpmn .
models to petri nets .
the petri nets resulting from the mapping serve as input to a generic petri netbased verification tool e.g.
prom for static analysis of the model.
the main contribution is the transformation rather than verification indeed the validation they ran only focused on the transformation of models without providing any detail on models correctness.
wong and gibbons discuss a mapping from bpmn .
to csp in haskell and propose a verification step using fdr .
consistency and compatibility are the checked properties.
also in this case benefits of the solution authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
are illustrated by means of simple scenarios such as our airline reservation and travel agency.
kheldouna et al.
implement a bpmn .
checker .
starting from bpmn they transform the model in ecatnets by using atlas transformation language and acceleo transformation tool.
the authors illustrated the approach through three examples and no extensive validation is reported.
promnicat supports analysis based on a customised transformation from bpmn to petri net and uses lola for property checking .
however there is no evidence of its use on real scenarios neither in terms of empirical investigation on the set of models it deals with.
huai et al.
propose a mapping from bpmn .
to petri net followed by an analysis step .
the mapping is supported by rules implemented as xslt code.
the verification takes a pnml file in input and implements reachability analysis.
it has been applied to a request for day off.
ye and son implement an open source plug in called bpmn2yawl.
it uses ilog bpmn modeller as a graphical editor to create bpmn models and it implements a mapping to yawl in order to check models via prom .
decker et al.
also consider bpmn as source language and yawl as target language .
in this case the tool has been tested to a limited number of models.
finally corradini et al.
supported bp verification transforming bpmn .
into csp model .
the solution presents an eclipse based tool chain integrating the modelling environment with the pat model checker .
the solution has been tested on simple bps related to the public administration.
summing up the literature discusses several approaches for bp verification but only some of them introduce a complete tool chain for bpmn .
.
most of them are prototypes coming from research projects resulting as rudimentary systems used just for demonstration purpose.
some of them are not maintained at all becoming practically obsolete due to development of new and incompatible versions of modelling environments and programming languages.
from the validation point of view all reviewed solutions use just few simple examples.
thus none of them introduces an extensive validation.
vii.
c oncluding remarks in this paper we have presented an easy to use tool chain for the verification of business processes modelled in bpmn which we validated against more than one thousand models publicly available.
the results of the validation are reported and discussed in detail.
validation proves practical benefits and effectiveness of the approach.
in the future we plan to extend our framework to other bpmn relevant characteristics such as data management time constraints and resource allocation so to enable also a quantitative analysis for bpmn models.