mit open access articles designing minimal effective normative systems with the help of lightweight formal methods the mit faculty has made this article openly available.
please share how this access benefits you.
your story matters.
citation hao jianye et al.
designing minimal effective normative systems with the help of lightweight formal methods.
proceedings of the 24th acm sigsoft international symposium on foundations of software engineering november new york new york acm press pp.
.
as published publisher association for computing machinery persistent url version author s final manuscript final author s manuscript post peer review without publisher s formatting or copy editing terms of use creative commons attribution noncommercial share alike designing minimal effective normative systems with the help of lightweight formal methods jianye hao1 eunsuk kang2 jun sun1 daniel jackson2 1istd pillar singapore university of technology and design singapore 2csail massachusetts institute of technology usa abstract normative systems are an important approach to achieving effective coordination among often an arbitrary number of agents in multiagent systems.
a normative system should be effective in ensuring the satisfaction of a desirable system property and minimal i.e.
not containing norms that unnecessarily over constrain the behaviors of agents .
designing or even automatically synthesizing minimal effective normative systems is highly non trivial.
previous attempts on synthesizing such systems through simulations often fail to generate normative systems which are both minimal and effective.
in this work we propose a framework that facilitates designing of minimal effective normative systems using lightweight formal methods.
given a minimal effective normative system which coordinates many agents must be minimal and effective for a small number of agents we start with automatically synthesizing one such system with a few agents using alloy analyzer.
we then increase the number of agents so as to check whether the same design remains minimal and effective.
if it is we manually establish an induction proof so as to lift the design to an arbitrary number of agents.
we show the effectiveness of the framework by using it to design road junction traffic rules and population protocols.
the protocols designed using our framework are shown to be as good as those manually designed and published ones.
.
introduction normative systems have garnered much attention in the multiagent systems mas literature as an effective technique for regulating the behaviors of agents .
roughly a normative system is a set of rules or norms imposed on an mas to ensure that a desirable global property is satisfied.
each norm constrains the behaviors of agents by forbidding them from performing one or more actions under certain circumstances.
for example to avoid collision two autonomous trains traveling through a common tunnel may implement a norm of if another train is observed inside the tunnel the action of move should not be allowed .
this paradigm of normative system in mas naturally maps to the law system implemented in our human system.
the normative system paradigm was first proposed by shoham and tennenholtz permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
c acm.
isbn .
.
and the problem of norm synthesis has been a major research topic since then.
van der hoek et al.
identified three major computational problems related to normative systems effectiveness feasibility and synthesis.
in order to avoid over regulate the behaviors of agents morales et al.
later proposed that a desirable normative system should be both effective and necessary designing or synthesizing normative systems which are both effective and necessary are highly non trivial.
for instance van der hoek et al.
proposed to solve the computational problems related to normative systems i.e.
effectiveness feasibility and synthesis in the context of an alternating time temporal logic atl model checking problem.
their framework may however synthesize unnecessary norms that over regulate the behaviors of agents.
one particular challenge in relying on model checking is that normative systems are often designed for a large or arbitrary number of agents which often result in state space explosion.
morales et al.
developed a mechanism to automatically synthesize normative systems that are effective and necessary .
however effectiveness and necessity are determined in their scheme using simulations and there is thus no guarantee that the normative system synthesized is effective or necessary.
in this work we show that the problem can be solved to certain extent with techniques developed in the software engineering community.
in particular we propose a framework which aims to facilitate designing minimal effective normative systems based on lightweight formal methods .
one simple observation is that if a normative system is minimal effective for a large or arbitrary number of agents it must be so for a small number of agents as well.
this observation matches the underlying principle of lightweight formal methods and automated deduction philosophy in software engineering.
based on the observation we propose a framework which starts with automatically searching for candidate effective and necessary normative systems for an mas with as few as agents.
next we check if the candidate normative systems or any specialization of them remain effective and necessary with an increasing number of agents.
we keep eliminating candidates until the candidates stabilize.
the effectiveness of a candidate normative system is automatically checked using an analysis engine e.g.
alloy analyzer or other model checkers that exhaustively explores all possible behaviors of the mas.
because we work with a small number of agents scalability is less an issue in our framework.
once a minimal effective normative system is identified and withstands with an increasing number of agents we then manually show often with an induction proof that the same normative system can be applied to an arbitrary number of agents and remain minimal effective in satisfying the property.
to demonstrate that we can design non trivial normative systems this way we apply our framework to a road junction example whichis a typical example which is often the only example used to showcase normative system synthesis methods in mas literature.
in addition we apply our framework to design a number of population protocols which are a group of self regulating network protocols designed for agent like network nodes.
we show that the protocols we synthesis are as good as those manually designed and published ones .
the remainders of the paper are organized as follows.
in section we present an overview of existing works on norm synthesis proposed in multiagent research community.
in section the background and problem definition are described.
our norm synthesis framework is described in section .
in section we evaluate the effectiveness of our framework using three representative case studies.
conclusion and future work are presented in section .
.
related work shoham and tennenholtz first defined the problem of synthesizing useful social laws in multi agent systems and investigated the required properties of the synthesis process and its computational complexity.
they argued that a social law should not restrict too much of the individual agents freedom and also restrictive enough such that the agents can cooperate towards desirable system goals.
specifically the authors defined the notion of useful social laws which guarantee that each agent can come up with a plan ensuring him to move from any one focal state to another focal state.
they showed that deriving useful social laws in general is np complete and identified conditions under which the problem of deriving useful social laws can be solved in a polynomial time.
later this idea was generalized in .
it was shown that the objective of social laws can be expressed as an alternating time temporal logic atl formula and the social law problem is transformed to an atl model checking problem.
in their framework the system is modeled as an action based alternating transition system aats and a social law consists of two components the objective of the system and the behavioral constraints.
the authors identified three major computational problems related to social laws i.e.
effectiveness feasibility and synthesis and investigated the corresponding computational complexities.
the authors showed that the complexity of the feasibility problem is no more complex than the complexity of the corresponding problem defined by shoham and tennenholtz which is np complete.
christelis and rovatsos proposed a novel norm synthesis approach using traditional ai planning techniques to synthesize effective norms in the planning domains.
however no notion of optimality of a social law is considered in both of the work and an effective social law may over regulate the behaviors of the agents.
the problem of synthesizing effective social laws was further refined in which takes into consideration the fact that implementing social laws may have cost and that the system designer may have multiple goals of varying value.
in their framework the system is modeled using kripke structures and the desirable objectives are expressed using computational tree logic ctl .
social laws are modeled as restrictions on kripke structures and the costs on edges are used to model the cost of implementing different norms.
the utility of a social law is defined as the benefit of the desirable objective brought by this law minus the cost of implementing it.
the optimal social law is the one that owns the highest utility.
the authors solved the problem of designing an optimal social law by formulating it as an integer linear program and also investigated possible ways of reducing the computational complexity.
a common problem of the above approaches are that due to the state space explosion problem which is often observed when model checking techniques are employed these methods are often limited to syn thesize mas for a small number of agents.
morales et al.
proposed that a normative system should not only be effective in guaranteeing the global property but also avoid over regulating the behaviors of the agents.
they developed a simulation based mechanism to synthesize both effective and necessary normative systems and applied their mechanism to the road junction example to illustrate its effectiveness.
however their approach does not provide a theoretical guarantee that the synthesized normative system is effective and minimal.
furthermore their approach may result in non effective normative systems that cannot be detected through extensive simulation.
in section we provide a more detailed comparison of our approach against theirs using the same benchmark system.
the work in is remotely related to ours.
gotnes et al.
proposed the notion of conservative social laws which are those effective social laws making minimal degree of changes to the original system based on the criterion of the distance metric.
the concept of conservative social laws is to model the least change principle inspired from social laws in human society where the laws with minimal change effect on people s habits would be easily accepted by the public.
while this idea of minimal social laws has been explored previously most efforts have been focused on exploring the theoretical boundaries of this notion and not on designing practical algorithms for synthesizing minimal norms.
compared to the above work our approach is complementary as we not only formally define minimal effective normative systems but also provide a practical algorithm based on lightweight formal methods to automatically synthesize them.
wamberto et al.
proposed an approach using first order constraint solving techniques for norm conflicts detection and resolution in a normative system however their goal is simply to resolve conflicts among norms i.e.
there is no global properties to be satisfied or the notion of minimality and effectiveness of norms.
this work is also related to work on using formal method based synthesis techniques to solve goal operationalisation problem in requirement engineering .
in degiovanni et al.
proposed an approach using interpolation and sat solving techniques to automatically computes required preconditions and required triggering conditions for operations such that the resulting operations establish the safety goals.
their idea of iteratively refining operational specifications based on the counterexamples from the model checker is similar to our iterative approach of synthesizing norms from small size mas.
however our work is different from theirs as we solve a different problem e.g.
we do not consider liveness properties whilst we do consider the minimality requirement of norms.
as far as the authors know this work is the first on automatically synthesizing norms using formal methods complementary to the state of the art simulation based approaches .
.
problem definition in this section we define our problem formally.
normative systems amulti agent system mas is composed of a set gof interacting agents where each agent i2gcan perform actions from a finite non empty set aiof actions.
formally a multi agent system mis a tuple m hs g ai r i where sis a finite set of global states gis a finite set of agents aifor each i2gis a finite set of actions of agent i is a finite set of atomic propositions and r s jg!sis a partial system transition function which defines how the system state changes given the set of actions that the agents choose to perform.
here jgis the setlane 3lane 4lane 2lane 1lane 4lane lane 1lane a b figure traffic network example of joint actions of the set g of agents i.e.
jg i2gai.
s!
is an interpretation function which maps each system state to the set of primitive propositions that hold in that state.
that is p2 q where q2sdenotes that the atomic proposition pis true in state q. in this work we assume that the agents share the same set of actions i.e.
ai ajfor any agent i2g.
we do not distinguish the identifies of agents and thus the system can be considered as being agent symmetric.
theoretically this assumption can be lifted.
example we use a traffic cross system as a running example to explain each step of our approach.
as shown in figure a a traffic network is composed of two orthogonal intersecting roads.
each road has two cell lanes and the direction of each lane is indicated by the arrows in the figure.
each car travels in the indicated direction and stays within the lane.
however once it arrives at the junction it is free to switch to any one of the four lanes.
we assume that cars have the same speed and can perform one of two possible actions move one cell in the indicated direction or stay in the same cell i.e.
a move stop .
at any given state a car is described to be in one of four orientations depending on the direction that is is headed east west north and south .
we assume that each car can observe the orientation of cars in three of its neighboring cells as shown in figure b top left top and top right cells.
given an mas m we can define a set of desirable states in cas a property !
which can be represented as a propositional logic formula constituted by propositions in .
for example in the traffic cross system one desirable property is the non collision property the system never enters a state in which one or more cars collide.
one way to make sure that the system remains in a desirable state is to regulate the actions of the agents using a set of norms.
a norm is a constraint on the actions that an agent is not allowed to perform under certain condition.
formally definition .a norm is a tuple h a0i where is the precondition of the norm and a0 ais the subset of actions that an agent is forbidden to perform when is satisfied.
a norm is enforced on an agent only under certain circumstances which are characterized by the precondition of the norm.
in practice each individual agent may not observe the global state of the system due to physical or communication constraints.
thus should not refer to the global state of the system.
instead we assume that each agent gcan observe the states of agents within its neighborhood.
the neighborhood of an agent is problem specific and theneighborhood of a car agent in the running example is illustrated in figure b .
we define the local view g s of a global state sfrom the perspective of agent gas the set of predicates that are evaluated over the neighboring agents that agent gcan observe.
we assume that the local view of an agent is consistent with the global state of the system.
thus the norm n h a0iis enforced on an agent g whenever the agent s local view satisfies the precondition which is formally denoted as g s .
in the following we present the exact syntax for norms as shown in figure .
without loss of generality we restrict the set a0to be a singleton which is the action that the agent is forbidden to perform under the norm.
note that norms consisting of multiple actions can be naturally represented as multiple norms of single action.
the precondition is a conjunction of atomic predicates that describe the characteristics of a single agent or relationship between multiple agents.
every n ary predicate pn2p is applied over nterms each of which represents a particular agent an integer value or a user defined symbol.
in our running example consider a norm n h move i where is defined as dirnorth g topleft h g direast h where gandhare variables representing agents.
enforcing this norm on all agents means that any car gis not allowed to move if it is north heading i.e.
dirnorth g is true and if there is another car hwhich is located diagonally left of it i.e.
topleft h g is true and heading towards east i.e.
direast h is true .
following previous work a normative system is defined as a set of norms.
given an mas m the system designer may apply a normative system to regulate the behaviors of agents.
when a normative system is applied to an mas each norm in is applied on all agents in m a.k.a.
all agents are norm abiding .
we write m to denote the system which is the result of implementing the normative system onm i.e.
by ruling out all actions forbidden by the normative system .
formally definition .letm hs g ai r ibe an mas and h k a0 ki be a normative system.
the implementation of over m written as m is a kripke structure s0 s0 r0 l0 such that s0 sis a set of states s0is the initial state l0 s0!
such that l0 s s for all s2s0 andr0satisfies the following s s0 2riff s !a s0 2rwhere !a i2gaiand for all k !ai62a0 kfor all iifssatisfies k. the problem of determining whether m satisfies the property!can be expressed as a computation tree logic ctl satisfiability problem as follows.
m a2!
where ameans along all paths and 2is the temporal operator meaning now and forever more .
we skip the formal definition of as it is standard .
intuitively the above is satisfied if the system malways remains at a desirable state if the agents behave according to the norms.
a normative system for an mas m that satisfies equation is called effective.
for example in the traffic cross system given the non collision property a normative system is effective if it never enters a state in which cars collide.
minimal effective normative system a normative system can be effective but useless.
for instance in the traffic cross system a trivially effective normative system would be one which disallows car movement altogether.
thus in this work we are interested in effective normative systems which are also minimally constraining hereafter minimal .
a normative system that is effective but not minimal over constrains the behavior of the agents by disallowing innocuous actions and represents a non optimal design.
wen h a0i norm p formula p pn t1 t2 .
.
.
t n predicate t g int symbol term g g1 g2 ... gn agent a0 a1 a2 ... a a action figure syntax for norms remark due to the minimality requirement liveness properties are often irrelevant since actions are enabled as long as possible.
before defining minimal effective normative systems we first introduce the notion of specialization relation to define what it means for a norm to be a specialization of another.
intuitively if norm n1 specializes norm n2 n1is less restrictive than n2 i.e.
n1puts less restrictions on agents than n2 .
this is achieved by strengthening the precondition of norm n1to make its applicability more restrictive than that of norm n2.
we do not need to consider relaxing the action part in the norms since we define that each norm contains only one forbidden action and thus it cannot be further relaxed.
formally the strict specialization relation between any pair of norms n1 n2 is defined as follows.
definition .letn1 h a c 1iandn2 h a c 2ibe a pair of norms.
norm n1strictly specializes norm n2iff and ac1 ac2.
for example consider a pair of norms n h move i and n0 h move iin the traffic cross system where dirnorth g topleft h g direast h dirnorth g topleft h g direast h top h0 g we can see norm n0strictly specializes n since n0is applicable in a more restricted set of circumstances than nis namely n0requires the presence of a third car h0front of g .
we can similarly define theweak specialization relation.
definition .letn1 h a c 1iandn2 h a c 2ibe a pair of norms.
norm n1weakly specializes norm n2iff the following are satisfied ac1 ac2.
if a norm nstrictly specializes another norm n0 we can equivalently say n0strictly generalizes n. similarly if a norm nweakly specializes another norm n0 we say n0weakly generalizes n. next we define the specialization relation between two normative systems based on the specialization relation between norms.
we remark that we assume that there are no duplicated norms i.e.
no multiple semantically equivalent norms coexist in the same normative system.
intuitively if the normative system 1specializes another normative system 1puts less constraints on the behaviors of the agents in the system than .
definition .let 1and 2be two normative systems.
strictly specializes 2iff the following two conditions are satisfied for each norm n1 i2 there exists a corresponding norm n2 j2 2such that norm n1 i weakly specializes norm n2 j strict specialization holds for at least one norm in 1or for at least one norm n2 k2 no norm in 1specializes n2 k. we remark that the specialization relation is transitive i.e.
if specializes 2and 2specializes 1also specializes .w e can also define generalization relation between normative systems as the inverse of specialization.
if 1strictly specializes we say that 2is astrict generalization of or we say 2strictly generalizes .
finally we use the strict specialization relation between pairs of normative systems to define what it means for a normative system to be minimal effective .definition .letmbe an mas be a normative system !be a property.
is minimal effective with respect to property !
iff m a !and there does not exist any 0such thatm a2!and 0strictly specializes .
intuitively is minimal effective if and only if it is effective and there does not exist any strictly specialized normative system which is effective.
our problem in this work is defined as follows given an mas mand a property how do we systematically synthesize a normative system which is both effective and minimal?
for instance in our running example intuitively there should be at least two set of equivalent minimal effective normative systems which correspond to the give way to car coming from left or right principle.
we present the details of the minimal effective normative systems for this example in section .
.
note that there may be multiple minimal effective normative systems in general for a given property and our framework can compute all of them.
.
our framework in this section we present the details of our framework for designing minimal effective normative systems using lightweight formal methods.
the particular lightweight formal method we employ in this work is the alloy modeling language and its associated alloy analyzer.
in the following we start with a brief introduction of alloy.
we refer interested readers to for details.
.
alloy alloy is a modeling language based on first order relational logic with transitive closure.
it has been used to model and analyze a wide range of systems including ones from the mas domain .
alloy analyzer takes an alloy model and generates valid system traces or verifies the model against a desired property.
informally speaking alloy analyzer translates an input model into a boolean constraint by finitizing the size of each domain according to user provided bounds and uses off the shelf sat solvers for automatic model finding i.e.
finding a model within the bound which would satisfy all the constraints in the model.
the analysis is exhaustive it explores every possible configuration which could be the traces of the system up to the given bounds and is guaranteed to find a model which could be a counterexample if there is any.
alloy and alloy analyzer are designed based on the principle of lightweight formal methods.
that is if a counterexample is present in a complicated system it is likely that some corresponding counterexample exists in a scaled down version of the system and thus it is often important and sufficient to focus on finding and fixing counterexamples within a relative small bound.
we remark this assumption is echoed in our setting.
mas often contain a large or even arbitrary number of agents which are often similar or even identical.
a set of social norms which would work with a large number of agents must work for a small number of them and furthermore as we demonstrate in our case studies later a stable set of social norms work for a small number of agents often apply to a large number of agents as well.
the underlying reason is that agents in normative systems are inherently symmetric.
in this work we use alloy to model the normative systems the candidate norms as well as the properties and use alloy analyzer to automatically identify minimal effective norms for a bounded number of agents.
it is important to note that our synthesis framework itself does not prescribe the use of a particular language or tool.
any other modeling tool e.g.
nusmv model checker could be substituted for alloy so long as its language is expressive enough for specifying first order predicates it allows an exhaustive analysis of the system against a property and itnormsnorm synthesisalloy analyzernormsviolation casesnorm interfaceconstraintscounterexamplesnormsmultiagent systemsnorm refinementnormsviolation casesmodelsnorm generationapply tonorm refinementphase initial norm synthesis phase figure norm synthesis framework produces a concrete counterexample which is used for synthesizing and refining norms.
.
norm synthesis process we now outline a process for automatically synthesizing minimal effective normative systems.
given an mas without loss of generality we assume that each agent can observe the states of m agents except itself within its neighborhood.
for instance in the traffic cross system mis set to be .
the number of possible normative systems is exponential in the number of all possible norms which is exponential in the number of agents constituting the preconditions.
to efficiently search this huge space for a minimal effective normative system we propose an approach in which we first synthesize normative systems involving only the most generalized norms for a minimal number of agents and then incrementally refine them by taking more agents into consideration.
we believe that this strategy is justified as we are deliberately searching for simple norms e.g.
an agent would need to observe only a small number of his her neighbors first which in practice often works effectively.
the workflow of the norm synthesis framework is shown in figure .
the synthesis process is divided into two phases generating an initial candidate set of normative systems and refining them until one of them qualifies as minimal effective.
in the following we present the details of the two phases.
initial norm synthesis the top three components in figure are responsible for synthesizing an initial set of candidate normative systems norm synthesis norm interface and the alloy analyzer .
the designer starts by modeling the behaviors of an mas and a desired property !in the alloy analyzer1.
the mas model is parameterized with three inputs a desired property !
the number of agents k in the mas and a normative system to be enforced .
given these inputs the analyzer automatically checks whether the mas satisfies !
if the mas violates !
then the analyzer returns a counterexample that shows the sequence of states and actions that leads to the violation.
we start the norm synthesis for mas involving two agents only k .
since agents are assumed to be identical and thus there is no need to distinguish the agents.
since is initially empty the analyzer will generate a counterexample cthat shows how !is violated unless !is trivially true without norms .
the norm interface translates and passes this counterexample into the synthinitnorms function algorithm .
note that only the first generated counterexample is considered if there are multiple counterexamples.
1the description of mas modeling in alloy is omitted since it is not the focus of this paper.
refer to for details.algorithm synthinitnorms !
c c extractns c all norms that may prevent c for c2 cdo if cnot in then c end if c0 verify !
analyze against !for agents ifc0 then no counterexample !satisfied else synthinitnorms !
c0 end if end for return the algorithm works as follows.
we begin by extracting from counterexample cthe set of norms that would have prevented c line .
the extractns function is constructed as follows.
the precondition is simply the current local view of an agent involved in the counterexample c and its action to be forbidden is the action that this agent chooses right before the occurrence of c. note that it might return multiple norms since multiple agents are involved in the counterexample.
the current normative system is expanded to include each possible c2 line and is analyzed for its effectiveness by re running the analyzer verify on line .
if the analyzer fails to find a counterexample must be effective for all possible scenarios in agent system and thus is included in to pass onto the refinement phase line .
if leads to another counterexample c0 then we repeat the process line .
when the algorithm completes the resulting contains the set of all feasible normative systems that always guarantee property !for the mas with two agents satisfying formula .
in the traffic cross system suppose the first collision counterexample returned by alloy analyzer is that car gheads north while car his heading east and located at the topleft position of car g this counterexample can be mapped to either of the following two norms h move i where dirnorth g topleft h g direast h h move i where direast g topright h g dirnorth h after that we enforce either of them on all agents behaviors and rerun alloy to generate possible counterexamples separately.
this procedure is repeated until no new counterexample is identified.
the set of normative systems returned after the initial norm synthesis step are passed to the next phase norm refinement phase.
norm refinement the normative systems in are composed of the most general and effective norms for the agent mas i.e.
the precondition of each norm in the normative systems in are defined as a conjunction of atomic predicates that describes the relationship between two agents at most.
the normative systems in may over constrain the behaviors of the agents.
the norm refinement phase explores all possible specializations of each normative system in a scope in which khas been increased by one discarding ineffective ones.
when kreaches m the algorithm terminates and returns a set of minimal effective normative systems for the mas with m 1agents.
the space of specializations is exponential in the number of atomic predicates used to describe the local state of an agent.
in practice however many of those specializations are ineffective and can be pruned away using a top down searching approach.
the key intuition is as follows.
conceptually we can order all possible norma ns ns sub1 ns sub1 sub1 ns sub1 sub2 ns sub2 ns sub2 sub1 ns sub2 sub2 ns sub2 sub3 ns sub3 ns sub3 sub1 ns sub3 sub2 ns sub3 sub3 specialization specialization specialization specialization figure specializing normative system example tive systems in a tree structure where the root node represents the initial normative system and its i th level children represent the specializations of its i th norm with respect to their father nodes.
with the other norms unchanged if a normative system obtained by specializing the i th norm niis ineffective then any possible further specialization of the rest of norms the nodes within the subtree will also be ineffective.
thus all of its descendants can be pruned out from the search space and continue onto the next specialization of ni.
the refinement algorithm is shown in algorithm .
refinenorms takes two arguments a desired property !
and a set of candidate normative systems from the initial phase .
for each normative system in function specializens computes all minimal effective specializations of for the k agent mas line .
the existing normative systems in are then replaced with their specialized counterparts from the results of specializens line .
the process is repeated until kexceeds the size of the local agent view m or cannot be specialized further.
given property !
normative system the number of agents k and the current specialization depth i specializens searches for the most specialized versions of that also satisfy !
algorithm .
first a candidate specialization 0is constructed by replacing n2 with one of n s specializations n0 lines and .
then 0is verified against !using the alloy analyzer line if 0is effective and cannot be further specialized then it is stored in as a minimal effective normative system.
in theory specializens may explore every possible combination of all specializations of norms in which is exponential in .
however if the alloy analyzer returns a counterexample cfor a normative system every specialization of the subtree of the node corresponding to must also be ineffective and is omitted from the search line .
example an example of specializing a normative system ns is shown in figure .
in figure the normative system contains only one norm ns which has three possible specialized norms.
each of its specialized norms can also be further specialized.
when we search for specialized effective normative system we check the specialized norms ns sub2 and ns sub3 and found that both of them are ineffective.
then we can significantly reduce the searching space by pruning away the subtrees of both norms.
we only need to further search the subtree of norm ns sub1 which is effective and finally obtain the most specialized one ns sub1 sub2.
if we consider the traffic cross system example as shown in section .
later we found that any specialized normative system of a normative system from the initial norm synthesis stage turned out to be ineffective thus there is no need to further specialize any more.algorithm refinenorms !
k start with agent mas repeat for do specializens !
k specialize end for k k if then replace with specialized nses end if until k m or is unchanged return algorithm specializens !
k i forn2 do forn02specializenorm n do n n0 replace nwith specialized norm c verify !
k check whether 0is effective ifi then ifc then else ifc6 then continue specializens !
k i end if end for end for return .
theoretic analysis we first describe two useful properties which will be useful for proving the main theorems of our synthesis framework.
first if enforcing a normative system ensures that a property is always satisfied by an mas then implementing any normative system which generalizes the existing normative system instead also ensures that the same property always holds in the mas.
lemma .letmbe an mas with an arbitrary number of agents !be a property and be a normative system such that m a !.
we have m a !for any normative system 0that generalizes .
the above lemma can be easily proved based on a property of atl which has been proved in and can be expressed intuitively as follows implementing behavioral constraints on a multiagent system guarantees to preserve the universal properties of the system.
we omit the proof of this property and simply use the result here.
the overall formula a2!is one kind of universial property and also based on definition of generalization relation section enforcing any generalized normative system is equivalent with implementing additional behavioral constraints on agents.
therefore this lemma holds.
another useful property is that if a normative system ensures the satisfaction of a property in a k agent mas then the same property can also be satisfied in any mas with fewer agents by enforcing the same normative system.
given an mas m we write mkto denote the mas with exactly k agents.
lemma .letmbe an mas !be a property and be a normative system such that mk a2!.mn a2!
for any n k. we sketch the proof of this lemma using contradiction as follows.
let us assume that the normative system is not effective for amultiagent system m0with less than kagents.
it means that the system must be able to evolve to certain state swhich violates property!under .
we can construct a k agent system by letting one agent ialways be outside the neighborhood of the rest of agents and not choose any action each round.
thus this additional agent i does not affect the state transition of the rest of agents each round and the dynamics of state transitions for the rest of agents is actually the same for the system with less than kagents.
therefore the agents must also be able to reach a state that violates property !.
this leads to a contradiction.
now we are ready to establish the correctness of our approach i.e.
every normative system synthesized from the framework is minimal effective in always satisfying property !for any mas with m 1agents formula .
theorem .letmbe an mas and !be a property.
if any agent mcan only observe the states of mneighboring agents.
any normative system in the final set synthesized from the framework is minimal effective with respects to !formm .
the proof of the theorem is available in appendix.
although the above theorem guarantees that is minimal effective for the mas with m agents it may not be for a larger number of agents.
in contrast the objective of designing normative systems is often to have a system which is minimal effective for many or arbitrary number of agents.
though our framework fulfills the objective directly as we show in our case studies since the normative systems synthesized using our framework often could be proved to be minima effective for an arbitrary number of agents with a manual induction proof.
the following theorem further reduces the effort required for manual proving by showing that as long as we prove that is effective for the mas with more agents i.e.
mkwhere k m is guaranteed to be minimal as well.
theorem .letmbe an mas.
let be a minimal effective normative system for mm 1with respects to property !
synthesized using our approach.
if is effective with respects to property !formkwhere k m it is minimal effective with respects to property !formk.
proof .we prove this theorem by contradiction.
let us assume that there exists another normative system 1which specializes and is minimal effective for the k agent system k m .
based on lemma we know that 1is also effective for the m agent system which also specializes .
this contradicts with the fact that is minimal effective for the m agent system.
.
evaluation in this section we evaluate our synthesis framework with multiple mass in order to answer the following two research questions.
rq1 how efficient is it to use our framework to synthesize a set of minimal effective normative systems?
rq2 is our underlying assumption justified i.e.
are the normative systems we synthesized based on a small number of agents generalizes to an arbitrary number of agents?
.
traffic junction model in the following we apply our synthesis framework to a practical and well studied multi agent coordination problem i.e.
a traffic junction network .
we present minimal effective normative systems synthesized from our framework for ensuring a non collision property and compare our results to the state of theart simulation based synthesis approach.
note that this propertytable the norms generated from our framework norm precondition actions n1 dirnorth g topleft h g direast h move n2 dirnorth g top h g move n3 dirsouth g topleft h g direast h move n4 dirsouth g top h g move n5 dirwest g topleft h g direast h move n6 dirwest g top h g move n7 direast g topleft h g direast h move n8 direast g top h g move is also applicable to other similar domains such as prey predator problem or other multi agent coordination problems .
our representation of the traffic network is based on the model by morales et al.
.
we have already introduced this model in section and the traffic network is shown in figure a .
assuming the absence of a central controller that co ordinates the movement of the cars within the junction i.e.
no traffic lights our goal is to automatically synthesize minimal effective norms for the following safety property non collision no two cars should ever occupy the single cell on the traffic network anytime.
predicates in each local view there are predicates e.g.
direast describing the direction of a car in each cell i.e.
44possibilities along with predicates e.g.
topleft that describe a relationship between any two cars in their local views i.e.
23possibilities .
thus we can estimate there are possible norms leading to potentially 22048normative systems.
experiment results our framework generated a minimal effective normative system for the non collision property with m 3and k .
the overall synthesis process invoked the alloy analyzer i.e.
verify from the synthesis algorithm times to check the effectiveness of candidate normative systems which pruned away lots of candidate normative systems.
the reason is that any specialization when k i.e.
any norm with a precondition that is expressed over more than agents turned out to be ineffective thus there is no need to further specialize any more.
we ran our experiments on a windows machine with a .4ghz cpu and 4gb ram and it took approximately minutes to finish the synthesis.
the generated normative system contains norms.
many of these norms are symmetric and cover the equivalent scenario under different orientations of the car.
for example requires a car gto stop when it is directly behind another car h covers this scenario using four separate norms corresponding to norm n2 n4 n6andn8in table respectively depending on the direction of g. the rest of four norms in table cover another equivalent scenario where car gis not allowed to move and yield to another car hthat is approaching gfrom the left i.e.
priority to the left .
we compare the results of our experiment a to the normative system b produced for the same non collision problem using the state of the art simulation based synthesis framework in .
the authors of used a different set of atomic predicates to model the traffic junction though the two models are equivalent in terms of agent behaviors.
thus we first translate their normative system into our representation.
their normative system contains norms as listed in table .
the norms can be divided into four sets of symmetric norms n1 n4 n5 n8 n9 n12 n13 n16 that differ only in the direction of car g. first we can observe that aand bshare one common set of norms namely priority to the left norms n1andn0 .
however norm n2is more constraining than the combination of the norms n0 n0 and n0 since n2prevents gfrom moving forward whentable the normative system generated in norm precondition actions n0 dirnorth g topleft h g direast h move n0 dirnorth g top h1 g dirwest h1 topleft h2 g dirwest h2 move n0 dirnorth g top h1 g direast h1 topright h2 g direast h2 move n0 dirnorth g top h g dirnorth h move n0 dirsouth g topleft h g dirwest h move n0 dirsouth g top h1 g direast h1 topleft h2 g direast h2 move n0 dirsouth g top h1 g dirwest h1 topright h2 g dirwest h2 move n0 dirsouth g top h g dirsouth h move n0 dirwest g topleft h g dirnorth h move n0 dirwest g top h1 g dirsouth h1 topleft h2 g dirsouth h2 move n0 dirwest g top h1 g dirnorth h1 topright h2 g dirnorth h2 move n0 dirwest g top h g dirwest h move n0 direast g topleft h g dirsouth h move n0 direash g top h1 g dirnorth h1 topleft h2 g dirnorth h2 move n0 direast g top h1 g dirnorth h1 topright h2 g dirnorth h2 move n0 direast g top h g direast h move it is behind another car h regardless of the direction of h. thus bis more specialized than a which might seem more desirable than a. however bis not effective in ensuring that the mas satisfies the non collision property.
to demonstrate this we encoded bin our alloy model and checked their effectiveness.
the alloy analyzer returned a counterexample that demonstrates a collision between two cars.
consider a state in which two cars g andh are described using the following predicates dirnorth g top g h direast h none of the norms in bis applicable to this local view of g and so the mas allows gto perform any action.
when gdecides to move north and hdecides to stay in the same location the two cars end up in a collision.
it is worth noting that during our refinement algorithm algorithm n0 n0 and n0 4are considered as candidate specializations of n2.
they are discarded after being determined to be ineffective.
thus it shows that the synthesis approach using a verification tool is complementary to simulation based approaches and can provide strong guarantee on effectiveness or minimality.
in the following we intuitively show that the synthesized norms can be easily generalized to an arbitrary number of agents.
that is the minimal effective normative system synthesized for the road junction with cars is also minimal effective for the general case of n nroad junction with mcars.
based on the semantics of the normative system we synthesized in table the normative system is essentially equivalent with implementing the following general rule an arbitrary car cshould stop if there is a car c0right in front of cor if there is another car c0on its left hand side and heading towards its right side.
it can be proved that for any n n road junction with mcars if there is a collision there must be a violation of this rule.
thus the normative system in table always guarantees no collision for any general case.
.
two hop coloring problemin the following we apply our approach to synthesize population protocols.
the population protocol model has become a very important computation paradigm for modeling distributed systems such as mobile ad hoc networks and researchers are actively designing and publishing such protocols .
the challenge is that a population protocol must work with an arbitrary number of agents and an arbitrary initial configuration of the agents.
intuitively a population protocol can be considered as a set of rules specifying the local behaviors of each agent in a population such that certain desirable property can be satisfied eventually.
for instance in the two hop coloring problem a population protocol is required for a ring of agents so that eventually always each pair of neighboring agents should have different colors.
for a ring network we can see that three colors should be sufficient.
thus the problem is to design a protocol to regulate the behaviors of each agent such that the goal can be eventually and always satisfied through finite local interactions computations among each pair of neighboring agents.
existing research work mainly focuses on investigating how to effectively and automatically check whether a given two hop coloring protocol can eventually and always satisfy the goal.
here we take a different perspective and consider the question of how an effective two hop coloring protocol can be automatically synthesized using our framework.
to synthesize a two hop coloring protocol we observe that a protocol corresponds to the opposite of a normative system.
for example given a state s if a protocol specifies that an agent should perform an action from a subset a0 a then the corresponding norm should specify that this agent should not perform any action from the subset a a0.
based on this observation the original question of synthesizing an effective protocol can be translated into an equivalent question of how to synthesize a minimal effective normative system such that the desirable property is satisfied.
formally we aim at synthesizing a minimal effective normative system such that the following property can be satisfied m !
where !denotes the targeted state that no neighboring agents have the same color.
note that this property is not a universal property however we show that our framework is also able to synthesize the corresponding minimal and effective normative system.
a two hop coloring protocol specifies the allowed behavior of a pair of neighboring agents for their local interaction.
accordingly the synthesis of the corresponding normative system is the specification of the forbidden behavior of each pair of neighboring agents for their local interaction.
inspired by given a population of agents in a ring network we assume that each agent consists of two basic components color c and its boolean color index f u denotes a color .
the color of an agent can be considered as its action and the color index can be considered as its internal state.
we represent the local state of each pair of neighboring agents i andjusing their boolean color indexes f andf and thus there are two possible states either the agents are synchronized i.e.
f f or they are not i.e.
f f .
for each pair of interacting agents iandj without loss of generality assume that agent iis the initiator and agent jis the responder.
the action set aiof an initiator agent iconsists of the combinations of any possible operations on the previous two components i.e.
updating the color so that color is0 1or2 or updating the boolean color index state so that f is f orf or f .
in contrast the action set of agent jis restricted to operations on the update of the boolean color index only i.e.
setting f to be f orf or f .table the norms generated from our framework for a pair of neighboring agents iandj norm precondition forbidden operations n1 equal f f color n2 equal f f f f f n3 equal f f f f f f n4 notequal f f f f f n5 notequal f f f f f f table the protocol generated from our framework for a pair of neighboring agents iandj rules precondition allowed operations r1 equal f f f f r2 equal f f f f r3 notequal f f color r4 notequal f f f f experimental results our framework first generated a minimal effective normative system for the two hop coloring property with a node ring.
alloy analyzer was invoked times to check the effectiveness of candidate normative systems.
we ran our experiments on the same machine and it took approximately minutes to synthesize the norms.
the normative system synthesized from our framework is shown in table which specifies the actions that are not allowed in different states.
we then obtain the most general protocol for this two hop coloring problem by negating the normative system.
the two hop coloring protocol synthesized is shown in table .
specifically rule and specify how the values of f andf should be updated if they are synchronized rule specifies that the value of color can be updated to any integer value between and if they are unsynchronized rule specifies how the value of f should be updated if they are unsynchronized.
next we show that the protocol synthesized above for a node ring works for a network of an arbitrary number of nodes.
formally we would like to show that for any n node ring the protocol in table guarantees that eventually always each pair of neighboring agents have different colors hereafter the property .
we sketch the proof based on mathematical induction as follows.
we already know that the protocol works for a node ring.
for induction we assume that it works for a n node ring and proves that it works for a n node ring as well.
given a n node ring for any node uconnecting another two neighboring nodes vandw we can first reduce it into a n node ring by connecting nodes v andv0and ignoring node ufirst.
then the reduced n node ring can always satisfy the two hop coloring property.
after that we insert node uback into its original position in the ring and apply the same protocol again.
next we show that after a finite steps the n node ring satisfies the property.
first based on the protocol in table we can see that if the ring satisfies the property and all nodes are synchronized nothing changes in the ring and the property is satisfied.
now let us consider all possible scenarios when node uis inserted back into the ring.
if node uviolates the property and without loss of generality let us assume color color where node wis the other neighbor of node v. we consider the following three cases.
case f f let the protocol work on the pair of nodes u v .
there must be one color cwhich can be assigned to node usuch that property is satisfied.
let color c. this operation removes the color violation from node u. then by updating f f nodes uandvare synchronized.
case f f f let the protocol work on the pair of nodes v w .
then the values off andf will be flipped.
node uand vwill be unsynchronized.
next it is resolved as case .
case f f f let the protocol work on the pair of v w and u v sequentially.
this will cause the values of f andf flip once and the value of f flip twice.
thus node u andvbecome unsynchronized.
next it is resolved as case .
if the original color of node usatisfies the property we only need to make sure it is synchronized with its neighbors vandw.
suppose that they are not synchronized initially.
let the color update operation be color color unchanged and the update operation on function fwill synchronize the value of f andf .
based on the previous result we conclude the protocol works for the an arbitrary number of nodes.
.
orienting undirected rings problem in the following we apply our approach to synthesize a population protocol for orienting undirected rings and compare the result with the one published in .
given a ring that is two hop colored already we are interested in reaching a state such that all nodes are well oriented in the sense that each node has exactly one predecessor and one successor and the predecessor and successor should not be the same for each pair of nodes uandv ifuis the predecessor of v then vmust be the successor of u for each pair of neighboring nodes uandv either uis the predecessor or successor ofv.
we are interested in finding a protocol such that the previous orientation property can be eventually satisfied in the ring as long as all nodes agents follow the protocol to update their states in a pairwise manner.
similar to the previous example to synthesize such a protocol we start with synthesizing the corresponding effective normative system using our framework.
formally we aim to synthesize a minimal effective normative system such that the following property can be satisfied m !
where !
denotes the targeted state satisfying the above orientation property.
naturally we represent the state of a node uusing the following three components its current color color its successor node color succolor and its predecessor node color predcolor .
during an interaction between a pair of nodes u v without loss of generality node uis assumed to be the initiator and node vis the responder.
by considering whether the initiator node uis the successor or predecessor of responder node v we distinguish the states between a pair of nodes into the following four states u is the successor but not the predecessor of v succolor color andpredcolor color u is the predecessor but not the successor of v predcolor table the protocol generated from our framework for a pair of neighboring agents iandj norm precondition allowed operations n1 equal succolor c o l o r and!equal predcolor c o l o r action a1 n2 !equal succolor c o l o r andequal predcolor c o l o r action a2 n3 equal succolor c o l o r andequal predcolor c o l o r action a2 n4 !equal succolor c o l o r and!equal predcolor c o l o r action a2 color andsuccolor color u is both the predecessor and successor of v predcolor color andsuccolor color u is neither the predecessor or successor of v predcolor color andsuccolor color for each state the nodes can update either succolor orpredcolor in either of the following ways.
node uis the predecessor of node v denoted as action a1 predcolor color andsuccolor color node uis the successor of node v denoted as action a2 predcolor color andsuccolor color experimental results our framework first generated a minimal effective normative system for the orienting property under a 3node ring.
the overall synthesis process involves times of checking to validate the effectiveness of candidate normative systems.
we ran our experiments on the same machine and it took approximately minutes to synthesize the norms.
the synthesized protocol for this orienting undirected ring problem can be obtained by taking the opposite of the synthesized normative system similarly as the previous example which is shown in table .
the protocol consists of four rules each of which specifies the action to be performed under each condition state .
in the following we generalize the protocol to any n node ring.
we again prove it works n node ring using mathematical induction as follows.
let us first assume that the protocol works for a m node ring.
next we construct the corresponding m node ring by inserting another node vinto an arbitrary position.
let us denote its neighboring nodes as uandwand their neighbors are u0 andw0respectively.
without loss of generality let us assume that color predcolor andcolor succolor .
assume that node uandvinteract first.
since the m node ring also satisfies the two hop coloring property there is only one possibility after this interaction i.e.
predcolor color and succolor color .
next nodes vandwinteract based on the two hop coloring property we know that only one possibility happens as follows color succolor andpredcolor color .
after that all nodes have been well oriented and the welloriented configuration remains thereafter since always action a2is selected following the protocol.
thus the theorem holds.
remarks we note that for both case studies in section .
and .
the synthesized protocols are equivalent with the ones proposed by angluin et al.
.
in response to the research questions we introduced at the beginning of section we have demonstrated in the above examples that we can efficiently synthesize non trivial normative systems the synthesized results indeed can be generalized to cases with arbitrary number of agents and are as good as those published ones.
in general manual generalization of the synthesized norms for complex problems could be challenging.
however our approach shows the potential of the lightweight formal method it can be useful for automatically generating candidatenorms which could be generalized.
furthermore while it is true the formal methods employed in this work suffer from scalability issues it is less a concern in our framework as in all these cases we find the right norms with as few as three agents.
.
conclusion and future work we proposed an approach based on lightweight formal methods and tools to automatically synthesize minimal effective normative systems and protocols for multi agent systems.
complementary to a simulation based approach our approach provides a theoretical guarantee on the effectiveness or minimality within the given bounds of the analysis.
as future work one natural direction is to apply the framework to other multi agent coordination problems or other multi agent domains .
appendix proof sketch of theorem for the sake of convenience we denote the set of normative systems returned from synthinitnorms and each round of norm refinement process refinenorms with k .
.
.
m 1agents as 2and krespectively.
we prove this theorem by induction as follows.
initially when the system has only two agents k from the initial norm synthesis process in section .
we know that 2satisfied the following properties it contains all effective normative system for agent system where each norm precondition is defined in terms of at most k agents.
each norm in 2can not be further specialized given that the norm precondition is defined in terms of at most k 2agents.
when we increase the number of agents and synthesize specialized normative systems during the norm refinement process we are actually exploring all the possible specialized normative systems by specializing the precondition of each norm in each normative system obtained from the initial norm synthesis process.
next we prove that for any case of kagents if the set of kof normative systems satisfied the above properties then the above two properties also hold for the set k .
suppose that this is not true then there must exist another normative system 0in which each norm precondition is defined in terms of at most k agents and 0is effective for k agent system and also not in k .
we can always construct a corresponding generalized normative system of such that the precondition of each norm in 00is defined as a conjunction of atomic predicates that describes the relationship between kagents at most.
based on lemma we know that is also effective for k agent system.
further 00is also effective for k agent system based on lemma .
thus 00must be in k which leads to a contradiction.
therefore there does not exist any normative system that does not belong to k 1and also is effective for k agent system.
based on previous induction finally we have the set m 1contains all the effective normative systems in always satisfying property!for the m agent system.
since the normative systems in m 1are not comparable in terms of specialization relationship all generalized normative systems are excluded in algorithm line any normative system in m 1is minimal effective in always satisfying property !for m agent system.
.