the electrum analyzer model checking relational first order temporal specifications julien brunel david chemouil onera dtis universit f d rale de toulouse francealcino cunha nuno macedo inesc tec universidade do minho portugal abstract this paper presents the electrum analyzer a free software tool to validate and perform model checking of electrum specifications.
electrum is an extension of alloythat enriches its relational logicwith ltloperators thussimplifying thespecificationofdynamic systems.
the analyzer supports both automatic bounded modelchecking withanencodingintosat andunboundedmodel checking withanencodingintosmv.instance orcounter example tracesarepresentedbacktotheuserinaunifiedvisualizer.features tospeedupmodelcheckingareoffered includingadecomposed parallel solving strategy and the extraction of symbolic bounds.source code video ccs concepts softwareanditsengineering modelchecking specification languages keywords formal specification language model checking model validation acm reference format julien brunel david chemouil alcino cunha and nuno macedo.
.
the electrum analyzer model checking relational first order temporal specifications.
in proceedings of the 33rd acm ieee international conference on automated software engineering ase september montpellier france.
acm new york ny usa 44pages.
introduction softwaredesignvalidationandverificationisacrucialtaskatearly softwaredevelopmentstages.forrealisticsoftware differentviews ofthedesignmustbeanalyzedatdifferentabstractionlevels andtakingintoconsiderationavarietyoffeaturesandconfigurations.
this calls for expressive formal specification languages ideally supportedbyautomaticreasoningtoolsthatcanquicklyanalyze models and specifications and provide useful feedback to the user.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation onthe firstpage.copyrights forcomponentsof thisworkowned byothersthan the author s mustbehonored.abstractingwithcreditispermitted.tocopyotherwise or republish topostonserversortoredistributetolists requirespriorspecificpermission and or a fee.
request permissions from permissions acm.org.
ase september montpellier france copyright held by the owner author s .
publication rights licensed to acm.
acm isbn ... .
solvers electrodelectrum analyzer alloy analyzerpardinus kodkod satsatsmv model checkers figure architecture of the electrum tool chain.
when exploring the current panorama of formal methods for softwaredesign namelysurveyinglanguagesandtoolsthatsupportbothrichstructuralproperties expressedinsomefirst order logicflavor andbehavioralproperties expressedintemporal logic wehavefoundthatadequatesolutionswerescarce.thisled to the proposalof electrum an extension of the purely static alloyspecificationlanguage withdynamicfeatures loosely inspiredbythetemporallogicofactionsof tla .electrum a goldandsilveralloy combinestheexpressivenessofthesetwo popularformal methods and wasconservatively designedwitha focus on preserving the flexibility of alloywhile easing the specification andsubsequentanalysis ofbehavioralproperties.keyto the success of these methods is the proper support for both model validation and verification.
to this purpose electrum is backed by twoautomaticanalysisengines oneforboundedmodelchecking based on the original alloyencoding into sat well suited to quickly generate and explore alternative scenarios that conform to themodel andanotherforunboundedmodelcheckingthrougha translationintothesmvlanguage whichprovidesadditional guarantees when checking correctness properties in later stages.
thispaperreportsrecentdevelopmentsinthe electrum language andpresentsthenew electrum analyzer 11whichfullyintegratesthe bounded and unbounded engines separate procedures in the first electrum release in a unified ide that extends the alloy analyzer.
thealloy analyzer analyzes and provides visual feedback about analloyspecification andisimplementedontopof kodkod a relational model finder built over off the shelf sat solvers.
this architectureenablesaclearseparationofconcerns the analyzer implementsthesyntaxandsemanticsof alloy providingatexteditor and an instance visualizer while kodkodfocuses on the implementationoftheautomaticanalysisprocedures.
electrum preservesthis architecture depictedinfig.
relyingonthenewstand alonetemporalrelationalmodelfinder pardinus22 kodkod ssturdiercousin tosupporttheanalysisofproblemsprovidedbythe analyzer.this architecturealsoeasestheindependentexplorationoflanguage and analysis features like target oriented model finding dynamicspecificationsandtemporalformulas unboundedmodel 1available under the mit license at 2available under the mit license at authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france julien brunel david chemouil alcino cunha and nuno macedo open util ordering establish total order on ids sig id sig process id id succ process var tosend set id var sig elected inprocess fact ring force the ring topology idinprocess lone id all p process process inp.
succ fact defelected define the value of elected at each step noelected and always elected p process after p.id inp.tosend and p.id not in p.tosend pred init all p process p.tosend p.id define initial state pred nop p.tosend p.tosend nop action pred comm communication action some i p.tosend p.tosend p.tosend i prevs all elements x p.succ.tosend p.succ.tosend i prevs fact trace traces derived from an initial state through actions init and always all p process comm orcomm ornop pred consistent eventually some elected run consistent for 2but 10time find a trace with an election assert safety always lone elected check safety for 3but 10time pred progress always some tosend some p process comm assert liveness some process and progress eventually some elected check liveness for 3but 10time check whether at least one elected figure ring leader election in the electrum language.
finding symbolic bounds and a decomposed solving strategy.
the unbounded engine relies on electrod 33a stand alone tool that compiles problems into smv to be solved by symbolic model checkers whichcanalsoperformboundedanalysis .theplug inarchitecture inheritedfrom kodkod allowsthestraightforwardintegration of future developments in sat and smv solving.
every procedure reportsbacktothe analyzer throughthe pardinus api resulting in a uniform representation of instances and counter examples.
in summary the main features of electrum and its analyzer reported in this paper are i a lightweight formal specification languagewithrichstructuralandbehavioralconstructs section ii integrated scenario exploration functionalities for visualizing andnavigatingalternativesolutiontraces section andiii support for automatic bounded and unbounded model checking of specifications in first order ltl with past section .
2electrum specifications electrum supports both structural and dynamic constructs restricted by additional logical constraints over which arbitrary temporalpropertiescanbechecked.thecompletesyntaxcanbe consulted online 44while its formal semantics can be consulted in .
structure is introduced through the declaration of signatures thatrepresentsetsofuninterpretedelements and fieldsofarbitrary 3available under the mpl .
license at thatrelate elementsbelonging todifferent signatures.
each signature and field can be declared as static by default or variable keyword var the former have the same valuation throughout the trace whilethelattermaychangeovertime.hierarchybetween signatures can be introduced through extension orinclusion and signaturescanadditionallybedeclaredas abstract.finally signaturesandfieldsmayberestrictedbysimple multiplicity constraints.
forvariableelements theseareappliedlocallyateachstate e.g.
two variable signatures extending another one are disjoint in each state but may swap elements from one state to another.
additionalrestrictionscanbeimposedthrough facts logicalconstraintsthatmustholdineveryinstanceofthespecification which may rely on reusable predicates andfunctions.
relational expressionsarebuiltbycomposingsignaturesandfields andsomebuilt in constants with common set theoretic and relational operators like join.ortransitiveclosure .expressionscanbe primed referringto itsvaluationinthesucceedingstate.atomicformulasaredefined as inclusion or equality tests of relational expressions which can becombinedthroughthecommonbooleanoperators first order quantificationsandfutureandpastltloperators.althoughpast operators were not initially supported and despite not actually improving the logical expressiveness our experiments have shown that they often allow simpler and more succinct specifications.
writing electrum specifications tends to follow a pattern that buildsonthedichotomybetweenstaticandvariableelements as exemplified by the model in fig.
22of a leader election algorithm forringtopologies.55thefirststepusuallyconsistsofthedefinition ofthestaticstructure thenetworktopology establishedbyfield succ that arranges the different processelements identified by totally ordered idelements as well as facts that restrict what is considered a valid valuation for these elements like ring forcing the ring topology and unique identifiers .
we usually refer to these asrepresentingthe configurations ofthesystem allofwhichwillbe exploredbytheanalysisproceduresbutthatremainfrozenthrough aparticulartrace.then thevariableelementsareintroduced here which processes are effectively considered elected represented by a variable sub set of process and the tokens that are to be sent between processes represented by variable field tosend .
these canalsobeboundbytemporalfacts like defelected thatforces electedto be initially empty and defines it in each succeeding instant .
to restrict the evolution of the system state formulas formulaswithouttemporaloperatorsorprimedexpressions like init andactionsthatrestrictthesystemevolution predicatesthat relatevaluesfromthecurrentstatewiththosefromthesucceeding one through primed variables like commandnop can be defined.
morecomplexactionsmayusearbitraryltloperators.afact like trace canthenenforcethat globally everystateisreachedbythe application of actions starting at some initial predicate.
model validation lightweight formal specifications are often used to validate design decisionspriorto theemploymentofmore advanced methods.in electrum analyses can be performed by runandcheckcommands theformerinstructthe analyzer tosearchforinstancesthatsatisfy 5a tutorial with the step by step development of this example is available at authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
the electrum analyzer model checking relational first order temporal specs ase september montpellier france figure example trace in the electrum visualizer.
certain properties the latter for counter examples that break desirable properties.
run commands are typically defined as a first step towardsthevalidationofthemodelbygeneratinginstanceswith interesting properties such as consistent in fig.
that asks for atracewhereaprocessiseventuallyelectedleaderusinganltl formula.
commands are always restricted by scopesthat determine themaximum or exactlythe numberofelementsofeachsignature thatwillbeconsideredbytheanalyses.boundedmodelchecking isparticularlyusefulatthisstageduetoitsperformance providing quickfeedbacktotheuser itisemployedifasatsolveroransmvmodelcheckerwiththeboundedoptionisselectedthroughthegui.
aprotectedscope timerestrictsthesizeofthetracestobeanalyzed in this case.
the consistent command will search for instances with at most elements per signature but timesteps.
due to thenatureofthe electrum translationintoltl allinstancesfound by the commands encode infinite traces through looping states.
computer aidedsupportforscenarioexplorationiscriticaltofacilitatethedetectionofproblematicinstancesorillustrativecounterexamplesofthedesiredproperties.toeasethisprocess thebounded engine of electrum allows the user to control the range of trace lengths that will be considered.
by default the timescope determinesthemaximumlength nthatwillbeanalyzed resultingina seamless iterativeprocessthatstartsfromlength1upto n.the search can however be restricted to consider exactlya length nor even a range n..m reducing the effort to find a relevant instance.
theanalyzer providesavisualizerthatgraphicallypresentsinstances found by run and check commands.
this allows for the logic agnostic uniform visualization of traces generated by the boundedandunboundedengines makingthemunderstandablefor stakeholderswithoutexpertiseinformalspecification.itisessentially an adaptation of alloy s visualizer resembling the visualization of projected instances with additional support for navigating infinitetracesthroughloopingstates.thesupportforvisualization themesisalsopreserved.figure 33depictsaninstancefoundforthe consistent run command with states looping back into the 2nd ashighlightedinthegui.theevaluator whichperformsqueries over instances has also been adapted to consider the selected state.once an instance is found it is often useful to navigate through alternativeinstancesthatsatisfy orbreak thespecifiedproperty.
thealloy analyzer through kodkod supports basic navigation by relyingonincrementalsatsolversandapowerfulsymmetrybreaking algorithm quickly generating unique instances in an arbitrary order.
in electrum the sat engine generates instances ensuring that the current target trace length will not be increased until that length is exhausted providing a certain degree of predictability.
at thatpoint seamlesslytotheuser thelengthisincreased ifitisstill within the timescope .
the smv engine also allows iteration but limitedto atmostoneinstance perconfiguration.moreadvanced scenario exploration techniques are currently being studied.
model verification aftervalidation thenextnaturalstepistoverifythecorrectnessof thespecificationbymodelcheckingsafetyorlivenessproperties.
electrum supports assertions specified as arbitrary ltl properties that can be verified within a certain scope by check commands.
such is the case of safetyin fig.
that checks whether at most one process is elected leader at any given time and liveness that checks whether a process will eventually be elected for a universe withupto3processes.thelatterwillactuallyproduceacounterexample unless an additional fact forces progress again specified asarbitraryltlformulas.oncepropertiesareshowntoholdby bounded analysis the less scalable unbounded procedures can provide more confidence regarding the correctness of the model.
this is done by selecting either unbounded nusmvornuxmv through the gui.
scopes on timewill then be ignored as these check for traces with arbitrary length although finite state spaces are still considered i.e.
still at most processes are considered .
theseproceduresrelyon electrod whichconvertstherelational layerintoplainfirst orderlogic whichisthenexpandedinto propositional ltl depending on the possible valuations of sets andrelations inferred from the electrum model and the bounds on first orderdomains.asin kodkod lowerboundsandsymmetries computedby pardinus areleveragedtosimplifytheendresult.the resultingsmv modelfeatures arepresentation ofinferredsystem transitionsas transsections andotherinferredinvariantsandinitialconditions.thedefaultcheckingprocedurein nuxmv relies onthe k livenessalgorithm experiencehasshownthatitisusually more efficient than nusmvby at least an order of magnitude .
several techniques have been studied to improve the scalability of the analyses.
pardinus implements a decomposed model finding strategy with symbolic bounds that concurrently tries to find instances in tighter search spaces .
this strategy is particularly relevantforcomplexproblemswhoseresultisexpectedtobesatisfiable sinceoftentheconcurrentsmallerproblemswillfindasolution faster.
symmetry breaking is properly preserved.
this strategy can beselectedfromthegui eitherpurelyparallelorinahybridmode wheretheoriginalanalysisrunsconcurrently.symbolicboundsare automatically inferred from the signature hierarchy and bounding expressions in field declarations.
currently the problem is automaticallypartitionedbetweenthestructuralanddynamicelements of the specification although criteria based on the dependencies entailedbythesymbolicboundshaveshowntobemoreefficientinsomescenarios whichweintendtoimplementonthe analyzer.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france julien brunel david chemouil alcino cunha and nuno macedo table summary of the performed tests time in seconds .
spec command s n ma mh ba bh xa xh spantree s50 .
.
.
.
.
.
spantree u51.
.
.
.
.
.
spantree u57 .
.
.
.
.
.
spantree s60.
.
.
.
.
.
spantree u65 .
.
.
.
.
.
spantree u645.
.
.
.
.
.
ring s40 .
.
.
.
.
.
ring u41.
.
.
.
.
.
ring u42 .
.
.
.
.
.
ring s50.
.
.
.
.
.
ring u52 .
.
.
.
.
.
ring u58.
.
.
.46t ot o javatypes s30 .
.
.
.
.
.
javatypes u33.
.23t ot o157 .
.
javatypes s40 .
.
.
.
.
.
javatypes u4109 .
.85t ot ot ot o hotel s40 .
.
.
.
.
.
hotel s40.
.
.
.
.
.
hotel u43 .
.
.
.07t o t o hotel s50.
.
.
.
.
.
hotel s50 .
.
.
.
.
.
hotel u513.
.48t ot ot ot o firewire s40 .
.
.
.
.
.
firewire u45.
.
.
.49t ot o firewire u44 .
.
.
.
.
.
firewire s50.
.
.
.
.
.
firewire u59 .
.
.
.73t o t o firewire u59.
.
.
.
.
.
dijkstra s40 .
.
.
.
.
.
dijkstra u40.
.
.
.
.
.
dijkstra u4 .
.
.
.
.
.
dijkstra s50.
.
.
.
.
.
dijkstra u50 .
.
.
.
.
.
dijkstra u5t ot ot ot o7.
.
ertms s20 .
.
.
.
.
.
ertms s285.
.39t o243 .60t o217 .
ertms s29 .
.60t o251 .60t o222 .
ertms u234.
.
.
.
.
.
ertms s31 .
.
.
.
.
.
ertms u3291 .
.22t ot ot ot o evaluation electrum andassociatedtoolsareinactivedevelopmentandpublicly available in open source.
its plug in architecture allows us to quickly supportfuture improvements on satand smv solvers.a repositoryofexamplesisavailable 66whichincludestheconversion of most dynamic alloymodels from the official distribution.
our successfulanswer totheabz18callforcasestudycontributions pushed electrum toitslimitsandisafinetestimonytothepower of the language and tools.
electrum is also being used in an industrial collaboration to formally analyze some safety requirements ofaplatformscreendoorsystemforsubways.theapproachhas allowed us to consider various implementationsolutions actually used in different countries encompassed by a single model.
specification languages as expressive as electrum are scarce.
languages with support for first order logic and dynamic behavior include tla the bmethod andotherdynamicextensionsto alloy atvariedstagesofrobustness .theseformalmethodsareingeneral less flexible than electrum either failing to support rich structural constraints declarative actions or expressive temporal properties with future and past operators resulting in a more cumbersome and verbose modeling process see for a detailed analysis .
the performance of the analyzer for a set of models with both satisfiable s and unsatisfiable u commands i.e.
withandwithoutsolutions andvaryingscope n .theyare availableattheexamplerepository andthe1stcolumnidentifies thecommandswithineachmodel.ascope10on timewassetin allboundedtests.alltestswererunonadualintelxeone5 with36threadsand512gbram sat basedonesusing minisat .
m andsmv basedonesusing nuxmv1.1inbounded b and unbounded x modes.
tests were run without a and with h the hybrid decomposed strategy with automatic decomposition on variable elements and symbolic bound extraction.
timeout was set at10m.innon decomposedsat basedruns ma modelsareeventually converted into plain kodkodwith explicit state as would pure alloyspecifications.thus theyallowustocomparetheperformance of the electrum analyzer with that of the alloy analyzer.
asexpected unboundedprocedures ingeneral scaleworsethan bounded ones despite some exceptions like in dijkstra but also provide additional correctnessguarantees.
bounded smv procedures perform worse than sat based ones again despite the exception in dijkstra .
regarding the employment of the decomposed strategy most gains occur at sat problems as expected .itisparticularlyrelevantinunboundedprocedures manyofwhichwouldtimeoutotherwise like ertms .alsonote that evenwhenthehybridapproachisoutperformed itisneverby a factor higher than .
for problems not solved in a few seconds.
currentlyweareexploringadvancedscenarioexplorationprocedurestailoredfortemporaltraces andhowtoimprovetheperformanceofthe analysisprocedures namelyby extractingtighter symbolic bounds and implementing alternative partition criteria.