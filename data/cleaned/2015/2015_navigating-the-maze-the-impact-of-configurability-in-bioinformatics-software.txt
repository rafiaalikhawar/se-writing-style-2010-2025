navigating the maze the impact of configurability in bioinformatics software mikaela cashman myra b. cohen computer science and engineering university of nebraska lincoln lincoln ne usa mikaela.cashman huskers.unl.edu myra cse.unl.edupriya ranjan robert w. cottingham biosciences division oak ridge national laboratory oak ridge tn usa pranjan utk.edu cottinghamrw ornl.gov abstract thebioinformaticssoftwaredomaincontainsthousandsofapplications for automating tasks such as the pairwise alignment of dnasequences buildingandreasoningaboutmetabolicmodelsor simulating growth of anorganism.
its end usersrange fromsophisticated developers to those with little computational experience.
in response to their needs developers provide many options to customizethe waytheiralgorithmsare tuned.yetthereis littleor noautomatedhelpfortheuserindeterminingtheconsequences or impact of the options they choose.
in this paper we describe ourexperienceworkingwithconfigurablebioinformaticstools.we findlimiteddocumentationandhelpforcombiningandselecting optionsalongwithvariationinbothfunctionalityandperformance.
we also find previously undetected faults.
we summarize our findingswithasetoflessonslearned andpresentaroadmapforcreating automated techniques to interact with bioinformatics software.
we believe these will generalize to other types of scientific software.
ccs concepts software and its engineering software testing and debugging applied computing computational biology keywords configurability bioinformatics software testing acm reference format mikaela cashman myra b. cohen priya ranjan and robert w. cottingham.
.
navigating the maze the impact of configurability in bioinformatics software.
in proceedings of the 33rd acm ieee international conference on automated software engineering ase september montpellier france.
acm new york ny usa 11pages.https introduction bioinformaticssoftwareisbecomingincreasinglysophisticatedand prevalent in its day to day use .
there is a plethora of software also with department of plant sciences university of tennessee.
acmacknowledgesthatthiscontributionwasauthoredorco authoredbyanemployee contractor or affiliate of the united states government.
as such the united states government retains a nonexclusive royalty free right to publish or reproduce this article or to allow others to do so for government purposes only.
ase september montpellier france association for computing machinery.
acm isbn ... .
aligning assembling and analyzing dna sequences or for optimizingandpredictinggrowthinorganismsusingtheirmetabolic networks.
databases have moved to common data formats and models and high performance computing is allowing morescalable computation.
as these bioinformatics systems becomemainstream tools for the biology and bioinformatics community theirdependabilityandreliabilitybecomescritical.scientistsare makingdecisionsanddrawingconclusionsbasedonthesoftware thattheyuse.asinallempiricalsciences theresultsobtainedneed to be repeatable and explainable to others.
yet recent research has suggested that better software engineering practices are neededin bioinformatics software as well as more sophisticated software testing techniques .
adding to this problem is that as the number and types of tools areincreasing theyarealsoincreasinginflexibility.forinstance thebasiclocalalignmentsearchtool blast hasmultiplevariants e.g.webversusstandalone searchingforproteinsversussearching for nucleotides .
the customization and flexibility of these toolsindicates bioinformatics is entering a mature phase of softwaredevelopment that of other highly configurable software.
most tools nowprovide the enduser with manycustomization options.
the command line version of nucleotide blast blastn has over options that a user can modify when running a search.
these options determine how an alignment search is conducted e.g.
what length subsequences to use in matching or how the resultsarefilteredbasedonqualitythresholds .ashasbeenwell documented in the software engineering community this leads to abroadspectrumofbehaviorsandchoicesforendusers yetitalso creates some potential pitfalls.
researchinthesoftwaretestingcommunityhasalreadyextensively studied the impact that configurability has on testing and faultdetection.
faultsmaybe visibleunderonly specificcombinationsofconfigurationoptions anddifferentcodepathsofaprogram are executed under different combinations of options whichhasledtomanyautomated configuration aware testing techniques.
while much of the literature on configurability from the softwaretestingcommunityfocusesoninteractionfaultdetectionor performanceissues configurabilitymay lead to more subtle issues in a scientific domain because scientific softwareoftenusesheuristicoroptimizationapproachesforsolving problems.
some recent research has looked at variability in programsthatcalculatepartialdifferentialequations and fornumerical solvers but thesearenotin thebioinformatics authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france m. cashman m. b. cohen p. ranjan and r. w. cottingham domain.
recent work that studies bugs in scientific software doesnotaddresstheseissuesofconfigurability nordoesotherwork ontestingbioinformaticssoftware .morrison smithetal.
examinedhowendusersinteractwithbioinformaticssoftware .
users in their study were quoted as saying i don t necessarily know enough to make sure i m picking our settings correct.
and at the end of the day you just have faith that the program s working or not.
indicating that the user community needs support in understanding configurability and dependability for such systems.
as researcherswhohavespenttimeworkingwithmultiplebioinformaticssoftwareprograms andwhohaveexperiencewithconfigurablesystems wehaverunintomanyoftheseproblemsourselves.
this has led us to ask what the impact of configurability is on this domain of software tools and what the implications might be on the research productivity of the broader community that uses these on a daily basis.
we also want to understand if existing configuration aware techniques can help improve this domain.
inthisexperiencereportwesetouttoanswerthesequestions and to provide insights for users and developers of bioinformatics software.
while we focus on a single scientific domain we believe these results may be more broadly applicable.
we learn that configurability does impact bioinformatics software.
more specifically theconfigurationspacesarenon trivialtonavigateandcorrectly model thefunctionaloutcomes andthoseconfigurationoptions that control them are not always easy to identify performance may be impacted sometimes significantly and configuration dependent faults exist.
the contributions of this paper are alargecasestudydemonstratingourexperiencewithmodi fyingconfigurationsinthreecommonlyusedbioinformaticssoftwaresystemsacrossfourdifferentconfigurationmodels evidence that there is variability in both the functional and performance outcomes of these systems asetoflessonslearnedandrecommendationsfordevelopers and testers of these systems.
therestofthispaperisorganizedasfollows.inthenextsection we provide some motivating examples.
we follow that with a case study and results in sections 3and4.
we then present some discussion lessons learned and suggestions for improvement in section .
we end with conclusions and future work in section .
motivating examples thebioinformaticssoftwareusercommunityisbroad thereforedevelopersshouldconsideraspectrumofusers.fig.
1showsthethree primaryusersthatweconsiderinthiswork.atthetoplevelarethe domain experts or non software experts .
these users have a deep understanding ofthe biological problems theyare trying to solve butwillunlikelybefamiliarwiththeconfigurableoptionsand or knowwhichdefaultsaresetinthesoftware.often theyworkfrom a user interface that limits their options with respect to configurability.weexamineonemodelinourstudythatisgearedtowards thisgroup.aspointedoutbyjinetal.
configurablesystems usually have multiple ways to interact with configuration options biologist developer bio informatics researcher !
!
!
figure three primary users.
and the highest level such as menus or a graphical interface often only provide a subset of those options.
the next type of user in this figure is the bioinformatics expert user who has both a deep knowledge of the biological domain and with computation and automation.
this type of user will often run experiments using scripts and will have some knowledge of which configuration options can be altered.
however they are unlikely tounderstandthefullimpactofthosechanges nordoweexpect them to be experts in software development or testing.
finally the expert developer is someone with extensive developmentexperiencewiththedomain whohasalsobuilttheapplication.
they will be familiar with all of the configuration options and will haveexperimentedwitheach however theymaylacktechniques andmethodstotestthelargeconfigurationspaceforcorrectness or to optimize and determine the best default values of each.
during the course of this experience report we have acted in thefirsttworoles bothasbiologistendusersandasbioinformatics specialists .
we have also reached out to developers with our findings and report on all of those experiences here.
wenowpresenttwomotivatingscenarios.thesearebasedon recentinteractionswehavehadwithseveralpopularbioinformatics software systems.
scenario one wefirstdescribeourexperienceusinganexisting popular bioinformatics tool basic local alignment search tool blast .
fig.
2shows a set of configuration options for the online nucleotide blast query system blastn which searches a single or multiple database for the match to a single or multiple sequence viaqueries .theusercansimplyrunaqueryortheycanopenascreenthatallowsthemtochangethecoresearchalgorithm options.
we show this screen in fig.
.
users can change any or all oftheseoptions.inthisscreentherearefivepulldownmenus five checkboxes andthreetextboxesthattakenumericinputs fora total of configurable options.
each of the pull down menus has a number of values or options that can be selected.
suppose we limit exploration to just four options for each of the pulldownmenusandtextboxes.thisleadstoapossiblespaceof 25x48 whichisovertwomillionconfigurations.wecanreduce thisslightlyifoneconsidersthedependencybetweenthecheckboxspecies specificrepeats boxedinredinthefigure anditsassociated pulldown sincethatisonlyactivewhentheboxischecked butthisalsocomplicatesthemodelingandexplorationoftheconfiguration space because that dependency must be satisfied.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
navigating the maze the impact of configurability in bioinformatics software ase september montpellier france figure blastn online algorithm configuration options.
boxed elements are discussed in the text.
in this system each of the blue circled question marks provides userhelp.forinstance the match mismatchscores pulldownlist showsthefollowingtextwhenthequestionmarkisclicked reward and penalty for matching and mismatching bases.
more... .i fo n e clickson more theyaretakentoawebpagewithalongdescription oftheseconfigurationoptions.thisishelpfultoanexpertuser but may confuse other users and still leaves the bioinformatics expert withalessthandesirableoutcome.wealsonotethatthecommand line version of this tool lacks the same level of help.
eveniftheconfigurationoptionsmakesensetothebioinformatics expert the actual practical impact on the returned sequences from the query when changing this option is unknown.
biologists often develop a lab loreof what to change and often leave the rest oftheoptionsalone.toactuallyunderstandthefullimpact abi ologist would need to set up a series of interactive experiments.furthermore this is just one configurable option.
if we considercombinations with other choices the number of configurations grows exponentially with the number of configurable options.scenario two we next describe our experience with an application that assembles a set of short dna strings called readsinto larger continuous strings called contigsusing an online web interface i.e.
again from a biologist s perspective .
we attempted to recreate data from a tutorial for an application called megahit from the department of energy systems biological knowledgebase kbase .
the web version is simply a wrapper for a commonly used command line tool also called megahit .
we used the default values for each of the configuration options usedinthetutorial.wenoticedthatoneconfigurationoption kmax did not make sense since it represents a read length thenumber of elements in the sequence to read and was set to higherthantheinputsequence usedinthetutorial typically something auser will notdo.
weran the applicationanyway and gotacompletedassemblywith284contigs.wethenreadthelog andnoticedthatthesystemreporteditchangedthek maxforus to .
but this was done silently no notification and was onlyfound by our exploration of the log.
this number is also greater thanthemaximumreadsizefromtheinputsetofreads.wethenranthetoolandsetthek maxto119.thistimewesaw285contigs andthusinconsistentresults.lastwesetthek maxto99 below the read length and expected toseeone ofthe abovenumbers but instead got contigs.
we contacted a developer of the web app and were told that theproblemisduetoedgecases.themismatchisduetotheuseof configuration options that combined with the input data do not make sense and that the system autocorrects for us.
however the software did not document this clearly to the end user.
sincethe software was modifying values automatically to correct the incorrect k max option value we were getting inconsistent results.
thedeveloperconfirmedthatthisisabugandsaidthattheywould fix this in a future release.
these scenarios lead us to ask what the situation is like for thevarioususersofbioinformaticssoftwareandwhattheimpact of modifying configuration options might be.
we do not expect broadexpertiseinsoftwareengineeringfromtheseusers therefore we want to understand what the implications might be for those usingthesesystems.wealsowanttounderstandifconfigurationaware techniques can help to uncover differences in either or both functional and performance outcomes of these tools and if there is a cautionary tale for this community.
our answer for both is yes.
case study experimenting with configurations in this section we present our case study.
we explore the following research questions rq1 does manipulating configurations in bioinformatics software lead to failures?rq2 whatistheimpactofmanipulatingconfigurationsonprogram behavior?
to answer this we ask two sub questions a what is the impact on program functionality?
b what is the impact on program performance?
our last research question focuses on the ability to use common sampling techniques that might reduce user effort and improve scalability when exploring configuration options.rq3how effective is sampling in these configuration spaces?
.
bioinformatics programs weselect three bioinformaticsprograms all of which areconfigurable and all available for different types of end users.
these tools come from three different areas of study genome annotation genome assembly andmetabolic modeling.
in themetabolic modeling tool we study two different versions.
the first is meant for non expertusersandrunfromagraphicaluserinterface gui .the second is geared towards the experienced bioinformatics user and run on the command line.
this gives us four unique configuration spaces.
for each area we chose a tool that is widely used is configurable hassometutorialorotherdocumentationthatprovides common inputs along with expected outputs to avoid author bias and can be run through automated scripts.
table1showsthethreebioinformaticsprogramsubjectsalong with the lines of code loc using cloc .
we describe each application below.
we also show the total number of configuration options alongwiththosechosenforeachmodelbrokendownby type.
for example the fba mfa subject has boolean and authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france m. cashman m. b. cohen p. ranjan and r. w. cottingham floatoptions.lastwegivethesizeofthefullconfigurationspace including constraints section .2contains details for each model .
table case study subjects blast megahitfba gui mfa loc config.
opts.
configuration options selected for model boolean int float string total config.
space .
x .blast our first subject is nucleotide blast basic local alignmentsearchtool blastn apopularbioinformaticstooldeveloped by the national library of medicine .1given an unknown dna sequence a query the application attempts to align the sequence to a database of known dna sequences in order to learn its likely function.
matches are returned with quality scores percentage id ande values thatindicatehowconfidentthesearchiswithrespect toeachpossiblematch.thequeriescanberunforeitherasingle dna sequence or a set of dna sequences.
we use as our input query a file of sequences from a yeast organism saccharomyces cerevisiae also known as baker s yeast .
this input was used as an example in a tutorial on blast for bioinformatics researchers at our institution .
our other subjects are the two most commonly used analysis tools taken from the open source github repository of the u.s. departmentofenergy ssystembiologyknowledgebase kbase .
we can confirm results using their online web interface and are able to use their tutorials to obtain sample inputs outputs along with descriptions of how each of the tools are used.
at the time of this study kbase has apps deployed providing a wide range of functionality including next generation sequence analysis tools dnasequenceassembly annotation andmodelingofmetabolic pathways.
kbase tools have been used in over publications and the methodsimplementedin thetoolsin thousandsof publications.
.megahit ournextsubjectisthednaassembler megahit .
thekbasetoolisawrapperforanexistingversionofmegahit .
when dna is sequenced the result is a set of small sequences of base pairs called reads.
in order to combine these small sequences assemblyisusedtoconnectthemtogetherintolongersequences calledcontigs.thishasbeenused1 120timesinsideofthekbase narrativeasofapril .weusethedefaultpaired end library fromkbasewhichcontains386 106readsalloflength100basepairs bp from the rhodobacter bacterium.
this library is used in the kbase online tutorial .
and4.
flux balance analysis the last program is a metabolic modelingtoolkitthatperformsafluxbalanceanalysis fba .the metabolismof anorganismcan bemodeledas aset ofconcurrent 1theblastsoftwarecontainsdifferentvariants.table 1showsthelocforthefull blastsoftwaresystem.weutilizeonlyonevariantofblast blastn inthiswork.chemical reactions a reaction network .
fba optimizes reaction fluxes flows throughanorganism smetabolicreactionnetworkto predict the organism s growth .
it uses linear programming as the underlying optimization technique.
we utilize the open source standalone version toolkit of the fba from the kbase github software distribution kit .
kbase has a web version of the fba application werefertothisasthefba guimodel thathasbeen run times as of april .
the standalone toolkit we call thisthefba mfa hasalargersetofconfigurableoptionsavailable totheuser.asubsetoftheseoptionsareavailablewithintheonline version in kbase.
to understand if the web narrative provides similar behavior with respect to configurability we model these independently.wefixtheorganism escherichiacoli andgrowth medium carbon d glucose tomatch that of the online tutorial which describes how to use fba in kbase.
.
creating the models our first step is to develop configuration models for each application weprovidetheseonthesupplementarywebsite .2weuse available documentation such as tutorials the application interface online documentation and we hold discussions with domain experts.
since we are evaluating functionality as one objective we try to avoid modifying configuration options that are clearly functional therefore we leave those out of our models.
for example we do not change the growth media in fba as that will clearly impacthowtheorganismgrows.otherconfigurationoptionsare removed for reasons including dependencies with default configurationoptions theyonlyimpactoutputformatting filter threshold and unique string values that could not be put into equivalence classes.
in choosing the values for the configuration options we always include the default option and then try to evenly distribute equivalence classes for other values when it makes sense.
we rely heavily on guidance from the documentation or online developer forums to determine values.
we found that it was non trivial to construct a configuration model for each subject.
some configuration options are ill defined thereisalackofdocumentation orthereareconflictingsummaries in multiple help documents.
we also found that the explicit ranges of values are often missing and we had to reverse engineer default values.wewerequicklylostinthemazeofconfigurationoptions.
in order to find our way out we communicated with developers andexpertusersofthetoolstoidentifyconfigurationsofinterest for each model.
we discuss some of these experiences next.
blastwe beganwith thefull listof commandline configurationoptionsfromtheusermanualandscheduledtwoconsultations with an expert user who is not one of the authors of this paper .
the user was only familiar with some of the configuration options thereforetheirinputwasuseful butwestillranintoseveralchallenges.
we first removed any clearly functional string and setconfiguration options giving us an initial model of configurationoptions.however inrunningpreliminaryexperiments weran through a total of five iterations of the model due to errors and inconsistencies in the documentation.
at each step we had to stop andtracetheerrorsbacktotheircause.duetospaceconstraints 2supplementary dataset authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
navigating the maze the impact of configurability in bioinformatics software ase september montpellier france wedo notlist themall butsummarizethe keylearning points.in preliminary testing we came across one error blastquery optionserror greedyextensionmustbe used if gap existence and extension options are zero.
please refer to the blast user manual.
this error message is due to incompatible configuration options but does not name them.
after searching web forums with little success we searched the source code and found that the no greedy option had constraints.
the configuration option no greedy can notbeusedwhen gapopenandgapextend arezero.inourmodelwe were not changing these values because they are functional and their default is therefore we are unable to include the no greedy option in our model either.
table blast configuration model option name type values dust string yes no soft masking boolean true false lcase masking boolean true false xdrop ungap real0 .
.
xdrop gap real0 .
.
xdrop gap final real0 .
.
ungapped boolean true false table megahit configuration model option name integer range values min count k min odd only k max odd only k step even only constraints k min k max k step k max k min table fba configuration models option name type values flux variability analysis boolean true false minimize flux boolean true false simulate all single kos boolean true false maxc float maxn float maxo float maxp float maxs float example of additional mfa options maxdrain float mindrain float0 deltagslack float find min media boolean true false allrevmfa boolean true false usevardrainflux boolean true falsewealso discoveredconfigurationoptionsthatbehaveasfilters thatwerenotobviouswhenstudyingtheusermanuals.identifying suchfunctionaloptionswasahardtask.evenafterlookingthough two user manuals and consulting two users some configuration options functionalitywerestillnotclear.the word size optionwas removed as it was discovered to be a filtering configuration option and would clearly change the functional outcome of the query.
we discuss the importance of this in section .
onemodificationtothemodelwastriggeredbyasanitycheckwe performedtoconfirmthedefaultconfigurationreportedinthemanuals was in fact the default.
we compared the configuration option manuallyset blastn db query out word size11 dust soft maskingtrue xdrop ungap20xdrop gap30 xdrop gap final100 window size40 off diagonal ra nge0 .tooursurprise theresultswerenotthesame.wefirstreferred back to the manual and command line help menu to ensure thedefaultvaluesoftheconfigurationoptionswerecorrect they were .aftercontinuedinspectionwenoticedanimplicitconfigurationoption called task thatdidnothaveitsowndeclarationinthe manual or the help menu.
blastn can be used with four different tasksand we use the default.
however the default value listed for a blastn option we do use window size is for a different task and the task we use has no default value listed for window size.s o we removed window size fromourmodeltoavoidthisconstraint.
there are no constraints in the final model.
megahit .therearesevenconfigurationoptionsaccessiblefrom thewebinterface.manyoftheseoptionsdeterminealistofinteger valuescalledthek list.thiscontrolsthelengthofthesub string usedinthedatabasesearch.forexample wecanseta k min k max andk steporexplicitlysettheentirelistwiththe k listconfiguration option.similarlytheoption parameterpreset isadifferentmethodof fixingthesameoptions weexcludebothfromthemodelbecause they impact functionality.
we also fix the configuration option min contig length because it directly impacts our functional result.
weconfirmedthismodelwithakbasedeveloper.whenworking withthismodelweranintoseveralissuesofconsistencywhichwe discussed in section .
themegahitmodelhasconstraintsbetweentheconfiguration options such as k min k max .
this constraint was not listed in the documentation but is considered common knowledge min shouldbelessthanmax andwasmentionedtousbythedeveloper.
wealsoconfirmedthisconstraintbyrunninginitialexperiments wherewereceivedanerrormessage.althoughitproperlyreturned anerror themessagewasnotdescriptiveenoughforanend user tounderstand.thefinalmegahitmodelisintable 3andhas4 configuration options.
fbafor the fba gui subject we first fixed all of the input files describing the growth conditions and ruled out configuration options that were of type set.
set options were removed as the numberofconfigurationoptionsisontheorderof10258withno logical method of partitioning.
we also do not use an optional input expression data set to keep the experiment simple.
there was one float type configuration option that was not included in thecommandline versionofthetool soitwasexcludedfrom the modelaswelltoensurewecouldcomparethetwo.table 4displays the configuration options for the fba models.
the fba gui model authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france m. cashman m. b. cohen p. ranjan and r. w. cottingham consists of the first eight configuration options three boolean and five floats evenly partitioned into five values.
thefba mfamodelcontains27additionaladvancedconfiguration options five of which are displayed in the table.
the complete fba mfa model contains configuration options boolean and floats evenly partitioned into five values.
there are no constraintsineithermodel.webelievethatthelackofconstraintsmay bepartiallyduetoourselectionofconfigurationoptions andleave further exploration of this as future work.
.
measures of variability forprogramfunctionalitywechoosecommonusecasesforeach tool.
for performance we measure the program execution time in seconds .
we describe each of the functional metrics next.
in blast the input is a set of query sequences of unknown function that are checked against a database of query sequences.
there are two main use cases the user inputs a setof query sequencesandthenlooksatthebestqualityhits definedas100 basepair matches and an e value of .
or the user inputs only onequerysequenceatatimeandchecksforanyhitsagainstthat sequence.
we explore both use cases.
in the first since there are largenumbersofhitsreturned welookatthetop5 and100 highest quality hits and compare them to the default top .wekeepthenumbersmallsincetheanalysisofthereturned hitsisoftenamanualeffortbytheuser.forthesecondusecasewe count the number of hits for each individual query sequence.
megahitisusedtoassembleshortdnareadsfromsequencers into continuous dna sequences.
the functional dependent variable is the number of contigs generated.
this represents how many continuous reads of dna the algorithm was able to assemble.
the objective of the tool is to get the smallest number of long contigs.
the result of the fba analysis is called the objective value ov in our tool.
we use this as the functional output.
.
experimental setup theblastmodelhasaconfigurationspaceof3 000whichissmall enough for us to enumerate and evaluate.
we exhaustively run allconfigurationsforourexperiments.werunthecommandline blastnversion .
.
on a linux cluster with jobs in parallel each job on node with 5gb memory.
the configurationmodel for megahithas configurations.
we exhaustively run all configurations in this space as well.
the megahit app is version used is .
.
in kbase.
we run these experiments in parallel on virtual machines.
each machine runs centos x86 64 with gb disk and 2mb ram.
the fba subjects source code is extracted and run on a linux cluster in order to scale the experiments and not overload the kbase servers.
since the total configuration space for fba mfa is too large to study .
x we randomly selected of these combinations.
we use fba version .
.
running 000jobs in parallel each job on node with 10gb memory.
in order totest allconfigurationsin thefba gui model we testit directly from the mfatoolkit also running jobs in parallel.
we also test and confirm that our functional results matched on a sample of these when running manually in the kbase online narrative.inearlyiterationsofourstudyonfba mfa someofourruns were hanging not completing overnight and this caused the experiments to stop.
we added a timeout factor of seconds to prevent this problem and kill any job that goes beyond this time.
we note that we did have some runs of exactly seconds seen in our data that did complete and produce valid outputs.
we donot explore the best cutoff time further in this work but believe these are outliers.
.
sampling toevaluaterq3weappliedacommonconfiguration awaretesting technique combinatorial interaction testing cit .
cit combines all t way combinations of configuration options together in at least one run of the sample.
research in traditionalsoftware testing suggests that tbetween and should be sufficientandthat2or3findsmostfaults .weusedstrength2to 6inourstudy.weusedthecasatool forourlowerstrength samples but were unable to build some of the higher strength samplessousedtheacts toolforthose.whenusingcasawe generated samples since it uses randomness and each sample is different.withactsthegenerationwasdeterministicthereforewe have a single cit sample.
we also applied a variant of option wise testing which has been used in configuration performance tuning.option wisesamplingimpliesbinaryconfigurationoptions andtestseachconfigurationoptionbeingenabledoncewhilethe remainingconfigurationoptionsarealldisabled.sincetheconfiguration options in our models are not all binary we instead usethe default configuration setting as our baseline.
then for each configurationoptionandforeachvalueoftheconfigurationoption we change that one option in the default configuration.
results in this section we present the results for each of our research questions.
we discuss the implications in section .
.
rq1 failure detection blastwe went through several iterations of the blast model discussedinsection .
inwhichweranintomanyerrormessages.
howevertheseturnedouttobeduetoincorrectconfigurationsand violated dependencies.
once we fixed these we did not find any other errors while running the configurations.megahit 23configurationsfailed .
.fiveconfigurationsreported an error occurs when running sdbg builder count read2sdbg and configurations reported the error error occurs when assemblingcontigsfork error.wecontactedthedevelopersandwere toldthatbothcasesarevalidconfigurations butincompatiblewiththe input data.
the first is due to setting two configuration options k minandk max bothto141.theseconderroronlyoccurswhen k min and mincount .
in these cases the program should haveresultedinnocontigs butproducedanerror.wenotethatwe worked with bioinformatics experts who use this tool to model our configurationspace thereforethesearenotobviousedgecases.the developer explained that these are both cases where there were no assembledreadsandthetoolwasfailingungracefully.wedidsee 35more caseswhere therewas noassembly butthesedid notfail soweconsidertheminrq2.intotal237outof260configuration ran without errors.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
navigating the maze the impact of configurability in bioinformatics software ase september montpellier france fba mfa of the configurations tested .
of these configurations failed.
we see five distinct error messages table5summarizes these .
runs timed out after seconds.
44configurationscausedanerrorinthelinearprogrammingsolver called scip .
testsreported anobjective value ov of negative howeverthesmallestovshouldbe0.atotalof447runsaborted and were segmentation faults.
table fba mfa errors total runs timeout .
scip error .
negative ov .
aborted .
segmentation fault .
total w out errors .
wefirstre rantheseteststoconfirmthatthefailuresweredeterministic and then we reported some of these on the kbase help forum and communicated directly with developers of the fba program.severaloftheerrorswereconfirmed.somewereunsurprising againduetononsensicalcombinationsofconfigurationoptions but some were also tagged as real bugs that should be fixed via patches to the program.
in response to the scip error the help board told us it was due to the linear programming solver not the fba.
we got slightly different feedback from the developer who wasconfusedbytheerror.theresultingovvalueitgivesuswhen this occurs is no growth so the functional result is correct.
the aborted error is a memory allocation issue in the c code.
we are continuing dialog with the developer to investigate this further.
we discuss more developer feedback in section .
fba gui of the combinations of these combinations resultedinanerror.allwerethesciperror similartothefba mfaexample .weconfirmedsomeofthesewithinthekbaseonlineguitoensurethattheerroroccursthereaswell.allagainreturnedthe correct zero ov no growth but there was an error reported in theonlinelog.inthiscasetheerrormaynotbeobvioustotheuser becausetheguihandlesthisgracefullyandreturnsaresult.the user must examine the log explicitly to see the error.summary of rq1.
three of the four applications suffered from failuresduetoususinginvalidcombinationsofconfigurationoptions i.e.
missed dependencies .
we also saw some errors that are duetoeitherexternallibraries linearsolvers orthebioinformatics application itself.
.
rq2 a functionality blastwe examined two different use cases for blast as discussedinsection .
.forusecase table 6displaysthecount of top x hits that match the default settings exactly in terms of sequence id and order in in list .
for example the count for top meansthat2 ofthe3 000configurations top5 hitsmatchthe top5 hitsfromthedefaultconfiguration.
overallweseethat2 3of theconfigurationsdonotvaryinthetop20hits.theremaining have a different list of hits than the default.
if we look at thetable blast functional variance for use case count percent hits match top .
hits match top .
hits match top .
hits match top .
total in sample top hits only configurations gave the same result as the default options.
for use case we look at all input sequences as individual test cases .
we see that over half .
never findahitacrossall3 000configurationswhichistypicalbehavior.
another .
of the query sequences always have or hits no variation .
the remaining .
of the query sequences have a varying number of hits across the configuration options we explored.
table blast functional variance for use case total query sequences sequences w out variance hits .
sequences w out variance hits .
sequences w variable hits .
megahit of the configurations we removed the that resultedinanerror.another35 .
resultedinzeroassembled contigs and produced no output.
therefore the total number ofconfigurations that gave valid assemblies was .
in fig.
3we show the number of contigs for the configurations with a valid assembly ofatleast1 .weseealargevariationinthenumberof contigs.
the median number of contigs is but the variationrange is from to contigs.
this means that configurations explored have a large impact on the functional result of megahit.
contigs figure3 megahit theredhorizontallinerepresentsthedefault number of contigs at .
fba mfa we removed the error configurations from the functional analysis.
of the remaining configurations we saw39uniqueobjectivevalues.thissuggeststhattheconfiguration authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france m. cashman m. b. cohen p. ranjan and r. w. cottingham options we are changing have a large impact on functionality.
the majority of thecombinations .
do not grow resulting in an ov of zero.
this is interesting because we fixed the input model and growth media to match that of the online tutorial using all default values and that always grows .
.
fig.
4shows a distribution of ovs with the x axisrepresenting ovs and the y axisrepresentingthe count.note thatthe leftmost bar a zero ov iselidedtofitintothisgraph.wehaveidentifiedthedefault growthonthegraph.itturnsoutthatthisisnotthemostfrequently observed positive ov.
but it is second occurrences to a slightly higher ov that occurs times.
this suggests that the default values are not optimal for this very common organism.fba gui for these tests we saw four unique objective values .
compared with the fba mfa tests this has less variation.however themajority stilldonotgrow.only18.
match the online tutorial with default values and interestingly wecannotobtainthehigherovvaluesusingtheguivariantof this application suggesting that the configuration options of thecommand line tool provide additional functional benefit to this application or they are modifying the fixed media indirectly .
table fba gui functional variance ov frequency .
.
.
.
.
.
.
summary of rq2 a .
wesawfunctionalvariabilityinallofour subjects.
the implication for reporting scientific results may be significant.thegreatestvariabilitywasinmegahitsignalingthe configuration options in the model may be related to functionality.
.
rq2 b performance blastforblastwedidnotseemuchvariationintheruntime.
most configurations run in seconds test cases and the remaining tests run in seconds.megahit weseealargevariationintheruntimeoftheteststhat produce assemblies.
fig.
5shows a boxplot with a median runtime of313secondsandarangefrom145to1 148seconds.allteststhat lead to an error run in seconds.fba mfa the runtime varies by configuration from less than second to the timeout of seconds.
.
of the tests finish in under seconds.
we also see a variance in runtime within the same ov shown in fig.
6with the x axisrepresenting the ov values and the y axisrepresenting the runtime in seconds.
most oftheovvalueshaveamedianruntimebetween6and40seconds buttherearemanycasesofoutliersthattakesignificantlylonger to run.
this tells us we can achieve the same objective value in somecasesin1or1 000seconds.wealsoconfirmedtheseruntimes areconsistent.werandomlypickedfourovsandranalloftheir combinations 562intotal 10timeseach.therewasalowvariance across each the runs median of .
seconds .fba gui alloftheconfigurationsfinishedinlessthan42seconds withthemajority .
finishinginunder12seconds.weseetheleastamountofvariabilitywhentheoviszero themodeldoesnot grow .
howeverit canstillfail togrow but take upto21 seconds.
the non zero ovs all have a median runtime of seconds but can range up to seconds.
similar to the fba mfa model we see we can achieve the same ov with different runtimes as seen in fig.
.
summaryofrq2 b .
fortwooftheapplications theperformance wasnotimpactedbymodifyingconfigurations.however in fba theperformancevariesquiteabitbyconfigurationanditispossible to get the same ov with very different runtimes.
.
rq3 sampling forthisrqwewantedtounderstandifsomecommonsampling techniques can be used for efficiency.
we leave a full analysis asfuture work.
we only present data from the two fba tools since we could not exhaustively test those configuration spaces.
fba mfa resultscanbeseenintable .forfunctionaloutputwe see that a way cit sample only produces three unique objective values compared to the we saw in our large sample.
we don t see at least half of these unique ovs until we scale up to a way cit sample.
similarly if we analyze the samples for errors wedon tconsistentlyseeallfiveerrors untilthe4 waycitsample.
this suggests that the software has higher order interactions.
the option wisetestingmethodonlycapturedfiveuniqueovsandonly one of the errors.fba gui results can be seen in table .
the total number of uniqueovvalues inallthesamples showthatthecitsamples can sample the gui functionality.
the scip error doesn t show up consistently in at least half the runs until the way cit sample.summary of rq3.
the way cit samples detected functional variance and all errors using only a fraction of the configuration space howeverthelowerstrengthcitwasnotaseffective.optionwise testing did not prove effective in this case.
the results do suggest there is potential for sampling to help improve efficiency.
discussion and lessons learned further developer feedback oneofthedevelopersofthefba tools was very responsive to our information sharing and confirmedthatthistypeofanalysiswouldbeusefulfordevelopers.he confirmed that many of these errors are due to real faults in the system.
some were unsurprising to him because they were due to combinationsofconfigurationoptionsthatwerenevermeanttobe runtogether someotherswerepuzzlingandarebeingexamined now to find the root cause for a bug patch.
we believe the first set of errors can be fixed by either preventing their combination fromhappening via code or through better documentation.
the second classoferrorswillleadtoprogramrepair bothvaluableadditions.
he provided us additional feedback including itwassurprisingtoseesomeparticularconfigurationsresult in a positive ov value meaning the organism grew.
according to his expertise these should not have grown signaling a possible bug.
he was surprised that some cases of a zero ov no growth tookasignificanttimetorun suggestingcasesofnogrowth are not currently optimized in the code.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
navigating the maze the impact of configurability in bioinformatics software ase september montpellier france figure mfa boxplot of the frequency of ovs returned from the fba analysis.
table fba mfa sampling results way cit runs way cit runs way cit run way cit run way cit run option wise run random run average in sample average uniq ovs errors times seen in total of runs timeout scip aborted segmentation negative table fba gui sampling results way cit runs way cit runs way cit runs way cit run way cit run option wise run total configs average in sample average uniq ovs errors times seen in total of runs scip 1000runtime seconds figure5 megahit runtimes.theredhorizontallinerepresents the default runtime of seconds.
he remarked that the scip error was both interesting and confusing and asked for more analysis to help them locate the bug s .
in summary the developer was able to learn about unknown errorsand learnaboutnewwaystopotentiallyoptimizeruntime.
he also asked us for more details of our analysis and is actively workingonrepairingtheseissues.finally heaskedustorunadditional experiments with his models to explore some additional configuration options.
formegahit thedeveloperplanstoupdatethedocumentation duetoourfeedbackwhichmayhelptoimproveuserunderstanding and experience of that tool.
.
lessons learned we learned several valuable lessons about configurable bioinformaticssoftware someofwhichwebelievecanbegeneralizedto other scientific software.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france m. cashman m. b. cohen p. ranjan and r. w. cottingham figure fba mfa boxplot runtime per ov .
.
.
ovtime seconds figure fba gui boxplot runtime per ov.
the meaning of configuration options and constraints betweenoptionsareoftennotclearlydocumentedoreasyto extract even by experienced users.
changingconfigurationoptionscanhavealargeeffecton functionalityanditishardtodeterminefromdocumentation which configuration options matter.
determininganexactfunctionaloutput oracle fortheproblem was not straight forward.
this suggests that the results of some experiments using these tools can be left open to interpretation.
thesamefunctionalitycanbeachievedwithvaryingperformance.
unknownandunexpectederrorsexistinthesesystemsunder specific configurations of parameters.
sampling may be an effective tool for testing these systems but needs more exploration.
.
suggestions for improvement create clear distinctions between functional and performanceparameters.
despiteoureffortto excludefunctional options we were unsuccessful.
we suggest developers divideconfigurationoptionsintoclassesbytheirintended impact on functionality and document this well.
provide automated and transparent methods for han dling dependencies.
we founddependenciesthat caused errors andonetoolautocorrectedtofixdependencies.bothcaused problems.
we believe that developers should provide automated techniques to avoid incompatible options but thatthedependenciesshouldalsobeclearlyexplainedtothe end user.
provideautomatedtuningalgorithms.
despiteourcombined expertise with these tools and our discussions withexpertdevelopers we foundthat therewas noexplanation for some of the behavior we observed.
there is an opportunityfordeveloperstocreateautomatedtuningalgorithms toguidealllevelsofuserswhenmanipulatingandexploring configuration spaces.
developerscanbenefitfromautomatedconfigurationaware testing techniques.
ourexperimentssuggestthat developerscanutilizeexistingautomatedconfiguration aware testingtoolstobuildmoredependablesoftware.notonlycan it help them find latent faults but it can help to understand the differences in functional and performance variance.
conclusions and future work bioinformatics software is increasingly being used by different typesofusersandhas becomehighlyconfigurable.wehavestudiedthisissuetolearnhowwecanbuildautomatedtechniquesfor thesetools.weshowviaacasestudythatmanipulatingconfigurationoptionsinthreepopularbioinformaticsprogramscanlead to lots of variability.
we find the functionality of these systems are dependent on the chosen configuration options.
we also find that understandingtheconfigurationmodelsandunderlyingconstraints isnon trivialandthatdeveloperscanbenefitfromconfigurationaware testing tools.
last we see that common existing sampling techniquesmaybebeneficial.wehaveprovidedasetofactionsthat developers can take to improve the repeatability and dependability of these systems.
infutureworkweplantobuildautomatedapproachestohelp address the problems that we found.
we may leverage existingframeworks such as spl conquerer which has already been used in the scientific domain and will explore domain specific languages to help the users.
we also plan to expand our modelsto incorporate more complex constraints.
so may requireadapting work from .
finally our approach to creating the configurationmodelswaslargelymanual.weplantoautomatethis process as seen in other work .