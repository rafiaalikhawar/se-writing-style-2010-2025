warningsguru integrating statistical bug models with static analysis to provide timely and specific bug warnings louis philippe querel department of computer science concordia university montreal qc canada l querel encs.concordia.capeter c. rigby department of software engineering concordia university montreal qc canada peter.rigby concordia.ca abstract the detection of bugs in software systems has been divided into two research areas static code analysis and statistical modeling of historical data.
static analysis indicates precise problems on line numbers but has the disadvantage of suggesting many warning which are often false positives.
in contrast statistical models use the history of the system to suggest which files or commits are likely to contain bugs.
these course grained predictions do not indicate to the developer the precise reasons for the bug prediction.
we combine static analysis with statistical bug models to limit the number of warnings and provide specific warnings information at the line level.
previous research was able to process only a limited number of releases our tool warningsguru can analyze all commits in a source code repository and we currently have processed thousands of commits and warnings.
since we process every commit we present developers with more precise information about when a warning is introduced allowing us to show recent warnings that are introduced in statistically risky commits.
results from two oss projects show that commitguru s statistical model flags and of all commits as risky.
when we combine this with static analysis in warningsguru the number of risky commits with warnings is for both projects and the number commits with new warnings is only and .
we can drastically reduce the number of commits and warnings developers have to examine.
the tool source code and demo is available at ccs concepts software and its engineering software maintenance tools keywords static analysis statistical bug models warningsguru acm reference format louis philippe querel and peter c. rigby.
.
warningsguru integrating statistical bug models with static analysis to provide timely and specific bug warnings.
in proceedings of the 26th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse november lake buena vista fl usa.
acm new york ny usa pages.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse november lake buena vista fl usa association for computing machinery.
acm isbn .
.
.
.
introduction static analysis tools find defects by examining the code data flow and control flow for problematic patterns.
to make static checking tractable in practice findbugs and jlint make simplifications and abstractions that lead to a large number of warnings many of which can be false positives including trivial and unlikely warnings .
the advantage of static analysis is that the warnings are specific e.g.
a null pointer on a specific source code line.
the disadvantage is the overwhelming number of reported warnings and a disconnect between field defects and warnings .
in contrast statistical bug models use historical development information to indicate risky i.e.potentially defective files or commits .
the predictors used in the models include both product measures such as the number of lines changed in a commit and the process measures such as the expertise of the developers modifying a file.
the advantage of statistical bug models is that they provide reasonable predictions of field defects in commits and files .
the disadvantage is that the prediction is not fine grained i.e.an entire file or commit is flagged as risky.
we developed a tool called warningsguru which combines the two approaches using statistical models to identify which commits are likely to contain defects and showing the specific line numbers of the new static analysis warnings that have been introduced for the commit.
we also develop a technique which traces the warning introducing commit which we use to retroactively assign warnings to failed builds.
2warningsguru features and architecture we give an overview of the features of warningsguru illustrated by figures.
each feature is implemented as part of the pipeline in figure .
warningsguru builds on an existing statistical bug modeling tool commitguru static analysis tools including findbugs and jlint and static analysis warning integration tool toif .
figure shows for each commit the total number of warnings and new warnings and commitguru s statistical risk prediction.
figure shows the number of existing and new warnings associated with each file for a commit and which measures indicate risk in commitguru s model.
figure shows the warnings per line reported by findbugs and jlint.
warningsguru reports the commit in which the warning first appeared and the line which it is presently on.warningsguru can retroactively assign warnings to commits that do not build.
each warning is clickable taking the developer to the highlighted problematic line on github.
by clicking the commit hash of the originating commit the developer will instead be 892esec fse november lake buena vista fl usa louis philippe querel and peter c. rigby static analysis tools commitguru warningsguru jlint findbugs git maven szz model get commits checkout commit build commit analyse filesget warnings analysis of warnings warningsguru results identify modified files toif tool runner adaptor warnings assimilator gitgit blame warnings recovery git figure architecture of the warningsguru integration figure commits that are considered by the statistical model to be risky are highligted.
the number of new and existing warnings are also shown.
for example commit b36bb31fe4 is not considered risky even though the changed files have existing warnings.
there are no new warnings introduced in this commit.
figure the number of new and existing warnings are shown for the commit and for each modified file.
the commitguru measures are shown with anomalous values highlighted in red for the commit.
for example lines added is abnormally high and large commits tend to be risky.
893w arningsguru esec fse november lake buena vista fl usa figure when a file is selected the warnings are shown for each line number.
the star indicates new warnings.
the commit that the warning was introduced in is also shown.
clicking on a line takes the user to that line on github.
taken to the original problematic commit on github which introduced the warning not shown in a figure .
new projects can be added simply by submitting the git url of a maven project hosted on github to warningsguru not shown in a figure .
in the remainder of this paper we describe each component in detail provide examples of our integration of statistical bug models with static analysis and discuss planned future work.
we conclude the paper with preliminary results that show less than of commits contain new static analysis warnings and less than of statistically risky commits contain new warnings.
building thousands of commits recent works have shown that combining static analysis with statistical models can increase the defect finding effectiveness of both techniques .
however these research works did not provide developers with a usable tool and were performed on a small number of releases.
for example rahman et al.
study between and release for five open source projects for a total of releases.
they state that the effort to build and run jlint and findbugs on the versions took six person months of effort.
one of our major contributions is a maven based technique that allows us to build and run jlint and findbugs on thousands of project versions.
in this demonstration we process .6k and .5k commits for the phoenix and kylin projects respectively.
by processing all the commits for a project warningsguru gives precise and timely information about when a static analysis warning first appeared simplifying future comparisons of statistical and static bug predictions.
static analysis tools typically require a buildable system to run.
to build a each historical commit warningsguru requires a maven pom file .
a pom file stores the build configurations of the project including version numbers of required dependencies allowing us to build historical versions.
we automatically modify the pom file to retroactively add static analysis as part of the build process using maven s exec maven plugin plugin.
we determine which files have been added or modified and run static analysisonly on these files making the process scalable across thousands of commits.
researchers and developers can add new projects to warningsguru provided that a maven pom file exists.
for the two sample projects in this demonstration we find that we process a median of one commit every seconds running on a standard desktop.
the processing time depends on the project build time and the number of files that changed.
commits can be processed by in parallel.
warnings on broken builds.
we found that and of commits for phoenix and kylin could not be built.
we cannot directly generate warnings on a commit that does not build however on subsequent commits that are buildable we use git blame to retroactively assign warnings to lines that originated in files that did not initially build.
in practice we can generate static analysis warnings for all commits even those that do not build.
an interesting preliminary finding is that commits that do not build tend to introduce a higher percentage of static analysis warnings.
for example broken builds are .
and .
times more likely to introduce warnings than buildable commits for phoenix and kylin respectively.
static analysis integration toif each static analysis tool has its own execution flow and method of reporting warnings.
we use toif an open source framework developed by our partner kdm analytics to integrate static analytics tools .
toif provides a common execution interface for the static analysis tool and parses their results to convert them into a common format.
we currently run jlint and findbugs which are java static analysis tools.
toif also enriches the warnings by mapping them to software security warnings including the common weakness enumeration cwe and software fault pattern sfp categories.
this mapping is security focused allowing developers and future researchers interested in security to ignore warnings that rarely lead to security problems.
figure shows the integrated and additional warning fields in a gui in warningsguru .
894esec fse november lake buena vista fl usa louis philippe querel and peter c. rigby version control git version control system are used to manage the source code of software projects where incremental changes are stored.
warningsguru uses git to retrieve the state of the system at each commit.
the system state at each commit is then analyzed for the following four purposes.
first we walk the git dag to checkout the state of the system at each commit.
warningsguru then builds and runs static analysis tools on each commit.
second running static analysis tool is computationally expensive.
we use git to identify only the files that have been added removed or modified for a commit.
from these files we are able to determine the new and removed warnings.
third we use git blame to determine the commit in which a line in a file was last modified.
this allows us to determine the historical commit in which the warning was introduced.
figure developers can click on the origin commit of older warnings or view the lines with new starred warnings.
fourth commitguru works at the commit level allowing us to combine its statistical risk measures with the warnings for each commit.
statistical models with commitguru statistical models indicate when a change may introduce a bug by predicting when a commit or file is prone to being buggy using historical measures such as churn entropy of change and experience of the developer .
by being able to identify bug fixing commits from either an issue tracker or commit message it is possible to determine which commits might have introduced the faulty change.
the measures from these candidate buggy commits are then used to identify other commits which may also be bug introducing based on historical patterns.
commitguru implements the szz aszz algorithm .
bug fixing commits are identified based on keywords in their commit message.
using git blame the fixing commit is traced back to the commit that last changed the fixed lines.
the lines that have been changed are deemed to be bug introducing.
measures are extracted at each commit and used as predictors in a logistic regression with ten fold cross validation.
this logistic regression model is used to predict whether or not a commit is likely to introduce a bug i.e.is risky.
in figure we see for each commit whether the statistical model has determined if a change is likely to introduce a bug.
we see which measures contribute additional risk.
while this allows commitguru to determine which commits may be the most risky it does not give additional details of where the issue might be in the commit as the predictions are not at the line level.
for example this figure shows that the model predicts a change to be risky because many new lines are being added in the commit.
warningsguru supplements this knowledge with specific static analysis warnings that have been introduced in a change.
tool effectiveness and conclusions to illustrate the effectiveness of our approach we ran warningsguru on two apache foundation projects phoenix and kylin.
our study is retrospective as neither project uses static analysis or statistical bug prediction.
we study commits over month period for phoenix and commits over a month period of kylin.
we found that and of commits contain warnings while only and introduced new warnings.
by progressively examiningnew warnings as changes are made developers need examine only a small number of warnings and commits.
by using a statistical model alone we find that commitguru flags and of commits as risky.
when we combine this with static analysis in warningsguru the number of risky commits with warnings is for both projects and the number of new warnings is and respectively.
in conclusion we can drastically reduce the number of commits and warnings developers have to examine by combining statistical models with static analysis.
future work is necessary to determine if the warnings and commits that we select help developers find defects.
we are working with kdm analytics and defense research and development canada to determine if warningsguru is effective in practice.
our tool is also publicly available for use by researchers and developers.
acknowledgement the authors would like to thank kdm analytics defense research and development canada and nserc for funding this tool development.
we also thank dr. shihab s team for providing feedback as we integrated our code with commitguru .