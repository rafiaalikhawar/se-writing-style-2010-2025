a multi objective framework for effective performance fault injection in distributed systems luca traini university of l aquila italy luca.traini graduate.univaq.it abstract modern distributed systems should be built to anticipate performance degradation.
often requests in these systems involve ten to thousands remote procedure calls each of which can be a source ofperformancedegradation.thephdprogrammepresentedhere intendstoaddressthisissuebyprovidingautomatedinstruments toeffectivelydriveperformancefaultinjectionindistributedsystems.
the envisioned approach exploits multi objective searchbased techniques toautomatically find small combinations of tiny performancedegradationsinducedbyspecificrpcs whichhave significantimpactsontheuser perceivedperformance.automating the search of these events will improve the ability to inject performance issues in production in order to force developers to anticipate and mitigate them.
ccs concepts software and its engineering software performance searchbased software engineering keywords faultinjection software performance search basedsoftwareen gineering distributed systems acm reference format luca traini.
.
a multi objective framework for effective performance fault injection in distributed systems.
in proceedings of the 33rd acm ieee international conference on automated software engineering ase september montpellier france.
acm new york ny usa 4pages.
introduction the current fast to market trend has shaped a new way of design buildandreleasesoftware.successfulhigh techcompanies deliver new software in production every day and perceive this capability as a key competitive advantage .
in order to support this fast paced release cycle it organizations often employ several this research was supported by the electronic component systems for european leadershipjointundertakingthroughthemegamart2project grantagreementno .
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acmmustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
ase september montpellier france association for computing machinery.
acm isbn ... .
of loosely coupled independently deployable services .
despite their benefits these architectures introduce complexityinperformancemonitoringandtroubleshooting.eachrequest involvestentothousandremoteprocedurecalls rpcs eachof which can introduce some form of performance degradation.
performance is akey quality aspect of software andhas a huge impactonuserengagementandsatisfaction .inthelastfewyears severaltools havebeen developedin orderto enhancedevelopers awareness on the performance behavior of distributed systems .althoughthesetoolscanbeusefulforsystemperformance debugging there is lack of techniques to anticipate unexpected events that could significantly hamper the user perceived software.
predicting performance issues upfront can be difficult given the continuously changing load nature and frequent roll out of software changes.
high tech companies automate failure injection inproductiontobuildconfidenceinsystemsbehaviorandanticipateunexpectedevents .thecombinatorialspaceofpotential failures istoolarge tobe exploredexhaustively hence inpractice failure testing solutions rely on two search policies random searchand programmer guided search.
the former randomly chooses failures in favorof speedand simplicity but itis unlikely to discover interestingcombinationsoffailures.thelatterleveragesdomain expertintuitionstobuildheuristicscapabletofindmoreinteresting failures scenarios but it is fundamentally unscalable.
recent work fromalvaroetal.
haveshowedpromisingresultsinguidingthe search through a more structured policy.
the envisioned approach proposed in this paper provides a framework which turns the problem of finding interesting combinations of performance issues into a multi objective search problem.
the rationale at the basis of this approach is that the concept of interesting combination includes several objective often in tradeoff.
for example if we inject a huge latency in all the services involved in all user requests then this certainly has a negative impactonthesystem butitisnotinteresting becauseitisobviousand isnotlikelytohappeninrealsystems.lessevidentcombinations that may lead to performance degradations are more interesting anddifficulttodetect.thekeyideaistosearchforcombinationsofperformanceissuesbyminimizingthenumberofissuesintroduced we will term it cardinality and their intensity e.g.
the amount of latency introduced while maximizing the impacton the userperceivedperformance.clearlythehigherwillbenumberofissues introduced and their intensity the higher will be the impact.b y using a pareto optimal search based approach we will not sacrifice solutionswithhigh cardinality and or intensity whentheyhavea significant impact but they will be always dominated by combinationswithlowersvaluesof cardinality intensity whentheycause the same impact.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france luca traini we envisage that automated search with appropriate objectives can help in identifying interesting combinations of performance issues which have significant impact on the user perceived performance.
envisioned approach .
approach theapproachisinspiredbytheworkofalvaroetal.
whichisa first attempt to guide the search of combinations of fault injection withastructuredpolicy .thisworkisrelatedtofunctionalaspects ofdistributedsystems whereasthe approachproposed here focuses on performance aspects.
the goal is to provide automation to fault injection in distributed systems by improving the search of interesting combinations of performance issues.
in this paper we introduce a conceptual framework on top of which customized instantiations oftheapproachcanbebuilt.theframeworkisbased on several components where the semantics and the way they interact will be described in the following.
each instantiation of our approach is obtained by implementing these components in a specific context.
an instantiation defines the kind of targeted performance issues and the way on which their interesting combinationswillbesearched.inordertobuildan instantiation fiv e core questions have to be addressed which kinds of performance issues are targeted ?
distributed systems can experience different kinds of performanceissues.network latencyspikes performancebugs hardware failures are only few examples.
an instantiation of ourapproachhastochooseoneormoretypeofperformance issues as target.
how do we model the intensity of combinations of performance issues?
different types of performance issues have different properties.
some of these properties define the severity of performance issues for example in network latency spikes a property could be the latency introduced and or the percentage of traffic affected by the problem.
an instantiation has to provide a way to synthesize interesting properties of targeted performance issues in a single value.
hence given any possible combination of performance issues the approach has to derive this value whichwillbenamed intensity.intuitively byfollowingprevious examples higherlatenciesormorepercentageofaffectedtraffic will induce higher intensity.
what are the impacts we are interested to?
performanceissuescanhavedifferent impactsonthesystem.
some can be strictly related to the user perceived performance properties otherscanbecorrelatedtoinnercharacteristicsof thesystem suchastheenergyconsumptionofserversorthe costofcloudresources.ourapproachisdevisedtosimultaneously support different types of impacts and an instantiation has to define what are the interesting ones.
how do we estimate the impact of combinations of performance issues?
the intensity of a combination of performance issues is not always strictly correlated with their impacton the system performance.incontextswhererequestsinvolvesmultiplerpcs performanceissueswiththesame intensity indifferentrpcs figure calls among services in requests of classes x and y can have different impacton the system behavior.
trivially for example morefrequentlyinvokedrpcshavemore impactthan less frequently invoked ones.
an instantiation has to provide a way to estimate impactsof interest.
h o wd ow e search for interesting combinations of performance issues?
thegoalhereistofindinterestingcombinations i.e.theones with higher impactson the system.
however not all combinations are interesting for example if we consider huge la tencies then they will clearly have huge impacts but they do not sharply provide useful information on which are theperformance critical elements of a system.
combinations ofperformanceissueswithlower intensity aremoreinteresting than others.
in fact if a latency introduced in a particular rpc has a negative impacton the system then the most interesting valuetoidentifyisthesmallestlatencyabletoproducethat impact.thisvalue infact representsa criticalthresholdtokeep into account for effective fault injection.
furthermore light combinations of performance issues are most likely to happen in production hence they are more interesting.
the number of performance issues considered in a combination will be named ascardinality.
theproblemofsearchinginterestingcombinationscanbeturned into a multi objective search problem with the following ob jectives maximize all the impactsconsidered minimize intensity and minimize cardinality.
throughtheuseofpareto optimality thisapproachdoesnot neglect combinations with high cardinality and high intensitywhentheyaretheonlyonestoshowasignificant impact whereasothersolutionscanreplacethelatteronesiftheyshow same impactwith lower cardinality and lower intensity.
instantiations have to provide appropriate search based software engineering techniques to solve the problem.
differentanswerstothesequestionswillprovidedifferent instantiationsof theapproach.
oneof thegoal of thisresearch program will be to provide several instantiations.
.
explanatory example inordertoprovideabetterunderstandingoftheproposedframework an illustrative coarse instantiation in a specific scenario is introduced here.
the scenario is not very representative of real applications butitisusefultogiveinsightsonhowtheapproachcould beinstantiatedandhowinterestingcombinationsofperformance issues can be searched.
scenario.
the context as sketched in figure is a web application composed by services named a b c d e .
the application providesonlytwourlsaccessiblebyusers oneprovidedbyservice authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
a multi objective framework for effective performance fault injection ase september montpellier france aand the other provided by b. any request to each of these urls willproducealwaysthesamepathofcallsamongtheapplication services.
hence two different classes of requests can be defined named xandy.
when a request of class xoccurs in the system theservice aisfirstcalled thereafter acalls cwhich inturn calls dthat call e. when a request of class yoccurs in the system the b is first called which in turn calls dthat calls e. we assume that a performancerequirementisassociatedtoeachrequestclass which imposes that their average response times should be under certain thresholds named txandty.
we also assume to have monitored theseresponsetimes andtheiraveragevalueswillbedenotedas rxandry respectively.
instantiation.
i will explain the illustrative instantiation by answering the previously introduced questions which kinds of performance issues are targeted?
triviallyhereweconsiderthelatencythatcanbeintroduced in each service in addition to its own response time as our targetedperformanceissues.forexampleifarequestofclass x occursinthesystem latencycanbeintroducedinservices a c dande.
how do we model the intensity of combinations of performance issues?
theonlypropertyconsideredinthis instantiation istheamount of additional latency introduced in a service.
if the service in whichthelatencyisintroducedis athenthisamountwillbe denoted as la.
a straightforward way to synthesize intensity couldbetosumalllatenciesintroducedinthecombination.for example a combination of performance which introduces a la latency in service aand a lblatency in service bwill have a la lbintensity.
what are the impacts we are interested to?
inordertokeeptheillustrativeexampleassimpleaspossible thisinstantiation considers only one impact.
here the impact is defined as the number of classes of requests for which the performancerequirement isviolated.
inour casewe havetwo requests classes hence the maximum impactvalue will be when the performance requirements are both violated.
how do we estimate the impact of combinations of performance issues?
in order to give insights on the meaning of estimating impact weintroducehereasimpleimplementationofthisconcept.the problem of estimating impactshifts into the problem of checking for each class if its performance requirement is violated.
sinceforanyrequestclass citsresponsetime rcisknown this information can be exploited in order to quantify the impact of a combination of performance issues.
for example a combination of performance issues composed by latencies lb la andle leadstoviolatetheperformancerequirementassociated to request of class yiflb le ry ty.
note that ladoes not appear in this constraint because service ais not involved inthepathoriginatedbyrequestsofclass y thusintroducing latency in awill not affect the service yresponse time.
hence wecanquantify impactofacombinationofperformanceissues bysimplyiteratingforeachrequestclass andbyincreasingthe impactbyoneifthecombinationinducestheviolationofthe requirement imposed on that class.
how do we search for interesting combinations of performance issue?
clearlytheaimwillbetomaximizethenumberofperformance requirements violated by the performance issues combination namelythe impact.triviallylargevaluesoflatencieswilleasily leadtoviolaterequirements.forexample ifweintroduceahugelatency leinservice e whichisinvolvedinbothclasses thiswill clearly have the maximum impact but it will not really provide useful information about the performance criticality of specific services.amoreinterestingvalueisinsteadtheminimum le that leads to violate the requirement hence we also need tominimize the intensity of the performance issues introduced.
widelyusedmulti objectiveevolutionaryalgorithms suchas nsga ii can be adopted for this task.
.
instantiations amajorchallengeofthisphdprogramwillbetoprovideseveral instantiation of the presented approach.
the previously described instantiation isintentionallysimple.obviously inordertomodel thecomplexityofreal worlddistributedsystems moreelaborate instantiations shall be devised.
forexample beyondlatency relatedproblemsmentionedbefore other performance issues can be targeted e.g.
utilization of re sources such as cpu or memory.
also performance issues can haveseveralproperties forexampleinthecontextoflatencyissuestheseotherpropertiescanbeconsidered rateofimpactedrequests average response time standard deviation percentiles etc.
the higherthenumberofpropertiesandtheircomplexity theharder willbetodefineasynthesisof intensity.wedonotexcludethat for some instantiation intensityshall be split in two or more concepts.
also the concept of impactshall be more realistic with respect to the one presented in the explanatory example.
a refinement ofimpactcanbeobtainedbyconsideringthenumberofrequests impacted by arequirement violation according tothe workload of theapplication ratherthanthenumberofclassesofrequestsfor whicharequirementisviolated .certainlyaverycriticalpointto developwillbetheestimationof impact.thetechniqueusedinthe illustrativeexampleisabitshallow partlybecausethepropertiesofperformancearelimitedandbecausethenotionof impactisoverly reductive.morecomplexnotionsofpropertiesofperformanceissueandimpactwillrequiremoreelaborateestimationtechniques suchasmachinelearning i.e.
regressionsmodels neuralnetworks etc.
or markov models.
from a search perspective we plan to choose suitable search algorithmsaccordingtothe instantiation suchasnsga ii whichare widely used in search based software engineering .
expected contribution theexpectedcontributionofthisphdprogramistodemonstrate how multi objective search based techniques can be applied effectively for automated fault injection.
the research questions that are intended to be addressed are can this framework be used to target different kinds of performance issues?
what are the challenges of employing instantiations in realworld systems?
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france luca traini of the approach outperform state of practice approaches ?
in order to evaluate rq1 i am planning to build different instantiationswith different kinds of targeted performance issues.
this research program relays on an industrial phd grant in collaborationwith microsoft andkarlsruheinstitute of technology.
therefore i am collaborating with microsoft to identify real world distributed systems for sake of experimentation where the instantiationsproduced can be validated.
one of the key challenges of pushing research in production system is the impedance mismatch between the model of reality of the research prototype and the often messy realities of production systems .
this experience will be very useful to gain feeling on the criticality of adapting instantiations for real world scenario therefore to answer rq2.
atthebestofmyknowledge anoverlyusedstate practiceinautomated fault injection is random search .
for each instantiationproduced i m planning to compare both in laboratory and in real world systems random fault injection with the proposedmulti objective approach rq3 .
this can be done for example by iteratively comparing the actual effect on real systems of ran domcombinationsofperformanceissuesagainsttheirdominant solutions founded by the search.
related work faultinjectionisaquitematuresubjectinliterature .inthe lastfewyearsfaultinjectionisgainingincreasingattentionanditis used in production by high tech companies .
a recent work fromalvaroetal.
isthefirstattempttodeviseamoreeffective strategywithrespecttostate of practicerandomfaultinjection by smartly searching the combinatorial space of possible failures.
the workpresentedinthispaperdiffersfromtheonefromalvaroet al.byamoredirectedfocusonperformanceissuesofdistributed systems and by a different formulation of the problem in that weformulatetheproblemoffindinginterestingcombinationsof performance issue as a multi objective optimization problem.
the problem of anticipating unexpected performance behaviors in modernlarge scaledistributedsystemshasbeentackledindifferentways.severalworksaimatdevisingtracinginfrastructuresto provide developers performance awareness on distributed systems.
some tools requires explicit instrumentations while othersdonotrequireit .althoughthesetoolscanbeveryuseful for performance debugging of distributed systems they relyuniquely on developer intuition to anticipate unexpected events.more sophisticated experimentation oriented approaches aim at anticipatingunexpectedsystembehaviors.forexample inorderto anticipate system behavior in face of unexpected workload spikes theworkofveeraraghavanetal.
useslivetraffictoloadtestthe systemandidentifyscalabilitylimits.justrunit proposesthe useofsandboxeddeploymentsthatcanexecuteshadowtrafficfrom a real world deployment to answer various what if questions.
conclusion inthispaperipresentamulti objectiveframeworkforperformancefaultinjectionindistributedsystems.combinationsofperformance issues can have different kinds of impacts on a system and smaller combinations with non negligible impacts are more interestingthan others because they are harder to be identified.
this leadsto competing objectives often in conflict.
the space of possible combinations of performance issues is too large to be exhaustively explored.
the strength of this framework lays on the intuition of exploiting search based software engineering techniques for effectiveperformancefaultinjection.theframeworkisintendedto be general several instantiations can be devised.
i will evaluate the applicabilityoftheproduced instantiations inreal worlddistributed systems.ialsoplantocompare bothinlaboratoryandinreal world applications theeffectivenessoftheproduced instantiations against state of pratice fault injections approaches.