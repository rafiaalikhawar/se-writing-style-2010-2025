an empirical study of goto in c code from github repositories meiyappan nagappan1 romain robbes2 y asutaka kamei3 ric tanter2 shane mcintosh4 audris mockus5 ahmed e. hassan6 1rochester institute of technology rochester ny usa 2computer science department dcc university of chile santiago chile 3kyushu university nishi ku japan 4mcgill university montreal canada 5university of tennessee knoxville knoxville tennessee usa 6queen s university kingston ontario canada 1mei se.rit.edu rrobbes etanter dcc.uchile.cl 3kamei ait.kyushu u.ac.jp 4shanemcintosh acm.org 5audris utk.edu 6ahmed cs.queensu.ca abstract it is nearly years since dijkstra argued that goto obscures the ow of control in program execution and urged programmers to abandon the goto statement.
while past research has shown that goto is still in use little is known about whether goto is used in the unrestricted manner that dijkstra feared and if it is harmful enough to be a part of a post release bug.
we therefore conduct a two part empirical study qualitatively analyze a statistically representative sample of les from a population of almost 250k c programming language les collected from over 11k github repositories and nd that developers use goto in c les for error handling and cleaning up resources at the end of a procedure and quantitatively analyze the commit history from the release branches of six oss projects and nd that no goto statement was removed modi ed in the post release phase of four of the six projects.
we conclude that developers limit themselves to using goto appropriately in most cases and not in an unrestricted manner like dijkstra feared thus suggesting that goto does not appear to be harmful in practice.
categories and subject descriptors d. .
control structures d. .
software quality assurance sqa keywords use of goto statements empirical se github dijkstra .
introduction in the march issue of the communications of the acm edsger w. dijkstra published his observations of the problems caused by using goto statements in programs titled letters to the editor go to statement consideredharmful .
this is one of the many works of dijkstra that is frequently discussed by software practitioners and researchers alike more than citations according to google scholar and almost citations according to acm digital library as of aug .
this article has also resulted in a slew of other articles of the type global variables considered harmful polymorphism considered harmful fragmentation considered harmful among many others.
in fact meyer claims that as of there are thousands of such articles though most are not peerreviewed .
indeed dijkstra s article has had a tremendous impact.
anecdotally several introductory programming courses instruct students to avoid goto statements solely based on dijkstra s advice.
marshall and webber warn that when programming constructs like goto are forbidden for long enough they become di cult to recall when required.
dijkstra s article on the use of goto is based on his desire to make programs veri able.
the article is not just an opinion piece as koenig points out dijkstra provides strong logical evidence for why goto statements can introduce problems in software.
since dijkstra s article several authors have theoretically analysed the harmfulness and sometimes bene ts of goto section but there are seldom any empirical studies on them.
in the recent past two studies examined the use of goto in c code for error handling.
however they focus on improving the error handling mechanism and not to characterize the use of goto statements in practice by developers or examine their harmfulness.
perhaps surprisingly this topic is still highly discussed and debated by developers.
in stackover ow a topic titled goto still considered harmful?
has been viewed more that 32k times with hundreds of votes to over answers .
in all these cases the developers are replying based on their own opinion and interpretation of dijkstra s article and the use of goto.
recently a preprint version of this paper has garnered over views and has been downloaded more than times .1this pre print was also the subject of a lively discussion with almost comments on slashdot .
therefore motivated by the overwhelming interest shown 1the preprint appears as a non peer reviewed article in the peerj archive which is compatible with further submission to a peer reviewed venue.by developers in this question we empirically examine the use of goto statements in modern software projects by software developers after ascertaining that goto is indeed widely used.
our experiments are designed to empirically identify whether goto statements are used in a disciplined and hence harmless way or in the complex way that dijkstra feared would be be harmful such as the recent case that resulted in the security vulnerability in apple ios7 .
more precisely we carry out a two dimensional case study of c source code les from software repositories a broad qualitative study on a statistically representative sample of code from repositories hosted by github followed by a focussed quantitative study on speci c releases of six open source software oss projects to address the following research questions rq1 what are goto statements used for?
we nd that goto statements are used for main purposes.
among these the most prevalent are handling errors andcleaning up resources at the end of a procedure and respectively .
rq2 do developers remove modify goto statements?
we nd that no goto statement is removed modi ed as part of post release bug xes in four of the six projects.
in the remaining two projects goto was removed modi ed only in a dozen bug x commits.
therefore goto is still very much used but mostly following well structured harmless patterns.
note that there are several possible hypotheses as to why goto is used in such a disciplined manner.
it could be that developers have restricted their use of goto to speci c controlled scenarios because of dijkstra s advice or it could simply be based on a natural evolutionary path among others.
this paper does not pretend to shed light on these hypotheses only to empirically characterize the use of goto in practice.
.
background and related work dijkstra thought that the title of the article misrepresented the actual argument he tried to make.
he explains that his article is referenced often by authors who had seen no more of it than its title .2therefore we start with a detailed discussion of the arguments given by dijkstra in order to provide context to the reader and then discuss related work that examined dijkstra s communication.
.
background dijkstra begins the article by stating that in his observation of programmers and programs the use of goto statements has disastrous e ects .
this is the reason why he believes that goto statements should not be used in high level languages in which most current software is written.
he then goes on to explain why the goto statements can have disastrous e ects and what those e ects might be.
the objective is for a programmer to be able to establish clear assertions about the state of the executing program at each line of code.
dijkstra then observes that the use of goto statements in a program can make it di cult to determine the exact set of statements that has been executed before reaching a given label block.
dijkstra explains that in a language with procedures one can characterize the progress of a process with a coordinate 2all italicized text within single quotes in this section are direct quotes from dijkstra.system that consists of a sequence of textual indices the sequence of procedure calls the call stack followed by a single point in the currently executing procedure.
with the inclusion of repetition clauses such as while one needs an additional dynamic index.
reasoning is supported because the repetition structure like recursion is amenable to inductive reasoning.
in any case the crux of the argument is that the coordinate system is independent of the programmer.
in contrast in the case of goto statements it becomes terribly hard to nd a meaningful set of coordinates in which to describe the process progress .
in essence the go to statement as it stands is just too primitive it is too much an invitation to make a mess of one s program.
.
related work in this subsection we present related work essays and articles done by others who have either carried out their own analysis on the use of goto statements or have critically analyzed dijkstra s article.
analyzing the use of goto statements the article by knuth is probably one of the earliest works analyzinggoto statements since dijkstra s article was published.
knuth clearly prefaces the article by stating that only his opinions are expressed.
his goal for the article is to provide a fair discussion of both the pros and cons of goto statements.
he believes that the discussion should not be about eliminating goto statements but about program structure.
he points out that in fact several cases of goto elimination is merely replacing goto statements with other euphemisms .
knuth believes that goto statements must not be used for error exists or loop creation but only used to eliminate recursion boolean variables and co routines.
he even quotes dijkstra to drive home the point please don t fall into the trap of believing that i am terribly dogmatical about .
i have the uncomfortable feeling that others are making a religion out of it as if the conceptual problems of programming could be solved by a single trick by a simple form of coding discipline!
.
more recently saha et al.examine how goto statements are used for error handling and propose approaches to improve the error handling mechanism in c code .
similarly alnaeli et al.
examine the extent of goto statements in for loops.
their goal is to parallelize for loops and goto can prevent this goal.
when empirically evaluating their approaches they nd that goto is still extensively used in system projects written in the c programming language.
however the studies by saha et al.
and alnaeli et al.
are not about examining all the di erent ways in which developers use goto but just focussed on the use of goto for a single purpose.
our study complements their studies by providing evidence of when goto statements are used and hence their work and other future work can build solutions to take goto statements into account or help avoid it if needed.
analyzing dijkstra s article in his retrospective essay tribble provides an annotated version of dijkstra s article and also analyzes the relevance of the article in the year .
he questions whether goto statements are even needed when developers are using languages that were developed well after dijkstra s article was published.
he concludes that in contrast to knuth certain complex goto statements cannot be avoided if the programming language does not provide dedicated constructs for exiting nested loops or for error handling.
since programming languages like cdo not have an explicit error handling mechanism exception handling like c java the developers who write their software in c have to resort to using goto statements.
in the qualitative empirical analysis in rq1 section we examine if developers are indeed using goto for error handling and for exiting out of loops among other purposes.
there are several