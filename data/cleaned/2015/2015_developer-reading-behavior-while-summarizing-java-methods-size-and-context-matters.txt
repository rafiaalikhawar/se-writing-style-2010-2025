developer reading behavior while summarizing java methods size and context matters nahla j. abid bonita sharif natalia dragan hend alrasheed and jonathan i. maletic department of computer science taibah university madinah kingdom of saudi arabia department of computer science and engineering university of nebraska lincoln lincoln nebraska usa department of information technology king saud university riyadh kingdom of saudi arabia department of computer science kent state university kent ohio usa emails nabd taibahu.edu.sa bsharif unl.edu ndragan kent.edu halrasheed ksu.edu.sa jmaletic kent.edu abstract an eye tracking study of developers reading and summarizing java methods is presented.
the developers provide a written summary for methods assigned to them.
in total 63methods are used from five different systems.
previous studies onthis topic use only short methods presented in isolation usually asimages.
in contrast this work presents the study in the eclipseide allowing access to all the source code in the system.
thedeveloper can navigate via scrolling and switching files whilewriting the summary.
new eye tracking infrastructure allowsfor this improvement in the study environment.
data collectedincludes eye gazes on source code written summaries and timeto complete each summary.
unlike prior work that concludeddevelopers focus on the signature the most these results indicatethat they tend to focus on the method body more than thesignature.
moreover both experts and novices tend to revisitcontrol flow terms rather than reading them for a long period.they also spend a significant amount of gaze time and have highergaze visits when they read call terms.
experts tend to revisitthe body of the method significantly more frequently than itssignature as the size of the method increases.
moreover expertstend to write their summaries from source code lines that theyread the most.
index t erms source code summarization eye tracking program comprehension empirical study i. i ntroduction source code reading and comprehension is an essential and time consuming task that programmers perform during software maintenance .
natural language documentation andcode summarizations are found to be critical to improve codecomprehension .
in fact expert and novice programmerstend to read comments more than the source code duringcomprehension activities .
unfortunately comments areoftentimes incomplete or outdated due to changes in codeduring maintenance.
one way to overcome this problem is to automatically generate summaries directly from source code.
several approachesare proposed to generate automatic summaries using naturallanguage processing nlp text retrieval andstatic analysis .
in order to further improve sourcecode summarization techniques rodeghero etal.
conducted an eye tracking study to determine thestatements and terms i.e.
identifier names that programmersview as important when they summarize a method.
theirmain results indicate that programmers tend to look at methodsignatures the most.
they use this information to give moreweight to terms that developers look at more often duringsummarization i.e.
signature is given more weight comparedto call statements as heuristics for their automated summa rization approach that was adapted from prior work .
unfortunately the prior eye tracking study by rodeghero et al.
is limited in that the study could not be conducted ina realistic working environment.
this is a common limitationwhen using eye tracking equipment.
the work presented herefocuses on addressing the two main limitations in the previousstudy.
the first limitation is that the maximum length ofmethods included in their study is only lines.
that is asingle fixed window of source code that must appear all atonce on the screen with nosupport for scrolling.
the second limitation is that methods are presented in complete isolationwith no ability to look at other methods or related code.
we overcome these two limitations by utilizing a new eyetracking infrastructure call itrace that is developedspecifically for conducting eye tracking studies within a soft ware integrated development environment e.g.
ms visualstudio eclipse .
itrace supports the implicit tracking of eyemovements in the presence of scrolling and switching betweenfiles within the ide.
hence we are able to conduct our studyusing any sized methods and participants have access to all ofthe files and the entire code base for the system being studied.that is the study is conducted in the same environmentprogrammers use daily thus avoiding bias in the experimentalsetup and allowing participants to read code as they normallywould.
the contributions of this work are as follows an eye tracking study of developers reading andsummarizing java methods in the eclipse integrateddevelopment environment.
unlike the prior study thatconcluded developers mostly focus on the signature the results from our study indicate that developers tendto focus on the method body more than the signature.
an analysis of programmers gaze time and number ofvisits on source code entities with respect to the methodsize.
for experts we found that the larger the method the less likely its signature is focused on.
however asthe control flow increases in complexity it is revisitedmore.
novices do not seem to be affected by the methodsize.
ieee acm 41st international conference on software engineering icse .
ieee authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
an analysis of locations outside the method scope that developers target during method summarization.
the results reveal that experts and novices read other locations besides the assigned methods e.g.
data members and class declarations for about of the tasks.
a comparison of the lines used by experts to write their summaries to the lines with the longest gaze time.
we found strong evidence that developers tend to write their summaries from source code lines that they read the most longest gaze time .
therefore we conclude that gaze time can substantially predict lines that are important for summarizing a method .
an overarching goal of this paper is to investigate ways to improve existing summarization approaches via findings from the eye tracking study presented.
this is done by examining what developers read during summarization in addition to what they include in their summaries.
this is one of the first studies done in a realistic manner similar to how a developer would work in the field i.e.
the source code is presented in an ide instead of a fixed image presented in isolation.
this work also impacts overall tool development for software engineering researchers and practitioners and learning about differences between experts and novices.
we present related work on eye tracking in software engineering and code summarization in section ii.
section iii outlines our research questions.
section iv describes the design of the eye tracking study.
analyses results and threats are presented in sections v through vii followed by implications in section viii.
we end with final remarks in the conclusion along with future work.
ii.
r ela ted work we focus mainly on relevant eye tracking studies done in code comprehension.
we also discuss relevant work on code summarization given our work impacts that topic.
eye tracking studies eye tracking technology is being used in software engineering to study how programmers read review and summarize source code.
crosby et al.
conducted an early eye tracking study of high and low experience programmers reading a binary search algorithm.
both high and low experience programmers needed a large amount of fixations in most areas of source code than participants that read simple natural language text.
the programmers tend to alternate between source code and comments rather than sequentially reading the entire document.
uwano et al.
observed that programmers tend to first read through the entire code snippet and then focus on some parts.
furthermore longer time spent thoroughly reading the code increases the efficiency of finding the defect in the code.
this correlation was later confirmed by sharif et al.
stating that the scan time plays an important role in defect detection time and visual effort required to review source code.
moreover experts tend to focus on defects more than novices .
busjahn et al.
found that experts read code less linearly than novices did.
bednarik and tukiainen concludedthat low experience programmers repeatedly fixated on the same code sections while experienced programmers target the output of the code such as evaluation expressions .
kevic et al.
used itrace to conduct an eye tracking study on three bug fixing tasks.
they found that developers focus on small parts of methods that are often related to data flow.
when it comes to switches between methods they found developers rarely follow call graph links and mostly switch to the elements in close proximity .
rodeghero et al.
conduct an eye tracking study on isolated methods to determine statements and terms that programmers view as important when they summarize them .
they conclude that programmers consider method signatures as the most important section of code followed by call terms then control flow terms.
based on these results a modified weighted scheme for the v ector space model vsm an information retrieval method is implemented.
the frequency of terms in vsm is replaced by the term positions.
therefore terms located in the method signature have a higher weight than method invocation and method invocations have higher weight than control flow statements.
when the term based summarization generated using the original vsm and their improved version is compared to human term summaries the improved version outperformed the original vsm.
in an extended version of their initial work they concluded that terms developers used in their method summaries generally have higher tf idf scores than terms with high gaze times.
in addition they concluded that longer viewed terms are mostly long terms number of characters and they are less likely to appear in developers summaries.
the same study was further analyzed in to find reading patterns of programmers during summarization.
on average they find that programmers read from top to bottom about of the time.
finally they conclude that all of the programmers followed nearly identical eye patterns in overall reading.
the study we present in this paper is similar to the one performed by rodeghero et al.
with several differences.
one of our goals was to study if we get the same results after mitigating limitations related to methods size and the study environment as described earlier.
in addition our study compares experts and novices eye movements and analyzes them with respect to methods sizes.
code summarization with regards to code summarization approaches sridhara et al.
propose techniques to automatically generate natural language comments for java methods sequences of statements and formal parameters using nlp .
furthermore wang et al.
propose a model that defines the high level action of loops by analyzing linguistic and structure clues .
they also presented an approach to automatically generate a natural language summary of objectoriented action units .
moreno et al.
use method stereotypes and class stereotypes to generate natural language summaries for java classes.
abid et al.
use method stereotypes to generate a standard summary for c methods via static analysis.
mcburney and mcmillan propose generating docu385 authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
mentation summaries for java methods using the call graph .
furthermore they propose an approach to evaluate a summary using textual similarity of that summary to the source code .
haiduc et al.
investigate the suitability of several text summarization techniques to automatically generate termbased summaries for methods and classes.
this was further extended by eddy et al.
using a new technique named hierarchical pam.
iii.
r esearch questions the first goal of this study is to understand what terms developers focus on when they summarize java source code using a realistic integrated development environment setting.
the analysis considers three source code locations namely method signatures method calls and control flow statements .
these locations were chosen so that we can make comparisons to the rodeghero study .
a term refers to an identifier in a specific location e.g.
call terms are identifiers in a call.
in addition to the above our work expands the analysis in several different directions based on the level of expertise of programmers and size length of methods.
the second goal is to investigate how experts read source code lines during summarization tasks and how this information can be used to improve source code summarization and more broadly documentation.
the third goal of our work considers locations outside the method scope that programmers might find important such as the class name data member declarations and other related methods.
such scope analysis could not be done in the rodeghero study as the methods were presented in isolation .
to address the above three goals we pose the following research questions.
rq1 considering all methods summarized to what extent do experts and novices focus on a method s signature method s body call invocations in a method and method s control flow?
rq2 does the size length of the method small medium large have an impact on what experts and novices look at most during the summarization task?
rq3 what source code elements if any does a programmer look at outside the scope of the assigned method to summarize?
how do they use context around the method in the summarization task?
rq4 what source code lines do experts read and use in writing summaries?
the first research question will help us compare our results with the rodeghero study albeit in a more realistic setting.
the second research question digs deeper into the effect method size has on reading for summarization.
the third research question focuses on context around the method i.e.
what else besides the method being summarized are looked at in the source code note that unlike the rodeghero study in this study the entire source code was provided to the participants with eye tracking data recorded at the line and term level finally the fourth research question compares what was looked at with what was written in the summaries.
this analysis was restricted to just experts as they write accurate summaries.table i java systems us e di nt h e study system version domain total methods selected methods classes involved argouml .
.
uml diagramming tool megamek .
.
computer game siena .
.
database library sweethome3d4.
interior design application atunes .
.
audio player total iv .
e yetracking study e xperimental design this section describes the process of designing and performing the eye tracking study for method summarization tasks.
the study material including tasks processed eye tracking data and the statistical analysis is provided in the replication package at a. study participants the study is performed by developers a typical sample size for eye tracking studies.
they are experts and novices.
two of the experts are industry professionals working at a local firm and three are phd students at a local university.
one industry expert had between two to five years of programming experience and the other four had greater than years of programming experience.
we consider the phd students as experts because they are heavily involved in coding for open source projects.
novices are undergraduate and graduate students with one to five years of programming experience most with about a year of experience.
b. study systems and method selection the study includes methods from five open source java systems randomly selected from different domains see table i .
while the selection of methods chosen to be summarized is random we maintain two conditions.
first we eliminate trivial methods such as setters getters and empty methods.
second the largest method excluding blank lines chosen was set to loc.
this was done to avoid excessive fatigue during tasks.
based on the above criteria a total of methods were selected from the systems shown in table i. participants were randomly given a set of methods selected from the methods to summarize.
on average participants summarized of the methods.
the size of short medium and long methods range between loc loc and loc respectively.
a line of code is counted if and only if it is not empty and is not a comment.
we used this split to maintain balanced number of methods in each size category.
methods in rodeghero et al.
s study fall in the first category.
therefore methods larger than loc are analyzed separately to study the impact of summarizing larger methods.
another difference with the rodeghero study is that we did not modify the code.
in the rodeghero study method text was reformatted to make it fit on one line on the screen since they were shown in isolation.
in our study we left the methods as they appear in the code and did not reformat lines.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
c. task the participants were told that their main task was to read the assigned methods and write a summary for the method.
they were also told that they could navigate the codebase if they needed to.
the entire study was conducted inside the eclipse environment using the eclipse plugin itrace .
itrace is able to collect eye tracking data of where a developer is looking and map it on the fly to source code elements looked at even in the presence of file scrolling and file switching.
code folding was disabled for all participants to avoid any confounding factors.
the eclipse environment was setup with all the projects and assigned methods open in various tabs.
no web browser was used in this study.
the participants were also able to view the method while they were writing the summary.
we extended itrace for this study to include on thefly mapping to more source code constructs such as conditional and looping structures in addition to what was collected in an earlier study method calls signatures and definition and use of variables .
d. eye tracking apparatus and measures a tobii eye tracker x60 was used to collect gaze data within the itrace environment.
the eye tracker generates raw gaze samples per second.
the eye gaze is then passed through a fixation filter to generate fixations.
a fixation is the stabilization of the eyes on some object of interest for a certain duration .
as in two types of eye movement data are used number of fixations and their durations gaze time .
we define gaze time as the total number of milliseconds spent on a region of interest roi such as a call or keyword.
a fixation filter is set to count fixations that are more than milliseconds same as rodeghero and vendor recommended .
throughout the analysis we refer to the number of fixations as the number of visits on particular regions of interest.
e. study procedure and instrumentation we first obtained irb approval for the study.
on the day of the study the participants first signed an informed consent form and filled out a background questionnaire.
next they were given a short description on how the study would be conducted.
they were also given a page overview of each system and a hard copy of all the method names body not included to be summarized in case they needed to refer to it.
before beginning the actual study they were given examples of three method summaries by the original developers taken from the same systems shown in table i. the sample methods are not part of the subsystems used in the study to avoid any learning effects.
these examples included the method s source code along with the summary for the methods.
this is a necessary step as it was important for the participants to understand what they were expected to do during a summarization task.
we encouraged them to use their own words to summarize the methods.
the study took between mins.
the participants were seated in front of a inch lcd monitor.
they were not required to run or build the softwaresystems.
before the study began we calibrated each participant using a point calibration.
this is a necessary step for the eye tracker to correctly capture data for each participant.
a moderator was responsible to start and stop eye tracking within itrace for each method to be summarized.
this was done to have consistency in the starting and stopping of sessions across all participants.
the participants wrote their summary in a text file present at the bottom of the eclipse ide.
they were able to see the code while writing the summary.
the font size was set to points in the eclipse editor.
gazes on the text files were also collected.
at the end of each task we had a timestamped session of line level gaze data on the source code and summary file that we used to answer our research questions.
v. p re processing the data before running statistical analysis on the data we weeded out samples that were invalid.
in addition we identified the location call signature control flow a term belongs.
data cleaning some invalid samples include writing a narration of the code word for word e.g.
the method uses an if statement to determine if values are true .
other cases were because participants were unable to locate the assigned method or were unable to understand the assigned method.
in order to catch such cases three of the authors reviewed the summaries written by developers to judge their suitability for further analysis.
each human summary is reviewed by two reviewers.
when both reviewers agree about the inclusion of the summary and its corresponding gaze data for analysis it is kept otherwise it is discarded.
the computed inter rater reliability using cohen s kappa is .
.
there was high agreement between reviewers on what to discard.
at the end of this step summaries expert summaries and novice summaries are discarded.
term location identification.
the eye gaze data are processed to identify whether the term looked at corresponds to a signature call or control flow term.
information from the eye tracking tool itrace includes information about the line number the term name and the type of the term method variable conditional statements or other types .
in some cases the exact term that a participant looked at was not identified at the time of this experiment but the line number was.
since the code was not edited during the study we use the line number to determine in a post processing step the nature of the location.
first for all methods used in the study the signature lines are extracted from srcml an xml representation of the code.
next if the line of an eye tracking record matches the signature line in the list the record is considered a signature.
the control flow statements are also identified at the line level because all of them stand on their own and do not have multiple statements listed on the same line i.e.
the body of an if statement appears on another line.
this simplifies the line level analysis.
call terms need to be handled differently as the line containing a call might include other terms that are not part of the call.
we define call terms to include the method call name and parameters .
for example in the statement authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
boolean saved savefile tofile call terms include savefile andtofile .
the possibility of identifying call terms depends on the way the call is written.
all calls of our methods are manually examined to identify call cases.
there were total number of eye tracking gazes inside all methods for all participants.
of those records are successfully identified as calls .
were non call records .
the number of eye tracking records that cannot be categorized as calls or non calls is .
we exclude this from the analysis of calls vs. non calls in rq1 and rq2.
rq3 and rq4 are not affected by this identification.
vi.
e xperimental results we present our findings on each research question along with a comparison to the rodeghero study when appropriate.
because our data is not normally distributed the wilcoxon non parametric test is used.
additionally since the same data is used to test multiple hypothesis we use bonferroni p value correction.
we perform three tests signature call and controlflow terms on each set of samples.
therefore the new p value to test against is .
.
.
anything before this value is considered significant.
effect size is given using cohen s d. a. rq1 results replicating the rodeghero study analysis methods are read differently if presented in isolation vs. presented in a realistic environment that developers usually work in .
to this end we perform the same analysis done by rodeghero et al.
to study the impact of the differences.
adjusted metrics.
number of terms in the signature call and control flow vary based on the size of the method.
therefore it is necessary to adjust the total gaze time according to the number of terms in each method which is the same adjustment performed by rodeghero et al.
.
let s assume one reads the body and signature of a method for and of the time respectively.
consider the body and signature to be and20 in terms of overall size of identifiers.
this does not mean that the body is more important.
longer time in this case is due to size of the body.
if the body is of the overall size the body is read .75and the signature is read .
is greater than .
therefore the participant gives signature higher attention.
then these two adjusted values are compared using the wilcoxon nonparametric test for all collected samples.
a sample is a result from one developer summarizing one method.
the same approach is used to compute the adjusted number of visits for the signature.
the approach to compute the adjusted gaze time and number of visits for signature and non signature terms is also applied to call terms vs. noncall terms and control flow terms vs. non control flow terms.
a total of methods are summarized by five experts and methods are summarized by novices.
the analysis of the eye movements of experts and novices are discussed for method signature calls and control flow terms.
the adjusted gaze time and number of visits are used in hypothesis testing for rq1 and rq2.table ii wilcoxon test results of experts and novices .n is number of samples .a sample is a result from one developer and one method .t is the sum of ranks .
h metric location nt z p expertsh1 gazesignature .
.
non sig h2 visitsignature .
.
non sig novicesh3 gazesignature .
.
non sig h4 visitsignature .
.
non sig expertsh5 gazecall .
.
non call h6 visitcall .
.
non call novicesh7 gazecall .
.
non call h8 visitcall .
.
non call expertsh9 gazectrl.
flow .
.
non ctrl h10 visitctrl.
flow .
.
non ctrl novicesh11 gazectrl.
flow .
.
non ctrl h12 visitctrl.
flow .
.
non ctrl method signature we found no evidence that experts read method signatures more than the method body.
on average experts spent of their gaze time reading signatures while the signatures averaged of the methods.
similarly the average gaze time of novices reading signatures is and signatures are of the methods.
we computed the adjusted gaze time and number of visits of the signature and the body and pose four hypotheses h1 h2 h3 andh4 as follows.
hn f or the difference between the adjusted metric for method signature and method body is not statistically significant.
based on computed zandpvalues see table ii we rejecth2 medium effect size of .
h3 small effect size of .
andh4 medium effect size of .
.
this suggests that novices read visit method bodies more than the method signatures.
we cannot reject h1which means that there is no statistical difference in the time spent by experts reading the signature and the body of a method.
however experts revisit the method bodies more frequently than the method signatures.
when data of both experts and novices are combined the results of wilcoxon test for gaze time and number of visits is z .
p .
with a small effect size of .
and z .
p .
with a medium effect size of .
respectively.
this result indicates that developers read method bodies more heavily than the method signatures when methods are presented in context.
this behavior was previously observed by kevic et al.
.
calls we found evidence that developers read method calls more than other locations.
on average the experts spent of their gaze time reading calls of methods .
similarly on average novices spent of their gaze time reading calls of methods .
we define the four hypotheses h5 h6 authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
h7 andh8 regarding call terms as follows.
hn f or the difference between the adjusted metric for call terms and nonterms terms is not statistically significant.
we reject all the four hypotheses h5 medium effect size of0.
h6 small effect size of .
h7 medium effect size of .
andh8 medium effect size of .
in table ii.
both experts and novices read call terms more heavily than non call terms when the gaze time and number of visits are adjusted based on the number of terms.
control flow we found no evidence that experts read control flow terms longer than other areas but they visit them more frequently.
on average the experts spent of their gaze time reading control flow terms of methods while novices spent of their gaze time reading control flow terms of methods .
the following presents the definition of the four hypotheses h9 h10 h11 andh12 .
hn f or the difference between the adjusted metric for control flow terms and control flow terms is not statistically significant.
we reject two hypotheses h10with small effect size of .
andh12with small effect size of .
in table ii.
this suggests that experts and novices revisit control flow terms but do not read them for a long period of time during each visit.
adjusted duration and visits based on number of characters gaze time and number of visits for both call terms and control flow terms are adjusted based on the number of characters.
this assists in determining if the significance of results is due to the complexity of the terms number of characters or the importance of terms at that location.
for experts when call terms are adjusted by number of characters the difference between call terms and non call terms is not statistically significant for the gaze time z .
p .
and number of visits z .
p .
.
on the other hand for novices when the gaze time and number of visits are adjusted based on the number of characters the difference between call terms and non call terms remains significant for both gaze time z .
p .
and number of visits z .
p .
.
this indicates that experts spend longer time on call terms due to their length number of characters while novices demand longer gaze time to comprehend call terms.
identifiers in all five systems were shown in camel case.
for both novices and experts the statistical differences of number of visits remain significant when the results of control flow terms are adjusted based on the number of characters.
for experts the statistical results for gaze time and number of visits are z .
p .
and z .
p .
respectively.
for novices the statistical result for gaze time is z .
p .
and for number of visits is z .
p .
.
note that when gaze time of control flow terms is adjusted by number of characters the difference between control flow terms and non control flow terms become significant.
this indicates that unlike experts novices need significant time to comprehend control flow terms.
therefore we conclude that calls and control flow terms are read differently.
in particular call terms require longer gazetable iii comparing results with the rodeghero study .
o ur results show developers read call terms the most followed by control flow and finally the signa ture .h igher rank is based on higher gaze time and number of visits .
rank rodeghero ranking this study ranking signature call terms call terms control flow terms control flow terms signature time and higher number of visits while control flow terms are visited more frequently by experts and novices.
however one cannot claim to have evidence to order these locations with respect to their importance even though this is suggested in .
for example experts spend a long time comprehending calls due to their complex identifiers.
however this long gaze time does not necessarily suggest that call terms are more important than other locations.
if a method has ten call invocations these calls may not be equally important.
the same reasoning applies to control flow terms.
a more detailed analysis of this is left as future work.
rq1 discussion on similarities and differences in results with the rodeghero study rodeghero et al.
observed that long identifiers high number of characters experienced long gaze time due to their complexity .
similarly we observe that experts read call terms significantly longer than non call terms when adjusted by number of terms but the result becomes insignificant when time is adjusted by number of characters no character adjustment was done in .
this indicates that call terms required longer time due to the complexity of the terms number of characters .
as seen in table iii these results do not reproduce results from the rodeghero study .
they concluded that the signature is the most important location followed by call terms and next by control flow terms.
however in the study presented here developers read and revisit call terms more heavily than other locations.
control flow terms are revisited more frequently than other terms.
finally signature terms are revisited less frequently than other locations.
therefore we conclude that developers read call terms the most followed by control flow terms and finally the signature.
we interpret the difference as follows.
first developers read methods differently when presented inside their inherent context versus in isolation.
developers tend to focus on the method s body more than its signature when the code is presented in a realistic environment .
in the rodeghero study when a developer formulates a hypothesis about a method and wants to step back they have no choice but to look at the signature.
however in our case they can examine locations outside the method.
second our study uses longer and more complex methods the largest method is loc compared to the rodeghero study the largest method loc .
in fact we found statistical evidence that the larger the method the less likely experts fixate or revisit the signature.
furthermore rodeghero et al.
concluded that control flow authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
terms are read statistically less than other areas of a method .
our result indicates that control flow terms in larger methods rated to be harder to summarize by experts are visited more frequently than control terms of smaller methods.
rq1 finding experts and novices spend the longest time on reading call terms and visit call terms more than non call terms.
the next most read and visited locations are control flow terms and the method signature.
b. rq2 results method size we analyze eye tracking data based on method size using the same approach in rq1 by adjusting the gaze time and number of visits for each location signature body calls control flow .
then methods are divided by their size large loc medium loc and small loc .
for each category the eye movements on signature call and control flow statements are analyzed.
these findings are reported for experts and novices.
the hypotheses are hn with respect to for large medium small methods the difference between the adjusted gaze time visit metric for signature and the body calls and other areas control flow and other areas is not statistically significant.
experts we only report the statistical significant results due to space limitations.
experts revisit the body of a method statistically more frequently than the signature in case of large methods n z .
p .
with a large effect size of .
.
no statistical differences were found in case of medium n z .
p .
and small n z .
p .
methods.
therefore we conclude that as the size of a method increases experts visit method bodies more often than method signatures.
for control flow and call terms no statistical differences were found in all cases small medium and large methods .
novices novices read the signature significantly less than the body in case of small methods in terms of gaze time n z .
p .
with a medium effect size of0.
and number of visits z .
p .
with a medium effect size of .
.
novices spent a significant amount of time reading call terms except for large methods.
they read call terms significantly more than non call terms in case of small methods in terms of gaze time n z .
p .
with a medium effect size of .
and number of visits z .
p .
with a medium effect size of .
.
novices read call terms significantly more than non call terms in case of medium methods in terms of gaze time n z .
p .
with a medium effect size of .
and number of visits z .
p .
with a medium effect size of .
.
after manually checking novices answers we observed that they wrote their summaries from the signature and avoided reading the code especially for large methods.
for control flow terms no statistical differences were found in small medium and large methods.
rq2 finding we found statistical evidence that experts tend to revisit the body of the method more frequently than its signature when the size of the method increases.c.
rq3 results reading outside of the summarized method as mentioned earlier since we used the eclipse plugin itrace the participants were able to context switch to any file if they needed to.
they worked in a very realistic setting where all the code was provided to them.
when a developer starts summarizing a method and then switches to some location outside of the scope of the assigned method this may be an indication that they need more information to understand the method or to confirm an assumption.
accordingly they spend some time looking for clues that might be found somewhere else either within the same file or outside the file that has the assigned method to be summarized.
these possible scenarios are examined for experts and novices.
both experts and novices read outside of the assigned method in out of of the tasks.
the average time spent by experts to examine locations outside of the method is generally lower than the average time spent by novices.
on average novices spent about of the time examining outside locations whereas experts spent about .
we further inspected the summary responses collected from the participants after the experiment and compared their responses to the average time spent outside the method.
all methods for which participants spent more than average time outside the method at least one of the participants described the method or one of its components such as a data member or method call as vague used the word unsure in their summary or rated the method as difficult in a post questionnaire on task difficulty.
rq3 discussion we discuss three out of scope locations that a participant may have examined while summarizing an assigned method.
these locations are class declarations data members and close approximation i.e.
statements that belong to methods that precede or follow the assigned method .
for both experts and novices the largest duration spent outside the method scope is to read in close approximation.
specifically we observed that when a participant is reading the first few lines of the assigned method he or she also looks at the methods or lines that precede the method with respect to the location in the file .
similarly when a participant is inspecting the last few statements of an assigned method he or she may also look at those lines that appeared after the method in the file.
this observation confirms the result of .
however it does not provide insight that the participants might have got help from looking at those nearby locations.
data members and class declarations are the next common locations that experts and novices examine outside the assigned method.
after manually examining the data we noticed that locating data members and class declarations is mostly done by scrolling up or down rather than using the search option.
this might be the case as the class declaration is always found at the beginning of the file and data members are found either at the beginning or the end of the source file.
also scrolling up or down to look for information is used usually when the file that contains the assigned method is short.
using the search option is noticed in cases of large files.
on average experts spent of the gaze time reading data members and authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
of gaze time reading the class declaration.
novices spent of the gaze time reading data members and of gazetime reading class declaration.
furthermore we observed oneexpert and one novice switch from a statement with a methodcall within the assigned method to summarize to an outsidelocation that follows the sequence of the methods captured in or represented by the call graph.
we posit that for both experts and novices reading outside the method scope is more related to developer preferencethan their level of expertise.
we found three experts and fournovices who read outside a method more often than others.finally a random scan of other methods inside the file isa behavior that is carried more frequently by novices whileexperts tend to focus on the assigned methods and read outsidethe method if they are looking for information such as the classor data member declarations.
rq3 finding all participants looked outside the scope of the assigned methods at least once during the experiment.
onaverage they spend .
of their time examining locations within the assigned method and .
of the time is spent examining other locations outside the scope of the method.all five experts examine data members at least once and threeexperts read the class declarations.
searching for them byscrolling is more common than using the search option.
d. rq4 results source lines read used in summarization for this rq we choose to focus on tasks completed by experts only because we observe that experts write concise and high quality summaries compared to novices.
although theanalysis of novices data can help understand students readingbehavior and eventually can contribute in better teachingstudents such analysis is out of the scope of this paper.
unlikerq1 and rq2 that groups all terms for each statement type i.e.
control flow we study each line as whole in rq3.therefore for each source code line read by an expert thetotal gaze time is computed.
the gaze time of a line is thetotal amount of time spent reading any term on that line.
thisanalysis is done on samples spanning a total of linesread by all experts .
we observed that of lines with no gaze data are lines with no identifiers e.g.
a open close brace return false orhaving the else keyword as no higher level information canbe obtained from them.
however a high number of identifierson a line may not lead directly to long gaze time.
see figure1 for a heat map a common graphical representation of eye tracking data of one sample.
although line is the shortestline in the method this participant spent about 832ms on this line which is of the total gaze time.
on the otherhand longer lines could have shorter gaze times such as line6 933ms and line 832ms .
we first study the impact of line length on the gaze time to determine if we need to adjust the gaze time based online length to make a fair comparison for analysis.
first for each data sample according to the gaze time lines are sortedin decreasing order from largest to smallest .
therefore theline with the largest gaze time has a rank of one and the fig.
.
heat map generated for one method and one participant.
longest gaze time red lines long gaze time orange lines medium gaze time yellowlines short gaze time light green lines shortest gaze time but not zero green lines and zero gaze time uncolored lines .
line with the lowest gaze time has a rank equal to n where nis the number of lines in a data sample.
second for the same data sample we adjust the gaze time for each source code line based on the number of identifiers.
for example if a participant spent 100ms reading a line and the line has identifiers then the adjusted duration is ms. third each line is assigned another rank based on the adjustedgaze time as we did with the actual time in the first step.finally the original list is compared to the adjusted durationusing kendall s tau coefficient that evaluates the degreeof concordance between two sets of ranked data a suitable test in this case.
if kendall s tau is then thetwo lists are identical indicates that one is the reverse ofthe other.
since critical value of kendall s tau depends on n number of lines in each sample samples that has less thanfive lines are eliminated because n is not large enough .we found significant agreement between the line ranks of theactual gaze time and adjusted gaze time in out of of the samples.
additionally we found insignificant agreementbetween the line ranks of the actual gaze time and adjustedgaze time in out of of the samples.
this stronglysuggests that the length of a line does not significantly impactthe amount of time spent reading the line.
consequently foreach line we can use either the actual gaze time or the adjustedgaze time.
we use actual gaze time for the rest of the analysis.
we analyze expert summaries in order to understand what developers seek in a method summary.
these observations canultimately produce recommendations and guidelines regardingsource code summarization and source code comprehension.lines that experts used to write their summaries are firstmanually identified.
then the gaze time of these lines areanalyzed.
figure demonstrates the three steps performedfor the method shown in figure .
we first determine linesused to write the summary for a method.
this is doneby manually examining the expert summaries.
consider themethod presented in figure .
the summary written by expert ais deploys units for the game communicating this over authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
illustrating the three steps performed to answer rq for the method in figure .
a network connection .
the two words deploys and units appear together in the signature on line and .
the main verb deploy also appears on line .
therefore the list of lines used are lines and .
the second part of the summary communicating this over a network connection suggests the usage of line although none of the words are directly used from the method call in line .
the summary of the same method written by expert b is transmit game unit object data positioning over the network and flush the connection which suggests the use of lines and .
line is added because this participant specifies that type and the name of the data being sent object data .
finally both experts use the word game although it does not appear in the method.
they might have gained this information by reading the description of the system.
finally if a phrase used by the developer is found on multiple lines e.g.
a call that appears three times in the method the three lines are included in the lines used list as long as the gaze duration is greater than zero.
of the lines lines are used by experts.
on average experts use content from three lines to write their summaries for a method.
after these lines are determined they are sorted in decreasing order.
finally a comparison is made to determine if lines used lines and in our example are lines that the expert read.
as shown in figure of the lines line and are the most read lines and line is the fifth most read line.
in this sample for a used line to be in the top read lines the line should be in the lines 6thposition or higher.
therefore expert a wrote her summary using lines that she read.
these three steps are repeated for all experts samples for the lines used.
we found that out of of used lines are located in the top of lines with the highest gaze time.
out of of used lines are located in the top of lines with the highest gaze time and finally of used lines are located in the top of lines with the highest gaze time.
a line from a method can appear more than once in the set of lines used if more than one expert used it.
to examine if participants use similar lines we analyze methods that are summarized by at least two experts.
methods are summarized by experts who use unique lines to write their summaries.
of lines are used by one expert only and of lines used by at least two experts.
we interpret this as experts tend to use similar lines but the level of details varies.
rq4 discussion in the list of used lines there are 124unique lines from methods.
one of the authors manually examined all unique lines used by experts to determine the type of these lines.
we found that out of of lines used by experts belong to one of the summary units proposed in previous literature on source code summarization .
summary units are sets of source code lines that are used to generate an automatic summary of the method.
these proposed tools select the lines from the method based on linguistic and or static analysis.
table iv demonstrates summary unit categories along with summarization lines introduced in the literature and how many of the lines used by experts in our study fall into these categories.
for example the method name is commonly used to summarize a method as it describes the goal of a method.
in the example shown in fig.
the last void call summarization unit is used the main summary units are lines and .
additionally one of the secondary summary units can be used to support one of the main summary units.
for example line variable declaration is used to add more information to line .
we conclude that our findings validate the literature at a finegrained level.
the lines used by experts are actually the same lines that past literature has proposed.
.
rq4 finding we found strong evidence that the gaze time of a line can predict if a line should be in a method summary.
our analysis reveals that developers tend to use source code lines that they read the most highest gaze time when they write their own summaries.
we found that of lines used are found in summaries written by at least two experts.
vii.
t hrea ts to validity internal v alidity when a developer writes a summary for a method from a class he she may build some knowledge about the class.
this might affect the time and the effort to understand other methods from the same class.
to mitigate this each developer was asked to summarize methods from different unrelated classes.
to avoid fatigue we kept the number of methods to be summarized to with the goal of having the study completed in about an hour.
to reduce the overhead in browsing many systems we limit the number of systems for each developer to three.
as developers mostly rely on comments to understand methods we remove all comments from the source code similar to the rodeghero study .
this was necessary as the goal of the study is to examine source code statements that developers focus on when they write authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
table iv the type of source code lines used by experts to write their summaries .these lines ma tch source code lines proposed by the litera ture in automa tic summariza tion documenta tion category of summary unit statements type statement subtype occurrences method signature method name and parameters.
mcburney rodeghero abid 13method bodymain summary units last void call.
sridhara same action call name inside method body same as method name sridhara modifying a data member by abid call assignment modifying a parameter by sridhara abid call assignment return.
sridhara abid secondary summary units control flow that controls one of the main summary units sridhara abid if switch loops modifying the returned value by sridhara abid call assignment v ariable declaration and or initialization that used in one of the main summary unit sridhara call assignment additional information v ariable declaration and or initialization used in one of the secondary summary units.
abid if stmt others v oid call calls that don t return a value if statement predicate total their own summaries.
construct v alidity developers have different ide environment preferences that might affect their performance.
we kept the default barebones eclipse syntax highlighting preferences for all participants.
in addition code folding was not allowed to reduce any confounding effects.
none of the participants complained about this setting or the highlighting used.
lines identified in rq4 are determined by one of the authors.
future work will involve more than one author and will report agreement.
external validity refers to generalizing the results to the target population.
our experts were comparable to industry programmers.
to support conclusion validity we use appropriate statistical tests to match our data assumptions i.e.
using wilcoxon signed rank for paired non parametric data and also report effect sizes.
viii.
i mplica tions these results can be directly applied to automatic summarization approaches.
out of see table iv of the signatures are used by at least one expert to write their summaries.
we observe that the expert starts the summary with the verb from the signature to explain the main action of the method.
then adds more details from a set of selected calls and other lines from the body.
we suggest the following guidance to summarization tool authors.
use the signature to reflect the main action of a method.
select one or more main summary units see table iv .
last void call is the main summary unit that is often used times by experts as methods often perform a set of steps to accomplish a final action .
therefore we advise to include the last void call of a method to the method summary.
the same action summary unit should also be used when applicable.
finally one can distinguish between three types of summary units modifying a data member modifying a parameter and returning a computed value.
select one or more secondary summary units related to the selected main summary unit as shown in table iv.
the results of this study can benefit other kinds of summarization such as automatic code folding.
during maintenancetasks not all lines are equally important.
for example developers tend to ignore catch blocks as they are typically not important for summarization.
furthermore experts tend to focus on about of a method to write a summary.
this finding can be used by folding those lines that are commonly ignored by experts.
additionally during a maintenance task the automatic documentation summary of a method can be displayed then using eye tracking data one can examine if developers tend to read and or use the provided documentation.
ix.
c onclusions and future work this paper presents an eye tracking study of experts and novices reading and summarizing java methods.
the study uses methods of different sizes to investigate their influence on developers reading behavior.
the results reveal that the signature of a method is statistically less visited by experts and novices.
they also spend a significant amount of gaze time and have higher gaze visits when they read call terms.
on the other hand both experts and novices tend to revisit control flow terms rather than read them for a long period.
furthermore analyzing lines that experts read during summarization can uncover important lines for automatic summarization.
the main take home message of the results are that conducting eye tracking studies on a single screen of code does not always generalize to how a developer behaves in a real work environment.
this has been a limitation of eye tracking software but with improvements in infrastructure researchers can now study developers in a more realistic setting resulting in better understanding of how they actually solve software engineering tasks.
as future work we plan to replicate other eye tracking studies to see if the results generalize when conducted outside a constrained single screen study environment.
acknowledgment we are grateful to all the participants who took part in this study.
this work is supported in part by grants from the national science foundation under grant numbers ccf and ccf .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.