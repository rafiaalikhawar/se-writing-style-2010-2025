alloyinecore embedding of first order relational logic into meta object facility for automated model reasoning ferhat erata unit information technologies r d turkeyarda goknil university of luxembourg luxembourg ivan kurtev altran netherlands the netherlandsbedir tekinerdogan wageningen university the netherlands abstract we present alloyinecore a tool for specifying metamodels with their static semantics to facilitate automated formal reasoning on models.
software development projects require that software systems be specified in various models e.g.
requirements models architecture models test models and source code .
it is crucial to reason about those models to ensure the correct and complete system specifications.
alloyinecore allows the user to specify metamodels with their static semantics while using the semantics it automatically detects inconsistent models and completes partial models.
it has been evaluated on three industrial case studies in the automotive domain ccs concepts software and its engineering specification languages semantics formal methods keywords formal reasoning modeling relational logic alloy kodkod acm reference format ferhat erata arda goknil ivan kurtev and bedir tekinerdogan.
.
alloyinecore embedding of first order relational logic into meta object facility for automated model reasoning.
in proceedings of the 26th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse november lake buena vista fl usa.
acm new york ny usa pages.
https introduction model driven engineering mde is becoming a crucial practice in industry due to the increasing complexity of software systems that warrant better support for managing development artifacts .
in mde software is developed by successively transforming abstract models to more concrete ones.
each model conforms to its metamodel an artefact usually created using ecore a de facto industry standard for metamodeling and an example of implementation of the meta object facility mof which describes the permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse november lake buena vista fl usa association for computing machinery.
acm isbn .
.
.
.
to create and manipulate models and metamodels.
an important challenge in mde is providing ability of automated formal reasoning on models e.g.
checking model consistency and completing partial models .
we present a tool alloyinecore which allows specification of metamodels with their static semantics and facilitates multiple forms of automated formal reasoning on models.
alloyinecore is targeted at environments that require integration and reasoning on heterogeneous models.
such environments are often encountered within the context of our research in collaboration with ford otosan .
the key idea behind alloyinecore is that the static semantics of an ecore metamodel can be specified within a simple first order logic of sets and relations to support reasoning on models conforming to the metamodel.
alloy is a declarative modeling language based on first order relational logic.
it has been explored by the mde community for the purpose of analyzing uml ocl models .
most of the existing tools and approaches use a transformation of uml ocl models to alloy which however does not support directly some important concepts like multiple inheritance generic types and type parameters due to the fundamental differences between uml ocl and alloy notations .
in the case of dealing with various models in different abstraction levels it is required to enable the specification of such concepts and herewith multiple forms of model reasoning.
to do so alloyinecore provides the following major features i alloy like notation embedded into ecore to specify the static semantics of metamodels based on first order logic fol relational operators and transitive closure ii direct translation of ecore metamodels into the language of kodkod an efficient sat based constraint solver for fol with relational algebra.
in this way we avoid the problems related to the differences between alloy and ecore.
our tool performs two major model reasoning tasks completing partial models and detecting inconsistent model parts.
related work several formal analysis methods and specification languages have been proposed relying on modern sat solvers smt solvers and theorem provers e.g.
formula using z3 smt solver clafer using alloy along with choco csp solver and alloy using kodkod that relies on sat solvers like minisat .
a number of mde solutions and tools provide automated model reasoning using existing formal analysis methods and specification languages based on constraint logic programming e.g.
sat based model finders e.g.
and smt solvers e.g.
.
however to the best of our knowledge none ofarxiv .02652v1 mar 2024esec fse november lake buena vista fl usa ferhat erata arda goknil ivan kurtev and bedir tekinerdogan them provides a method that embeds fol augmented with relational calculus into mof ecore to specify the static metamodel semantics with the support for partial models composition cardinality constraints multiple inheritance generic types and type parameters.
for instance anastakis et al.
advocate to transform uml ocl specifications to alloy for automated model reasoning.
the proposed transformation does not support multiple inheritance generic types and type parameters because of the differences between uml ocl and alloy notations.
lightning is a tool supported approach for defining some aspects of domainspecific languages e.g.
abstract syntax and semantics entirely in alloy.
in our approach language designers can use alloyinecore to specify the abstract syntax of a language as an ecore metamodel enriched with embedded alloy like statements.
use is a tool for analyzing models expressed in uml and ocl.
similarly to our approach use translates models into relational logic and relies on the kodkod library.
tool overview alloyinecore is a generalization of our previous tool tarski which reasons on trace links in traceability models using configurable trace link semantics.
fig.
presents an overview of our tool.
in step the user specifies an ecore metamodel and its static semantics expressed in fol augmented with the relational calculus embedded in ecore.
to do so alloyinecore natively supports alloy in ecore with a custom eclipse editor.
usermetamodel and semantics specify the metamodel and its semantics are the metamodel and its semantics consistent?nospecify models conforming to the metamodel inconsistent model partscompleted modelreason on the models metamodel and semantics models yes figure tool overview once the user specifies the metamodel and its semantics alloyinecore allows creation of instance model s conforming to the metamodel step .
after the model is created the tool proceeds to step using automated model reasoning.
in the following we elaborate each step using the theory of lists as a running example.
.
specification of metamodels and semantics as the first step the user specifies a metamodel and its semantics in our alloy like notation embedded into ecore.
the user can create the metamodel using any graphical textual or tree based ecore model editor including our alloyinecore editor.
fig.
gives the theory of lists metamodel in the ecore graphical editor.
the user uses our editor to specify the static semantics of the metamodel see fig.
.
the keywords in blue and brown are introduced by alloyinecore for specifying the metamodel semantics while the ones in red are the ecore keywords for defining the metamodel itself.
some of the alloyinecore keywords e.g.
ghost model andnullable were borrowed from jml .
figure the metamodel for the theory of lists there are three abstract classes in fig.
object list and vehicle .
the object is an abstract class at the root of the class hierarchy.
the ghost keyword indicates that the identifier attribute will not be considered in the model reasoning line .
the cardinality constraint in line specifies the lower and upper bounds on the listinstances.
the abstract class listis composed of two properties thecarmapping each listinstance to an instance of another class e.g.
a vehicle instance and the cdrpointing to another listinstance.
the ?keyword constrains these properties to be partial functions lines .
to rule out cyclic lists the acyclic keyword is used in the cdrproperty line .
the model keyword defines the eq property as a relation to be inferred in the reasoning line .
model properties are not mapped to ecore features.
figure example metamodel semantics in alloyinecore metamodel semantics is mainly given as invariants .
for instance the invariant in lines ensures that two listinstances are equal a in b.eq in line if and only if the head instances in thealloyinecore embedding of first order relational logic into ... esec fse november lake buena vista fl usa two lists are the same a.car b.car in line the subsequent listinstances are equal a.cdr in b.cdr.eq in line and the list instances are of the same type a.class b.class in line .
the invariant in line guarantees that each vehicle instance is in at least one list see the some keyword .
the nilclass represents the empty list line .
the onekeyword makes the nilclass a singleton set which means there can be only one nilinstance in a model.
a nilinstance has neither the carnor the cdrproperty lines while a non nil listinstance has both carandcdr line .
a nilinstance is always a subsequent list of any list instance line .
the singleton class memory holds the vehicle andlistclasses see the composes keyword in lines .
it is important to note that list ?
extends vehicle represents the list instances of any subclass of vehicle line .
each vehicle instance has a unique name line and there is always exactly one vehicle instance with the name ford f xlt line .
there are two types of vehicles nonenginedvehicle andenginedvehicle line .trucklist andcarlist are lists of enginedvehicles lines while bicyclelist is a list of nonenginedvehicle line .
.
specification of models the user can use any graphical textual or tree based ecore model editor to specify models conforming to the metamodel step in fig.
.
before creating any model alloyinecore automatically checks if the user can specify at least one valid model that conforms to the metamodel and its static semantics.
the user may have specified some contradicting invariants where it is not possible to create a valid model.
alloyinecore automatically identifies the contradictions in the metamodel specification and notifies the user.
.
automated reasoning on models model completion and consistency checking aim at deriving new instances and relations in the given model and determining model parts violating the metamodel semantics respectively.
these two activities are processed as a single reasoning activity because they use the same reasoning machinery.
the consistency checking can be considered as part of model completion because a partial model is completed only if it is consistent.
.
.
checking model consistency.
alloyinecore takes a model and its metamodel as input and automatically identifies using the static metamodel semantics inconsistent model parts as output.
alloyinecore provides an explanation of the inconsistency by giving all the instances and relations causing the inconsistency.
fig.
gives three alloyinecore panes for an example inconsistent model of the theory of lists.
the first pane in fig.
gives the inconsistent model while in the second pane alloyinecore highlights part of the metamodel semantics causing the inconsistency.
although the cdrproperty of the listclass is given acyclic see the highlighted acyclic keyword in line the red colored cdrintrucklist is referring to the instance itself.
the third pane in fig.
gives the first order relational logic formula that corresponds to the acyclic keyword for further explanation of the inconsistency.
.
.
completing partial models.
if the given model is consistent alloyinecore automatically deduces new instances and relations in the input model using the static metamodel semantics.
the model is completed only if it is consistent and not an exact model i.e.
a figure example inconsistent model of the theory of lists model where it is not possible to infer anything more .
for instance the user removes the cyclic cdrrelation in fig.
to make the model consistent and then alloyinecore completes the model.
our tool infers different complete models for the partial model in fig.
.
fig.
shows one of these inferred models.
figure example completed model of the theory of lists the dashed arrows and the white boxes represent the automatically inferred relations and instances respectively.
alloyinecore automatically infers one nilinstance see the onekeyword in line in fig and one trucklist instance see the invariant in line and the cardinality constraint in line .
it also infers the name for enginedvehicle see the invariant in line and the carrelation between trucklist andenginedvehicle see the invariant in line .
the inferred nilinstance is a subsequent list of the inferred trucklist instance see the invariant in line .
each listinstance is equal to itself while trucklist is equal to trucklist see the invariant in lines .esec fse november lake buena vista fl usa ferhat erata arda goknil ivan kurtev and bedir tekinerdogan evaluation our goal was to assess in an industrial context the benefits of using alloyinecore to facilitate automated model reasoning using user defined metamodel semantics.
we selected three case studies from the electronically controlled air suspension ecas system developed by ford otosan .
each case study is with an ecas artifact conforming to a different metamodel i.e.
a requirements specification a data flow diagram and a sysml model .
before conducting the case studies the ford otosan engineers were given presentations illustrating the alloyinecore steps and a tool demo.
the engineers held various roles e.g.
senior software and system engineers with substantial development experience.
for each case study we assisted the engineers in specifying metamodel semantics in alloyinecore the 1st 2nd and 3rd columns in table .
table number of classes properties invariants models and completed inconsistent parts in the case studies metaclassespropertiesinvariantsmodel elementscomple.
elementsinconsis.
elements to evaluate the output we had semi structured interviews with the engineers.
all the completed model parts and the identified inconsistencies were confirmed by the engineers to be correct the 4th and 5th columns .
the engineers considered the automated reasoning on models to be highly valuable.
the alloy like notation embedded into ecore was sufficient and easy for the engineers to specify the metamodel semantics in the case studies.
for the largest model the 3rd row it took secs to perform the reasoning.
implementation availability alloyinecore has been implemented as an eclipse plug in.
we use kodkod to perform automated reasoning on models based on the metamodel semantics.
alloyinecore translates the input metamodel and semantic specification into a first order relational formula.
it also translates the input model into a universe and bounds in kodkod.
kodkod translates the formula and the bounds into a boolean satisfiability sat problem to invoke an off the shelf sat solver.
if the sat solver finds a sat solution to the problem kodkod translates that sat solution into a solution to the formula from which alloyinecore derives the completed model.
alloyinecore is approximately 31k lines of java code excluding comments and third party libraries.
additional details about alloyinecore including executable files and a screencast covering motivations are available on the tool s website at conclusion we presented a tool that enables the specification of metamodel semantics for automated model reasoning.
the key characteristics of our tool are enabling the user to specify metamodels and their semantics in a single environment identifying inconsistent model parts and completing partial models.
the tool has been evaluated over three industrial case studies.