automatically generating precise oracles from structured natural language specifications manish motwani and y uriy brun college of information and computer sciences university of massachusetts amherst amherst massachusetts usa mmotwani brun cs.umass.edu abstract software specifications often use natural language to describe the desired behavior but such specifications are difficult to verify automatically.
we present swami an automatedtechnique that extracts test oracles and generates executable testsfrom structured natural language specifications.
swami focuseson exceptional behavior and boundary conditions that often causefield failures but that developers often fail to manually write testsfor.
evaluated on the official javascript specification ecma .
of the tests swami generated were precise to thespecification.
using swami to augment developer written testsuites improved coverage and identified previously unknowndefect and missing javascript features in rhino previouslyunknown defect in node.js and semantic ambiguities in theecma specification.
i. i ntroduction one of the central challenges of software engineering is verifying that software does what humans want it to do.
unfortunately the most common way humans describe and specify software is natural language which is difficult to formalize and thus also difficult to use in an automated process as an oracle of what the software should do.
this paper tackles the problem of automatically generating tests from natural language specifications to verify that thesoftware does what the specifications say it should.
tests consist of two parts an input to trigger a behavior and an oraclethat indicates the expected behavior.
oracles encode intent and are traditionally specified manually which is time consuming and error prone.
while formal mathematical specifications thatcan be used automatically by computers are rare developers do write natural language specifications often structured as part of software requirements specification documents.
for example figure shows a structured natural language specificationof a javascript array len constructor part of the ecma262 standard .
this paper focuses on generating oracles from such structured natural language specifications.
test inputscan often be effectively generated randomly and together with the oracles produce executable tests.
of particular interest is generating tests for exceptional behavior and boundary conditions because while developers spend significant time writing tests manually theyoften fail to write tests for such behavior.
in a study often popular well tested open source projects the coverage of exception handling statements lagged significantly behind overall statement coverage .
for example developers new array len the internal property of the newly constructed object is set to the original array prototype object the one that is the initial value of array.prototype .
.
.
.
the internal property of the newly constructed object is set to array .
the internal property of the newly constructed object is set to true .
i f t h e a r g u m e n t len is a number and touint32 len i s e q u a l t o len then the length property of the newly constructed object is set to touint32 len .
if the argument len is a number and touint32 len is not equal to len a rangeerror exception is thrown.
if the argument len is not a number then the length property of the newly constructed object is set to and the property of the newly constructed object is set to len with attributes true true true .
fig.
.
section .
.
.
of ecma v5.
specifying the javascript array len constructor.
often focus on the common behavior when writing tests and forget to account for exceptional or boundary cases .
atthe same time exceptional behavior is an integral part ofthe software as important as the common behavior.
anibm study found that up to two thirds of production codemay be devoted to exceptional behavior handling .
andexceptional behavior is often more complex and thus morebuggy because anticipating all the ways things may go wrong and recovering when things do go wrong is inherently hard.
finally exceptional behavior is often the cause of field failures and thus warrants high quality testing.
this paper presents swami a technique for automatically generating executable tests from natural language specifications.
we scope our work by focusing on exceptional and boundary behavior precisely the important in the field behavior developers often undertest .
swami uses regular expressions to identify what sections of structured natural language specifications encode testable behavior.
while not required if the source code is available swami can also use information retrieval techniques to identify such sections.
swami then applies a series of four regularexpression based rules to extract information about the syntax for the methods to be tested the relevant variable assignments and the conditionals that lead to visible oracle behavior such as return statements or exception throwing statements.swami then backtracks from the visible behavior statements to recursively fill in the variable value assignments according to the specification resulting in a test template encoding the ieee acm 41st international conference on software engineering icse .
ieee authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
oracle parameterized by test inputs.
swami then generates random heuristic driven test inputs to produce executable tests.
using natural language specifications pose numerous challenges.
consider the ecma specification of a javascript array len constructor in figure .
the specification uses natural language such as if the argument len is a number and touint32 len is equal to len then the length property of the newly constructed object is set to touint32 len .
refers to abstract operations defined elsewhere in the specification such as touint32 which is defined in section .
of the specification figure .
refers to implicit operations not formally defined by the specification such as min max is not equal to is set to is an element of andis greater than .
describes complex control flow such as conditionals using the outputs of abstract and implicit operations in other downstream operations and conditionals.
we evaluate swami using ecma the official specification of the javascript programming language and two well known javascript implementations java rhino and c node.js built on chrome s v8 javascript engine.
we find that of the tests swami generates .
are innocuous they can never fail.
of the remaining tests .
are precise to the specification and only .
are flawed and might raise false alarms.
swami generates tests that are complementary to developer written tests.
our generated tests improved the coverage of the rhino developer written test suite and identified previously unknown defect and missing javascript features in rhino previously unknown defect in node.js and semantic ambiguities in the ecma specification.
swami also outperforms and complements state of the art automated test generation techniques.
most tests generated by evosuite which does not automatically extract oracles that cover exceptional behavior are false alarms whereas .
of swami generated tests are correct tests that cannot result in false alarms.
augmenting evosuitegenerated tests using swami increased the statement coverage of rhino classes by on average .
.
swami also produced fewer false alarms than toradacu and jdoctor and unlike those tools generated tests for missing features.
while swami s regular expression based approach is rather rigid it performs remarkably well in practice for exceptional and boundary behavior.
it forms both a useful tool for generating tests for such behavior and a baseline for further research into improving automated oracle extraction from natural language by using more advanced information retrieval and natural language processing techniques.
our research complements prior work on automatically generating test inputs for regression tests or manually written oracles such as evosuite and randoop by automatically extracting oracles from natural language specifications.the closest work to ours is toradacu and jdoctor which focus on extracting oracles for exceptional behavior and tcomment which focuses on extracting preconditions related to nullness of parameters.
these techniques are limited to using javadoc comments which are simpler than the specifications swami tackles because javadoc comments provide specific annotations for pre and post conditions including param throws and returns making them more formal are collocated with the method implementations they specify use the variable names as they appear in the code and do not contain