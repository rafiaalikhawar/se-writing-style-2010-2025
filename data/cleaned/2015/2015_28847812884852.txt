revisiting code ownership and its relationship with software quality in the scope of modern code review patanamon thongtanunam1 shane mcintosh2 ahmed e. hassan3 hajimu iida1 1nara institute of science and technology japan patanamon t is.naist.jp iida itc.naist.jp2mcgill university canada shane.mcintosh mcgill.ca3queen s university canada ahmed cs.queensu.ca abstract codeownershipestablishesachainofresponsibilityformodulesinlargesoftwaresystems.
althoughpriorworkuncovers a link between code ownership heuristics and software quality these heuristics rely solely on the authorship of code changes.
in addition to authoring code changes developers also make important contributions to a module by reviewing code changes.
indeed recent work shows that reviewers are highlyactiveinmoderncodereviewprocesses oftensuggesting alternative solutions or providing updates to the code changes.
inthispaper wecomplementtraditionalcodeownership heuristics using code review activity.
through a case study of six releases of the large qt and openstack systems we find that of developers did not author any code changes for a module but still actively contributed by reviewing of the code changes code ownership heuristics that are aware of reviewing activity share a relationship with software quality and the proportion of reviewers without expertise shares a strong increasing relationship with the likelihood of having post release defects.
our results suggest that reviewing activity captures an important aspect of code ownership and should be included in approximations of it in future studies.
ccs concepts software and its engineering maintaining software programming teams keywords ownership expertise software quality .
introduction code ownership is an important concept for large software teams.
in large software systems with hundreds or even thousands of modules code ownership is used to establish a chain of responsibility.
when changes need to be made to a module with strong code ownership there is a module permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
icse may austin tx usa c circlecopyrt2016 acm.
isbn .
.
.
.
ontheotherhand itismore difficult to identify the developer to whom tasks should be delegated in modules with weak code ownership.
in the literature code ownership is typically estimated using heuristics that are derived from code authorship data.
for example mockus and herbsleb use the number of tasks that a developer has completed within a time window that modify a given module to identify the developer that is responsible for that module .
furthermore bird et al.estimateacodeownershipvalueforadeveloperwithinamodule by computing the proportion of code changes that the developer has authored within that module .
rahman and devanbu estimate code ownership values at a finer granularity by computing the proportion of lines of changed code that each developer has authored .
indeed the intuition behind traditional code ownership heuristics is that developers who author the majority of changes to a module are likely to be the owners of those modules.
however in addition to authorship contributions developers can also contribute to the evolution of a module by critiquing code changes that other developers have authored in that module.
indeed many contemporary software development teams use modern code review mcr a tool based code review process which tightly integrates with the software development process .
in the mcr process code changes are critiqued by reviewers typically other developers to ensure that such code changes are of sufficient quality prior to their integration with the codebase.
while several studies have shown that the modern code review activities share a link to software quality themcrprocessismorethanjustadefect huntingexercise.
indeed morales et al.show that developer involvement in the mcr process shares a relationship with software design quality .
bacchelli and bird report that the focus of codereviewatmicrosofthasshiftedfrombeingdefect driven to collaboration driven .
others report that reviewers in mcr processes often suggest alternative solutions or even provide updates to the code changes themselves .
despite the active role that reviewers play in the mcr process review contributions are disregarded by traditional code ownership heuristics.
for example a senior developer who reviews many of the code changes to a module while authoring relatively few will not be identified as a module owner by traditional code ownership heuristics.
therefore in this paper we set out to complement traditional code ownership heuristics using data that is derived from code review repositories.
more specifically we adapt the popular code ownership heuristics of bird et al.
to be review2016 ieee acm 38th ieee international conference on software engineering specific i.e.
solely derived from code review data and review aware i.e.
combine code authorship and review activity.
we then use review specific and review aware code ownership heuristics to build regression models that classify modules as defect prone or not in order to revisit the relationship between the code ownership and software quality.
through a case study of six releases of the large qt and openstack open source systems we address the following three research questions rq1 how do code authoring and reviewing contributions differ?
motivation while prior work examines the contrib utions of developers in terms of code authorship the review contributions that these developers make to a module still remains largely unexplored.
hence we first study how developers contribute to the evolution of a module in terms of code authorship and review.
results of the developers who contribute t o a module did not author any code changes yet they participated in the reviews of of the code changes made to that module.
moreover of these review only contributors are documented core team members.
rq2 should code review activity be used to refine traditional code ownership heuristics?
motivation prior work finds that modules with many m inor authors i.e.
developers who seldom wrote code changes in that module are likely to be defective .
however there are likely cases where minor authors review several of the code changes in that module.
hence weinvestigatewhetherrefiningtraditionalcode ownership heuristics by using code review activity will provide a more comprehensive picture of the association between code ownership and software quality.
results of developers who are flagged as m inor contributors of a module by traditional code ownership heuristics are actually major contributors when their code review activity is taken into consideration.
moreover modules without post release defects tend to have a large proportion of developers who have low traditional code ownership values but high review specific ownership values.
conversely the modules with post release defects tend to have a large proportionofdeveloperswhohavebothlowtraditional and review specific ownership values.
rq3 is there a relationship between review specific and review aware code ownership heuristics and defect proneness?
motivation prior work uses defect models to unders tand the relationship between traditional code ownership heuristics and software quality .
such an understanding of defect proneness is essential to chart quality improvement plans e.g.
developing code ownership policies.
yet since traditional code ownership heuristics do not include code review activity little is known about the role that reviewing plays in ownership and its impact on defect proneness.
hence we revisit the relationship between code ownership and software quality using review specific and review aware heuristics.
comments upload a proposed ch ange examine and discuss the proposed change revise the proposed change integrate approved change into upstream vcs repositories a code review tool e.g.
gerrit figure an overview of the mcr process.
r esults when controlling for several factors that are k nown to share a relationship with defect proneness ourmodelsshowthattheproportionofdeveloperswho have both low traditional and review ownership values shares a strong increasing relationship with the likelihood of having post release defects.
our results lead us to conclude that code reviewing activity provides an important perspective that contributes to the code ownership concept.
future approximations of code ownership should take code reviewing activity into account in order to more accurately model the contributions that developers make to evolve modern software systems.
paper organization.
section describes the mcr process and the studied code ownership heuristics in more detail.
section describes the design of our case study while section presents the results with respect to our three research questions.
section discusses the broader implications of our observations.
section discloses the threats to the validity of our study.
section surveys related work.
finally section draws conclusions.
.
background definition in this section we provide a brief description of the mcr process and the studied code ownership heuristics.
.
modern code review modern code review mcr is a tool based code review process which tightly integrates with the software development process.
mcr is now widely adopted by proprietary and open source software organizations .
recent studies have shown that mcr actively shares a relationship with post release defects the quality of code changes and software design quality .
furthermore mcr provides a hub like mechanism for sharing knowledge among developers .
figure provides an overview of mcr processes in the studied qt and openstack systems.
the studied processes are composed of four main steps upload a proposed change.
onceaproposedchange has been made the author uploads it to a code review tool and invites reviewers to examine it.
examine and discuss the proposed change.
reviewersexaminethetechnicalcontentoftheproposedchange and provide feedback to the author.
reviewers also provide a review score from to to indicate agreement positive value or disagreement negative value .
revise the proposed change.
the author or reviewers update the proposed change to address the feedback and upload a new revision to the code review tool.
integrate the approved change.
s teps and are repeated until reviewers are satisfied that the code change is of sufficient quality to be integrated.
then the proposed change is automatically integrated into upstream version control system vcs e.g.
git .
.
code ownership code ownership heuristics that operate at different granularities have been proposed in the literature .
for example bird et al.estimate code ownership values using the code change granularity .
fritz et al.propose code ownership heuristics at element i.e.
class granularity .
rahman and devanbu estimate code ownership values at the finer granularity of a code fragment.
since the studied mcr processes are connected with code changes i.e.
proposed changes should be reviewed prior to integration into the vcs we opt to extend the code ownership heuristics of bird et al.
using code review activity.
below we describe the traditional review specific and review aware code ownership heuristics.
.
.
traditional code ownership heuristics the traditional code ownership heuristics of bird et al.
are computed using the authorship of code changes to estimate the code ownership of a developer for a module.
for a developer d traditional code ownership tco of a modulemis computed as follows tco d m a d m c m wherea d m is the number of code changes that dhas authored in mandc m is the total number of code changes made to m. in addition bird et al.also define two levels of developer expertise within a module.
developers with low tco values i.e.
below are considered to be minor authors while developers with high tco values i.e.
above are considered to be major authors.
.
.
review specific ownership heuristics we define review specific ownership heuristics that use code review data to estimate the code ownership of developers according to the review contributions that they have made to a module.
for a developer d review specific ownership rso of a module mis computed as follows rso d m summationtextr d m k 1p d k c m wherer d m is the number of reviews of code changes made to min which dhas participated and p d k is a proportion of review contributions that dmade to code change k. since one review can have many reviewers we normalize the value of review specific ownership in each code change usingp d k in order to avoid having rso values that do not sum up to .
we explore two rso heuristics by varying the definition of p d k .
rso even wherep d k r k thisnormalizationevenly d ivides the share of review contributions to every reviewer of k. hence r k is the total number of developers who participated in the review of k. this normalization assumes that every reviewer contributes equally to k.table a contingency table of the review aware ownership expertise category.
traditional code ownership reviews pecific ownership minor author m inor reviewermajor author m inor reviewer minor author m ajor reviewermajor author m ajor reviewer .
rso p roportional wherep d k f d k this normali zation assigns a share of the review contribution to d that is proportional to the amount of feedback i.e.
number of review comments that dhas provided to the review of k. the intuition behind this normalization is that the more the feedback that dprovides during the review of k the larger the share of review contributions that dmade to k. similar to traditional code ownership we consider developers with low rso values i.e.
below to be minor reviewers and developers with high rso values i.e.
above to be major reviewers.
.
.
review aware ownership heuristics in practice developers act as both authors and reviewers.
for example a developer can be the author of a code change to a module while also being a reviewer of code changes that other developers have authored to that module.
however thetraditionalandreview specificownershipheuristicsindependently estimate code ownership using either authorship or review contributions respectively.
to address this we propose review aware code ownership heuristics.
we adapt the traditional code ownership heuristics to be review aware using the pair of tco and rso values that a developer can have within a module.
then we refine the levels of the traditional code ownership using the levels of review specific code ownership as shown in table .
for example for a module m if a developer dhas a tco value of and an rso value of then dwould have a review aware ownership value of which falls into the minor author major reviewer category.
.
case study design in this section we outline our criteria for selecting the studied systems and our data preparation approach.
.
studied systems in order to address our research questions we perform an empirical study on large rapidly evolving open source systems.
in selecting the subject system we identified two important criteria that needed to be satisfied criterion traceability we focus our study on systems where the mcr process records explicit links between code changes and the associated reviews.
criterion full review coverage since we willinvestigate the effect of review specific and review aware ownership heuristics on software quality we need to ensure that unreviewed changes are not a confounding factor .
hence we focus our study on systems that have a large number of modules with review coverage i.e.
modules where every code change made to them has undergone a code review.
1041table overview of the studied systems.
those above the doub le line satisfy our criteria for analysis.
system commits modules personnel n ame version tag name total linkage rate total with review coverage with defects authors reviewers qt5.
v5.
.
.
v5.
.
openstackf olsom .
g rizzly .
h avana .
i cehouse .
vtk .
v5.
.
i tk .
v4.
.
dp1 link code changes to reviews dp2 compute code ownership heuristics dp3 calculate module metrics code dataset review dataset code database module data code ownership datadata preparation figure an overview of data preparation approach.
t o satisfy criterion we began our study with four software systems that use the gerrit code review tool.
to mitigate bias that may be introduced into our datasets through noisy manual linkage we select systems that use the gerritcodereviewingtoolfor ouranalysis.
gerritautomatically records a unique id that can link code changes to the reviews that they have undergone.
we then discard vtk since its linkage rate is too low.
we also remove itk from our analysis since it does not satisfy criterion .
table shows that the qt and openstack systems satisfy our criteria for analysis.
qt is a cross platform application and ui framework that is developed by the digia corporation while welcoming contributions from the communityat large.1openstack is an open source software platform for cloud computing that is developed by many well known companies e.g.
ibm vmware and nec.
.
data preparation weusethereviewdatasetsthatareprovidedbyhamasaki et al.
which describes patch information reviewer scoring the involved personnel and review discussion.
we use the code dataset for the qt system provided by our prior work which describes the recorded commits on the releasebranch of the qt vcss during the development and maintenance of each studied qt release.
we also expand the code dataset for the openstack system using the same approach as our prior work .
in order to produce the datasets that are necessary for our study we link the review and code datasets and compute thecodeownershipheuristics.
figure2providesanoverview of our data preparation process which is broken down into the following three steps.
dp1 link code changes to reviews.
similar to our prior work we link the code and review datasets using the change id i.e.
a review reference that is automatically generated by gerrit.
for each code change we extract the change id recorded in the commit message.
to link the review gerrit uses subsystem name v cs branch c hange id as a unique reference.
hence we extract the commit data from the vcss to generate a reference then link the code change to the associated review.
once the code and review datasets are linked we measure review coverage for each module i.e.
directory .
since this study revisits the traditional code ownership heuristics which were previously studied at the module level we conduct our study at the same module level to aid the comparability of our results with the prior work.
we then remove modules that do not have review coverage from our datasets in order to control for the confounding effect that a lack review coverage may have .
dp2 compute code ownership heuristics.
to estimate the code ownership of a developer for a module we first identify code changes that the developer has authored using the owner field recorded in gerrit.
we then identify the code changes that the developer has reviewed using the review comments that the developer posted.
a code change that spans multiple modules is treated as contributing to all of the changed modules.
next we estimate code ownership using the traditional review specific and review aware code ownership heuristics see section .
for every developer who was involved with the development of each module.
similar to prior work we use a six month period prior to each release date to capture the authorship and review contributions that developers made during the development cycle.
dp3 calculate module metrics.
priorworkhasfound that several types of metrics have an impact on software quality.
hence we also measure popular product and process metrics that are known to have a relationship with defect proneness in order to control for their impact .
for the product metrics we measure the sizeof the source code in a module at the time of a release by aggregating the number of lines of code in each of its files.
for the process metrics we use churn and entropy to measure the change activity that occurred during the development cycle of a studied release.
we again use use the six month period prior to each release date to capture the change activity.
churn counts the total number of lines added to and removed from a module prior to release.
entropy measures how the complexity of a change process is distributed across source code files .
we measure the entropy of a module using a calculation of h m log2n summationtextn k pk log2pk where nis the number of source code files in module m andpkis the proportion of the changes to mthat occur in file k. we also detect whether there are post release defects in each module.
to detect post release defects in a module we identify defect fixing changes that occurred after a studied release date.
by studying the release practice of the qt .0qt .1openstack f olsomopenstack grizzlyopenstack havanaopenstack icehouseproportion of contributors contributions author and review only author only review figure number of developers who contribute to a m odule i.e.
authoring vs reviewing code changes .
studied systems we found that the studied systems release sub versions every two month after the main version is released.
hence we use a two month window to capture the defect fixing changes.
similar to prior work we search the vcs commit messages for co occurrences of defect identifiers with keywords like bug fix or defect .
a similar approach is commonly used to determine defect fixing and defect inducing changes in prior work .
.
case study results in this section we present the results of our case study with respect to our three research questions.
for each research question we present our empirical observations followed by a general conclusion.
rq1 how do code authoring and reviewing contributions differ?
approach .t o address our rq1 we examine the contributions of developers in each release of the studied systems.
we analyze descriptive statistics of the number of developers who contribute by authoring or reviewing code changes to modules.
since the number of involved developers can vary among modules we analyze the proportion of developers in a module instead of the actual number of developers.
results .
observation of developers w ho contribute to a module did not previously author any code changes yet they had previously reviewed of the code changes in that module.we find that there are on average qt and openstack developers who contribute to a module.
figure shows that the developers who previously only reviewed code changes are the largest set of developers whocontribute to a module.
qt and openstack of developers are review only contributors.
on average these review only contributors have reviewed qt and openstack of the code changes made to a module.
this suggests that many developers contribute by only reviewing code changes to a module yet their expertise is not captured by traditional code ownership heuristics.
observation of the developers who only review code changes made to a module are documented core developers.
qt and openstack of the review only contributors to modules are documented core developers.3on the other hand 3based on the list in projectresources and qt and openstack of developers who have authored a code change to a module are documented as core developers.
moreover we observe that core developers tend to often contribute to a module as reviewers rather than authors.
indeed qt and openstack of modules do not have any code changes authored by core developers.
on the other hand qt and openstack of modules that do not have any code changes reviewed by core developers.
the developers who only contribute to a module by reviewing code changes account for the largest set of contributors to that module.
moreover of these review only developers are documented core developers of the studied systems suggesting that code ownership heuristics that only consider authorship activity are missing the activity of these major contributors.
rq2 should code review activity be used to r efine traditional code ownership heuristics?
approach .t o address rq2 we first examine the tco values of each developer in each module against their rso values.
next we analyze the relationship between ownership and defect proneness.
to do so for each module we compute the proportion of developers in each expertise category of the review aware ownership heuristic see table i.e.
minor author minor reviewer minor author major reviewer major author minor reviewer and major author major reviewer.
then we compare the proportion of developers in each of the expertise categories of defective and clean modules using beanplots .
beanplots are boxplots in which the vertical curves summarize the distributions of different datasets.
defective modules are those that have at least one post release defect while clean modules are those that are free from post release defects.
we use one tailed mann whitney u tests .
to detect whether there is a statistically significant difference among the defective and clean modules in terms of the proportion of developers in the different expertise categories.
we use mann whitney u tests instead of t tests because we observe that the distributions of the proportions of developers do not follow a normal distribution shapiro wilk testp values are less than .
1016for all distributions .
we also measure the effect size i.e.
the magnitude of the difference using cliff s .
cliff s is considered as trivial for .
small for .
.
medium for .
.
and large for .
.
results .
observation of minor aut hors are major reviewers.
when we assume that reviewers contribute equally i.e.
using rso even qt and openstack of minor authors fall in the minorauthor majorreviewercategory.
similarly whenwe assume that reviewers who post more comments make more of a contribution i.e.
using rso proportional qt and openstack of minor authors fall in the minor author major reviewer category.
this indicates that many minor authors make large review contributions.
observation clean modules tend to have more developers in the minor author major reviewer category than defective modules do.
figure a shows that when we use rso even the proportion of developers in the minor author major reviewer category of clean modules is larger than that of defective modules.
table shows 100proportion of developers qt .0qt .1openstack f olsomopenstack grizzlyopenstack havanaopenstack icehouse a minor author major reviewer category 100proportion of developers qt .0qt .1openstack f olsomopenstack grizzlyopenstack havanaopenstack icehouse b minor author minor reviewer category f igure the distribution of developers of defective blue and clean gray modules when using rso even.
the horizontal lines indicates the median of distributions.
table results of one tailed mann whitney u tests for the developers in defective and clean models.
rsoe ven rsop roportional releaseminor author m inor reviewerminor author m ajor reviewermajor author m inor reviewermajor author m ajor reviewerminor author m inor reviewerminor author m ajor reviewermajor author m inor reviewermajor author m ajor reviewer .
d c m d c l d c s d c m d c l d c s .
d c l d c l d c m d c m d c l d c l d c s d c m folsom d c l d c l d c s d c m d c l d c l d c l grizzly d c l d c l d c m d c l d c l d c n d c m havana d c l d c l d c m d c l d c l d c n d c l icehouse d c l d c m d c m d c l d c l d c s d c l statistical significance p .
p .
p .
p .
effect size l cliff s .
m .
.
s .
.
n .
that when using either rso evenor rso proportional the differences are statistically significant with medium or large effect sizes.
our results indicate that post release defects occur less frequently in the modules with a large proportion of developers in the minor author major reviewer category than those with a smaller proportion of developers in minor author major reviewer category.
observation conversely defective modules tend to have more developers in the minor author minor reviewer category than clean modules do.
figure b shows that when we use rso even the proportion of developers in the minor author minor reviewer category of defective modules is larger than that of clean modules.
table shows that the differences are statistically significant with medium or large effect sizes when using either rsoevenor rso proportional .
our results indicate that postrelease defects occur more frequently in the modules with a large proportion of developers in the minor author minor reviewer category than those with a smaller proportion of developers in minor author minor reviewer category.
we observe similar differences among the defective and clean modules for the major author minor reviewer and the major author major reviewer categories.
when we use rsoeven table shows that the proportion of developers in the major author minor reviewer category of defective modules is significantly larger than that of clean modules with small or medium effect sizes for the qt datasets.
on the other hand the proportion of developers in the major author majorreviewercategoryofdefectivemodulesissignificantly smaller than that of clean modules with medium effect sizes for the qt .
and all openstack datasets.
we obtain similar results when using rso proportional .
many minor authors are major reviewers who actually make large contributions to the evolution of modules by reviewing code changes.
code review activity can be used to refine traditional code ownership heuristics to more accurately identify the defect prone modules.
rq3 is there a relationship between reviewspecific and review aware code ownership heuristics and defect proneness?
althoughinrq2wefindthatthereisarelationshipbetween the expertise categories of review aware heuristics and the tendency of having post release defects in modules of the studied datasets their effects could be correlated with other metrics that are known to share a relationship with defect proneness e.g.
module size .
hence we examine the impact that review specific and review aware code ownership heuristics can have on defect proneness using defect models that control for several confounding factors.
approach .s imilar to bird et al.and other work our main goal of building defect models is not to predict defect prone modules but to understand the relationship between the explanatory variables and defect proneness.
to build defect models we use logistic regression models to fit our studied datasets.
similar to our prior work we adopt a nonlinear regression modeling approach which enhances the fit of the data to be more accurate and robust while carefully considering the potential for overfitting .
our models operate at the module level where the response variable is assigned a value of true if a module has at least one post release defect and false otherwise.
the explanatory variables are outlined in table .
similar to prior work we estimate the traditional and reviewspecific code ownership for a module by using the largest tco and rso values of the developers who contributed to that module.
we also estimate the review aware ownership for a module by computing the proportion of developers in each expertise category cf.rq2 .
furthermore in addition to the product and process metrics i.e.
size churn and entropy we control for the number of contributors authors and reviewers in our models since these metrics may have an impact on defect proneness.
figure provides an overview of the model construction and analysis approaches which we describe below.
1044table a taxonomy of the considered control top a nd code ownership metrics bottom .
metrics description control metrics size number of lines of code.
c hurn sum of added and removed lines of code.
e ntropy distribution of changes among files.
contributor the number of developers who contribute by a uthoring or reviewing code changes to the module.
author the number of developers who have authored c ode changes to the module.
reviewer the number of developers who have reviewed c ode changes to the module.
code ownership metrics top tco the traditional code ownership value of the d eveloperwhoauthoredthemostcodechanges to the module.
top rso the review specific ownership value of the dev eloper who reviewed the most code changes to the module.
review aware ownership metrics proportion of minor author major revieweraproportionofdevelopersintheminorauthor major reviewer category.
proportion of major author major revieweraproportionofdevelopersinthemajorauthor major reviewer category.
proportion of minor author minor revieweraproportionofdevelopersintheminorauthor minor reviewer category.
proportion of major author minor revieweraproportionofdevelopersinthemajorauthor minor reviewer category.
minimize collinearity we remove highly correlated exp lanatory variables before constructing our models to reduce the risk that those correlated variables interfere with ourinterpretationofthemodels.
wemeasurethecorrelation between explanatory variables using spearman rank correlation tests which are resilient to data that is not normally distributed.
we then use a variable clustering analysis approach to construct a hierarchical overview of the intervariable correlation and select one explanatory variable from each cluster of highly correlated variables i.e.
.
.
we also check for redundant variables i.e.
variables that do not offer a unique signal with respect to the other variables .
we use the redunfunction in the rmsr package todetectredundantvariables.
however we findthatnoneof the explanatory variables that survive our correlation analysis are redundant.
fit logistic regression models in fitting our models we c arefully relax the linearity of the modeled relationship betweenexplanatoryandresponsevariables whilebeingmindful of the risk of overfitting.
to do so we only allocate additional degrees of freedom i.e.
the number of regression parameters to the explanatory variables that have more potential for sharing a nonlinear relationship with the response variable.
we measure the potential for nonlinearity in the relationship between explanatory and response variables using a calculation of the spearman multiple 2. we then allocate five three and one degree of freedom to the explanatory variables that have strong 2 .
moderate .
2 .
and weak 2 .
potential for nonlinearity relationship respectively.
assess models and reliability afterfittingourdefectmode ls we measure how well a model can discriminate between the potential response using the area under the receiver operating characteristic curve auc .
furthermore we evaluate the reliability of our models since auc can be too optimistic if the model is overfit to the dataset.
similar to our prior work we estimate the optimism of auc usingmodel construction model analysis response variable explanatory variables module data minimize collinearity assess model and reliability analyze explanatory variables fit logistic regression model figure an overview of defect model construction a nd analysis approaches.
a bootstrap derived approach .
small optimism values indicate that the model does not suffer from overfitting.
analyze explanatory variables wefirstmeasurethepower o f the explanatory variables that contribute to the fit of our models using wald statistics.
we use the anovafunction in thermsr package to estimate the explanatory power wald 2 and the statistical significance p value of each explanatory variable in our models.
the larger the wald 2 value the larger the explanatory power of that variable.
we then examine the explanatory variables in relation to the predicted likelihood of module defect proneness.
we use thepredict function in the rmsr package to plot changesinthe estimatedlikelihoodofdefect pronenesswhile varying one explanatory variable under test and holding the other explanatory variables at their median values.
results .du ring correlation analysis we find that the top tco thenumberofcontributors authors andreviewersare often highly correlated.
we select the number of contributors as the representative for these variables since the number of contributors is simpler to calculate and can capture the number of both authors and reviewers.
after removing the highly correlated variables we repeat the variables clustering analysis and find that the number of contributors the proportions of minor author major reviewer and minor author minor reviewer are highly correlated.
we opt to remove the number of contributors since the proportion of minor author major reviewer and minor author minor reviewer metrics are already controlled by the number of contributors.
we also remove the proportion of minor author major reviewer since we want to revisit the relationship between the proportion of minor contributors i.e.
minor author minor reviewer and defect proneness.
for the sake of completeness we analyze models that use the proportion of minor author major reviewer instead of the proportion of minor author minor reviewer and found that the proportion of minor author major reviewer had no discernible impact on model performance.
table5showsthatwhenusingrso eventoestimatereviewspecificandreview awareownership ourdefectmodelsachieve an auc of between .
qt .
and openstack icehouse and .
openstack havana .
the auc optimism is also relatively small ranging from .
openstack havana and icehouse to .
openstack folsom .
we obtain similar model statistics when using rso proportional .
the auc values of the rso proportional models range from .
qt .
to .
qt .
and openstack havana with an auc optimism of .
.
.
since rso evenmodels use a simpler approximation of review specific and review aware ownership we report our observations of the explanatory variables in the rso evenmodels below.
observation the proportion of developers in the minor author minor reviewer category shares a strong relationship with post release defect prone1045table statistics of defect models where review specific and re view aware ownership are estimated using rsoeven.
the explanatory power 2 of each variable is shown in a proportion to wald 2of the model.
qt .
qt .
openstack folsom openstack grizzly openstack havana openstack icehouse auc .
.
.
.
.
.
a uc optimism .
.
.
.
.
.
w ald 248 overall nonlinear overall nonlinear overall nonlinear overall nonlinear overall nonlinear overall nonlinear sized.f.
213 churnd.f.
24 entropyd.f.
21 top tcod.f.
25 top rso e vend.f.
20 major author major reviewerd.f.
211 minor author minor reviewerd.f.
246 major author minor reviewerd.f.
26 discarded during variable clustering analysis .
the number of contributors authors reviewers and the proportion of minor author major reviewer are also discard during variable clustering analysis.
nonlinear degrees of freedom not allocated.
statistical significance of explanatory power according to wald 2likelihood ratio test p .
p .
p .
p .
ness.table shows that the proportion of minor author minor reviewer contributes a significant amount of explanatory power to the fit of our models shown in the overall wald 2column .
the openstack folsom model is the only one where the proportion of minor author minor reviewer did not contribute a significant amount of explanatory power.
furthermore we observe that the proportion of minor author minor reviewer accounts for most of the explanatory power in the qt .
qt .
and openstack havana models.
this result indicates that the rate of contributors who lack both authorship and reviewing expertise in a module shares a strong relationship between with the post release quality.
table also shows that the additional degrees of freedom that we allocate to the proportion of minor author minor reviewer did not contribute a significant amount of explanatory power to the fit of our models shown in the nonlinear wald 2column .
this result indicates that there was no significant benefit in spending additional degrees of freedom on this metric the relationship is primarily log linear.
observation modules with a higher rate of developers in the minor author minor reviewer category are more likely to be defect prone.
figure shows that there is an increasing trend in the probability that a typical module will have post release defects as the proportion of minor author minor reviewer increases.
the narrow breadth of the confidence interval gray area indicates that there is sufficient data to support the curve.
moreover figure shows that the probability of having post release defects rapidly increases when the proportion of minor author minor reviewer increases beyond .
in the qt .
qt .
openstack grizzly and havana models.
we also analyze the defect models that use the proportion of minor author major reviewer instead of the proportion of minor author minor reviewer.
we find that the proportion of minor author major reviewer contributes a significant amount of explanatory power to the qt .
qt .
openstack havana and icehouse models.
furthermore we observe that there is an inverse relationship between the proportion of minor author major reviewer and the prob ability that a typical module will have post release defects in the qt .
qt .
openstack havana and icehouse models.
this result indicates that the larger the proportion of developers in the minor author major reviewer category the lower the likelihood of a module having post release defects.
even when we control for several confounding factors the proportion of developers in the minor author minor reviewer category shares a strong relationship with defectproneness.
indeed modules with a larger proportion of developers without authorship or reviewing expertise are more likely to be defect prone.
.
practical suggestions in this section we discuss the broader implications of our observations by offering the following suggestions code review activity should be included in future approximations of code ownership.
observations and show that apart from the developers who author code changes to a module there are major contributors who only contribute to that module by reviewing code changes.
furthermore observation shows that many developers who were identified as minor contributors by traditional code ownership heuristics are actually major contributors when their code review contributions are taken into consideration.
teams should apply additional scrutiny to module contributions from developers who have neither authored nor reviewed many code changes to that module in the past.
observation shows that modules with post release defects tend to have a larger proportion of minor authors who are also minor reviewers than modules without post release defects do.
furthermore observations and show that the proportion of developers in the minor author minor reviewer category shares a strong increasing relationship with the likelihood of having post release defects in a module even when we control for several confounding factors.
1046qt .
qt .
openstack grizzly openstack havana openstack icehouse .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
proportion of minor author minor reviewerprobability figure the estimated probability in a typical module for th e proportion of developers in the minor author minor reviewer category ranging.
the gray area shows the confidence interval.
a module with many developers who have not authored many code changes should not be considered risky if those developers have reviewed many of the code changes to that module.
while observations and confirm the findings of prior work i.e.
the number of minor contributors shares a relationship with defect proneness we find that the proportion of developers in another category of minor authors i.e.
minor author major reviewer shares an inverse relationship with the defectproneness see rq3 .
indeed observation shows that modules without post release defects tend to have a larger proportion of developers in minor author major reviewer than modules with post release defects do.
.
threats to v alidity we now discuss the threats to the validity of our study.
external validity.
we focus our study on two open source systems due to the low number of systems that satisfied our eligibility criteria for analysis see section .
.
thus our results may not generalize to all software systems.
however the goal of this paper is not to build a theory that applies to all systems but rather to show that code review activity can have an impact on code ownership approximations.
our results suggest that code review activity should be considered in future studies of code ownership.
nonetheless additional replication studies are needed to generalize our results.
construct validity.
our analysis is focused on the code review activity that is recorded in the code review tools of the studied systems i.e.
gerrit.
however there are likely cases where developers perform code reviews through other communication media such as through in person discussions a group irc or a mailing list .
unfortunately there are no explicit links of code changes to those communication threads and recovering these links is a nontrivial research problem .
nevertheless we perform our study on modules where every code change could be linked to the reviews in gerrit which should capture the majority of the review discussion in the studied systems.
sinceweidentifydefect fixingchangesusingkeyword based approach there are likely cases that our defect data is inaccurate .
to evaluate this we measure the accuracy of our approach by manually examining samples of defectfixing changes.
for each studied system we randomly select code changes that are flagged as bug fixing changes by our keyword based approach.
we find that of the sampled code changes are correctly identified.
internal validity.
we identify developers who post atleastonereviewcommentasreviewersofamodule although some of the identified reviewers may only leave superficial or unrelated review comments .
we attempt to mitigate this risk with our rso proportional heuristic which allocates less ownership value for reviewers who provide less feedback.
we find that the results of our study using rso proportional heuristicaresimilartotheresultsusingthesimpler rso even heuristic which allocates an even share of the ownership value to every reviewer of a code change.
this suggests that the noise of reviewer contributions is not heavily biasing our results.
nonetheless we plan to explore more advanced review contribution heuristics in future work.
in this paper we opt to measure rso and tco values separately.
even when they are combined in our the reviewaware ownership heuristics the values are plotted on orthogonal axes rather than summed.
summation of rso and tco values may have a different association with software quality.
however since reviewing and authoring are different activities a naive summation may not be desired.
additional work is needed to investigate appropriate means of computing a generic expertise metric.
there may still be cases where developers who make many contributions by either authoring or reviewing code changes are not the actual owner of the modules.
unfortunately ground truth data is not available for us to validate against.
nevertheless we use a list of core developers that is available in the documentation of the studied systems to validate our heuristics.
our results also show that many of these core developers can only be module owners if their code review contributions are considered in code ownership heuristics.
.
related work in this section we discuss the related work with respect to code review and code ownership dimensions.
code review.
defect prevention is not the sole concern of modern code reviews .
beller et al.find that review comments are often focused on improving maintainability rather than fixing defects .
tsay et al.report that reviewers are concerned with the appropriateness of a code solution and often provide alternative solutions during code reviews .
bacchelli and bird find that code reviews at microsoft provide additional benefits to development teams such as knowledge transfer among team members .
our study shows that the review contributions of developers can be used to estimate their module specific expertise.
other recent work has analyzed the usefulness of code reviews in the mcr process.
rigby et al.investigate several factors that have an impact on the effectiveness of code 1047reviews .
bosu e t al.uncover characteristics of useful review comments and investigate the factors that influence the comment usefulness density in microsoft projects .
baysalet al.also study the influence of many technical and non technical factors on the timeliness of code reviews in the webkit and google blink open source projects .
inspired by these studies we propose rso proportional in order to take the number of review comments into an account when weighting review contributions.
several studies propose an approach to optimize the code review processes.
shull et al.report that perspective based reviewscatch35 moredefectsthannon directedreviews .
rigby and bird find that two reviewers find an optimal number of defects .
recent work also proposes approaches to findreviewerswhoshouldbeincludedinareview .
in this paper our results suggest that reducing the proportion of developers who neither author nor review many code changes in a module tends to decrease the likelihood of having defects in the future.
moreover many recent studies have investigated the effect that mcr has on software quality.
meneely et al.analyzed the association between review activities and the risk of having security related problems .
our prior work investigates the relationship between developer involvement in the code review process and the incidence of post release defects in several open source projects .
morales et al.also examine the impact that review investment has on software design quality .
moreover our recent work investigates code review activity in the files that have been defective in the past and files that will be defective in the future .
in thispaper ourresultsshowthatthereview awareownership heuristics shares a strong relationship with the likelihood of having post release defects in a module.
this related work strengthens our assertion that reviewers make a non trivial contribution to the evolution of a software system.
in this paper we argue that this non trivial contribution of reviewers should be taken into consideration when approximating code ownership.
our results indicate that reviewing activity can indeed be used to refine existing code ownership heuristics narrowing their focus to the developers who truly lack module specific expertise.
code ownership.
prior work has shown that the code authorshipcanbeusedtoestimatedeveloperexpertise.
mockus and herbsleb use experience atoms ea i.e.
the developmentandmaintenancetasksthatadeveloperhascompleted as a measure of developer expertise .
schuler and zimmermann create an expertise profile from a set of methods that developers have implemented or referenced .
we find that code review activities also should be considered when estimating developer expertise.
several studies also use code authorship to identify the defect prone modules.
pinzger et al.show that contribution networks that are built from author contributions can accurately identify defect prone modules in the microsoft vista system .
meneely et al.examine the association between the number of commits that developers have made to a module and the incidence of security related problems in the red hat enterprise linux kernel .
matsumoto et al.also find that developer metrics e.g.
the code churn or the number of commits that are generated by each developer are good indicators of defect prone source code files in the eclipse platform project .
furthermore recent work studies the relationship between software quality andcode ownership approximations that are derived from code authorship data.
nagappan et al.study the influence that organizational structure has on software quality .
bird et al.find that code ownership of developers shares a strong relationship with defect proneness .
rahman and devanbu also report that an area of source code that has been associated with defects in the past tends to be written by developers with low code ownership .
we find that refining code authorship by using code review activities provides a more comprehensive picture of the association between developer contributions and software quality.
on the other hand recent work by fritz et al.shows that authorship data was not strongly associated with knowledge aboutamodule .
indeed severalstudiescomplementauthorship data with the data recorded during developer ide activities to compute developer expertise .
similar to these studies our study aims to incorporate another overlooked source of expertise data we adapt traditional code ownership heuristics to include code review activity.
.
conclusions code ownership heuristics have been used in many studies for identifying the developers who are responsible for maintaining modules.
these heuristics are traditionally computed using code authorship contributions.
however developers can also make important contributions to modules by critiquing code changes during the code review process.
in this paper we extend the traditional code ownership heuristics to be review specific i.e.
a code ownership approximation that is derived solely using review contributions and review aware i.e.
a code ownership approximation that is derived using both authorship and review contributions.
through a case study of six releases of the large qt and openstack open source systems we make the following observations of developers only contribute to a module by reviewing code changes.
of these reviewonly contributors are documented core developers of the studied systems observations and .
of developers who are flagged as minor contributors by traditional code ownership heuristics are actually major contributors when their code review activity is considered observation .
when traditional code ownership heuristics are refined by code review activity we find that modules without post release defects tend to have a higher rate of developers in the minor author major reviewer category but a lower rate of developers in the minor author minor reviewer category than modules with postrelease defects do observations and .
evenwhenwecontrolforseveralfactorsthatareknown to have an impact on software quality the proportion of developers in the minor author minor reviewer category shares a strong increasing relationship with the likelihood of having post release defects in a module observations and .
our results suggest that future approximations of code ownership should take code review activity into consideration in order to more accurately model the contributions that developers have made to evolve software systems and to identify defect prone modules.
.