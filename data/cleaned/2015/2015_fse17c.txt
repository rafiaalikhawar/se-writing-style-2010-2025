acm copyright notice acm permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
published in proceedings of the joint meeting of the european software engineering conference and the acm sigsoft symposium on the foundations of software engineering ese fse september continuous variable specific resolutions of feature interactions cite as bibtex .
.
m. hadi zibaeenejad chi zhang and joanne m. atlee.
.
continuous variable specific resolutions of feature interactions.
in proceedings of the 11th joint meeting on foundations of software engineering esec fse .
acm new york ny usa .
inproceedings zibaeenejad cvr .
author zibaeenejad m. hadi and zhang chi and atlee joanne m. title continuous variable specific resolutions of feature interactions booktitle proceedings of the 11th joint meeting on foundations of software engineering series esec fse year pages 58continuous variable specific resolutions of feature interactions m. h. zibaeenejad university of waterloo waterloo on canada mhzibaee uwaterloo.cachi zhang university of waterloo waterloo on canada c335zhan uwaterloo.cajoanne m. atlee university of waterloo waterloo on canada jmatlee uwaterloo.ca abstract systems that are assembled from independently developed features suffer from feature interactions in which features affect one another s behaviour in surprising ways.
the feature interaction problem results from trying to implement an appropriate resolution for each interaction within each possible context because the number of possible contexts to consider increases exponentially with the number of features in the system.
resolution strategies aim to combat the feature interaction problem by offering default strategies that resolve entire classes of interactions thereby reducing the work needed to resolve lots of interactions.
however most such approaches employ coarse grained resolution strategies e.g.
feature priority or a centralized arbitrator.
our work focuses on employing variable specific defaultresolution strategies that aim to resolve at runtime features conflicting actions on system s outputs.
in this paper we extend prior work to enable co resolution of interactions on coupled output variables and to promote smooth continuous resolutions over execution sequences.
we implemented our approach within the prescan simulator and performed a case study involving automotive features this entailed our devising and implementing three resolution strategies for three output variables.
the results of the case study show that the approach produces smooth and continuous resolutions of interactions throughout interesting scenarios.
keywords feature interactions software integration internet of things acm reference format m. h. zibaeenejad chi zhang and joanne m. atlee.
.
continuous variable specific resolutions of feature interactions.
in proceedings of 11th joint meeting of the european software engineering conference and the acm sigsoft symposium on the foundations of software engineering paderborn germany september esec fse ?
?pages.
.
nnnnnnn.nnnnnnn permission to make digital or hard copies of part or all of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for third party components of this work must be honored.
for all other uses contact the owner author s .
esec fse paderborn germany copyright held by the owner author s .
x xxxx xxxxx yy mm.
.
.
.
.
nnnnnnn.nnnnnnn1 introduction infeature oriented software development a system s functionality is decomposed into features where each feature is an identifiable unit of functionality that may be optional or dynamically selectable e.g.
cruise control .
featureorientation helps to address software complexity through decomposition into feature modules that can be considered developed and evolved independently.
software developers use features as the basis for incremental software development where each software release is described in terms of new or updated features as well as bug fixes .
feature modularity enables rapid development and integration of new features and facilitates development of new systems through assembly of existing modules possibly from multiple sources.
although features are often treated as separate concerns a feature may behave differently when integrated with other features in the system.
a feature interaction occurs when one feature affects the behaviour of another.
for example the software controllers for the braking features on the toyota prius interacted badly reducing drivers overall ability to brake and leading to multiple crashes and injuries .
there has been considerable research into the automatic detection of feature interactions but the real complexity lies in their resolution.
most interactions although not all be detected through pair wise analysis of features which is quadratic in the number of features.
however each interaction needs to be analyzed and possibly resolved and the ideal resolution depends on the presence of other features.
for example the desired speed of a car depends on the driver s actions e.g.
depression of the accelerator pedal as well as which features related to speed have been activated e.g.
cruise control speed limit adherence collision avoidance stability control .
thus each new feature comprises its core functionality plus some possibly exponential number of exceptions each implementing desired behaviour in the context of a particular combination of other activated features.
as the number of features grows a software team finds that the development of a new feature is eventually dominated by thefeature interaction problem the need to analyze feature combinations resolve interactions and verify resolutions ?
.
the most effective solutions to the feature interaction problem are feature oriented architectures that coordinate the communications and interactions among feature modules .
the architectures enable rapid development integration and deployment of new features because they preserve the modularity of distinct features but they do so at the expense of optimal resolutions of interactions.
interactions are resolved at runtime by the architecture s1 58esec fse september paderborn germany m. h. zibaeenejad chi zhang and joanne m. atlee figure architectural model for variable specific resolutions coordination strategies which are usually based on feature priority or precedence runtime arbitration or negotiation.
such approaches for loose integration and coordination of features are becoming increasingly important as they enable developers and consumers!
to interconnect components and devices without considering their interactions.
however most of these resolution strategies are coarse grained in that they are based on the priority or precedence of the features themselves rather than the features interacting actions.
as such they provide suboptimal win lose resolutions in which some features actions are sacrificed in favor of other features actions and they often require an upfront total or partial ordering on features .
bocovich and atlee have proposed a feature oriented architecture with variable specific resolutions in which the developer can devise for each system output variable an appropriate default strategy for resolving conflicting actions on that variable.
as simple examples a resolution strategy for one output variable might be the minimum of the features actions whereas the strategy for another output variable might be the average of the features actions.
their approach has several advantages including that resolution strategies are agnostic to the particular features or even the number of features involved in an interaction are fine grained c.f.
feature priority and are specific to the variables being assigned c.f.
a uniform strategy like feature priority .
however their approach failed to consider the quality of default resolutions over a sequence of features actions or how resolution strategies might interact if their respective output variables are coupled.
our work extends their architecture in a number of ways feature logic is separated from control logic to distinguish between interactions that are amenable to sub optimal default resolutions strategies versus computations that need to be optimal.
system features whose realizations are independent of specific input and output devices are treated separately from actuator features which apply to particular actuators.
non cyclic information flows between resolution modules enable co resolutions of interactions involving tightly coupled variables.
our feature action language is richer and inputs to the resolution modules are richer to promote smooth resolutions over consecutive execution steps.
figure a model of a cruise control feature that combines its feature logic with its control logic.
there is advice on how to accommodate task features which have long term actions.
we have evaluated our work within the prescan simulator for advanced driver assistance systems adas .
we have implemented fourteen automotive features have devised and implemented three default resolution strategies for the features outputs and have plugged these modules into our architecture.
the results of the case study show that the approach produces smooth and continuous resolutions of interactions throughout interesting scenarios.
the rest of the paper is organized as follows.
we first give an overview of the original work that promotes variablespecific resolutions vsr to feature interactions.
in section??
we describe extensions to this architecture to support continuous variable specific resolution cvsr of interactions over an execution sequence and co resolution of interactions on tightly coupled variables.
in section ?
?
we present the implementation of our architecture our variable specific resolution strategies and the results of the case study.
section ?
?
summarizes related work and section ?
?concludes the paper.
variable specific resolution vsr the architectural model of variable specific resolution vsr is depicted in figure ?
?.
features are implemented as separate modules that execute in parallel each reacting to current sensor values and issuing actions to the system s output variables.
a resolution module is defined for each of the system s output variables e.g.
a separate resolution module for the brake pressure on each wheel of a vehicle .
the role of the resolution modules is to resolve features conflicting actions on the modules corresponding output variables.
a system s execution is an iteration of periodic functions.
in each iteration the feature modules react to system inputs from sensors by issuing actions on output variables.
for example a cruise control feature in a car figure ?
?
will continuously monitor the car s speed and compare the current speed to the driver s desired cruising speed if corrective action is required the feature sends actions to the car s engine throttle system or to the braking system.
normally the features actions would flow directly to the output variables instead they flow to the variables corresponding resolution modules.
every input to the resolution module includes meta data regarding the action category i.e.
driver action emergency action safety action non safety action.
each1 58continuous variable specific resolutions of feature interactions esec fse september paderborn germany resolution module inputs an arbitrary set of actions on some output variable performs a pre programmed variable specific resolution strategy on those actions and issues a resolved action or series of actions to its corresponding output variable.
in vsr the developer is responsible for devising a resolution strategy for each output variable or type of output variable .
a primary benefit of this approach is that the number of resolution modules to be developed is typically much smaller than the number of possible optimal resolutions.1a second benefit is that resolution strategies do not depend on which features are active in the system or on the specific interactions to be resolved thus new features can introduce new actions on existing output variables without requiring any modifications to the resolution modules although new features that introduce newoutput variables would require the development of new variable specific resolution modules .
as such the vsr approach addresses the feature interaction problem by drastically reducing the amount of work to be performed by the developer to resolve feature interactions.
however the vsr architecture is a partial solution that only considers how singleton feature interactions are resolved.
it raises questions about the effectiveness of default resolution strategies when applied continuously over a sequence of features actions.
also vsr does not accommodate the default resolution of interactions that involve coupled variables.
continuous vsr in this section we introduce continuous variable specific resolution cvsr which consists of a number of extensions to the original vsr architecture that are devised to resolve interactions effectively and continuously over a sequence of execution steps.
we illustrate our work with a running example involving five advanced driver assistance systems adas and features cruise control cc keeps vehicle speed at driver set value speed limit control slc keeps vehicle speed below speed limit headway control hc keeps a safe distance to the vehicle ahead anti lock braking system abs keeps the wheels from locking traction control system tcs keeps the wheels from spinning many of these features manipulate the same variables increasing the likelihood of undesired interactions among the features.
specifically all of these features have a direct or indirect impact on a vehicle s speed.
.
feature vs. control logic in previous works on resolving feature interactions at runtime cite features operate directly on output variables and actuators.
however in dynamic systems like vehicle control actions are highly optimized by nonlinear controllers that account for vehicle dynamics environmental conditions e.g.
gradients in the road fuel efficiency and other performance factors.
if multiple features were to attempt to control the same output variable or actuator e.g.
engine throttle at the same time with each feature issuing an optimized action 1in the worst case each feature interaction would require unique resolutions for every combination of active features.
figure an overview of the cvsr architecture featurelogic modules act on attribute variables variable specific resolution modules resolve conflicting actions on attributes and control logic realizes and optimizes resolved actions.
on that actuator it is unlikely that an engineer could devise an appropriate resolution strategy that resolves an interaction among the multiple optimized actions such that the resolution is itself optimal.
instead we advocate separating features intents from how those intents are realized through commands to actuators.
in particular we propose separation of feature logic from control logic where feature logic is responsible for computing a feature s desired effects on the system and control logic is responsible for realizing that effect and for optimizing its realization through commands on output devices and actuators.
to achieve this separation we introduce attribute variables which are abstract representations of system characteristics and outputs.
a feature s intent is expressed as actions on attribute variables thus actions are agnostic to the system s concrete actuators and resolution modules resolve conflicts on attribute variables thus their computations are also agnostic to the system s actuators .
the control logic transforms the actions on attribute variables into optimized control signals to actuators.
with the control logic separated out of features actions the task of devising a default resolution strategy for resolving interactions among conflicting feature actions becomes possible a resolution module is associated with each attribute variables rather than with each output variable to resolve conflicting actions on attribute variables and then control logic is used to realize and optimize the resolved actions on attribute variables.
as a concrete example consider automotive features cruise control headway control and speed limit control in figure ?
?
.
the feature logic for each of these features determines a desired value for the vehicle s speed an attribute variable .
a resolution module for the attribute variable speed takes as input the features actions on vehicle speed and computes a vehicle acceleration i.e.
the acceleration needed to achieve the resolved speed value .
depending on whether the resolved acceleration is positive or negative the action is forwarded to the control logic for the engine throttle system or braking system where each control logic module is optimized for its respective actuator.
by separating feature logic from control logic we are able to distinguish between features intents whose interactions are likely to be amenable to default resolution versus the1 58esec fse september paderborn germany m. h. zibaeenejad chi zhang and joanne m. atlee optimized realizations of feature actions which are nonlinear in nature and less likely to be amenable to default resolutions.
.
dependencies among attribute variables when there are dependencies between attribute variables their corresponding resolution modules cannot decide their values independently.
for example a vehicle s steering angle and its speed need to be considered together if the vehicle is to turn safely without skidding.
in the case where attribute variables are tightly coupled but are realized by different actuators the cvsr architecture allows for limited sharing of information among resolution modules so that a resolution strategy for one attribute variable may use the projected next value of a related attribute variable see figure ?
?
a .
for instance to accommodate the dependency between steering andspeed variables in our experiments the output of the steering angle resolution module flows to the speed resolution module to be used to calculate a safe turning speed.
information flows among the resolution modules must be acyclic to avoid a circular dependency.
if a dependency cannot be made acyclic then either the coupled attribute variables must be set by a single combined resolution module or one of the resolution modules must make do with stale values of the coupled attributes e.g.
from the previous execution step or from the sensors .
a different type of dependency exists between uncoupled attribute variables that are realized by the same actuator.
for example anti lock braking abs limits wheel slip and traction control tcs controls wheel spinning .
the two attribute variables are unrelated which means that there are no interactions to resolve with respect to actions on the attributes.
however actions on both attributes are realized at least in part by the brake actuator and the realizations can conflict with each other.
cvsr defers the resolution of such interactions to the actuator s control logic module see figure ?
?
b .
thus the resolution module for each coupled attribute variable sends its output to their common controllogic module and the control logic module is responsible for coordinating and optimizing their realizations.
in general dependencies among attribute variables impinge on our objective to modularize default strategies for resolving feature interactions.
the impact is minor when dealing with tightly coupled attribute variables one of the coupled variable s resolution modules remains agnostic of features and other resolutions modules whereas the resolution module for the second variable is designed to take into account the projected next value of the first variable.
however in the case of unrelated attribute variables that are realized by the same actuator there is no possibility for default resolution of their interactions.
the control logic module needs to know the context of the actions it is realizing in order to produce an optimized control signal for the actuator.
.
actuator features the decomposition of features into feature logic and control logic and the introduction of attribute variables allowsfeatures to be agnostic to the actual output devices used to realize their actions and allows resolution modules to resolve interactions on attribute variables without knowing how the resolved actions will be realized.
however some features are designed to enhance specific actuators obviously these features cannot be actuator agnostic.
in our running example anti lock braking abs is an actuator feature.
the intent of abs is to improve the braking actuator behaviour so that wheel slip is minimized by applying brake pressure intermittently.
on the other hand cruise control headway control and speed limit control are features that manipulate characteristics of the whole system i.e.
speed distance to the preceding vehicle without regard to how those characteristics are realized through actuators.
therefore we distinguish between two feature types actuator features features that enhance and extend the behaviour of an actuator.
system features actuator agnostic features.
cvsr is designed to ease the resolution of interactions among system features only.
because actuator features are designed to extend and improve the behaviours of actuators and because actuators and actuator features typically need to behave optimally it is unlikely that one can devise an acceptable feature agnostic default strategy for resolving interactions that involve actuator features.
thus we exclude them from the set of features that cvsr coordinates by default resolution strategies and instead cvsr delegates their coordination to the control logic modules.
we recognize that some system features e.g.
emergency features may also have behaviours that must be optimized.
in our running example traction control activates when a car is out of control due to wheel slippage its actions are realized through precise reduction of engine torque and application of specific brake forces to individual wheels.
in cvsr system features whose behaviours need to be optimized are treated as actuator features they are coordinated by controllogic modules which are responsible for producing optimal resolutions and control signals for the actuators.
thus in cvsr each execution step of the system consists of the following sub steps system features react to sensor inputs by acting on attribute variables their possibly conflicting interactions are resolved according default resolution strategies implemented in resolution modules one per attribute variable the resolved actions on attribute variables are realized by control logic modules as optimized control signals destined for the system s actuators actuator and emergency features enhance these control signals a second set of control logic modules resolve and optimize enhanced signals from multiple actuator features and the optimized control signals are sent to the actuators.
an example of the cvsr architecture as it applies to an extended version of our running example of automotive system and actuator features is given in figure ?
?.
58continuous variable specific resolutions of feature interactions esec fse september paderborn germany figure a partial model of the cvsr architecture instantiated with adas system and actuator features.
figure a coupled attributes realized by different actuators b uncoupled attributes realized by the same actuator .
feature action language in vsr the feature action language is limited to assigning new values to output variables.
each feature action is the target value of one variable and meta data that indicates whether the action is a driver action an emergency action a safety action or a non safety action.
this information is sufficient to resolve interactions effectively among a single set of feature actions but it results in turbulence and thrashing when the same resolutions are applied to multiple sets of feature actions over time.
to improve the quality of interaction resolutions over an execution sequence cvsr extends the feature action language to include not only target values of attribute variables but also target derivatives of attribute values and simple constraints on attribute values target attribute value the target value of an attribute variable is still the truest reflection of a feature s intent with respect to a particular system attribute.
target derivative of attribute for attribute variables that represent dynamic system attributes e.g.
speed resolution modules produce smoother more continuous behaviour if they resolve conflicts over target derivatives i.e.
target rates of change change rather than over target values.
attribute bounds in some cases a feature s intent is to enforce a constraint .
for example the intent of speed limit control slc is to keep a vehicle s speed at or below the current speed limit.
if feature actions were limited to variable assignments then a feature like slc must continuously monitor the system and take corrective action whenever its intended constraint is violated.
the effect on system behaviour is periodic violation and re establishment ofslc sspeed constraint.
to avoid such fluctuations in behaviour cvsr extends the feature action language to allow lower and upper bounds on attribute values.
the resolution module tries to produce resolved actions that satisfy given bounds to avoid future corrective actions from features.
figure ?
?shows a simulation of control cruise maintaining km hr and slc adhering to a km hr speed figure car speed when cruise control is set to km hr and speed limit control keeps the speed under km hr.
58esec fse september paderborn germany m. h. zibaeenejad chi zhang and joanne m. atlee limit .
resolutions fluctuate more when the features actions are target values of speed solid line compared to resolutions when slc s action is a bound on speed dashed line .
.
task features so far feature actions have been instantaneous in each execution step of the system features issue actions on attribute variables or control signals that are expected to be realized at the end of the execution step and then in the next execution step sensors report updated variable values and the features react by issuing new actions to be realized at the end of this next execution step and so on.
however some feature actions are not instantaneous.
a task feature is a feature that has at least one action that takes multiple execution steps to achieve and is non interruptible.
for example lane changing automatically move the vehicle to the centre of the next lane and automatic park assist automatically perform parallel parking are task features.
because tasks should be completed without interruption cvsr gives tasks priority over other feature actions.
this requires some negotiation between a task feature and the resolution modules of the attribute variables that its task affects.
specifically a task feature and the resolution modules need to agree on the initiation of a task a task starts by seeking permission from the resolution modules of all the attribute variables that the task might act on permission is granted when no other task is active and all warning signals are off.
while the task is active the affected resolution modules normally ignore actions from other features.
thus during a lane change the actions from lane keeping are ignored and while parallel parking the actions from lane keeping and headway control are ignored.
the task ends by notifying resolution modules of the completion of the task.
this protocol is discussed in more detail in section ?
?
where we present the resolution modules that we use in our studies.
a resolution module can abort a task in the event of a driver action or an emergency action from another feature e.g.
due to an impending collision .
in such an event the resolution module sends an abort message to the task feature and the task feature notifies the other resolution modules that the task has completed.
at present in cvsr a task feature does not attempt to recover from an aborted task instead the driver the emergency action and other features work to react to the emergency situation.
in the future we plan to experiment with other reactions of task features to emergency situations such forward commit or rollback.
case study to evaluate the quality of resolutions that result from using the cvsr approach we conducted a simulation of the cvsr architecture populated with system features from the automotive domain and three resolution modules relevant to the features.
we used the matlab toolbox prescan as our simulation tool.2prescan is a physics based simulation platform that is used in the automotive industry to develop driver assistance systems adas .
simulated vehicles can be equipped with a number of different sensors e.g.
camera lidar radar tis .
the simulation environment can be programmed with road segments curvatures speed limits gradient and actors cars bikes pedestrians .
actuators are pre built into the actors and cannot be directly manipulated.
this limitation means that we cannot simulate actuator features such as abs.
our case study features are taken from public documents that describe bosch driver assistance and active safety features.3of these four features anti lock braking traction control active steering electronic stability control are excluded from the case study because they are actuator features two additional features road sign assist driver drowsiness detection are excluded because the prescan simulator does not support the necessary sensors one feature automatic park assist is excluded because it is too complicated to implement and has no conflict interactions with the other features.
table ?
?lists the remaining features used in our case study and their descriptions.
the third column indicates what the feature s outputs are and the last column indicates what the associated resolution modules are.
.
evaluation criteria to evaluate the quality of resolutions to feature interactions we need to use multiple criteria.
first and foremost is the degree to which a resolution adheres to the original intents and behaviours of the interacting features.
however given that a resolution by its nature changes the actions being performed by one or more interacting feature we need secondary criteria for evaluating those resolutions that change features actions.
there are global properties of the system that represent minimal criteria for correct behaviour of the overall system the vehicle does not crash into other cars or obstacles.
the vehicle stays on the road and in the centre of the current lane except when changing lanes.
the vehicle issues warning signals when a global property or feature property is violated.
the vehicle s acceleration does not exceed .
ms2 except in due to emergency actions .
the vehicle s lateral acceleration does not exceed .176ms2except due to emergency actions .
lastly variable values should not be turbulent in order for sequences of resolutions to result in smooth and continuous system behaviour.
a variable s value is deemed turbulent if it fluctuates around a target value.
the higher the amplitude of the fluctuation the worse the turbulence.
.
programmed resolution modules the essence of the cvsr approach are the resolution modules that are programmed to employ default resolutions strategies 58continuous variable specific resolutions of feature interactions esec fse september paderborn germany feature name feature functionality feature logic outputresolution modules speed limit control slc automatically keeps the vehicle s speed at or below the road s speed limit.
speed bound speed cruise control cc maintains a desired speed of vehicle as set by the driver.
acceleration speed headway control hc keeps the vehicle within a safe distance behind the preceding vehicle.
speed bound accelerationspeed traffic jam assist tja the car assumes the same speed as the car in front of it following at a safe distance.
acceleration speed pedestrian protection braking ppb automatically initiates emergency braking in case of impending collision with a pedestrian.acceleration speed predictive braking system pbs when warned of a collision initiates partial braking to give the driver more time to react.acceleration speed emergency braking system ebs when warned of a collision prepares the braking system for full braking to be activated with any braking signal from the driver.acceleration speed lane keeping assist lka issues appropriate steering commands to keep the vehicle in the center of the lane.
steering angle steering lane departure warning ldw detects if the vehicle is about to move out of its lane and warn the driver.
warning warning collision warning cw detects and warns the driver if the preceding vehicle is too close.
warning warning pedestrian protection warning ppw detects an impending accident with pedestrians who are in the same lane as the vehicle and warn the driver of impending collision.warning warning lane change assist lca detects and warns the driver if a vehicle is in the driver s blind spot or is approaching rapidly from the rear.warning warning rear cross traffic alert rcta detects and warns the driver if a vehicle crosses to the left or right behind the driver.
warning warning parking aid pa detects the presence of an object when the vehicle is moving in reverse and warn the driver indicating the distance to the detected objects.warning warning lane changing control lcc automatically finishes a lane change action.
acceleration steering anglespeed steering warning table case study automotive system features.
that are most appropriate for resolving conflicts on their respective attribute variables.
for our case study we needed to devise three resolution modules for three attribute variables speed steering angle andwarnings .
the inputs to each resolution module are lists of actions and meta data from an arbitrary number of features targets array of features target values derivs array of features derivative targets bounds array of features bounds on attribute variable emerg designated emergency actions curv alue current attribute value as detected by sensors rm data from other resolution modules reqs array of task requests from task features rels array of task complete notifications the outputs of each resolution module is a resolved action on the attribute variable or signals to task features action resolved action on attribute variable perm array of responses to task initiation requests abort signal to abort current task in addition there is an internal variable current task which designates a task feature that is currently executing a task.
in each execution step the input arrays are uniformly indexed such that actions and meta data at index iare associated with the same feature.
an array element with index imay be empty if there is no corresponding input for the corresponding feature.
if the variable current task is set meaning that a task is currently executing we will use current task as an index into input arrays to designate the inputs associated with the executing task feature.
.
.
steering angle resolution module.
our default strategy for resolving conflicts over actions on the vehicle s steering angle is given in algorithm ?
?
basic resolution strategy emergency actions have the highest priority line .
for non emergency actions the average value of the target angle values is used to balance the requirements of all of the steering features line .
task features if no tasks are currently executing then at most one request to initiate a task will be accepted lines .
once a task is executing then its actions have highest priority line until the task completes lines or is interrupted by an emergency action lines .
constraints bounds the final output angle is no greater than the minimum input bound line except for emergency actions line .
.
.
speed resolution module.
our default strategy for resolving conflicts over actions on the vehicle s speed is given in algorithm ?
?.
basic resolution strategy in automobiles a smaller acceleration has a greater possibility of being safe than a larger acceleration.
thus the basic resolution strategy is to compute all of the target accelerations the acceleration needed to achieve the lowest bound on speed line the acceleration needed to achieve the minimum target value line the minimum value among all of the target accelerations and return the minimum of these line .
coupled variables to keep the vehicle s lateral acceleration within an acceptable range the speed resolution takes as input the projected value of the steering angle provided by the steering resolution module and calculates the upper bound on vehicle speed needed to maintain a lateral acceleration of less than .176m s2 line .
58esec fse september paderborn germany m. h. zibaeenejad chi zhang and joanne m. atlee algorithm .
steering resolution input targets bounds emerg reqs rels output angle perm abort 1var current task 2ifrels is non empty then current task none 4ifemerg is non empty then abort current task angle average emerg return 8switch current task do casenot none do angle targets for all r reqs perm casenone do ifreq is non empty then for some r reqs current task r perm for all i reqs r perm else angle average targets 19ifangle minimum bounds then angle minimum bounds constraints bounds the algorithm computes the smallest constraint among the given bounds and the computed speed bound needed to maintain a safe lateral acceleration line a negative target acceleration is computed to achieve this minimal bound if it is less than the vehicle s current speed .
task features the handling of tasks the same as in the steering resolution module and is omitted here for brevity.
algorithm .
speed resolution input targets derivs bounds emerg nextangle curspeed input reqs rels output accel perm abort 1ifemerg is non empty then accel min emerg 3else bound calc bound nextangle bound min min bounds bound ifbound curspeed then accel bound curspeed defaulttime accel2 min targets curspeed defaulttime ifaccel2 and derivs is empty then accel else accel min accel accel2 derivs .
.
warning resolution modules.
for the sake of this case study we assume that all the warnings related to the same attribute variable have the same display for instance a warning light or alarm for angle warnings and another onefor speed warnings .
our resolution module for one such attribute steering angle is given in algorithm ?
?
basic resolution strategy if any of the warning features for an attribute sends an alert the warning display for that attribute should be on line .
task features permission to execute a task is granted only if the related attribute is not issuing a warning lines .
otherwise the handing of task requests and completions is similar to the other resolution modules.
algorithm .
steering warning resolution input targets reqs rels output warning perm abort 1ifrels is non empty then current task none 3ifmax targets 0then for all r reqs perm 5else ifreqs is non empty then for some r reqs current task r perm for all i reqs r perm else warning max targets .
simulation results we first simulated features in isolation to ensure that our evaluations of the quality of cvsr resolutions are not negatively affected by errors in the feature implementations.
for each feature we systemically devised a test suite comprising three types of test scenarios normal scenarios that test a feature maintaining a behaviour e.g.
ccmaintaining the current speed transition scenarios that test a feature transitioning between two normal cases e.g.
cctargeting a cruising speed vs. maintaining that speed boundary scenarios that test a feature at the boundary of a transition e.g.
ccbehaviour when the vehicle speed is at or just below the cruising speed for each scenario we determined whether feature logic was implemented correctly by comparing the simulation results against feature intent as well as against our quantitative and qualitative criteria see section ?
?
.
to assess the benefit of using derivatives in resolutionmodule calculations we compared resolution strategies that make use of target derivatives against resolution strategies that do not use target derivatives.
we tested feature combinations on a test suite of transition scenarios and boundary scenarios and we compared the simulation results according to how well they adhere to the features intents and how well they meet our quantitative and qualitative requirements.
our results show that in transition scenarios the resolution strategies that make use of derivatives produce resolutions that more closely adhere to the features intents.
for example in scenarios involving headway control and a preceding car the resolution strategy that uses derivatives slows the1 58continuous variable specific resolutions of feature interactions esec fse september paderborn germany figure improvement of resolutions due to the inclusion of derivatives in the resolution strategy.
vehicle down more quickly and reestablishes a safe distance to the preceding car more quickly figure ?
?
.
to assess the benefit of using attribute bounds in resolutionmodule calculations we compared resolution strategies that make use of attribute bounds against resolution strategies that do not use attribute bounds.
we simulated feature combinations on a test suites transition scenarios and boundary scenarios our results show that in all scenarios the resolution strategy that does not make use of attribute bounds has greater turbulence in variables values with the amplitude of the turbulence greater in transition scenarios than in boundary scenarios .
whereas the resolution strategy that employs attribute bounds results in smoother resolutions of variable values over an execution recall figure ?
?
.
to assess the necessity of allowing information flows among resolution modules we simulated speed andsteering features in combination.
recall that in our implemented resolution modules the projected next steering angle value is shared with the speed resolution module.
we devised a test suite of normal scenarios and transition scenarios.
figure ?
?shows the simulation results for a transition scenario in which the vehicle s lateral acceleration is exceeded the vehicle enters a curve in the road at high speed and the steering resolution turns the vehicle approximately to keep the vehicle in the centre of the road.
the changes in steering angle can be sudden causing the lateral acceleration to exceed .176m s2 in response the speed resolution modules decelerates the vehicle to reduce lateral acceleration.
full simulation results can be found the second author s thesis citation omitted .
.
stress test we use the following scenario as a stress test of our case study to assess how a cvsr architecture performs in the presence of multiple feature interactions.
the scenario comprises three phases in phase one the vehicle has a speed of km hr cruise control cc is active and set to km hr and the road has a speed limit of 90km hr.
as shown in the simulation results in figure ?
?
the vehicle s speed transitions smoothly up to the speed limit and stays there.
figure constrain speed according to steering angle.
the adjustments in speed are highlighted by rectangles.
in phase two of figure ?
?
the vehicle is cruising at the speed limit when a car traveling at speed 80km hr cuts in front of the vehicle 11s into the simulation .
headway control hc reacts by issuing speed and acceleration targets to slow down the vehicle and the resolution of cc slc andhcactions is to brake sharply until a safe distance is achieved with the preceding car 12s .
at this point hc issues a speed bound to maintain a safe distance and the resolution is to increase vehicle speed to the features minimum speed bound i.e.
the speed of the preceding vehicle .
eventually 15s the driver invokes lane change control lcc to change lanes and pass the preceding car.
but there is another car in its blind spot which means there is a lane change assist lca warning that prevents the steering resolution module from allowing the lane change task.
in phase three of figure ?
?
the adjacent car leaves the vehicle s blind spot which inactivates the lca warning.
when the driver re invokes lane change control the resolution module permits the lane change task.
during lane changing priority is given to lcactions and actions of lca ldw andddd are ignored .
once the lane change is complete the resolution module resumes default resolutions and the vehicle s speed smoothly progresses back to the speed limit.
.
threat to validity the features were implemented by the authors although they are based on descriptions from online sources.
differences between our implementations and an industrial vehicle s features may affect feature interactions which in turn may threaten the validity of our results.
moreover because significant effort is needed to implement features and to generate and run simulations our case study comprises features and only one task feature and one pair of coupled variables.
cvsr s approach to handling task features and dependencies among variables would benefit from further evaluation.
cvsr has been designed to apply generally to featureoriented systems including dynamic systems but it has been evaluated only on features from the automotive domain.
we1 58esec fse september paderborn germany m. h. zibaeenejad chi zhang and joanne m. atlee figure simulation of a stress test scenario.
cannot guarantee that the current architecture can be applied to other domains without additional case studies.
related work in general there are three major approaches to addressing feature interactions formal methods software architectures and online resolution techniques.
formal methods are mainly used to detect interactions among features.
mathematical models of features e.g.
logic or automata and automated reasoning techniques e.g.
theorem proving or model checking is used to detect interactions among features ?
?
?
?
.
architectural approaches interconnect feature modules and address interactions through conventions and protocols that coordinate the features executions and sharing of resources.
ccoordination is typically based on feature priority ?
?
?
?
?
or precedence which orders the features reactions to system inputs.
such approaches need a predetermined total or partial ordering on features which can be time consuming to derive and there may not be a single ordering that is appropriate for resolving all feature conflicts.
moreover such approaches favour the actions of one feature the the expense of other features resulting in possibly sub optimal resolutions.
in contrast cvsr resolutions consider all enabled actions can be specialized to the variable being acted on and do not require features orderings or even prior knowledge of the features .
online resolution techniques detect and resolve conflicts among features at runtime.
resolution strategies include feature priority feature precedence negotiation arbitration rollback involving the user feature suspension and feature termination .
most approaches either require a centralized authority that is responsible for detecting and resolving conflicts e.g.
arbitation rollback have high runtime costs e.g.
negotiation involving the user or result in coarse grained resolutions.
some approaches offer finer grained resolutions.
laney et al.
propose resolutions in which priorities are considered at the granularity of individual feature requirements.
during feature composition the developer specifies which aspects of a feature s behaviour may be left unsatisfied in the event of a conflict.
interactions are resolved on a case by case basis.
thus the number of interactions to consider and resolve is potentially exponential in the number of features.
the work closest to ours is variable specific resolution vsr which proposes an architecture that uses resolution modules to resolve conflicting actions at runtime.
the resolution modules are variable specific allowing engineers to devise an appropriate resolution strategy for each controlled variable rather than needing to devise a monolithic arbitrator that fixes all possible interactions.
our work extends vsr by separating feature logic from control logic and distinguishing between system features and actuator features thereby clarifying which interactions are amenable to default resolutions and which need optimal resolutions extending the feature action language to include derivatives and bounds resulting in higher quality resolutions addressing interactions among variables that have interdependencies and accommodating task features.
automotive researchers have independently proposed using speed limits as constraints to optimize the behaviour of cruise control to achieve a smooth vehicle speed when transitioning between different speed limit zones.
our work generalizes this idea and uses bounds to prevent thrashing around a target attribute value.
58continuous variable specific resolutions of feature interactions esec fse september paderborn germany conclusion we presented continuous variable default resolution cvsr for resolving at runtime interactions among ad hoc combinations of features in a dynamic system.
our contributions over prior work include separation of feature logic from control logic the distinction between system vs. actuator features and how only system features are amenable to default resolutions extensions to the feature action language to include derivatives and constraints on attribute values to promote smooth sequences of resolutions over time and preliminary support for task features.
lastly we provide evidence in the form of a case study that cvsr can produce smooth continuous resolutions over executions paths.