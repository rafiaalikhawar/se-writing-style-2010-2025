practical guidelines for change recommendation using association rule mining leon moonen stefano di alesio david binkleyzthomas rolfsnes leon.moonen computer.org stefano simula.no binkley cs.loyola.edu thomgrol simula.no simula research laboratory oslo norway zloyola university maryland baltimore maryland usa abstract association rule mining is an unsupervised learning technique that infers relationships among items in a data set.
this technique has been successfully used to analyze a system s change history and uncover evolutionary coupling between system artifacts.
evolutionary coupling can in turn be used torecommend artifacts that are potentially a ected by a given set of changes to the system.
in general the quality of such recommendations is a ected by the values selected for various parameters of the mining algorithm characteristics of the set of changes used to derive a recommendation and characteristics of the system s change history for which recommendations are generated.
in this paper we empirically investigate the extent to which certain choices for these factors a ect change recommendation.
speci cally we conduct a series of systematic experiments on the change histories of two large industrial systems and eight large open source systems in which we control the size of the change set for which to derive a recommendation the measure used to assess the strength of the evolutionary coupling and the maximum size of historical changes taken into account when inferring these couplings.
we use the results from our study to derive a number of practical guidelines for applying association rule mining for change recommendation.
ccs concepts software and its engineering !software evolution software reverse engineering information systems !
recommender systems association rules keywords evolutionary coupling association rule mining parameter tuning change recommendations change impact analysis.
.
introduction a well know e ect of the continued evolution of a software system is the increasing disorder or entropy in the system as a result of repeated changes the number and complexity of dependencies between parts of the code grows making it increasingly di cult for developers to foresee and reason about the e ects of changes they make to a system.
automated change impact analysis techniques aim to support a developer during system evolution by identifying the artifacts e.g.
les methods or classes a ected by a given change.
traditionally these change impact analysis techniques are based on static or dynamic dependency analysis for example by identifying the methods that call a changed method .
more recently promising alternative techniques have been proposed that identify dependencies by means of evolutionary coupling .
these alternative approaches avoid certain limitations in existing techniques.
for example static and dynamic dependency analysis are generally language speci c making them unsuitable for the analysis of heterogeneous software systems .
in addition they can involve considerable overhead e.g.
dynamic analysis need for code instrumentation and tend to over approximate the impact of a change .
evolutionary couplings di er from the ones found through static and dynamic dependency analysis in that they are based on howthe software was changed over time.
in essence evolutionary coupling aims to build on the developer s inherent knowledge of the dependencies in the system which can manifest themselves by means of commit comments bugreports context switches in an ide etc.
in this paper we consider co change as the basis for uncovering evolutionary coupling.
co change information can for example be extracted from a project s version control system from its issue tracking system or by instrumenting the development environment .
the most frequently used method for mining evolutionary coupling from co change data is association rule mining also called association rule learning .
various variants on the approach have been described in the software engineering literature .
all of these approaches have in common that the technique is tuned with a number of parameters.
while studying the literature we found that there is little to no practical guidance on the tuning of these parameters nor has there been a systematic evaluation of their impact on change recommendation quality.
moreover we conjecture that in addition to parameters of the minpermission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
ase september singapore singapore c acm.
... .
ing algorithm the recommendation quality is also a ected by characteristics of the change set that is used to derive the recommendation and by characteristics of the system s change history from which the recommendation is generated.
in this paper we empirically investigate the extent to which these factors a ect change recommendation.
speci cally we conduct a series of systematic experiments on the change histories of two large industrial systems and eight large open source systems.
in these experiments we control the size of change set used to derive recommendations the measure used to assess the strength of the evolutionary coupling and the maximum size of historical changes taken into account when inferring association rules.
we use the results from our study to derive practical guidelines for applying association rule mining to construct software change recommendations.
contributions this paper presents three key contributions we investigate a previously unexplored area of tuning association rule mining parameters for software change recommendation we evaluate how recommendation quality is impacted by both characteristics of the change set used to derive a recommendation and characteristics of change history used for learning we derive practical guidelines for improving the application of association rule mining in the derivation of software change recommendations.
overview the remainder of this paper is organized as follows section provides background on targeted association rule mining.
section describes limitations of classical approaches.
section describes the setup of our empirical investigation whose results are presented in section .
finally section presents the related work and then section provides some concluding remarks.
.
association rule mining agrawal et al.
introduced the concept of association rule mining as a discipline aimed at inferring relations between entities of a dataset .
association rules are implications of the forma!b whereais referred to as the antecedent b as the consequent andaandbare disjoint sets.
for example consider the classic application of analyzing shopping cart data if multiple transactions include bread and butter then a potential association rule is bread!butter .
this rule can be read as if you buy bread then you are also likely to buy butter.
in the context of mining evolutionary coupling from cochange information the entities involved are the les of the system1and a collection of transactions denoted t e.g.
a history of commits to the version control system .
a transaction t2tis the set of les that were either changed or added while addressing a given bug or feature request hence creating a logical dependence between the les .
as originally de ned association rule mining generates rules that express patterns in a complete data set.
however some applications can exploit a more focused set of rules.
targeted association rule mining focuses the generation of rules by applying a constraint.
one example constraint speci es that the antecedent of all mined rules belongs to a particular set of les which e ectively reduces the number of rules that need to be created.
this reduction can drastically improve rule generation time .
1other granularities are possible and our choice of le level changes is without loss of generality as our algorithms are granularity agnostic if ne grained co change data is available the algorithms will relate methods or variables just as well as les.when performing change impact analysis rule constraints are based on a change set for example the set of les that were modi ed since the last commit.
this set is also referred to as a query for which to search for potential impact.
in the constrained case only rules with at least one changed entity in the antecedent are created.
the output of change impact analysis is the set of les from the system historically changed alongside the elements of the change set.
for example given the change set fa b cg change impact analysis would uncover les that were changed when a b andcwere changed.
the resulting impacted les are those found in the rule consequents.
these les can be ranked based on the rule s interestingness measure .
to our knowledge only a few targeted association rule mining algorithms have been considered in the context of change impact analysis zimmerman et al.
ying et al.
kagdi et al.
and our previous work .
in contrast simpler co change algorithms have been well studied in a variety of contexts .
existing targeted association rule mining algorithms and the co change algorithms di er in terms of which subsets of the change set are allowed in the antecedent of generated rules.
consider for example the subsets of the change set c fa b c dg powerset c ffg fag fbg fcg fdg fa bg fa cg fa dg fb cg fb dg fc dg fa b cg fa b dg fa c dg fb c dg fa b c dgg both zimmerman s and ying s algorithms constrain the antecedent of rules to be equal to the change set and hence only generate rules based on line i.e.
rules of the form fa b c dg!x .
at the other end of the spectrum cochange algorithms only generate rules from the singleton sets in line such asfag!xorfbg!x.
in our previous work we introduced tarmaq the most versatile among the existing algorithms .
tarmaq generates rules whose antecedent can be from any of lines or .
the particular line used is dynamically chosen based on the maximal overlap between the change set cand the transactions that make up the history.
.
problem description change impact analysis takes as input a set of changed entities e.g.
the les changed in a system referred to as a change set orquery and outputs a set of potentially impacted entities.
a common strategy for change impact analysis is to use association rule mining to capture the evolutionary couplings between such entities.
in particular entities are considered to be coupled if they have changed together in the past.
furthermore the strength of a coupling depends on how frequently the entities have changed together.
the stronger the coupling between two entities the more likely it is that the entities are related to each other and hence that one is impacted by changes to the other.
the strength of an evolutionary coupling is usually assessed using an interestingness measure applied to the association rules.
the literature reports over of these measures which have been applied in a variety of domains .
it has been shown that the particular measure chosen has a signi cant impact over the ranking of rules and consequently on the quality of the recommendations generated .
733the following four examples illustrate how performance is a ected by the two con guration parameters interestingness measure and the lter size the size of the query and expected outcome and nally the system characteristics.
example consider the following history tof transactions t fa cg fb cg fa b cg fa b x y zg fy zg fx y zg and the change set c fa bgwhere based ontandc the following four rules have been mined.2for each rule three measures con dence prevalence and recall are given in parentheses.
the con dence recall measures the ratio between the number of transactions where the antecedent and consequent changed and the number of transactions where only the antecedent consequent changed.
prevalence measures the percentage of transactions in the history where the consequent changed.
a b!c a b!x a b!y a b!z in the example the con dence values suggest that the four rules are all equally likely to hold while prevalence suggests thata b!xis inferior to the others because xis changed only twice int.
on the other hand recall suggests the opposite that a b!xis more likely than the others because the co occurrence of fa bgandxinfa b x y zgis more signi cant than the co occurrence of fa bgand other les that changed more often without both aandb.
however one s intuition matches the suggestion made by sincea andbhave a stronger relation with cthan withx.
this is becausecappears also singularly with aandb whilextends to change together with yandz.
in general the particular interestingness measure or combination thereof used to rank the rules is a parameter of the change recommendation algorithm.
there exist a number of such parameters that a ect how rules are ranked and recommendations are generated.
example consider again the history tof transactions t fa cg fb cg fa b cg fa b x y zg fy zg fx y zg and the change set c fa bg.
however assume that transactions larger than three les are discarded from the history when generating rules and calculating their interestingness.
based on cand the ltered history only the rule a b!cis mined.
in this second example x y andzwill not be recommended becausefa b x y zg the change set containing evidence for their recommendation has been ltered out of t. intuitively ltering out larger transactions from the history avoids generating rules from change sets that contain potentially unrelated les and is a strategy used by most approaches .
however ltering too aggressively may remove legitimate evidence of evolutionary coupling.
values for con gurable parameters are not the only criteria that can a ect the recommendations generated.
example consider the same history tof transactions t fa cg fb cg fa b cg fa b x y zg fy zg fx y zg 2as a notational convenience we write association rules without the set designation for example a!xin place offag!x.and the change sets c1 fagandc2 fa bg.
the following rules are mined for c1andc2.
rules forc1 a!b a!c a!x a!y a!zrules forc2 a b!c a b!x a b!y a b!z c1andc2have di erent sizes and hence when used as queries they provide di erent amounts of evidence from which to make a recommendation.
for example consider the recommendation of c. in this case c1contains only ain support of the recommendation while c2contains both aandband thus likely provides stronger support.
while intuitively larger queries can be expected to lead to stronger recommendations queries that are too large may contain potentially unrelated les degrading the quality of the recommendation.
an inverse argument applies to the expected outcome the set of les that we seek to recommend.
first consider the goal of predicting any one le from the expected outcome.
clearly the larger the expected outcome the easier the task of predicting one of them correctly.
however our goal is to recommend allof the les in the expected outcome.
in that case intuitively a smaller expected outcome should be easier to recommend as it is easier for a query to provide the necessary supporting evidence.
finally characteristics of the change history can a ect the precision of a recommendation.
example consider two transaction histories t1andt2from systemss1ands2 respectively.
assume that the transactions of t1are on average larger than those of t2because of di erences in development processes.
for example s1might be developed with an agile process where small change sets are committed frequently whiles2was developed with a less nimble process where large change sets are committed less often.
in this last example queries and expected outcomes for t1 are likely to be smaller than those for t2.
thus entailing the implications discussed in example and also potentially differing impacts from transaction ltering which was described in example .
.
empirical study we perform a large empirical study to assess the extent to which the quality of change recommendations generated using targeted association rule mining is a ected by the values of various parameters of the mining algorithm characteristics of the change set used to derive the recommendation and characteristics of the system s change history.
we use as a reference mining approach from our previous work which has proven to perform consistently better than the previous state of the art for software change impact analysis .
our study investigates the performance of targeted association rule mining in the context of several software systems and several parameters con gurations.
speci cally we investigate the following four research questions rq to what extent does the interestingness measure a ect the precision of change recommendation?
rq to what extent does the size limit used to lter the transactions of the history a ect the precision of change recommendation?
734table characteristics of the last transactions of the evaluated software systems software system nr.
of avg.
commit history covered languages used les size in years cisco norway .
.
c c c python java xml other build con g undisclosed kongsberg maritime .
.
c c xml other build con g undisclosed git .
.
c shell script perl other httpd .
.
xml c forth other linux kernel .
.
c other llvm .
.
c assembly c other jetbrains intellij .
.
java python xml other ruby on rails .
.
ruby other subversion .
.
c python c other wine .
.
c other data on the languages used by the open source systems obtained from rq to what extent do query size and expected outcome size a ect the precision of change recommendation?
rq to what extent does the average commit transaction size of the history a ect the precision of change recommendation?
the remainder of this section details our evaluation setup and is organized as follows in section .
we describe the software systems included in the study.
sections .
and .
describe the interestingness measures and the history ltering.
section .
describes two central concepts for the evaluation query generation andquery execution .
section .
explains the generation of change recommendations.
finally section .
explains how we measure performance.
.
subject systems to assess change recommendation in a variety of conditions we selected ten large systems having varying size and transaction frequency.
two of these systems come from our industry partners cisco norway and kongsberg maritime km .
cisco norway is the norwegian division of cisco systems a worldwide leader in the production of networking equipment.
in particular we consider a software product line for professional video conferencing systems developed by cisco norway.
km is a leading company in the production of systems for positioning surveying navigation and automation of merchant vessels and o shore installations.
speci cally we consider a common software platform km uses across various systems in the maritime and energy domain.
the other eight systems are well known open source projects.
table summarizes descriptive characteristics of the software systems used in the evaluation.
the table shows that the systems vary from medium to large in size with up to forty thousand di erent les committed in the transaction history.
for each system we considered the most recent transactions commits .
this value represents a balance between too short a history which would lack su cient connections and too long a history which is hard to process e ciently and can contain outdated couplings caused by for example architectural changes.
across all ten systems transactions covers a signi cantly di erent development time span ranging from almost years in the case of httpd to months in the case of the linux kernel.
most of the systems are heterogeneous being developed in more than one programming language.
finally we note that the median commit size for all the selected systems is one.
.
interestingness measures mining of change recommendations often uses or combines thesupport and con dence measures from the data min ing community to separate interesting from uninteresting rules .
however as introduced in section over interestingness measures have been de ned in the literature to measure the strength of the evolutionary couplings mined using association rules.
these measures are usually de ned based on a probabilistic interpretation of the occurrence in the history of the rules antecedent and consequent.
for example given the rule a!bthe probability p a is the percentage of transactions from the history that include a while the probability p a b is the percentage of transactions in the history that contain both aandb.
therefore the interestingness of the rule a!bis usually de ned as a function of p a p b and various combinations thereof obtained through negations fractions and conditional operators.
in this paper we consider interestingness measures commonly used in several data mining and machine learning applications.
due to space limitations we only report their names in table and refer the reader to the original sources for the de nitions .
.
history filtering several approaches for mining change recommendations start by ltering the history to remove transactions larger than a given size.
this common heuristic seeks to avoid mining from transactions that do not contain relevant information on the evolutionary coupling of les such as in the case of license updates or refactoring .
removing transactions from the history also has the e ect of signi cantly speeding up the rule generation process.
this paper considers seven di erent transaction ltering sizes and .
note that is the threshold used in the work of zimmermann et al.
.
starting from this value we progressively consider more restrictive ltering.
for each lter size s we generate a ltered history hs from which we mine the association rules used to generate recommendations.
in addition we also consider the un ltered historyh.
sincehcan be thought of as ltered with an in nite lter size we simply refer to these as eight transaction ltering sizes in the rest of the paper.
.
query generation and execution a challenge in evaluating change recommendation techniques is what gold standard can be used to compare the generated recommendation against.
a common strategy is to take a transaction tfrom the change history and randomly partition it into a non empty query qand a non empty expected outcome edef tnq.
since the les in a transaction are considered to be logically coupled this 735table overview of the interestingness measures considered in our study interestingness measure added value casual con dence casual support collective strength con dence conviction cosine coverage descriptive con rmed con dence di erence of con dence example and counterexample rate gini index imbalance ratio interestingness measure interestingness weighting dependency j measure jaccard kappa klosgen kulczynski laplace corrected con dence least contradiction leverage lift linear correlation coe cient loevinger odd multiplier interestingness measure odds ratio one way support prevalence recall relative risk sebag schoenauer speci city support two way support varying rates liaison yules q yules y zhang stategy provides a suitable gold standard.
the evaluation then assesses how well a change recommendation technique can recover expected outcome efrom query qusing the transactions that came before tin the change history.
from the history of each system we randomly sample transactions 3which are used to generate queries and their related expected outcomes .
each query is executed for each of the interestingness measures reported in table using each of the eight ltering sizes introduced in section .
.
this setup yields a total of data points for each system where each data point is a recommendation for a query.
.
generating change recommendations all queries are executed using tarmaq the targeted association rule mining algorithm we introduced in previous work .
recall from section that executing a query q creates a set of association rules.
in order to e ciently generate recommendations tarmaq only considers rules whose consequent contains a single le .
generating a change recommendation for qconsists of sorting the rules generated forqaccording to their interestingness score and returning the ranked list of the consequents of the rules.
we only consider the largest interestingness score for each consequent i.e.
we do not use rule aggregation strategies such as the ones we proposed in previous work .
.
performance measure to evaluate a recommendation we use average precision ap which is commonly used in information retrieval to assess the quality of a ranked list de nition average precision given a recommendation r and an expected outcome e the average precision of ris given by ap r def jrjx k 1p k 4r k 3for a normally distributed population of a minimum of samples is required to achieve a con dence level with a con dence interval.
since we do not know the distribution of transactions we correct the sample size to the number needed for a non parametric test to have the same ability to reject the null hypothesis.
the correcting is done using the asymptotic relative e ciency are .
as ares di er for various non parametric tests we choose the lowest coe cient .
yielding a minimum sample size of transactions.
hence sampling transactions is more than su cient to achieve a con dence level with a con dence interval.table example of average precision calculation considerfc d fgas expected outcome in the following list rank k file p k 4r k c a f g d ap wherep k is the precision calculated on the rst k les in the list i.e.
the fraction of correct les in the top k les and 4r k is the change in recall calculated only on the k 1thandkth les i.e.
how many more correct les were predicted compared to the previous rank .
since we consider only rules with a single consequent 4r k will always be equal to either zero or jej because a rank either does not contain a le from expected outcome e or it contains exactly one le from e. table illustrates the computation of ap p k and4r k given the ranked list and the expected outcome fc d fg.
as an overall performance measure for a group of factors e.g.
a given ltering size and interestingness measure we use the mean average precision map computed over all the queries executed using the given factor combination.
.
results this section presents the results of the study described in section .
a replication package is provided online.
we begin by analyzing a key descriptive statistic the commit size distribution which is shown in table .
because the majority .
of the commits contains less than six les we focus the remainder of our analysis on this dominant subset of the data.
.
analysis of explanatory variables central to our analysis is an anova used to explore the signi cance of the ve explanatory variables program lter size expected outcome size interestingness measure ormeasure for short and query size together with all ten of their pairwise interactions.
the q q plot of the residuals left out nds that these residuals follow a su ciently normal distribution especially considering anova s performance in the presence of large data sets such as the nearly ve million data points considered here.
736table commit size frequency and cumulative percentage of all transactions considered.
commit size frequency cumulative .
.
.
.
.
.
.
.
.
.
.
.
.
table anova model explanatory variables and their pair wise interactions ordered by f value which provides a measure of the signi cance of the variable interaction.
explanatory variable df mean sq f value p value expected outcome size .
program .
lter size .
measure .
query size .
expected outcome sz lter size .
program query size .
program expected outcome size .
program lter size .
query size lter size .
query size measure .
query size expected outcome sz .
expected outcome size measure .
lter size measure .
program measure .
the model is shown in table with terms ordered by their f value.
even though all fteen terms are highly statistically signi cant the ve variables make a larger contribution than the interaction terms i.e.
have larger f values .
.
impact of interestingness measures using the anova we continue our analysis by considering the rst research question rq to what extent does the interestingness measure a ect the precision of change recommendation?
to visually explore the in uence of interestingness measures figures show interaction plots of measure with respectively program query size expected outcome size and lter size where infindicates no ltering .
the overall pattern evident in these graphs is that measure is largely independent of .
.
.
.
.6program by measure programmap jetb rails svn httpd git llvm cisco km linux wine figure interaction plot of measure and program .
the measures are shown unlabeled to avoid cluttering the plot.
.
.
.
.
.
.45query size by measure query sizemap 4figure interaction plot of measure and query size .
the measures are shown unlabeled to avoid cluttering the plot.
program query size expected outcome size and lter size .
statistically the interactions are signi cant primarily due to a few interestingness measures that buck the trend producing line crosses in the plots .
this visually evident mostly independent observation is supported by the comparatively low f values for the four interactions involving measure they are four of the ve smallest in the model shown in table .
the low f values and the interactions plots support the notion that there are consistent best measures for change recommendation based on evolutionary coupling.
not surprisingly there is no single best measure .
tukey s honestly signi cant di erence hsd test nds that eleven measures populate the top equivalence class.
these are shown in table .
note that even though their map values are slightly .
.
.
.
.
.45expected outcome size by measure expected outcome sizemap figure interaction plot of measure and expected outcome size.
the measures are shown unlabeled to avoid clutter.
.
.
.
.
.
.
.45filter size by measure filter sizemap inffigure interaction plot of measure and lter size .
the measures are unlabeled to avoid cluttering the plot.
di erent the measures in this class are not statistically different from each other.
also observe that table includes the classic measures con dence and support .
their presence reinforces a result from the recent work of le and lo .
while their work considers a di erent problem the e ect of di erent interestingness measures in rule based speci cation mining they too conclude that the standard measures work well.
thus in summary for rq1 we nd that to a large extent measure s in uence on average precision is consistent across di erences in other variables and that the traditional measures are top performers.
.
impact of transaction filtering next we turn to answering our second research question rq to what extent does the size limit used to lter the transactions of the history a ect the precision of change recommendation?
the results for this question are rather surprising.
when ltering the history it is common to remove large commits as they are assumed to re ect licencing changes and alike.
prior work has typically used as a cut o while some experiments have used values as high as .
one might wonder if lter sizes or yield any di erences because the average commit sizes for the ten systems studied are smaller than these lter sizes.
the answer can be in figure which shows that no ltering lter size inf performs worse than ltering commits larger than which in turn performs worse than ltering commits larger than and similarly for lter size .
analysis using tukey s hsd table top group of tukey s hsd for measure interestingness measure map group casual con dence .
a klosgen .
a descriptive con rmed con dence .
a added value .
a collective strength .
a loevinger .
a con dence .
a leverage .
a example and counterexample rate .
a di erence of con dence .
a support .
atable tukey s hsd for lter size for the top measures .
lter size size mean group .
a .
ab .
bc .
c also shows that the maps continue to signi cantly decrease for lter sizes and no ltering.
for the eight lter size s studied figure shows the interaction between lter size and program for two subsets of the data.
on the left the data for all measures is shown while on the right the data for the top group of measures identi ed in table is shown.
it is clear from this gure that smaller commits contain much more useful information than larger commits as the best value for most systems occurs at a lter sizeof only four or six when considering all measures and at a lter size of six to ten for the top group of measures.
considering only the top group of measures tukey s hsd test shown in table groups lter size six and eight in the top equivalence class.
thus in answer to rq2 aggressive history ltering appears to retain only high value commits that support the creation of high quality association rules.
this is a noteworthy nding as it suggests that ltering should be applied much more aggressively.
although small commits capture stronger couplings prior work has not exploited this fact.
for example as discussed in section rose only generates association rules whose antecedent is equal to the query.
in particular this means that the algorithm can not generate rules from transactions smaller than the query.
in contrast the more recent algorithm tarmaq can exploit partial matches between the query and historical transactions and can thus be used when considering only small high focus commits.
.
impact of query size and expected outcome size our third research question considers the impact of the query and the expected outcome rq to what extent do query size and expected outcome size a ect the precision of change recommendation?
because all the explanatory variables andall their interactions are statistically signi cant the resulting coe cient equation is very complex it includes almost terms!
.
rather than state this equation we zoom in on a few of its key terms.
speci cally those involving query size expected outcome size and commit size which is the sum of query size and expected outcome size .
these three include three significant interactions and thus the interpretation of even just this subset is complex.
fortunately the practical range of these explanatory variables is limited as shown in table where of the data is covered by commit sizes less than or equal to .
the use of a small range of values makes it is viable to enumerate all possible combinations.
table unravels the interactions for the various combinations of query size and expected outcome size and uses color to indicate entries with the same commit size .
for example the hardest case where the map value gets the lowest contribution is for a query size of and an expected outcome size of .
this high challenge level is expected as this .
.
.
.
.
filter sizemap 2468102030inf programciscogithttpdjetbkmlinuxllvmrailssvnwine .
.
.
.
.
filter sizemap 2468102030inf programciscogithttpdjetbkmlinuxllvmrailssvnwinefigure interactions of lter size and program .
to the left for all measures and to the right for the top group of measures .
case aims to predict the largest of the outcomes based on minimal information.
the table makes it possible to look at trends.
starting with commit size following the diagonal with green cells which have a commit size of ve we see that the prediction gets easier the contribution to map increases as the expected outcome size decreases and the query size increases.
this same pattern is seen with the other commit sizes other colors .
a similar pattern is also clear for a xed query size any given column of the table .
in this case the prediction gets more di cult the contribution to map decreases as expected outcome size grows.
finally for a xed expected outcome size a given row in the table the trend is less clear one might expect the prediction to get easier as query size increases because there is more information to build on.
we can indeed see this pattern in the row for expected outcome size of three.
however the row where expected outcome size is two is approximately at and most surprisingly the top row where expected outcome size is one shows a clearly decreasing trend.
thus the data shows that the prediction of a single result gets more di cult the contribution to map decreases as query size grows.
we can not completely explain this decrease but conjecture that it is an e ect related to small commits such as those shown in yellow and blue being more focussed than larger commits.
in other words larger commits are more likely to introduce noise into the recommendation.
it may also be an artifact of using coarse grained le level change data and thus the expected trend would be visible with more netable relative impact of query size and expected outcome sizeand their interactions.
the colors indicate the commit size as shown in the legend on the right.
expected query size outcome size 1commit size 5grained method level change data.
we plan to investigate this phenomena in more detail in our future work.
.
impact of average transaction size finally we consider our last research question rq to what extent does the average commit transaction size of the history a ect the precision of change recommendation?
to analyze this question we perform a linear regression using the average commit size to predict the map value for each system.
this data is shown in table .
the regression nds no signi cant correlation between the average commit size and map.
thus in answer to rq4 the average commit size in the change history has no impact on the precision of change recommendation.
in retrospect considering how table shows that the frequency of commit sizes is rather skewed the nding that the average commit size is not a good predictor of the algorithm s precision should come as no surprise.
.
threats to validity commits as a basis for evolutionary coupling the evaluation presented in this paper is grounded in predictions made from analyzing patterns in change histories.
however as pointed out by herzig et al.
the transactions in the change histories could contain unrelated les or could miss related les added in subsequent transactions.
in our case the software systems studied except km use git for version table average commit size and map for each program .
programaverage commit sizemap cisco .
.
git .
.
httpd .
.
jetbrains .
.
km .
.
linux .
.
llvm .
.
rails .
.
subversion .
.
wine .
.
739control which provides developers with tools for amending commits and rewriting history.
therefore we argue that the impact of incomplete or entangled transactions is less signi cant in our case than it would be using other version control systems such as svn or cvs.
in our related work we also discuss methods for grouping related commits that are orthogonal to our approach and could be thus used to re ne the change history.
variation in software systems we conducted our experiments on two industrial systems and eight large open source systems.
these systems vary considerably in size and frequency of transactions commits which should provide an accurate picture of the performance in various contexts see table .
however despite our careful choice we are likely not to have captured all possible variations.
random sampling errors our experiment is based on taking a large number of random samples from the change history of each system.
although we use uniform random sampling there is the possibility that our samples do not accurately represent the actual change history for example the distribution of transaction sizes considered in the sample may be di erent full history.
we address this particular issue applying a chi squared test to validate that our samples are representative of the population the change histories .
an alternative approach would be to use a strati ed sampling strategy where one extracts samples of each transaction size in proportion to their frequency in the complete history.
the results of the chi squared test indicate that such an alternative strategy is not necessary.
implementation we have implemented the experiments using ruby and thoroughly tested all algorithms and measures studied in this paper.
we also performed the statistical analysis using standard methods provided by r. however we can not guarantee the absence of implementation errors which may a ect our results.
.
related work recent research highlighted that the performance of data mining algorithms is impacted by their con guration parameters .
a common strategy for tuning these parameters consists in optimizing their values over half of the test set inner validation and then using the other half to assess the performance of the optimal parameters outer validation .
while this strategy is useful to ne tune the parameters for a particular type of data it does not provide insights on how the algorithm s performance is a ected by the parameters .
in the context of association rule mining several authors have noted the need to investigate the impact of parameter settings on the quality of the generated rules .
therefore in this paper we investigate the extent to which the quality of change recommendation via association rule mining is a ected by three factors the values selected for various parameters of the mining algorithm characteristics of the change set used to derive the recommendation and characteristics of the system s change history for which recommendations are generated.
in the rest of this section we distinguish related work on these three aspects focusing on the area of software maintenance and evolution.
parameters in association rule mining in general association rule mining algorithms di er from each other in the data structures used to represent transactions and the strategy used to select transactions relevant to a givenquery .
however the majority of such algorithms are characterized by similar parameters.
among those this paper focuses on the maximum size of transactions used to generate rules transaction ltering size and on the metric measuring the strength of evolutionary couplings inferred by those rules interestingness measure .
in the context of software change impact analysis several studies remark on the importance of discarding from the history large change sets that are likely to contain unrelated les.
for example kagdi et al zimmermann et al.
and ying et al.
propose ltering transactions larger than and items respectively.
however these authors generally do not report how such threshold values have been chosen nor do they explore the impact of alternative values on recommendation precision.
several authors have also remarked that selecting the right interestingness measure for a problem domain can signi cantly a ect recommendation accuracy .
in particular le and lo compared measures in the context of rule based speci cation mining highlighting the need to look beyond standard support and con dence to nd interesting rules .
we are not aware of similar studies carried out in the context of software change impact analysis.
characteristics of the change set targeted association rule mining uses the query to drive the generation of rules .
in general particular characteristics of the query can e ect the quality of recommendations.
for example in the context of software change impact analysis we identi ed in previous work a particular class of queries for which the most common targeted association rule mining approaches cannot generate recommendations .
note that it is common practice to validate targeted association rule mining approaches by sampling random queries from the change history .
while this strategy ensures that the approach is evaluated on a variety of change sets from the history authors in general do not consider how query size might a ect the quality of the recommendations.
among others hassan and holt investigated the e ectiveness of evolutionary coupling in predicting change propagation e ects resulting from source code changes but did not evaluate whether the size of transactions in the history a ected the quality of the predictions generated .
characteristics of the change history several past studies have proposed strategies to group transactions in the change history .
the reason for so is that a developer might accidentally commit an incomplete transaction and update the remaining les related to the same change in a separate transaction.
as a consequence entities that are logically coupled via the same change might become spread across several transactions in the change history.
nevertheless in modern version control systems transactions are stashed in the user s local repository and can be amended before they are nalized at a later stage thereby reducing the risk of committing incomplete transactions.
in contrast the question whether properties of the change history such as average commit size and frequency a ect the quality of change recommendation is less studied.
in this direction german carried out an empirical study on several open source projects nding that the revision histories of most systems contains mostly small commits .
alali et al.
also investigated the total number of lines modi ed in the les and the total number of hunks continuous groups of lines that were changed .
kolassa et al.
performed 740a similar study on commit frequency reporting an average inter commit time of about three days .
however none of these studies investigate how characteristics of the change history a ect the quality of the change recommendation.
.
concluding remarks conclusions association rule mining is an automated unsupervised learning technique that has been successfully used to analyze a system s change history and uncover evolutionary coupling between its artifacts.
these evolutionary couplings can be used to recommend artifacts that are potentially impacted by a given set of changes to the system.
so can help developers address the increasing entropy caused by repeated software maintenance and evolution.
in this paper we present a series of experiments using the change histories of two large industrial systems and eight large open source systems.
for each system we randomly extract a representative sample of the transactions from the change history randomly split each of these transactions in two parts a query and an expected outcome and analyzed how several parameters a ect the prediction of the expected outcome based on the query.
we draw the following conclusions rst our analysis shows that the impact of interestingness measure is largely independent of the particular program query size and expected outcome size .
this means that it is possible to identify the best measures for change recommendations based on evolutionary coupling.
to do so we clustered measures using tukey s hsd where the measures in each cluster are not statistically di erent from each other.
we nd that the standard measures con dence and support are in the top equivalence class thus statistically no other measure provides better performance than these two.
this result is in line with the earlier ndings by lo and le who conducted a related study of interestingness measures for rule based speci cation mining.
second learning from a change history that is ltered to remove transactions larger than six to eight les yields the best results regardless of program query size and expected outcome size .
furthermore the average precision produced by higher thresholds is signi cant worse.
third for smaller commits up to a transaction size of ve which includes just over of all transactions the smaller the expected outcome the higher the average precision.
this suggests that for relatively small commits the less information you want to predict the better the results.
when we extend the analysis to larger commits which are the minority larger expected outcomes lead to higher precision.
combined these two observations suggest that predicting a few missed les is easy while predicting a large number of missed les from limited information is hard.
a similar pattern is seen when comparing smaller and larger commit sizes.
fourth for the smaller commits one would expect that larger queries would produce better average precision.
our data only partially supports this expectation.
looking at the rows of table two e ects are competing with each other.
a simpli ed version of the coe cient equation used to ll in this table includes both query size and query size2.
the data in the table re ects these two factors.
initially the linear term dominates and increased query size increases the average precision.
however for larger values of query size the negative quadratic term dominates and the average precision is reduced.
while there is insu cient data to establish atrend the peak value appears to be a function of the expected outcome size .
in the rst row the value is less than or equal to one for the second row it is two while for the third and fourth rows it is greater than two.
clearly this e ect warrants future research consideration.
guidelines from our conclusions we derive the following practical guidelines for applying association rule mining in the context of software change recommendation stick with default interestingness measures as they are in the top perform class and have a long proven track record learn from a subset of the change history that includes only the smaller transaction sizes to avoid noise.
we have good experience with transaction sizes up to about eight but these values may depend on the actual transaction sizes in the particular history being analyzed.
future work we consider the following directions for future extension of this work use of ne grained cochange information.
although our algorithms are granularity agnostic we expect interesting di erences in the change patterns used to mine evolutionary coupling at di erent levels of granularity.
for instance consider how multiple methodlevel changes in the same le get abstracted into one change at the le level.
these di erences will likely have an effect on parameter values such as the transaction lter size.
language speci c change recommendations.
the change recommendation mining in this paper is independent of the programming language of the artifacts in the change history.
this has advantages in the context of heterogeneous systems but it also potentially increases noise.
consider a software development project that consists of a front end written in java and a back end written in c. in this case front end java developers are not likely to bene t from recommendations involving the c code.
in contrast full stack integrators responsible for connecting the front and back end would bene t from multi language recommendations.
in this context there is value in being able to provide languagespeci c change recommendations i.e.
recommendations that are based on ltering the change history for artifacts of a particular type.
impact of software development styles.
the third area of related work will involve a deeper analysis of the impact of various types of software systems and their software development styles on the quality of change recommendations.
aspects that may play a role here include frequency of commits tendency to piggyback tangle commits and code ownership.
the question is how to classify systems based on these factors.
an initial study might compare industrial software systems with open source systems as there are often clear di erences between the two styles.
with that comparison in mind it is of interest to observe that the two industrial systems that were considered in this study could not be distinguished from the open source systems based on the interaction plots figures to nor could be distinguished in terms of map or using tukey s hsd analysis.
however this observation is based on a very small sample size.
a more complete comparison should consider a larger sample of industrial systems unfortunately acquiring such may not be an easy task.
we welcome suggestions for tackling this challenge.
acknowledgement this work is supported by the research council of norway through the evolveit project f20 and the certus sfi .
dr. binkley is supported by nsf grant iia and a j. william fulbright award.
741references g. canfora and l. cerulo.
impact analysis by mining software and change request repositories .
in international software metrics symposium metrics .
ieee pp.
.
m. a. jashki r. zafarani and e. bagheri.
towards a more e cient static software change impact analysis method .
in acm sigplan sigsoft workshop on program analysis for software tools and engineering paste .
acm pp.
.
x. ren et al.
chianti a tool for change impact analysis of java programs .
in acm sigplan conference on object oriented programming systems languages and applications oopsla .
pp.
.
m. b. zanjani g. swartzendruber and h. kagdi.
impact analysis of change requests on source code based on interaction and commit histories .
in international working conference on mining software repositories msr .
pp.
.
s. bohner and r. arnold.
software change impact analysis .
ca usa ieee .
a. r. yazdanshenas and l. moonen.
crossing the boundaries while analyzing heterogeneous componentbased software systems .
in international conference on software maintenance icsm .
ieee pp.
.
a. podgurski and l. clarke.
a formal model of program dependences and its implications for software testing debugging and maintenance .
in ieee transactions on software engineering .
pp.
.
s. eick et al.
does code decay?
assessing the evidence from change management data .
in ieee transactions on software engineering .
pp.
.
r. robbes d. pollet and m. lanza.
logical coupling based on fine grained change information .
in working conference on reverse engineering wcre .
ieee pp.
.
r. agrawal t. imielinski and a. swami.
mining association rules between sets of items in large databases .
in acm sigmod international conference on management of data .
acm pp.
.
t. zimmermann et al.
mining version histories to guide software changes .
in ieee transactions on software engineering .
pp.
.
a. ying et al.
predicting source code changes by mining change history .
in ieee transactions on software engineering .
pp.
.
h. kagdi s. yusuf and j. i. maletic.
mining sequences of changed les from version histories .
in international workshop on mining software repositories msr .
acm pp.
.
t. rolfsnes et al.
generalizing the analysis of evolutionary coupling for software change impact analysis .
in international conference on software analysis evolution and reengineering saner .
ieee pp.
.
h. gall k. hajek and m. jazayeri.
detection of logical coupling based on product release history .
in international conference on software maintenance icsm .
ieee pp.
.
r. srikant q. vu and r. agrawal.
mining association rules with item constraints .
in international conference on knowledge discovery and data mining kdd .
aasi pp.
.
t. ball j. kim and h. p. siy.
if your version control system could talk .
in icse workshop on process modelling and empirical studies of software engineering.
.
d. beyer and a. noack.
clustering software artifacts based on frequent common changes .
in international workshop on program comprehension iwpc .
ieee pp.
.
a. hassan and r. holt.
predicting change propagation in software systems .
in international conference on software maintenance icsm .
ieee pp.
.
l. geng and h. j. hamilton.
interestingness measures for data mining .
in acm computing surveys .
.
r. kamber micheline and shinghal.
evaluating the interestingness of characteristic rules .
in kdd .
pp.
.
p. n. tan v. kumar and j. srivastava.
selecting the right objective measure for association analysis .
in information systems .
pp.
.
k. mcgarry.
a survey of interestingness measures for knowledge discovery .
in the knowledge engineering review .
p. .
h. kagdi m. gethers and d. poshyvanyk.
integrating conceptual and logical couplings for change impact analysis in software .
in empirical software engineering18.
pp.
.
t. d. b. le and d. lo.
beyond support and con dence exploring interestingness measures for rule based speci cation mining .
in international conference on software analysis evolution and reengineering saner .
ieee pp.
.
t. rolfsnes et al.
improving change recommendation using aggregated association rules .
in international conference on mining software repositories msr .
acm pp.
.
a. alali.
an empirical characterization of commits in software repositories .
ms.c.
kent state university p. .
h. j. hilderman robert and hamilton.
knowledge discovery and measures of interest .
springer science business media .
k. herzig and a. zeller.
the impact of tangled code changes .
in working conference on mining software repositories msr .
ieee pp.
.
k. herzig s. just and a. zeller.
the impact of tangled code changes on defect prediction models .
in empirical software engineering .
pp.
.
o. maimon and l. rokach.
data mining and knowledge discovery handbook .
ed.
by o. maimon and l. rokach.
springer p. .
i. h. witten e. frank and m. a. hall.
data mining practical machine learning tools and techniques .
morgan kaufmann .
e. keogh s. lonardi and c. a. ratanamahatana.
towards parameter free data mining .
in sigkdd pp.
.
z. zheng r. kohavi and l. mason.
real world performance of association rule algorithms .
in sigkdd international conference on knowledge discovery and data mining kdd .
acm pp.
.
w. lin s. a. alvarez and c. ruiz.
no title .
in data mining and knowledge discovery .
pp.
.
n. jiang and l. gruenwald.
research issues in data stream association rule mining .
in acm sigmod record .
pp.
.
a. silva and c. antunes.
constrained pattern mining in the new era .
in knowledge and information systems .
pp.
.
f. jaafar et al.
detecting asynchrony and dephase change patterns by mining software repositories .
in journal of software evolution and process .
pp.
.
d. m. german.
an empirical study of ne grained software modi cations .
in empirical software engineering .
pp.
.
a. alali h. kagdi and j. maletic.
what s a typical commit?
a characterization of open source software repositories .
in international conference on program comprehension icpc .
ieee pp.
.
c. kolassa d. riehle and m. a. salim.
the empirical commit frequency distribution of open source projects .
in international symposium on open collaboration wikisym .
acm pp.
.