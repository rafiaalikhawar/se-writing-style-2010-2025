search based synthesis of probabilistic models for quality of service software engineering simos gerasimou dept.
of computer science university of y ork uk simos cs.york.ac.ukgiordano tamburrelli dept.
of computer sciences vrije universiteit netherlands g.tamburrelli vu.nlradu calinescu dept.
of computer science university of y ork uk radu.calinescu york.ac.uk abstract the formal verification of finite state probabilistic models supports the engineering of software with strict quality ofservice qos requirements.
however its use in software design is currently a tedious process of manual multiobjective optimisation.
software designers must build and verify probabilistic models for numerous alternative architectures and instantiations of the system parameters.
when successful they end up with feasible but often suboptimal models.
the evochecker search based software engineering approach and tool introduced in our paper employ multiobjective optimisation genetic algorithms to automate this process and considerably improve its outcome.
we evaluate evochecker for six variants of two software systems from the domains of dynamic power management and foreign exchange trading.
these systems are characterised by different types of design parameters and qos requirements and their design spaces comprise between 2e and .22e relevant alternative designs.
our results provide strong evidence that evochecker significantly outperforms the current practice and yields actionable insights for software designers.
.
introduction the design of modern software systems requires tools capable of assessing the quality and dependability of the solutio n under design as early as possible in the engineering process.
the late discovery of defects leads to suboptimal operation of the delivered systems high maintenance costs and negative impact on their users .
this is particularly relevant for business critical and safety critical applicatio ns where failures may cause financial loss or loss of human life.
model checking mc is among the most effective means for developing software for critical applications .
given a finite state transition model of a concurrent system mc automatically verifies if the model satisfies requirements formally expressed in propositional temporal logic.
mc can be exploited during system design to devise models that meet the requirements of a software system and are thenused as a basis for its implementation.
alternatively software engineers can build models of existing systems and use mc to check their compliance with requirements.
furthermore a variant of mc called probabilistic model checking can verify if software systems meet their reliability performance and other quality of service qos requirements .
probabilistic mc verifies models with state transitions annotated by probabilities or transition rates e.g.
discrete and continuous time markov chains and markov decision processes and operates with qos requirements specified in probabilistic variants of temporal logics.
this paper is concerned with the use of probabilistic mc at design time to identify models that satisfy the qos requirements of a software system.
currently this is a tedious trialand error process in which software designers must build and verify probabilistic models for numerous alternative architectures and instantiations of the system parameters.
even when this manual attempt at multiobjective optimisation is successful the models produced are often suboptimal in terms of their tradeoffs between reliability performance cost and other qos requirements.
the evochecker search based software engineering approach introduced in our paper automates this process and considerably improves its outcome.
to this end evochecker synthesises a a set of probabilisti c models that closely approximates the pareto optimal model set associated with the qos requirements of a software system and b the corresponding approximate qos pareto front.
this provides insight into the tradeoffs between multiple qos requirements enabling software designers to make informed decisions about the architecture and parameters of their systems.
to achieve this evochecker employs established multiobjective optimisation genetic algorithms mogas and a fitness function that captures the satisfaction of the qos requirements.
evochecker uses as input aprobabilistic model template that encodes alternative architectures and parameter ranges for the system a set of qos requirements specifying both constraints e.g.
at least of the requests must be processed within 200ms and optimisation objectives e.g.
the system should operate with minimal energy consumption .
evochecker uses the probabilistic model checker prism for its verification steps.
accordingly the probabilistic model template is expressed in an extension of the prism high level modelling language and evochecker handles all types of probabilistic models and probabilistic temporal logics supported by prism and shown in table .the main contributions of our paper include .
the evochecker extension of the prism modelling language and the evochecker search based model synthesis approach which we describe in section and we illustrate using a running example introduced in section .
.
the definition of the probabilistic model synthesis problem section .
.
.
the open source evochecker tool presented in section which we make freely available on our project webpage.
.
an extensive evaluation of the evochecker approach and prototype tool in two case studies drawn from different application domains which we summarise in section .
our evaluation based on established pareto front quality indicators i.e.
unary epsilon hypervolume and inverted generational distance shows that evochecker significantly outperforms the current trial and error practice makes effective use of state of the art mogas such as nsga ii spea2 and mocell and provides actionable insights for software designers.
to the best of our knowledge evochecker is the first approach that uses search based software engineering to synthesise approximate pareto optimal sets of probabilistic mod els for the qos requirements of software systems.
the only related work we are aware of is discussed in section and belongs to the area of model repair .
however model repair for probabilistic systems focuses on modifying an existing probabilistic model only at transition probability le vel and only to satisfy a single temporal logic property that is violated by the original model.
in contrast evochecker handles multiple qos requirements and uses multiobjective optimisation to derive an approximate pareto optimal set of probabilistic models and its associated pareto front starting from a probabilistic model template.
.
running example we will illustrate the evochecker components and operation using a software controlled dynamic power management dpm system adapted from .
as shown in fig.
the system consists of a service provider that handles requests generated by a service requester and stored in two request queues of different priorities.
the service provider has four states associated with different power usage i.e.
busy idle standby andsleep.
fig.
depicts the power usage of each state in watts the possible transitions betwee n states and the energy consumed by each transitions in joules .
these values are taken from and correspond to a fujitsu disk drive.
table types of models supported by evochecker type of qos requirement probabilistic model specification logic discrete time markov chains pctla l t lb p c t l c continuous time markov chains csld markov decision processes pctla l t lb p c t l c probabilistic automata pctla l t lb p c t l c probabilistic timed automata pctla aprobabilistic computation tree logic blinear temporal logic cpctl is a superset of pctl and ltl dcontinuous stochastic logic power manager high priority request queue low priority request queuebusy .15w idle .95w standby .35wsleep .13wservice .1j0.006j7j .067j 2j .001j0j 0jstate informationstate transition commands ql qmax lqh qmax hdynamic power management system provider service requester figure dynamic power management system table average service provider transition times state average state average transition time s transition time s idle standby .
standby idle .
idle sleep .
sleep idle .
standby sleep .
sleep standby .
when the service provider is in the busy state it processes requests as follows.
if the high priority queue contains qh requests then a high priority request is processed.
otherwise if the low priority queue contains requests i.e.
if ql a low priority request is handled.
after handling the last request i.e.
when both queues become empty the service provider automatically transitions to the idlestate.
the transitions from idletobusy are also automatic and occur whenever the empty queue dpm system receives a new request.
in contrast all the other transitions are controlled by a software power manager that aims to reduce power use while maintaining an acceptable service level for the system.
we use the real values from for the state transition times and the request service rate i.e.
125s and we assume average arrival rates of .05s 1and .15s 1for the high priority and low priority requests respectively.
finally suppose that the dpm system designer must select .
the capacity of the request queues qmax handqmax l .
one of two alternative power managers described later .
the parameters of the selected power manager such that the qos requirements in table are satisfied.
table qos requirements for the dpm system id description type r1the steady state utilisation of the highpriority queue should be less than constraint r2the steady state utilisation of the lowpriority queue should be less than constraint r3the system should operate with minimum steady state power utilisationobjective r4the number of requests lost at the steady state should be minimisedobjective r5the capacity of both queues should minimised objective3.
evochecker .
modelling language evochecker probabilistic model templates are specified in an extended version of the prism high level modelling language .
this language is based on the reactive modules formalism which describes a system as the parallel composition of a set of modules .
the state of a module is encoded by a set of finite range local variables and its state transitions are defined by probabilistic guarded commands that change these variables and have the general form guard e update ... en update n in this command guard is a boolean expression over all the variables in the model.
if guard evaluates to true the arithmetic expression ei i n gives the probability for discrete time models or rate for continuous time models with which the update ichange of the module variables occurs.
the action is optional when present it forces all modules comprising commands with this action to perform one of these commands simultaneously i.e.
to synchronise .
for a detailed description of the prism modelling language we refer the reader to the prism manual available at .
example .
fig.
shows the continuous time markov chain ctmc model of the dynamic power management system from our running example.
the model comprises a module for each request queue a serviceprovider module and a module for one of the two power managers considered during the design of the system.
the local variables from the high priority and low priority request queue modules record the number of requests from the two queues qh andql and the serviceprovider local variable spencodes the state of the service provider.
the queue modules and serviceprovider synchronise through the actions requesth l and serveh l which reflect requests arriving into the queues and being served respectively.
the service provider switches between its busy andidlestates automatically lines and and can also perform the state transitions from table aiming to switch to lower power states when both request queues are empty i.e.
qh ql and back towards the busy state otherwise lines .
however these transitions are controlled by the power manager through the synchronisation of all serviceprovider andpowermanager commands with common actions.
for example lines have false guards and thus disable the transitions between idle andsleep the transition between idle andstandby is always enabled due to the true guard in line and constraints are placed on all other transitions.
software designers use probabilistic models to manually explore an often very large design space comprising alternative module implementations parameter values and transition probabilities.
evochecker extends the prism modelling language with three constructs that support the specification of all these design alternatives within a probabilistic model template whose instantiations correspond to possible system designs.
the three constructs are defined below.
.evolvable parameters.
evochecker uses the syntax evolve int param evolve double param to declare model parameters of type int and double respectively and acceptable ranges for them.
these param evolve module powermanager 57evolve int qmaxh evolve int qmaxl evolve distribution x evolve distribution y ctmc const int qmaxh module highpriorityrequestqueue qh init0 qh qmaxh .
qh qh qh qmaxh .
qh qh qh qh qh endmodule const int qmaxl module lowpriorityrequestqueue ql init0 ql qmaxl .
ql ql ql qmaxl .
ql ql ql ql ql endmodule module serviceprovider sp init0 busy idle standby sleep process requests with rate 125s sp qh q h q l sp sp qh ql sp sp qh ql sp sp qh ql sp automatic transition from idle to busy sp sp sp!
sp sp sp sp sp!
sp sp transitions controlled by the power manager sp qh ql .
sp sp qh ql .
sp sp qh ql .
sp sp qh ql .
sp sp .
sp sp .
sp endmodule const double x1 .
const double x2 .
const double y1 .
const double y2 .
module powermanager p init0 loop sleep to standby disable idle sleep transitions false p p false p p deactivate true p p always enabled qh ql p p activate qh ql p p qh qh ql p p p p probabilistic control of sleep to standby transition ql qh sp x1 p x2 p !
ql qh sp p p qh ql sp y1 p y2 p !
qh ql sp p p endmodulefigure ctmc model of the dpm system x zrepresent evochecker extensions of the prism modelling language eters can be used in any field of command other than action just like constant model parameters declared using const int and const double from the original language.
.evolvable probability distributions.
the syntax evolve distribution dist ... where for all i n is used to declare an n element discrete probability distribution and ranges for the nprobabilities of the distribution.
the name of the distribution can then be used instead of expressions e1 e2 .
.
.
enfrom an n element command .
.evolvable modules.
evochecker uses the syntax evolve module mod implementation1endmodule ... evolve module mod implementationnendmodule to define n alternative implementations of a module.
the role of the three evochecker constructs is described by the following definitions.
definition .
a valid prism probabilistic model augmented with a set of evochecker constructs is called aprobabilistic model template .
definition .
a probabilistic model is an instance of a probabilistic model template tif and only if it can obtained from tusing the following transformations each evolvable parameter is replaced by a const int param val o r const double param val declaration depending on the type of the parameter where val min .
.
.
max orval respectively.
each evolvable probability distribution is removed and the noccurrences of its name instead of expressions e1 .
.
.
enof a command are replaced with values from the ranges .
.
.
respectively such that the sum of the nvalues is .
.
each set of evolvable modules with the same name is replaced with a single element from the set from which the keyword evolve was removed.
definition .
the set of all probabilistic models that are instances of a probabilistic model template tis called thedesign space oft and is denoted dst.
example .
fig.
illustrates the three evochecker constructs used to transform the ctmc model from our running example into a probabilistic model template.
the replacement of the elements from the dashed rectangles with those from the continuous rectangles shows how xtwo evolvable parameters are used to specify the sizes of the two request queues ytwo evolvable distributions are used to specify the transition probabilities from lines and of the power manager and zthe module powermanager is declared one of several possible implementations of the power manager.
note that at least one additional implementation of this module needs to be provided in a valid probabilistic model template due to space constraints the second implementation is not included here but we make it available at .
.
quality of service requirements evochecker supports two types of qos requirements constraints andoptimisation objectives .
both types refer to qosattributes of the system under design such as response time throughput reliability or cost.
constraints define bounds for the acceptable values of these attributes while optimisation objectives specify qos attributes that should be minimised or maximised subject to all constraints being satisfied .
without loss of generality we will assume that the latter qos attributes should be minimised in the remainder of the paper.
formally a software system considered by evochecker needs to satisfy n1 constraints of the form rc i attr i triangleleftibound i i n1 andn2 optimisation objectives of the form ro i minimise attr i n1 i n1 n2 where trianglelefti andbound i rfor all i n1 andattr attr ... attr n1 n2 rrepresent n1 n2qos attributes of the system.
these qos attributes are formally expressed in the probabilistic temporal logics shown earlier in table .
given a probabilistic model mof a possible system design and the probabilistic temporal logic formulae 1 2 .
.
.
n1 n2of the qos attributes the probabilistic model checker prism automatically establishes the value of the qos attributes corresponding to this design i.e.
attr i m pmc m i i n1 n2.
due to space constraints we do not present the probabilistic temporal logics supported by evochecker