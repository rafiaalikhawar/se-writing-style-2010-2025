hey you have given me too many knobs!
understanding and dealing with over designed configuratio n in system software tianyin xu long jin xuepeng fan yuanyuan zhou shankar pasupathy and rukma talwadker university of california san diego usa huazhong univ.
of science technology china netapp usa tixu longjin xuf001 yyzhou cs.ucsd.edu shankar.pasupathy rukma.talwadker netapp.com abstract configuration problems are not only prevalent but also seve rely impair the reliability of today s system software.
one fund amental reason is the ever increasing complexity of configuration reflected by the large number of configuration parameters knobs .
w ith hundreds of knobs configuring system software to ensure hig h reliability and performance becomes a daunting error prone task.
this paper makes a first step in understanding a fundamental question of configuration design do users really need so many knobs?
to provide the quantitatively answer we study the configuration settings of real world users including thousan ds of customers of a commercial storage system storage a and hund reds of users of two widely used open source system software pro jects.
our study reveals a series of interesting findings to motivat e software architects and developers to be more cautious and disci plined in configuration design.
motivated by these findings we prov ide a few concrete practical guidelines which can significantl y reduce the configuration space.
take storage a as an example the gu idelines can remove .
of its parameters and simplify .
o f the remaining ones with little impact on existing users.
als o we study the existing configuration navigation methods in the c ontext of too many knobs to understand their effectiveness in dea ling with the over designed configuration and to provide practi ces for building navigation support in system software.
categories and subject descriptors d. .
methodologies general terms design human factors reliability keywords configuration complexity simplification navigation parameter difficulty error .
introduction .
motivation in recent years configuration problems have drawn tremendo us attention for their increasing prevalence and severity.
fo r example yin et al.
reported that configuration issues accounted for of7 storage a number of parameters rele ase t ime .
.
.
.
.
.
.
.
.
.
.
.
.
.
mysql number of parameters rele ase t ime .
.
.
.
.
.
.
.
.
.
4number of parameters rele ase t imeapa che .
.
.
.
.
.
.
.0had o o p number of parameters rele ase t ime mapred uc e h df s figure the increasing number of configuration parameters with software evolution.
storage a is a commercial storage syst em from a major storage company in the u.s. all the customer support cases in a major storage company in the u.s. and were the most significant contributor among a ll the high severity cases .
rabkin and katz reported that configuration issues were the dominant source of support cost in ha doop clusters based on data from cloudera inc. in terms of both the number of support cases and the amount of supporting time .
moreover configuration errors the after effects of config uration difficulties have become one of the major causes of system fa ilures.
barroso and h lzle reported that configuration errors were the second major cause of service level disruptions at one of go ogle s main services .
recently a number of outages of interne t and cloud services including google linkedin microsoft azu re and amazon ec2 were caused by configuration errors .
one fundamental reason for today s prevalent configuration issues is the ever increasing complexity of configuration es pecially in system software.
this is reflected by the large and still in creasing number of configuration parameters knobs as well as var ious configuration constraints and consistency requirements known as complexity of interaction and tightness of cou pling in human error studies .
for example mysql .
data base server has configuration parameters of them are not w ith simple data types e.g.
boolean or enumerative but rather more complex ones.
these parameters control different buffer si zes timeouts resource limits etc.
setting them correctly require s domainpermission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse august september bergamo italy c acm.
... .
307configuration parameter dfs.namenode .tolerate.heartbeat.multiplier developers discussion since we are not sure what is a good choice how abou t making it configurable?
we should add a configuration option for it.
even if it s unlikely to change if someone does want to change it they ll thank us that they don t have to change the code recompile to do so.
real world usage no usage found by searching the entire mailing lists and google.
no usage reported in a survey of hadoop users in ucsd.
figure a real world example of less useful configuration parameters from hdfs.
this parameter is specific to internal system implementation and seldom set by any user.
such parameters should not be exposed to users at least not to the common users .
specific knowledge and experience.
similarly apache http s erver .
has more than parameters across all the modules.
more over many of these parameters have dependencies and correlation s which further worsens the situation.
such high complex ity level makes system configuration a daunting error prone ta sk we discuss the cost of such complexity in .
.
fig.
depicts how the number of configuration parameters increases with software evolution of one commercial storage s ystem and three popular open source server software projects .
take hadoop mapreduce as an example its first release in apr.
had only parameters but the release in oct. already h ad an increase of more than nine times.
in accordance with t his trend the configuration space will continue to increase.
th e situation is further worsened by the growing number of machines that replicate multiple software instances in data centers and the increasing cost of human resources for managing them.
typically a configuration parameter is introduced when the developers want to provide flexibility for users.
as one type of system interfaces configuration needs to be balanced between flexi bility and simplicity.
this raises the question if it is worth satis fying a few advanced users or even imaginary users while confusing the majority of ordinary users.
often we software developers seem to be biased towards advanced users instead of focusing on the ease of use.
fig.
shows a real world example where the hadoo p developers exposed a parameter in case some advanced users w ant it.
however since the parameter is specific to the internal s ystem implementation few user has set it.
it is worth noting that many configuration parameters are add ed with new software versions released but are removed at a muc h slower rate.
the slow rate is probably due to backward compat ibility concerns or developers lack of sufficient knowledge or confidence in removing parameters introduced by someone else.
ta ble shows the number of parameter changes during software evolu tion.
the parameter removal rate is almost 7x slower than the rate o f addition storage a has a faster rate than the open source sof tware because its release cycles are longer .
following such tren ds we will be presented with more configuration parameters in the f uture releases unless we take serious actions to simplify them.
many desktop and mobile applications adopt gui based methods such as preference menus to reduce user perceived c omplexity caused by large preference space e.g.
colors fon ts and layouts .
unfortunately due to the scalability and access ibility issues the primary and de facto configuration interfaces of system software are text files e.g.
in xml and .ini formats .
gu is are not widely used for system software configuration making gui based methods hard to apply.
in fact some software developers have already sensed that t oday s configuration is overly complex and should be simplifie d totable the average number of added renamed and removed configuration parameters per version release.
the numbers are o btained from the official user manuals.
software addition renaming removal storage a .
.
.
apache .
.
.
mysql .
.
.
hadoop .
.
.
some degree.
for example rob pike the developer of unix and the go programming language recently commented there is too much configuration.
there are too many options.
there are too many dot files.
stuff should just work.
.
our contribution before jumping onto the simplification track of configuratio n we need to answer a fundamental question do users really need so many knobs?
after all configuration knobs are introduced for the purpose of providing flexibility for users ?
however p roviding an authoritative answer to this question would require l engthy expensive and prohibitively difficult user studies.
this p aper makes a first step in providing quantitative answers by studying th e configuration settings of many thousands of real users of a commercial system from a major storage company in the u.s. and also the settings of hundreds of users of two widely used open source se rver software projects.
in addition we study user reported configuration issues from both the commercial and open source sof tware in order to understand the users configuration problems ca used by the complexity of current configuration design in the real w orld.
contribution understanding users configuration settin gs in the field specially this paper studies and answers the following que stions about configuration in system software.
do users really need so many knobs?
our study shows that only a small percentage .
.
of configuration parameters are set by the majority of users in the studied sys tems while a significant percentage up to .
of parameters ar e seldom set.
these results provide quantitative evidence that w e software developers are providing more knobs than what the majo rity of users need or know how to set.
many knobs are neither necessary nor worthwhile they make configuration more complex fo r common users but produce little benefit as user desired flex ibility.
should we offer more choices in setting a knob?
software developers often use more flexible data types such as numer ic types instead of simple boolean or enumerative ones for pa rameters in order to give users more flexibility.
however our s tudy shows that users do not take full advantage of such flexibilit y. a significant percentage up to .
of numeric parameters h ave no more than five distinct settings among all users settings .
using simpler enumerative data types would be sufficient.
simila rly for enumerative typed parameters with many options only two t o three options are actually used.
simplifying these settings can m ake configuration easier without sacrificing much flexibility.
what is the cost of too many knobs?
one may argue that most parameters have default values also users can learn a bout parameters by referring to user manuals.
thus there is no real harm in introducing a large number of configuration parameters or providing many options for parameters.
however too many knobs do come with a cost.
our study shows that .
.
of users 308configuration issues calls to the technical support center and questions posted on forums are about their difficulties in findin g or setting the correct parameters to achieve the desired system be havior.
too many knobs also prevents users from understanding every parameter thoroughly and examining its settings carefu lly.
it is indirectly reflected by many users incorrectly keeping the default values for parameters that need to be set based on the runtime environments.
our study on real world configuration errors r eveals that a significant percentage .
.
of them occurred because the settings were kept as default values incorrectly which failed to meet the constraints of runtime environments.
not e these parameters are not the rarely used ones reported in finding .
what kinds of knobs are most utilized?
parameters with explicit external impact are set by more users compared with t hose specific to internal system implementation.
the reason is in tuitive.
software developers especially open source developers often assume too much from users .
however even though the code i s open sourced it does not mean that users have time or the cap ability to read and understand the code.
contribution dealing with over designed configuration c omplexity simplification and navigation to deal with the over designed configuration complexity we further study the effectiveness of two approaches simplifyin g configuration design and navigating configuration space.
how many configurations can we simplify?
motivated by our study we provide a set of concrete practical guidelines fo r configuration simplification including reducing unnecessary pa rameters and simplifying parameter settings.
we demonstrate that th e configurations of the studied systems can be significantly simpl ified with little impact on existing users using these guideline s. take storage a as an example we can remove .
of its configuration parameters and further simplify .
of the remainin g ones.
how effective is configuration navigation?
many software systems rely on the navigation features e.g.
built in uti lities tied in the manuals searching boxes linked to external search engi nes to help users find the configuration parameters and settings.
we study the effectiveness of the existing navigation methods incl uding keyword search google search and nlp based navigation .
the study provides useful practices and design guidances for bu ilding navigation support for configurations of system software.
.
methodology .
software we study four system software projects including the softw are of one commercial storage system and three open source syst em software as shown in table .
the commercial system storag ea is from a major storage company in the u.s. it runs distribu ted storage software to manage network attached storage devic es.
the open source software includes apache http server mysql da tabase server and hadoop including mapreduce and hdfs .
all these software projects are mature with years of development history and widely used representing different type s of system software storage web database and data processing .
note that all the studied software projects fall into the cat egory ofsystem software which is used to provide services for client side application software e.g.
web browser file manager .
the users of system software are mostly system administrators and ope rators who usually have higher level of technical background and sk ills than ordinary end users.
this is particularly true for the co mmercialtable the system software studied in this paper.
software proprietary lang.
dev.
his.
knobs storage a commercial years apache open source c years mysql open source c years hadoop open source java years table configuration setting datasets used in this paper.
note the numbers of parameters for apache and mysql are different fro m those in table as we only study the common parameters of the selected versions and exclude parameters of specific os modul es .
.
software version parameters system instances storage a a.b.c many thousands apache .
.x mysql .x storage systems which are mainly purchased and used by enter prise customers instead of individuals .
.
configuration settings of real users we collect and study the configuration settings of real users of storage a apache and mysql.
the hadoop dataset we collect ed is not large enough to be statistically significant.
thus we exclude hadoop from the first part of our study on configuration settin gs.
table summarizes the configuration setting datasets.
the dataset of storage a includes the configuration setting s of all the customers using the same version of storage a anonymized as a.b.c .
it contains many thousands of customers setti ngs spanning one and a half years from to .
the d ata was collected by a support system which recorded the custome rs configuration settings on a weekly basis.
in our study we use each customer s most recent configuration settings.
note that th is dataset provides the exhaustive ground truth of the users configuration settings of storage a version a.b.c in the field and is used as the primary data source in our study.
as the complimentary data