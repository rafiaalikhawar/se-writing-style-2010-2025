can automated pull requests encourage software developers to upgrade out of date dependencies?
samim mirhosseini north carolina state university raleigh nc usa smirhos ncsu.educhris parnin north carolina state university raleigh nc usa cjparnin ncsu.edu abstract developers neglect to update legacy software dependencies resulting in buggy and insecure software.
one explanation for this neglect is the difficulty of constantly checking for the availability of new software updates verifying their safety and addressing any migration efforts needed when upgrading a dependency.
emerging tools attempt to address this problem by introducing automated pull requests and project badges to inform the developer of stale dependencies.
to understand whether these tools actually help developers we analyzed github projects that used these notification mechanisms to identify any change in upgrade behavior.
our results find that on average projects that use pull request notifications upgraded .6x as often as projects that did not use any tools.
badge notifications were slightly less effective users upgraded .4x more frequently.
unfortunately although pull request notifications are useful developers are often overwhelmed by notifications only a third of pull requests were actually merged.
through a survey developers indicated that their most significant concerns are breaking changes understanding the implications of changes and migration effort.
the implications of our work suggests ways in which notifications can be improved to better align with developers expectations and the need for new mechanisms to reduce notification fatigue and improve confidence in automated pull requests.
i. i ntroduction developers are often occupied by the primary task of writing new features or fixing known defects and as a result often ignore or delay important but secondary preventive maintenance tasks .
one such task updating software dependencies includes upgrading the versions of the many libraries tools and packages that a program depends on .
the consequences of neglecting to update out of date dependencies can be severe as dependencies can suffer from numerous security issues and buggy features .
for instance using components with known vulnerabilities is listed as a top application security risk in by owasp.
unfortunately updating dependencies can be a time consuming task large parts of code may need to be verified and migrated to make use of new interfaces and changed functionality before using an updated library.
for example updating the mongodb driver for node.js from .
.x to .
.x affected the way order by parameters are used in thesort function.
previously parameters were allowed to be specified as list of objects but in the newer version list of lists must be provided .
upgrading a version of alibrary that contains incompatibilities in data structures signature changes to api calls or behavior breaking changes can result in additional effort to address these changes.
if a developer fails to understand the nature of a dependency change or perform insufficient testing they can introduce undetected faults in code.
such factors may cause a developer to become reluctant to update dependencies.
but if they delay updating code too long they may be locked out of being able to use important new features only available in new versions as it becomes more and more difficult to adapt their code.
an important challenge is to convince developers that they should upgrade despite all the associated difficulties and risks.
one way to convince developers they should update is to provide incentives that encourage them to update.
for example badges are images that can be displayed on a github project s profile page.
external tools can update the images to reflect the status of the project such as build status or code coverage.
a popular tool david dm1 will check if a project s dependency is out of date and display a red version of the badge if it is .
in the context of open source systems these badges can signal to potential contributors or users that the project uses practices such as continuous integration ci and keeping its dependencies updated.
given the importance of these signals in perceived quality project owners have a high incentive to maintain green badges.
another way to encourage developers to upgrade is to reduce the risk and effort involved through automated pull requests.
for example several types of software engineering bots have emerged as automated mechanisms that can help developers automate routine tasks such as report code coverage.
a popular tool greenkeeper2 is a bot that can help keep a project s dependencies up to date by automatically updating versions of a dependency in a package management file such as maven pom.xml or npm package.json and creating a pull request with the change.
using another bot such as travisbot3 the automated pull request can further trigger a continuous integration build and verify that no breaking changes are identified by the passing test suite.
with the combined contributions of these bots a developer may be .
c ieeease urbana champaign il usa technical research84 authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
able to gain confidence in performing an upgrade and more quickly integrate a suggested upgrade.
despite the importance of dependency management there is little empirical evidence supporting the effectiveness of using mechanisms such as badges and automated pull requests.
badges support awareness and create pressure but do not provide actionable results.
automated pull requests support actionable results but factors such as notification fatigue and insufficient test coverage may reduce the effectiveness of these requests.
in this paper we analysis github projects split into projects that exclusively use david dm badges greenkeeper automated pull requests or a baseline of neither.
we then survey developers on issues related to dependency management and their experience using dependency management tools and greenkeeper.
we find that projects that use automated pull requests upgrade dependencies .6x over baseline projects and projects with badges upgrade .4x over baseline projects.
the speed of updates is also faster for automated pull requests .31x over badge .33x over baseline .
further specific dependencies and their versions such as mongodb version .
.
.
.
are more likely to be at their highest version .
.
in projects using automated pull requests.
these finding are interesting in light of results that find social factors tend to outperform technical factors in predicting time to evaluate a pull request .
there were also several surprising results.
for automated pull requests only were merged compared with of typical pull requests merged within days .
further several merged automated pull requests were often immediately downgraded back after days.
for projects using continuous integration to automatically build code in a pull request the merge rate was improved but only marginally so merged without ci and merged with ci .
finally there is evidence that developers suspicion of breaking changes is not unfounded of builds fail when changing a dependency version.
this evidence provides guidance both for developers establishing risk for performing an upgrade and for researchers working on automated api migration .
finally developers provided several insights into their practices and behaviors associated with dependency management.
developers were mixed in their preference for passive mechanisms such as dashboards and badges versus automated mechanisms.
developers also reported several concerns related to breaking changes and understanding the implications of changes before merging.
this suggests that automated pull requests need mechanisms for improving arguments used to convince developers about the benefits offered by a particular upgrade and improve confidence in the safety of the upgrade.
this paper makes the following contributions the first empirical study that compares the stimulating effects of automated pull requests and social pressure created by badges on updating dependencies.
a qualitative analysis of developers experiences with using automated pull requests badges and dependency management strategies.
implications for improving the design of automated pull requests for software engineering tasks.
ii.
m otivating example vera maintains a popular open source library that uses over software dependencies but because of a full time job and other commitments she only has time once a month to make improvements to the software.
recently a developer created a new issue in which he complained that vera s project used many old dependencies that was causing him problems in upgrading to a new version of nodejs.
soon after many other developers piled on complaining about several security vulnerabilities that were present in these dependencies as well.
distraught about all the negative feedback vera wants to be more proactive in managing her software dependencies but she does not know where to start.
fig.
.
automated pull request created by greenkeeper.io one developer recommends she try out greenkeeper.io.
he explains how it works whenever a new version is available for a package a bot makes a pull request to a project s repo.
in the pull request the package management file package.json is changed to have the new version e.g.
.
.
.
.
an additional information is included in the comment of the pull request.
since vera is using a continuous integration server travis ci to run on pull requests then the pull request will trigger a build and testing step in order to verify if the version change will break her code.
if vera wants to upgrade she simply merges the pull request otherwise she closes the pull request to ignore the recommendation.
vera is interested in adopting greenkeeper.io but worries that it might cause too many distractions and that she would eventually just ignore the notifications.
another developer suggested that she simply use daviddm.
the developer argues that because it is just a simple badge displayed in her project s readme.md she can check the site occasionally to see if authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
any dependencies should be upgraded.
further anyone visiting her github project would see that her project is using out ofdate dependencies which creates additional social pressure.
if more information is needed she can visit the site and see a dashboard describing out of date and insecure dependencies.
fig.
.
badges displayed on a github project s profile page vera likes the simplicity of daviddm but she worries that without any proactive reminder she might forget to check the site and worse she still needs to manually verify if a new version will work with her library.
vera wishes there was some evidence that would demonstrate the effectiveness of the different approaches.
further she would like to catalogue the strengths and weaknesses of each tool in order to design a better dependency management tool as another side project.
iii.
m ethodology to learn whether dependency management tools help developer and if they do to what extent we extracted data from five sources i github s public dataset on google bigquery which is the complete content of public repositories on github ii github archive dataset on google bigquery which is a project that collects all the public events on github iii travis ci api iv github api and v git history of public projects on github.
we will use this collected data to answer the following research questions a. research questions rq1.
how does the availability of a dependency management tool influence update behavior?
rq2.
how often are projects using the latest versions of dependencies?
rq3.
how effective are automated pull requests?
rq4.
how do developers perceive out of date dependencies and make dependency management decisions?
b. project selection we select projects from the node.js npm ecosystem which has been previously studied in other dependency management research .
npm contains over packages currently the largest package registry in the world4 .
npm packages have far more transitive dependencies than cran or rubygems packages meaning there is more risk in breaking changes.
given the dynamic nature of javascript and fast growing ecosystem the problem of maintaining and updating npm packages is particularly difficult as confirmed top concern by a recent survey of node.js developers .
collectively these factors provide a strong motivation for understanding how to improve this problem.
to be able to compare the effect of different dependency management tools we defined three groups of projects control group which does not use any dependency management tool pull request notification group which contains projects that used greenkeeper.io and badge notification group which contains projects that used daviddm.
obtaining pull request group we used github s public dataset to select public javascript repositories on github.
github archive dataset contains all of events on public repositories on github.
we used a query to search for pullrequestevents in a repository that were created by greenkeeper.io.
we then selected projects that have received at least one pull request from greenkeeper.io to be included in the pull request group.
obtaining badge group to display a badge for a github project an image element can be added to a project file such as in the readme.md embedding an url image obtained from daviddm5.
a project can get a url from badge by registering their project.
using google bigquery we could search the github archive dataset for javascript projects that contained a badge in the readme.md or other projects files.
we matched urls that contained