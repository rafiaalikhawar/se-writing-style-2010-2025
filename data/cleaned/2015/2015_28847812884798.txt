exploring language support for immutability michael coblenz joshua sunshine jonathan aldrich brad myers carnegie mellon university forbes avenue pittsburgh pa usa mcoblenz sunshine aldrich bam cs.cmu.edusam weber forrest shull software engineering institute fifth avenue pittsburgh pa usa samweber cert.org fjshull sei.cmu.edu abstract programming languages can restrict state change by preventing it entirely immutability or by restricting which clients may modify state read only restrictions .
the bene ts of immutability and read only restrictions in software structures have been long argued by practicing software engineers researchers and programming language designers.
however there are many proposals for language mechanisms for restricting state change with a remarkable diversity of techniques and goals and there is little empirical data regarding what practicing software engineers want in their tools and what would bene t them.
we systematized the large collection of techniques used by programming languages to help programmers prevent undesired changes in state.
we interviewed expert software engineers to discover their expectations and requirements and found that important requirements such as expressing immutability constraints were not re ected in features available in the languages participants used.
the interview results informed our design of a new language extension for specifying immutability in java.
through an iterative participatory design process we created a tool that re ects requirements from both our interviews and the research literature.
ccs concepts software and its engineering !language features software development techniques keywords programming language design programming language usability immutability mutability programmer productivity empirical studies of programmers .
introduction many designers of apis and programming languages recommend using immutability in order to prevent bugs and permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
icse may austin tx usa c acm.
isbn .
.
.
.
aws.
for example bloch devoted a section of his book e ective java to minimizing mutability.
he cited the following bene ts of immutability simple state management thread safety and safe and e cient sharing.
oracle s secure coding guidelines for java se states that immutability aids security.
microsoft s framework design guidelines recommends against de ning mutable value types in part because they are passed by copy and programmers might write code that modi es copies but should instead modify the original structure .
some programming languages such as rust take these recommendations into account by carefully managing mutability.
the functional programming language community is particularly concerned with state management producing languages such as haskell which segregates code that manipulates state from code that does not.
proponents of functional languages argue that avoiding mutable data structures facilitates reasoning about behavior of programs because one can reason equationally about behavior rather than needing to know about the global or even local program state .
there are questions however about what immutability should mean and how to express immutability in programming languages as evidenced by the myriad of di erent kinds of support that tools provide and the lack of empirical data to justify speci c design choices.
some languages support programmer provided speci cations of immutability expressing that certain data structures cannot be changed or read only restriction expressing that certain