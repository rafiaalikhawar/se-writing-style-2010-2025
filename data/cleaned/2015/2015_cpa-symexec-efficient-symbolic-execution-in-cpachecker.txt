cpa symexec efficient symbolic execution in cpachecker dirk beyer lmu munich germanythomas lemberger lmu munich germany abstract we present cpa symexec a tool for symbolic execution that is implementedintheopen source configurableverificationframework cpachecker .
our implementation automatically detects which symbolicfactstotrack inordertoobtainasmallsetofconstraintsthat arenecessarytodecidereachabilityofaprogramareaofinterest.
cpa symexec isbasedonabstractionandcounterexample guidedabstraction refinement cegar and uses a constraint interpolation approachtodetectsymbolicfacts.weshowthatourimplementation can better mitigate the path explosion problem than symbolic executionwithoutabstraction bycomparingtheperformanceto the state of the art klee based symbolic execution engine symbioticand tokleeitself.
for the experiments we use two kinds of analysis tasks one for finding an executable path to a specific location of interest e.g.
if a test vector is desired to show thata certain behavior occurs and one for confirming that no executablepathtoaspecificlocationexists e.g.
ifitisdesiredtoshow that a certain behavior never occurs .
cpa symexec is released under the apache license and available inclusive source code at a demonstration video is available at ccs concepts generalandreference verification softwareanditsengineering formalmethods formalsoftwareverification keywords symbolicexecution programanalysis test casegeneration acm reference format dirk beyer and thomas lemberger.
.
cpa symexec efficient symbolicexecutionincpachecker.in proceedings of the 33rd acm ieee international conference on automated software engineering ase september montpellier france.
acm new york ny usa 4pages.
introduction symbolic execution hasimportantapplicationsintheareaof softwareverificationandtesting.manytechniquesrelyongenerating symbolic pathsthroughtheexecutiontreeofaprogram for example test casegeneration faultlocalization program repair and equivalencechecking .evenforsoftware permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acmmustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
ase september montpellier france association for computing machinery.
acm isbn ... .
approaches using symbolic execution are able to show remarkable results at the competition on software verification svcomp .symbolic executionisa staticprogramanalysisthat stores explicit values for variables whenever possible and if an explicitvalueisnotavailable anewsymbolicvalueisassignedtothe variableandusedasitsvalueinfurthercomputations.thisway the symbolicvalueispropagatedtootherprogramvariablesdepending ontheundeterminablevariable.wheneverasymbolicvalueoccurs in an assumption this assumption describes a constraint on the symbolicvaluefortheremainingprogrampath.symbolicexecution trackstheseconstraintsalongsidevariableassignmentstoreason aboutthefeasibilityofaprogrampathandtodeterminepossible concrete values for symbolic variable assignments.
additionally using symbolic values relationships between program variablescan be observed in a clear manner.
because of its high precision symbolic execution suffers in its original form from path explosion.
our symbolic execution engine cpa symexec is able to mitigate pathexplosionthrough abstraction withcegar .cegarcomputesthe precision thatisnecessaryforananalysis itstartswith an initial coarse precision and then iteratively refines the precision based on infeasible target paths that are found during the analysis.
the precision of cpa symexec in particular specifies for which variables the analysis tracks symbolic values and which constraintsareimportant.
cpa symexec computesaspecialinstantiation of craig interpolants from infeasible target paths that allows us to derive program variables and constraints that must be tracked .through this weoften findanabstractmodel forthe programthatisdetailedenoughtoreasonabouttheexecutability ofprogrampaths butstillcoarseenoughtoavoidpathexplosion.
cpa symexec is implemented in thesoftware verificationframeworkcpachecker whichoffersmanyabstractdomainsandverification algorithms is developed and maintained by over active international contributors from different institutions and is releasedunder the open source license apache .
modular design is a main objective of the project.
the framework provides many utilities that are useful for performing software analysis tasks after a run itprovidesdetailedstatisticsaboutitsdifferentmodules andtarget paths are made available in json and as xml witnesses .
for presentation purposes visualizations are available for the controlflow automaton cfa the abstract reachability graph arg and the target paths .
for a found target cpa symexec also returns the symbolic execution path to that target in a text file for further parsing in other tools as well as an exemplary concrete execution path.
in addition to this cpa symexec can also be used for test case generation based on condition coverage.
in addition to cegar cpa symexec uses several optimizations to speed up state exploration.
for example after every satisfiability check sat check of pathconstraints itstoresamodelfortheconstraintsandchecks authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france dirk beyer and thomas lemberger 1unsigned char a 2unsigned char b 3unsigned char c b 4unsigned char i 5while a if a else i 11if c b error tu tu tb b1 c b1 1u tu tb b1 c b1 1u tutb b1 c b1 1u tu tb b1 c b1 1u tu tb b1 c b1 1u tutb b1 c b1 1u tu tb b1 c b1 1u tutb b1 c b1 1u tb1 1 b1u tb b1 c b1 1u tb1 1 b1ua b c b i ra 100s r visualspacepa 100qs r s a r visualspacep qs i rc bs error figure1 exampleprogramwithsymbolicexecutiontreeof cpa symexec to illustrate the effect of abstraction whetheritstillholdsforsuccessivepathconstraints toavoidexpensive sat checks and it also uses that model to check whether anysymbolicvalueisconstrainedtoasingleconcretevalue.ifso itpermanently storesthe corresponding assignment andreplaces the symbolic value with the concrete value.
through this the number ofsymbolicvaluesinsatcheckscanbeminimized.asafurtheradvancement cpa symexec usesarandom weightedtraversalstrategy for state space exploration that is inspired by klee .
to show the maturity of our implementation we performed experiments on thousands of c programs from the largest available repository of c verification tasks2.
the results show that cpasymexeccancompetewithbothstate of the arttoolsforsymbolic execution of c programs kleeandsymbiotic.
example.
figure1shows the effect of using symbolic execution withcegar.
the special symbol in the c program top left in fig.
representsanon deterministicvalue.theargoftheprogram bottom fig.
illustrates the explored state space.
every rectangle represents an abstract state with the first line contain ing the variable assignments and the second line containing the tracked constraints.
assume we want to check whether the call to functionerrorcan be reached.
instead of tracking all assumptions and assignments that occur in the program and analyzing an exponentiallygrowing andeveninfinite numberofpathsduetothe non deterministic value of variable aand the if condition in the loop symbolic execution with cegaronly tracks the values of those variables that are necessary to prove the property namely b andc.
using this level of abstraction all possible program states of thelooparerepresentedbytheabstractstatesthatarecomputed duringthefirstiterationoftheloop.thedottedrectanglesrepresent abstract states at which the analysis stops because they are already covered by the computed state space.
the red bold rectangle in a a1 b b1 c b1 a1 100 b1 1 b1a b c b i r visualspacepa 100qs rc bs error a symbolic pathtrue a b c 0a b c b i r visualspacepa 100qs rc bs error b concrete path figure symbolic and concrete paths to the target thelowerrightisanabstractstatethatrepresentsafoundtarget due to overflow cf.
fig.
2b .
ifcpa symexec findsatarget itcreatesthesymbolicpath andaconcretepath thatleadtothattarget.thesepaths canbeusedforfurtheranalysistasks e.g.
validationofverification results or program repair.
in addition cpa symexec can create a compilable test to check reachability through execution.
contributions.
thetool cpa symexec contributesthefollowing support for the combination of abstraction refinement with symbolicexecutionbyextendingthepreviousimplementation to a mature symbolic execution engine.
availability of all configuration options existing in the cpachecker framework includingcombinationswithother abstract domains and analysis algorithms e.g.
pointer analysis or memory graphs .
optimizations e.g.
subset supersetcaching thatareconsidered state of the art and offered in klee .
violation witnesses and executable tests .
automatic test case generation also implemented in klee for condition coverage.
symbolictargetpathstosupportcomprehensionofprogram paths and for further use.
html basedreportstoviewandanalyzecontrol flowau tomata abstract reachability graphs and target paths in dependent from specific tools requires a standard web browser .
we show that our implementation is competitive against the stateof the art klee symbiotic inathoroughexperimentalevaluation.
supplementary artifact and webpage.
all experimental data additional evaluation of mentioned features and further examples are available as supplement .
related work.
klee is a symbolic execution tool that uses search heuristics to mitigate the path explosion problem.
it is able to symbolically and dynamically handle system calls in a program while our implementation always handles them symbolically.
handlingasystemcalldynamicallyexecutesitandusestheconcrete valuereturnedbytheoperatingsystemforfurtheranalysis.this allows faster execution but may not cover all possible program authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
cpa symexec ase september montpellier france states.handlingasystemcallsymbolicallyusesasymbolicvalue that represents all possible values the operating system could return for the system call.
the advantages and disadvantages are the opposite of dynamic handling.
kleecan also provide a test case for everyexploredprogrampathduringtheanalysisofaprogram.
symbiotic is a symbolic execution based verifier that uses program slicingwithextendedpointeranalysistomitigatepathexplosion.
symbiotic has been participating in sv comp successfully forseveralyears.ituses kleeasasymbolic executionback end.
tracer computes a loop invariants using counterexampleguidedloopunrollingtotackletheproblemofunboundedloopsand b weakest preconditioninterpolantsderivedfrominfeasibletarget pathstoweakentheprecisionofitssymbolicexecution.thisisthe oppositetoouruseof cegar.whilewestartwithalowprecision andrefineitbasedonstrongest postconditioninterpolants precisionincrease tracerstartswithahighprecisionandabstractsit basedonweakest preconditioninterpolants precisiondecrease .
to make bug reports more readable path projection see also takesanxmlbugreportandpresentsthecorresponding programcodeafterperformingmethodinliningandcodefolding onit.thisway itcreatesoneconsecutive readablestreamofthe executed program code that only shows information that is nec essary to understand the bug without the need to jump betweenlines and files.
the html interface of the target path report of cpachecker issimilartothis butdisplaysaconcretetargetpath.
architecture of cpa symexec a run of cpa symexec consists of three main phases the front end module parser and cfa builder first creates an internal representation of the program under analysis as cfa then the symbolic execution with cegarruns on that cfa and tries to find a target path for a provided specification.
when the analysis terminates statisticsandotherinformationarewrittenfortheusertobetterunderstand the result.
figure 3shows this main architecture of cpa symexec .
front end.
cpa symexec isabletobuildcfasforprogramswritten inc java and llvmbitcode.first thefront end parsesthepro gram under analysis.
from the resulting parse tree it constructs the initial cfa and performs several optimizations to simplify the structureof thecfa.then the front endderives additionalinformationabouttheprogrambasedonsyntacticalinformation.this includes a live variables analysis to determine which variables are active in the current scope a classification of variables based on theirusage andananalysisoftheloopstructureoftheprogram.
thecreatedcfaandtheadditionalinformationcollectedisthen passed to the symbolic execution.
symbolic execution.
cpa symexec runssymbolicexecutionwith anadjustableprecisiononthecfa.initially thisprecisionisempty i.e.
symbolic execution does not track any variable assignments or path constraints.
whenever the symbolic execution finds a path thatviolatesthegivenspecification thattargetpathissymbolically executed with full precision.
if this shows that the path is actually infeasible the precision is refined by the precision refinement procedure.theprecisionrefinementextracts byinterpolation from an infeasible target path which variables and constraints shouldbe tracked.
this information is used to increase the adjustable precision such that the infeasible target path is not re encountered by any successive symbolic execution and the symbolic execution restartswith thenewprecision.
ifthesymbolic executionfinishes withoutfindingatargetpath cpa symexec terminatesandthespecificationholds.ifsymbolicexecutionwithfullprecisionshowsthat afoundtargetpathisactuallyfeasible cpa symexec terminatesand returns the target path with additional data to the user.
analysisoutput.
afteranalysis anhtmlreport4canbecreated tovisualizethecfa theexploredstatespaceand ifexisting target paths.
the cfa is displayed in graph representation the exploredstate space is displayed as an arg and target paths are displayed in two variants a concrete target path shows relevant concrete variableassignmentsateverystepalongthepath and asymbolic target path shows the full symbolic state at every step along the path.
if cpa symexec is used for test case generation a test harness iscreatedforeachreachableconditionintheprogramassoonas itisreached.thistestharnesscanbecompiledtogetherwiththe program under analysis to create an executable test.
test case generation.
fortest casegeneration an algorithmin cpachecker is used that a defines every condition in the program asatarget and b onlystopsafter foreachtarget apathtoitisfound or it is proven unreachable.
for each target path it then creates a compilable harness based on the work of execution based result validation .
using cpa symexec installation.
allstepsforinstalling cpachecker areexplainedonour supplementarywebpage.5cpachecker canbedownloadedasbinary release or as source code using subversion or git.
execution.
to runcpachecker on the command line execute cpa.sh which can be found in directory scripts of the installation with the intended parameters followed by the file to analyze.
to use cpa symexec runcpachecker with parameter symbolicexecutioncegar.
if a c file is not yet pre processed cpachecker can do that with option preprocess .
constraintsofsymbolicexecutionareresolvedusinganexternal smt solver.
currently cpachecker supports smtinterpol7 mathsat58 z39 andprincess10.thesolvercanbeselectedbyusingparameter setprop solver.solver solver with the intended solver the default solver is mathsat5 .
by default cpa symexec uses bitpreciseencodingofbothbit vectorsandfloating pointnumbers.
a fullline to execute an example program test.clookslike cpa.sh symbolicexecution cegar preprocess test.c cpachecker will create a set of files in directory output for the user to better understand all findings cf.
sect.
.
to perform test case generation with cpa symexec run it with configuration testcasegeneration symbolicexecution cegar .
4cf.
for an example report authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france dirk beyer and thomas lemberger c program specificationparser cfa buildersymbolic execution with adjustable full precision precisionprecision refinement safe additional dataunsafe additional datacfatarget pathinfeasible path precision increment no target path feasible target path figure architecture of cpa symexec table comparison of cpa symexec with the other state ofthe art tools kleeandsymbiotic best value highlighted tool correct correct incorrect incorrect unsolved true false true false cpa symexec klee symbiotic comparison to illustrate the competitiveness of cpa symexec we performed a thorough comparison with kleeandsymbiotic on5590tasks of the largest available benchmark set for verification tasks in c11.
table1reportsforeachoftheapproachesthenumberof correct answersthatnopathexists correctanswersthatapathisfound missed paths i.e.
a path exists but the tool did not find it wrong paths i.e.
paths that cannot be executed in the program semantics and unsolved tasks.
the different approaches of the threetoolsshowintheresults kleeisthestrongesttoolforfinding pathsforauserquery symbiotic isthemostaccuratetool itreports the lowest numberof wrong paths i.e.
pathsthat are actually not pathsforwhichtheuserwasquerying and cpa symexec isthebest toolforexhaustivelyexploringthestatespace thetoolcorrectly reports2137programsthatdonotcontainapathforwhichtheuser was querying and it did not miss any such path.
this outperforms bothkleeandsymbiotic.
conclusion we explained the architecture and basic concepts of cpa symexec aswellastheprocessofrunning cpa symexec forverificationand test case generation.
a more detailed tutorial video on youtube supports these explanations.
cpa symexec incpachecker is a competitive symbolic execution engine that allows users to combine symbolicexecutionwithabstractionand cegar.inaddition the matureness of cpachecker and the multitude of different abstract domains algorithms andutilitiesthatareimplementedintheframeworkallowanefficientimplementationofnewideasandaquick adaptionofexistingtechniquesthatrelyonsymbolicexecution.
acknowledgment.
wethankthecontributorsofthe cpachecker project cpa symexec is based on many standard components of this framework.
d.beyer.
.
softwareverificationwithvalidationofresults reportonsvcomp2017 .in proc.
tacas lncs .springer .
.
5 20 d. beyer a. j. chlipala t. a. henzinger r. jhala and r. majumdar.
.
generating tests from counterexamples.
in proc.
icse .
ieee .
https d.beyerandm.dangl.
.
verification aideddebugging aninteractivewebservice for exploring error witnesses.
in proc.
cav lncs .
springer .
d. beyer m. dangl d. dietsch and m. heizmann.
.
correctness witnesses exchangingverificationresultsbetweenverifiers.in proc.
fse.acm .
d. beyer m. dangl d.dietsch m. heizmann and a. stahlbauer.
.
witness validationandstepwisetestificationacrosssoftwareverifiers.in proc.
fse.acm .
d.beyer m.dangl t.lemberger andm.tautschnig.
.
testsfromwitnesses execution based validation of verification results.
in proc.
tap lncs .
springer .
d.beyerandt.lemberger.
.
symbolicexecutionwithcegar.in proc.
isola lncs .
springer .
d.beyerandt.lemberger.
.
replicationpackageforarticle cpa symexec efficientsymbolicexecutionincpachecker inproc.ase .
.
zenodo.
c. cadar d. dunbar and d. r. engler.
.
klee unassisted and automatic generationofhigh coveragetestsforcomplexsystemsprograms.in proc.
osdi.
usenix association .
papers cadar cadar.pdf m.chalupa m.vitovsk andj.strejcek.
.
symbiotic5 boostedinstrumentation competition contribution .
in proc.
tacas lncs .
springer .
e. m. clarke o. grumberg s. jha y. lu and h. veith.
.
counterexampleguided abstraction refinement for symbolic model checking.
j. acm50 .
w.craig.
.linearreasoning.anewformoftheherbrand gentzentheorem.
j. symb.
log.
.
e. ermis m. sch f and t. wies.
.
error invariants.
in proc.
fm lncs .
springer .
j. jaffar v. murali j. a. navas and a. e. santosa.
.
tracer a symbolicexecution tool for verification.
in proc.
cav lncs .
springer .
r. jhala and r. majumdar.
.
path slicing.
in proc.
pldi.
acm .
https y. p. khoo j. s. foster m. hicks and v. sazawal.
.
path projection for usercentered static analysis tools.
in proc.
paste .
acm .
.
d.kim yonghwikwon p.liu i.l.kim d.m.perry x.zhang andg.rodriguezrivera.
.
apex automaticprogrammingassignmenterrorexplanation.in proc.
oopsla.
acm .
j. c. king.
.
symbolic execution and program testing.
commun.
acm .
h.d.t.nguyen d.qi a.roychoudhury ands.chandra.
.
semfix program repair via semantic analysis.
in proc.
icse.
ieee .
icse.
.
a.roychoudhury.
.
semfixandbeyond semantic techniquesforprogram repair.
in proc.
formabs.
acm .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.