regexes are hard decision making difficulties and risks in programming regular expressions louis g. michael iv virginia tech louism vt.edujames donohue university of bradford j.donohue bradford.ac.ukjames c. davis virginia tech davisjam vt.edudongyoon lee stony brook university virginia tech dongyoon cs.stonybrook.edufrancisco servant virginia tech fservant vt.edu abstract regular expressions regexes are a powerful mechanism for solving string matching problems.
they are supported by all modern programming languages and have been estimated to appear in more than a third of python and javascript projects.
y et existing studies have focused mostly on one aspect of regex programming readability.
we know little about how developers perceive and program regexes nor the difficulties that they face.
in this paper we provide the first study of the regex development cycle with a focus on how developers make decisions throughout the process what difficulties they face and how aware they are about serious risks involved in programming regexes.
we took a mixed methods approach surveying professional developers from a diversity of backgrounds including top tech firms for a high level perspective and interviewing developers to learn the details about the difficulties that they face and the solutions that they prefer.
in brief regexes are hard.
not only are they hard to read our participants said that they are hard to search for hard to validate and hard to document.
they are also hard to master the majority of our studied developers were unaware of critical security risks that can occur when using regexes and those who knew of the risks did not deal with them in effective manners.
our findings provide multiple implications for future work including semantic regex search engines for regex reuse and improved input generators for regex validation.
index t erms regular expressions developer process qualitative research i. i ntroduction regular expressions regexes are a text processing tool baked into all modern programming languages as well as popular tools like text editors .
developers frequently incorporate regexes into their software.
estimates suggest that more than a third of javascript and python projects include at least one regex .
it is therefore surprising that we know so little about how developers interact with such a widely used technology.
existing investigations into regexes have mainly focused on the source code and the technology rather than on the person using it.
for example other studies have delved into regex feature usage regex evolution and worst case regex behavior .
however almost nothing is known about how software developers actually work with regexes.
without understanding what real developers think about regexes how they go about creating them what difficulties they face and how they manage risks we can only guess at what aspects can be improved.we present the first large scale qualitative study of the decision making difficulties and risks developers face when they program with regexes.
we surveyed professional developers about their regex practices and support our findings by interviewing professional developers to illuminate our findings.
through our investigation we gained insight into developer perceptions and decision making regarding regexes.
we report on the decisions developers make when working on regexes to apply a regex or not to write or reuse a regex to identify test input and whether the regex is correct.
we shed light on the difficulties that developers feel when wrestling through problems ranging from mundane syntax problems to complex reasoning about the relative importance of false positives and false negatives in the pattern matching problem space.
we learn about how developers work to handle these obstacles the tactics they employ and the tools they use.
we examine the risks of regex programming with the surprising result that many developers are unaware of the portability and security problems associated with regexes.
our core contributions are as follows in order to provide as rich a glimpse of regex practices as possible we conduct and analyze large scale surveys of professional software developers from a diversity of companies including several major tech firms to understand their regex practices.
we further our findings by interviewing developers.
we synthesize this mixed methods data to better understand the regex programming process the decisions developers make the difficulties developers face and how they handle them and the degree of awareness around the risks of regex programming.
we discuss the myriad implications of our findings proposing a wide range of directions for future research grounded in real world practice.
ii.
b ackground and rela ted work a. regex programming and risks regexes are a string matching tool used to identify a generalized subsequence of characters within a string.
generally the process that ends with the inclusion of a regex in code written by a professional developer takes four overall steps.
first the developer identifies or is tasked with a string matching problem that he or she assesses for its suitability 34th ieee acm international conference on automated software engineering ase .
ieee authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
to be solved using a regex.
next developers will move to compose a regex evaluating the feasibility of reuse and then either author a regex from scratch or reuse one with or without modification.
then having arrived at a regex that the developer hopes solves their problem they will validate it.
if the regex passes validation developers will document the regex and integrate it into their project.
if the regex fails validation developers will attempt to recompose it.
software developers face two major risks when programming regexes portability and performance.
many regex dialects have emerged over the years with divergent syntaxes and semantics.
developers therefore face portability problems during regex programming with the risk that the regex that they compose or reuse will be executed in a dialect other than the one they anticipate with unanticipated behavior e.g.
syntax errors or unexpected match behavior .
developers also face performance problems leading to security risks due to the polynomial or exponential worst case time complexity of regex matches in most regex engines these super linear regexes can expose applications to regular expression denial of service redos vulnerabilities which have been reported on dozens of major websites hundreds of major javascript projects and thousands of javascript python and java projects .
any software developers who write client facing regexes face the risk of regex performance problems and redos security vulnerabilities.
b. empirical regex research prior research regarding regexes has been predominantly quantitative examining regexes in their role as a software artifact.
researchers have empirically examined regex reuse regex test coverage regex evolution regex repair and regex generalizability .
others have proposed tools for regex programming e.g.
input generation linters and type checking .
although regexes are interesting artifacts they also represent hours of developer effort that bear qualitative investigation.
our developer focused investigation of regex programming is orthogonal to quantitative research that treats regexes as a software artifact.
our qualitative efforts will inform the development of new tools that address the problems developers actually face maximizing the potential impact of regex tool research.
only two studies have explored the developer side of regex programming with an emphasis on composition and comprehension.
chapman and stolee asked professional developers how often and in what contexts they use regexes.
and in a laboratory setting chapman et al.
performed a fine grained study on whether their subjects preferred one regex synonym over another e.g.
equivalent patterns that use character classes or disjunctions a b .
our approach is to cast our net broadly hearing from hundreds of developers from diverse backgrounds to understand coarsegrained issues surrounding process difficulties and risks.c.
developer perceptions practices and information needs we are not the first to apply qualitative methods to shed light on software engineering practices.
prior work in this vein ranges from general engineering perceptions to specific practices such as code review .
the standard approach is to survey or interview or observe developers who are exposed to the topic of interest.
some studies have also considered interaction artifacts .
our study is the first investigation of developer regex programming practices in this spirit.
we are the first to survey developers on many of these regex topics at all the first to survey developers on regexes at scale and the first to conduct regex focused developer interviews of any kind.
iii.
r esearch questions in this study we focus on understanding core human aspects of regex programming how developers make their decisions what difficulties they face and whether they are aware of dangerous risks.
understanding these aspects of regex programming will motivate impactful new lines of research targeting the specific problems that professional software developers face.
to this end we study the following research questions rq1 what perceptions do developers have about the value and difficulty of regexes?
rq2 what influences developer decisions when programming regexes?
rq3 what do developers find difficult about programming regexes?
rq4 how do developers handle those difficulties in programming regexes?
rq5 are developers aware of portability and security risks when programming regexes?
to support our study of these research questions we devised a general framework for the regex programming process depicted in figure .
we adapted this framework from the general software engineering methodology of defining requirements writing validating and deploying and introduced a reuse stage based on our intuition that regexes are a kind of function complex enough to be reused like other software.
we do not claim that our framework is exhaustive but we believe it captures the crucial regex programming decisions that developers make.
using this framework we were able to focus our methodology on developers decision making challenges and handling mechanisms for each of the decisions in figure .
iv .
r esearch method overall method and considerations.
we followed a mixed qualitative and quantitative approach .
we used a qualitative approach to answer most of our questions but for rq1 and rq5 we also asked some quantitative questions.
we emphasized a qualitative approach with the goal of discovery to identify an exhaustive set of answers to our research authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
stages of regex programming with four major decision points diamonds .
this outline is what we used to frame the further investigation into developers decision making processes and difficulties.
questions as well as understand the details and context behind them.
since discovery was our goal we wanted to maximize the number of professional developers whose perspectives we heard through surveys and interviews.
of course one major difficulty in qualitative software engineering research is persuading enough busy highly paid subjects to participate to give weight to findings.
we therefore prepared two distinct pairs of surveys and interview protocols with different emphases roughly on the left and right halves of the process framing figure .
this allowed us to reach a diverse population of software developers and to ask a diverse set of questions while also keeping the survey taking time to a reasonable 17minute median and the interview times to roughly minutes.
survey design.
we designed our surveys by first having discussions with professional software developers and following best practices in survey design .
then we refined the design of each survey through internal iteration followed by several pilot administrations each.
both of our final survey instruments included free response questions about the four stages of regex programming that we set out to study see iii .
in these open questions we asked developers about their thought process when making the decisions that we described in iii and we asked them what they found difficult in programming with regexes.
we also asked them to describe the mechanisms that they follow to handle those difficulties.
we used these responses to answer our research questions rq2 rq3 and rq4.
our surveys also included multiple choice questions about developers perceptions about regexes in general which we used to answer rq1.
then we also included multiple choice questions asking about developers awareness of portability and redos risks and free response questions asking them how they prevent such risks.
we used these responses for rq5.
finally our second survey also included three additional questions about regex reuse the results of which are discussed in a previous publication that focuses specifically on the topic of regex reuse .
survey deployment.
we deployed our surveys after obtaining approval from our institution s ethics board following a twopronged strategy to maximize the diversity of respondents.we deployed our first survey internally in a large international media company.
we sought participants through an internal advertising campaign and by asking senior engineering staff to promote the survey.
we deployed the second survey at software companies of various sizes.
we used snowball sampling contacting professional developers of our acquaintance who work at tens of different software companies including top fortune companies and asking them to take the survey and propagate it to their colleagues.
to further increase the diversity of responses we also posted the survey on popular internet message boards that are frequented by software developers .
we compensated legitimate responses with cookies for the first survey and a amazon gift card for the second one.
we obtained survey responses from developers for our first survey and developers for our second one.
the median respondent had more than years of professional experience in the first survey and years in the second one.
interview design and deployment.
the final question in our surveys was a request for permission to conduct a followup interview.
we contacted all survey respondents who were willing to be interviewed and were able to schedule interviews with of them.
following common practice to learn more about a phenomenon our interview protocol was semistructured .
we developed interview guides with general topics and questions to be covered instead of an exact set of questions.
we focused our interview guides on the decisions that developers make the difficulties that they face and the ways in which they handle them when programming regexes.
we also asked for clarification on details of the regex programming process hinted at by our survey results.
we compensated interview participants from the second interview population with a amazon gift card.
the first set of interview participants were not compensated.
data analysis.
we analyzed the free response questions in our surveys and the transcriptions of our interviews using open coding also used in grounded theory .
for our second survey one author of the paper read all the responses for a question to identify codes into a code book.
afterwards the author reread and coded all the responses.
then a different author of this paper used the code book to authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
perform their own coding of units.
finally both sets of codes were used to reach agreement.
due to organizational privacy and confidentiality requirements the first survey was analyzed by one author coding free responses and then repeating the process several weeks later using the codes from the other survey.
the results were then compared with the original codes to resolve discrepancies.
finally we organized the resulting codes according to the research question that their corresponding quotes answered.
we report them together with exemplary quotes in sections v to viii.
our survey instruments and interview protocols are available for replication at .
v .
rq1 w ha t perceptions do developers ha ve about the v alue and difficul ty of regexes ?
fig.
.
we asked developers about their perceptions of regexes in regards to value to their job most agreed that they are valuable and as software developer knowledge most agreed that they are important .
regarding the difficulty of regexes most developers agreed that they were daunting when learning to code did not show strong confidence in their regex usage overall neutral response and disagreed that regexes are more readable than other code.
we initially wanted to understand whether regexes are a technology that developers value and benefit from as well as to learn developers general perceptions about their difficulty.
we found that developers view regexes as a valuable technology but one that is also difficult figure .
to understand whether developers believe that regexes are valuable our first survey asked participants if they agreed with the statement regular expressions are valuable to me in my job .
respondents were nearly unanimous of developers agreed that regexes were valuable to their job.
developers also generally agreed that regular expressions are an important part of software development knowledge .
but our participants also described regexes as difficult.
of respondents agreed that they found regular expressions daunting when.
.
.
learning to code most developers did not always feel confident in their usage of regexes and most developers disagreed with the statement that regular expressions are more readable than other code .
these initial findings give strong motivation to pursue regex research in general and prompted us to investigate our subsequent research questions to characterize the particular ways in which developers find regexes difficult.
vi.
rq2 w ha t influences developer decisions when programming regexes ?
one of the primary results of our work was an understanding of how developers make the decisions involved in programming regexes.
we report it in the following subsections.a.
choosing a string matching solution we asked developers how they made the decision of which string matching solution to use asking specifically about using a regex vs. writing alternative code using regex vs. using alternative code developers reported making this decision based mostly on the perceived complexity of the problem.
developers perceive regexes as well suited for solving goldilocks problems neither too simple nor too complex.
for simple problems simple string apis were preferred.
as one interviewee said if there s a string function that says the prefix should be this i would prefer that over a regex .
.
.
it s simpler to understand and when the problems are too complex a survey respondent cautioned that regexes are also not a good solution if a regex is complex enough that it s too complex to write from scratch it s probably also too complex a problem to solve with a regex another factor that developers considered when deciding to use a regex or its alternatives is their perceived readability .
but developers disagreed on how readable regexes were with some inclined towards and others away from using them.
one participant said i stay away from tedious string parsing and splitting and i see regular expressions as a tool to aid in conveying what you are trying to do.
while other teams discourage regexes instead with code review you want readable code and regexes are often not readable so they become less commonly used .
developers also mentioned that sometimes a single choice is available .
for example some built in language and thirdparty apis require developers to supply regexes to solve string matching problems.
a common example is search tools you find regular expressions and globs in search tools all over the place ...i n those cases it s not really a choice.
b. composing a regex when developers decide to solve their string matching problem with a regex we asked them how they make two decisions while composing regexes.
first we asked how they decided to write from scratch vs. re using a regex.
and when they opt to reuse we asked them how they select reuse candidate s .
developers also volunteered a decision that we had not initially considered namely determining the relative merits of overly liberal or conservative matching i.e.
too much or too little?
.
we updated our interview protocol to investigate this decision.
writing regex vs. reusing regex our participants often said they would reuse when they believed they were trying to solve a common problem .
as one survey respondent said if it s a common regex like various form fields i would reuse a regex but for a more company business use case specific requirement i would write a custom regex .
many respondents preferred to reuse regexes where possible toimprove reliability believing that regexes from a trusted reuse source would provide higher quality or better testing.
for example one interviewee said a highly up voted stack overflow regex is more likely to be right and account for edge cases the specifics of what constituted a trusted source varied.
some developers relied on a private team resource like authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
t able i developer reported decision factors when programming regexes and their influence on decision outcome stage decision rq2 factors influence on outcome choosing a solution using regex vs. using alternative codeproblem complexity medium complexity arrow rightregex readability both outcomes single choice regex composing a regex1 writing regex vs reusing regexproblem commonality common problem arrow rightreuse reliability reuse time savings both outcomes which regex should i pick for reuse?best understanding simpler regexes preferred feature usage fewer preferred length shorter preferred match too much vs match too little?
problem domain domain dependent v alidating a regex1 am i confident this regex is correct?sample data availability available arrow righthigh confidence result recipient internal use arrow rightshallow testing am i confident this reused regex is correct?
trust of reuse both outcomes documenting a regex how much documentation is required?personal opinion both outcomes complexity high arrow rightdocumentation a shared regex file while others trusted highly up voted stack overflow posts.
another factor that developers considered when deciding whether to reuse was saving time but they disagreed about the more efficient strategy.
some favored reuse similar to writing code finding a working example and adapting it is faster while others said that writing from scratch often requires less time than searching for a suitable one.
which regex should i pick for reuse?
developers who opt to reuse must often choose from multiple candidate regexes.
our participants said they preferred simpler regexes when given the choice but measured complexity in different ways.
one interviewee showed a preference for the fewer special characters saying i just try and pick the one i have the most understanding of .
.
.
the one with the fewest special characters .
another emphasized length .
answer is half the length i m going to go with that one.
.
match too much vs. match too little?
we did not initially anticipate this decision but added it to our interview protocol based on information volunteered in an early interview.
when composing a regex developers discussed needing to have an understanding of the context in which their regex would be used.
in some situations they preferred their regex to be overly liberal matching too much while in others they wanted to be conservative matching too little.
they said what might be tricky is deciding whether or not you want to match it too much or match too little and pointed to validation as a particular context where matching too little false negatives was preferable to matching too much i d much rather match too little than too much garbage data .
c. v alidating a regex we asked developers about two aspects of validation how they decide whether a regex is correct and whether theirprocess changes when they are re using a regex rather than writing their own.
is this regex correct?
our participants confidence was often tied to having comprehensive sample input for their regex.
i m usually pretty confident about them ...w e have a pretty much an unlimited ... sample pool of things i can use to test.
on the other hand a participant described editing a colleague s old regex as difficult because they did not perfectly understand the input space.
innon customer facing contexts some participants had a lower standard for correctness.
they said things like i just kind of eyeball it .
.
.
somebody .
.
.
will probably test the edge cases usually when the recipient of the data was a team member rather than a customer.
is this reused regex correct?
our participants were split on whether and how to change their validation strategy for reused regexes.
some developers viewed reused regexes as better tested or more and as a result did not work to validate as thoroughly as when they wrote from scratch saying things like i ll usually trust re using an expression more .
.
.
skip .
but others treated reused regexes cautiously i am aware of the security implications of using something from public sources .
d. documenting a regex how much documentation is required?
perhaps related to the differing opinions on the readability of regexes that we identified earlier interviewees disagreed on the extent to which regex documentation was required .
many felt that a well written regex would not require documentation i would say that .
.
.
most people would consider them self documenting .
others thought that the amount of documentation depended on regex complexity e.g.
something that has two or three levels of parentheses ...i will try to break them apart into smaller pieces with more comments .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
vii.
rq3 rq4 w ha t do developers find difficult about programming regexes and how do they handle those difficul ties ?
intertwined with their decision making process participants mentioned many difficulties during regex programming.
as in the preceding section we analyzed our survey responses and then used our interview phase to probe for additional details about the challenges that developers face and the ways in which they handle them.
for clarity in this section we accompany each challenge with the way s in which our participants described handling them1.
table ii summarizes our findings.
as indicated in table ii the first two challenges we discuss were cross cutting spanning several stages of the regex programming process.
we then discuss two common challenges that our participants face when composing regexes and two challenges that they face when validating regexes.
a. understanding the problem difficulty multiple developers reported the difficulty of fully understanding the string problem that they are trying to solve e.g.
the most difficult thing with regular expressions tends to be defining the problem .
developers mentioned this difficulty affecting many of the stages of programming with regexes.
in particular one participant mentioned understanding the problem as a difficult step in both writing and validating regexes with tests having clear understanding of the task .
.
.
helps not only to write the tests but also to write pick the regex .
this may be tied to the importance of a good set of inputs during the validation step mentioned by other participants in section vi c. handling developers primarily handled the difficulty of problem definition by studying sample inputs for patterns.
i tried to generalize what i m looking at and craft the regular expression.
when they could not understand the problem at a glance developers discussed breaking the problem into smaller pieces .
one interviewee described this as very methodical .
.
.
much like i attack any programming problem where i break it into manageable pieces.
b. understanding the regex difficulty their opinions about regexes being selfdocumenting notwithstanding many of our participants said that they perceive regexes as difficult to understand.
several interviewees summed this up well variously remarking that the syntax of regular expressions is kind of terse that the regex syntax is cryptic and simply referring to it as illegible gibberish .
developers reported that the difficulty of interpreting regex syntax as a pattern i.e.
reading regexes impacted all stages of the regex programming process .
the difficulty of understanding regexes is exacerbated by frequent lack of comments documentation poor style a point raised by many developers.
1we chose our words carefully here.
we refer to what participants described as handling problems because many participants were aware of limitations or gaps in their approaches.
we discuss potential research directions to address some of their concerns in ix.
handling developers reported two ways to handle this difficulty using tools to improve their own regex comprehension and documenting regexes to improve comprehension for others.
the most common tools mentioned by participants were visualization aids like graphical visualization and syntax highlighters.
the most praised among these were the built in syntax highlighting for the jetbrains ides jetbrains has my back ide syntax highlighting .
to improve regex comprehension for others developers described their regex documentation strategies.
one common method was to break regexes across multiple lines providing a comment about each individual part of the regex.
this is not a universally supported feature across all regex implementations but was encouraged by participants when it was available.
from a developer interview hopefully you re using a programming language where you could break it into multiple lines and comment those .
in addition some developers encourage others to document their regexes when they come across them in code review.
in those cases some developers push to include more detailed commenting e.g.
put a plain language explanation in comments.
.
.
have as many examples of matching and unmatching text as is appropriate in the comments c. searching for reuse candidates in this and the following subsection we introduce challenges specific to two stages of the regex programming process composing and validating regexes.
difficulty in order to reuse a regex developers first need to search for a regex that is worth reusing.
multiple participants lamented the difficulty of this process which mostly affects the regex composition stage.
when our participants search for a regex to reuse they usually try to leverage general search tactics with mixed success.
in particular developers find it difficult to frame their search in a way that is understood by existing search tools it is difficult to express their abstract string matching problem as a plain text query for a search engine.
for some tasks the desired regex is easy to search e.g.
email regex but developers often find it difficult to express the regex that they need.
from a developer interview it s hard to .
.
.
query the problem you re trying to solve.
sometimes it s so domain specific.
in this case developers face both the difficulty of understanding the problem itself section vii a and the difficulty of articulating it for existing search engines.
handling developers reported three mechanisms to handle this difficulty.
some developers choose to decompose the regex into smaller pieces that may be easier to search.
this is expressed well by one of the survey respondents if i can t find an existing regex that fits my need i will start searching .
.
.
pieces that will help me construct the final regex.
anther popular approach was an indirect search.
developers commonly search for code that may use a relevant regex.
for example this was described in an interview when the authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
t able ii developer reported difficul ties when programming regexes and handling mechanisms for them stage rq3 difficulty rq4 handling mechanism for difficulty cross cuttinga understanding the problemgeneralizing sample inputs breaking down the problem b understanding the regexusing tool support for visualization and highlighting breaking down regexes adding documentation composing a regexc searching for reuse candidatesdecomposing the regex searching for similar code personal regex library d non intuitive syntaxreading the regex documentation using tool support v alidating a regexe testing edge casesgenerating their own inputs testing all the available inputs f testing enough inputsrequest additional inputs from other stakeholders property based testing participant said i would say intuition but also sort of like code that s close by for sure.
a file next to it or maybe it s an implementation of something that conforms in some interface.
finally some participants maintain personally curated lists for regex reuse that they will consult.
for example one survey respondent mentioned that they would refer to the regex section of my personal notebook when searching for reuse candidates.
this handling mechanism seems similar to having a personal library of utility functions that you copy into your codebase as needed.
d. non intuitive syntax difficulty developers frequently discussed dealing with the syntax of regexes as an obstacle e.g.
you have to remember what each symbol in that string means .
.
.
they re non intuitive.
another developer expressed a reliance on regex specific reference charts i need a little cheat sheet that has to outline what each symbol does.
handling developers relied on two handling mechanisms to address difficulties with syntax.
unsurprisingly developers often mentioned referring to their programming language s regex documentation to support their composition of regexes e.g.
...i f searching for a regex to reuse fails i will start reading the regex documentation.
but another common mechanism is the usage of tool support .
anytime i am curious about a regex go to regex101.com ...y o u type in your regex and some examples and it ll match or not match in real time and that s just useful.
developers also appreciated tools that incorporated documentation.
one participant noted that there s a bar on the side of ... click on every sort of regular expression piece of syntax and it ll show you an example.
e. testing edge cases difficulty developers also found it difficult to identify corner cases oredge cases terms colloquially used to refer toboundary values .
they often expressed the difficulty in corner case inputs and outputs and the fact that it is tough to imagine all edge cases to test .
handling some developers handle this problem by generating their own input while others rely on real world input data from others.
for simple problems developers say that they think through the problem space and generate their own input but noted that this approach has its limits.
if the regular expression is .
.
.
simple enough that thinking about the entire scope of the input space is feasible .
.
.
it s really the case where it really grows into a massively complex one that is problematic .
other developers gained an understanding of their problem by reading data they had on hand but they acknowledge that they therefore tend to only address the edge cases that manifest in the available input data .
one participant remarked that look for everything that i can get from production.
.
.
that s my input .
.
.
that s my unit test.
and went on to say unfortunately the input that i get can t be universal .
.
f .
testing enough inputs difficulty similarly to testing edge cases developers also reported on the difficulty of validating regexes with enough inputs.
regexes are powerful and flexible tools but in consequence can be very difficult to validate thoroughly.
a survey respondent summed up this idea well an infinite regression problem to test a regex .
.
.
would require regexes .
inparticular developers find it difficult to come up with sets of sample inputs for testing that they would consider complete.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
when asked what they worried about when reusing regexes developers expressed a range of concerns emphasizing semantic portability issues that a regex would not work as intended.
developers also worried less about performance issues where a regex could slow down overall execution time but this may be attributed to lack of awareness of performance vulnerabilities as is discussed in section viii b1.
this was a frequent complaint insufficient sample inputs unknown set of sample inputs handling developers handled this through ad hoc approaches to expand their collection of inputs.
one participant relied on the expertise of other humans to do this testing literally every scenario is unfortunately not a realistic solution.
.
.
working with the qa and the clients to get a diverse set of real world documents .
another participant said that they automatically generated additional input using propertybased tests .
viii.
rq5 a re developers awa r e o f port ability and security r edos r isks when programming regexes ?
as discussed in ii developers encounter two risks when programming regexes correctness concerns due to regex non portability and security concerns due to redos.
in this section we describe developers s awareness of these risks as well as their handling mechanisms.
a. portability risks awareness we asked developers whether they worry about a series of risks involved in regex reuse syntactic semantic and performance differences when re using regexes.
we report their answers in figure .
developers who responded to the second survey worry about syntactic and semantic differences over and around a third also worry about performance differences .
our interview participants provided more details about specific portability problems that they have resolved in the past.
they reported re factoring regexes with unsupported features which at times would blend semantic and syntactic differences e.g.
escape sequences .
.
.
vary across systems and don t support some of the constructs that are available in other languages .
an interesting facet of figure is that a substantial portion of developers also reported not worrying about any of these reuse risks.
our interviews shed some light into why many developers do not worry about regex reuse risks many are not aware that reuse carries portability risks .
in fact some developers reported that they prefer to use regexes over other alternatives because of their perceived portability acrosslanguages.
one survey respondent stated it is consistent across languages and another said that the same regex can be used across technologies systems .
in concurrent work we have explored this misconception .
furthermore other respondents described the shock that they felt when they first learned of regex portability issues e.g.
i certainly didn t know .
.
.
what the hell is that?
ignorance of this issue exposes developers to correctness issues due to improper regex validation2.w e note that these assumptions can affect correctness whether or not regexes are being reused simply as a result of an incorrect mental model for regex behavior.
handling most developers handled missing feature support or blatant syntax differences by consulting language documentation and making a translation .
for example for syntactic differences i look at a regex cheatsheet and find the appropriate syntax for my environment .
if they understand the need for translation developers do not find this translation difficult though it can be frustrating .
in some cases the need for regex translation can even influence larger project decisions.
one participant was considering migrating a project from one language to another but decided against it transitioning our common regular expressions .
.
.
kind of a headache.
other developers would not go to the effort to make a translation.
if they found that a regex reuse candidate would not work in their regex dialect they would start their reuse search process over to find one that did not need a translation sometimes i ported it.
sometimes i went looking for another .
the primary way that most developers discussed dealing with further concerns was testing to confirm that the regex that they were reusing behaved in the way that they expected.
i run the regex against various tests to ensure it outputs as expected.
b. redos awareness regexes open the somewhat obscure security concern of redos.
redos is fairly avoidable however if proper steps are taken to sanitize input and to not use superlinear regexes.
most importantly the first step to avoiding the issue is being aware of the problem.
when asked if they knew what redos was developers were overwhelmingly unaware.
only of all surveyed developers knew of the possible vulnerability.
this is concerning since the vulnerability is easy to introduce without noticing and it can slip through validation without being detected.
we note that redos is a vulnerability rather than an exploit and is only relevant if the regex may match against malicious input.
nevertheless we were surprised that the majority of participants were unaware of redos.
handling beyond their occasional awareness of this security risk developers currently do little to combat performance issues and feel ill equipped to identify performance 2for example consider the participants that we described across several earlier sections who reuse from a trusted source like stack overflow and do not validate carefully as a result.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
issues leading to redos in their regexes.
when discussing performance issues and challenges in interviews many developers said they only worry about regexes that introduce noticeable lag i just wait and see if it becomes an issue.
only one interviewee referred to redos catastrophic backtracking thanks to a related feature in regex101.com.
some developers held a misconception about worst case regex performance issues which may not manifest on typical input but only on malicious input.
the feature in regex101.com is not a redos detector but rather a diagnosis tool suitable if the developer already knows about the worstcase input.
part of these behaviors may be because developers lack tools or knowledge about solving regex performance problems.
for example davis et al.
reported that input sanitization is an easy mitigation for many redos vulnerabilities but none of our participants mentioned this approach.
and when asked what is difficult about validation one developer simply stated performance and security risks but did not mention any of the tools tailored to this problem .
ix.
d iscussion and implica tions our findings have implications for many research directions.
a. addressing string matching problems our observations motivate future studies of string matching problems to understand them in more detail.
understanding string matching problems developers specifically mentioned the difficulty of fully understanding string matching problems which makes it hard to decide whether a regex is the best solution for the problem.
it may be beneficial to investigate in more depth how experts solve specific kinds of string matching problems.
understanding and naming categories of problems and their solutions would simplify the way that we describe and reflect about them much like it is done with design patterns in objectoriented programming .
an example taxonomy member may take the shape of classifying all regexes that search for nested delimiters as a specific grouping.
chapman and stolee proposed a classification of common regex solutions in terms of their textual similarity.
we propose a complementary research direction by classifying string matching problems.
diverse solutions for string matching problems furthermore our participants mentioned that some stringmatching problems are better addressed by non regex solutions those that are either too simple or too complex.
it would be worth investigating what specific characteristics make stringmatching problems fall into this category and what kinds of solutions developers employ in those cases.
some example alternative solutions may be position fetching substring matching anchor splitting or their combinations with simple regexes.
another powerful mechanism that may be useful for this kind of problems are context free grammars e.g.
using tools like antlr which may also be easier to understand and debug.
it is possible that an additional level of abstraction or more powerful language with built in stringfunctions could solve some of the challenges that developers face with regexes.
b. assessing regexes we found that developers need to assess various qualities of regular expressions.
our findings for rq2 and rq4 explain how developers use various factors of complexity and quality to make decisions and overcome difficulties.
for example developers considered both regex complexity and quality as important factors to decide which regexes to reuse.
such estimations of regex complexity and quality are normally performed manually by simply looking at the regex.
regex metrics these findings highlight the value of developing regex metrics to automatically measure the quality and complexity of regexes in a way that will help developers make decisions when programming regexes.
for source code metrics already exist to capture some of its complexity and quality e.g.
cyclomatic complexity .
we pose that regex metrics would have a strong impact in the productivity of developers when programming regexes since most of the decisions that they make consider some metric.
we elaborate further on our envisioned usage of regex metrics in the following sections.
c. automated support for reusing regexes our participants highlighted multiple difficulties in regex reuse such as defining the problem for a search engine query and reusing across regex dialects.
they also pointed out the characteristics that they valued when reusing as well as the interesting practice of keeping regex lists for reuse.
these findings open multiple opportunities for research.
semantic regex search currently developers find it difficult to use search engines to look for regexes to reuse since it is hard to express their string matching problem in a few words particularly considering that the problems themselves are hard to understand see section vii a .
thus developers would benefit from a search engine that allowed them to express string matching problems in a domainspecific way i.e.
semantic regex search.
such a semantic regex engine could be more useful to developers by taking inputs that are regex specific.
for example these could be a a list of inputs that match or non match the regex that they need b a regex that resembles the regex that they need c a code context in which the regex would be used.
the approaches for processing these inputs would vary but we pose that such a search engine would make it easier for developers to express the problem that they are trying to solve.
regex repositories since developers mentioned keeping their own lists of regexes for future reuse it may be useful to empower them in that practice.
regex repositories would strongly complement semantic regex search particularly if the stored regexes contain additional metadata such as the category of string matching problem that they solve possibly from chapman and stolee s proposed classification of common regex solutions portability or performance problems or other indicators of quality via regex metrics or user ratings.
one authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
regex repository does currently exist regexlib but it encompasses a very narrow set of facets in which to perform search and is also relatively small given the relative size of other existing software datasets.
metrics based regex ranking regex metrics would complement semantic regex search by allowing the ranking of results according to various metrics.
developers expressed that in most regex reuse cases they valued low complexity e.g.
short length few features used and high quality e.g.
coming from a reliable source and being better tested.
regex dialect translation finally developers also expressed the difficulty of reusing regexes that were created in a different dialect.
ideally a regex search engine should also include mechanisms to understand the regex dialect for which a regex was created as well as mechanisms to refactor it for the dialect in which it will be used.
d. automated support for composing regexes we also identified developers difficulties with composing regexes e.g.
dealing with difficult syntax that is hard to remember and many qualities that developers value in regexes e.g.
short length and reduced feature usage.
these findings motivate many avenues for research.
live support for regex composition now that we better understand some of the characteristics that developers value in regexes see section ix b we could develop assistants to support developers in composing regexes with those desirable attributes.
such assistants could help developers to e.g.
break down their regexes use fewer advanced features or decide between matching too match or too little.
regex refactoring the same information about desirable qualities in regexes could be applied to develop regex refactorings that would improve the quality of regexes.
regex refactoring could be applied on demand or automatically over a whole code base.
refactoring is another example of a highlyvalued concept in object oriented programming that could highly benefit regex programming.
chapman and stolee already proposed the idea of regex refactoring.
our findings throw more light into what kinds of refactorings would be desirable for developers.
automatic regex composition another interesting research direction would be the full automation of regex composition.
some existing work has made advances in this direction by composing regexes from examples of matching and nonmatching input a different approach to automate regex composition may feed the algorithm with partial regexes that solve pieces of the problem since developers seem to be already decomposing the problem in their manual composition efforts.
e. automated support for v alidating regexes developers mentioned the difficulty of validating regexes particularly in testing edge cases and in deciding whether they tested enough input cases.
they currently handle such difficulties manually by testing all the input that they have available.
these difficulties motivate research in at least two directions.
regex input generation for humans many tools have been proposed to generate input for testing regular expressions .
surprisingly none of our studied developers mentioned using these tools for input generation.
we realize that further study would be necessary to understand the extent to which these tools are adopted.
however we believe that further research is motivated to study what developers consider good orrelevant input as well as to evaluate regex input generators when their output is consumed and judged by humans.
boundary value analysis for regexes methods like boundary value analysis and equivalence partition help software developers define and test edge cases and are widelyknown.
thus further research is motivated to adapt these techniques to regexes in particular or to develop other methods to support developers in defining boundary values for regexes.
f .
automated support for documenting regexes some of our participants felt that regexes should be selfdocumenting others thought that documenting regexes is necessary and others thought that the decision depends on the complexity of the regex.
in addition to this we also observed the things that developers value in regex documentation breaking down the regex into pieces documenting each piece and the inclusion of both matching and non matching input as well as a plain description of what the regex does.
automatic regex documentation these findings motivate research to automatically document regexes since many of the pieces of information that developers value could potentially be generated automatically.
machine learning techniques could be developed to automatically break down regexes by learning from examples.
also regex input generation techniques see section ix e could be adapted to generating few inputs that would be highly relevant for humans to understand the regex and that also covered matching and non matching input.
g. understanding regexes many developers mentioned the terseness and cryptic ness of the syntax of regexes and how that makes them very difficult to understand.
novel regex syntax for comprehension we believe that this widely held sentiment calls for further research into new syntax for regexes to make them easy for humans to understand.
since developers are already breaking down regexes in multiple lines that may give space for a more verbose syntax that could be more easily understood.
h. regex education developers noted that regexes can be difficult to learn but also consistently noted that they are a very helpful tool.
our findings will help educators to teach best practices in programming with regexes as well as specific difficulties to anticipate in the process.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
learning regexes this also gives a clear incentive to investigating further how developers first learn regexes as well as the common pitfalls that beginners face in particular.
this research brought to light some common mistakes that professional developers can make such as perceived portability.
a similar study focused on developers learning regexes would provide more comprehensive insights into the early stages of understanding.
redos awareness most developers do not know about redos.
we believe that this vulnerability is easily overlooked since regexes may seem harmless to many developers.
thus we encourage educators and professionals to disseminate the mechanics of this vulnerability to better prevent problems associated with it.
x. t hrea ts to validity construct validity in order to pose questions about the regex process to developers we first outlined a general process based on our understanding of general software engineering practice.
this may have limited the extent to which participants reflected on their own distinct decision making factors or difficulties.
an example of findings that we may not have been able to observe are those related to code review practices when regexes are involved since we did not ask about code review explicitly.
to counteract this risk we used open ended questions which enabled our participants to report on difficulties and decisions that we did not anticipate e.g.
matching too much vs. matching too little.
still an observational study of our studied phenomena based on contextual inquiry may uncover a broader set of findings.
internal validity the researchers on this study manually analyzed the data by reading summarizing categorizing and discussing the contents of developer surveys and interviews.
this has the potential to introduce bias at various levels and may also limit reproducibility since other individuals may interpret the same information in different ways.
this is a known limitation of qualitative research .
we strived to reduce the impact of this limitation by corroborating and discussing our findings across authors and across the two developer populations.
external validity we sampled hundreds of developers across two different populations but this is still a small portion of all software engineers and populations.
in the second survey we used snowball sampling for part of the sample starting with professional contacts of the authors biasing towards people known by the authors and at companies where the authors have worked.
though this may compound some bias we believe that our snowball sampling allowed us to contact both a large and wide range of developers and the information that these participants provided was similar to the one provided by participants from our public recruitment approaches.
xi.
c onclusion regexes are powerful tools that developers find valuable.
regexes are also hard to work with.
we identify six difficulties that developers face when using regexes and multiple handlingmechanisms that they employ to deal with them.
developers are also mostly unaware of risks that they take when using regexes under of our participants were aware of security vulnerabilities associated with regex usage.
we propose many lines of research and new ways to support developers when working with regexes.
xii.
r eplica tion our survey instruments and interview protocols are available for replication at .