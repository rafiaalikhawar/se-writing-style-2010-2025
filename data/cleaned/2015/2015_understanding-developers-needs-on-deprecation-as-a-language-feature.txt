understanding developers needs on deprecation as a language feature anand ashok sawant delft university of technology delft the netherlands a.a.sawant tudelft .nlmaur cio aniche delft university of technology delft the netherlands m.f.aniche tudelft .nl arie van deursen delft university of technology delft the netherlands arie .vandeursen tudelft .nlalberto bacchelli university of zurich zurich switzerland bacchelli ifi .uzh .ch abstract deprecationisalanguagefeaturethatallowsapiproducerstomark afeatureasobsolete.weaimtogainadeepunderstandingofthe needsofapiproducersandconsumersalikeregardingdeprecation.
to that end we investigate why api producers deprecate features whether they remove deprecated features how they expect consumers to react and what prompts an api consumer to react to deprecation.toachievethisgoalweconductsemi structuredinterviewswith 17third party javaapi producersand survey170 java developers.
we observe that the current deprecation mechanism in java and the proposal to enhance it does not address all the needs of a developer.
this leads us to propose and evaluate three further enhancements to the deprecation mechanism.
keywords api deprecation java acm reference format anand ashok sawant maur cio aniche arie van deursen and alberto bacchelli.
.
understanding developers needs on deprecation as a language feature.
in proceedings of icse 40th international conference on software engineering icse .
acm new york ny usa pages.
.org .
.
introduction concerning deprecation the official java documentation states a programelementannotated deprecatedisonethatprogrammers arediscouragedfromusing typicallybecauseitisdangerous orbecause a better alternative exists .
the deprecation mechanism is a commonly used practice .
deprecation as a language feature has been adopted in many languages such as php and java.
however there is no uniform implementation or support of deprecation across languages.
for permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation onthe firstpage.copyrights forcomponentsof thisworkowned byothersthan the author s mustbehonored.abstractingwithcreditispermitted.tocopyotherwise or republish topostonserversortoredistributetolists requirespriorspecificpermission and or a fee.
request permissions from permissions acm.org.
icse may june gothenburg sweden copyright held by the owner author s .
publication rights licensed to the association for computing machinery.
acm isbn ... .
.org .
.3180170example java exposes its deprecation mechanism as an annotation captured by the compiler to throw a warning when a program element marked as deprecated is invoked in php deprecation is added as a property to a function and throws a runtime warning.
furthermore languages have been changing the deprecation mechanism in the search for improvements as evidenced by the javalanguagedesigners proposaltorevampthejavadeprecation mechanism for the third time .
according to the java language designers the deprecation mechanism has been open to misuse and the inconsistent removal of deprecated features creates confusion surroundingthe fateof deprecatedfeatures.
in theirwords this led to a situation where everybody was confused about what deprecation actually meant and nobody took it seriously.
thisvariabilityindeprecationmechanismsacrosslanguagesand volatility of implementations shows that deprecation as a whole is anunsolvedproblem.thereisnocurrentunderstandingastowhat constitutes an effective deprecation mechanism.
currently api consumers do not appear to react to deprecation despite api producers taking great care in documenting the deprecation and the changes involved .
inthispaper ourgoalistodeterminethecharacteristicsthata deprecationmechanismshouldpossessandwhetherthesearedesirable amongst developers and feasible to implement particularly in a mainstream language such as java.
we do this conducting a study set up in two phases an exploratory investigation followed bytheevaluationofthedesirabilityandfeasibilityofenhancements we propose to the deprecation mechanism.
in the first part of our study we investigate why api producers deprecate features how they expect the api consumers to react whethertheyremovedeprecatedfeaturesfromtheirapis andwhat theassociatedchallengesarewithusingthedeprecationmechanism.
to that aim we use an interpretive descriptive technique to conduct and analyze interviews with developers who work on apisboth in industry and open source.
we challenge our findings by conducting a survey with java professionals.
with the insights gained from api producers and consumers coupled with interface usability guidelines in the second part of this study we propose enhancements to the deprecation mechanism.weevaluatethefeasibilityofthisproposalbydiscussingthem with two java language designers one of whom is the promoter of thecurrentrevampoftheexistingjavadeprecationmechanism and its desirability among the aforementioned java professionals.
acm ieee 40th international conference on software engineering authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may june gothenburg sweden a. a. sawant m. f. aniche a. van deursen a. bacchelli the deprecation mechanism in java deprecationisprovidedbymostprogramminglanguages asaway for developers of apis and libraries to avoid introducing breaking changes when classes fields or methods are to be removed.
in the original documentation of deprecation we read deprecation is a reasonable choice in all these cases where the api is buggy insecure disappearing in a future release or encouraging bad coding because it preserves backward compatibility while encouraging developers to change to the new api .
javafirstintroducedthedeprecationmechanismintheformofa javadoc deprecated annotation which provides information on whyafeaturewasdeprecatedandwhatreplacementfeatureshould be used.
once source code annotations were introduced in java .
javaintroduceda deprecated annotation.accordingtothe javalanguagespecification thisannotationgeneratesacompiler warning when a deprecated feature is used in source code.
modern ides pick up this warning and display the warning along with the accompanying javadoc figure .
recently therehasbeenaproposaltochangethedeprecation mechanisminjava jep277 .stuartmarks leadjavaandopenjdklanguagedesignerandpromoterofthechangesinthedeprecation mechanism stated that deprecation warnings are largely ignored by api consumers .
marks attributed this behavior to two main reasons which he captured by observing the behavior of consumers who use the java se api potential misuse the current implementation of the deprecationmechanismisopentopotentialmisuse the dep recatedannotationendedupbeingusedforseveraldifferent purposes .
this led to api consumers not taking deprecation warnings seriously.
inconsistentremoval thereisnoconsistentremovalprotocolofdeprecatedfeatures leadingto anunclearmessage being deliveredtodevelopersaboutthemeaningof deprecated .
this led clients to leave