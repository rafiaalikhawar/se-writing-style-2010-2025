spyrest automated restful api documentation using an http proxy server s m sohan craig anslow and frank maurer department of computer science university of calgary calgary alberta t2n 1n4 email smsohan craig.anslow frank.maurer ucalgary.ca abstract restful api documentation is expensive to produce and maintain due to the lack of reusable tools and automated solutions.
most restful apis are documented manually and the api developers are responsible for keeping the documentation up to date as the api evolves making the process both costly and error prone.
in this paper we introduce a novel technique using an http proxy server that can be used to automatically generate restful api documentation and demonstrate spyrest an example implementation of the proposed technique.
spyrest uses a proxy to intercept example api calls and intelligently produces api documentation for restful web apis by processing the request and response data.
using the proposed http proxy server based technique restful api developers can significantly reduce the cost of producing and maintaining api documentation by replacing a large manual process with an automated process.
keywords restful api w eb api documentation automation example based documentation i. i ntroduction restful apis introduced by fielding are used as a primary interconnection mechanism among modern day web based systems .
for example the website of a restaurant can use the restful api from twitter to show the latest tweets mentioning the restaurant so that prospective customers can read the experience shared by others.
to allow others to use their apis twitter and other restful api developers publish documentation describing different features of their restful api.
the documentation of such restful apis are often produced and maintained using a manual process that is expensive and error prone.
api documentation for library apis such as java standard edition commonly leverage reusable tools such as javadoc.
the documentation produced by such tools include description of objects and methods with custom texts primarily sourced via comments in the source code.
on the other hand restful api documentation includes additional information such as http headers request parameters request and response data in serialized formats e.g.
json xml .
using comments for these additional information requires significant manual effort.
there is a lack of reusable tools to automate the documentation process.
this makes the task of producing restful api documentation a costly and error prone one.
api developers also need to publish and often maintain the documentation for multiple versions as the restful api evolves.
this requires further manual effort.to produce restful api documentation the manual process used can be described as a six step process as follows craft an example call to an api endpoint with required headers url parameters and request body make the call capture the response headers and data strip any confidential data from the captured information add custom descriptions to the captured data and publish the api documentation.
this six step process is essentially repeated for all api endpoints that are documented.
with spyrest we have implemented an innovative solution to largely automate the aforementioned manual process of restful api documentation so that all but steps and are automated.
steps and are left to a manual process to allow for a pragmatic solution.
our solution relies on an http proxy server to intercept example api calls to automatically capture all http traffic.
the collected data is then synthesized to present the documentation for restful apis.
spyrest can generate documentation for all restful apis irrespective of the technology used to implement the api since it leverages an http proxy server.
the key contributions of our research are as follows we discuss a list of requirements for tool development by analyzing related work to automate the restful api documentation process and present a new technique based on an http proxy server to meet the requirements.
we demonstrate an example implementation of the proposed technique that generates automated yet customizable version aware collaboration enabled and reusable api documentation software as a service platform that can be used to generate and maintain documentation for any restful api.
we present a case study of using spyrest to compare the advantages of our proposed technique over existing solutions for restful api documentation.
the remainder of this paper is organized as follows in the next section we discuss related work on api documentation.
the requirements and implementation details of spyrest is provided next.
then we present a case study to demonstrate spyrest in action.
finally we discuss the implications and limitations of our work in the discussion section.
ii.
r ela ted work a. general api documentation several papers have studied the documentation of apis to recommend best practices that are also applicable to restful api documentation.
robillard et al.
found that developers faced severe obstacles learning new apis due to inappropriate documentation and other learning resources .
robillard 30th ieee acm international conference on automated software engineering .
ieee recommended the following for api documentation include good examples be complete support many complex usage scenarios be conveniently organized and include relevant design elements.
kuhn et al.
discussed the importance of examples in api documentation .
hoffman et al.
recommended making the api example scenarios to be executable test cases so that a user can execute an api .
nasehi et al.
performed a case study based on stackoverflow discussions to find out what makes good code examples .
they recommended api developers to include examples in the api documentation and the use of wiki like collaborative tools with online api documentation.
parnin et al.
found that using social media gives api documentation readers a chance to engage with authors of the apis .
chen et al.
recommended integrating crowdsourced frequently asked questions into api documents so that users can easily find relevant discussions when questions arise .
subramanian et al.
presented an automated approach to link api documentation of different java and javascript libraries with code examples that are shared on stackoverflow .
stepalina identified several advantages of software as a service saas based solutions for api documentation systems such as cost effective yet powerful platform agnostic and high accessibility improved document quality content reuse automated tools and organization of robust and scalable documentation process .
several tools exist that help automatic generation of api documentation for local apis such as javadoc1 rdoc2 jadeite .
while these tools have been proven to work for local library apis they have limited applicability for documenting restful apis because http specific information are not natively supported by these tools.
b. restful api documentation several related work proposed specifications for restful apis.
maleshkova et al.
found that a lack of a standard format to document web apis and manual documentation causes confusions about how to use the apis for different use cases .
espinha et al.
observed that most restful apis are documented manually by api developers making the documentation a less reliable one .
danielsen et al.
presented a vocabulary for documenting restful web apis called web interface language wifl .
v erborgh et at.
presented restdesc a resource oriented and hyper link based specification for describing restful apis .
mangler et al.
presented rddl an xml based specification for describing restful apis .
kopecky et al.
presented hrests a machine readable micro format to describe restful apis that use an alternate representation compared to wifl .
ning et al.
presented omniv oke a restful api based invocation engine that provides an abstraction layer for restful api calls to multiple apis that follow different conventions .
manual configuration is required to generate these aforementioned specifications for restful apis.
myers et al.
recommended providing a consistent look and feel with explanation for the starting points and an overall map comprising of both text and diagrams providing a browsing experience with breadcrumb following a hierarchy an effective search interface providing example code and a way to exercise the examples online without writing code .
in addition to the research community there are several custom restful api specification formats that are observed in the industry such as swagger3 raml4 and blueprint5.
in addition to producing restful api documentation there are saas based tools providers that can be used to publish the documentation and auto generate api client code for restful apis that are described using one of these formats.
to use these tools to generate html based restful api documentation api developers need to manually construct the intermediate documentation format such as swagger blueprint raml etc.
since there is no automated tool to produce this.
iii.
s pyrest a. requirements the following list of requirements for spyrest r1 in priority order is derived from analyzing the aforementioned related work and current api documentation practices as observed in the industry r1 automated restful api documentation restful apis are either documented manually or using custom tools to partially automate the process.
the primary requirement for spyrest is to find a cost effective approach to automate restful api documentation.
r2 example based as discussed in the related work section several authors have emphasized including example scenarios with api documentation can help users understand how to use an api .
spyrest generated api documentation needs to include example scenarios.
r3 executable documentation in addition to including examples spyrest also needs to allow users to execute the example scenarios so that they can try the api features without having to write code .
r4 v ersion awareness spyrest needs to allow api developers to publish documentation for multiple versions of a web api as it evolves.
the following comment from an api client developer of stripe an online payment processing company shows the importance of a version aware documentation tool6 does the full api documentation only reflect the current version of the api?
is there a way to access the api docs for outdated versions?
...that would be very helpful.
when you are trying to upgrade from one version to another it s impossible to know the implementation differences... r5 customizable it is important to customize the overview information about how to use an api to reduce api learning obstacles and describe complicated business rules .
spyrest needs to allow api developers to add customized content to auto generated restful api documentation.
version api discuss li4pyvcweiw nt9sfttf vqj 272r6 reusable spyrest needs to work as a reusable platform so that multiple rest api documentations can be generated and published on a single platform to get the advantages of a saas platform .
r7 collaborative spyrest needs to allow people to collaborate on the api documentation so that questions and answers about apis can coexist with the api documentation to to overcome the knowledge fragmentation .
b. design from our research we identified an http proxy server based solution as a novel approach for generating restful api documentation meeting requirements r1 .
our approach works as follows api developers make example api calls using a proxy the proxy records and processes http traffic a web app generates restful api documentation.
spyrest an example implementation of this approach7 i s composed of three main components as follows the spy the spy component in spyrest is an http proxy server.
the spy is named so because it records the http traffic for example api calls that are made using it as a proxy server.
for example when using spy as an http proxy to make the following http request method get url headers accept application vnd.github.v3 json that produces the following response headers status ok content type application json charset utf ... body i d name g r i t full name mojombo g r i t .
.
.
spy automatically saves the raw request and response data with http headers.
additionally the spy synthesizes the data and saves the following meta data about this example api call version v3 resource repositories action get repositories query since strippedresponsebody a subset of the response body description blank digest base64 hash value of the version resource url and description requiresauth false apitoken blank used when a spyrest api token is provided userid blank used when a user is found for given apitoken as shown in this example the version v3 is automatically detected by parsing the accept request header.
next the resource field is also auto detected as repositories by parsing the request url.
the action get repositories paper raw master spyrest tool demo.pdfis automatically detected by combining the request http method with request path.
the strippedresponsebody field automatically saves a shorter version of the actual response where large response body is truncated to a smaller one to reduce noise from the generated documentation.
these meta fields allow spyrest to structure the example api calls for a given api host in a hierarchical model as follows an apihost e.g.
github.com has many apiv ersions e.g.
v3 each apiv ersion has many apiresources e.g.
repositories each apiresource has many apiactions e.g.
get repositories and each apiaction has many apiexamples.
the database the database component saves the data that is captured by the spy and the web app.
the spy saves the recorded data about the api examples and the auto computed meta data in the database.
the web app saves data about spyrest users and custom modifications on auto generated api documentation on the same database.
the web app the web app component further processes and presents auto generated documentation that is captured by spy in the database.
the web app also allows the api developers to edit or add custom content to the auto generated documentation.
the source code for both the spy and web app components are released as open source projects.
c. features now that we have explained the design and implementation of spyrest we discuss how spyrest meets the aforementioned requirements r1 .
r1 automated restful api documentation the work flow for automated restful api documentation can be explained by the following steps api developer uses the spy http proxy to run example api calls the spy records example api calls the spy extracts meta information about the api call the web app displays the auto generated documentation api developers can optionally customize the auto generated documentation.
fig shows screen shots shortened from spyrest auto generated documentation that is solely based on an example api call to url tetris language assembly sort stars order desc with a custom header x spy rest description to provide the short description for the example.
the auto generated api documentation features two sections a summary section as shown in fig.
1a and an examples section as shown in fig.
1b.
the summary section includes breadcrumbs to show hierarchy of the api objects related to each api action to help api client developers easily navigate the api documentation.
this section also includes three tables that display the structure of query parameters and request and response payloads.
in addition to the structure automated type detection is used to show the data type and example values for each field in these tables.
the examples section on the api documentation shows all the recorded api examples for a given api action.
for each example it shows a description the request url query parameters and request and response headers and bodies.
spy filters out the authorization request header before saving the examples in the database and the documentation rendered by the web app displays this header with a placeholder text as filtered .
a api documentation summary section b api documentation examples section fig.
spyrest screen shots showing auto generated api documentation r2 example based spyrest generated restful api documentation includes both the structure of the api objects and concrete examples for different use cases.
the api examples are annotated with user provided descriptions through a custom http request header x spy rest description that is otherwise hard to automatically infer.
to record the examples in spyrest any rest api client can be used as long as it supports an http proxy to call the api.
r3 executable documentation spyrest keeps a copy of the api request information including url headers and request body.
as a result spyrest can also recreate the example api calls that can be executed by users of the generated api documentation.
spyrest automatically generates executable test cases that can be run using curl8.
r4 v ersion awareness spyrest allows api developers to publish the documentation for multiple versions of their restful apis.
to organize api documentation and examples under multiple versions spyrest has an automatic version detection algorithm that parses the accept request header or the url.
the auto version detection algorithm can be suppressed by specifying the version in the custom x spyrest version header when running example api calls through the spy.
customizable spyrest allows api developers to modify and add custom free form contents to the auto generated summary section of the documentation using markdown9 syntax.
custom content can be used to provide overview information and explain complicated business rules about the apis that are not derivable from simply synthesizing the examples.
we consider this as a pragmatic solution to augment manual effort with the largely automated solution to the restful api documentation effort.
the custom edits are persisted in the database and are not overridden when the api examples are replayed unless the user decides to revert back to automated summaries.
r6 reusable spyrest relies on an http proxy to auto generate restful api documentation.
to feed spyrest with data any rest api client can be used as long as it supports using a proxy server.
this technology agnostic feature allows spyrest to be a reusable restful api documentation tool.
spyrest is offered as a saas tool at that can be used to auto generate and publish documentation of multiple restful apis.
for apis where a saas solution is not acceptable spyrest can also be installed and used as a self hosted solution.
because spyrest is an open source application users can modify the source to support any unique 274requirements that are not supported by spyrest.
r7 collaborative spyrest allows the api developers to comment and discuss api related questions with api client developers right next to the documentation so that crowdsourced documentations can coexist with the officially published api documentation.
each api documentation page on spyrest features its own discussion thread to help users easily locate relevant information.
iv .
s pyrest c ase study in this section we discuss a case study of using spyrest to auto generate documentation for api actions randomly sampled from three restful api providers.
these api apis are documented using lines of code10.
these three api providers are github.com kissmetrics.com online analytics tool and liquidplanner.com online project management tool .
a. spyrest documentation vs. official documentation we found spyrest generated documentation for of the api actions from the case study included fields that are found from actual api responses but not included in their official documentation.
for example the spyrest generated documentation for github get notifications api action included additional fields such as forks url keys url collaborators url and more that were not mentioned in the official api documentation even though actually returned as api response.
similarly the official documentation for github.com get search code api action did not include the releases url api response field.
official documentation of kissmetrics.com get core accounts and get core accounts account id api actions did not mention the data field that is found in the actual response as documented by spyrest.
the official documentation for get api account action on liquidplanner.com did not mention the fields workspaces last workspace id and disabled workspaces count that were included in the spyrest documentation.
these examples show the error prone nature of a manual process that requires api developers to ensure the documentation is updated to reflect any change in the api.
we consider the proxy based solution to solve this problem since the api documentation can be updated by replaying the example api calls.
the official documentation of these three api providers did not include integrated collaboration features.
we found unanswered questions out of questions with the tag github api on stackoverflow.com.
we found questions about liquidplanner api on their developer forum that are not linked to officially generated documentation published as a pdf file.
on stackoverflow.com we found unanswered questions out of questions on kissmetrics api.
spyrest provides the collaboration features with auto generated api documentation so that api developers and users can discuss and locate related discussions when browsing restful api documentation on a single web interface.
spyrest includes executable api examples support for multiple versions and examplespresents the auto generated documentation for different restful apis using a consistent look and feel that are not provided by these studied apis.
v. d iscussion restful api documentation is expensive error prone and often incomplete because of the manual effort involved in the process.
our core contribution is a novel approach where an http proxy server is used to largely automate the process for restful api documentation.
there is a lack of tool support for automatically generating documentation of restful apis.
we presented spyrest as an example implementation of the http proxy server based solution to fill this need.
the requirements for spyrest are derived from analyzing the existing literature and industry practices as well as our own professional experiences developing restful apis and their documentation.
in the literature several papers provided lists of recommendations for api documentation based on studying the existing tools and techniques and feedback collected from api developers.
we found a lack of available tool support to generate restful api documentation following those recommendations and designed spyrest to provide a solution.
as a result spyrest features automated documentation with executable examples customizable contents collaboration version awareness and reusability to provide a ready to use tool support for restful api documentation following the recommendations.
the novel approach of using an http proxy sever offers some unique benefits over existing tools from academia and industry.
for example tools that rely on user provided comments on source code and code inspection such as javadoc require the user to write formatted comments that are often applicable to a single programming language.
the comments are not executable and manual effort is required to ensure the comments and the api that it describes are kept in sync.
spyrest generated documentation can reflect the latest information since the documentation is generated after executing the example api calls.
the verbose nature of restful api documentation makes it difficult to write and maintain the documentation as comments in source code.
using an http proxy server spyrest offers a language agnostic solution so that restful apis written in any programming language can be documented using a single tool.
another key feature of spyrest is the shared platform for publishing restful api documentation.
a similar shared platform is provided by several other tools such as swagger blueprint.
we identify the key advantage of spyrest over these tools to be the fact that spyrest relies on example api calls instead of relying on a custom api specification that are required by these tools.
the suggested api specifications can be used to define the structure of api objects but do not capture examples of api usage.
the work flow for using these api specification formats can be described as follows execute example api calls manually generate api specification automatically generate api documentation.
spyrest does not rely on any custom api specification so the associated manual effort can be largely avoided resulting in a smaller work flow as follows execute example api calls automatically generate api documentation.
we consider this process to be a cost effective approach for apis with several 275endpoints or apis that evolve.
unlike other available saas only solutions such as swagger and blueprint spyrest can be used both as a saas and a self hosted platform.
the self hosted mode can be used for documenting internal restful apis that cannot be released on the internet or modifying the opensourced code of spyrest to fit unique api specific needs.
we have demonstrated using spyrest with automated test code.
using the test code helps automatically testing different use case scenarios of the api actions in addition to generating the api documentation.
while spyrest offers an automated solution for documenting restful apis api developers can customize the auto generated content.
several researchers have identified the need for rich content comprising of text and diagrams to explain complex business rules about apis.
to achieve this goal we consider augmenting auto generated documentation with user contributed documentation when necessary to provide a pragmatic solution.
to summarize from our example implementation of spyrest and the case study we have shown the advantages of the proposed http proxy server based solution over the existing techniques for restful api documentation.
a. threats to v alidity internal threats.
our proposed technique uses an http proxy server that can only intercept and record the data when it is either in clear text or trusted to be decrypted by spyrest.
because spyrest can be used as a shared platform any secrets used in the example api calls get decrypted in memory even though not saved by spyrest.
to overcome these threat we recommend api developers to use disposable secrets so that the secrets used to run an api call are valid for a single api call.
for use cases where this is unacceptable the self hosted mode can be used as an alternative.
spyrest currently only supports json based apis for their widespread use among popular restful apis such as twitter facebook google maps.
external threats.
we used spyrest to auto generate documentation for apis randomly sampled from three restful api providers as a proof of concept and found the proxy server based solution met the requirements r1 .
further evaluation is needed involving a larger set of restful apis to evaluate the effectiveness of the proposed technique of using an http proxy server for restful api documentation.
vi.
c onclusion in this paper we have presented a novel technique of using an http proxy server to automate the restful api documentation process that otherwise requires a largely manual process.
the proxy server based solution supports integrated features such as automated restful api documentation with executable example api calls support for multiple versions customization and collaboration that are offered both as a saas and self hosted platforms.
these features have been recommended by existing research on the documentation of apis.
overall we conclude that a proxy server based approach shows a pragmatic solution to the restful api documentation problem.
in the future we will perform a qualitative user study involving restful api developers to evaluate the effectiveness about the aforementioned http proxy based restful api documentation approach.