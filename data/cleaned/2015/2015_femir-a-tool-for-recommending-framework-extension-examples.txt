femir a tool for recommending framework extension examples muhammad asaduzzaman chanchal k. roy kevin a. schneider daqing hou department of computer science university of saskatchewan canada electrical and computer engineering department clarkson university usa md.asad chanchal.roy kevin.schneider usask.ca dhou clarkson.edu abstract software frameworks enable developers to reuse existing well tested functionalities instead of taking the burden of implementing everything from scratch.
however to meet application specific requirements the frameworks need to be customized via extension points.
this is often done by passinga framework related object as an argument to an api call.
t o enable such customizations the object can be created by extending a framework class implementing an interface or changingthe properties of the object via api calls.
however it is both a common and non trivial task to find all the details related to the customizations.
in this paper we present a tool called femir that utilizes partial program analysis and graph mining techniqueto detect group and rank framework extension examples.
thetool extends existing code completion infrastructure to inform developers about customization choices enabling them to browse through extension points of a framework and frequent usagesof each point in terms of code examples.
a video demo is made available at index t erms api framework reuse extension point extension partial program analysis graph mining i. i ntroduction when developing applications developers extensively rely on software frameworks to save both development time and effort.
this is largely due to the fact that frameworks enabledevelopers to reuse existing functionalities instead of working from scratch.
besides reusability another advantage of using a framework is that the existing implementation canbe customized.
this is particularly useful when the currentframework implementation does not directly meet applicationspecific requirements.
a popular way to customize the behavior of a framework is to pass a framework related object as an argument of anapi call.
the object can be created by extending frameworkclasses implementing framework interfaces or by changingthe default properties of the object via setter method calls.
wecall the formal parameter of the api call an extension point.
for example consider the case of the jtree class in the java swing framework.
there can be several ways of extending the functionality of the jtree class.
for instance a treemodel can help to define a tree structure displayed by an instance of the jtree class.
a developer can define her own implementation of the treemodel and call the setmodel method of the jtree with an argument of a new treemodel object to control the tree data structure.
a treecellrenderer defines the way a jtree should display its nodes.
furthermore a developer can provide her own implementation of the treecellrenderer interface andcall the setcellrenderer method with an argument of a new treecellrenderer object to customize the display of nodes see figure .
the formal parameters of the above method calls treemodel forsettreemodel and treecellrenderer for settreecellrenderer are thus examples of extension points ofjtree that allow a developer to gain finer control over the behavior and presentation of the framework class jtree.
in general there can be several ways to work with an extension point.
for example a developer can create a customtree data structure by implementing the treemodel interface by extending the abstracttreemodel class or by using the defaulttreemodel class.
she can then use one of the constructors of the jtree class or the setmodel method to register the custom tree model to an instance of the jtree class.
learning how to correctly customize a framework via extension points is an important and non trivial task.
in thispaper we present a tool for discovering framework extensionpoints and code examples that illustrate how to customizethe framework called femir f ramework e xtension point miner and r ecommender .
the tool performs static analysis of the source code examples to identify framework extensionpoints represents their usages as framework extension graphs and indexes code examples that contain such graphs.
toinform developers about related extension points the tool takesadvantages of the code completion infrastructure of the eclipseintegrated development environment ide .
when a developertypes a dot .
after a receiver object the tool determines thequalified type name of the receiver object to identify relatedextension points and integrate the results with code completionproposals.
once a developer selects an extension point fromthe completion popup menu femir enables the developer to examine different ways of using the extension point tobrowse relevant code examples and to learn related extensionpoints.
full details of the technique including a comprehensiveevaluation of the tool can be found elsewhere .
the rest of the paper is organized as follows.
section ii describes the related work.
we explain the feature of femir in section iii.
section iv presents the architecture of the tool.we present a use case scenario in section v. section vi sum marizes accuracy and runtime performance of the technique.section vii presents a user study to understand the usefulnessof the tool.
finally section viii concludes the paper.
.
c circlecopyrt2017 ieeease urbana champaign il usa t ool demonstrations967 authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
examples that use treecellrenderer extension point jtree tree new tree ... treecellrenderer renderer new customtreecellrenderer ... tree.setcellrenderer renderer customjtree tree new customjtree ... jtree tree new tree ... defaulttreecellrenderer renderer new defaulttreecellrenderer ... renderer.setfont ... renderer.setleaficon tree.setcellrenderer renderer jtree tree new jtree ... treecellrenderer renderer new customdefaulttreecellrenderer ... tree.setcellrenderer renderer public class customtreecellrender implements treecellrenderer override public component gettreecellrenderercomponent ... ... public class customdefaulttreecellrender extends defaulttreecellrenderer override public component gettreecellrenderercomponent ... ... public class customtreecellrender extends jlabel implements treecellrenderer override public component gettreecellrenderercomponent ... ... public class customjtree extends jtree override public treecellrenderer getcellrenderer ... useuse use use1 fig.
.
using an extension point treecellrenderer of the jtree class to gain finer control over cell rendering.
code examples on the left hand side show four different ways of using the treecellrenderer extension point.
fig.
.
an example of femir suggesting framework extension points for the javax.swing.jtree receiver type.
extension points are sorted based on the frequencies they are used in the code repository.
ii.
r ela ted work dagenais and ossher focus on finding framework usage examples because examples are a form of documentation in themselves.
the technique has been implemented in a toolcalled xfinder.
it requires developers to create guides as a sequence of steps for using framework extensions where the steps of a guide are expressed as concerns using mismar a concern oriented documentation toolset.
given a code baseand a framework xfinder can locate examples implementing each step of the guide.
while their technique focuses on fig.
.
preference page to configure various options of the femir plugin.
finding framework extension examples we focus on finding framework extension points and their usages.
another differ ence is that our technique does not require to provide the setof steps required to use framework extension points rather femir uses source code analysis together with graph mining technique to identify these steps automatically.
bruch et al.
proposed a technique that mines four sub classing directives of object oriented white box frame works .
these are method overriding directives methodextension directives method call directives and class extensionscenario.
while the technique can answer how to extend aclass it does not focus on identifying how to use that extendedclass.
on the contrary femir can answer both questions.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
once the treecellrenderer extension point is selected third entry in figure femir shows all of its framework extension graphs grouped by categories bottom view as well as visualization of a selected graph from the customize category top left and a framework extension that is an example of the graph top right .
the selected example corresponds to case number in figure .
in a different study bruch et al.
developed a technique that mines framework usage examples to collect reuse rules .
while they use association rule mining to determinereuse rules we apply graph mining technique.
furthermore our reuse rules tend to be larger than theirs.
thummalapenta and xie developed a technique called spotweb that given a framework determines both hotspots andcoldspots leveraging code search engines.
however spotwebdoes not focus on identifying how to extend the functionalityof framework classes.
techniques that mine frequent patterns in source code examples are also related to our study.
zhong et al.
developed a technique called mapo that uses sequential pattern mining technique to discover frequently used methodcall sequences.
nguyen et al.
proposed grouminer a graph based approach that can mine frequent usage patterns involving multiple objects from source code.
the above tech niques do not focus on detecting api usages spread across multiple source files.
however framework extensions mayspread across multiple files and the same extension point canbe used in multiple ways.
femir handles both.
iii.
f ea tures femir is available as an eclipse plugin.
it can be activated to detect framework extension points and their usages bymining source code examples.
this requires to select appro priate commands from the menu.
when a developer typesa dot .
after a receiver expression to suggest completionproposals femir also activates to recommend relevant extension points figure .
however this requires that extensionpoint detection results from a previous run of femir and the corresponding source code are available to the plugin.
toavoid interrupting other types of completion proposals such as method completion proposals we put the recommendations of femir in a separate completion proposal category and the tool recommends a fixed number of extension points.
however thisnumber can be configured by the user.
the plugin can be en abled or disabled from its own preference page in the eclipseide figure .
when a developer selects the completion proposal made by femir the plugin shows extension point usage patterns in a view of the eclipse workbench window using a jface treeviewer component figure .
developers can see the framework extension graph of the usage patternand other related extension points by selecting a leaf nodeof the tree.
when a developer selects a node in the graph femir shows the corresponding code example.
for example a developer can select a node representing overridden method and femir shows code examples to help her learning how to override that method.
depending on the selection of nodesin graph the code example also changes.
for example ifa developer selects a node representing a client class that implements a framework interface femir shows examples of implementing that interface.
this includes all the methods that are overridden to implement the interface.
developers can alsolearn related extension points and several framework extensiondirectives that goes together.
for example if a developer selects the treemodel extension point femir also suggests implementing a treecellrenderer extension point.
this is done based on the association property of extension points.
similarly by selecting an overridden method developers can authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
working process of the graph miner of femir fig.
.
overview of the recommender component of femir learn which other methods are frequently overridden with the selected one.
iv .
a rchitecture the femir tool is written entirely in java and implemented as an eclipse plugin.
it consists of two main components.these are the miner and the recommender.
figures and6 summarize the working process of these components.
webriefly describe both components below.
however furtherinformation on both components can be found elsewhere .
a. miner the miner component is responsible for detecting framework extension points.
it identifies their usages and mines frequent patterns of using framework extension points.
itworks in the following steps.
collecting framework information femir requires that the framework jar file is included in the target project.
itcollects the fully qualified name of classes interfaces superclasses and implemented interfaces.
for each method femir collects the method name return type and types of parameters.
downloading code examples femir can collect relevant code examples of the input framework from github code repository.
our selection is based on the fact that alarge number of open source repositories are available and github provides public apis to search and download code examples.
alternatively developers can also instruct femir to use previously downloaded code examples.
for example to identify repositories that use the swing api we use the following query import and javax and swing.
the tool selects those repositories that are written in java language and have forked at least once.
after collecting repositoryinformation femir downloads source code examples.
analyzing code examples the goal of this step is to identify relevant extension points and generate frameworkextension graphs.
there are two issues that need to be dealt first the code examples may be incomplete or syntac tically incorrect.
second type bindings of api method calls are usually missing that are essential to identify usages offramework extension points.
femir uses the eclipse jdt parser to parse the source files and also uses the ppa partial program analysis for eclipse plugin to resolve type bindingsof source code elements .
the jdt parser can handle sourcefiles that are incomplete or contain syntactic errors.
the ppaplugin is currently only available for the eclipse .
helios and supports java constructs .femir inherits this limitation.
generating framework extension graphs a framework extension graph describes how a framework extension point is used.
figure shows an example of a framework extensiongraph where a developer uses the treecellrenderer extension point.
here the developer creates a client class by implement ing the treecellrenderer interface and registers an instance of the class using the setcellrenderer method argument of an instance of the framework class jtree.
to determine framework extension graphs the first step is to generate framework extension points.
femir analyzes api method calls that has at least one parameter and is related to the target framework type.
thus the argument to the method call can be a frameworkclass object.
alternatively it can be created by extending a framework class implementing framework interfaces ora combination of both.
femir then generates the graph structure by considering the receiver variable the method call the parameter the argument and those methods that arecalled on the receiver or argument variable.
if the receiveror the argument is created by extending framework classes or implementing framework interfaces femir considers the extended classes implemented interfaces overridden methods and methods that are called in overridden method bodies togenerate the framework extension graph.
indexing framework extension graphs the graphs are indexed based on the receiver type of the method call and the formal parameter type.
the indexing is done for effective retrieval of source code.
in addition we also index lists ofextension points i.e.
the formal parameters of method calls by their receiver type.
this enables femir to find all different extension points given a receiver type.
mining graphs given a receiver type and an extension point the goal of this step is to mine frequent patterns of usingthat extension point.
given a set of ngraphs also known as base graphs femir first generates all one node graphs.
in the subsequent steps femir increases the size of the graphs from the previous step by one node.
the process continues until all nodes of the graphs are enumerated.
to avoid generatingthe same subgraph structure femir uses a canonical form representation that enables to accurately determine isomorphic graph structures.
the miner also categorizes the graphs into extension pattern categories.
each category represents a common way of usingextension points.
there are four different extension patterncategories.
the simple extension pattern does not require authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
extending a framework class implementing a framework interface or calling methods on the argument object.
in a customize extension pattern developers call a set of methods on theargument object to customize the behavior of the class.
theextend extension pattern involves extending a framework class and the implement extension pattern requires implementing a framework interface.
more detailed explanation and examples of extension pattern categories can be found elsewhere .
b. recommender the recommender component is responsible for recommending possible extension points their usage patterns and relevant code examples.
femir integrates the recommender component to the eclipse code completion engine.
given a receiver type the recommender thus suggests related extension points as completion proposals.
we use the complementionproposalcomputer extension point of the eclipse to implement the code completion component of femir.
however the extension point only allows to contribute to the list of completion proposals.
the same triggering mechanism typing the dot after the receiver variable is also used by other code completioncomponents such as those that contribute to method or fieldcompletion proposals.
to avoid interrupting other completionproposals we position the proposals contributed by femir to a separate proposal category.
when a developer selectsa completion proposal of type javacompletionproposal by pressing the enter key the apply method is called by theunderlying framework.
to detect such selection the completionproposals contributed by femir are created by extending the javacompletionproposal and we override the apply method of it to customize the implementation.
when a developer selects an extension point femir utilizes theminer component to generate frequent patterns of using the extension point and group them into four different categoriesof extension points.
we use swt and jface frameworks for creating graphical user interfaces and presenting results.
theresults are presented using a jface treeviewer component.
upon selection of a pattern the recommender visualizes the graph structure.
we use zest a visualization toolkit for eclipse for displaying graphs.
developers can interactively browse code examples by selecting different nodes of frame work extension graphs.
this enables developers to learn usagesof extension points and facilitates adapting the code examplesto their own implementation.
v. a u secase scenario we describe the use of our tool see figure for the femir tool using a scenario that involves the use of the swing frame work for java.
the framework consists of graphical controlelements that are used to create graphical user interfaces.
consider that a developer is using the jtable class of the java swing framework to display data collected from the employees of an office.
she wants to mark invalid input ofemployees in a different color in the jtable.
however she not know how to do that.
she searches the internetusing the following query mark invalid input jtable and the top results returned from the query are discussing input data validation on the jtable which is a different problem.
even if she is successful it is difficult to find relevant examples to learn related customization choices and to identify importantinsights.
all these require to search analyze and comprehenda large collection of information.
however femir makes the whole process much easier.
let s consider that she plans to use femir.
she opens the femir tool and search for framework extension points for the jtable class.
immediately after typing the dot .
followed by a variable of the jtable class she encounters a few class names.
one of them is the tablecellrenderer interface.
she realizes that her problem is related with rendering of jtable cell.
however she does not know how to use tablecellrenderer and thus decides to explore further.
when she selects the tablecellrenderer extension point from the list of completion proposals femir groups different patterns of using that extension point and shows them using atreeviewer component.
she now sees different ways to interact with tablecellrenderer extension point.
she decides to implement the tablecellrenderer interface because the tool reports that most developers do that when using the tablecellrenderer extension point.
the developer thinks that an example wouldbe great to complete her implementation.
double clicking onthe node visualizes a graph structure that shows the way ofimplementing and using the tablecellrenderer interface.
she learns from the graph that she needs to override a method to implement the tablecellrenderer interface.
when she clicks on the node representing the overridden method the tool immediately shows how to override the method.
she alsoexplores other nodes to learn how to implement the interfaceand how to use the class implementing the tablecellrenderer interface with a jtable.
she then copies code fragments from those files and adapts that in her own implementation.
thiscompletes her task.
this scenario shows that not only thefemir tool helps the developer to learn the framework but also assists in using the extension point whose usage spans onmultiple source files.
vi.
e v alua tion we briefly summarize the accuracy and runtime performance of femir in this section.
full details of the evaluation can be found elsewhere .
we evaluated femir using five different popular frameworks swing jface junit jung and jgrapht.
given an extension point we evaluated the effectiveness of the tool inrecommending framework extension graphs that matched withactual usage of extension points.
we used precision recalland f measure to determine the accuracy of recommendations.they were calculated by considering the overlapping of nodes between the original graph under testing and the graph suggested by femir.
we considered three different recommendation strategies.
these were femir local femir global and femir d. femir local recommends top n patterns from authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
within a category.
femir global recommends top n graphs regardless of the category.
finally femir d works as follows.
it first determines the top n graph patterns of an extension pattern category.
it then determines all the base graphs inthe training data that contain the patterns.
among these basegraphs it recommends those that contain the largest numberof different node types.
results from the study revealed thatfemir global performed the best.
while the precision ranges from to the recall ranges from to for the top recommendations.
the f measure ranges from to82 .
femir local performed close to femir global.
while the precision ranges from to the recall ranges from49 to .
the f measure ranges from to .
finally femir d performed the worse.
in addition to the accuracy of recommendations we also measured the runtime performance of the technique.
we found that on overage femir required .92s for recommending framework extension graphs for the java swing framework.
most of this time was contributed by the process of mining framework extension graphs.
however we can reduce the recommendation time by mining framework extension graphs forall framework extension points beforehand.
the tool requiressignificantly more time for analyzing source code files and forgenerating framework extension graphs.
a major part of the time is contributed by the partial program analysis.
however this is only a one time operation.
vii.
u ser study to understand the usefulness of the femir and to identify any usability issues quickly we conducted a preliminary userstudy.
we used a simple observation process where eachparticipant worked on three tasks that require customizingthe behavior of framework classes using framework extensionpoints.
we then conducted a semi structured interview to gainmore insights about the design of the tool.
five volunteersparticipated in this study.
the participants were all graduatestudents and had previous experience working with eclipse ide and java swing awt libraries.
however the levels of experience differ across the participant pool.
we providedwritten description of the tasks and asked the participants tocomplete the tasks in minutes.
we observed user actionsand interviewed each participant at the end of the study.
in general the five participants agreed that the tool was easy to use and recommendations were useful.
three out ofthe five users mentioned that they were not aware of someextension points until femir recommended those extension points to them.
overall all users agreed that the tool helpedthem to quickly learn usages of framework extension pointsand they were successful to make necessary changes to theircode.
however we also learned a few important lessonsfrom the study.
first three out of the five users searchedon the internet to learn more about the extension points.this is because femir did not provide any explanation of extension points.
after talking with users it became clear that integrating javadoc information would have helped them tounderstand the goal of using extension points.
we also learnedthat code examples in github often have dependencies on other parts of software systems which make them difficult tocomprehend.
thus some users emphasized on including codeexamples that shows the basic usages of framework extensionpoints.
one possible way to improve femir is to enable the tool to automatically discover web tutorials and include code examples from those locations.
finally one user requestedto include the suggestions of framework extension directives or related framework extension points during extending aframework class or implementing a framework interface.
weare currently working to address all these issues.
viii.
c onclusion this paper presents femir a tool that supports automatic detection of framework extension points and their usages.since there can be multiple ways to work with an extensionpoint femir supports grouping of extensions by categories.
developers can use the femir tool to learn extension points and their different usages.
by leveraging a graph mining technique femir can rank extension points as well as their usages based on their frequencies in code examples.
this demonstration will show how femir can be utilized to learn and use framework extension points while developingapplications.
the tool is currently available as an eclipseplugin.
in the future we plan to conduct more thorough userstudies to further investigate the usefulness of the femir tool.
a cknowledgment this work is supported in part by the natural science and engineering research council of canada nserc .