cautious adaptation of defiant components paulo henrique maia lucas vieira matheus chagas yijun y u andrea zisman and bashar nuseibeh state university of cear a fortaleza ce brazil pauloh.maia uece.br lucas.vieira matheus.chagas aluno.uece.br the open university milton keynes united kingdom yijun.yu andrea.zisman bashar.nuseibeh open.ac.uk abstract systems of systems are formed by the composition of independently created software components.
these components are designed to satisfy their individual requirements rather than the global requirements of the systems of systems.
we refer to components that cannot be adapted to meet both individual and global requirements as defiant components.
in this paper we propose a cautious adaptation approach which supports changing the behaviour of such defiant components under exceptional conditions to satisfy global requirements while continuing to guarantee the satisfaction of the components individual requirements.
the approach represents both normal and exceptional conditions as scenarios models the behaviour of exceptional conditions as wrappers implemented using an aspect oriented technique and deals with both single and multiple instances of defiant components with different precedence order at runtime.
we evaluated an implementation of the approach using drones and boats for an organ delivery application conceived by our industrial partners in which we assess how the proposed approach help achieve the system ofsystems global requirements while accommodating increased complexity of hybrid aspects such as multiplicity precedence ordering openness and heterogeneity.
index t erms defiant component adaptation scenarios aspects i. i ntroduction it is now 00am in busy london.
the kidney transplant department in st thomas hospital hospital a has been informed that a matching kidney of a patient in guy s hospital hospital b is now available for its patient waiting for surgery.
the organ transplant department of both hospitals contact the sosdronepayload company and make all the necessary arrangements for the organ to be transferred by drone from hospital b to hospital a. drone dr1235 is selected by sosdronepayload to deliver the organ through its flying corridor over the river thames to avoid land traffic.
at a certain point during the journey the battery of drone dr1235 reduces dramatically and when it reaches drone dr1235 attempts to land before reaching its final destination hospital a .
however at this point drone dr1235 was only km away from hospital a and given the favourable wind conditions at the time drone dr1235 could have reached hospital a with its battery capacity and delivered the critical organ.
in the scenario drone dr1235 was developed independently of the payload organ delivery application and was not intended to change its behaviour during its execution regardless of the application in which it is used.
the abovescenario is not unrealistic in fact a custom made drone delivered a kidney in april to a woman in maryland1 and is likely to become increasingly common.
many applications are developed by the composition of independently created software components into a single system.
these systems are known as system of systems soss and they support the execution of certain functionalities that cannot be achieved by individual participating components on their own.
in such situations it is necessary to support emergent behaviours that appear due to the combination of existing components into new larger systems or even due to new requirements or contextual changes .
the participating software components have been designed to satisfy predefined requirements which are called local requirements following predefined specifications.
they are not necessarily intended to change their behaviour during execution nor to support some global requirements i.e.
complex functionalities that cannot be provided by individual participating components on their own and that arise with the constitution of the system of systems.
we refer to components that resist such changes despite the need as defiant components.
dealing with defiant components in a system of systems is challenging since i one may not have access to the components source code in order to change their behaviour and ii the adaptation should occur only in exceptional situations i.e situations that are temporary and may be influenced by transitory environmental conditions in order to meet the global requirements of the sos.
existing requirement conflict resolution and adaptation approaches have not considered such defiant components .
in this paper we suggest a novel approach that considers the existence of different types of defiant components.
we present a cautious adaptation approach which guarantees that changes in the behaviour of the components will not interfere with their original functionality i.e.
the local requirements of the participating components during their normal use and will only be triggered in exceptional situations.
for example in the above scenario the drone is considered a defiant component since it has been developed with a specification in which it should make a safe landing when its battery decreases to .
however from the perspective of the payload organ delivery application it should be possible to force the drone to continue 34th ieee acm international conference on automated software engineering ase .
ieee authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
flying given the exceptional and favourable wind conditions which will allow the drone to complete its journey.
the approach relies on the use of scenarios to model and identify exceptional situations since the high abstraction level provided by scenarios facilitates identification and understanding of requirements involvement of different stakeholders and analysis of future events of an application.
the use of scenarios has been demonstrated successfully in the literature to support behavioural model checking and to help with decision making .
furthermore we assume that the source code of the components are not available and therefore we propose the use of wrappers implemented using an aspect oriented programming aop technique to support exceptional conditions formalised with behavioural semantics using lts .
in our approach exceptional situations are represented by joinpoints of scenario based aspect weaving given that they can handle exceptions.
aspect oriented programming aop provides wrappers to allow for the introduction of changes into defiant components without requiring consent from the designer of the components or access to the source code of the components as in the case of our approach.
aop avoids the need to redesign a component to satisfy emergent behaviours as in the case when using dependency injection techniques or pluginbased approaches .
on the other hand the use of aop techniques can be risky since changes introduced by the use of aspects may violate the original local requirements of the components.
with the help of model checking our work uses aop in a way that guarantees the original requirements of the components under normal execution conditions.
the remainder of the paper is structured as follows.
section ii describes an overview and a formalisation of the approach to support cautious adaptation of defiant components.
section iii presents the detailed process of the cautious adaptation approach.
section iv describes the implementation and the evaluation of the work in a payload organ delivery application.
section v discusses related work.
section vi concludes the paper and discusses future work.
ii.
a pproach overview figure presents an overview of the cautious adaptation approach.
as shown in the figure the process is divided into three phases namely i defiant component identification ii wrapper design and implementation and iii runtime cautious adaptation .
the first two phases occur at design time while the last phase occurs at run time.
the identification of defiant components phase is supported by the use of scenarios to model the system and to formally verify defiant behaviour of components.
scenarios can be used to represent both exceptional and normal situations of a system and have been widely used for modelling what if situations .
in general scenarios assume the use of offthe shelf software components with predefined requirements and specifications.
our approach uses message sequence chart msc specifications a standard international telecommunication union itu notation for describing theinteraction between communicating processes and to model both ordinary and exceptional scenarios.
the wrapper design and implementation phase addresses the defiant behaviour of one or more components identified in phase and uses aspect oriented programming aop to implement wrappers.
the use of wrappers is to support changes in the behaviour of the defiant components while keeping the satisfaction of the global system requirements.
exceptional situations identified from the scenarios in phase indicate where changes in the system should occur.
we call these places joinpoints and the identified joinpoints are represented as regular expressions as pointcuts .
in this case a replacement of the behaviour of a defiant component after joinpoints can be done through an aspect in terms of advices2.
advices handle exceptions by either invoking existing functionalities of the defiant components or introducing new functionalities and conditions to be executed.
to be used correctly the approach must enforce certain precedence order among the wrappers when more than one wrapper exists for the same exceptional condition.
the runtime cautious adaptation phase weaves the system with wrappers and executes the respective functionalities.
this phase is based on the mape k loop approach .
in this phase monitors are used to observe contextual variables that characterise the surroundings of the system based on data collected from the environment e.g.
wind condition or from sensors e.g.
global positioning systems accelerometer battery level .
the approach analyses the exceptional situations defined in phase .
when exceptional situations exist the wrapper is invoked and the exceptional functionalities as implemented by the aspect advices are executed.
the general problem being tackled can be formalised using the semantics of problem frames as follows.
at the design time of a component c given its world context wc its specification sc must satisfy its requirements rc i.e.
wc sc rc.
suppose that component cis being used as part of a system of systems s .
based on the analysis of exceptional scenarios concerning a specific context of the system ws which satisfies the condition ws wc component ccannot satisfy global requirements of s. in other words ws ss negationslash rs wheresscontainssc.
to verify that the wrapper executes its purpose we formalise three conditions to be checked as follows ws ss negationslash rs ws wc defiant component identification ws ss c w c rs defiant behaviour removal wc ws sw c rc safety assurance defiant component identification checks whether the component s behaviour satisfies the global requirements.
defiant behaviour removal checks that after wrapping up the component with a new behaviour the global requirement can be restored in exceptional situations.
2in aop joinpoints are points of control where it is possible to add additional behaviour while pointcuts refer to predicates that match joinpoints and advices are methods associated with pointcuts.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
overview of the cautious adaptation approach in a workflow diagram safety assurance checks that after wrapping up the defiant component with a new behaviour the local requirements are still satisfied in normal situations.
the introduction of a wrapper w c changes the defiant behaviour of the component c i.e.ws sw c negationslash rc retaining the essential satisfaction of global requirements when cis substituted with w c ws s prime s rswheres prime s ss c w c .
furthermore the adaptation is cautious because other than the exceptional situation ws the wrapped component should behave like the originally designed component i.e.
wc ws sw c rc.
iii.
t hedetailed process of cautious adapta tion in this section we describe each phase of the approach figure in details.
we use the payload organ delivery example presented in section i to illustrate the approach.
suppose two global requirements for the system as gr1 the drone must take the payload organ from the sender hospital to the receiver hospital.
gr2 in the case when the payload cannot be delivered the drone should not lose it e.g.
by landing on the water .
a. defiant component identification as shown in figure the defiant component identification phase is composed of five steps.
the first two steps consist ofmodelling normal and exceptional scenarios of a systemof systems.
the approach advocates the use of scenarios to model core functional requirements of the system of systems and local requirements for each component participating in the system.
we assume that software engineers participating in these modelling activities are able of identifying exceptional scenarios regardless of the requirement elicitation techniques that are used during the process see section v .scenarios are described using message sequence chart specification through two main syntactic components basic msc bmsc and high level msc hmsc .
a bmsc represents a set of asynchronous processes or instances with their exchanged messages.
an hmsc consists of a graph of connected bmscs representing parallel sequential iterating and non deterministic executions.
in an hmsc graph the nodes refer to bmscs and the edges represent execution sequences.
figure shows the hmsc specification of the payload organ delivery scenario.
each box in the hmsc corresponds to one bmsc while the arrows represent the execution flow.
the guard conditions in the bmsc transitions have to be satisfied in order to execute the functionalities represented in the next bmsc.
figure shows parts of the scenarios of the bmscs in figure .
in figure the predefined scenarios are represented by full rectangles and are part of the normal specification of a drone.
we assume that with a controller the pilot can control the drone to take off bmsc take off .
during a flight a drone periodically checks the status bmsc check status o fi t s internal devices and sensors such as battery level and distance from the destination represented by band d respectively in the guard conditions over the transitions.
in the example if the battery level is above the expected threshold and the drone is not yet at its destination the pilot can keep manoeuvring the drone bmsc flying .
when a drone arrives at its destination the pilot sends a landing command to the drone bmsc landing which is acknowledged when the drone lands on the ground and after it shuts down bmsc shut down .
if the battery is below the expected threshold the drone performs a safe landing bmsc safe landing i n accordance to its specification and shuts down.
the above scenario corresponds to the original behaviour of a drone and authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
hmsc for the drone payload delivery example fig.
.
bmscs for the drone payload delivery example represents its local requirements.
in order to model exceptional scenarios the msc specifications are amended with interception points.
these interception points represent points in which conditions are analysed in order to decide whether the original expected scenario isexecuted or an introduced exceptional scenario has to takeplace.
several exceptional situations can be intercepted in thesame point indicating other possible behaviours according toalternative contexts.
if there is no exceptional scenario in aninterception point the expected default scenario is performed.it may also be necessary to identify new contextual variablesand conditions to be used in the transitions.
exceptional scenarios are represented as dashed bmscs in figure .
in our example the exceptional scenarios added onthe interception point state that if the distance to the expecteddestination is less than 2km and the wind is strong conditionstrongwind true then the pilot can keep the drone flying bmsc keep flying even in a low level battery situation and land afterwards.
in this case the drone is able to completeits overall goal of delivering the organ payload successfully global requirements gr1 above .
in the case when the batterylevel is low the drone is flying over the river conditiononwater true but it is more than 2km away or the wind isnot strong then the action is to move the drone aside bmscmove aside in order to land it safely on the ground and therefore satisfy the global requirement gr2.
after the normal and exceptional scenarios are modelled the next step consists of automatically transforming the msc fig.
.
parameterised lts illustrates the behaviours when the contextual variables are parameters bound to user specified constants.
fig.
.
lts of landing the partial behaviour of landing bmsc where theunnamed transitions are the transitions between different bmscs through an epsilon1 reduction these transitions will be removed.
specifications into a parameterised labelled transition system plts .
this is to allow for correctness checks of the model before and after adaptation and to support the lack of knowledge of the ranges of values of contextual variablesat this stage.
the conditions on the transitions in the mscspecification are represented as guards on the state transitions.the approach uses an adaptation of the algorithm to generatelts from msc specifications proposed in with theaddition of the scenario transition guards in the resulting lts.figure depicts the plts for the example of figure .
after the parameterized lts is generated the values of the contextual variables can be instantiated by the developer and a context specific lts representing the system behavior for those values is generated.
figure illustrates the specificlts generated when the developer sets the variables b d km strongwind true and onwater true.
the variable values in that order are shown as parameters inthe transitions in figure .
we assume that after each dronemovement both battery level and distance are decreased byone unit.
steps one to four above were implemented asextensions of lotus .
the context specific lts can be exported to ltsa in order to check both local and global requirements spec ified in terms of properties.
a model checker is applied to verify whether the participating components can satisfyglobal requirements of the system of systems for which itwas not initially designed.
in the case when the componentsatisfies the requirements it can be used as is in the system of systems.
however when the component cannot satisfy globalrequirements i.e.
the case of a defiant component a wrapperis specified in order to weave exceptional situations into thecomponent specification in lts and it is verified by the authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ltsa model checker against the properties.
the adaptation is considered cautious only when allproperties local and global are satisfied by the component within the system of systems context.
if the verification is considered successful through model checking the defiant behaviours need to be addressed further by design time simulation.
b. wrapper design and implementation the wrapper design and implementation phase is composed of four steps as shown in figure .
the first step consists ofidentifying monitorable contextual variables for analysing global requirements.
in the payload organ delivery example the monitorable contextual variables are battery level distance to destination position of drones in relation to water and wind condition.
the contextual variables can be monitored by using either sensors on the environment of the system and on its participating components or external services such as a weather information web services.
in the next two steps the approach maps exceptional situations to corresponding concepts in the aspect oriented paradigm aop .
the main goal of the second step is toanalyse exceptional situations and identify when they are triggered in the msc specification in order to associate them with joinpoints.
the interception points in the msc specifications represent the point in which exceptional situations should be analysed and they are mapped to joinpoints in aop .
for instance considering our drone example the only interception point is the one between the bmscs check status and safe landing when it is checked whether the battery level decreased to .
subsequently we have to identify joinpoints and define the respective pointcuts in which the code will be intercepted.
for our example we defined that method safelanding needs to be intercepted when it is called in order to analyse exceptional situations.
in the third step exceptions are addressed by planning adaptation actions as advices in the components.
using existing functionalities e.g.
maneuvering while disabling certain functionalities e.g.
safe landing it is possible to switch to a different solution through adaptation.
these adaptions actions are implemented as advices in aspect oriented programming language with a type before after or around dependant on the control flow of the exceptional situations.
the following code shows an excerpt of the droneaspect implemented to wrap one defiant behaviour of the drone.
we defined pointcut checkexceptionalconditions that intercepts the call of the drone s original safelanding method when the battery level reaches .
1public aspect droneaspect pointcut checkexceptionalconditions call void safelanding void before checkexceptionalconditions if isoverwater getdistancetargethospital !
isstrongwind getdrone .moveaside void around checkexceptionalconditions if isoverwater getdistancetargethospital isstrongwind getdrone .manoeuvre the above code shows two kinds of syntactic advices before and around .
the before clause line is executed when the drone is over the water and either the distance to the target hospital is no less than 2km or the wind is not strong lines .
in this case the drone executes a modeaside method line which moves the drone to fly over the ground and to execute the original safelanding method.
on the other hand the around clause line is executed when the drone is no more than 2km away from the destination is flying over the water and the wind is strong lines .
unlike the previous before clause new behaviour manoeuvre line replaces the safelanding method which is no longer executed.
when the drone reached the destination it performs the original landing method.
the implemented wrappers are deployed in the system so they can be used at runtime to adapt the behaviour of defiant components.
this is done by weaving the wrapper aspects with the bytecode of the simulated system using the aspectj compiler.
if the defiant component is implemented in other programming languages the wrapper aspects will need to be written in corresponding aop languages .
c. runtime cautious adaptation the last phase encompasses the execution of the recently weaved system which due to our wrapper solution becomes a self adaptive system.
the steps of this phase are derived from the activities of the mape k control loop.
during its execution the system keeps monitoring contextual variables by either checking internal resource levels or receiving environmental data provided by sensors.
it may be necessary to execute some calculations in order to obtain the real value of the monitorable contextual variables.
for instance the value of variable distance from the target d is calculated by the difference between the gps positions of the target hospital and current drone location.
after reading context information the wrapper analyses the exception situations by intercepting the system execution in the defined pointcuts.
in the example this happens after the interception of checkexceptionalconditions pointcut.
the last step corresponds to both planning and execution activities of the mape k loop.
when an exceptional condition is satisfied the wrapper applies the behaviour adaptation by executing the exceptional scenario according to the rules implemented in the advices.
the process continues to be executed until the system finishes its execution.
iv .
i mplementa tion and ev alua tion in order to evaluate our approach we developed a prototype tool to simulate an extension of the payload organ delivery authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
drone application described in section i. we evaluated our approach for both single and multiple heterogeneous defiant components.
in this section we present the evaluation setup with its research questions and the simulator and discuss the results of the evaluation and some threats to validity.
a. evaluation setup we evaluated the approach with respect to the correctness of the implementation of wrappers for identified defiant components to support satisfaction of global and local requirements.
this is necessary since although the properties of the wrappers have been model checked it is still possible to introduce errors during the implementation of the scenario models.
we also evaluated the approach with respect to the use of different wrappers against sources of exceptions generated by complex and uncertain environment.
this evaluation includes variations in the multiplicity and precedence order openness and heterogeneity of defiant components in a system.
for these evaluations we considered two research questions namely rq1.
can the approach be used to achieve global requirements of a system of systems?
rq2 how does the approach behave with the increase of complexity in terms of multiplicity and precedence order openness and heterogeneity of defiant components?
we used the organ payload delivery application described in section i and with the global requirements gr1 and gr2 described in section iii.
for rq1 we used the scenario shown in figure .
for rq2 we used an extension of this scenario described in figure .
as shown in figure the extended scenario has three new functionalities namely return to home glide and call rescue boat .
fig.
.
extended scenario hmscs the return to home functionality in a drone is executed when a drone bypasses a bad connection area and loses connection with the pilot.
this is a common safety procedure present in the majority of existing drones.
in order to simulate this situation we introduced communication antennas in thescenario that emit periodical noise signals causing bad connection in congested areas.
the exceptional scenario for this case consists of allowing the drone to glide while waiting for the connection to return maximising the chances of delivery.
as shown in the figure bmsc return to home happens when the contextual variable bc bad connection is true and the battery level is above b .
when the drone arrives at the depart point contextual variable ds it lands as usual.
the exceptional scenario is represented by the bmsc glide which is performed when a bad connection is detected the distance from the target contextual variable dt is less than the distance from the source hospital contextual variable ds and the battery level is greater than b .
in this case the drone glides while waiting for a connection to be reestablished instead of automatically returning to home.
the call rescue boat functionality is due to an expansion of the application that supports the use of rescue boats to avoid drones landing on water.
the call rescue boat situation is triggered when the distance of the nearest boat to the drone variable db is less or equal to 1km.
this case is described in subsection iv c for the openness complexity.
for each experiment we used executions with an original drone and a wrapped drone departing from the same place and with the same level of battery.
the reason to choose executions is to reach convergence and to get stable results in spite of the randomness of the executions.
in fact we observed that after executions the results were already very stable with less than perturbations.
we also considered the same environmental conditions when performing the executions.
in order to identify the level of battery for the drones to be evaluated we considered nine intervals of batteries namely ... a drone cannot take off with or less battery otherwise it will do a safe landing and for each interval we run drones with batteries in these intervals.
we observed that drones with battery levels ranging from to were best suited to be used in the evaluation since most of the drones with battery level with more than reached the destination while most of the drones with battery level with less than landed on water.
b. the simulator we developed an open source drone simulator called dragonfly to implement both normal and exceptional situations of drones.
through its graphical user interface the simulator allows the user to configure one or several drones determine the source and target hospital locations specify a river flowing between the hospitals and set contextual variables such as initial battery level battery consumption rate wind strength and drone above water.
the simulator also offers an api to create programs to configure the environment and plan and execute the journey of one or a fleet of drones.
a snapshot of the simulator is depicted in figure .
in the simulator the user can manoeuvre the drones either manually or using an automatic pilot control in which the drones try to reach the destination by executing a minimal authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
distance routing algorithm.
moreover the simulator supports the modelling of physical environment entities such as wind and rain and uses heuristics of drone movements by taking into account battery consumption sensors and the current status of the environment e.g.
the level of wind against a drone direction which may cause the drone to move slowly .
with the simulator it is possible to track each drone by checking a panel that shows output traces of the drones in terms of performed scenarios in accordance with the ones modelled in the hmsc.
the panel also shows updates of the battery levels of the drones.
it is also possible to change the wrapper implementation by a customised one and to reuse the same environment.
fig.
.
a screenshot of the dragonfly simulator c. experiments and results in the following we present the experimental results to evaluate the two research questions.
rq1.
can the approach be used to achieve global requirements of system of systems?
for this experiment we used the hmsc in figure .
we considered drones with only one defiant component concerning safe landing functionality when battery level is less or equal to .
we implemented a wrapper w1 representing the exceptional scenarios keepflying and moveaside .
we executed three experiments for different wind strengths.
we varied the frequency of the environmental variable strongwind with respect to the chance of a strong wind happening.
more specifically we considered experiment e1 experiment e2 and experiment e3 respectively for each second of time.
in experiment e1 drones may benefit from strong winds to perform exceptional scenario keepflying only of the time while in e3 the wind is strong constantly.
we modelled the scenario such that when a strong wind gust happens it lasts for seconds.
our objective with those experiments is to check if as the strong wind turns more frequent our approach generates better results for gr1.figure shows the results for experiments e1 e2 and e3.
for drones without wrappers original drones in which wind conditions and the distance to the hospital are not relevant the percentage of drones that arrived at the destination gr1 was for e1 and e2 and for e3.
for global requirement gr2 only and of the original drones performed a safe landing on the ground did not land on water in experiments e1 e2 and e3 respectively.
a high rate of drones landed on the water in the three experiments ranging from to of drones.
in these experiments the factors influencing the success of gr1 and gr2 are concerned with the amount of battery left in a drone to reach the destination and the place where the drones land in the case of safe landing respectively.
the results in figure show that the cautious adaptation approach the use of wrapper w1 improved the success rate as the chance of strong winds increases.
in the case of e1 for which the chance of a wind gust is low only there was no change in the results for gr1 drones that reached the battery threshold less than 2km away of the target hospital performed a safe landing when there was no strong wind.
on the other hand our approach allowed drones to land on the ground by performing the exceptional scenario moveaside .
this caused the results of succeeding with gr2 to increase from to .
no drones landed on the water.
in experiment e2 seven drones were able to perform the exceptional scenario keepflying which contributed to the rise of the success rate of gr1 from to compared to e1.
these numbers are even better for experiment e3 allowing droned to perform keepflying and increasing the gr1 rate from to .
because of this we note that less drones needed to perform moveaside scenario when comparing the results for e1 e2 and e3.
this explains the decrease of the success of gr2 rate from e1 to e2 and e3 .
similarly to e1 no drone landed on the water in experiments e2 and e3.
our approach definitely supports the achievement of global requirements gr1 and gr2.
rq2.
how does the approach behave with the increase of complexity in terms of multiplicity and precedence order openness and heterogeneity of defiant components?
for this experiment we used the scenario in figure .
in order to evaluate rq2 we considered three situations related to different complexity in the scenarios.
we considered scenarios in which we varied the multiplicity and precedence order openness and heterogeneity of the defiant components in the drones as discussed below.
multiplicity and precedence order .
in this case we considered drones with two defiant functionalities namely safe landing and return to home .
we implemented a new wrapper w2 that extends wrapper w1 to deal with the new situation ofreturn to home .
for this case the monitored environment variables are bc bad connection dt distance from the target and ds distance from the source and the glide functionality is implemented as an around advice of the return to home functionality.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
results for the experiments for rq1 we executed experiment e4 with the same environment used in experiments e1 to e3 but with the addition of two communication antennas that give noise signals causing bad connection to the drones.
a new version of an original drone with the return to home functionality and a drone with wrapper w2 were used in e4.
in e4 we considered strong wind condition with of chance.
figure shows the results for this new experiment.
as can be seen from the results due to communication antennas that may prevent the drones to arrive at the target hospital only of the original drones without wrapper w2 landed normally at the destination achieving gr1 when compared to experiments e1 e3 and drones returned to home.
those drones together with ten other drones that landed on the ground resulted in only of drones that satisfied gr2.
moreover of the drones fell on the river.
for the case in which wrappers are used our approach helped to increase gr1 from to by allowing drones perform the scenario keepmoving eight of these drones executed keepmoving after performing the exceptional scenario glide and drones glided for a while and resumed their journey to the target hospital.
with respect to achieving gr2 drones performed the scenario moveaside .
this allowed gr2 to increase from to .
in this scenario no drone landed on water.
experiment e4 has shown that it is possible to have conflicts among defiant components and the need to impose a precedence order.
for instance there were situations in which a drone during the execution of the exceptional scenario glide due to a bad connection had its battery level decreased to which triggered scenario safelanding .
we used a prioritization approach in which the safe landing functionality has higher precedence over the gliding functionality since a low battery situation is more critical and not dealing with it can cause possible hazards to the drone and to the payload.
in figure column gliding and landed at destination by keep flying indicates the percentage of times that the above mentioned situation occurred.
as can be seen with this strategy our approach was able to avoid losing from to drones in experiments e1 e4.
openness.
in this case we wanted to evaluate how the approach supports the introduction of other participating com ponents in the system of systems and continues to deal with defiant situations.
we expanded the organ payload delivery application to support the participation of rescue boats which allows drones to land on boats instead of landing on water.
in this case we added a boat centre with three rescue boats to support the rescue of drones.
in this scenario during the safe landing procedure if a drone does not satisfy environmental conditions to perform the exceptional scenario keepflying then it sends an s.o.s.
message to the boat centre which knows where all rescue boats are along the river.
the boat centre verifies which boat is closer to the drone to be rescued and if it is within the distance threshold of km3 the boat center sends the boat to rescue the drone.
after helping the drone the rescue boat takes the drone with the payload to the destination hospital.
in this way one can increase the success rate of gr1.
in the case in which there are no rescue boats available at an appropriate distance to the boat the drone attempts to perform the moveaside exceptional scenario.
we implemented a new wrapper w3 as an extension of wrapper w2 adding the handling of s.o.s.
messages.
the above situation was executed in experiment e5 and the results are shown in figure .
in this case the achievement of gr1 increases to as drones were rescued by boats and delivered to the hospital.
in the cases in which there was no boat near to those drones then the drones executed scenario moveaside .
this explains why the result for gr2 decreased for this experiment when compared to e4 and w2 from to .
no drone was lost by landing on the water.
heterogeniety.
in this case we wanted to evaluate the approach for heterogeneous defiant components.
more specifically we analysed the case in which defiant situations occur for different types of components in a system of systems.
we expanded the boat rescue scenario described above to allow other types of boats such as cargo transportation boats that are in the river with a purpose different from that of the organ payload delivery application.
consider the situation in which transportation boats can receive requests from the boat centre to rescue drones but can only do this if they are free i.e.
a boat is not a transportation service .
assume that the boat controller s code 3we used a distance threshold of km to give enough time for the boat to arrive to rescue a drone before the drone lands on water.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
fig.
.
results for the experiment for rq2 is not accessible.
when a boat starts a transportation service it becomes unavailable for rescuing drones refusing to respond to new requests from the boat centre until its transportation task is completed.
a conflict exists between the boat s local requirement of being unavailable due to a transportation service and the system of systems global requirement of a drone having to arrive at a hospital.
this conflict occurs only in the exceptional scenario where the drone needs to make an emergency landing while flying over the river and there is a boat close enough to make the rescue.
however the boat is already engaged in a service.
therefore both the boat and the drone are considered defiant components.
in this case it is necessary to implement two wrappers one for the drone and one for the boat.
we considered wrapper w3 for the drone and implemented a new wrapper w4 for the boat.
wrapper w4 changes the boat s destination to the location of a drone that needs to be rescued.
after rescuing the drone the boat will restore to its normal service.
figure shows the results for experiment e6 in which we considered drones with wrapper w3 and boats with wrapper w4.
the results show that five drones arrived at the destination by performing keepflying functionality drones glided and reach the target hospital and two drones are recovered by an available boat.
in this new situation drones were rescued by a defiant boat which means that if those boats did not implement the wrapper these drones would have performed a moveaside functionality as specified in w3 .
the approach avoided drones to land on water and helped deliver the payloads to their destinations.
it contributed to the rise of satisfying gr1 to .
in fact when comparing the results for experiments e4 e5 and e6 the latter is the one with a higher achievement for gr1.
the results also show that of the drones satisfied gr2 and no drone landed on water.
d. discussions the experiments showed that our cautious adaptation approach helps improve the achievement of global requirements in a system of systems.
we are aware of threats to the validity of our evaluation and limitations of the proposed approach.
we discuss them below.
threats to validity.
there are three types of threats to validity in our evaluation.
construct validity.
we simulated up to executions in different scenarios and considered both homogeneous and heterogeneous defiant components.
however in real life cases the contextual variables and their combinations can be muchmore complex.
moreover we only simulated the applications in the context of system of systems but defiant components can be found in other domains such as microservice based distributed systems and internet of things.
in our future work we plan to test the cautious adaptation approach in larger case studies involving a higher number of defiant components and considering other application domains.
internal validity.
the choices made during the simulation such as the environment design distance between the hospitals drone speed and location of antennas may affect the results.
considering all possible choices at once is hard since the combination of variables may lead to an explosion of possibilities.
however in the evaluation we tried to make reasonable realistic choices for the simulations considering plausible values for the environmental variables and internal drone components such as battery levels.
external validity.
defiant components by our definition are a fairly generalisable concept which may manifest as physical hardware components like the drones in this paper as well as cyber physical components including human in the loop.
in the future we plan to evaluate the approach including scenarios with defiant cyber physical components.
limitations.
our approach extends traditional adaptation approaches by changing parameters or calling functions of components that do not offer such possibilities when the source code of the components are not available.
in a way the assumption of adaptability is exchanged with a weaker assumption that it is possible to define joinpoints at which to intervene.
while this works well in highly modularised systems with clear separation of concerns as in the examples shown this may pose further challenges to complex legacy software which is left for future investigations.
another limitation is with regards to the choice of techniques to implement wrappers.
although aop is shown directly applicable to defiant components in this work we are aware of other wrapper techniques which might be more suitable for other types of defiant components in domains such as self driving cars and driverless trains.
we plan to investigate this in future work.
the approaches works without access to the source code of defiant components.
however it is still necessary to know the api signatures of internal methods and to have access to the executable or the byte code part of the implementation.
for instance considering our example it is necessary to know manoeuvre and checkstatus .i n the experiments we only used aspect oriented programming authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
for java programs through aspectj.
the application of aop paradigm to other programming languages will be investigated in the future.
although we have implemented the entire process the wrappers have not been deployed to drones in the real world which would require additional approvals by legal and ethics regulatory bodies.
moreover the use of a simulator abstracted away the time necessary to perform adaptations which may be in fact critical in the context of fast flying drones.
to mitigate this threat we are currently liaising with industrial organisations e.g.
local transport company and real hospitals to deploy the solution into their system of systems.
in the future we would also like to analyse the delays that may be caused by computation and communication activities.
v. r ela ted work our cautious adaptation approach is related to works in the following areas i identification of normal and exceptional scenarios ii self adaptive systems and runtime obstacles iii system of systems and cots adaptation iv aspect oriented programming and dependency injection and v safety assurance of drones and simulation.
we discuss below existing works in each of these areas.
identification of normal and exceptional scenarios.
the first steps of our approach consist of modelling both normal and exceptional situations of a system of systems as scenarios.
although the choice is left to the adopters of our approach on how scenarios will be identified we envisage that some techniques can aid software engineers in this task such as selfadaptive requirements modelling specification mining and reverse engineering techniques.
the work in uses an adaptation oriented requirement modelling approach for system of systems based on goaloriented requirements engineering gore concepts .
the approach allows to specify scenarios for adaptation strategies.
this approach could be helpful to model normal and exceptional mscs used in our approach.
a specification miner takes a program presented as a set of static or dynamic traces as its input and produces one or more candidate specifications with respect to a set of interesting program events .
in this direction one could propose a specification miner that receives dynamic traces from the system of systems execution and generates a set of initial scenarios similarly to the approach proposed in .
other scenarios could also be discovered using reverse engineering techniques that process execution traces and produce candidate mscs .
the work in proposes to reverse engineer goals directly from legacy source code through refactoringbased approaches.
the work in uses mined message sequence charts from the partial ordering of execution traces of concurrent programs.
this technique could be used to support the situation in which mscs of various components need to be composed concurrently.
self adaptive systems and runtime obstacles.
in order to provide high assurance and management of uncertainty atruntime self adaptive systems typically use mapek control loops based on previously known requirements and predefined high variability alternatives .
to manage inconsistencies between global requirements and defiant behaviours of local components we propose a cautious adaptation approach where scenarios are used to identify contextual variables to monitor and points of interception.
in this way the need to prepare high variability alternatives is replaced by creating wrappers that handle exceptional scenarios and contextual conditions.
traditionally safety requirements can be analysed to identify contingency requirements using obstacle analysis where contingency requirements can be viewed as exceptional conditions but they are exposed in requirement goals rather than in concrete scenarios at runtime.
with a similar motivation to handle exceptions at runtime cailliau et al.
proposed probabilistic obstacles that can be addressed through runtime monitoring and verification.
although probabilistic obstacles are conceptually similar to defiant situations our approach directly modifies the behaviour of defiant componentsoff the shelf cots without resorting to probabilistic evidence collection and reasoning on probabilistic ltl.
system of systems soss inconsistency and cots adaptation.
one of the problems to manage inconsistency of soss is to identify conflicts among different components and resolve conflicts through the use of a utility function by the mape k self adaptive feedback loops .
defiant components are a source of conflicts and our cautious adaptation approach can be seen as a means to resolve conflicts by design.
when global requirements are not achievable by the components off the shelf cots adaptation would be required .
although cots adaptation has similar motivations to our cautious adaptation approach the main difference lies in the support of multiple defiant components within cots.
the proposed wrappers aim to partition defiant components by the internal behaviours rather than traditional adaptation at component interfaces.
aop and di.
modification of legacy systems can be supported by the use of aspect oriented programming aop and dependency injection di in particular when it is not allowed to change the design of original system intrusively.
both aop and di could modify the behaviour of original programs.
aop can be applied to both source and binary code while di is applicable typically when the programming languages support reflection .
in our work aop was used for implementing the adaptation concept.
compared to a simple application of aop our approach introduces additional caution by checking proactively that both local and global requirements of the system are satisfied for normal and exceptional conditions of the environment.
when the components are high level rather than simulated programmatically in the running example requirement level aspect oriented approach may also be considered so that the advices can be implemented using traditional functions.
safety assurance of drones and simulation.
formal meth983 authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ods have been applied to provide assurance for safety requirements satisfaction for ua vs .
however runtime assurance of required properties can be weakened by exceptional conditions.
scenarios have been applied to address these exceptional conditions formally.
however such application of scenarios was not enforced by runtime systems due to the black box nature of legacy systems.
our approach makes the early connection between scenario based assurance of formal properties and their practical enforcement through wrappers.
safety requirements among many functional and nonfunctional requirements are critical for transportation systems such as drones .
although several attempts exist for safety assurance incidents of drones still happen often leading to interference in other transport systems like passenger aircraft and airports.
in such cases the protection of drones can be seen as a rather narrowed view of safety with respect to a broader and much more challenging safety and other critical requirements for the system of systems.
the running example of payload organ delivery illustrates that it is not sufficient to consider just the safety cases of the drones.
self adaptive system of systems have to address global requirements.
while a swarm of drones are difficult to be evaluated simulation is a recognized way to assure functionalities before physical tests in the sky.
drone simulations such as dronology are an established way to simulate drones for critical safety properties such as separation of distances.
our simulator goes beyond safety critical properties and consider more general requirements of system of systems.
vi.
c onclusion and future work in this paper we proposed a novel approach to support changes in participating components in system of systems that have been designed to satisfy predefined requirements and not necessarily intended to change their behaviour in order to support global requirements of system of systems.
we call these defiant components .
we presented a cautious adaptation approach that supports changes in the behaviour of defiant components in order to satisfy global requirements in exceptional situations.
the cautious adaptation approach guarantees that changes will not interfere with the original functionalities of the participating components under normal situations.
the approach uses scenarios to represent normal and exceptional situations uses wrappers implemented in aspect oriented techniques to represent behaviour of exceptional situations and executes runtime adaptation.
we use an example of a payload organ delivery drone application to illustrate and evaluate the work.
currently we are extending the approach to support on thefly identification of new exceptional situations due to emergent behaviours and the creation of their respective wrappers.
we are also evaluating the scalability of the work with respect to large scale scenarios in different domains and considering components with complex requirements functionalities and prioritisation decisions.
we plan to define a reference architecture for runtime adaptation of defiant components which can be applied to multipleapplication domains.
we envisage extending the identification of exceptional scenarios to deal with emergent scenarios at runtime.
another area for future work is concerned with the extension of the approach to support analysis of the impact of adaptation during systems execution with respect to multiple crosscutting aspects e.g.
performance and in terms of its side effect on other components participating in a system ofsystems.
vii.