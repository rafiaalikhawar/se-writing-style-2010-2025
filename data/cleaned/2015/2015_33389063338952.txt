phoenix automated data driven synthesis of repairs for static analysis violations rohan bavishi university of california berkeley berkeley california usa rbavishi cs.berkeley.eduhiroaki yoshida fujitsu laboratories of america inc. sunnyvale california usa hyoshida us.fujitsu.commukul r. prasad fujitsu laboratories of america inc. sunnyvale california usa mukul us.fujitsu.com abstract traditional automatic program repair apr tools rely on a testsuite as a repair specification.
but test suites even when available are not of specification quality limiting the performance and hence viability of test suite based repair.
on the other hand static analysisbased bug finding tools are seeing increasing adoption in industry but still face challenges since the reported violations are viewed as not easily actionable.
we propose a novel solution that solves both these challenges through a technique for automatically generating high quality patches for static analysis violations by learning from examples.
our approach uses the static analyzer as an oracle and does not require a test suite.
we realize our solution in a system phoenix that implements a fully automated pipeline that mines and cleans patches for static analysis violations from the wild learns generalized executable repair strategies as programs in a novel domain specific language dsl and then instantiates concrete repairs from them on new unseen violations.
using phoenix we mine a corpus of unique violations and patches from github projects.
in a cross validation study on this corpus phoenix successfully produced bug fixes with a recall of and a precision of .
when applied to the latest revisions of a further github projects phoenix produced correct patches to previously unknown bugs of which have already been accepted and merged by the development teams.
to the best of our knowledge this constitutes by far the largest application of any automatic patch generation technology to large scale real world systems.
ccs concepts software and its engineering automated static analysis domain specific languages programming by example software testing and debugging .
keywords program synthesis program repair static analysis programmingby example this work was done when the author was an intern at fujitsu labs.
of america.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
esec fse august tallinn estonia association for computing machinery.
acm isbn .
.
.
.
reference format rohan bavishi hiroaki yoshida and mukul r. prasad.
.
phoenix automated data driven synthesis of repairs for static analysis violations.
in proceedings of the 27th acm joint european software engineering conference and symposium on the foundations of software engineering esec fse august tallinn estonia.
acm new york ny usa pages.
introduction software debugging and patching is a time consuming and laborintensive aspect of the software development process for which an automated solution is highly desirable.
this has motivated a significant body of research on automatic program repair apr .
typical apr techniques use a test suite as a repair specification i.e.
an oracle that fails on the buggy program and which the correct patch for the bug should satisfy.
however such specificationquality test suites may be hard to obtain in practice.
indeed recent research has demonstrated that apr using real life test suites generates a substantial number of incorrect patches over fitted to the test suite .
most apr techniques are organized implicitly or explicitly as a search problem and consciously limit the repair search space to keep the repair process viable.
this inevitably also curtails the scope of potential repairs with state of the art apr techniques correctly fixing less than of the bugs in publicly available bug datasets such as defects4j .
these limitations present significant challenges to the practical adoption of test suite based apr techniques.
a noteworthy related trend has been the increasing deployment of static analysis based bug finding tools in development practice.
over the last several years synopsys coverity scan has identified over .
million defects in over active open source software oss projects with more than of these defects actually fixed by developers .
this trend is mirrored in industry as companies such as google facebook and microsoft have actively integrated static analysis tools into their development flows.
however the reported bugs still need to be investigated diagnosed and fixed manually.
in fact recent case studies have recognized this aspect as a significant barrier to the widespread adoption of static analysis based bug finding .
in the sequel we use the term static analyzer sa as shorthand for a static analysisbased bug finding tool.
this landscape has motivated some interesting solutions to practical program repair backed by static analysis.
development environments such as intellij eclipse and visual studio now offer a quick fix recommendation feature to fix simple programming errors automatically.
however these extensions work off a manually defined set of fix templates and therefore cannot be automatically enriched with past bug fixing experience and or esec fse august tallinn estonia rohan bavishi hiroaki yoshida and mukul r. prasad customize their bug fixing to a particular development setting.
further these tools seem to be unable to generate more comprehensive fixes such as the ones in figure .
in recent work the footpatch tool proposed the automatic detection and repair of heap properties using static analysis.
however its patch generation is specifically developed for the given class of bugs and non trivial to extend to other arbitrary bug classes.
our approach.
in this work we propose a learning based static program repair approach that is comprised of two key elements it uses an off the shelf static analyzer such as findbugs infer or error prone as an oracle to identify potential bugs and also to certify a patch as a viable fix for such a bug and it learns repair strategies from real patches mined from big code.
this eliminates dependence on a test suite while leveraging the now widely used static analyzers.
the patch generation nicely complements the sa s bug detection increasing the usability of both technologies.
our learning based approach is quite general in that it is not tied to a specific class of bugs or repair strategies.
at the same time it can learn strategies very specific to each bug type reported by the sa tool potentially increasing repair accuracy.
in order to learn repair strategies from example patches our approach uses a specially crafted dsl to describe the strategies as programs and a synthesis algorithm to generate the programs.
a key distinguishing feature of our approach is that it views each repair as a set of related edits emanating from a root cause.
it identifies this root cause as a primary node in the abstract syntax tree ast of the program and describes each of the edits relative to this primary node using a combination of syntactic and semantic