large scale analysis of framework specific exceptions in android apps lingling fan1 ting su2 sen chen1 guozhu meng3 yang liu2 lihua xu1 geguang pu4 zhendong su5 1school of computer science and software engineering east china normal university china 2school of computer science and engineering nanyang technological university singapore 3sklois institute of information engineering chinese academy of sciences china 4shanghai key laboratory of trustworthy computing east china normal university china 5department of computer science university of california davis usa ecnujanefan tsuletgo ecnuchensen gmail.com gzmeng yangliu ntu.edu.sg lhxu cs.ecnu.edu.cn ggpu sei.ecnu.edu.cn su cs.ucdavis.edu abstract mobile apps have become ubiquitous.
for app developers it is a key priority to ensure their apps correctness and reliability.
however many apps still suffer from occasional to frequent crashes weakening their competitive edge.
large scale deep analyses of the characteristics of real world app crashes can provide useful insights to guide developers or help improve testing and analysis tools.
however such studies do not exist this paper fills this gap.
over a four month long effort we have collected unique exception traces from open source android apps and observed thatframework specificexceptions accountforthemajorityofthese crashes.
we then extensively investigated the frameworkspecific exceptions which took six person months identifying their characteristics e.g.
manifestation locations common fault categories evaluatingtheirmanifestationviastate of the art bug detection techniques and reviewing their fixes.
besides the insightstheyprovide thesefindingsmotivateandenablefollow up researchonmobileapps suchasbugdetection faultlocalization and patch generation.
in addition to demonstrate the utility of our findings we have optimized stoat a dynamic testing tool and implementedexlocator anexceptionlocalizationtool forandroid apps.stoatisabletoquicklyuncoverthreepreviously unknown confirmed fixed crashes in gmail and google exlocator is capable of precisely locating the root causes of identified exceptions in real world apps.
our substantial dataset is made publicly available to share with and benefit the community.
ccs concepts software and its engineering software testing and debugging ting su lihua xu and geguang pu are the corresponding authors.
lingling fan and ting su contributed equally to this work.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acm mustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
icse may june gothenburg sweden association for computing machinery.
acm isbn ... .
empirical study mobile app bugs testing static analysis acm reference format linglingfan tingsu senchen guozhumeng yangliu lihuaxu geguang pu zhendong su.
.
large scale analysis of framework specific exceptionsinandroidapps.in icse icse 40thinternationalconference onsoftwareengineering may27 june3 gothenburg sweden.
acm new york ny usa pages.
introduction mobileapplicationshavegainedgreatpopularityinrecentyears.
forexample googleplay themostpopularandroidmarket has overthreemillionapps andmorethan50 000appsarecontinuously published on it each month .
to ensure competitive edge app developers and companies strive to deliver high quality apps.
one of their primary concerns is to prevent fail stop errors such as app crashes from occuring in release versions.
despite the availability of off the shelf testing platforms e.g.
roboelectric junit appium andstaticcheckingtools e.g.
lint findbugs sonarqube many released apps still suffer from crashes two recent efforts discovered hundreds of previously unknown crashes in popular and well tested commercial apps.
moreover researchers have contributed a line of work to detect app crashes but none of them have investigated the root causes.
it leaves developers unaware of how to avoid and fix these bugs and hinders the improvement of bug dete ction fault localization and fixing techniques.
as observed by our investigation on issues from android apps hosted on githubandgooglecode developersareunabletoresolvenearly reported crashes 1which greatly compromises app quality.
this situation underlines the importance of characterizing a largenumberofdiversereal worldappcrashesandinvestigating how to effectively detect and fix them.
however such a study is difficult and yet to be carried out which has motivated this work.
when an app crashes the android runtime system will dump an exception trace that provides certain clues of the issue e.g.
the exception type message and the invoked methods .
each exception can be classified into one of three categories application exception framework exception and library exception based on 1filtered by the keywords crash or exception in their issue descriptions.
acm ieee 40th international conference on software engineering authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
icse may june gothenburg sweden l. fan t. su s. chen g. meng y. liu l. xu g. pu and z. su which architecture layer threw the exception.
in particular our study focuseson frameworkexceptions whichaccount formajorityofappcrashes affectingover75 oftheprojects asrevealed by our investigation in section .
.
wefacetwokeychallengesincarryingoutthestudy.thefirstis thelackofcomprehensivedataset.toenablecrashanalysis weneed a comprehensive set of crashes from a large number of real world apps.
ideally for each crash it includes exception trace buggy sourcecode bug triggeringinputs andthepatches ifexists .however to the best of our knowledge no such dataset is publicly available.
despite open source project hosting platforms maintain issue repositories such as github our investigation reveals only asmallsetofcrashissues areaccompaniedwithexception traces.amongthem eveniftheissueisclosed itisnotnecessarilyassociatedwiththebuggycodeversion.thesecondconcerns difficultiesincrashanalysis.analyzingcrashesneedsunderstandingoftheapplicationlogicaswellastheandroidframework or libraries .
it is also necessary to cross validate the root causes e.g.
reproducing crashes investigating knowledge from developers .
however no reliable tool exists that can facilitate our analysis.
to overcome these challenges and conduct this study we made substantialefforts.wehavecollected16 245uniqueexceptiontraces from open source android apps by mining their issue repositorieshostedongithubandgooglecode and applying state of the artapptestingtools monkey sapienz and stoat on their recent versions corresponding to executables tocomplementthemineddata.thewholedatacollection processtookfourmonths.weidentified8 243uniqueframework exceptions and spent nearly six person months carefully inves tigating these crashes by examining the source code of apps and theandroidframework fixesfromdevelopers bugreportsfrom testing tools and technical posts on stack overflow.
we aim to answer the following research questions rq1 compared with other exception categories are framework exceptions recurring that affect most android apps?
rq2 what arethe common faults madeby developers thatcause framework exceptions?
rq3 what is the current status of bug detection techniques on detecting framework exceptions?
are they effective?
rq4 howdodevelopersfixframeworkexceptions?arethereany common practices?
what are the difficulties for fixing?
through answering the above questions we aim to characterize androidappcrashes causedbyframeworkexceptionsinparticular andprovideusefulfindingstodevelopersaswellasresearchers.for example ourinvestigation revealsframeworke xceptionsareindeed recurring.moreover theyrequiremorefixingefforts onaverage 4daysperexception buthavelowerissueclosingrate only53 than applicationexceptions .
throughcareful inspection we distilled common faults that developers are most likely to make yet have not been well investigated by previous work .
wefurtherevaluatethedetectionabilitiesofcurrentdynamic testing and static analysis techniques on framework exceptions.
we are surprised to find static analysis tools are almost completely ineffective only gives correct warnings on out of total exception instances although there are some plausible ways to improve them.
dynamic testing tools as expected can reveal frameworkexceptions but still far from effective on certain fault categories.
theirtestingstrategieshaveabigimpactonthedetectionability.
in addition we find most exceptions can be fixed by four common practiceswithsmallpatches lessthan20codelines butdevelopers still face several challenges during fixing.
our findings enables several follow up research e.g.
bug detection faultlocalization andpatchgenerationforandroidapps.
to demonstrate the usefulness of our findings we have optimized stoat adynamictestingtool andimplementedexlocator anexceptionlocalizationtool forandroidapps.theresultsarepromising stoat quickly revealed previously unknown bugs in gmail and google exlocatorisabletopreciselylocalizetherootcausesof identified exceptions in real apps.
to summarize this paper makes the following contributions to our knowledge we conducted the first large scale study to characterizeframework specificexceptionsinandroidapps and identified common fault categories that developers are most likelytomake.theresultsprovideusefulinsightsfordevelopers and researchers.
our study evaluated the state of the art exception detection techniques andidentifiedcommonfixingpracticesofframework exceptions.
the findings shed light on proposing more effective bug detection and fixing techniques.
ourfindingsenableseveralfollow upresearchwithalarge scale and reusable dataset that contains unique exception traces from open source apps.
our prototype tools also demonstrate the usefulness of our findings.
preliminary .
existing fault study researchers have investigated android and symbian oses failures and windows phone app crashes .
as for the bugs of androidapps anumberofstudiesexistindifferentaspects performance energy fragmentation memory leak gui failures resource usage api stability security andetc.
however none of them focus on functional bugs which are also critical to user loyalty and app success.
our work focuses on this scope.
oneofthefirstattemptsatclassifyingfunctionalbugsisfrom huet al.
.
they classify bug types from apps.
other efforts however have different goals coelho et al.
analyzeexceptionstoinvestigatethebughazardsofexception handling code e.g.
cross type exception wrapping zaeem et al.
study bugstogeneratetestingoraclesforaspecificsetofbugtypes.none ofthemgiveacomprehensiveanalysis andthevalidityoftheirconclusions are unclear.
therefore to our knowledge we are the first to investigate android app crashes and give an in depth analysis.
our study focuses on the framework specific exceptions framework exception for short throughout the paper that can crash apps i.e.
those exceptions thrown from methods defined in the android framework due to an app s violation of constraints enforced by the framework.
note we do not consider the framework exceptionscausedbythebugsoftheframeworkitself.wedonotanalyzeapplicationexceptions leavethisasourfuturework andlibraryexceptions sincedifferentappsmayusedifferentthird partylibraries whose analysis requires other information .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
large scale analysis of framework specific exceptions in android apps icse may june gothenburg sweden .
exception model in android androidappsareimplementedinjava andthusinheritjava sexceptionmodel.javahasthreekindsofexceptions.
runtimeexception the exceptions that are thrown during the normal operation of the java virtual machine when the program violates the semantic constraints e.g.
null pointer