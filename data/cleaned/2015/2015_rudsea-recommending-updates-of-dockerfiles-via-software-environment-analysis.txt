rudsea recommending updates of dockerfiles via software environment analysis foyzul hassan university of texas at san antonio usa foyzul.hassan utsa.edurodney rodriguez university of texas at san antonio usa rodney.rodriguez utsa.eduxiaoyin wang university of texas at san antonio usa xiaoyin.wang utsa.edu abstract dockerfiles are configuration files of docker images which packagealldependenciesofasoftwaretoenableconvenientsoftware deployment and porting.
in other words dockerfiles list all environment assumptions of a software application s build and orexecution so they need to be frequently updated when the envi ronment assumptions change during fast software evolution.
in thispaper weproposerudsea anovelapproach torecommend updates of dockerfiles to developers based on analyzing changes on software environment assumptions and their impacts.
our evaluationon1 199real worldinstructionupdatesshowsthatrudsea canrecommendcorrectupdatelocationsfor78.
oftheupdates and correct code changes for .
of the updates.
ccs concepts software and its engineering keywords dockerfiles software environment string analysis acm reference format foyzul hassan rodney rodriguez and xiaoyin wang.
.
rudsea recommending updates of dockerfiles via software environment analysis.
in proceedingsofthe201833rdacm ieeeinternationalconferenceonautomated software engineering ase september montpellier france.
acm newyork ny usa 6pages.
introduction modern software often depends on a large variety of environment dependencies to be properly deployed and operated on production machines.
databases application servers system tools and supportingfilesoftenneedtobewellinstalledandconfiguredbefore software execution and thus may cause tremendous effort andhigh risks during software deployment.
this is not one time butcontinuous cost due to the fast software evolution and delivery nowadays.
a practical approach to alleviate this effort is to use container images.acontainerimageisastand aloneandexecutablepackage permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acmmustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
ase september montpellier france association for computing machinery.
acm isbn ... .
etc.itcanbeeasilyportedanddeployedtoothermachines butis muchlighter weightthantraditionalvirtualmachineswhichcan achieve similar goals.
despite the large benefit brought by container images during software deployment they alsoincrease theeffort ofsoftware developers because they need to generate and maintain the image configurationfileswhichdescribehowthecontainerimagescan beconstructedwithallenvironmentdependencies suchaswhat tools and libraries should be installed and how the file structure should be set up.
a recently study on dockerfiles by cito et al.
shows that in top projects a docker file is averagely revised .
times each year note that there can be multiple dockerfiles in one project and the average and maximum number ofdockerfiles per project in our dataset is .
and .
such a task can be tediousand error prone because modern software typically relies on many environment dependencies and due to fast evolution of softwarerequirementsandunderlyingframeworks suchdependencies also need to be changed very frequently some environment changes e.g.
automaticsystemupdates environmentchangesduring installation of irrelevant software can happen without any developeractionssodevelopersmayevennotbeawareaboutthem developerscaneasilyneglectenvironmentdependenciesoftheir software when they set up or change them because the changes aremadeintheoperatingsysteminsteadofthesoftwareitself and many environment dependencies e.g.
system tools supporting files cannotbecheckedduringsoftwarecompilationbutonlyused at runtime so they can be easily missed during compilation andtesting which is hardly thorough .
once an incomplete or erroneousimageconfigurationfileisbeingused thecontainerimage willalsobeincompleteorcontainserrors whichmaycausefailures in production machines.
inthispaper weproposeanoveltechnique rudsea tohelpdeveloper update container image configuration files more easily and withmoreconfidenceontheircorrectness.specifically basedonan existingimagecontainerfile rudseafirsttrackstheaccessesto the system environment from software source code and build configurationfiles.
suchaccesses areextracted asenvironment relatedcodescope.then foreachcodecommit rudseatracesitsimpact onenvironment related codescope andautomatically determines whether certain items in the image configuration file should be updated accordingly.
based on the type of code impact and configuration items rudsea further recommends the actual updates thatshould bemade onthe items.weimplementour techniquefordocker whichiscurrentlythedominatingframeworkincontainer authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france foyzul hassan rodney rodriguez and xiaoyin wang imagesforbothsoftwareindustryandopensourcecommunity and theimageconfigurationfilesfordockerarecalled dockerfiles.notef that although the implementation and evaluation of this research focus on docker images and dockerfiles the general approach is applicable to other container images such as kubernetes oci etc.
toevaluaterudsea wecarriedoutanexperimentonadataset of dockerfiles in software projects collected from github.
our evaluation shows that rudsea correctly recommends update locations for of instruction updates in dockerfiles with a precisionof49.
.furthermore rudseaisabletocorrectlyrecommend the actual revision for of the dockerfile updates.
to sum up this paper makes the following contributions.
rudsea anoveltechniqueonautomaticallyrecommendingupdatelocationsandcontentsfordockerfilesduringsoftware evolution.
adatasetofdockerfilesandtheircorrespondinghistorical versions as benchmarks for future research on this topic.
an empirical evaluation of rudsea s effectiveness on real world dockerfiles.
therestofthispaperisorganizedasfollows.first wewillintroducesomebackgroundknowledgeaboutdockerfilesinsection2.
then we describe our approach and detailed techniques in section .
after we present our evaluation results in section we discuss some related works in section and concludes in section .
background in this section we will introduce some background knowledge about dockerfiles.
a dockerfile typically consists of three parts.
the first part from specifies an existing container image that the configured image is based upon.
some examples of existing images mayincludeacleanubuntusystemofacertainversion orapublicly available image prepared with java android sdk and databases.
thesecondpart parserdirectives describesrulessuchasescape characters on parsing the rest of the dockerfile and is optional.
thethirdpart environmentreplacements isthemainpartofthe dockerfile anddescribeshowtheimageshouldbeconstructedwith a sequence of instructions.
the major types of instructions are listed below.
run workdir executing a system command or executablewithintheworkingdirectoryspecifiedby workdir.
cmd entrypoint setting the default command cmd tobeexecutedandarguments entrypoint tobeusewhen executing the container image.
label settingenvironmentvariablesinthecontainerimage.
expose exposing a network port in the container image.
env definingavariabletobeusedintherestofthedockerfile.
add copy add a new directory file in the file system of thecontainerimage andcopydirectories filesfromhosting system to the image.
from the list we can see that three types of instructions will beupdatedfrequentlyduringsoftwareevolution whichare run instructions updatingversionsoftools librariestobeinstalled labelinstructions updating environment variables and add copyinstructions changingdefaultfilestructures .bycontrast other instructions are either typically stable e.g.
expose cmd entrypoint or used only in the dockerfile itself e.g.
env .
therefore ourpaperfocusesontheupdatesof run label and add copy instructions.
approach as shown in figure our approach consists of two major components.
the first component extracts software code that is relatedto the items in dockerfiles.
here the software code base includes sourcefiles buildconfigurationfiles andpropertyfiles.thecore part of this component is value dependency analysis and we applyittobotholdandnewversionstoacquiretheresultsforboth versions.
the second component receives the analysis results of two code versions and generates the actual updates.
it leverages changeimpactanalysistodeterminewhetherthecodechangemay affect the environment related code and equivalence analysis to check whether new code is added as the equivalent part of known environment related code.
.
extracting environment related code scope the major challenge of extracting environment related code is thecomplicatedinterfacebetweensoftwareanditsenvironment.
while software libraries and their versions are typically listed in build configuration files e.g.
makefile for gnu make pom.xml for maven build.gradle for gradle