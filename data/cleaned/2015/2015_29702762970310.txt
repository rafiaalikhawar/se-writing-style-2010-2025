array length inference for c library bindings alisa j. maas university of wisconsin madison madison wi usa ajmaas cs.wisc.eduhenrique nazar universidade federal de minas gerais belo horizonte brazil hnsantos dcc.ufmg.brben liblit university of wisconsin madison madison wi usa liblit cs.wisc.edu abstract simultaneoususeofmultipleprogramminglanguages polyglotprogramming assists in creating efficient coherent modern programs in the face of legacy code.
however manually creating bindings to low levellanguageslikecistediousanderror prone.
weofferrelief intheformofanautomatedsuiteofanalyses designedtoenhancethe quality of automatically produced bindings.
these analyses recover high level array length information that is missing from c s type system.
we emit annotations in the style of gobject introspection whichproducesbindingsfromannotationsonfunctionsignatures.
weannotate each arrayargumentas terminated by aspecial sentinel value fixed length or of length determined by another argument.
these properties help produce more idiomatic efficient bindings.
we correctly annotate at least of all arrays with these length types andourresultsarecomparabletothoseproducedbyhuman annotators but take far less time to produce.
ccs concepts softwareanditsengineering !automatedstaticanalysis software libraries and repositories data types and structures software maintenance tools theory of computation !type structures pattern matching keywords ffi foreignfunctioninterfaces bindings libraries staticanalysis type inference .
introduction in modern programs writing code in a single language may notalwayssuffice.
developersmaywishtowritenewcodeinone programminglanguageyetuselegacycodewritteninanother ormay wishtoswitchamonglanguagesdependingonthetaskathand.
this leads programmers to produce polyglot programs that mix multiple languages in a single application.
foreign function interfaces ffis support polyglot developers by letting high level languages call into low level languages through a series of library bindings .
these bindingscanhide thetediousdetailsof convertingdatatypesfromone language to another.
in the context of a cross language function call thehostlanguage is the language supporting the callee and the guestlanguage is the language supporting the caller.
a well written binding does more than just hide low level details ofpolyglotprogramming.
itadditionallyexposeslow levellanguage functions in a way that is consistent with the style and idioms of thehigh level language.
forexample acfunctionthat acceptsan array usually also requires the array s length as a separate argument.
a well written idiomatic binding hides such details freeing the programmer to simply pass the array.
however creatingbindingsmanuallyistime consumingandtedious.
additionally human created bindings frequently contain errors section5.
.
resultinginascarcityofhigh qualitybindings.
weareconcernedwithcreatinghigh qualitybindingstoc apopular target for language bindings.
however the c type system lacks high level type information complicating the automatic production of high quality bindings.
for example most high level languages clearly distinguish pointers