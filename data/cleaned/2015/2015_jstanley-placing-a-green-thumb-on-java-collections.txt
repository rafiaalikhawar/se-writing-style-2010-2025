jstanley placing a green thumb on java collections rui pereira haslab inesc tec universidade do minho portugal ruipereira di.uminho.ptpedro sim o nova lincs di fct universidade nova de lisboa portugal p.simao campus.fct.unl.pt j come cunha nova lincs universidade do minho portugal jacome di.uminho.ptjo o saraiva haslab inesc tec universidade do minho portugal saraiva di.uminho.pt abstract software developersare moreand moreeager tounderstand their code senergyperformance.however evenwithsuchknowledge itisdifficulttoknowhowtoimprovethecode.indeed littletool supportexiststounderstandtheenergyconsumptionprofileofa softwaresystemandtoeventually automatically improveitscode.
inthispaperwepresentatooltermed jstanleywhichautomatically finds collections in java programs that can be replaced by otherswithapositiveimpactontheenergyconsumptionaswellas ontheexecutiontime.inseconds developersobtaininformation aboutenergy eagercollectionusage.
jstanleywillfurthersuggest alternative collections to imp rove the co de making it use less time energy oracombinationofboth.thepreliminaryevaluationwe ran using jstanleyshows energy gains between and and a reduction in execution time between and .
avideocanbeseenat ccs concepts softwareanditsengineering softwareperformance software design tradeoffs software evolution keywords green software energy aware software jcf eclipse plugin acm reference format ruipereira pedrosim o j comecunha andjo osaraiva.
.jstanley placing a green thumb on java collections.
in proceedings of the 33rd acm ieee international conference on automated software engineering ase september montpellier france.
acm new york ny usa 5pages.
workfinancedbyeuropeanregionaldevelopmentfundthroughtheoperationalprogrammeforcompetitivenessandinternationalizationcompete 2020programmeandbynationalfundsthroughtheportuguesefunding agencyfctprojectpoci feder .thefirsttwoauthorsare supported by grants sfrh bd andptdc eei ess .
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation on the first page.
copyrights for components of this work owned by others than acmmustbehonored.abstractingwithcreditispermitted.tocopyotherwise orrepublish topostonserversortoredistributetolists requirespriorspecificpermissionand ora fee.
request permissions from permissions acm.org.
ase september montpellier france association for computing machinery.
acm isbn ... .
introduction originally computer performance was the principal concern for software developers and manufacturers alike.
now while yet not a dramaticchange therehasbeenamajorshiftinfocus.increasing energycostsrelatedtoictinorganizations datacenters andsociety senvironmentalconcerns arestartingtochangethe wayboth computermanufacturers andsoftwareengineers areresponding and looking at the issue of software energy efficiency.
whiletherearemanyenergyestimationandmeasurementtools thesedonotsupplydeveloperswiththecounselingneeded for energy aware development.
in fact recent findings haveshownthatprogrammersareawareoftheenergyconsumption problem many times seeking help in resolving this.
there are many misconceptions within the programming communityas to what causes high energy consumption how to solve theseissues and expressed heavy lack of support and knowledge for energy aware development.
pintoandcastor arguethattherearetwomainproblems in regards to energy efficient software development the lack of knowledge the lack of tools.theyalsomentionseveralkeypoints on energy related solutions to software engineering three of these being static analysis tools refactoring and data structures.
in this paper in section we detail our jstanleytool which touchesonthepriorthreepoints.
jstanleyisastaticanalysistool which suggests a more energy efficient and or performance efficient java collection by statically detecting collections used ina java project and which methods are used for each collection.using this information it not only suggests a better alternative but can automatically change the code with the new collections if theprogrammerchoosesso.however itisnotpossibletoalways guarantee the change to best collection is a refactoring as some collections for instance change the order of the elements.
more specifically thistool is based on previouswork on the influenceofthejavacollectionframework jcf inregardstoenergy consumption where energy consumption and performance profile tables were attributed to each of the jcf s collections lists sets and maps down to a method level.
we have ran an initial evaluation with publicly available java projectsusedinotherresearchworksand using jstanley improved the energy consumption between and .
the execution time has also decreased between and section .
weconcludeourpaperwithsection 4describingrelatedwork andsection summarizingour paperandlookingatfuturework.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
ase september montpellier france r. pereira p. sim o j. cunha and j. saraiva jstanley jstanley1isastaticanalyzerdevelopedasaneclipsepluginsince thisisthemostusedideforjava.thetoolweproposeiscapableof staticallydetecting theusageof energy inefficientcollectionsand suggest better alternatives.
it can do the same but considering the executiontimeorbothenergyandtimeatthesametime.tothis end it uses information on the energy consumption and execution time for java collections .
this information can be provided to the tool through a set of csv files one per type of collection map listandset .eachfilemustcontaininformationabouttheenergy and time usage for each method of the collection.
jstanleyconstructstheabstractsyntaxtree ast oftheprogram being analyzed traversing it to compute the number of method calls of a given collection variable.
as a result the tool knows how many method calls for each variable of a collection the program has.
for instance for a given program the tool can tell variable aof type arraylist has calls to the method addand to get and variable bof type hashmap has calls to put throughout the whole program.
figure jstanley eclipse menuourtoolprovidesadropdownmenu within eclipse as shown in figure allowing programmers to select their preferences.
this menu displays options to chooseiftheywishtofocusonenergy ex ecutiontime orboth bychoosingjoules milliseconds or both respectively.
additionally aswehaveseeninourprevious study different population sizes bringaboutdifferentenergyprofilesfor collections.
thus there is also an option to allow the programmer to choose which of the three options are closest to what they believe would best represent the program.
before analyzing a program the tool loads the data tables from csvfiles correspondingtothesettingschosenbytheprogrammer.
thisinformationisfirstnormalizedbysortingeachmethodfrom each collection and attributing a value of to the lowest.
afterwards each other value is divided by the lowest obtaining a value greater than indirectly encoding the percentage of how worse that collection s method is to the lowest one.
this is done for both energy and time values allowing the tool to combine these values to obtain an overall ranking if both options are chosen to optimize.
thecalculatedsuggestionscanbeshownvisuallythroughsource codeflagging asshowninfigure .hereasmallflagappearsnextto anidentifiedcollectionwhichmaybechangedtoamoreoptimized one and shows the programmer the best two alternatives.
if theprogrammer wishes they may select the option to change the collections to the suggested one.
it is to note that pure refactoring propertiesmaynotbeguaranteedwhenchangingcollections for example natural sorting in treecollections or the non acceptance ofnullvalues in hashtable collections.
.
implementation fourtasksdividethetool sanalysis.thefirsttask source code analysis detects existing collections within the program and all 1jstanley and other resources for this paper can be found at greensoftwarelab jstanley figure suggestion flagging and quick fix the invocations on these collections.
using the constructed ast and the astvisitor offered by the eclipse jdt api we can easily visit each variable and method invocation.
using the astvisitor we collect all the ast nodes which are fielddeclarations variabledeclarationstatements and assignments.these nodesallow us to determine the data type of a variable and focus on those which are collections.
afterwards we analyze all the methoddeclaration nodes.
often times collectionsarepassedtomethodsasparameters.thus we also collect all these method