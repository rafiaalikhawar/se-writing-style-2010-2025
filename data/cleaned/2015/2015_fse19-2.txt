delft university of technology monitoring aware ides winter jos aniche maur cio cito j rgen van deursen arie publication date document version accepted author manuscript published in esec fse citation apa winter j. aniche m. cito j. van deursen a. .
monitoring aware ides.
in esec fse proceedings of the 27th acm joint european software engineering conference and symposium on the foundations of software engineering pp.
important note to cite this publication please use the final published version if applicable .
please check the document version above.
copyright other than for strictly personal use it is not permitted to download forward or distribute the text or part of it without the consent of the author s and or copyright holder s unless the work is under an open content license such as creative commons.
takedown policy please contact us and provide details if you believe this document breaches copyrights.
we will remove access to the work immediately and investigate your claim.
this work is downloaded from delft university of technology.
for technical reasons the number of authors shown on this cover page is limited to a maximum of .
monitoring awareides joswinter jos.winter adyen.com adyen n.v. amsterdam the netherlandsmaur cio aniche m.finavaroaniche tudelft.nl delft universityof technology delft the netherlands j rgencito jcito mit.edu massachusetts institute of technology cambridge ma usaarie van deursen arie.vandeursen tudelft.nl delft universityof technology delft the netherlands abstract engineering modern large scale software requires software developers to not solely focus on writing code but also to continuously examine monitoring data to reason about the dynamic behavior oftheirsystems.theseadditionalmonitoringresponsibilitiesfor developers have only emerged recently in the light of devops culture.
interestingly software development activities happen mainly in the ide while reasoning about production monitoring happens in separate monitoring tools.
we propose an approach that integratesmonitoringsignalsintothedevelopmentenvironmentand worklow.weconjecturethatanidewithsuchcapabilityimproves the performance of developers as time spent continuously context switchingfromdevelopmenttomonitoringwouldbeeliminated.
this paper takes a irst step towards understanding the beneits of a possible monitoring aware ide.
we implemented a prototype ofamonitoring aware ide connectedtothe monitoringsystems of adyen a large scale payment company that performs intense monitoring in their software systems.
given our results we irmly believethatmonitoring awareidescanplayanessentialrolein improvinghowdevelopers perform monitoring.
ccs concepts software and its engineering integrated and visual development environments keywords softwareengineering devops systemsmonitoring runtimemonitoring integrateddevelopmentenvironment ide.
acmreference format jos winter maur cio aniche j rgen cito and arie van deursen.
.
monitoring awareides.in proceedingsofthe27thacmjointeuropeansoftware engineering conference and symposium on the foundations of software engineering esec fse august 26 30 tallinn estonia.
acm new york ny usa 12pages.
permissionto make digitalor hard copies of allorpart ofthis work for personalor classroom use is granted without fee provided that copies are not made or distributed forproitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation ontheirstpage.copyrights forcomponentsofthisworkownedbyothersthanthe author s mustbehonored.abstractingwithcreditispermitted.tocopyotherwise or republish topostonserversortoredistributetolists requirespriorspeciicpermission and or a fee.
request permissions from permissions acm.org.
esec fse august 26 30 tallinn estonia copyright heldby the owner author s .
publicationrightslicensed to acm.
acm isbn ... .
introduction monitoring provides information about the runtime behavior of software in the form of logs and has been used to understand large scale systems in production.
the analysis of logs is a widespread practice that has been studied in many diferent contexts.
by leveraging log data researchers were able to help development teams with process mining anomaly detection passivelearning faultlocalization invariant inference performance diagnosis onlinetrace checking andbehavioural analysis .
however understanding runtime behavior of deployed software isanactivitythathasbeenclassicallyassociatedwithoperations engineers.
in recent years practices and culture of development andoperationshaveevolvedtounifytheirresponsibilities often referred to as devops .
teams no longer solely focus on either development or operations rather these responsibilities are more and more intertwined and uniied .
monitoring is one fundamentalactivityinthiscongregationthatenablesarealuniication of both sides.
developers see the analysis of monitoring information aspart oftheir primary responsibilities and perform itseamlesslywiththeirdevelopmenttasks.
interestingly monitoring mainly happens in monitoring tools e.g.
kibana whereassoftwaredevelopmentmainlyhappensinan integrated development environment ide .
the current situation leadstoincreasedcontext switching andsplitattentionefects that increase cognitive load .
if developers have to leave the ide to do some other development related task then one might say that the integrateddevelopmentenvironment has failed.
monitoring aware ides.
we propose to integrate operational aspects into the worklow and context of software development tasksbydevelopingtheconceptofmonitoring awareides.ifides were to provide seamless support for monitoring activities we hypothesize that developers would better perform development tasks such as understanding the reason of a bug or how a new deployedversionbehaves inproduction.
to validate the proposal we implemented a prototype for a monitoring awareideand integrateditintotheworklow of12 developers from diferent teams and evaluated it in a one month ieldexperimentatadyen alarge scalepaymentcompanywhich produces around billion lines of log data per month.
adyen followsdevopspracticesandperformsintensemonitoringintheir software systems.esec fse august tallinn estonia joswinter maur cio aniche j rgen cito andarie vandeursen our results indicate that monitoring aware ides can provide essential beneits in modern large scale software development.
developersmaderepeateduseof themonitoringfeaturestoperform various development activities they would have not performed without our approach.
moreover the provided information supportstheirdevelopmenttasksindiferentways suchastobetter understand how their software works how stableand performant their implementation is and even toidentify and ixbugs.
finally theiroverallperceptionisthat whileamonitoring awareidedoes notreplacetheirexistingmonitoringsystemsentirely ithelpsthem in reducing cognitive load and saving time by avoiding constant contextswitchesbetween monitoringtoolsandtheiride.
the main contributionsofthis paper are a proposal outlining how monitoring aware ides can supportdevelopersinbetterperformingmonitoringanddevops byincorporatingmonitoringdataintotheworklowofworkingwithsourcecode section a4 weekieldexperimentthatbringsevidenceontheusefulnessofmonitoring awareidestomonitoringanddevops teams sections 5and6 .
background inthissection wedescribeexistingrelatedworkontheield.more speciically wediveintothedevopsmovement loganalysisand monitoringtechniquesaswellasenhancementsresearchershave been proposing to ides.
next we present adyen our industry partner and our case study and how they have been applying monitoring and devops within theirdevelopment teams.we also explainwhy adyen serves as aperfectcasefor this study.
.
relatedwork the devops movement.
diferentpeopledeinedevopsindifferent yet similar ways.
h ttermann deines devops as practices that streamline the software delivery process emphasizing the learning by streaming feedback from production to development and improving the cycle time .
degrandis airm that the revolution in the making isa shift from a focus on separatedepartmentsworkingindependentlytoanorganizationwidecollaboration asystemsthinkingapproach.
.walls says thatdevopsisa culturalmovementcombinedwithanumberof softwarerelatedpracticesthatenablerapiddevelopment.
basset al.
deinedevopsas asetofpracticesintendedtoreducethe time between committing a change to a system and the change being placed into normal production while ensuring high quality.
.
toloukides devopsisaboutintegratingtheinfrastructure and the development teams rather than being isolated they needtocooperateandcollaboratewiththe developers whocreate the applications.
.
indeed the movement is becoming more and more popular amongpractitioners.a2016surveywith1 060itprofessionals indicates that its adoption increased from to especially in the entreprise world in comparison with .
however its adoptionisstillnotassmoothasexpected.smedsetal.
aftera literaturereviewandinterviewswithexperts airmthatanimportantdiicultyforitsadoptioninindustryisrelatedtoitsunclear deinition and the company s expected goals with the adoption.ghantous and gil also based on a literature review airm that the main challenges consist of constructing a tool pipeline that supportstheprocess andovercomingthementalbarrierbetween developmentandoperationsteams.yet wealsoobservesuccessful devops adoption in industry such as the ones in adyen our industry partner but alsoas reportedbyotherresearchers .
monitoring tools in industry.
thereareavastamountofmonitoring tools that have originated in industry.
most tools display metrics often extracted from information in logs in dashboards that are customizable in diferent dimensions e.g.
visualization groupings alerts and are searchable.
probably the most prominentopen sourcetoolchaininthecontextofmonitoringistheelk stack1 elasticsearch logstash kibana wherelogsfromdistributed services are collected by logstash stored on elasticsearch and visualized in kibana.
another well known open source dashboard is grafana2 that is mostly used to display time series for infrastructure and application metrics with an extensible plugin system.
commercial counterparts to these services include for instance splunk3 loggly4 datadog5 andmanymore.thecritiquetothe commondashboardsolutionsincurrentpracticeisthattheamount of diferent seemingly unrelated graphs is overwhelming and it is hardto come to actionableinsights .
logginganalysisandvisualization.
log data is vastly rich and thus severalanalysis techniques have been proposed.aiming at failuredetection reidemeisteretal.
basedonpreviouslogs trainadecisiontreetodetectrecurrentfailures.similarly fronzaet al.
usessvm linetal.
useclusteringalgorithms andbose andvanderaalst exploitassociativeruleminingtodiscover failure patterns in event logs.
while the above techniques are good indetectingpreviouslyknownfailures othersfocusondetecting anomalies i.e.
failures not seen before .
clustering algorithms are commonly usedfor such .
logs are also used to build models of the software system.
tools suchassynoptic anddfasat deviseinitestatemachines thatrepresenta software basedon itslogs.and giventhat logs are often ordered in a timely manner related work also has exploredtemporal invariantinference .
finally given that logs are often not easy to be understood as theyare visualizationsthataimtosupportreasoningofruntime behavior have also been proposed.
examples of such work are visualdepictionstobetterunderstandperformanceissues to understandhowthediferentcomponentsofadistributedsystem behaveand orrelatetoeach andtovisualizethediferent nodes ofaclusterbymeans of acitylandscape metaphor .
augmenting existing ides.
work that is conceptually closest to our approach are development environments that augment source codewithruntimeinformation.lieber etal.
augmentjavascript codeinthedebugviewinthebrowserwithruntimeinformation oncallcountoffunctionsasynchronouscalltreestodisplayhow functions interact.
other work focuses on augmenting method deinitions in the ide with in situ visualizations of performance ides esec fse august tallinn estonia proiling information .
hofswell et al.
introduce diferentkinds of visualizations related to runtimeinformation in the source code to improve program understanding.
lopez and vanderhoek augmentedidestowarndevelopers onalineby lines basis about the volatility of the code they are working on.
ourapproachistheirsttointegrateinformationandtraceability links from production logs into the source code view.
this enables amoregeneral purposeapproachtoreasoningaboutproduction behavior that is guided by signals put in place by developers themselves logstatements .
.
monitoring anddevops allobservationsinthisresearcharebasedontheteamsthatfollow the devopsmodelat adyen alarge scale paymentcompany that provides services for more than companies all around the world.
adyen had a transaction volume of billion dollars in .
thedistributedsoftware systemsthatruntheir entirebusiness produced around billion log lines solely in july .
due to their scale and sensitive business market monitoring is a vital activity at adyen.
adyen follows devops practices as part of their culture and the barriers between development and production havebeengettingsmallerandsmallerovertheyears.developers of all teams are responsible for the monitoring of their systems and are supported by a dedicated monitoring application whose focusistobuildanycustomizationateammightneedtoconduct better monitoring.
thus at adyen monitoring is a vital task for all developers.
due to their eforts on monitoring over the last years we irmly believe that adyen ofers an exemplary place for software engineering researchers to study and evolve monitoring and devops practices.
and for this research more speciically to study the beneitsofmonitoring aware ides.
adyen smonitoringanddevopspractices.
infigure1 wesummarize adyen s monitoring and devops practices.
the model contains ten practices p1..p10 grouped in six broad themes.
throughoutthefollowingtext weusecirclestoconnectthemodelinthe figure to the explainingtext e.g.
p1refersto practicenumber .
atadyen developers arenotonlyresponsiblefor testingtheir features before release but to follow up and monitor how their systemsbehavewhenreleasedtoproduction p1.doesitworkas expected?
does it meet the performance requirements?
given that predicting how a large scale software system will behave in production monitoring takes a major role during release deployments.
even with short development cycles largeportions ofnew source codearereleasedcontinuouslytoproduction.duringrelease developersintensivelyfocustheirmonitoringefortsonhowtheirnewly implemented features behave in production p2.
log data from the previousversionsareoftenusedasabaseline.exceptionsthatnever happenedbefore particularlyonnewsourcecode orexceptions that start to happen more often than in previous versions often triggeralarmstodeveloperswhothenfocusonunderstandingwhy that ishappening.
interestingly developers not only care about exceptions in their software systems but also about how their systems impact themonitoring and devopsmonitor p1 their own software systems p2 release deployment p3 environment understand identify p4 business process p5 system performance maintain p7 logging code build use p9 automated alarms p8 data science applications p10 logging aggregation and visualization tools p6 software bugscarry responsibility support figure monitoring and devops practicesat adyen.
overall business e.g.
is my system bringing the anticipated return oninvestment roi tomycompany?developersoftenworkclosely withdatascienceteams whichalsoleveragetherichnessofthelog data to extract insightful business knowledge.
it is not uncommon for developers to have tasks in their backlog that aim at better supportingdatascienceteams p8 e.g.
byaddingmoreinformation to existing log statements.
in fact given that developers try as much as possible to log any useful information the amount of logstatementlinesinthesourcecodeissigniicant.adyen more speciically have around 30k log statements throughout its source code base.
in other words with log statements playing an essential roleinsoftwaresystems maintainingloggingcode e.g.
improving orremovinglogstatements isarecurrentactivity p7.
developersmakeuseofseveraltoolstosupporttheirconstant monitoring activities.
these tools are vital to helping them deal withthelarge scalenatureoftheirsystems.besidesthefactthat thesesystemsproducelargeamountsoflogdata theyarealsooften distributed whichrequireteamstomakeuseofexistinglogstorage aggregation and visualization tools p10 such as the elk stack see section2.
orevenbuildtheirowntoolsandautomatedalarms p9.
moreover developersalsomonitortheirentireenvironments p3 such as the health oftheir linux servers databases andservers.
due to the complexity of their software systems monitoring dataisalsofundamentalfordeveloperstoidentifyfunctional p6 esec fse august tallinn estonia joswinter maur cio aniche j rgen cito andarie vandeursen stabilityandperformance p5issues.again monitoringdataprovidesdeveloperswithnotonlyunexpectedandnewexceptions but alsowithinformationthathelpsthemdebugandtracktheproblem.
whenitcomestoperformanceissues developersoftenmeasurethe timeittakesbetweenlogmessagesasanindicationofapossible problem.
moreover developers alsousemonitoring dataasaway to traceand comprehend complexbusiness processes p4.
inpractice nodeveloperisabletounderstandeverysingledetailofthe entire business completely.
a developer might learn that payment transactionsalwaysgoirsttotheriskmanagementsystem and then laterto the reportingsystem byreadinglogdata.
monitoring aware ides in modern teams following a devops model developers goback and forth between monitoring data and the source code to reason about their software systems .
even with the current state of the art monitoring and ide development tools developers still struggle with connecting the two worlds.
the current situationleadstoincreasedcontext switching andsplitattention efects that increasecognitive load.
we theorize that for developers to be better equipped to deal withmonitoringanddevopspractices idesand monitoringsystemsshouldbeconnected givingrisetowhatwewillcall monitoringaware ides .
a monitoring aware ide provides developers with an integrated view of both the implementation of their software systemsandmonitoringinformation.
developers need not to go out of their ides to know whether anexceptionthattheyjustdecidedtothrowhappenedtentimes inthelastweek orthatthetimebetweentwologstatementshas beenincreasing continually.basedon whatweobserve atadyen we conjecture that such an ide would assistdevelopersinmonitoringtheirnewfeaturesandreleasedeploymentsand asaconsequence providethemwith enoughinformationtoidentifybugsandperformanceissues assistdevelopersinusinglogdatatounderstandthebusinessprocessofsoftware systems and assistdevelopersinmaintainingloggingcode suchasextending orremovinglogstatements from the sourcecode.
toachievethisgoal weproposethatamonitoring awareide musthave the following characteristics timely integrated feedback monitoring data e.g.
how oftenalogstatementoranexceptionhappensinproduction should be timely available at the monitoring aware ide so that developers can make data driven decisions based on themostrecentdata andwithouttheneedofopeningthe monitoringsystemfor that traceability thereshouldbeadirectconnection linkbetweenthemonitoringinformationandthesourcecode in caseonetooldoesnotcontaintherequiredinformationat that moment.
the source ofmonitoring information e.g.
a log statement or an exception can be found based on monitoringinformation andmonitoringinformationcanbefound basedonits source.
searchcapability monitoringinformationshouldbesearchable inthe ide e.g.
the classes with the highest number of exceptions.
void method ... log.error error occurred var if ... ... log.warn warn var2 ... throw new runtimeexception 10k 7k 2k a.java 102k new exceptions b.java 23k new exceptions c.java 12k new exceptionssearchable monitoring information of the entire software systemquickly indicates how often a log statement or exception happens in productiondetailed information about that statement last hours ... figure interaction design of a monitoring aware ide.
numbers on the left bar indicate how often a log statement orexceptionshappeninproduction.developerscanaskfor moredetailedmonitoringinformation boxontheright or as last resource go to the real monitoring system and observe the full data there.
finally search options at the bottomoftheide e.g.
ilterbyclassname orderbyexception frequency .
monitoring aware ideprototype toempiricallystudyourproposal webuiltaprototypeofamonitoringaware ide.
we setthe following goalsfor the prototype it should deliver enough value to adyen developers so that they wouldbeneitfrom this study tobeasnon obtrusiveaspossibletoadyendevelopers so that theywouldnot feel the burden ofusing an unknown tool todeliverenough features sothat we asresearchers could empirically validate our monitoring aware ides proposal.
we highlight the fact that this tool was also developed inside in partnership withadyen incorporating iterative feedback from februarytojune2018 .throughoutitsivemonthsofdevelopment our prototype received feedback from several adyen developers afterbetaversions.theirstthreeauthorsofthepaperdiscussed all their suggestions and whether they were useful or essential fortheprototype.inthispaper wereporttheinalversionofthe prototype.
ourtoolcollectsmonitoringdatathatiscurrentlyavailablein adyen s monitoring systems elk stack .
adyen allowed us to collectnew datafromtheirmonitoringsystemsevery15seconds whichgivesnearreal timeinformation.wetracebacktheorigin of a log message to its original log statement in the source code usingheuristics adyendoesnotlogclassnameandlinenumber that originates the message due to performance reasons .
more speciically we generate regular expressions based on every log statement of the source code and matched them against the log message that comes from the monitoring system following xu s et al.
work .
we observed that the link asalsoreported byxu et al.
indeed happens with high accuracy after an evaluation in 100klogmessages whichimpliesthatourtoolisaccuratelyableto show monitoring information in the source code.
finally we show themonitoringinformationinsideintellij thejavaidethatisusedmonitoring aware ides esec fse august tallinn estonia at adyen by means of a plugin that we developed.
we discuss the details ofthe prototype sarchitecture insection .
.
in figure we present an interaction design of how the tool presentsinformationtodevelopers6.thetoolsupportsalltherequirementswesetoutinsection .wheneverdevelopersopenany classintheirsourcecode ourtoolshowsmonitoringinformation nearallthelogstatementsandthrownexceptions.theinformation iscontinuouslyextractedfromelasticsearch theunderlyingdocumentdatabaseadyenusestostorethemonitoringdataoftheir production systems.
the numbers near every log statement in the leftboxshowhowoftentheyhavebeentriggeredinthelastmonth.
when developers hover with their mouse our tool shows a summaryofmonitoringinformationaboutthatstatement currently howoftenthatstatementwasexecutedinthelasthour 24hours andmonth .tofacilitatetheswitchingtothemonitoringtooling with more detailed information we also provide a direct traceability link to the dashboard of that speciic class and log statement.
finally the tool also provides developers with search options such as ilterbyclass name andorder byexception frequency.
field experiment intheremainderofthispaper wetaketheirststeptowards empiricallyunderstandingthevalueofmonitoring awareides we posed in the previous section.
to that aim we propose three researchquestions rq1.howdodevelopersinteractwithamonitoring aware ide?
rq2.what impact does a monitoring aware ide bring to software developmentteams?
rq3.what are the developers perceptions about the usefulnessofamonitoring awareidetosupporttheirmonitoring practices?
giventhecomplexityofsimulatinganenvironmentthatrequires constantmonitoring suchasthelikesofadyen weoptedfora ield experiment .accordingtostolandfitzgerald aieldexperiment refersto anexperimentalstudyconductedinanaturalsettingwith ahighdegreeofrealism.inthisstrategy theresearchermanipulates some properties in the research setting with the goal of observing anefectofsomekind.also accordingtostolandfitzgerald the natural study setting is realistic but subject to confounding factors that can limit the precision ofmeasurement.
to that aim we make use of quantitative and qualitative data that we collected after providing developers from adyen with a monitoring aware ide prototype for four weeks.
in summary our ield experiment happenedas follows werecruited12developersfromadyen theselectioncriteria isexplainedinsection .
installedtheprototypeintheir ides and gave them a short tutorial on what the prototype does andhowitworks the12participantsusedourmonitoring awareideprototype for fourweeksto perform theirdaily tasks we collected informationabouttheusage of theprototype automaticallyviatelemetry 6we can not show an actual screenshot of the tool being used as it would reveal proprietaryinformation.
wecollectedinformationabouttheimpactofthetoolthrough aweekly survey attheendofthefourweeks weperformedainalsurvey withthe12participantstounderstandtheiroverallperceptionofthe beneitsof amonitoring aware ide.
.
methodology datacollection andanalysis.
weaddedinstrumentationtoour prototypethatcollects thefollowinginteractionsbetweenthe developerandthetool whenthedeveloperopensailecontaining sourcecodeforwhichmonitoringdataexists whenthedeveloperasksfordetailedmonitoringinformationinaspeciiclineof code as well as how much time they spend on it and when the developers opt to navigate to the real monitoringsystem.
tounderstandwhetherandhowtheideimpacteddevelopers in their development tasks rq we surveyed the participants weekly askingabouttheirspeciicinteractionswiththetooland what actions they took.
we created surveys tailored for each developer.
based on all theusage datacollected fromour prototypeduringthat week we showed a list of all classes in which participants observed any monitoringinformationduringthatweek.foreachoftheseclasses participantshadtoanswerquestionsaboutinwhatwaythetool impacted ordidnot impact their work.
weprovidedparticipantswithalistofpossiblefollowupactions that one could have taken after having analyzed the monitoring information.wedevisedthislistofconsequencesincollaboration withadyendevelopers usingtheirmonitoringanddevopspracticesasabasis seesection .2andfigure .wealsogivedevelopers a free box where they can provide any other action.
we iteratively monitoredtheiropenanswerstoimproveourlist.wealsoprovided a didnotperformanyaction option sothatparticipantswould not feel obligedto choose any consequence.
the inallistcanbedivided intothreecategories observations code changes andlogging code improvements.
observations insightsintothebehavioroftheirsystems based on monitoring data o1 identiied a bug o2 identiied performanceissue o3 identiiedsecurityissue o4 identiiedan issue in the log code o5 understood the business process and o6 understoodthe stability of the implementation.
codechanges production codeimprovements basedonmonitoringdata i1 fixedabug i2 improvedcodequality refactoring i3 improvedcodeperformance i4 improvedcodesecurity and i5 implementednewfunctionality.
logging code improvements improvements to the log code based on monitoring data l1 improved log message l2 changed logseverity l3 removedlogline and l4 addedlogline.
althoughparticipantsmayhaveworkedinthesameclassand asked for its detailed monitoring information maybe for diferent purposes multiple times during the week that class appeared only once in that week s survey.
we made this decision for two reasons wedonotbelieveparticipantswouldhaveanaccurateperception andmemoryforsuchaine grainedsurvey thesurveywouldbe too extensive as we conjectured that participants would interact with a large number of classes a week.
nevertheless we allowed participantstochoosemultipleactionsforthesameclass whichesec fse august tallinn estonia joswinter maur cio aniche j rgen cito andarie vandeursen would enable them to express multiple actions they might have taken inthat class duringthat entire week.
inaddition someofthepossibleinteractionswithourtoolcannot be automaticallycollected by our prototype e.g.
we have no data to infer whether participants looked at the number we show in front of any logstatement .
thus atthe end of the survey we ask themwhetherthetoolhelped ornothelped inanywaythatwe didnot ask before.
post questionnaire.
finally with the goal of augmenting and explainingthedataweobtainedemployingtheweeklysurveysand theprototype weaskedparticipantstoansweranopenquestionnaire at the end of the four weeks p1 p6 and p7 were unavailable for the questionnaire .7questions were based on the results we hadobtaineduntil that moment.
the questionnaire contained open questions about both their usageofthetoolaswellastheimpactthetoolhadontheirdaily jobs.more speciically aboutthe toolusage we asked didyoulookatthemonitoringdataweprovideattheleft bar of your ide?
in your opinion how important and or useful are they?
we noticed that you went to the external monitoring while using our tool.whydidyou gothere?
concerningtheimpactofthetool weaskedthefollowingtwo questions for each of the ive most perceived beneits represented by x inthe following questions howdoes the toolhelpyou in x ?
howdidyouperform x beforehavingamonitoring aware ide?
whatare the diferences?
note that we use this post questionnaire also as a way to collect perceptions on the comparison between using and not using a monitoring awareide giventhatestablishingacontrolgroupis not possible inthe context of our study.
we use thequestionnaire as a way to mitigate the possible threat which we discuss in detail insection .
.
data analysis.
we applied descriptive statistics to all quantitative datawecollected i.e.
usagedatacomingfromtheprototypeand survey answers .
we analyzed the post questionnaire data using the following procedure toeachofthequestionsinthequestionnaire wegrouped similar answers inhigh level themes.
whenever a new theme was created we revisited all the previous answers to that question and evaluated whether it wouldbetteritthe newtheme we stoppedthe process when there were nomore themes to create.
theirsttwoauthorswereinvolvedinthecodingofthedataand inderivinghigher levelthemes.weusethehigh levelthemesas main topics ofdiscussioninour results section.
ethicalconcerns.
we do not collect sensitive orprivate information fromthedevelopersorfromadyeninanyofthesteps ofour ield experiment.
all the participants were aware of all the data beingcollectedbeforejoiningthestudy.besides thisieldexperiment 7whilep1 p6 andp7didnotparticipateinthepost questionnaire theyprovideddata for rqs1 and whichweused in the analysis.table1 proileoftheparticipantsinourstudy.participants areorderedaccordingtothenumberofinteractionswiththe tool p1interacted themost p12 interacted the least .
development experience experience at adyen team participant inyears inyears ap1 .
.
p2 .
p10 .
b p3 c p4 dp6 .
p12 .
ep7 p8 f p9 g p5 was also approved by the ethics committee of delft university of technology.
.
participants we invited developers from diferent teams to use our prototype for four weeks.
we applied convenience sampling to ind the participants of our study.
we made a general announcement at adyen s internal chat application explaining our study and prototypeandaskedforparticipants.allparticipantshadtopassthe followingcriteria morethanoneyearofexperienceasasoftwaredeveloper morethansixmonthsofexperienceatadyen and afrequentuserofadyen smonitoringsystems.weshow participants proiles intable .
we asked participants to perform their regular development tasks using our prototype.
before the ield experiment we gave participants some time to try out the tool and learn how to use it.
we highlight that during thesefour weeks we didnot forceor requiredeveloperstouseourtoolinanysituation aswewanted to observe theirreal world behavior.
results .
rq howdo developersinteract with a monitoring awareide?
infigures 3aand3b weshowhowmucheachparticipantinteracted withthe monitoringfeatures of our monitoring aware ide.
inthefourweeks developersopened1 249ilesthatcontained monitoring information which represents of all the iles openedthroughoutthefourweeks.insidetheseiles theidedisplayed data about log statements.
according to our postquestionnaire the quick summary we provide near every log statement i.e.
thenumberofoccurrencesofthatlogstatementinthe lastmonth leftbarinfigure wasperceivedasusefulbydevelopers such information enabled them to quickly observe whethermonitoring aware ides esec fse august tallinn estonia p1 p2 p3 p4 p5 p6 p7 p8 p9 p10 p11 p12participantnumber of files with monitoring information week week week week a thenumberoftimesouridedisplayedailethatcontainedmonitoring information total .
p1 p2 p3 p4 p5 p6 p7 p8 p9 p10 p11 p12participantqty of detailed information week week week week b the number of times a participant asked for more detailed informationina logstatement or exception total .
figure how much participantsused our monitoring aware ide n 12participants .
there was any unexpected activity in that part of the system p2 p12 andwhethertheseproblemswereurgent p3 p4 p5 p8 p9 p11 .we observed that developers mostly focused on whetherthe numbers displayed were out of expected ranges e.g.
near zero or very high numbers.
p2 what matters to me is mostly if the number is zero or not.
if it s not zero and very high e.g.
30k i can tend to ignore it as it soundslikean acceptable warning.ifit salownumberhigher than0 e.g.
iwouldimmediatelyliketocheckwhat sgoing on.
in this case the actual number was not really important i wasjustchecking whether thecountwashigherthan0 .
in occasions developers asked for more detailedmonitoring information i.e.
the periodic distribution of times that log statementappearedinthelogdata eitherdirectlyinthemonitoringaware ide itself times or visiting the monitoring tool using thelinkweprovide 42times .accordingtothepost questionnaire developers also visited the actual monitoring tool to retrieve additional moredetailedinformationabouttheproblemtheywere investigating e.g.
the stack trace of the problem p4 p11 the valuesofcertainvariables p3 p5 p12 andtogetthelogmessages that happenedbefore the errorunderinvestigation p9 .
interestingly we observed that at adyen developers have ownership of the features they build.
speciic teams are responsible for theirfeatures includingtheirmonitoring.thisbehaviorcanalso be observedinour data.
p12 i myself go back to things i worked on from time to time as well.
weobservedthatmonitoringthesameclassovertimeisarecurrenttask.
.
ofallinteractionsarepartofaseriesofinteractions inthesameclassindiferentweeks.inthepost questionnaire whenpresentedwiththesenumbers developersairmedthatrecurrent monitoring is common due to the size of their systems and to the sizeofthefeaturestheycommonlybuild p3 p5 p12 andthatdue to weekly deployments they often go back to see whether their features are stillworking.
.
rq whatimpactdoesamonitoring aware idebringto softwaredevelopmentteams?
together participantscompleted29weeklysurveys outof48possible .
developers informed us that in opportunities the usage of our monitoring aware ide had a positive impact on their software systems whichwe showinfigure .
we observe that developers took meaningful actions after observing monitoring data.
out ofthe participants p1 p9 had a positive consequence of using a monitoring aware ide.
we notice that the three participants whodid not observe any positive efects p10 p12 were the ones with the least number of interactions with ourtool figure 3b .
thereisastrongcorrelationbetween asking for detailed information and being positively impacted by our tool pearsoncorrelation .
p value .
.
understanding the business process through monitoring was the most common consequence of using our monitoring aware ide 15timesoutof45 or33 .moreover understandingperformance issues times as well as the stability of implementation 9times werealsocommonconsequencesofusingour monitoring aware ide.
developers accredited a few identiication andbugixingactivitiesintheirsoftwaresystems 3and2times respectively toourmonitoring awareide.althoughidentifyingand ixing bugs did not happen as often as the understanding we state that adyen already has a mature software and thus we would not expect developers to identify and ind severalbugs that often and any bug found has signiicant positive impact on their software.
finally monitoringinformationalsohelpsdevelopersinmaintainingesec fse august tallinn estonia joswinter maur cio aniche j rgen cito andarie vandeursen l3 removed log linel4 added log linei1 fixed a bugl1 improved log messagel2 changed log severityo4 identified issue in log codei2 improve code qualityo1 identified a bugo2 identified performance issueo6 understood implementation stabilityo5 understood business process quantityactions figure how our monitoring aware ide impacted our developers n 12participants .
theirloggingcode 8times .weobserveddevelopersadding newloglines 1times improvinganexistinglogmessage times changingtheseverityofalogstatement 2times orremovingan existing logstatement 1time .
interestingly developers did not identify any security issues using our tool.
when asked about it in the post questionnaire developers airmed that they would not expect to ind security issues with our tool given that their logs do not focus on it p2 p4 p5 p11 .
p11 speciically said that they would need to write log statements whose solepurposeis tomonitor security whichthen our tool would help monitor.
finally p2 p3 p8 and p11 pointed out the fact that adyen has already a secure software and security issuesdonotoftenhappen andthusthelikelihoodofsuchanissue tohappenduringourieldexperimentwastoosmall .weindeed conjecturethatprovidingdeveloperswithtraditionalmonitoring data only is not enough for them to observe security issues.
a follow upstepforthisworkwouldbetostudyhowsecurity related aspectswoulditinamonitoring aware ide.
.
rq whatarethedevelopers perceptions abouttheusefulnessofamonitoring aware ideto support their monitoringpractices?
we observed that developers spent a signiicant amount of time goingbackandforthbetweentheirmonitoringtoolsandtheirides.
our overall perception was that this context switching was not productive.
theseobservationswerecorroboratedinourpost questionnaire.
developersairmedthatourmonitoring awareidedidnotreplace their monitoring systems but it helped them in saving time and reducing cognitive load when compared to the way they use to perform the same monitoring tasks before our tool.
several of our participants airmed to spending less time querying their monitoringsystems p2 p3 p4 p8 .p2 istillusekibanaasmuchasiuseditbefore.idolikehowever theeasynavigationfrom alog statement in intellijto kibana.
p3 requires a lot ofmanual work writingquery for theothertoolstoactuallynoticeerrorsthathappeninaclassthat you workin.
automaticallyestablishingtraceabilitybyperformingthelink between the log message and the actual log statement as well as nothavingtoquerythemonitoringtoolalsohelpsdevelopersin following the lowofthe sourcecode more productively.
p8 instead of having to follow the low of the code by changing parameters on a kibana search the faster interaction with the pluginmakesnavigationsmoother.
p5 now i don t have to select a constant string from the log statement and hope to ind it in the logs.
also i know earlier whether it is worthinvestigating further ornot.
finally p8 also adds that the tool reduces his amount of context switchingandthatthetoolalsosavestimewhencommunicating aboutan error.
p8 ifsomeonetellsmeaboutanerror icaninditincodeeasily thenindall related log instances in the post questionnaire developers also perceived other beneits in monitoring aware ides that go beyond saving time corroboratingtheresultsofrq .theinstant near real timefeedback and the timely observations that our ide ofer enables developerstoquicklyidentify possiblebugsorbottlenecks p3 p4 p5 p9 p11 p12 .
as we stated before developers pay a lot of attention to the frequency of a log statement.
developers seem to implicitly formulate hypotheses on behavior in production.
the frequency allowsthemtoimmediatelymakejudgmentsabouttheirhypotheses i.e.
whether this number seems to be out of place e.g.
near or very large .
p5 an error or warning on its own doesn t indicate a bug but the number of time it gets triggered might.
that s why the tool is useful to identify them.
p5 also provided us witha concrete exampleof howhe was able to track aperformance bug.
p5 it helped me ind a situation where data had to be loaded explicitly while it shouldhave beenpreloaded.
developers also see a positive impact in having monitoring data andlogging code together p2 p3 p5 p8 .
p2 sofaritstimulatedmetoimproveloggingwheretheamount ofwarningswasveryhigh e.g.
100k .
other participants mentioned that thanks to the real time feedback theyarebetterabletodecidewhichlogleveltouseinalog statement p3 help inidentifying situations where better logging isrequired p5 andremove less useful logstatements p8 .monitoring aware ides esec fse august tallinn estonia version control log storagemonitoring data aggregator server monitoring aware plugin ide figure high level architecture of our monitoring aware ide.
the monitoring data aggregator is responsible for aggregating and linking data from both data sources and for providingmonitoring data fortheide plugin.
p5 i wouldn t say the tool helps me to improve log messages directly but it helps me ind interesting situations which may require better logging.
in that case it indirectly helps i suppose.
p8 youcanseewhichlogmessagesareuseless andalsogiven thequickerfeedbacklooponseeingthedetailedlogsonkibana you aremoreinclined to makeimprovements.
indeed developersnoticedthatamonitoring awareidedoes not entirely replace their existing tooling but rather complements it.p11 forexample saysthathestillusesthe elkstacktofollow the low of a transaction as the monitoring tool allows him to see all messagesrelated to a speciic transaction id .
p11also uses anotherinternal toolto helpinidentifying performance issues.
p2 don t thinkthetoolcovers theneedofmonitoring viaother means and it can treplace them.it gives extra insights onlyinto the code class that we are working on.
monitoring via automated patch monitoring or kibana gives better functionalities on aggregating log datafrom multipleplaces.
finally the developers provided us with some insightful suggestions on the next steps of our tool.
most of their suggestions are related to either adding more information p2 p3 p4 p5 p9 or adding ilters p11 .
showing monitoring data at package level and not only at class level as is now p4 personally coniguring the dateandtimeperiodstoshow p9 summarizethestatusofthelog statementsdevelopershavewrittenthemselves p11 andadding chartsthatwouldshow thecomplete periodicdistributionofthat logstatement p3 are among the suggestions.
discussion in the following we discuss the several challenges of building a monitoring awareides andhowwemitigatepossiblethreatsto the validity ofthis study.
.
building monitoring awareides thearchitectureofamonitoring awareide.
designingsuch an ide from an architectural point of view is worth discussing.
monitoring data can be extensively large as with our industry partner andany local dataanalysismighttaketoomuch oreven crashtheide.thus monitoring awareidesshouldbedesignedwith scalability in mind.
our prototype has been shown to be scalable and thus we dedicate the next paragraphs to describe our architectural decisions.
asweshowinfigure themonitoringdataaggregator isalarge processthatrunsinaseparateserver.itiswheremostoftheexpensivecomputationalcalculations e.g.
parselogdataandgenerate templates match the log data with its original log statement updatecounters pullup to datesourcecodeandrefreshtemplates happen.
the monitoring aware ide is implemented as a plugin on topofanexistingide suchasintellij.thepluginmostlyqueries datafromthe aggregatorandshowsit tothedeveloper.no heavy calculations happen in the ide which means developers do not sufer from possible slowliness.
ontheotherhand westillseeperformanceimprovementstobe done.ourcurrentprototypequeriesadyen smonitoringsystems every 15seconds fornew log data.
dueto adyen s weeklyrelease cycles wealsore generatetheregularexpressionsfromtheirsource code every week and not at everynewcommit asthe generation process currently takes minutes .
we refresh the monitoring information in the developers ides whenever they open a class.
while this currently gives near real time up to date information to developers we see the following steps as required to build a state of the artreal timemonitoring aware ide astreamingsysteminplacethatwouldstreamlogdataas theycomewouldbeneeded.currentindustrysolutions like the elkstack ofer such streaming.
the monitoring data aggregator would have to be able to handle the vast amount of regular expression matching that would happen for each log message.
matching regular expressionsisneitheracheaporfastoperation particularlyin languageslikejava whichimplementsanondeterministic finite automaton nfa backtracking algorithm .
we see parallelizationas afuture requirement.
themonitoringdataaggregatorwouldhavetogeneratenew regularexpressionsfromthesourcecodeeverytimeanew deploys happens.
our current regular expression generator takes around minutes to run in a codebase with a few million lines of code8 and can take even longer in larger codebases.
the ideandthemonitoring aggregatorserverwouldhave to periodically communicate with each other so that the ide always has up to date data.
the communication should happeninawaythat developersdo not notice anydelaysin theirides.
theimportanceofloggingcode.
itisinterestingtonoticehow important the quality of the log code is and how much developersmonitoredandimprovedtheirquality.throughoutourstudy developers ixedissues added andremovedlogcode.
the quality of log lines is indeed important and researchers have been working on log code best practices.
fu et al.
for example studied common logging practices especially focusing on where in the source code developers log.
they conclude that common logging practices can be used to automate the logging processpartially.zhu etal.
implementedatoolwhichlearns commonloggingpracticesandusesittoindicatepositionsthatcan 8wearenot allowed to disclosurethe totallocof theirsystems.esec fse august tallinn estonia joswinter maur cio aniche j rgen cito andarie vandeursen beimprovedbyaddingalogstatement.chenandjiang studied anti patterns whicharedeinedasrecurringmistakesinlogging code which may hinder the understanding and maintainability of logstatements.therefore giventhatdevelopersarenowquiteused tousestaticanalysistools orlinters tospotbugsandmaintenance issues we suggest tool makers to start incorporating such logcode qualitymeasures intheirlinters.
as an orthogonal aspect adyen uses log4j the most popular java logging framework.
given their scale and the number of requests per second their servers receive adyen developers can not store the line number of the log statement that originates a log line that one sees in the monitoring tool.
this is why we use xu etal.
sheuristic to linkthelog lineback toitsoriginating log statement.
however although the heuristic has worked well in our settings our developers had a good amount of implementation work to adapt it to adyen s code style.
from the practical point ofview we see asfuture work loggingframeworksbeing ableto logmeta information e.g.
class name linenumber withreduced computationalcosts.
custom mademonitoring awareides.
adyenuseselasticsearch andkibanadashboardstomonitortheirsystems.weobservedthat developerspay agreatattentionto thenumber andtype ofexceptionsthataregoingoninproductionaswellashowthe new code they wrote is behaving.
the features of the monitoring aware ide prototypewe studyinthispaperwerebasedonthese observations.
however developersofadiferentcompanymayusemonitoring systemsinadiferentway e.g.
customizedmetrics oranalysis.
monitoring aware idesshouldalso providetheextensive lexibilitythatcurrentmonitoringtoolsofertodevelopers.thismeans thattheperfectideforoneteammightbediferentthantheone for another team.
this raises interesting points for ide makers how to make a monitoring feature that is generic enough for most developers to use but customizable enough so that developers can obtain all the beneits that their current monitoring systems ofer?
connected ides.
we bringto attention the fact that we are used to seeing ides as standalone tools.
after installation they tend not to require any connections with the external world and developers can use it even without a network connection.
in a world where idesarestronglyconnectedwith monitoring bothworldsshould talkto eachother.ides should not be standalone toolsanymore.
researchers indeed have been studying cloud based ides andcompanieshavebeendevelopingthem e.g.
amazon s cloud9 .
cloud based ides eliminate any need for speciic hardware or operational systems and try to increase collaboration and coding among developers.
we argue that the ideas of cloudbasedidesare inlinewithmonitoring awareides.we conjecture thatthefactthatcloud basedidesnaturallyexistinacloudenvironmentwouldfacilitatethedevelopmentofthemonitoringfeatures we suggestinthis paper.
fylaktopoulos et al.
noticed that runtime monitoring or auditing as authors call in their paper is still an area not yet explored in such ides.
authors discuss how developers are currently requiredtobuildtheirowndebuggingandauditingtoolsoutside ofides.wesuggestresearcherstoexploretheconnectionbetween cloud basedandmonitoring aware ides.
.
threatsto validity internalvalidity.
weuseourprototypeasaproxytounderstandtheimpactofa monitoring aware ideinsoftware developmentteams.aswepresentinsection ourmonitoring awareide prototypecontainsfeaturesthatwederivedfromadyen smonitoringanddevopspractices section .
.wedonotclaimthatour prototypefullyrepresentsand orcontainsallpossiblefeaturesof anidealisticmonitoring awareide.weconsider nevertheless our prototypesuicientenoughtoprovideinitialevidencethatsuchan ide can provide beneits to developers participants p1 p6 and p7 were not available during the post questionnaire.
nevertheless we do not believe it afects in any way our conclusions given that the answers of all other participants clearly converged we did nothaveanexplicitlycontrolledbaselineinourieldexperiment as that would be impractical at adyen s realistic settings.
instead we explicitlycollecteddataaboutthedevelopers perceptionsonusing andnotusingamonitoring awareideintheinalquestionnaire whichenrichedouranalysis.wedeemthissettingtobeappropriate givenourgoaltocollectqualitativeinsightsintohowdevelopers interact with our approach in their natural worklow.
as future work weplantoreplicateourstudyinamorecontrolledsetting now that we have a better insight into what can should be used as independent anddependent variables.
externalvalidity.
thisentireresearchwasconductedatadyen alarge scalepaymentcompanythatdealswithlargeamountsof sensitive data produces large amounts of logdata and sees monitoring as a fundamental activity.
although we diversiied our ield experiment with developers from seven diferent teams that represent various kinds of development contexts we can not claim any generalization.
however given the size scale and importance of the software built by adyen we believe this idea is worthy of further investigation.
conclusions software developers reason about the behaviorof large scale softwaresystemsinproductionbyexamininglogdatainexternalmonitoringtools.however mostoftheirsoftwaredevelopmentactivity happens in the source code view in the ide.
leaving their development worklow in the ide to understand production software behaviorleadstoincreasedcontext switchingandsplitattention efectsthat increasecognitive load.
weproposetounifybothdevelopmentandmonitoringcontexts by developing a new concept of monitoring aware ides.
we integratemonitoringaspectsintotheworklowandcontextofsoftware development tasks by incorporatingfrequency information on log statements into the source code view of an ide.
we implement this concept as an intellij plugin and conduct a one month ield experimentwith12developersinalargecompany adyen.developers using our approach in the ield experiment reported that they were able to better understand business processes identify performance issues and functional bugs improve code quality and bettermaintain theirlogging code.
weirmlybelievethatmonitoring awareidesplaysanessential role in improving howdevelopersinteract with monitoring to reason about production behavior and take action in development.monitoring aware ides esec fse august tallinn estonia