trade os in continuous integration assurance security and flexibility michael hilton oregon state university usa mhilton cmu edunicholas nelson oregon state university usa nelsonni oregonstate edutimothy tunnell university of illinois usa tunnell2 illinois edu darko marinov university of illinois usa marinov illinois edudanny dig oregon state university usa digd oregonstate edu abstract continuous integration ci systems automate the compilation building and testing of software.
despite ci being a widely used activity in software engineering we do not know what motivates developers to use ci and what barriers and unmet needs they face.
without such knowledge developers make easily avoidable errors tool builders invest in the wrong direction and researchers miss opportunities for improving the practice of ci.
we present a qualitative study of the barriers and needs developers face when using ci.
we conduct semi structured interviews with developers from dierent industries and development scales.
we triangulate our ndings by running two surveys.
we nd that developers face trade os between speed and certainty assurance between better access and information security security and between more conguration options and greater ease of use flexibility .
we present implications of these trade os for developers tool builders and researchers.
ccs concepts software and its engineering agile software development software testing and debugging keywords continuous integration automated testing acm reference format michael hilton nicholas nelson timothy tunnell darko marinov and danny dig.
.
trade os in continuous integration assurance security and flexibility.
in proceedings of 11th joint meeting of the european software engineering conference and the acm sigsoft symposium on the foundations of software engineering paderborn germany september esec fse pages.
org permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for prot or commercial advantage and that copies bear this notice and the full citation on the rst page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specic permission and or a fee.
request permissions from permissions acm.org.
esec fse september paderborn germany association for computing machinery.
acm isbn .
.
.
.
org introduction continuous integration ci systems automate the compilation building and testing of software.
ci usage is widespread throughout the software development industry.
for example the state of agile industry survey with participants found half of the respondents use ci.
the state of devops report a survey of over technical professionals from around the world nds ci to be an indicator of high performing it organizations .
we previously reported that of the most popular opensource projects on github use ci and the most popular projects are more likely to use ci of the top projects .
despite the widespread adoption of ci there are still many unanswered questions about ci.
in one study vasilescu et al.
show that ci correlates with positive quality outcomes.
in our previous work we examine the usage of ci among open source projects on github and show that projects that use ci release more frequently than projects that do not.
however these studies do not present what barriers and needs developers face when using ci or what trade os developers must make when using ci.
to ll in the gaps in knowledge about developers use of ci we ask the following questions what needs do developers have that are unmet by their current ci system s ?
what problems have developers experienced when conguring and using ci system s ?
how do developers feel about using ci?
without answers to these questions developers can potentially nd ci more obstructive than helpful tool builders can implement unneeded features and researchers may not be aware of areas of ci usage that require further examination and solutions that can further empower practitioners.
to answer these questions we employ complementary established research methodologies.
our primary methodology is interviews with software developers from dierent companies of all sizes.
to triangulate our ndings we deploy two surveys.
the focused survey samples developers at pivotal1.
the broad survey samples participants of which are from industry and have seven or more years of software development experience.
the interviews provide the content for the surveys and the focused survey provides depth while the broad survey provides breadth.
analyzing all this data we answer four research questions rq1 what barriers do developers face when using ci?
see .
rq2 what unmet needs do developers have with ci tools?
see .
rq3 why do developers use ci?
see .
rq4 what benets do developers experience using ci?
see .
1pivotal.io esec fse september paderborn germany m. hilton n. nelson t. tunnell d. marinov and d. dig based on our ndings we identify three trade os developers face when using ci.
other researchers have identied similar trade os in dierent domains.
we name these trade os assurance security and flexibility .
assurance describes the trade o between increasing the added value that extra testing provides and the extra cost of performing that testing.
rothermel et al.
identify this trade o as a motivation for test prioritization.
security describes the trade o between increased security measures and the ability to access and modify the ci system as needed.
post and kagan found a third of knowledge workers report security restrictions hinder their ability to perform their jobs.
we observe this issue also applies to ci users.
flexibility describes the trade o that occurs when developers want systems that are both powerful and highly congurable yet at the same time they want those systems to be simple and easy to use.
xu et al.
identify the costs of over congurable systems and found that these systems severely hinder usability.
we also observe the tension from this trade o among developers using ci.
in the context of these three trade os we present implications for three audiences developers tool builders and researchers .
for example developers face dicult choices about how much testing is enough and how to choose the right tests to run.
tool builders should create uis for ci users to congure their ci systems but these uis should serialize congurations out to text les so that they can be kept in version control.
researchers have much to bring to the ci community such as helping with fault localization and test parallelization when using ci and examining the security challenges developers face when using ci.
this paper makes the following contributions we conduct exploratory semi structured interviews with developers then triangulate these ndings with a focused survey of developers at pivotal and a broad survey of developers from all over the world.
we provide an empirically justied set of developers motivations for using ci.
we expose gaps between developers needs and existing tooling for ci.
we present actionable implications that developers tool builders and researchers can build on.
the interview script code set survey questions and responses can be found at eecs oregonstate edu ci tradeos background the idea of continuous integration ci was rst introduced in the context of object oriented design at regular intervals the process of continuous integration yields executable releases that grow in functionality at every release... this idea was then adopted as one of the core practices of extreme programming xp .
the core premise of ci as described by fowler is that the more often a project integrates the better o it is.
ci systems are responsible for retrieving code collecting all dependencies compiling the code and running automated tests.
the system should output pass or fail to indicate whether the ci process was successful.we asked our interview participants to describe their ci usage pipeline.
while not all pipelines are the same they generally share some common elements.
changesets are a group of changes that a developer makes to the code.
they may be a single commit or a group of commits but they should be a complete change so that after the changeset is applied it should not break the program.
when a ci system observes a change made by developers this triggers a ci event.
how and when the ci is triggered is based on how the ci is congured.
one common way to trigger ci is when a commit is pushed to a repository.
for the ci to test the code without concern for previous data or external systems it is important that ci runs in a clean environment.
the automated build script should be able to start with a clean environment and build the product from scratch before executing tests.
many developers use containers e.g.
docker2 to implement clean environments for builds.
an important step in the ci pipeline is conrming that the changeset was integrated correctly into the application.
one common method is a regression test suite including unit tests and integration tests.
the ci system can also perform other analyses such as linting or evaluating test coverage.
the last step is to deploy the artifact.
we found some developers consider deployment to be a part of ci and others consider continuous deployment cd to be a separate process.
methodology inspired by established guidelines the primary methodologies we employ in this work are interviews with software developers and two surveys of software developers to triangulate our ndings.
interviews are a qualitative method and are eective at discovering the knowledge and experiences of the participants.
however they often have a limited sample size .
surveys are a quantitative technique that summarizes information over a larger sample size and thus provides broader results.
together they provide a much clearer picture than either can provide alone.
we rst use interviews to elicit developers experiences and expectations when working with ci and we build a taxonomy of barriers unmet needs motivations and experiences.
we build a survey populating the answers to each question with the results of the interviews.
we deploy this survey at pivotal a software and services company that also develops a ci system concourse3.
to gain an even broader understanding we also deploy another survey via social media.
the interview script code set survey questions and the responses can be found on our companion site.
.
interviews we used semi structured interviews which include a mixture of open ended and specic questions designed to elicit not only the information foreseen but also unexpected types of information .
we developed our interview script by performing iterative pilots.
we initially recruited participants from previous research and then used snowball sampling to reach more developers.
we interviewed developers from dierent companies including large 2docker.io3concourse.ci 198trade os in continuous integration assurance security and flexibility esec fse september paderborn germany table interview participants subject exp.
domain org.
size s1 yrs.
content platform provider small s2 yrs.
content platform provider small s3 yrs.
developer tools large s4 yrs.
framework development large s5 yrs.
content management large s6 yrs.
computer security startup small s7 yrs.
framework development small s8 yrs.
media platform medium s9 yrs.
language development medium s10 yrs.
ci platform development medium s11 yrs.
software development consulting medium s12 yrs.
ci platform development small s13 yrs.
telecommunications large s14 yrs.
software development consulting medium s15 yrs.
infrastructure management medium s16 yrs.
cloud software development medium software companies ci service companies small development companies a telecommunications company and software consultants.
our participants had over eight years of development experience on average.
we assigned each participant a subject number .
they all used ci and a variety of ci systems including concourse4 jenkins5 travisci6 cruisecontrol.net7 circleci8 teamcity8 xcode bots9 buildbot10 wercker11 appveyor12 and proprietary ci systems.
each interview lasted between and minutes and the participants were oered a us amazon gift card for participating.
the interviews were based on the research questions presented in section .
the following are some examples of the questions that we asked in the interview tell me about the last time you used ci.
what tasks prompt you to interact with your ci tools?
comparing projects that do use ci with those that don t what dierences have you observed?
what if anything would you like to change about your current ci system?
we coded the interviews using established guidelines from the literature and followed the guidance from campbell et al.
on specic issues related to coding semi structured interview data such as segmentation codebook evolution and coder agreement.
the rst author segmented the transcript from each interview by units of meaning .
the rst two authors then collaborated on coding the segmented interviews using the negotiated agreement technique to achieve agreement .
negotiated agreement is a technique where both researchers code a single transcript and discuss their disagreements in an eort to reconcile them before continuing on.
we coded the rst eight interviews together using this negotiated agreement technique.
because agreement is negotiated along the way there is no inter rater agreement number.
after the eighth interview the rst and second author independently coded the remaining interviews.
our nal codebook contained codes divided 4concourse.ci5jenkins.io6travis ci.org7cruisecontrolnet.org 8circleci.com8jetbrains.com teamcity9developer.apple.com xcode10buildbot.net 11wercker.com12appveyor.cominto groups demographics systems tools process and human ci interaction.
the full codeset is available on our companion site.
.
survey we created a survey with questions to quantify the ndings from our semi structured interviews.
the questions for the survey were created to answer our research questions focusing on what benets barriers and unmet needs developers have when using ci.
the survey consisted of multiple choice questions with a nal open ended text eld to allow participants to share any additional information about ci.
the answers for these multiple choice questions were populated from the answers given by interview participants.
we ensured completeness by including an other eld where appropriate.
to prevent biasing our participants we randomized the order of answers in multiple choice questions.
focused population we deployed our survey to a focused population of developers at pivotal.
pivotal embraces agile development and also sponsors the development of concourse ci.
we sent our survey via email to developers at pivotal and we collected responses for a response rate of .
.
all respondents from pivotal reported using ci.
broad population we believe there are many voices among software developers and we wanted to hear from as many of them as possible.
we chose our sampling method for the broad survey to reach as many developers as possible.
we recruited participants by advertising our survey on social media facebook twitter and reddit .
as with all survey approaches we were forced to make certain concessions .
when recruiting participants online we can reach larger numbers of respondents but in so results suer self selection bias.
to maximize participation we followed guidelines from the literature including keeping the survey short and raing one us amazon gift card to survey participants.
we collected complete responses and a total of survey responses from over countries.
over of our participants had over years of software development experience and over had over years experience.
analysis of results .
barriers we answer what barriers do developers face when using ci?
rq1 we collected a list of barriers which prevent of hinder adoption and use of ci that our interview participants reported experiencing when using ci.
we asked our survey participants to select up to three problems that they had experienced.
if they had experienced more than three we asked them to choose the three most common.
b1 troubleshooting a ci build failure.
when a ci build fails some participants begin the process of identifying why the build failed.
sometimes this can be fairly straightforward.
however for some build failures on the ci server where the developer does not have the same access as they have when debugging locally troubleshooting the failure can be quite challenging.
s4 described one such situation if i get lucky i can spot the cause of the problem right from the results from the jenkins reports and if not then it becomes more complicated.
199esec fse september paderborn germany m. hilton n. nelson t. tunnell d. marinov and d. dig table barriers developers encounter when using ci barrier broad focused b1 troubleshooting a ci build failure b2 overly long build times b3 automating the build process b4 lack of support for the desired workow b5 setting up a ci server or service b6 maintaining a ci server or service b7 lack of tool integration b8 security and access controls one way tool makers have tried to help developers is via better logging and storing test artifacts to make it easier to examine failures.
one participant described how they use sauce labs13 a service for automated testing of web pages in conjunction with their ci.
when a test fails on sauce labs there is a recording that the developers can watch to determine exactly how their test failed.
another participant described how wercker saves a container from each ci run so one can download the container and run the code in the container to debug a failed test.
b2 overly long build times.
because ci must conrm that the current changeset is integrated correctly it must build the code and run automated tests.
this is a blocking step for developers because they do not want to accept the changeset until they can be certain that it will not break the build.
if this blocking step becomes too long it reduces developers productivity.
many interview participants reported that their build times slowly grow over time e.g.
according to s10 absolutely .
worst case scenario it creeps with added dependencies and added sloppy tests and too much i o. that s the worst case scenario for me when it is a slow creep.
other participants told us they had seen build times increase because of bugs in their build tools problems with caching dependency issues during the build process and adding dierent styles of tests e.g.
acceptance tests to the ci builds.
figure maximum acceptable build time minutes to dig a little deeper we examined in depth what developers meant by overly long build times.
s9 said my favorite way of thinking about build time is basically you have tea time lunch time or bedtime.
your builds should run in like ish minutes however long it takes to go get a cup of coee or in minutes to .
hours however long it takes to go get lunch or in ish hours however long it takes to go and come back the next day.
13saucelabs.comfowler suggests most projects should try to follow the xp guideline of a minute build.
when we asked our broad survey participants what is the maximum acceptable time for a ci build to take the most common answer was also minutes as shown in figure .
many of our interview participants reported having spent time and eort reducing the build time for their ci process.
s15 said we start to evaluate the tests and what do we need to do to speed up the environment to run through more tests in the given amount of time.
... mostly i feel that ci isn t very useful if it takes too long to get the feedback.
when we asked our survey participants of focused survey participants and of broad survey participants said they had actively worked to reduce their build times.
this shows long build times are a common barrier faced by developers using ci.
b3 automating the build process.
ci systems automate the manual process that developers previously followed when building and testing their code.
the migration of these manual processes to automated builds requires that developers commit time and resources before the benets of ci can be realized.
b4 lack of support for the desired workflow.
interview participants told us that ci tools are often designed with a specic workow in mind.
when using a tool to implement a ci process it can be dicult to use if one is trying to use a dierent workow than the one for which the tool was designed.
for example when asked how easy it is to use ci tools s2 said umm i guess it really depends on how well you adopt their workow.
for me that s been the most obvious thing.
... as soon as you want to adopt a slightly dierent branching strategy or whatever else it s a complete nightmare.
b5 maintaining a ci server or service.
this barrier is similar to n1 easier conguration of ci servers or services see section .
.
b6 seing up a ci server or service.
for our interview participants setting up a ci server was not a concern when writing open source code as they can easily use one of several ci services available for free to open source projects.
we found that large commercial projects while very complex often have the resources to hire dedicated personnel to manage their ci pipeline.
however developers on small proprietary projects do not have the resources to aord ci as a service nor do they have the hardware and expertise needed to setup ci locally.
s9 who develops an app available on the apple app store said took too much time.
all these tools are oriented to server setups so i think it s very natural if you are running them on a server but it s not so natural if you are running them on your personal computer.
... this makes a lot of friction if you want to set up on your laptop.
additionally in the comments section of our survey we received several comments on this issue for example ci for small scale individual developers!
we need better options imo.
while some of these concerns can be addressed by tool builders creating tools targeted for smaller scale developers more research is needed to determine how project size impacts the usage of ci.
200trade os in continuous integration assurance security and flexibility esec fse september paderborn germany table developer needs unmet by ci need broad focused n1 easier conguration of ci servers or services n2 better tool integration n3 better container virtualization support n4 debugging assistance n5 user interfaces for modifying ci congurations n6 better notications from ci servers or services n7 better security and access controls b7 lack of tool integration.
this barrier is similar to n2 better tool integration see section .
.
b8 security and access controls.
because ci pipelines have access to the entire source code of a given project security and access controls are vitally important.
for ci pipelines that exist entirely inside of a company rewall this may not be as much of a concern but for projects using ci as a service this can be a major issue.
for developers working on company driven open source projects this can also be a concern.
s9 said depending on your project you may have an open source project but secrets living on or near your ci system.
conguring the security and access controls is vital to protecting those secrets.
s16 who uses ci as a service described how their project uses a secure environment variable sev to authenticate a browser based testing service with their ci.
maintaining the security of sevs is a signicant concern in their project.
observation developers encounter increased complexity increased time costs and new security concerns when working with ci.
many of these issues are side eects of implementing new ci features such as more congurability more rigorous testing and greater access to the development pipeline.
.
needs we next answer what unmet needs do developers have with ci tools?
rq2 in addition to describing problems they encounter when using ci our interview participants also described gaps where ci was not meeting their needs.
n1 easier conguration of ci servers or services.
while many ci tools oer a great deal of exibility in how they can be used this exibility can require a large amount of conguration even for a simple workow.
from our interviews we nd that developers for large software companies rely on the ci engineers to ensure that the conguration is correct and to help instantiate new congurations.
open source developers often use ci as a service which allows for a much simpler conguration.
however for developers trying to congure their own ci server this can be a substantial hurdle.
s8 who was running his own ci server said the conguration and setup is costly in time and eort and yeah there is a learning curve on how to setup jenkins and setup the permissions and the signing of certicates and all these things.
at rst when i didn t know all these tools i would have to sort them out and at the start you just don t know...n2 beer tool integration.
our interview participants told us that they would like their ci system to better integrate with other tools.
for example s3 remarked it would also be cool if the ci ran more analysis on the code rather than just the tests.
stu like lint findbugs or it could run bug detection tools.
there are probably cis that already do that but ours doesn t. additionally in our survey responses participants added in the other eld both technical problems such as poor interoperability between node.js and jenkins as well as non technical problems such as the server team will not install a ci tool for us .
n3 beer container virtualization support.
one core concept in ci is that each build should be done in a clean environment i.e.
it should not depend on the environment containing the output from any previous builds.
participants told us that this was very dicult to achieve before software based container platforms e.g.
docker.
however there are still times when the build fails and in so breaks the ci server.
s15 explained ...there will be failures where we have to go through and manually clean up the environment.
s3 had experienced the same issues and had resorted to building docker containers inside other docker containers to ensure that everything was cleaned up properly.
n4 debugging assistance.
when asked about how they debug test failures detected by their ci most of our participants told us that they get the output logs and start their search there.
these output logs can be quite large in size though with hundreds of thousands of lines of output from thousands of tests.
this can create quite a challenge when trying to nd a specic failure.
s7 suggested that they would like their ci server to di the output from the previous run and hide all the output which remained unchanged.
s15 who worked for a large company had developed an in house tool to do exactly this to help developers nd errors faster by ltering the output to only show changes from the previous ci run.
n5 user interfaces for modifying ci congurations.
many participants described administering their ci tools via conguration scripts.
however participants expressed a desire to make these conguration les editable via a user interface which they felt would be easier.
s3 said most of the stu we are conguring could go in a ui.
... we are not modifying heavy logic.
we just go in a script and modify some values.
... so all of the tedious stu you modify by hand could go into a ui.
additionally multiple participants also added bad ui as a freeform answer to the question about problems experienced with ci.
developers want to be able to edit their conguration les via user interfaces but they also want to be able to commit these congurations to their repository.
our interview participants told us they want to commit the congurations because then when they fork a repository the ci congurations are included with the new fork as well.
n6 beer notications from ci servers or services.
almost all participants had the ability to setup notications from their ci server but very few found them to be useful.
when asked about notications from his ci s7 said that he will routinely receive up 201esec fse september paderborn germany m. hilton n. nelson t. tunnell d. marinov and d. dig table developers motivation for using ci motivation broad focused m1 ci helps us catch bugs earlier m2 ci makes us less worried about breaking our builds m3 ci provides a common build environment m4 ci helps us deploy more often m5 ci allows faster iterations m6 ci makes integration easier m7 ci can enforce a specic workow m8 ci allows testing across multiple platforms to emails from a single pull request which he will immediately delete.
other participants did in fact nd the notications useful though including s10 who reads through them every morning to refresh his memory of where he left o the day before.
n7 beer security and access controls.
this need is similar to b8 security and access controls see section .
.
observation developers want ci to be both a highly congurable platform and simple to setup and maintain.
this creates tension because adding congurability increases complexity whereas simplication necessarily seeks to reduce complexity.
.
motivations we next answer why do developers use ci?
rq3 we identied developer motivations from the interviews.
m1 ci helps catch bugs earlier.
preventing the deployment of broken code is a major concern for developers.
finding and xing bugs in production can be an expensive and stressful endeavor.
kerzazi and adams reported that of all post release failures were because of bugs.
we would expect that preventing bugs from going into production is a major concern for developers.
indeed many interview participants said that one of the biggest benets of ci was that it identies bugs early on keeping them out of the production code.
for example s3 said does have a pretty big impact on .
it allows us to nd issues even before they get into our main repo ... rather than letting bugs go unnoticed for months and letting users catch them.
m2 less worry about breaking the build.
kerzazi et al.
reported that for one project up to man hours were lost over a six month period due to broken builds.
not surprisingly this was a common theme among interview participants.
for instance s3 discussed how often this happened before ci ...and since we didn t have ci it was a nightmare.
we usually tried to synchronize our changes ... our build used to break two or three times a day.
s2 talked about the repercussions of breaking the build you gotta wait for whoever broke it to x it.
sometimes they don t know how sometimes they left for the day sometimes they have gone on vacation for a week.
there were a lot of points at which all of us a whole chunk of the dev team was no longer able to be productive.m3 providing a common build environment.
one challenge developers face is ensuring that the environment contains all dependencies needed to build the software.
by starting the ci process with a clean environment fetching all the dependencies and then building the code each time developers can be assured that they can always build their code.
several developers told us that in their team if the code does not build on the ci server then the build is considered broken regardless of how it behaves on an individual developer s machine.
for example s5 said ...if it doesn t work here on the ci it doesn t matter if it works on your machine.
m4 ci helps projects deploy more oen.
our previous work found that open source projects that use ci deploy twice as often as projects that do not use ci.
in our interviews developers told us that they feel that ci helped them deploy more often.
additionally developers told us that ci enabled them to have shorter development cycles than they otherwise would have even if they did not deploy often for business reasons.
for example s14 said we merge into master and consider that releasable.
we don t often release every sprint because our customer doesn t want to.
since we are services company not a products company it s up to our customer to decide if they want to release but we ensure every two weeks our code is releasable if the customer chooses to do so.
m5 ci allows faster iterations.
participants told us that running ci for every change allows them to quickly identify when the current changeset will break the build or will cause problems in some other location s of the codebase.
having this immediate feedback enables much faster development cycles.
this speed allows developers to make large changes quickly without introducing a large amount of bugs into the codebase.
s15 stated we were able to run through up to or cycles a day running through dierent tests to nd where we were what solutions needed to be where.
without being able to do that without that speed and that feedback there is no way we could have accomplished releasing the software in the time frame required with the quality we wanted.
m6 ci makes integration easier.
initially ci was presented as a way to avoid painful integrations .
however while developers do think ci makes integration easier it is not the primary reason that motivates developers to use ci.
for many developers they see their vcs as the solution to dicult integrations not the ci.
m7 enforcing a specic workflow.
prior to ci there was no common way for tools to enforce a specic workow e.g.
ensuring all tests are run before accepting changes .
this is especially a concern for distributed teams where it is harder to overcome tooling gaps through informal communication channels.
however with ci not only are all the tests run on every changeset but everyone knows what the results are.
everyone on the team is aware when a code breaks the tests or the builds without having to download the code and check the test results on their own machine.
this can help nd bugs faster and increase team awareness both of which are important parts of code review .
s16 told us that he was pretty sure that before they added ci to their project contributors were not running the tests routinely.
202trade os in continuous integration assurance security and flexibility esec fse september paderborn germany m8 test across all platforms.
ci allows a system to be tested on all major platforms windows linux and os x without each environment being setup locally by each developer e.g.
s16 stated we are testing across more platforms now it is not just os x and linux which is mostly what developers on projects run.
that has been useful.
nevertheless one survey participant responded to our openended question at the end of the survey simplifying ci across platforms could be easier.
we currently want to test for os x linux and windows and need to have ci services.
while this is a benet already realized for some participants others see this as an area in which substantial improvements could be made to ci to provide additional support.
observation developers use ci to guarantee quality consistency and viability across dierent environments.
however adding and maintaining automated tests causes these benets to come at the expense of increased time and eort.
.
experiences we next answer the research question what benets do developers experience using ci?
rq4 devanbu et al.
found that developers have strongly held beliefs often based on personal experience more than research results and that practitioner beliefs should be given due attention.
in this section we present developers beliefs gathered from interviews about using ci.
our results show developers are very positive about the use of ci.
b f moresimilarless figure do developers on projects with ci give more similar less value to automated tests?
data sources b road survey f ocused survey e1 developers believe projects with ci give more value to automated tests.
several participants told us that before using ci although developers would write unit tests they often would not be run and developers did not feel that writing tests was worth the eort.
s11 related several situations i have been in there is no ci but there is a test suite and there is a vague expectation that someone is running this test sometimes.
and if you are the poor schmuck that actually cares about tests and you are trying to run them and you can t get anything to pass and you don t know why and you are hunting around like does anyone else actually do this?
however due to the introduction of ci developers were able to see their tests being run for every changeset and the whole team becomes aware when the tests catch an error that otherwise would have made it into the product.
s16 summarized this feeling increases the value of tests and makes us more likely to write tests to always have that check in there.
without ci developers are not always going to run the tests locally or you might not have the time to if it is a larger suite.
b f highersimilarlower figure do projects with ci have higher similar lower test quality?
data sources b road survey f ocused survey e2 developers believe projects with ci have higher quality tests.
interview participants told us that because projects that use ci run their automated tests more often and the results are visible to the entire team this motivates developers to write higher quality tests.
several participants claimed that using ci resulted in higher test coverage which they equate with higher quality tests.
for example s8 stated ... we jumped the coverage from a single digit to of the code base in one year.
to conrm this we asked the same question of survey participants.
figure shows that the survey participants overwhelmingly agree that projects with ci have higher quality tests.
b f highersimilarlower figure do projects with ci have higher similar lower code quality?
data sources b road survey f ocused survey e3 developers believe projects that use ci have higher code quality.
developers believe that using ci leads to higher code quality.
by writing a good automated test suite and running it after every change developers can quickly identify when they make a change that does not behave as anticipated or breaks some other part of the code.
s10 said ci for me is a very intimate part of my development process.
... i lean on it for condence in all areas.
essentially if i don t have some way of measuring my test coverage my condence is low.
... if i don t have at least one end to end test to make sure it runs as humans expect it to run my condence is low.
b f moresimilarless figure are developers on projects with ci more similar less productive?
data sources b road survey f ocused survey e4 developers believe projects with ci are more productive.
according to our interview participants ci allows developers to focus more on being productive and to let the ci take care of boring repetitive steps which can be handled by automation.
s2 said 203esec fse september paderborn germany m. hilton n. nelson t. tunnell d. marinov and d. dig it just gets so unwieldy and trying to keep track of all those bits and pieces that are moving around ... easier it is for them to just focus on what they need to do.
another reason interview participants gave for being more productive with ci was that ci allows for faster iterations which helps developers be more productive.
s16 said i think has made it easier to iterate more quickly because you can have more trust that you are not breaking all the things.
observation some perceived benets of ci are also benets from automated testing test suite maintenance and adherence to project standards.
however developers attribute these benets to ci.
discussion we discuss the trade os developers face when using ci the implications of those trade os and the dierences between our two surveys.
.
ci trade os as with any technology developers who use ci should be aware of the trade os that arise when using that technology.
we will look into three trade os that developers should be aware of when using ci assurance security and flexibility .
assurance speed vs certainty developers must consider the trade o between speed and certainty.
one of the benets of ci is that it improves validation of the code see m1 m2 and m9 .
however the certainty that code is correct comes at a price.
building and running all these additional tests causes the ci to slow down which developers also considered a problem see b2 m10 .
ensuring that their code is correctly tested but keeping build times manageable is a trade o developers must be aware of.
rothermel et al.
also identify this trade o in terms of running tests as a motivation for test prioritization.
security access vs information security information security should be considered by all developers.
developers are concerned about security when using ci see b8 n7 .
this is important because a ci pipeline should protect the integrity of the code passing through the pipeline protect any sensitive information needed during the build and test process e.g.
credentials to a database as well as protect the machines that are running the ci system.
however limiting access to the ci pipeline conicts with developers need for better access see b1 n4 .
during our interviews developers reported that troubleshooting ci build failures was often dicult because they did not have the same access to code running on a ci system as they did when running it locally on their own machine.
providing more access may make debugging easier but poses challenges when trying to ensure the integrity of the ci pipeline.
post and kagan examine this trade o for knowledge workers and found security restrictions hinder a third of workers from being able to perform their jobs.flexibility conguration vs simplicity another trade o that developers face is between the exibility and power of highly congurable ci systems and the ease of use that comes from simplicity.
developers wish to have more exibility in conguring and using their ci systems see b4 b7 n2 and n3 .
more exibility increases the power of a ci system while at the same time also increasing its complexity.
however the rising complexity of ci systems is also a concern for developers see b5 b6 n1 and n5 .
developers needs for more exibility directly opposes the desire for more simplicity.
xu et al.
examine over congurable systems and also found that these systems severely hinder usability.
.
implications each of these three trade os leads to direct implications for developers tool builders and researchers .
assurance speed vs certainty developers should be careful to only write tests that add value to the project.
tests that do not provide value still consume resources every ci build and slow down the build process.
as more tests are written over time build times trend upward.
teams should schedule time for developers to maintain their test suites where they can perform tasks such as removing unneeded tests improving the test suite by lling in gaps in coverage or increasing test quality.
developers face dicult choices about the extent to which each project should be tested and to what extent they are willing to slow down the build process to achieve that level of testing.
some projects can accept speed reductions because of large rigorous tests.
however for other projects it may be better to keep the test run times faster by only executing some of the tests.
while this can be done manually developers should consider using advanced test selection minimization approaches .
tool builders can support developers by creating tools that allow developers to easily run subsets of their testing suites .
helping developers perform better test selection can trade some certainty for speed gains.
researchers should investigate the trade os between speed and certainty.
are there specic thresholds where the build duration matters more than others?
our results suggest that developers nd it important to keep build times under minutes.
researchers should nd ways to give the best possible feedback to developers within minutes.
another avenue for researchers is to build upon previous work using test selection and test prioritization to make the ci process more cost eective.
security access vs information security developers should be cognizant of the security concerns that extra access to the ci pipeline introduces.
this is especially a concern for developers inside companies where some or all of their code is open source.
one interview participant told us that they navigate the dichotomy between security and openness by maintaining both an internal ci server that operates behind their company rewall and using travis ci externally.
they cannot expose their internal ci due to condentiality requirements but they use external ci to 204trade os in continuous integration assurance security and flexibility esec fse september paderborn germany be taken seriously and maintain a positive relationship with the developer community at large.
tool builders should provide developers with the ability to have more access to the build pipeline without compromising the security of the system.
one way of accomplishing this is could be to provide ne grained account management with dierent levels of access e.g.
restricting less trusted accounts to view only access of build results and allowing trusted accounts to have full access to build results and management features in the ci system.
researchers should explore the security challenges that arise when using ci.
although ci aims at automating and simplifying the testing and validation process the increased infrastructure provides additional attack vectors that can be exploited.
the security implications of ci require more thorough examination by security researchers in particular.
researchers should also examine the feasibility of creating systems that allow developers to safely expose their ci systems without compromising their security.
flexibility conguration vs simplicity developers should recognize that custom development processes bring complexity increase maintenance costs installation costs etc.
they should consider adopting convention over conguration if they want to reduce the complexity of their ci system.
developers should strive to keep their processes as simple as possible to avoid adding unneeded complexity.
developers should consider the long term costs of highly complex custom ci systems.
if the ci becomes overly complex and the administration is not shared among a team there is a vulnerability to the overall long term viability if the maintainer leaves the project.
developers should also consider the long term maintenance costs when considering adding complexity to their ci pipeline.
tool builders must contend with developers that want expanded uis for managing the ci pipeline as well as having the underlying congurations be captured by version control systems.
tool builders should create tools that allow for ui changes to congurations but also output those congurations in simple text les that can be easily included in version control.
researchers should collect empirical evidence that helps developers who wish to reduce complexity by prioritizing convention over conguration to establish those conventions based on evidence not on arbitrary decisions.
researchers should develop a series of empirically justied best practices for ci processes.
also researchers should evaluate the claims of developers who strongly believe that ci improves test quality and that ci makes them more productive.
.
focused pivotal vs broad survey results we deployed the focused survey at a single company pivotal and the broad survey to a large population of developers using social media.
after performing both surveys we discussed the ndings with a manager at pivotal and these discussions allowed us to develop a deeper understanding of the results.
flaky tests the survey deployed at pivotal contained additional questions requested by pivotal.
one question asked developers to report the number of ci builds failing each week due to true testfailures.
another question asked developers to estimate the number of ci builds failing due to non deterministic aky tests .
figure shows the reported number of ci build failures because of aky tests as well as failures due to true test failures.
there was no signicant dierence between the two distributions pearson s chi squared test p value .
suggesting that developers experienced similar numbers of aky and true ci failures per week.
however for the largest category fails a week there were twice as many aky failures as true failures.
when we discussed our ndings with the manager at pivotal he indicated this was the most surprising nding.
he related that at pivotal they have a culture of trying to remove akiness from tests whenever possible.
that claim was supported by our survey response where .
of pivotal participants reported that when they encounter a aky test they x it.
nevertheless our participants reported that ci failures at pivotal were just as likely to be caused by aky tests as by true test failures.
true flakynone331 fail262 fails1194 fails14115 fails96 fails48 figure flaky vs true test failures reported by pivotal developers n build times focused survey respondents indicated that their ci build times typically take greater than minutes .
this is in contrast with the minutes average response from respondents in the broad survey.
this dierence can also be observed in the acceptable build time question in which focused survey respondents selected varies by project most often compared to the broad survey respondents that selected minutes as the most commonly acceptable build time.
pivotal management promotes the use of ci and its accompanying automation for as many aspects of their software development as possible.
according to the manager at pivotal the dierence in responses for actual and acceptable build times can be explained by the belief that adhering to test driven development results in signicantly more unit tests but for pivotal the extra testing is worth the longer ci build times.
the manager also suggested that the addition of multiple target platforms in ci builds will also necessarily increase build times.
therefore at pivotal while they seek to reduce those times whenever possible they accept longer build times when necessary.
maintenance costs focused survey respondents reported experiencing troubleshooting a ci build failure overly long ci build times and maintaining a ci server or service more often than the broad survey respondents.
when asked the manager at pivotal indicated that they actively promote a culture of process ownership within their development teams so the developers are responsible for maintaining and conguring the ci services that they use.
they also said that the ci systems they use are more powerful and complex than other ci systems resulting in a more complicated setup but provides more control over the build process.
205esec fse september paderborn germany m. hilton n. nelson t. tunnell d. marinov and d. dig threats to validity replicability can others replicate our results?
qualitative studies in general are very dicult to replicate.
we address this threat by conducting interviews a focused survey at a single company and a large scale survey of a broad range of developers.
the interview script code set survey questions and raw data can be found on our companion site.
we cannot publish the transcripts because we told the interview participants we would not release the transcripts.
construct are we asking the right questions?
to answer our research questions we used semi structured interviews which explore themes while also letting participants bring up new ideas throughout the process.
by allowing participants to have the freedom to bring up topics we avoid biasing the interviews with our preconceived ideas of ci.
internal did we skew the accuracy of our results with how we collected and analyzed information?
interviews and surveys can be aected by bias and inaccurate responses.
these could be intentional or unintentional.
we gave interviewees gift cards for their participation and oered the survey participants the chance to win a gift card which could bias our results.
to mitigate these concerns we followed established guidelines in the literature for designing and deploying our survey.
we ran iterative pilots for both studies and the surveys and kept the surveys as short as possible.
external do our results generalize?
by interviewing selected developers it is not possible to understand the entire developer population.
to mitigate this we attempted to recruit as diverse a population as possible including dierent companies and a wide variety of company size and domains.
we then validate our responses using the focused survey with responses and the broad survey with responses from over countries.
because pivotal is a company which builds ci tools the results could be biased in favor of ci.
to mitigate this we widely recruited participants for the broad survey.
however because we recruited participants for the broad survey by advertising online our results may be aected by self selection bias.
related work continuous integration studies vasilescu et al.
performed a preliminary quantitative study of quality outcomes for open source projects using ci.
our previous work presented a quantitative study of the costs benets and usage of ci in open source software.
these studies do not examine barriers or needs when using ci nor do they address the trade os developers must contend with.
in contrast to these studies we develop a deep understanding of the the barriers and unmet needs of developers through interviews and surveys.
we also discover trade os users face when using ci.
debbiche et al.
present a case study of challenges faced by a telecommunications company when adopting ci.
they present barriers from a specic company but provide no generalized ndings and do not address needs experiences or benets of ci.
other researchers have studied ways to improve ci.
st hl and bosch study automated software integration a key building block for ci.
elbaum et al.
examined the use of regression test selection techniques to increase the cost eectiveness in ci.
vos et al.
propose running ci tests even after deployment to check the production code.
mu lu et al.
ran tests continuously inthe ide even more often than in ci.
staples et al.
describe continuous validation as a potential next step after ci cd.
other work related to ci and automated testing includes generating acceptance tests from unit tests black box test prioritization ordering of failed unit tests generating automated tests at runtime and prioritizing acceptance tests .
continuous delivery continuous delivery cd the automated deployment of software is enabled by the use of ci.
olsson et al.
performed a case study of four companies transitioning to continuous delivery.
they found some similar barriers when transitioned to cd as we nd for ci including automating the build process b3 lack of support for desired workow b4 and lack of tool integration b7 .
lepp nen et al.
conducted semi structured interviews with developers to learn more about cd.
their paper does not have any quantitative analysis and does not claim to provide generalized ndings.
others have studied cd and mysql schemas cd at facebook and the tension between release speed and software quality when cd .
developer studies we perform a study of developers to learn about their barriers unmet needs motivations and experiences.
many other researchers have also studied developers e.g.
to learn how devops handles security developers debugging needs and how developers examine code history .
automated testing previous work has examined the intertwined nature of ci and automated testing.
stolberg and sumrell both provide experience reports of the eects of automating tests during transitions to ci.
santos and hindle used travis ci build status as proxy for code quality.
conclusions and future work software teams use ci for many activities including to catch errors make integration easier and deploy more often.
despite the many benets of ci developers still encounter a wide variety of problems with ci.
we hope that this paper motivates researchers to tackle the hard problems that developers face with ci.
for example future work should examine the relationship between developers desired and actual build times when using ci.
another area that we identied for future work is a deeper analysis into aky tests.
flaky test identication tools could automatically detect aky tests to help developers know if ci failures are due to aky tests or legitimate test failures.
ci is here to stay as a development practice and we need continuous improvement ci of a dierent kind of ci to realize its full potential.