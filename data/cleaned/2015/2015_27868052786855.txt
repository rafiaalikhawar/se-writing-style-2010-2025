how developers search for code a case study caitlin sadowski google mountain view ca usa supertri google.comkathryn t. stolee iowa state university ames ia usa kstolee iastate.edusebastian elbaum university of nebraska lincoln ne usa elbaum cse.unl.edu abstract with the advent of large code repositories and sophisticated search capabilities code search is increasingly becoming a key software development activity.
in this work we shed some light into how developers search for code through a case study performed at google using a combination of survey and log analysis methodologies.
our study provides insights into what developers are and trying to learn when performing a search search scope query properties and what a search session under di erent contexts usually entails.
our results indicate that programmers search for code very frequently conducting an average of ve search sessions with total queries each workday.
the search queries are often targeted at a particular code location and programmers are typically looking for code with which they are somewhat familiar.
further programmers are generally seeking answers to questions about how to use an api what code does why something is failing or where code is located.
categories and subject descriptors d. .
design tools and techniques user interfaces keywords developer tools code search user evaluation .
introduction code search has been a part of software development for decades.
it is unclear when it became entrenched in software development practices but one of the rst studies on the subject by singer et al.
reported in that the most frequent developer activity was code search .
the search mechanisms have evolved since that report from grep like tools to specialized and more e cient code search engines e.g.
.
perhaps more impressive is the increased scope of code search as repositories containing tens of billions of lines of code become available e.g.
.throughout this evolution code search appears to have cemented its role in software development .
in spite of the pervasiveness of code search we do not quite understand many aspects of how it is performed invivo.
there is evidence discussed in more detail in section that code search is practiced often that there is a great deal of variation in how much e ort is involved in code search and that the developer s experience matters.
surprisingly we still do not know much about the context in which code search is performed what kind of questions developers are trying to answer when searching for code what the most common search patterns are and what patterns are predominant in certain contexts.
understanding how developers interact with code search is crucial to drive the next generation of techniques and tools to support searching and future software development environments and work ows.
through this work we provide a characterization of how developers at google search for code obtained through a combination of survey responses and search log analysis tens of thousands of records generated by developers during a period of weeks.
by carefully intertwining both methodologies deploying the surveys just before a search begins and having access to anonymized but precise user identi cation we have been able to derive interesting and unique insights about code search practices.
more speci cally the study nds programmers use code search to answer questions about a wide range of topics including what code does where is code instantiated why code is behaving a certain way whowas responsible for an edit and when it happened and how to perform a task.
rq1 code search tools are becoming so entrenched in software development that they are used to navigate even through code developers know well.
rq2 almost a third of searches are incrementally performed through query reformulation.
most queries were scoped to a subset of the code repository with short sessions lasting a median of seconds consisting of one or two queries.
rq3 on average developers compose search queries per weekday median is .
compared to previous literature it would seem that code search is far more common than it once was.
rq4 search patterns vary greatly among contexts.
for example sessions with more clicks are typically associated with code reviews and programmers searching permission to make digital or hard copies of part or all of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for third party components of this work must be honored.
for all other uses contact the owner author.
copyright is held by the owner author s .
esec fse august september bergamo italy acm.
for code attributes are less likely to click on a result.
rq5 these ndings have several important implications for the future of code search techniques and tools.
first given the pervasiveness of code search in software development the e ectiveness and e ciency of code search tools is likely to have an increasingly signi cant impact on developers overall practices and performance.
second code search is used by developers to answer diverse questions that require enriching its query format its ranking algorithms and its sources of data to better match those questions.
third although code repository growth seems to be boundless code search tends to have a well targeted scope.
search tools could bene t from inferring such scope by using for example a developer s code history to prioritize the results.
fourth code information needs lead to di erent usage patterns that may be better served if code search tools were aware of those needs by for example providing additional operators or being cognizant of other tools currently being used by the developer.
last as search sessions become shorter and more focused there is a greater incentive for code search tools to be better integrated into software development environments to reduce the number context switches.
.
related work code search can take on many forms from searching for code reuse to searching for concept localization.
e orts to observe code search have ranged from surveys to lab studies log analysis to observations of work practices.
in this section we focus on studies that explore code search behavior and existing code search tools.
.
previous code search studies code search has been studied in the wild by observing programmers directly or analyzing search logs in controlled settings using pre de ned tasks or by surveying developers about their search practices .
in some cases the goal was not to observe code search directly but rather code search was observed as part of information seeking activities performed by developers .
in these search studies participants come from companies student populations or crowdsourcing platforms such as amazon s mechanical turk or online newsgroups .
surveys have reported that of programmers search for code frequently and search occasionally .
furthermore among developers who program daily search for code daily .
in addition to frequency surveys can also inform search motivations.
in one survey the criteria that guide the nal code selection were reported .
among the respondents consider the functionality consider the licensing terms and consider user support when selecting code for reuse.
among search sessions dealing with java .
had a goal of nding learning about an api .
of those .
included the word sample or example in the query.
surveys often su er from response bias where subjects recollections of past events might not match actual past events.
by placing the survey directly before a search occurs the response bias in our study is mitigated as the programmer does not need to re ect on past activity but rather report on current activity.
in our methodology we further combine survey analysis with log analysis to bringcontext to the search behaviors.
we revisit prior survey results in section .
.
a prevalent nding across observational studies is that code search is common among maintenance tasks.
observing eight programmers in a company across several sessions revealed that of programmers perform search activities using standard tools such as grep or in house toolsets .
with a more focused study of one programmer that same study revealed that a search task is performed on of the days in which a programmer works and that search is the most frequently performed activity .
lab studies are often designed to observe behaviors other than search but search activities are recorded.
while performing program maintenance tasks of participants all corporate employees used search tools .
when starting maintenance tasks student programmers typically start with search within an ide participants and occasionally by searching the web using google .
other studies have shown that of programmers use search during program maintenance tasks .
search terms are also the focus of some lab studies.
one study found that average searches to google contain .
terms versus .
terms for the now deprecated external google code search .
for krugle .
to koders and .
to sourceforge .
for the rst query of a session of queries contain just code contain just natural language and contain a mix .
we revisit these observations in the context of our search logs in section .
.
yet other studies relate search behaviors with experience.
brant et al.
found that when a programmer wants to learn a new concept each web session took tens of minutes .
in contrast when a programmer wants to refresh their memory of a concept like a syntactic detail a web session took tens of seconds.
clarifying implementation details usually took approximately one minute.
we revisit these observations in the context of our search logs in section .
.
beyond just the use of search some lab studies have characterized search sessions.
for example in two hour laboratory experiments li et al.
found that developers conducted .
or .
web searches on average .
another controlled study found that each search session involved .
queries .
for tasks taking an average of seconds to complete ho man et al.
observed an average of .
queries to google .
these studies indicate a range of frequencies for search activity but the observation remains that search is a frequent activity among programmers.
rather than just using lab studies using search logs can allow researchers to analyze more data providing useful insights into the frequency of use for tools as well as which behaviors and features are most common.
for example when analyzing search logs and identifying sessions based on ip address and durations of inactivity it was found that users perform an average of .
queries per session .
however when using logs some of the details of the search process like the user s context are masked.
for these reason we combine log analysis with in situ surveys.
we revisit these ndings in section .
.
.
existing code search tools several code search engines exist today.
sim s paper compares the following koders aka ohloh google general google code search the former public version krugle sourceforge exploring the number of java les indexed retrieval algorithm whether regular expressions are permitted in the query and the presence of special features such as lters.
each of these search engines is publicly available and indexes based on keyword and or method signatures.
other source code search engines have started to provide more semantic features.
exemplar uses a keyword search that ranks based on application descriptions apis used and the data ow among those apis providing a more semantic search approach .
s6 uses keywords type signatures and a test based approach to nd modules that match the keywords have a speci ed interface and behave as speci ed using an example .
codegenie uses a testdriven approach to search for a reuse code .
sourcerer has indexed over million lines of java code maintaining a database with keyword structure data type and pattern information .
satsy uses a unique query model consisting of input output pairs and an smt solver to nd source code that behaves as speci ed by the query .
.
study most software development at google is done in one giant repository and developers are able to browse that repository to review and potentially use code outside of their speci c project .
google engineers are able to search over the internal codebase using an internal code search engine this tool is similar to the public code search tool that was available externally from until and a variant of this code search tool is currently available externally for chromium .
developers can search for code with regexes and operators such as lang .
for example lang java server could return a result like myserver.java .
queries with the file operator match against the le path.
operators may also be used to return results without a certain property so that a path supplied with file will return results that do not match the path.
in addition to returning a ranked list of les as search results the code search tool also surfaces some additional metadata about the les and allows developers to navigate through source code les via the directory structure or by clicking on