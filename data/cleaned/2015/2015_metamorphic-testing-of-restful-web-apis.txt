metamorphic testing of restful web apis sergio segura jos a. parejo javier troya and antonio ruiz cort s dept.
of computer languages and systems universidad de sevilla sevilla spain sergiosegura us.es abstract web application programming interfaces apis specifyhowtoaccessservicesanddataoverthenetwork typicallyusingwebservices.
web apis are rapidly proliferating as a key element to foster reusability integration andinnovation enablingnewconsumption models such as mobile or smart tv apps.
companies such as facebook twitter google ebay ornetflix receive billionsof api calls every day from thousands of different third party applications and devices which constitutes more than half of their total traffic.
as web apis are progressively becoming the cornerstone of software integration their validation is getting more critical.
in thiscontext thefastdetectionofbugsisofutmostimportanceto increase the quality of internal products and third party applications.
however testing web apis is challenging mainly due to the difficulty to assess whether the output of an api call is correct i.e.
theoracle problem.
for instance consider the web api of the popularmusicstreamingservicespotify.supposeasearchforalbums withthequery redhouse returning21totalmatches isthisoutput correct?doallthealbumsintheresultsetcontainthekeyword?
are there any albumscontaining the keyword not included inthe result set?
answering these questions is difficult even with small result sets and often infeasible when the results are counted by thousands or millions.
metamorphic testing alleviatestheoracleproblembyproviding an alternative when the expected output of a test execution is complexorunknown.ratherthancheckingtheoutputofanindividual program execution metamorphic testing checks whether multi ple executions of the program under test fulfil certain necessary properties called metamorphic relations.
for instance consider the following metamorphic relation in spotify two searches for albums with the same query should return the same number of total results re gardless of the size of pagination.supposethatanewspotifysearch is performed using the exact same query as before and increasing themaximumnumberofresultsperpagefrom20 defaultvalue to50 thissearchreturns27totalalbums 6morematchesthaninthe previous search which reveals a bug.
this is an example of a real and reproducible fault detected using the approach presented in thispaperandreportedtospotify.accordingtospotifydevelopers it was a regression fault caused by a fix with undesired side effects.
inthispaper wepresentametamorphictestingapproachfor theautomateddetectionoffaultsinrestfulwebapis henceforth permission to make digital or hard copies of part or all of this work for personal or classroom use is granted without fee provided that copies are not made or distributed forprofitorcommercialadvantageandthatcopiesbearthisnoticeandthefullcitation onthefirstpage.copyrightsforthird partycomponentsofthisworkmustbehonored.
for all other uses contact the owner author s .
icse may june gothenburg sweden copyright held by the owner author s .
acm isbn .
referred to as simply web apis .
we introduce the concept ofmetamorphic relationoutputpatterns.a metamorphic relation output pattern mrop definesanabstractoutputrelationtypically identifiedinwebapis regardlessoftheirapplicationdomain.each mropisdefinedintermsofsetoperationsamongtestoutputssuchasequality union subset orintersection.mropsprovideahelpful guidefortheidentificationofmetamorphicrelations broadening thescopeof ourworkbeyond aparticularweb api.basedonthe notion of mrop a methodology is proposed for the application oftheapproachtoanywebapifollowingtherestarchitectural pattern.
the approach was evaluated in several steps.
first we used the proposed methodology to identify metamorphic relations infour web apis developed by undergraduate students.
all the relations are instances of the proposed mrops.
then we assessed the effectiveness of the identified relations at revealing automaticallyseededfaults i.e.
mutants intheapisundertest.asa result seeded faults were detected achieving a mutation score of95.
.second weevaluatedtheapproachusingrealwebapis and faults.
in particular we identified metamorphic relations in thewebapiofspotifyand40metamorphicrelationsintheweb api of youtube.
each metamorphic relation was implemented and automaticallyexecutedusing both randomandmanualtest data.in total 469k metamorphic tests were generated.
as a result metamorphic relations were violated and issues revealed and reported 3issuesinspotifyand8issuesinyoutube .todate ofthereportedissues have beeneitherconfirmedbythe apidevelopers or reproduced by other users supporting the effectiveness of our approach.
ccs concepts software and its engineering software testing and debugging keywords metamorphic testing rest restful web services web api acm reference format sergiosegura jos a.parejo javiertroyaand antonioruiz cort s. .
metamorphictestingofrestfulwebapis.in icse 40th international conference on software engineering may june gothenburg sweden.acm new york ny usa page.