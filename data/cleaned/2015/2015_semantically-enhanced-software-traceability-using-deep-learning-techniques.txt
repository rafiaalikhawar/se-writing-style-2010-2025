semantically enhanced software traceability using deep learning techniques jin guo jinghui cheng and jane cleland huang university of notre dame notre dame in usa email jguo3 jinghuicheng janeclelandhuang nd.edu abstract in most safety critical domains the need for traceability is prescribed by certifying bodies.
trace links are generally created among requirements design source code test cases and other artifacts however creating such links manually is time consuming and error prone.
automated solutions use information retrieval and machine learning techniques to generate trace links however current techniques fail to understand semantics of the software artifacts or to integrate domain knowledge into the tracing process and therefore tend to deliver imprecise and inaccurate results.
in this paper we present a solution that uses deep learning to incorporate requirements artifact semantics and domain knowledge into the tracing solution.
we propose a tracing network architecture that utilizes word embedding and recurrent neural network rnn models to generate trace links.
word embedding learns word vectors that represent knowledge of the domain corpus and rnn uses these word vectors to learn the sentence semantics of requirements artifacts.
we trained different configurations of the tracing network using existing trace links in the positive train control domain and identified the bidirectional gated recurrent unit bi gru as the best model for the tracing task.
bi gru significantly out performed stateof the art tracing methods including the vector space model and latent semantic indexing.
keywords traceability deep learning recurrent neural network semantic representation.
i. introduction requirements traceability plays an essential role in the software development process.
defined as the ability to describe and follow the life of a requirement in both a forwards and backwards direction through periods of ongoing refinement and iteration traceability supports a diverse set of software engineering activities including change impact analysis regression test selection cost prediction and compliance verification .
in high dependability systems regulatory standards such as the us federal aviation authority s faa do178b c prescribe the need for trace links to be established and maintained between hazards faults requirements design code and test cases in order to demonstrate that a system is safe for use .
unfortunately the tracing task is arduous to perform and error prone even when industrial tools are used to manually create links or to capture them as a byproduct of the development process .
in practice trace links are often incomplete and inaccurate even in safety critical systems .
to address these problems researchers have proposed and developed solutions for automating the task of creating andmaintaining trace links .
solutions have included information retrieval approaches machine learning heuristic techniques and ai swarming algorithms .
other approaches especially in the area of feature location require additional information obtained from runtime execution traces.
results have been mixed especially when applied to industrial sized datasets where acceptable recall levels above can often only be achieved at extremely low levels of precision .
one of the primary reasons that automated approaches have underperformed is the term mismatch that often exists between pairs of related artifacts .
to illustrate this we draw on an example from the positive train control ptc domain.
ptc is a communication based train control system designed to ensure that trains follow directives in order to prevent accidents from occurring .
the requirement stating that the bos administrative toolset shall allow the authorized administrator to view an on board s last reported on board software v ersion including the associated repository name md5 and whether the fileset is preferred or acceptable.
is associated with the design artifact stating that the operational data panel is used to provide information about the current ptc operations in a subdivision .
recognizing and establishing this link requires non trivial knowledge of domain concepts for example understanding that bos administrative toolset contains the operational data panel each locomotive contains an on board unit for ptc operation and that the operational data panel displays the information of locomotives such as the on board software version to the bos authorized administrator.
this link would likely be missed by popular trace retrieval algorithms such as the vector space model vsm latent semantic indexing lsi and latent direchlet allocation lda which all represent artifacts as bags of words and therefore lose the artifacts embedded semantics.
it would also be missed by techniques that incorporate phrasing without understanding their conceptual associations .
in fact most current techniques lack the sophistication needed to reason about semantic associations between artifacts and therefore fail to establish trace links when there is little meaningful overlap in use of terms.
in our prior work we developed domain contextualized intelligent traceability docit as a proof of concept solution to investigate the integration of domain knowledge into the tracing process.
we demonstrated that for the domain ieee acm 39th international conference on software engineering ieee acm 39th international conference on software engineering .
ieee authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
of ptc systems docit returned accurate trace links achieving mean average precision map of .
in comparison to .
achieved using vsm.
however the cost of setting up docit for a domain was non trivial as it required carefully handcrafting a domain ontology and manually defining trace link heuristics capable of reasoning over the semantics of the artifacts and associated domain knowledge.
furthermore docit depended upon a conventional syntactic parser to analyze the artifacts in order to extract meaningful concepts.
the approach was therefore sensitive to errors in the parser terms missing from the ontology and missing or inadequate heuristics.
as such docit was e ffective but fragile and would require significant e ffort to transfer into new project domains.
on the other hand deep learning techniques have successfully been applied to solve many natural language processing nlp tasks including parsing sentiment analysis question answering and machine translation .
such techniques abstract problems into multiple layers of nonlinear processing nodes they leverage either supervised or unsupervised learning techniques to automatically learn a representation of the language and then use this representation to perform complex nlp tasks.
the goal of the work described in this paper is to utilize deep learning to deliver a scalable portable and fully automated solution for bridging the semantic gap that currently inhibits the success of trace link creation algorithms.
our solution is designed to automate the capture of domain knowledge and the artifacts textual semantics with the explicit goal of improving accuracy of the trace link generation task.
the approach we propose includes two primary phases.
first we learn a set of word embeddings for the domain using an unsupervised learning approach trained over a large set of domain documents.
the approach generates high dimensional word vectors that capture distributional semantics and cooccurrence statistics for each word .
second we use an existing training set of validated trace links from the domain to train a tracing network to predict the likelihood of a trace link existing between two software artifacts.
within the tracing network we adopt a recurrent neural network architecture to learn the representation of artifact semantics.
for each artifact i.e.
each regulation requirement or source code file etc.
each word is replaced by its associated vector representation learned in the word embedding training phase and then sequentially fed into the rnn.
the final output of rnn is a vector that represents the semantic information of the artifact.
the tracing network then compares the semantic vectors of two artifacts and outputs the probability that they are linked.
given the need for an initial training set of trace links our approach cannot be used in an entirely green field domain.
however based on requests from our industrial collaborators we envision the following primary usage scenarios train the tracing network on an initial set of manually constructed trace links for a project and then use it to automate the production of other links as the project proceeds train the tracing network on the complete set of trace links for a project and then use it to find additional links that may havebeen missed during the manual link construction process and finally train the tracing network on the trace links for one project or for specific types of artifacts in one project and then apply it to other projects and artifact types within the same domain.
in this paper we focus on the first scenario.
we evaluate our approach on a large industrial dataset taken from the domain of ptc systems to address two research questions rq1 how should rnn be configured in order to generate the most accurate trace links?
rq2 is rnn able to significantly improve trace link accuracy in comparison to standard baseline techniques?
the remainder of the paper is structured as follows.
we first introduce deep learning techniques related to the tracing network in section ii.
the architecture of the tracing network is described in section iii.
sections iv and v describe the process used to configure the tracing network our experimental design and the results achieved.
finally in sections vi to viii we discuss related work threats to validity and conclusions.
ii.
d eeplearning for natural language processing many modern deep learning models and associated training methods originated from research in artificial neural networks ann .
inspired by advances in neuroscience anns were designed to approximate complex functions of the human brain by connecting a large number of simple computational units in a multi layered structure.
based on anns deep learning models feature more complex network connections in a larger number of layers.
a benefit gained from a more complex structure is the ability to represent data features with multiple levels of abstraction this is usually preferable to more traditional machine learning techniques in which human expertise is needed to select features of data for training.
backpropagation is widely recognized as an e ffective method for training deep neural networks it indicates how the network should adapt its internal parameters to better compute the representation in each layer.
before presenting our approach we describe fundamental concepts of deep learning techniques especially as related to nlp tasks.
furthermore as our interest lies in comparatively evaluating di fferent models for purposes of trace link creation we describe these various techniques in some depth.
a. word embedding conventional nlp and information retrieval techniques treat unique words as atomic symbols and therefore do not take associations among words into account.
to address this limitation word embedding learns the representation of each word from a corpus as a continuous high dimensional vector such that similar words are close together in the vector space.
in addition the embedded word vectors encode syntactic and semantic relationships between words as linear relationships between word vectors .
the use of learned word vectors is considered one of the primary reasons for the success of recent deep learning models for nlp tasks .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
skip gram with negative sampling and glove are the most popular word embedding models due to the notable improvement they bring to word analogy tasks over more traditional approaches such as latent semantic analysis .
word embedding models are trained using unlabeled natural language text by utilizing co occurrence statistics of words in the corpus.
the skip gram model scans context windows across the entire training text to train prediction models .
given the center word in the window of size t this model maximizes the probability that the targeted word appears around the center word while minimizing the probability that a random word appears around the center word.
the glove model uses matrix factorization however we do not discuss it further because its performance is equivalent to the skip gram with negative sampling approach while it is less robust and utilizes more system resources .
b. neural network structures deep learning for nlp tasks are typically addressed using neural network techniques.
feedforward networks also referred to as multi layer perceptrons mlps represent a traditional neural network structure and lay the foundation for many other structures .
however the number of parameters in a fully connected mlp can grow extremely large as the width and depth of the network increases.
to address this limitation researchers have proposed various neural network structures targeting di fferent types of practical problems.
for example convolutional neural networks cnns are especially well suited for image recognition and video analysis tasks .
for nlp tasks recurrent neural networks rnns are widely used and are recognized as a good fit to the unique needs of nlp .
in particular rnn and its variants have produced significant breakthroughs in many nlp tasks including language modeling machine translation and semantic entailment .
in the following sections we first introduce background about rnn and then discuss several rnn variants that were evaluated in this study.
c. standard recurrent neural networks rnn rnns are particularly well suited for processing sequential data such as text and audio.
they connect computational units of the network in a directed cycle such that at each time step t a unit in the rnn not only takes input of the current step i.e.
the next word embedding but also the hidden state of the same unit from the previous time step t .
this feedback mechanism simulates a memory so that a rnn s output is determined by both its current and prior inputs.
furthermore because rnns use the same unit with the same parameters across all time steps they are able to process sequential data of arbitrary length.
this is illustrated in figure .
at a given time step twith input vector xtand its previous hidden output vector ht a standard rnn unit calculates its output as ht tanh wx t uh t b where w uand bare the affine transformation parameters and tanh is the hyperbolic tangent function tanh z ez e z ez e z .
g2 g1 g4 g1 g3 g1 g5 g1 g6 g1 g5 g2 g4 g3 g1 g5 g6 g10 g13 g16 g1 g6 g10 g13 g15 g1 g11 g10 g13 g15 g1 g5 g2 g4 g3 g1 g6 g5 g6 g10 g1 g11 g10 g1 g5 g2 g4 g3 g1 g6 g10 g17 g15 g1 g11 g10 g17 g15 g1 g6 g5 g12 g1 g12 g12 g1 g12 g1 g5 g2 g4 g3 g1 g11 g10 g1 g5 g2 g4 g3 g6 g10 g1 g2 g8 g5 g9 g7 g4 g1 fig.
standard rnn model left and its unfolded architecture through time right .
the black square in the left figure indicates a one time step delay.
a prominent drawback of the standard rnn model is that the network degrades when long dependencies exist in the sequence due to the phenomenon of exploding or vanishing gradients during back propagation .
this makes a standard rnn model difficult to train.
the exploding gradients problem can be effectively addressed by scaling down the gradient when its norm is bigger than a preset value i.e.
gradient clipping .
to address the vanishing gradients problem of the standard rnn model researchers have proposed several variants with mechanics to preserve long term dependencies these variants included long short term memory lstm and the gated recurrent unit gru .
d. long short term memory lstm lstm networks include a memory cell vector in the recurrent unit to preserve long term dependencies .
lstm also introduces a gating mechanism to control when and how to read or write information to the memory cell.
a gate in lstm usually uses a sigmoid function z e z and controls information throughput using a point wise multiplication operation .
specifically when the sigmoid function outputs the gate forbids any information from passing while all information is allowed to pass when the sigmoid function output is .
each lstm unit contains an input gate it a forget gate ft and an output gate ot .
the state of each gate is decided by xtand ht 1such that it wixt uiht bi ft wfxt ufht bf ot woxt uoht bo to update the information in the memory cell a memory candidate vector ctis first calculated using the tanh function.
this memory candidate passes through the input gate which controls how much each dimension in the candidate vector should be remembered .
at the same time the forget gate controls how much each dimension in the previous memory cell state ct 1should be retained.
the actual memory cell state ctis then updated using the sum of these two parts.
ct tanh wcxt ucht bc ct it ct ft ct finally the lstm unit calculates its output htwith an output gate as follows ht ot tanh ct figure a illustrates a typical lstm unit.
using retained memory cell state and the gating mechanism the lstm unit remembers information until it is erased by the forget gate authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
g5 g2 g4 g3 g1 g5 g6 g1 g6 g6 g6 g6 g5 g2 g4 g3 g1 g2 g4 g1 g7 g1 g3 g4 g6 g8 g1 g2 g4 g6 g8 g1 g3 g4 g1 g2 g4 g1 g5 g4 g1 g2 g1 g4 g1 g3 g1 g5 g1 g6 g1 a lstm g5 g2 g4 g3 g1 g5 g2 g4 g3 g3 g4 g6 g8 g1 g3 g4 g1 g5 g4 g1 g3 g4 g1 g7 g1 g2 g1 g4 g1 g5 g1 g6 g1 b gru fig.
comparison between single units from lstm and gru networks.
in 2a i fand oare the input forget and output gates respectively cis the memory cell vector.
in 2b ris the reset gate and uis the update gate .
as such lstm handles long term dependencies more e ffectively.
lstm has been repeatedly applied to solve semantic relatedness tasks and has achieved convincing performance .
these advances motivated us to adopt lstm for reasoning semantics in the tracing task.
e. gated recurrent unit gru finally the recently proposed gated recurrent unit gru model also uses a gating mechanism to control the information flow within a unit but it has a simplified unit structure and does not have a dedicated memory cell vector .
it contains only a reset gate rtand an update gate ut rt wrxt urht br ut wuxt uuht bu in gru networks the previous hidden output ht 1goes through the reset gate rtand is sent back to the unit.
an output candidate htis then calculated using the gated ht 1and the unit s current input xtas follows ht tanh whxt uh rt ht bh the actual output of a unit htis a linear interpolation between the previous output ht 1and the candidate output ht controlled by the update gate ut.
as such the update gate balances how much of the current output is updated using htand ht .
ht ut ht ut ht consequently a gru unit embeds long term information directly into the hidden output vectors.
figure compares the unit structures of lstm and gru networks.
despite having a simpler structure gru has achieved competitive results with lstm for many nlp tasks and as such no decisive conclusion has been drawn about which model is better.
in this work we compare the performance of lstm and gru in order to identify the most suitable model for addressing the tracing problem.
f .
other rnn v ariables in addition to modifying the structure within a single rnn unit the structure of the overall rnn network can be varied.
for instance multi layered rnns stack more than one rnn unit at each time step with the aim of extracting more abstract features from the input sequence.
in contrast bidirectional rnns process sequential data in both forwardand backward directions at the same time this enables the output to be influenced by both past and future data in the sequence.
in this study we also explored the use of twolayered rnns and bidirectional rnns for generating trace links.
iii.
t hetracing network the tracing process comprises several steps first the human analyst initiates a trace for a source artifact second the similarity between the source artifact and each of the potentially linked target artifacts is computed third a list of ranked candidate links are returned and finally the human evaluates the links and accepts the ones deemed to be correct.
the process is repeated for all source artifacts .
out study investigates the effectiveness of various deep learning models and methods for calculating similarities between source and target artifact pairs with the goal of generating accurate trace links.
this is essentially a textual comparison task in which the tracing network needs to leverage domain knowledge to understand the semantics of two individual artifacts and then to evaluate their semantic relatedness for tracing purposes.
valid associations need to be established between related artifacts even when no common words are present.
based on our initial analysis of the strengths and weaknesses of current techniques we decided to adopt word embeddings and rnn techniques to achieve this goal.
therefore we first need to learn word embeddings from a domain corpus in order to effectively encode word relations and then utilize such word embeddings in the tracing network structure to extract and compare their semantics.
in this section we describe our approach for designing and training such a tracing network.
g18 g22 g1 g18 g14 g1 g18 g23 g1 g11 g9 g9 g1 g13 g26 g23 g31 g1 g1 g11 g9 g9 g1 g13 g26 g23 g31 g1 g1 g11 g9 g9 g1 g13 g26 g23 g31 g1 g1 g21 g1 g11 g13 g21 g11 g13 g14 g20 g18 g31 g27 g29 g1 g3 g23 g29 g20 g18 g32 g27 g26 g1 g2 g27 g25 g28 g16 g29 g23 g30 g27 g26 g1 g14 g20 g18 g31 g27 g29 g1 g3 g23 g30 g31 g16 g26 g18 g20 g1 g2 g16 g24 g18 g34 g24 g16 g32 g27 g26 g1 g6 g26 g31 g20 g22 g29 g16 g32 g27 g26 g1 g1 g7 g16 g37 g20 g29 g1 g39 g12 g23 g22 g25 g27 g23 g19 g40 g1 g10 g29 g27 g17 g16 g17 g23 g24 g23 g31 g37 g1 g5 g20 g26 g20 g29 g16 g32 g27 g26 g1 g7 g16 g37 g20 g29 g1 g1 g39 g12 g27 g21 g25 g16 g36 g40 g1 g2 g27 g3 g2 g16 g2 g26 g1 g6 g26 g39 g5 g12 g20 g25 g16 g26 g32 g18 g1 g11 g20 g24 g16 g32 g27 g26 g1 g4 g35 g16 g24 g34 g16 g32 g27 g26 g1 g7 g16 g37 g20 g29 g30 g1 g4 g6 g16 g9 g8 g18 g1 g1 g3 g8 g13 g6 g14 g19 g7 g1 g1 g1 g1 g5 g8 g7 g18 g15 g16 g1 g2 g12 g10 g14 g11 g1 g21 g1 g18 g18 g18 g15 g27 g29 g19 g1 g4 g25 g17 g20 g19 g19 g23 g26 g22 g1 g8 g16 g28 g28 g23 g26 g22 g1 g17 g22 g1 g17 g13 g1 g17 g23 g1 g21 g1 g17 g17 g17 g11 g9 g9 g1 g13 g26 g23 g31 g1 g1 g11 g9 g9 g1 g13 g26 g23 g31 g1 g1 g11 g9 g9 g1 g13 g26 g23 g31 g1 g1 g21 g1 g11 g13 g21 g11 g13 g15 g27 g29 g19 g1 g4 g25 g17 g20 g19 g19 g23 g26 g22 g1 g8 g16 g28 g28 g23 g26 g22 g1 g3 g15 g20 g16 g7 g8 g1 g1 g3 g8 g13 g6 g14 g19 g7 g1 g1 g1 g1 g5 g8 g7 g18 g15 g16 g1 g3 g2 g27 g2 g2 g5 g8 g7 g18 g15 g16 g1 g5 fig.
the architecture of the tracing network.
the software artifacts are first mapped into sequences of embedded word vectors and go through rnn layers to generate the semantic vectors which are then fed into the semantic relation evaluation layers to predict the probability that they are linked.
a. network architecture the design of the neural network architecture is shown in figure .
given the textual content of a source artifact asand a target artifact at each word in asand atis first mapped onto its vector representation through the word embedding layer.
such mappings are trained from the domain corpus using the skip gram model introduced in section ii a. the vectors of authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
words in source artifact s1 s2 ... smare then sent to the rnn layers sequentially and output as a single vector vsrepresenting its semantic information.
in the case of the bidirectional rnn the word vectors are also sent in reverse order as sm sm ... s1.
the target semantic vector vtis generated in the same way using rnn layers.
finally these two vectors are compared in the semantic relation evaluation layers.
the semantic relation evaluation layers in our tracing network adopt the structure proposed by tai et al.
targeted to perform semantic entailment classification tasks for sentence pairs.
the overall calculation of this part of the network can be represented as rpmul vs vt rsub vs vt r wrrpmul urrsub br ptracelink so f tmax wpr bp where so f tmax z j ezj k summationdisplay k 1ezk fo rj ... k here is the point wise multiplication operator used to compare the direction of source and target vectors on each dimension.
the absolute vector subtraction result rsub represents the distance between the two vectors in each dimension.
the network then uses a hidden sigmoid layer to integrate rpmul and rsuband output a single vector to represent their semantic similarity.
finally the output softmax layer uses the result to produce the probability that a valid trace link exists the result of a softmax function is a k dimensional vector of real values in the range that add up to k in this case .
a concrete tracing network is built upon this architecture and is further configured by a set of network settings.
those settings specify the type of rnn unit i.e.
gru or lstm the number of hidden dimensions in rnn units and the semantic relation evaluation layers and other rnn variables such as the number of rnn layers and whether to use bidirectional rnn.
to address our first research question rq1 we explored several different configurations.
we describe how we optimized network settings in section iv b. the tracing network is implemented on the torch framework http torch.ch and the source code is available at https github.com jinguo tracenn.
b. training the tracing network a powerful network is only useful when it can be properly trained using existing data and when it is generalizable to unseen data.
to train the tracing network we use the regularized negative log likelihood as our objective loss function to be minimized.
this objective function is commonly used in categorical prediction models and can be written as j nn summationdisplay i 1logp y yi xi bardbl bardbl2 where indicates the network parameters that need to be trained nis the total number of examples in the training data xiis the input of the ithtraining example yiis theactual category of that example i.e.
link or non link as a result p y yi xi represents the network s prediction on the correct category given the current input and parameters.
the second part of the loss function represents a l2parameter regularization that prevents overfitting where bardbl bardbl2is the euclidean norm of and controls the strength of the regularization.
based on this loss function we used a stochastic gradient descent method to update the network parameters.
according to this method a typical training process is comprised of a number of epochs.
each epoch iterates through all of the training data one time to train the network as such the overall training process uses all the training data several times until the objective loss is su fficiently small or fails to decrease further.
in each epoch the training data is further randomly divided into a number of mini batches each contains one or more training datapoints.
after each batch is processed a gradient of parameters is calculated based on the loss function.
the network then updates its parameters based on this gradient and a learning rate that specifies how fast the parameters move along the gradient direction.
during training we adopted an adaptive learning rate procedure to adjust the learning rate based on the current training performance.
to help the network converge we also decreased the learning rate after each epoch until epoch such that the learning rate at epoch kis determined by epsilon1k epsilon10 epsilon1 where epsilon10is initial learning rate k .
in our experiment epsilon1 is set to epsilon10 and set to .
based on these general methods a tracing network training process is further determined by a set of predefined hyperparameters that help steer the learning behavior.
common hyper parameters include the initial learning rate gradient clip value regulation strength the number of datapoints in a mini batch i.e.
mini batch size and the number of epochs included in the training process.
the techniques for selecting hyper parameters are described in section iv b. iv .
e xperiment setup in this section we explain the methods used to prepare data systematically tune the configuration i.e.
network settings and hyper parameters of the tracing network and compare the performance of the best configuration against other popular trace evaluation methods.
a. data preparation to train the word embeddings we used a corpus from the ptc domain that is comprised of .7mb of clean text extracted from related domain documents and software artifacts.
the original corpus of domain documents was collected from the internet by our industrial collaborators as part of their initial domain analysis process.
we also added the latest wikipedia dump containing about .92gb of clean text to the corpus and used it for one variant of the word embedding configuration.
all documents were preprocessed by transforming characters to lower case and removing all nonalpha numeric characters except for underscores and hyphens.
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
to train and evaluate other parts of the tracing network we used ptc project data provided by our industrial collaborators.
the dataset contains software subsystem requirements ssrs as source artifacts and software subsystem design descriptions ssdd as target artifacts.
each source artifact contained an average of tokens and described a functional requirement of the back o ffice server bos subsystem.
each target artifact contained an average of tokens and specified design details.
there were trace links between ssrs and ssdd artifacts all of which were constructed and validated by our industrial collaborators.
this dataset is considerably larger than those used in most previous studies on requirements traceability and the task of creating links across such a large dataset represents a challenging industrial strength tracing problem.
we randomly selected of the artifact pairs from the ptc project dataset i.e.
for inclusion in a training set for a development set and as a testing set.
given a fixed tracing network configuration the training set was used to update the network parameters i.e.
the weight and bias for affine transformation in each layer in order to minimize the objective loss function.
the development set was used to select the best general model during an initial training process to ensure that the model was not overtrained.
the test data was set aside and only used for evaluating the performance of the final network model.
software project data exhibits special characteristics that impact the training of a neural network .
in particular the number of actual trace links is usually very small for a given set of source and target artifacts compared to the total number of artifact pairs.
in our dataset among all artifact pairs only .
are valid links.
training a neural network using such an unbalanced dataset is very challenging.
a common and relatively simple approach for handling unbalanced datasets is to weight the minority class i.e.
the linked artifacts higher than the majority class i.e.
the non linked ones .
however in the gradient descent method a larger loss weighting could improperly amplify the gradient update for the minority class making the training unstable and causing failure to converge.
another common way to handle unbalanced data is to downsample the majority case in order to produce a fixed and balanced training set.
based on initial experimentation we found that this approach did not yield good results because the examples of non links used for training the network tended to randomly exclude artifact pairs that lay at the frontier at which links and non links are di fferentiated.
furthermore based on initial experimentation we also ruled out the upsampling method because this considerably increased the size of the training set excessively prolonging the training time.
based on further experimentation we adopted a strategy that dynamically constructed balanced training sets using subdatasets.
in each epoch a balanced training set was constructed by including all valid links from the original training set as well as a randomly selected equal number of non links form the training set.
the selection of non links was updated at the start of each epoch.
this approach ensured that over timetable i tracing network configuration search space word embedding source ptc docs dim ptc docs wikipedia dump dim rnn unit type gru lstm bi gru bi lstm avevect as baseline rnn layer hidden dimension rnn30 intg10 rnn60 intg20 init learning rate lr 1e 1e 1e gradient clip value gc regularization strength 1e 1e mini batch size epoch the sampled non links used for training were representative and preserved an equal contribution of links and non links during each epoch.
our initial experimental results showed this technique to be e ffective for training our tracing network.
b. model selection and hyper parameters optimization finding suitable network settings and a good set of hyperparameters is crucial to the success of applying deep learning methods to practical problems .
however given the running time required for training the search space of all the possible combinations of di fferent configurations was too large to provide full coverage.
we therefore first identified several configurations that were expected to produce good performance.
this was accomplished by manually observing how training loss changed during early epochs and following heuristics suggested in .
we then created a network configuration search space centered around these manually identified configurations our search space is summarized in table i. we conducted a grid search and trained all the combinations of each configuration in table i using the training set and then compared their performance on the development set to find the best configuration.
we describe our search space below.
for learning the word embeddings we used the skip gram model provided by the word2vec tool .
we trained the word vectors with two settings dimension vectors using the ptc corpus only and dimension using both ptc and wikipedia dump.
the number of dimensions are set di fferently because the ptc corpus tokens contains considerably less tokens than the ptc wikipedia dump tokens .
while a smaller vector dimension would result in faster training a larger dimension is needed to e ffectively represent the semantics of all tokens in the latter corpus.
to compare which variation of rnn best suits the tracing network we evaluated gru lstm bi directional gru bigru bi directional lstm bi lstm with both and layers introduced in section ii c. the hidden dimensions in each rnn unit were set to either or while the hidden dimensions for the integration layer were set to or correspondingly.
as a baseline method we also replaced the rnn layers with a bag of word method in which the semantic vector of an artifact is simply set to be the average of all word vectors contained in the artifact avevect in table i .
we also summarize the search space for other hyper parameters of the tracing network in table i. authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
c. comparison of tracing methods in practical requirements tracing settings a tracing method returns a list of candidate links between a source artifact serving the role of user query and a set of target artifacts.
an effective algorithm would return all valid links close to the top of the list.
the effectiveness of a tracing algorithm is therefore often measured using mean average precision map .
to calculate map we first calculate the average precision ap for each individual query as ap summationtext retrieved i precision i relevant i relevantlinks where retrievedlinks is the number of retrieved links iis the rank in the sequence of retrieved candidates links relevant i is a binary function assigned if the link is valid and otherwise and precision i is the precision computed after truncating the list immediately below i. then mean average precision map is computed as the mean ap across all queries.
in typical information retrieval settings map is computed for the top n returned links however for traceability purposes we compute it when returning allvalid links as specified in the trace matrix.
this means that our version of map is computed for recall of .
we computed map using the test dataset only and compared the performance of our tracing network with other popular tracing methods i.e.
vector space model vsm and latent semantic indexing lsi .
to make a fair comparison we also optimized the configurations for the vsm and the lsi methods using a genetic algorithm to search through an extensive configuration space of preprocessors and parameters .
finally we configured vsm to use a local inverse document frequency idf weighting scheme when calculating the cosine similarity .
lsi was reduced to dimensions.
for both vsm and lsi we preprocessed the text to remove non alpha numeric characters remove stop words and to stem each word using porter s stemming algorithm.
we also evaluated the results by plotting a precision vs. recall curve.
the graph depicts recall and precision scores at different similarity or probability values.
the precision recall curve thus shows trade o ffs between precision and recall and provides insights into where each method performs best for example whether a technique improves precision at higher or lower levels of recall .
a curve that is farther away from the origin indicates better performance.
v. results and discussion in this section we report the best configurations found in our network configuration search space the performance of the tracing network with the best configuration compared against vsm and lsi and the performance of the tracing network when trained with a larger training set of data.
a. what is the best configuration for the tracing network?
this experiment aims to address the first research question rq1 .
when optimizing the network configuration of the tracing network we first selected the best configuration foreach rnn unit type table ii summarizes these results.
we found that the best configurations for all four rnn unit types were very similar one layer rnn model with hidden dimensions and an integration layer of hidden dimensions learning rate of 1e gradient clip value of and of 1e .
performance varies for di fferent rnn unit types.
table ii best configuration for each rnn unit type rnn unitdev.
lossword emb.ld r ds lr gc bi gru .
ptc .
.
gru .
ptc .
.
bi lstm .
ptc .
.
lstm .
ptc wiki .
.
l number of layers in the rnn model dr hidden dimension in rnn unit ds hidden dimension in integration layer lr initial learning rate gc gradient clipping value regularization strength figure illustrates the learning curves on the training dataset of the four configurations.
all four rnn unit types outperformed the average vector method.
this supports our hypothesis that word order plays an important role when comparing the semantics of sentences.
both gru and bigru achieved faster convergence and more desirable smaller loss than lstm and bi lstm.
although quite similar the bidirectional models performed slightly better than the unidirectional models for both gru and lstm on the training set the bidirectional models also achieved better results on the development dataset compared to their unidirectional counterparts.
as a result the overall best performance was achieved using bi gru configured as shown in table ii.
g25 g1 g25 g21 g26 g1 g25 g21 g27 g1 g25 g21 g28 g1 g25 g21 g29 g1 g25 g21 g30 g1 g25 g21 g31 g1 g25 g21 g32 g1 g25 g21 g33 g1 g4 g18 g17 g14 g16 g1 g30 g1 g26 g25 g1 g26 g30 g1 g27 g25 g1 g27 g30 g1 g28 g25 g1 g28 g30 g1 g29 g25 g1 g29 g30 g1 g30 g25 g1 g30 g30 g1 g3 g9 g4 g6 g7 g6 g7 g5 g1 g2 g8 g10 g10 g1 g5 g9 g12 g1 g3 g6 g22 g5 g9 g12 g1 g2 g20 g15 g13 g15 g14 g19 g1 g25 g1 g25 g21 g26 g1 g25 g21 g27 g1 g25 g21 g28 g1 g25 g21 g29 g1 g25 g21 g30 g1 g25 g21 g31 g1 g25 g21 g32 g1 g25 g21 g33 g1 g4 g18 g17 g14 g16 g1 g30 g1 g26 g25 g1 g26 g30 g1 g27 g25 g1 g27 g30 g1 g28 g25 g1 g28 g30 g1 g29 g25 g1 g29 g30 g1 g30 g25 g1 g30 g30 g1 g7 g10 g11 g8 g1 g3 g6 g22 g7 g10 g11 g8 g1 g2 g20 g15 g13 g15 g14 g19 g1 fig.
comparison of learning curves for rnn variants using their best configurations.
gru and bi gru left converged faster and achieved smaller loss than lstm and bi lstm right .
they all outperformed the baseline.
we also found that in three of the four best configurations the word embedding vectors were trained using the ptc corpus alone.
we speculate that one reason the ptc trained word vectors performed better than the ptc wiki trained vectors is due to di fferences in content of the two corpora.
the ptc wiki corpus contains significantly more words that are used in diverse contexts because the majority of articles in the wiki corpus are not related to the ptc domain.
in the case of words that appear commonly in wiki articles but convey specific meanings in the ptc domain e.g.
message administrator field etc.
their context in more general articles authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
g23 g1 g23 g20 g23 g28 g1 g23 g20 g24 g1 g23 g20 g24 g28 g1 g23 g20 g25 g1 g23 g20 g25 g28 g1 g23 g20 g26 g1 g23 g1 g23 g20 g24 g1 g23 g20 g25 g1 g23 g20 g26 g1 g23 g20 g27 g1 g23 g20 g28 g1 g23 g20 g29 g1 g23 g20 g30 g1 g23 g20 g31 g1 g23 g20 g32 g1 g24 g1 g2 g11 g6 g5 g7 g12 g7 g10 g9 g1 g3 g6 g5 g4 g8 g8 g1 g7 g17 g9 g10 g13 g15 g12 g1 g5 g11 g18 g19 g16 g17 g14 g1 g8 g6 g4 g1 g3 g6 g2 g1 fig.
precision recall curve on test set total data is likely to negatively a ffect the reasoning task on domain specific semantics when there is insufficient training data to disambiguate their usage.
we also tested the tracing networkperformance using dimension word embedding trained bythe ptc corpus.
the result is similar to the best configurationfound in table ii.
these findings suggest that using only thedomain corpus to train word vectors with a reasonable size ismore computationally economical and can yield better results.
b. does the tracing network outperform leading trace retrieval algorithms?
we now evaluate whether the best configuration of the tracing network i.e.
bi gru with configuration shown in tableii outperforms leading trace retrieval algorithms.
links weretherefore generated for each source and target artifact pair inthe test set total data and for each source artifact rankedby descending probability scores.
average precision ap w a s calculated using equation .
we then compared the aps forour tracing network against those generated using the bestperforming vsm and lsi configurations.
our tracing networkwas able to achieve a map of .
this value is higherthan that achieved using vsm map .
and higher than lsi map .
.
we conducted a friedman test and found a statistically significant difference among the ap valuesassociated with the three methods x .
p .
.
we then conducted three pairwise wilcoxon signed ranks testswith bonferroni p value adjustments.
results indicated thatthe aps associated with our tracing network were significantlyhigher m .
sd .
than those achieved using vsm m .
sd .
p .
and lsi m .
sd .
p .
in contrast there was no significant di fference when comparing aps for vsm versus those for lsi.
when comparing the precision recall curves for the three methods figure we observed that the tracing network out performed vsm and lsi at higher levels of recall.
given thegoal to achieve close to recall when performing tracingtasks this is an important achievement.
precision improvednotably when recall was above .
.
this improvement canbe attributed to the fact that the tracing network is able toextract semantic information from artifacts and to reason overassociations between them.
while it is almost impossible to completely decipher how gru extracts a semantic vector from natural lan g3 g4 g5 g1 g15 g1 g13 g1 g15 g16 g1 g13 g1 g16 g18 g1 g13 g1 g17 g14 g1 g6 g10 g11 g8 g1 g2 g9 g7 g12 g1 g6 g5 g13 g14 g8 g1 g3 g13 g10 g9 g12 g1 g2 g9 g12 g15 g9 g12 g7 g9 g1 g1 g2 g9 g11 g6 g12 g16 g7 g1 g4 g9 g7 g15 g13 g14 g1 a gru output at one time step g14 g18 g1 g14 g17 g13 g22 g1 g14 g17 g13 g21 g1 g14 g17 g13 g20 g1 g14 g17 g13 g19 g1 g17 g1 g17 g13 g19 g1 g17 g13 g20 g1 g17 g13 g21 g1 g17 g13 g22 g1 g18 g1 g12 g13 g10 g4 g1 g2 g5 g6 g3 g7 g9 g5 g8 g7 g1 g4 g8 g10 g8 g11 g1 g2 g6 g11 g8 g1 g5 g9 g7 g6 g11 g8 g1 g2 g6 g11 g8 g1 g3 g12 g11 g9 g12 g11 g1 g14 g18 g1 g14 g17 g13 g22 g1 g14 g17 g13 g21 g1 g14 g17 g13 g20 g1 g14 g17 g13 g19 g1 g17 g1 g17 g13 g19 g1 g17 g13 g20 g1 g17 g13 g21 g1 g17 g13 g22 g1 g18 g1 g11 g12 g10 g4 g1 g2 g5 g6 g3 g7 g9 g5 g8 g7 g1 g4 g8 g10 g8 g11 g1 g2 g6 g11 g8 g1 g5 g9 g7 g6 g11 g8 g1 g2 g6 g11 g8 g1 g3 g12 g11 g9 g12 g11 g1 b gru gate behavior fig.
the reset gate and update gate behavior in gru and their corresponding output on the 24th and 12th dimension ofsentence semantic vector.
the x axis indicates the sequentialinput of words while the y axis is the value of reset gate update gate and output after taking each word.
guage observing gate behavior when gru processes a sentence can provide some insights into how gruperforms this task so well.
as an example we exam ine the gate behavior when our best performing gruprocesses the following artifact text exceptions if the sa filetransferconfiguration datapoint indicates that the bos is not configured for file transfer the file transfermanager sends an filetransferunavailable message to the onboard.
.
the gate behavior varies among dimensionsin the sentence semantic vector.
in figure we show thelevels of the reset and the update gates and the change of theoutput values on two of the dimensions after gru takeseach word from this artifact.
unlike lstm the gru does nothave an explicit memory cell however the unit output itselfcan be considered as a persisting memory whereas the output candidate in equation acts as a temporary memory.
recall that the reset gate controls how much previous output adds to the current input when determining the output candidate i.e.
temporary memory in contrast the update gate balances the contributions of this temporary memory and the previousoutput i.e.
persisting memory to the actual current output.from figure 6b we observe that for the 24th dimension thereset gate is constantly small.
this means that the temporarymemory is mostly decided by the current input word.
the authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
update gate for this dimension was also small for most of the input words until the words datapoint transfer and to came.
those spikes indicate moments when the temporary memory was integrated into the persisting memory.
as such we can speculate that this semantic vector dimension functions to accumulate information from specific keywords across the entire sentence.
conversely for the 12th dimension the reset gate was constantly high indicating that the information stored in the temporary memory was based on both previous output and current input.
therefore the actual output is more sensitive to local context rather than a single keyword.
this is confirmed by the fluctuating shape of the actual output shown in the figure.
for example the output value remained in the same range until the topic was changed from datapoint indication to message transfer .
we believe that this versatile behavior of the gating mechanism might enable gru to encode complex semantic information from a sentence into a vector to support trace link generation and other challenging nlp tasks.
from figure we also notice that the tracing network hits a glass ceiling for improving precision above .
.
we consider this to be caused by its inability to rule out some false positive links that contain valid associations.
for example the tracing network assigns a .
probability of a valid link between artifact the bos administrative toolset shall allow an authorized administrator to view internal errors generated by the bos and the artifact the messagesevents panel provides the functionality to view message and event logs.
the panel provides searching and filtering capabilities where the user can search by a number of parameters depending on the type of data the user wants to view .
there are direct associations between these artifacts messagesevents panel is part of the bos administrative toolset for viewing message and event log administrator is a system user and internal errors generated by the bos is an event.
but this is not a valid link because messagesevents panel only displays messages and events related to external railroad systems rather than to internal events.
it is likely that the tracing network fails to exclude this link because it has not been exposed to su fficient similar negative examples in the training data.
as we described in section iv a every positive example is used while negative examples i.e.
non links are randomly selected during each epoch.
we plan to explore more adequate methods for handling unbalanced data problems caused by characteristics of the tracing data in our future work.
c. how does the tracing network react to more training data?
the number of trace links tends to increase as a software project evolves.
to explore the potential impact of folding them into the training set we increased the training dataset to .
we randomly selected part of the test data and moved it into the training set to reach while retaining the remaining data in the testing set.
using the same configuration as described in section iv b we then retrained the tracing network.
because the size of the test set decreased to we could not make direct comparisons to our previous results.
instead we used both of the trained tracing networks i.e.
g26 g1 g26 g23 g26 g31 g1 g26 g23 g27 g1 g26 g23 g27 g31 g1 g26 g23 g28 g1 g26 g23 g28 g31 g1 g26 g23 g29 g1 g26 g23 g29 g31 g1 g26 g23 g30 g1 g26 g23 g30 g31 g1 g26 g1 g26 g23 g27 g1 g26 g23 g28 g1 g26 g23 g29 g1 g26 g23 g30 g1 g26 g23 g31 g1 g26 g23 g32 g1 g26 g23 g33 g1 g26 g23 g34 g1 g26 g23 g35 g1 g27 g1 g2 g11 g6 g5 g7 g12 g7 g10 g9 g1 g3 g6 g5 g4 g8 g8 g1 g7 g19 g9 g11 g15 g17 g14 g1 g5 g13 g20 g21 g18 g19 g16 g1 g20 g19 g9 g15 g17 g13 g12 g1 g10 g22 g1 g30 g31 g38 g1 g12 g9 g20 g9 g1 g7 g19 g9 g11 g15 g17 g14 g1 g5 g13 g20 g21 g18 g19 g16 g1 g20 g19 g9 g15 g17 g13 g12 g1 g10 g22 g1 g34 g26 g38 g1 g12 g9 g20 g9 g1 g8 g6 g4 g1 g3 g6 g2 g1 fig.
precision recall curve on test set total data.
trained with and of the data respectively to generate trace links against the same small test set sized at .
to reduce the effect of random data selection we repeated this process five times and report the average results.
with a larger training set the map was .
compared to .
for the smaller training set.
results are depicted in the precision recall curve in figure .
with increased training data the network can better di fferentiate links and non links and therefore improve both precision and recall.
improvements were observed especially at low levels of recall.
the performance of the tracing network trained using of data was again compared against vsm and lsi for this larger training set.
a friedman test identified a statistically significant difference among the aps associated with the three methods on this new dataset division x2 .
p .
.
using pairwise wilcoxon signed ranks tests with bonferroni p value adjustments we found that our tracing network performed significantly better map .
than vsm map .
p .
and lsi map .
p .
.
as such we address rq2 and conclude that in general our tracing network improved trace link accuracy in comparison to both vsm and lsi and that improvements were more marked as the size of the training set increased.
we expect additional improvements by reconfiguring the tracing network for use with a larger training set .
however we also observed that when using the original training set i.e.
of data our tracing network only outperformed lsi at higher levels of recall as shown in figure and figure .
in future work we plan to explore the trade o ffs between these two methods for specific data features and to further improve the performance of the tracing network.
vi.
r elated work in this section we focus on prior work that has integrated ontology semantics or nlp into the tracing process.
researchers have attempted to improve bag of word approaches such as the vector space model vsm by integrating matching terms project glossaries and other forms of thesauri .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.
basic enhancements have included user feedback techniques such as rocchio or direct query manipulation dqm to increase or decrease term weights.
however these approaches fail to leverage semantic information.
other techniques identify terms for briding the term mismatch between source and target artifacts.
dietrich et al.
utilized validated trace links to identify frequent item sets of terms occurring across pairs of source and target artifacts and then used these to augment the text in the trace query .
gibiec et al.
approached trace query augmentation by acquiring related documents from the internet and then extracting domain related terms.
researchers have also used phrase detection and chunking to search for requirements impacted by change requests or to improve the trace retrieval process .
none of these techniques attempted to understand semantics of the artifacts.
researchers have also explored the use of knowledge bases to create and utilize semantically aware associations in the trace creation process where a knowledge base include basic domain terms and sentences that describe the relationships between those terms .
data is typically represented as an ontology in which relationships are represented using and or implication and negation operators .
traceability researchers have proposed the idea of using ontology to connect source and target artifacts .
approaches have been proposed for weighting the evidence for a trace link according to distance between concepts in the ontology .
unfortunately building domain specific ontologies is time consuming and ontologies are generally not available for technical software engineering domains.
finally while researchers have proposed techniques that more closely mimic the way human analysts reason about trace links and perform tracing tasks there is very limited work in this area.
our prior work with docit described in section i is one exception .
docit utilizes both ontology and heuristics to reason over concepts in the domain in order to deliver accurate trace links.
however as previously explained docit requires non trivial setup costs to build a customized ontology and heuristics for each domain and is sensitive to flaws in syntactic parsing.
in contrast the rnn approach described in this paper requires only a corpus of domain documents and a training set of validated trace links.
on the other hand deep learning has been successfully applied to many software engineering tasks.
for example lam et al.
combined deep neural networks with information retrieval techniques to identify buggy files in bug reports .
wang et al.
utilized a deep belief network to extract semantic features from source code for the purpose of defect prediction .
raychev et al.
adopted rnn and n gram to build the language model for the task of synthesizing code completions .
we were not able to find work that applied deep learning techniques to traceability tasks in our literature review.
vii.
t hreats to validity two primary threats to validity potentially impact our work.
first due to the challenge of obtaining large industrial datasetsincluding artifacts and trace links and the time needed to experiment with di fferent algorithms for learning word embeddings and generating trace links our work focused on a single domain of positive train control.
as a result we cannot claim generalizability.
however the ptc dataset included text taken from external regulations and written by multiple requirements engineers systems engineers and developers.
the threat to validity arises primarily from the possibility that characteristics of our specific dataset may have impacted results of our experiment.
for example the size of the overall dataset the characteristics of the vocabulary used and or the nature of each individual artifact may make our approach more or less effective.
in the next phase of our work we will evaluate our approach on additional datasets.
second we cannot guarantee that the trace matrix used for evaluation is correct.
however it was provided by our industrial collaborators and used throughout their project to demonstrate coverage or regulatory codes.
the metrics we used i.e.
map recall and precision are all accepted research standards for evaluating trace results .
to avoid comparison against a weak baseline we report comparisons against two standard baselines vsm and lsi and configured them using a genetic algorithm.
viii.
c onclusions in this paper we have proposed a neural network architecture that utilizes word embedding and rnn techniques to automatically generate trace links.
the bidirectional recurrent gated unit effectively constructed semantic associations between artifacts and delivered significantly higher map scores than either vsm or lsi when evaluated on our large industrial dataset.
it also notably increased both precision and recall.
given an initial training set of trace links our tracing network is fully automated and highly scalable.
in future work we will focus on improving precision of the tracing network by identifying and including more representative negative examples in the training set.
the tracing network is currently trained to process natural language text.
in future work we will investigate techniques for applying it to other types of artifacts such as source code or formatted data.
finally given the di fficulty and limitations of acquiring large corpora of data we will investigate hybrid approaches that combine human knowledge with the neural network.
in summary the findings we have presented in this paper have demonstrated that deep learning techniques can be effectively applied to the tracing process.
we see this as a non trivial advance in our goal of automating the creation of accurate trace links in industrial strength datasets.
ix.
a cknowledgments the work in this paper was partially funded by the us national science foundation grant ccf .
authorized licensed use limited to lahore univ of management sciences.
downloaded on august at utc from ieee xplore.
restrictions apply.