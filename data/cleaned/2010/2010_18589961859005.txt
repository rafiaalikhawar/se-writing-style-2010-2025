automatically documenting program changes raymond p .l.
buse and westley weimer the university of virginia buse weimer cs.virginia.edu abstract source code modi cations are often documented with log messages.
such messages are a key component of software maintenance they can help developers validate changes locate and triage defects and understand modi cations.
however this documentation can be burdensome to create and can be incomplete or inaccurate.
we present an automatic technique for synthesizing succinct human readable documentation for arbitrary program di erences.
our algorithm is based on a combination of symbolic execution and a novel approach to code summarization.
the documentation it produces describes the e ect of a change on the runtime behavior of a program including the conditions under which program behavior changes and what the new behavior is.
we compare our documentation to human written log messages from popular open source projects.
employing a human study we nd that our generated documentation is suitable for supplementing or replacing of existing log messages that directly describe a code change.
categories and subject descriptors f. .
specifying and verifying and reasoning about programs general terms documentation human factors measurement keywords commit messages code summarization di erencing this work was supported by but does not re ect the views of nsf ccf nsf ccf nsf cns afosr fa9550 and microsoft research.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
to copy otherwise to republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
ase september antwerp belgium.
copyright acm ... .
.
.
introduction professional software developers spend most of their time trying to understand code .
moreover maintenance can typically be expected to consume of the total lifecycle budget of a software project .
maintaining and evolving high quality documentation is crucial to help developers understand and modify code .
in this paper we focus on the documentation of code changes.
much of software engineering can be viewed as the application of a sequence of modi cations to a code base.
modi cations can be numerous the linux kernel which is generally considered to be stable changes .
times per hour .
to help developers validate changes triage and locate defects and generally understand modi cations version control systems permit the association of a free form textual log message or commit message with each change.
the use of such messages is pervasive among development efforts with versioning systems .
accurate and up to date commit messages are desired but on average for the benchmarks we investigate in this paper only two thirds of changes are documented with a commit message that actually describes the change.
the lack of high quality documentation in practice is illustrated by the following indicative appeal from the macports development mailing list going forward could i ask you to be more descriptive in your commit messages?
ideally you should state what you ve changed and also why unless it s obvious i know you re busy and this takes more time but it will help anyone who looks through the log in practice the goal of a log message may be to a summarize what happened in the change itself e.g.
replaced a warning with an illegalargumentexception and or b place the change in context to explain whyit was made e.g.
fixed bug .
we refer to these as what andwhy information respectively.
while most why context information may be di cult to generate automatically we hypothesize that it is possible to mechanically generate what documentation suitable for replacing or supplementing most human written summarizations of code change e ects.
we observe that over of log messages of random sample from ve large open source projects contain what summarization information implying that tools like diff which compute the precise textual di erence between two versions of a le cannot replace human documentation e ort if diff were su cient no human written summarizations would be necessary.
we conjecture that there are june .html two reasons raw diffs are inadequate they are too long and too confusing.
to make change descriptions clearer and more concise we propose a semantically rich summarization algorithm that describes the e ects of a change on program behavior rather than simply showing what text changed.
our proposed algorithm which we refer to as deltadoc summarizes the runtime conditions necessary for control ow to reach the changed statements the e ect of the change on functional behavior and program state and what the program used to do under those conditions.
at a high level this produces structured hierarchical documentation of the form when calling a if x do y instead of z. additionally as a key component we introduce a set of iterative transformations for brevity and readability.
these transformations allow us to create explanations that are shorter than standard diffs.
the primary goal of our approach is to reduce human effort in documenting program changes.
experiments indicate thatdeltadoc is suitable for replacing the what content in as much as of existing version control log messages.
in .
of cases we nd deltadoc contains more information than existing log messages typically because it is more precise or more accurate.
moreover our tool can be used when human documentation is not available including the case of machine generated patches or repairs .
the main contributions of this paper are an empirical qualitative study of the use of version control log messages in several large open source software systems.
the study analyzes messages nding that their use is commonplace and that they are comprised of both what andwhy documentation.
an algorithm deltadoc for describing changes and the conditions under which they occur coupled with a set of transformation heuristics for change summarization.
taken together these techniques automatically generate human readable descriptions of code changes.
a novel process for objectively quantifying and comparing the information content of program documentation.
a prototype implementation of the algorithm and a comparison of its output to human written messages from ve projects.
our experiments backed by a human study suggest deltadoc could replace over of human generated what log messages.
we begin with an example highlighting our approach.
.
motivating example projects with multiple developers need descriptive log messages as this quote from the cayenne project s development list suggests sorry to be a pain in the neck about this but could we please use more descriptive commit messages?
i do try to read the commit emails but since the vast majority of comments are cay xyz i can t really tell what s going on unless i then look it up.
2consider revision ofitext a pdf library written in java.
its entire commit log message is changing the producer info.
this documentation is indicative of many human written log messages msg00044.htmlthat do not describe changes in su cient detail for others to fully understand them.
for example neither the type of the producer nor the nature of the change to the info are clear.
now consider the deltadoc for the same revision when calling pdfstamperimp close if indexof document .
getproduct !
set producer producer modified using document .
getversion instead of set producer document .
getversion originally created with producer with this documentation it is possible to determine that the change in uences the format by which version information is added to the producer string.
our documentation is designed to provide su cient context for the e ect of a change to be understood.
furthermore we claim that diff a commonly used tool for viewing the text of code changes often fails to clarify their e ects.
consider revision to thejabref