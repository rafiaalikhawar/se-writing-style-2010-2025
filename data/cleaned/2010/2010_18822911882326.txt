change point detection for black box services ilenia epifani politecnico di milano dipartimento di matematica piazza l. da vinci milano italy ilenia.epifani polimi.itcarlo ghezzi politecnico di milano dipartimento di elettronica e informazione piazza l. da vinci milano italy ghezzi elet.polimi.itgiordano tamburrelli politecnico di milano dipartimento di elettronica e informazione piazza l. da vinci milano italy tamburrelli elet.polimi.it abstract modern software systems are increasingly built out of services that are developed deployed and operated by independent organizations which expose them for use by potential clients.
services may be directly invoked by clients.
they may also be composed by service integrators who in turn expose the composite artifact as a new service.
continuous change is typical of this world.
providers may change services and the deployment infrastructure to meet continuously changing requirements and be more competitive.
clients may change their operational pro les.
changes have a severe impact on the quality of services.
in this paper we address the problem of identifying changes concerning the non functional behavior of software services managed by external organizations and consequently considered as black box artifacts.
we de ne the concept of change point and provide a statistical technique aimed at identifying it given an execution trace produced by client invocations.
change point detection is key to reasoning about changes diagnosing their cause and suitably reacting to their occurrence.
categories and subject descriptors c. performance of systems modeling techniques performance attributes d. .
software program veri cation reliability general terms performance reliability .
introduction .
the context software design and development radically changed in the last decade.
software systems were traditionally designed to operate in a completely known and immutable environment.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
to copy otherwise to republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
fse november santa fe new mexico usa.
copyright acm ... .
.their development was managed by a single coordinating authority which was responsible for the overall quality of the resulting application and had full ownership of the application.
every single piece was under its control and full visibility of the process and product was possible.
whenever software had to be changed to improve its quality or to meet new requirements a maintenance lifecycle design development and deployment of a new version of the system had to be planned.
this approach led to costly maintenance activities and an unsatisfactory time to market.
internet standardization time to market constraints and other factors shifted software design from this scenario to theopen world setting .
by this we mean that software systems are increasingly built out of application fragments called services that are developed deployed and operated by independent service providers who expose their artifacts through the network for use to potential clients.
services may be directly invoked by end users to achieve their personal goals.
they may also be composed as a dynamically adaptable and evolvable aggregate of components to achieve more complex functionality.
this supports the new role of service integrators who can then expose integrated artifacts as new services for potential clients.
it is common to refer to the above scenario as service oriented computing soc .
soc can bring unprecedented exibility both in the way software is built and in the way it is structured.
flexibility however also generates potential risks.
soc leads to di erent degrees of ownership control and visibility of the di erent parts that compose an application.
applications become reliant on external services that are developed evolved and run by independent organizations.
to guarantee an adequate level of dependability it is often assumed that the relationship between a service provider and a client is regulated by a service level agreement sla .
slas de ne a contract between the two parties.
the contract de nes the obligations of each of them.
in particular it speci es the quality of service qos the provider promises to ensure.
slas are especially critical in the case of service integrators.
a sla is subscribed by a service integrator with each service provider it relies upon.
in turn a sla must be subscribed between a service integrator and its clients concerning the quality of the integrated service.
in this paper we focus on quantitatively de ned nonfunctional quality attributes such as reliability or performance.
we also focus on quantitatively de ned qos.
guaranteeing and verifying satisfaction of slas is especially critical in an open world setting.
quality uctuations are in fact continuous over time di cult to understand predict and control because of the plethora of di erent and intertwined phenomena that may occur in the real world.
the approach we describe here aims at providing support to reasoning about changes and diagnosing their causes.
.
the problem and its motivations our contribution focuses on the problem of change point detection for black box services.
we observe services as black boxes that is without accessing their internals but instead monitoring and analyzing the data that ow through their interface.
service internals are in fact normally unaccessible to clients and even service providers who do have access to them may nd it useful to be able to analyze services without accessing the complex internal details of their implementation.
observations are data streams collected by probes at the service interface which describe the behavior of the service concerning a speci c quality of interest and from a speci c viewpoint.
if performance is the quality of interest observations may be sequences of timestamped invocations with the associated response time.
if instead reliability is the quality of interest they may be sequences of timestamped invocations with an associated result indicating whether the invocation was served successfully or not.
furthermore observations may express the viewpoint of and be collected on behalf of the client who monitors the calls issued to external services e.g.
see for a monitoring approach .
this is called client side analysis alternatively in server side analysis data are collected by service providers who monitor the qos of the exported service which may be used concurrently by several clients.
more precisely assume we are interested in reliability and suppose it is measured as a service s failure rate.
given a set of observations in a time interval our change point detection method can detect if a relevant change took place the point in time when the change occurred and the new value of the failure rate after the change occurred.
for example consider figure .
suppose that a change point is detected at the thobservation of the stream.
we can deduce that a relevant change in the system occurred at a time twhich is greater than the the timestamp associated with the 11thobservation and less than the timestamp associated with the thobservation.
changeservice sservice s ....invocationschangepoint figure change point example.
change point detection may be a useful tool for the client.
if the detected change implies a sla violation the exact knowledge of when the change occurred may be used as a proof of evidence in a dispute with the provider.
detected change s may also suggest re binding to a di erent provider who may provide a better service .
change point detection may also be a useful tool for the provider.
the provider in fact may trace back from the point in time when an unexpected change in quality occurred to the actions that mayhave caused that change.
by reasoning about the changepoint one might point to the installation of a new library component which substituted a previously installed component and may be responsible for the unexpected change.
an important special case is when the client is a service integrator who o ers an added value service to its clients by aggregating existing third party services.
in this case the detected change points and following the previous example the updated value of reliability of third party services may be used to compute an updated value of reliability for the composite service to assess whether this jeopardizes its ability to satisfy the contracts with clients.
this kind of analysis may be performed as discussed in .
this paper focuses on change point detection i.e.
on identifying when a potential problem occurred.
understanding its originating cause and planning for reactions which might behave as remedies are outside its scope and will be the goal of further investigations.
our main contributions are the de nition of the concept of change point the illustration of its relevance in service oriented systems and the development of a statistical framework supporting change point detection.
we also provide an initial assessment of its e ectiveness and limitations by numerical simulations.
the remainder of the paper is organized as follows section illustrates the case study in which we apply our approach.
section provides a detailed description of the proposed approach.
section illustrates the simulations which validate the proposed approach.
finally section discusses related work and section concludes the paper describing the current limitations of our approach and future work.
.
a running example let us consider a service for image editing called imagemodder which provides a set of apis to manipulate transform and save images in di erent formats.
imagemodder represents a real world case study1.
it supports a wide range of applications such as healthcare applications which usually require sophisticated image enhanchement techniques for diagnosis purposes or web applications that o er on line photo editing.
the actual implementation of imagemodder resides on a server and interaction with clients is performed through a publicly available web service or through a downloadable software component in charge of masking the remote interaction with the server.
the api provided by imagemodder comprises the primitives listed in table .
a complete documentation of the api is beyond the scope of this paper.
due to the lack of space we focus on the description of the essential concepts needed to understand the basic features of imagemodder.
clients must rst authenticate.
if authentication succeeds clients can upload and modify images in an virtual le system organized in folders.
initially clients must set their working folder potentially creating a new one and set their current image potentially importing a new one .
afterwards imagemodder is ready to work.
each operation invoked by clients directly a ects the working folder or the current image.
image transformations are performed through the application of lters .
a lter is a transforma1imagemodder was inspired by the api provided by an existing on line application picnik currently adopted by several clients e.g.
flickr to support photo editing of user generated content.
228table imagemodder api.
type name description parameters general login authenticates the user and opens a session username and password general logout closes the current session n a folder createfolder creates a new folder in the current one the name of the folder folder setcurrentfolder sets the current folder the absolute path of the folder folder renamecurrentfolder renames the current folder the new name of the folder image import loads a le in the current folder the le to be uploaded image export returns the current image n a image setcurrentimage selects the current image the absolute path of the image image renamecurrentimage renames the current image the new name of the image image filter applies the lter to the current image the lter name image delete deletes the current image n a image save saves the current image n a tion that modi es the current image e.g.
histogram equalization gamma correction etc.
.
finally users can save or export their modi ed image.
imagemodder o ers to clients up to date image processing techniques the library of existing lters is constantly maintained and updated.
application developers who need image editing features may exploit imagemodder instead of developing in house equivalent techniques.
relying on a third party service however may cause the problems we described in section .
the behavior of a service may change over time possibly invalidating the assumptions made when that was chosen.
we show how change point detection can be used by a client to identify changes in the non functional qualities of imagemodder and estimate the new values.
the updated estimates may be used by imagemodder clients to decide if the new behavior is compliant with their requirements or if it is necessary to re bind their system to another service provider or promote an in house development of these features.
.
change point detection as we said in section our approach focuses on identifying changes in non functional behavior of black box services given run rime data extracted by running instances of systems that exploit such services.
we consider reliability expressed as probability of failure and performance expressed as response time distribution.
the proposed approach exploits models to represent the non functional behavior of the component under analysis.
in particular we adopt discrete time markov chains dtmcs .
section .
introduces dtmcs and section .
describes how these models are used to detect change points of software services.
.
discrete time markov chains dtmcs are stochastic processes with the markov property.
they are de ned as state transition systems augmented with probabilities.
states represent possible con gurations of the system.
transitions among states occur at discrete time and have an associated probability.
formally a sequence of random variables x0 x1 is a dtmc with tuple s sinit m if p x0 sinit 1and if the following markov property holds p xn s0jxn s x xn p xn s0jxn s ms s0 where sis a nite set of states s f1 kg sinit2sis the initial state m s s!
is a transition probability matrix its element ms s0represents the probability of passing from statesto states0andp s02sms s0 .
markov property means that the probability of going from statestos0is independent of the past transitions.
in our approach dtmcs are used to model both probability of failure and discrete distributions of response time.
they are speci ed by the set of states sand the transition probability matrix mwhich contains probabilities that represent for example the probability of failure associated with an operation provided by a service.
equally dtmcs are represented by their diagrammatic notation or by transition probabilities matrices.
we will use the former notation for readability purposes and the latter for the formal description of the statistical technique for change point detection in section .
.
.
service modeling for change point detection consider a service for which we wish to perform client side change point analysis.
let us rst focus on reliability .
as a rst step we need to build a dtmc model of the service.
the structure of such model is generated by analyzing the service s speci cation api interaction protocol and the associated sla expected usage pro le of service invocations i.e.
how the client expects or predicts to use the service .
typically the dtmc comprises one state for every operation provided by the service plus a set of auxiliary states representing potential failure states.
transitions describe the possible sequences of service invocations and possible failures .
they may be annotated with probabilities representing probabilities of success or failure derived from the sla or the usage pro le.
in the case of performance for each operation exported by the api we build an additional dtmc representing the expected discretized 229distribution of its response time.
transition probabilities as in the previous model can be derived from the sla.
serverside analysis is similar.
the main di erences in the latter case may be in the level of detail of the models which may be more ne grain and in the usage pro les which account for all users accessing the service.
the reliability model derived for imagemodder by analyzing its documentation2 api and by predicting a possible usage pro le is shown in figure a .
this model contains a state for each operation provided by the imagemodder component several auxiliary states such as the ready state which represent the state of the service after the initialization in which the user sets its current image and working directory and several additional states highlighted in grey which represent potential failures associated with speci c operations.
in this example we consider only failures associated with operations having an explicit access to repositories e.g.
import save etc.
.
we also consider a failure associated with the login operation to model potential denial of service of the imagemodder component e.g.
in case of too many concurrent requests .
the dtmc in figure a takes into account the usage pro le predicted by the client for instance the probability of creating a new folder i.e.
the value labeling the transition from state to state instead of selecting a pre existing folder after the initial login i.e.
value labeling the transition from state to state .
other probabilities are instead extracted from the sla subscribed by the imagemodder provider such as the probability of failure associated with the login state.
this probability of failure represents the availability of the service i.e.
an information typically declared by on line service providers.
performance models can be derived for imagemodder in a similar manner.
figure b shows the dtmc modeling response time of the save operation normalized by the size of the saved image .
the number of discretizing intervals is equal to the number of states reachable from the initial state.
the probability that the response time is in a given time interval is associated with the transition from the initial state to the state representing that interval.
notice that the number of intervals and hence states a ects the accuracy of the model.
however the approach does not directly depends on the size of the model but only on the number of transitions under scrutiny.
our change point detection method as discussed later in section .
in detail uses execution traces collected by a monitor to gure out whether the actual behavior of a service complies with a given model and if not when the change occurred and which are the new values that characterize the model after the change occurred.
for example should the actual performance model of the save operation change during the utilization of the service with respect to the model in figure b the change point detection method would provide a re ned and accurate version of the model representing the service before the change a different model representing the service after the change and an estimate for the change point in the trace.
the initial models fed to the change point detection method may re ect our limited and uncertain a priori knowledge of the system.
both usage pro le and probabilities of failure 2due to the lack of space we cannot provide a complete reference documentation of the service.
all the crucial information information is reported in section .are in fact hard to predict accurately and slas may be inaccurate.
as we will see however our method is robust it works correctly also in the case where the initial model is inaccurate since it can derive accurate estimates from actual observations.
.
a bayesian technique for change point detection this section illustrates the mathematical background of our method which exploits a bayesian statistical technique for change point detection and involves a monte carlo integration method called gibbs sampling .
we assume that the interaction between a client and the service is captured by an execution trace .
an execution trace xis a sequence of triplets r s t whereris the unique identi er of the operation sis the time when the invocation is issued tis the time when the invocation is completed if the invocation succeeds or the special value fail if the invocation fails .
from an execution trace we can derive a reliability trace used to detect change points in reliability and performance traces used to detect change points in performance.
for simplicity and space reasons the way to derive such traces is only informally described hereafter through examples.
areliability trace is obtained by scanning the execution trace from left to right and mapping it into sequences of paths on the reliability model each of which represents an interaction with the service.
for example the sequence of paths on the dtmc of figure a represents the sequence of two interactions with the service.
the former tries to create a folder and then fails.
the latter sets the current folder imports an image lters saves and logs out.
similarly a performance trace for an operationopis built by projecting the execution trace onto a sequence of non failing opinvocations.
the di erence between the response time and the invocation time for each opcall is then mapped onto the corresponding transition on op s performance model.
for instance in the case of the save operation the sequence of paths represents the performance trace projected from an execution trace that contains subsequent calls of the save operation of duration .
summing up each trace is a stream of sequences representing paths in their corresponding dtmc into which we search for change points.
from a mathematical viewpoint the change point detection method works as follows.
given initial distributions for two random matrices aandb which model the service before and after the change respectively and a random point in the trace that identi es the change point our approach generates updated estimates for a b and exploiting the information provided by the trace x3.
the change point detection method requires the user to provide prior knowledge on a b and .
matrixacorresponds to the dtmc that models the initially expected behavior of the service matrix ain figure a if reliability is our focus .
for we may assume an arbitrary point of the trace.
finally for bone can choose arbitrary values or for example a pessimistic version ofa e.g.
where all failure probabilities are overestimated .
as already mentioned 3the procedure applies identically to performance models and performance traces and to reliability models and reliability traces since they are both represented in the same mathematical framework.
.
.
.
.0302setcurrentfolderlogin8setcurrentimage73111518filter1410 12logout20ready deleteexportsave1921renamecurrentfolderrenameimage .
.
.
.
.
.
.
.02import0.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
createfolder0.98folderselected4 a reliability model.
0rt .2save0.
rt .
.
rt .
rt .
.
.
.
.
b performance model for the save operation.
figure dtmcs for the imagemodder component.
our method works correctly no matter which initial values we chose for the statistical procedure of change point analysis.
such values are just initial seeds that do not a ect its correctness but just the size of the trace that must be analyzed to make the correct prediction.
we will give evidence of this property later in section .
the method assumes the structure of the model to be immutable and focuses on its parameters which may change.
thus the cardinalities of aandbare known equal and correspond to the structure of the model provided initially by the system designer.
in the case of imagemodder both a andbare matrices for the reliability model and matrices for the performance model of the save operation see figure .
following a bayesian approach we consider a b as random elements characterized by a prior distribution and we proceed to updating them by computing the joint posterior distribution of a band given data x p a b jx and the marginal posterior laws p ajx p bjx andp jx .
in particular by exploiting the marginal posterior law p jx we are able to decide for a given trace x if a change point has taken place in the modeled system and when.
for example if the trace length is nandp njx then we are con dent that no change point is present in our trace and the modeled system is still regulated by matrixa.
in this setting n and mean no change .
by computing the mean value of the posterior distribution p jx we obtain an estimate of the change point.
in particular by estimating the change point with the posterior mean we minimize the quadratic bayesian risk .
as for the prior law of a b we assume them to be statistically independent.
moreover we choose independent dirichlet distributions for each row in aandband a uniform distribution for .
consequently considering a system modeled with a dtmc with pstates i.e.
aandbare composed byprows andpcolumns we have the following prior probability distribution for a p a py i 1d ai i where ai ai ai p is theithrow ofaandd ai i is a dirichlet distribution of parameters i i i p as follows d ai i pp j i j qp j i j py j 1a i j i j for matrix bwe have a similar formulation p b py i 1d bi i where biis theithrow ofbandd bi i is a dirichlet distribution of parameters i. finally the prior distribution for is p n n by an appropriate choice of parameters i i dirichlet distributions capture in a simple and well established way the prior knowledge and beliefs regarding the structures of transitions matrices a b. there are no alternative multivariate distributions that are analytically tractable and have well known structural properties as dirichlet distributions.
the likelihood of data xis f xja b py i 1py j 1ani j i jbmi j i j whereni j is the number of transitions in the trace among stateiand statejuntil the change point andmi j is the number of transitions from state itojafter .
from bayes theorem we know that p a b jx f xja b p a p b p the desired probability p jx can be obtained by integrating with respect to aandb.
this can be extremely di cult to evaluate analytically or even numerically.
gibbs sampling4comes into play to solve this issue since it allows us to extract samples from p jx without 4a description of the gibbs sampling is beyond the scope of this paper a brief introduction to this topic can be found in the appendix.
231requiring an explicit computation of it but exploiting the following marginal conditional distributions p ajb x p bja x p ja b x let us rst compute p ajb x .
by applying bayes theorem we obtain p ajb x p a b jx p b jx p a f xja b r f xja b p da using the expression of the likelihood given in and the prior distribution for agiven in for the numerator in we obtain p a f xja b py i j 1a i j ni j i j bmi j i j so that p ajb x py i j 1ani j i j i j we conclude that conditionally on andx aandbare independent i.e.
p ajb x p aj x and p aj x py i 1d ai i ni whereni is the total number of transitions from iuntil .
reasoning in the same manner for b we obtain p bja x p bj x py i 1d bi i mi wheremi is the number of transitions from iafter .
concerning instead it follows from bayes theorem that p ja b x f xja b p pn 1f xja b p f xja b pn 1f xja b where holds if p is the uniform distribution given in .
by exploiting equations and providing starting values fora band we can build a gibbs sequence for each row of aandband for ak i d ai i j ni j k bk i d bi i j mi j k k p jak bk x where ak i bk i and kcorrespond to the kthsample of the gibbs sequence.
iterating this sampling process ntimes we obtain a sequence a1 i b1 i n an i bn i that converges top a b jx .
in particular for nlarge enough the last values m n wherem n can be considered asn msamples from p jx and can be used to estimate .
in the same manner the sequence am i an i i pcan be considered as n msamples from p ajx and bm i bn i i pasn msamples from p bjx used to estimate aandb respectively.table performance discrete distribution of response time rt .
rt before change point after change point rt .
.
rt .
.
rt .
.
rt .
.
it is important to notice that we conceived an approach based on the bayesian estimation theory since simpler approaches cannot achieve the same level of precision.
for example approaches based on rolling averages computed over the streams of data are dependent on the size of the window used to compute the average which is dependent on the variance of the data an unknown parameter in our domain .
moreover simpler approaches based on computing and comparing p ajx againstp bjx are less precise since they do not provide any estimate for .
.
validation a java implementation of the change point detection method presented in this paper has been publicly released5.
the method has been validated by simulation using the imagemoder case study.
precisely we developed a client application that invokes the imagemodder service we collected execution traces and we analyzed them.
the simulated service can be instructed to change its behavior by setting changepoints that a ect its performance and or reliability.
in the real world the changes may be consequences of software updates.
in this section we describe a signi cant subset of the simulations we performed to validate the approach.
due to the lack of space we report on a limited number of cases and restrict our discussion to only one quality attribute namely performance of the save operation which is modeled by the dtmc in figure b .
in the experiments we describe below we changed the server s response time distribution after speci c invocations and thus simulating change points.
afterwards we ran a program that implements our change point analysis approach in di erent scenarios and with di erent settings as explained hereafter.
the results we report hold for traces of invocations to thesave operation tracing the response time normalized by the size of the saved image.
for each case we discuss below we ran simulations.
the ndings obtained by focusing on performance of this operation apply identically to any other operation and to the reliability model.
the interested reader may repeat our experiments and perform others by using our downloadable tool.
single change point detection.
we rst report on simulations which consider a single change point occurring in the observation period.
as for the gibbs sampling we used the single sequence approach and a sequence of length with a burn in of length .
as for prior parameters iand iof the dirichlet distribution of aandbwe used respectively the dtmc in figure b and a dtmc with equally distributed probabilities attached to all outgoing transitions from state .
232table characteristics of posterior distribution.
gibbs sequence length min median mean max average error max error p 160jx .
.
.
.
.
.
.
.
!
!
!
!
!
!
!
!
!
!
.
.
!
figure average posterior distributions of with change point at .
the latter two choices represent the worst possible scenario in which we have no clue about where the change point will potentially take place and which will be the new performance model.
finally we changed the server s response time distribution in the thinvocation as shown in table i.e.
the thinvocation represents the change point .
by running our change point analysis method in the aforementioned scenario we obtained the average posterior distribution for illustrated in figure over simulations.
the posterior distribution of is concentrated around as expected.
more precisely it presents the characteristics listed in row of table .
by synthesizing an estimation for with the mean value of the posterior distribution we obtain an average estimate equal to .
by computing the posterior probability p 160jx as shown in last column of table we are at least con dent that a change point took place between and .
gibbs sequence length.
we now report on simulations concerning the length of the gibbs sequence.
intuitively the longer the sequences are the more precise our distribution and our estimate will be.
as shown in table sequences of length equal to give a very accurate result.
however we performed the same testbed with shorter sequences to stress the robustness of the approach we decreased the number of samples down to .
in this extreme case illustrated in row of table the mean value i.e.
the change point .
.
.
sequence lengthaverage changepoint estimation error figure average estimation error.
a transition of matrix a. b transition of matrix b. figure average posterior distribution for transition .
estimate remains close to .
generally speaking the accuracy of estimates begins to decay using sequences shorter then as shown in figure where the estimation error e is computed as e jec rcj rc ecbeing the estimated change point and rcbeing the real change point.
notice that the average estimation error with sequences longer then is always less then .
from table we can conclude that our approach is quite robust since the average and maximum estimation errors are almost negligible.
finally the appropriate gibbs sequence length can be automatically determined by adopting the potential scale reduction factor as described in .
estimates of aandb.the considerations made for the estimate of holds also for the estimates of aandb.
figure a shows the histogram of the transition from state to state with response time over simulations.
it corresponds to the mean value of the posterior distribution computed exploiting samples in the gibbs sequence.
notice how the average estimate is concentrated around the real value which generated data i.e.
.
figure b shows the same data obtained for the transition from state to state in matrix b which is concentrated around the desired value .
by adopting again the mean value of the posterior distribution to estimate transition probabilities we obtain 233an average value of for transition before the change point with respect to the real value of which corresponds to an average estimation error equal to .
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
.
.
!
figure average posterior distributions of with change point at .
change point location.
we made experiments to assess the robustness of the change point detection method with respect to the location of the occurrence of the change point in the trace.
figure shows the posterior distribution of when the change described in table occurs at the th invocation of the save operation.
the distribution is correctly centered around the expected value of and thus it is possible to correctly estimate the presence of a changepoint in this position by adopting again the mean value of the posterior distribution.
no change point.
let us now consider the scenario in which no change point occurs in the trace i.e.
the service constantly behaves as described by the second column in table .
in this setting by running the change point detection we obtained the posterior distribution illustrated in figure .
as we said in section .
or nindicate that no change occurred in the trace.
figure shows that the posterior distribution is centered around the beginning of the trace which approximates and thus indicates no change.
!
!
!
!
!
!
!
!
!
!
!
!
!
.
.
!
figure average posterior distributions with no change point.
sensitivity to the initial model values.
in the previous experiments the initial values for matrix ba dtmc are equally distributed probabilities attached to all outgoing transitions from state which represent the worst possible scenario in which we have no clue about which will be the new performance model.
figure b shows that the change point detection algorithm produces precise estimates of transitions in matrix beven though such initial valuesre ect inaccurate knowledge.
the initial value of matrix a also does not a ect the robustness of the method.
in fact we rst ran the detection method by initializing matrix awith the data of columns in table which correspond to the actual initial values of performance of the save operation a perfect knowledge situation and then we ran the method with opposite initial values i.e.
.
figure shows the convergence of the gibbs sequence which estimates transition of matrix a. the gure shows that the convergence proceeds similarly in both cases except for initial uctuations in the case of inaccurate initial values.
!
!
!
!
!
!
!
!
!
!
!
!
.
!
!
.
.
.
.
.
figure estimation of transition of matrix a with di erent initial values.
multiple change points.
we performed simulations to check the behavior of the method if multiple change points occur in the observation period.
we injected a change point at invocations and over the invocations.
figure shows that as a result of simulations the posterior distribution of is clearly a bi modal distribution each peak in the distribution indicates a change point.
once these peaks are identi ed it is possible to divide the trace in two distinct traces which separate the peaks and by re running the change point detection we can reduce the problem to the case of a single change point.
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
!
.
.
!
figure average posterior distributions with multiple change points.
performance and multiple sequence gibbs sampling.
the proposed approach is quite e cient.
the computation of a single gibbs sequence of length with a burn in of requires about seconds to analyze a trace of invocations on a conventional workstation6.
execution time can be reduced by examining shorter sequences and by applying the multiple sequence variant.
it is possible to show but 6intel r core duo with 4gb ram.
implementation in java v1.
.
234space reasons do not permit it that the variant produces estimates of equal accuracy but improves time e ciency.
for example the same workstation can execute the parallel computation of two gibbs sequences of length with a burn in of in about second to analyze the same trace of length .
.
related work change points are abrupt variations in the generative parameters of a data stream.
their identi cation has found important application in several disciplines such as nance biometrics and robotics e.g.
see or .
in particular many works in the area of intrusion detection systems aim at detecting when a change violation occurs given a trace log and exploiting bayesian techniques as described for example in .
to the best of our knowledge no existing work applied these concepts to software reliability and performance and in particular to soc.
dtmcs and other stochastic models are increasingly used to assess dependability of software artifacts e.g.
see and to predict service performance and reliability e.g.
see .
the problem of dealing with changes in the external services used by a composite service and adapting the parameters of its quality model accordingly is studied in .
a framework for component reliability prediction in presented in whose objective is to construct and solve a stochastic reliability model through which software architects may explore competing designs.
in particular the authors tackle the de nition of reliability models at architectural level and the problems related to parameter estimation.
other complementary approaches investigate alternative methods for calibrating model parameters at run time in the context of performance models .
the problem of quality of service in soc is studied by several authors who focus on how quality can be speci ed and how it can be the basis for veri able slas.
a language for slas has been proposed by .
other related areas deal with monitoring and verifying services and service compositions .
run time veri cation is another closely related research area for example see .
several approaches have been proposed in literature that deal with non functional aspects of services and their composition.
in particular illustrates a framework for modeling and evaluating service oriented applications and describes performance prediction in the soc domain exploiting queuing networks.
an approach for verifying service compositions starting from uml descriptions and then transforming them into a speci c representation that allows validation with respect to concurrency properties is presented in .
a similar approach is described in which shows how to verify service integrations in case of resource constraints with respect to safety and liveness properties.
concerning the statistical techniques we adopted for changepoint detection carlin et al.
in provide a hierarchical bayesian analysis of change point problems that inspired our work and suggested the adoption of gibbs sampling.
in particular concerning this integration method casella et al.
in provide a complete discussion about its properties by examples.
gibbs sequenceburn insamples from f x y a gibbs sampling via single sequence.
samples from f x y gibbs sequencelast sample............gibbs sequencelast samplegibbs sequencelast sample b gibbs sampling via multiple sequences.
figure gibbs sampling techniques.
.
conclusion and future work in this paper we addressed the problem of identifying changes concerning the non functional behavior of software services managed by third party entities and considered as black box artifacts.
we de ned the concept of change point and provided a statistical technique aimed at identifying them given an execution trace extracted by running instances of the system.
change point detection was performed concerning reliability and performance through the adoption of dtmcs.
we implemented a tool supporting change point analysis as part of the kami framework a toolset which is illustrated in .
the tool has been used to validate the method via simulations.
we performed extended simulations but for space reasons we could only report on selected cases.
for instance we omitted some interesting results concerning the relation between the length of the trace and the range of values of probabilities appearing in the models and the relation between the length of the trace and the distance between di erent change points in a multiple change point setting .
in the future we plan to complement the simulation based validation with analysis of existing on line services to obtain quantitative result in a real world setting.
in addition we will investigate how and when change point detection can be run to support on line reactions to detected changes and more generally we will explore the trade o s between on line and o line change detection and their dependence on the temporal behavior of the application.
further work may also apply change point analysis to other models such as queuing networks or continuous markov chains.
appendix gibbs sampling gibbs sampling is an integration method aimed at computing characteristics such as the mean or variance of the marginal density f x of a joint density f x y1 ym without requiring to actually compute the integral f x r r f x y1 ym dy1dy2 dymwhich can be extremely di cult to perform analytically or even numerically.
in particular gibbs sampling allows for generating a sample x1 xnfromf x without calculating f x .
this is because gibbs sampling works with the univariate conditional distributions of every random variable x y ym given all the other ones f xjy1 ym f y1jx y2 ym .
.
.
f ymjx y1 ym .
to brie y illustrate how gibbs sampling works let us consider the simple two variables case in which we extract samples from the marginal distribution f x of a joint density f x y by sampling from the univariate conditional densities f xjy andf yjx .
the sampler starts with some initial value y0and generates x0by sampling from f xjy y0 .
thus the sampler uses x0to generate a new value y1 drawing from f yjx x0 .
hence 235the sampler proceeds as follows xi f xjy yi yi f yjx xi by iterating this sampling process ktimes we obtain a gibbs sequence of lengthk x1 y1 xk yk .
if we think of each xi yi as a realization of a random vector xi yi then under mild conditions as k!
the distribution of xk yk converges to the joint density f x y independently of the starting value y0 and hence the distribution of xkconverges to marginal distribution f x see for example .
hence for large enough k the last values xh xk h k of the gibbs sequence can be considered as k h samples from f x .
it is important to repeat the sampling process a su cient number of times to have a large gibbs sequence and to ignore as shown by figure a the initial samples burn in removal which are not distributed according tof x y and are in uenced by the starting values.
alternatively instead of collecting samples from a large enough gibbs sequence gelfand et al.
in suggest the generation ofmindependent gibbs sequences of length kand then using them nal values of these sequences as shown by figure b .
the choice of kand alternative approaches to extracting information from the gibbs sequence are discussed in .
a complete description of the gibbs sampling is beyond the scope of this paper further details can be found in .
we explicitly brie y introduced and justi ed it because it is a crucial component of our solution.