a sentence matching method for automatic license identification of source code files daniel m. german university of victoria canada dmg uvic.cayuki manabe osaka university japan y manabe ist.osakau.ac.jpkatsuro inoue osaka university japan inoue ist.osaka u.ac.jp abstract the reuse of free and open source software foss components is becoming more prevalent.
one of the major challenges in finding the right component is finding one that has a license that is adequate for its intended use.
the license of a foss component is determined by the licenses of its source code files.
in this paper we describe the challenges of identifying the license under which source code is made available and propose a sentence based matching algorithm to automatically do it.
we demonstrate the feasibility of our approach by implementing a tool named ninka.
we performed an evaluation that shows that ninkaoutperformsothermethodsoflicenseidentificationin precisiona nd speed.
we also performed an empirical study on .
million source code files of debian that highlight interesting facts about the manner in which licenses are used by foss.
categories and subject descriptors k. .
hardware software protection licensing general terms legal aspects keywords softwarelicenses automatedlicenseidentification open source licenses.
.
introduction free and open source software foss has become an important source of reusable code .
to be able to reuse a foss component an application proprietary or foss should satisfy all the requirements and conditions that the license of the component imposes .
sometimes a component is available under various licenses giving the integrator the ability to choose the license that best fits her purpose the license of the component is compatible with permission to make digital or hard copies of all or part of this w ork for personal or classroom use is granted without fee provided th at copies are not made or distributed for profit or commercial advantage and th at copies bear this notice and the full citation on the first page.
to cop y otherwise to republish to post on servers or to redistribute to lists re quires prior specific permission and or a fee.
ase september antwerp belgium.
copyright acm ... .
.the intended use .
for example the mysql database can be used under the conditions of the general public license gpl version or the integrator can buy a commercial license for her specific needs .
most frequently however a component can only be used under one license.
for example in august of this year nokia tried to convince the developers of pyqt to change its license from gpl version to the lesser gpl version v2.
but did not succeed.
as a result nokia has started a project to create a replacement called pyside .
nokia explains its rational pyside has been published as a response to the lack of suitably licensed qt bindings for python.
pyside is licensed under the lgpl version .
license allowing both free open source software and proprietary software development.
in an empirical study li et al.
reported that of companies that used oss components modify their source code .
they also emphasize that any organization wanting to reuse foss components either with or without modification should consider the legal implications of such change s. the legal issues of reusing foss components affect not only companies but other foss components and applications.
as reported in foss applications are also concerned about licensing issues primarily if the license of t he foss component is compatible with the license of the application that uses it.
if they are not then the component cannot be used.
one of the major challenges of intellectual property clearance is to identify the license under which a foss component and each of its files is made available.
this is due to several factors there is a vast number of open source licenses some approved by the open source initiative currently and many more that are not table shows somefrequentfosslicensesandtheirabbreviations asused in this paper a foss product might be made available under several licenses different versions of a foss componentmightbeavailableunderdifferentlicenses and4 th e overall license of a product might be different than the license of each of its files.
when files under various licenses are combined to create a foss component there is a risk that one of these licenses might be incompatible with the overall license of the component hence any integrator using that component might be liable for infringement .
another problem is that several well known licenses exist in various versions.
for example the gpl exists in versions and and each of these versions is incompatible with the others files under one version cannot be combined with files under another version as described in abbrev.
name apache apache public license bsd4 original bsd also known as bsd with clauses bsd3 bsd4 minus advertisement clause bsd2 bsd3 minus endorsement clause boost the boost software license cpl common public license cddl common development and distribution license epl eclipse public license gpl general public license ibm ibm public license lessergpl lesser general public license successor of the library gpl also known as lgpl librarygpl library general public license also known as lgpl mit x11 original license of x11 released by the mit mitold license similar to the mit x11 but with different wording mpl mozilla public license sameasperl file is licensed in the same terms as perl seefile file points to another where the its license is sunsimplelic simple license used by software developed by sun microsystems zlibref the zlib libpng license table names of common open source licenses and their abbreviations used in this article.
many of these licenses have several versions.
in that case we use the suffix v number to identify it.
if it is followed by that means the user can choose this version or any newer or later .
for example gplv2 means gpl version or later .
similarly code under the bsd4code cannot be included in software released under the bsd3orbsd2.
frequently foss software portals such as sourceforge only list the name of the license and omit the version in the metadata of the applications they host.
furthermore they make no attempt to verify that this license listed is indeed the licens e of the component.
for example the foss portal freshmeat freshmeat.net lists eclipse as licensed under the cpl when in fact it uses the eplv1 the cpl is a predecessor of the epl .
the contributions of this paper are we describe and categorize the challenges of license identification.
we p roposea methodfor licenseidentificationbasedon the analysis of each of the sentences in the license statement of a source codefile theportionofthefilethatcontainsthetermsunder which the file is licensed .
we perform an empirical evaluation of our method and three other license identification tools showing that our method outperforms the others in precision and speed.
finally we present an empirical study of approximately .
million source code files that demonstrates the feasibility of our method and highlights some characteristics of the legal landscape of foss.
.
related work several papers have used metadata from foss forges and application portals such as freshmeat and sourceforge to identify the license of foss applications.
in capaluppi et al.
used this data to report that in a sample of 400applications used the gpl the lgpl and the bsd no versions were indicated .
other papers have used this data to analyze the impact of a license in the success and impact of foss applications .
the authors of these papers did not analyzed its source code.
currentlytwomethodsexistforlicenseidentification.
the first is the use of regular expressions to identify the license of a file.
two tools use this method ohcount developed by ohloh ohloh.net a portal of statistics for foss projects recently acquired by sourceforge and oslc the open sourcelicensechecker .
the second method for license identification is used by fossology .
it uses an algorithm called the binary symbolic alignment matrix bsam traditionally used in protein alignment.
all these tools are open source.
in tuunanen et al.
compared oslc fossology and their own implementation called asla based on the regular expression method .
their evaluation consisted in an empirical study that used foss applications.
they measured the recall of each of the tools but did not verify their precision.
they also reported that the major disadvantage of fossology is that it is slow it took approximately minute per file compared to oslc and asla that were able to process almost files per minute in the same computer .
to date this has been the only formal evaluation of license identification tools.
license identificatio n is only a facet of alsa.
it is also a gui environment for the analysis of the interactions between the licenses of differen t foss components in a heterogeneous system.
similar work has been proposed by alspaugh et al.
.
research we have performed in the last two years has required the identification of licenses of a large collection of files see .
we have identified the following issues with the current license identification systems they are not precise enough.
in many cases these systems can identify the family of a license but not its version.
in and we have demonstrated that license evolution is a growing issue acerbated by lack of tools that properly identify the version of a license.
as licenses evolve the new versions are not always compatible with older versions.
they do not report unknown licenses.
it is important to know that a file has a license even if the tool is not capable of identifying it.
a legal auditor can skip files that do not to include any license and concentrate on those with an unknown one.
they report false positives.
ohcount andoslcuse simple regular expressions that might be matched even if the intention of the licensor is the opposite.
for example we have encountered cases in which these systems report a file as using the general public license because it was found in text such as this file is not licensed under the gpl .
we presume a legal auditor will prefer to scan a file manually than to incorrectly assume it has a given license.
fossology is slow.
in our experience fossology is more accurate than the other two we perform a comparison further below that corroborates this fact but runs one or two orders of magnitude slower.
it requires also a complex setup including a running database.
438barahona et al.
measured different characteristics of the debian distributions but did not include licensing in thei r study .
.
licensing of source code the license of a source code file is typically found in a comment at the very beginning of the file.
we refer to this region of the file as its license statement .
a license statement typically contains four sections not necessarily in th is order a list of copyright owners a list of authors if different from the copyright owners the license or licenses that cover the file see below for details and warranty and liability statements.
the licenses in the licensi ng statement can be of two types by inclusion thetextofthelicenseisembeddedinthefile examples are the bsd and the mit families of licenses by reference the license statement indicates where the text of the license can be found.
this can be a file in the case of the family of gpl licenses or a url as the apachev2 the mplv1.
and the cpl .
in order to understand the characteristics of license state ments as they appear in foss we have created a corpus of source code with approximately files.
this included applications such as linux eclipse jdt openbsd freebsd andmozilla.
wehaveanalyzedthelicensingstatements of these files in a combination of manual and automatic methods trying to determine the various ways in which different licenses are present in files.
we also studied the open source initiative osi approved licenses and the corpus of licenses of fossology.
this exploratory study resulted in the identification of challenges of license identi fication which are summarized in table .
they fall into three categories finding the license statement how many licenses are there in the file where within the file they are located language related the grammar spelling and wording use in a license statement and license customization the terms of the licenses are sometimes altered by their users.
each of these challenges is described below f1.
license statements are usually mixed with other text.frequently the first comments of a file contain text that is not part of the licensing statement such as a description of the file or a changelog.
one exception is the files in various mozilla projects in which well defined deli miters mark the beginning and end of the licensing statement simplifying their identification.
f2.
files might reference another file where the license is located.
frequently a file will contain a licensing statement such as for licensing information see the file see for licensing information see for license details etc.. sometimes the file is in the same directory sometimesina main root or top directory.
the nameofthefilevaries copying license readme copyright.txt authors copyright andlicense another source code file etc.
for the sake of space we use to abbreviate sections of text in the examples.
f3.
files might contain multiple licenses.
it is not uncommon for files to contain more than one license.
such licenses can apply in a conjunction the terms of all license s apply or a disjunction the terms of only one license at the choice of the licensor applies see disjunctive licens ingpattern in .
determining the number of licenses presen t in a file and how they interactwith each other is not trivial.
l1.
licensing statements might contain spelling errors.this is not surprising.
a very common mistake we found is words split by whitespace.
l2.
a given license is referred in different ways.
when a file is licensed by reference usually the creator of the license documents the recommended way to create the reference such as the gpl family of licenses the mpl v1.
and the epl v1.
.
unfortunately this is not always the case.
for example we discovered files that refer to the gpl as this is licensed under the gpl you may use under the gnu public license if you so wish is provided under the provisions of the gpl where is replaced by software library program or the name of the product.
we also found the variant provides this source code under the gpl license where is replaced with the name of the copyright owner or its author.
l3.
licensors change the spelling grammar of a license.
sometimes users change the grammar or spelling.
for example they replace license with licence it would be useful with it will be useful developed by with written at dealings in with dealings with redistribution with redistributions .
the changes are also in punctuation they add or remove a comma or a semicolon.
grammar changes are particularly significant because they might have the effect of changing the meaning of the license intended or unintended .
it should be left to legal experts to determine if these changes to a license should be considered a different license or not.
c1.
several licenses must be customized when used.
licenses such as the bsd must be customized to include the name of the copyright owner of the software.
for instance the warranty statement of the bsd sentence should read this software is provided by name as is and any express with the name of the copyright owner in place of name .
c2.
licensors modify add or remove conditions to well known licenses.
frequently a well known license is modified to create a new license.
two of the best known examples are the bsd3 license and the apache v. .
.
the bsd3 is derived from the original bsd4 by removing a clause famously known as the advertisement clause .
the apache license v1.
is composed of the bsd3 license plus four more sentences.
the openssl license is a derivative of the apache license v1.
.
other licenses derived from the bsd licenses are the zlib libpng license and the sleepycat license.
in other instances the modifications are more subtle.
for example we found many cases in which the mit x11licensewaschangedfrom permission to use copy modify distribute and sell this software to permission to use copy modify and distribute this software dropping sell .
similarly the bsd condition redistributions of source code must retain is changed to redistributions of source code or documentation must retain addingor documentation .
somelicensesby reference such as the gpl and the mpl allow the licensor to modify the license using an addendum this avoids the need to create variants of the license .
these addenda are usually known as exceptions they create exceptions to the conditions of the license see exception pattern in .
these exceptions usually follow the reference to the license.
for example 439type.
challenge finding the license statement f1.license statements are usually mixed with other text f2.files might reference another file where the license is locat ed f3.files might contain multiple licenses language related l1.licensing statements contain spelling errors l2.a given license is referred in different ways l3.licensors change the spelling grammar of the license state ment license customization c1.several licenses must be customized when used c2.licensors modify add or remove conditions to well known lice nses c3.licensors modify licenses for various intents table major challenges of license identification.
parsers generated with bison contain files that are licensed under the gplv2 with a special addendum that allows their use under any license as a special exception when this file is copied by bison into a bison output file you may use that output file without restriction.
c3.
licensors modify licenses for various intents.
by inclusionlicensesarepronetobeingmodifiedbyitsusers willingly or unwillingly.
for example we have found variants of the bsd endorsement clause such as copyright owner names may not be used to endorse neither the names of the authors may not be used to endorse and the name of the author may not be used to endorse .
similarly we found in some cases without prior written permission and in others without specific prior written permission .
in the mit x11 we discovered the words developer authorandcopyright owner used interchangeably we also found software and associated documentation files replaced with source file and in other files the above copyright notice shall replaced with the above copyright notice including the next paragraph shall .
.
an algorithm for license identification based on our analysis of the corpus of source code files and the challenges described before we developed a license identification algorithm.
its goals are to properly identif y each of the licenses in a file license name and version and to sacrifice recall being able to determine the license of a file for the sake of precision making as few mistakes as possible and to run efficiently.
it works by extracting the license statement from the file it then breaks it apart into textual sentences and proceeds tofindamatchforeachofthemindividually thelistofthese matched sentences is analyzed to determine if it contains one or more licenses.
this method requires a knowledgebase with three sets of information filtering keywords k sets of equivalence phrases e known sentence token expressions t license rules r. these sets were created during the study of our corpus and are described below.
set of filtering keywords k one of the challenges of license identification is discriminating between those sentences that are part of the license statement and those that are not relevant see challenges f1 and f3 above .
any sentencethatdoesnotmatchat least one keywordis not expected to contribute to the license of the file.
keywords can be composed of one or more words.
examples of filtering keywords are license conditions disclaimer written permission .
wehaveidentified82suchkeywords.
set of sets of equivalence phrases e to deal with lan guagerelatedchallenges l2andl3 wehavecreatedsets of equivalent phrases.
any phrase that is in a set is considered semantically equivalent to any other in the same set.
examples of these equivalence phases sets are at your option any later version any later version orany greater version distributable licensed released ormade available .
these sets should be created carefully replacing one phrase with another in the same equivalence set should not change the meaning of the sentence.
for example some might argue that you may is not always equivalent to you can .
this set also includes equivalent punctuation such as different types of matching quotes .
we have created such sets.
set of known sentence token expressions t weusethe termsentence token to refer to a sentence of a known license.
a license both by inclusion or by reference is a sequence of sentence tokens.
sentence tokens are generalized using one or more regular expressions see challengesc1 c2 andc3 .
werefertothepair angbracketleftsentence token regular expression angbracketrightas a sentence token expression.
the objective of this set is to translate each sentence found in the licensing statement into a sentence of a known license a sentence token .
we have identified sentencetoken expressions.
for example two of the sentencetokenexpressionsmatchingvariantsofthesentence token seefile the license is inside a given file name are seefile for the licensing terms see the file seefile see for license set of license rules r each license corresponds to a sequence of one or more sentence tokens which we call alicense rule plus a set of non critical sentence tokens which we call its associate sentence tokens .
most by inclusion licenses require matching two or more consecutive sentence tokens.
in contrast by reference licenses usually require only one sentence token to be matched indicating the intention to use such license .
we have identified licenses rules to match licenses.
for example the bsd2 license rule is the sequenceof5sentence tokens angbracketleftbsdpre bsdcondsource bsdcondbinary bsdasis bsdwarr angbracketright inotherwords these sentence tokens should appear contiguously and inthesameorderforthefiletobeconsideredlicensedunder the bsd2.
each rule also contains a list of sentencetokens that usually appear with the license but are not required for the file to have such license its associate sentence tokens for example a file licensed under a gpl license will also contain the typical gpl warranty .
t ext segmentation sentence filtering sentence t oken matching license rule matching1.
license stmt.
extractionsource file comments normalized sentences sentences relevant to license sentence tokens licensesentences .
equiv .
phrases3.
text normalization .
.equiv.
phrases filtering keywords known sentencetoken expressions ruleslegend process data knowledge base figure diagram depicting the main steps of the algorithm of license identification.
andliabilitysentences asrecommendedbythefreesoftware foundation .
our algorithm for license identification is divided into six steps detailed below they are illustrated in figure .
.
license statement extraction the comments at the header of the file are extracted.
if no comment extractor for the programming language exists we simply extract the first lines of text the longest license statement we have found is lines long .
.
text segmentation using a text segmentation algorithm the comments are converted into a sequence of statements s. our implementation is based upon with further modification to remove source code comments and special characters used as prefixes in each line such as and .
.
equivalent phrase substitution eachsentenceisscanned for occurrences of phrases in e and if found replaced with a normalized version of the phrase.
.
sentence filtering sis split into two sequences s ands .
a statement is part of s if it contains at least one legal keyword k k otherwise it is part of s .
the relative order of the sentences in sis preserved in s ands .
ifs is empty the file does not have a license and we label the source file none.s contains the sequence of all sentences that are expected to contribute to the licensing of the file.
.
sentence token matching si s we find its corresponding sentence token ti tsuch that the regularexpression corresponding to timatches si.
if no such ti exists we use the sentence token unknown instead.
some regular expressions contain variable sections for instance the bsd license requires the name of the copyright owner to be included as part of some of its sentences .
hence each sentence in s is equivalent to a pair consisting of the sentence token plus its list of koptional parameters angbracketleftti p1 ... pk angbracketrightfor a value of k .
the result of this step is a sequence of sentence tokens with parameters each equivalent to their corresponding sentence in s .
we call this sequence m. .
license rule matching r r we try to match r tom.
ifris contained in m we output the license l that corresponds to r. the sentence tokens of mthat matchrand any sentence token that matches an associated sentence tokens of rare marked as matched.
this step stops when all sentence tokens in mare matched or all rules in rare exhausted see challenge f3 .
result the license of the file is the list of licenses matched in the previous step.
if no license is matched the file is considered to have an unknown license.
from m a sequence of sentence tokens that were not matched is built.
we will refer to it as the list of unmatched sentences .
it is possible that the algorithm identifies a valid license and its list of unmatched sentences still contain known and unknown sentence tokens in other words part of the license statement of the file has been identified but another part has not .
this poses a risk that the file might contain one or more licenses that have not being identified see f3 and therefore it is recommended that these lists be inspected manually.
the list of unmatched sentences of all files can be aggregated and inspected all at once instead of having to inspect each file individually .
.
example we illustrate our method with this license statement copyright c apple computer inc. all rights reserv ed.
copyright c michael emmel mike.emmel gmail.com copyright c alp toker alp atoker.com redistribution and use in source and binary forms with or without modification are permitted provided that the fol lowing conditions are met .
redistributions of source code must retain the above cop yright notice this list of conditions and the following disclaim er.
.
redistributions in binary form must reproduce the above copyright notice this list of conditions and the followin g disclaimer in the documentation and or other materials provided with the distribution.
this software is provided by apple computer inc. as is and any express or implied warranties including but not limi ted to the implied warranties of merchantability and fitness for a particular purpose are disclaimed.
in no event shall apple computer inc. or contributors be liable for any direct indirect incidental special exemplary or consequent ial damages including but not limited to procurement of substitute goods or services loss of use data or profits or business interruption however caused and on any theory of liability whether in contract strict liability or tort including negligence or otherwise arising in any way out of the use of this software even if advised of the possibility of such damage.
this license statement is segmented into sentences.
sentence is modified to replace with quotes its pre441ferred equivalent phrase .
the number in front of each line identifies its order in the original licensing statement copyright c apple computer inc. all rights reserve d. copyright c michael emmel mike.emmel gmail.com co pyri redistribution and use in source and binary forms with or w redistributions of source code must retain the above copyr ig redistributions in binary form must reproduce the above co py this software is provided by apple computer inc. quotes as in no event shall apple computer inc. or contributors be li the second sentence is filtered out it contains no filtering keywords .
the remaining sequence of sentences is translated to the following sequence of sentence tokens and their parameters allrights copyright c apple computer inc. bsdpre bsdcondsource above bsdcondbinary bsdasis apple computer inc. bsdwarr apple computer inc. or contributors each line is composed of the name of a sentence token followed by a list of instantiated parameters.
for example line has sentence token allrights with a parameter of the leading string copyright ... .
line bsdpre is sometimes followed by a colon.
line bsdcondsource includes the parameter above because we have found two variants of this license one using above copyright notice and another using only copyright notice this variant is context dependent and cannot be an equivalence phrase .
the purpose of these parameters is to simplify the identification of variants of t he license and to inform the user of how they are matched as sometimes there might be errors in them e.g.
the copyright owner being different in the bsdasis andbsdwarr sentences orincorrect orarulemighthavearegularexpressio n that is too greedy and match more than the intended text.
in this example the name of the copyright owner apple computer inc. is consistent in the three matched rules.
thislistmatchesthebsd2rule angbracketleftbsdpre bsdcondsource bsdcondbinary bsdasis bsdwarr angbracketrightandallrights is marked as an associate sentence token of the bsd2.
for this license statement no unmatched or unknown sentences exist.
hence this file contains the bsd2 license only.
.
ninka using this algorithm we have developed a license identification tool called ninka.
ninka is open source licensed under the general public license version .
it consists of approximately lines of perl filtering keywords equivalence phrases sentence token expressions and license rules.
it is capable of identifying licenses.
.
ev aluation we conducted a comparison experiment to evaluate ninka against other existing tools fossology version .
.
ohcount version .
.0rc and oslc .
.
fossology identifies licenses using the binary symbolic alignment matrix bsam pattern matching algorithm matching the text files against license templates contained in a database.
fossology is able to detect a wide variety of specific licenses version .
is capable of recognizing different ones .
its main disadvantage is its speed it takes from few seconds to few minutes to identify the license of a file .
ohcount2 1ninka is available at turingmachine.org ninka .
developed by ohloh an open source directory.
ohcount uses simple regular expressions to match licenses.
oslc3 finds exact or partial matches against the licenses stored in its database using an algorithm based on a technique for isolating textual differences .
.
setting in order to guarantee fairness the evaluation was performed by one of the authors independently from the maintainer of ninka.
we did not want our tool to be customized consciously or unconsciously to the files in this study and consequently improve ninka s accuracy.
we selected source code files.
first we randomly selected applications from debian .
.
.
we then randomly selected one file from each.
these files form the setn.
our goal was get as many different types of licenses and licensing statements as possible.
if we consider that our sample comes from .
million source code files in debian .
.
our study will provide us with a confidence level of an error of .
that we can correctly identify the licenses in the source code files of debian .
.
.
the evaluation was conducted using the following procedure first for each source file in n its license or licenses were manually identified.
second each tool was used to identify the licenses in each file.
we used the following commands for fossology fosslic for ohloh ohcount l and for oslc java jar oslc.jar d .
each of these tools has a different idiosyncrasy in the way it reports its results.
for example the names used for each of the licenses might be different this is particularly true for by inclusion licenses hence we inspected the documentation of each tool trying to determine if the license name it uses corresponds to the same license we found4.
oslc displays the percentage of match of a license we disregard this number and considered each of the licenses it outputs as being identified.
because files without a license are fairly common .
in our sample did not have a license we assume that if the tool does not output any license the tool did not find one and will be considered correct if there is no license in the corresponding file.
neither ohcount nor oslc report when they find an unknown license.
for fossology we consider the output phrase as an unknown license.
ninkaexplicitly states if there is a license that it cannot recognize.
the dat a used in this experiment and the results of each tool can be found at .
we divided the results of each tool into sets ccorrect license name and version.
the tool correctlyidentifieseachofthelicensesinthefile including their version where applicable i.e.
the official name of the license contains a version number such as the gpl or the cpl we consider the bsd4 bsd3 bsd2 different versions of the same family .
if the file contains no license the tool outputs nothing or that there is no license in the file.
if the file contains more than one license each of them should be correctly identified.
4there is currently an on going effort by several organizations and companies to standardize licensing data that can be easily exchanged.
this includes standardizing licenses names.
one of the authors of this paper was invited to be part of the committee.
for more information see .
442iincorrect.
the tool identifies a license but it is incorrect.
we also consider it an incorrect identification when the tool outputs multiple licenses and at least one is incorrect.
uunknown.
thetoolexplicitlystatesthatithasfound a license and it does not recognize it.
these sets are mutually disjoint and n c i u. finally we calculate the recall and precision of the result s of each tool as follows recall c c u precision c c i f measure c c i u intuitively recallmeasures how good is the tool at discovering that there is a license in the file.
because neither ohcountnor oslc supportreporting unknown licenses their recall is .
in contrast ninkaand fossology are capable of reporting when a license is found but is not identified .
we believe this is an important feature.
this information is valuable to the person the license analysis it is better to know that a file might contain an unidentified license rather than to think that it contains no license or worse an incorrect one i.e.
if a file contains license ait is better to say i don t know than to err the file has no license or the file has license b .
precision measureshowgoodisthetoolatidentifyingthe correct license and version.
comparing each tool simply in terms of their precision or recall is insufficient.
therefore we use the f measure to provide a more balanced comparison of the trade off between precision and recall.
.
results table shows the recall precision and f measure of the results of each of the tools in our study and the time it took each to analyze the set of files.
table results of the evaluation of the tool.
best result in each category is depicted in bold.
ninkafosso.
ohcount oslc c i u recall .
.
.
.
precision .
.
.
.
f measure .
.
.
.
execution time 22s s 27s 372s we can make several observations about the results.
ninka sacrifices recall for the sake of precision.
it prefers to rep ort the license as unknown rather than making a mistake.
in fact of the files incorrectly identified by ninka in three it correctly identified one of the licenses present in the file b ut not all of them and in three it reported the file as having no license when it did contain one.
ninkashows the highest f measure in these tools.
this is reassuring its low recall ninka s recall is the lowest of the four is offset by its high precision.
fossology and oslc are significantly slower than the rest and times longer than ohcount or ninka respectively and ninkais slightly faster than ohcount.
we believe this is because ninkaonly analyzes the first lines of each file.in conclusion our study shows that we have achieved the main goals set for ninka it has the highest precision of all the tools in the study and it does it efficiently it was the fastest tool in the study .
.
empirical study to demonstrate the usefulness of ninkawe performed a study of the licenses found in the files of a large open source distribution debian .
.
.
more specifically we have per formed an empirical study to answer the following research questions rq1 what are the licenses used in foss?
no empirical study has been performed to identify the licenses of source code files in a large collection of foss applications.
our goal is to identify what licenses are used and how frequently.
rq2 when present what types of errors do license statements have?
intuitively we would expect license statements to contain errors.
our goal is to attempt to identify them and explore how the occur.
to address rq1 we identified the licenses of the source files of debian .
.
using ninkaand evaluated a how frequently each license is used b if there is a relationship between license and programming languages and c if smaller files are more likely not to have a license.
for rq2 we looked for inconsistencies in licenses.
we concentrated on applications where most of the files used the same license and only a handful had a different one.
we then manually analyzed the differences checked available documentation for clarification and contacted the authors of the software to verify our findings.
.
setting we downloaded the source code of debian .
.
from debian s official repository5we analyzed all files written in java .java c .c c .cpp .cxx and .cc lisp .el and .jl perl .pm and .pl and python .py according to these are five of the six most frequently found programming languages used in debian the other is shell programming.
in debian .
.
we analyzed files from applications also known as source packages in debian s nomenclature .
ninkacould not identify a license in .
of files.
these numbers are consistent with our empirical evaluation ofninkain section .
.
ninkawas able to identify the license of all files in .
of all applications.
.
rq1 what are the licenses used in foss?
due to space constraints we only present some results.
we invite the reader to download the list of files and their licenses from .
.
.
what licenses are used by software in debian table shows the most commonly found licenses in debian .
.
files.
the files with no license statement are the most frequent none .
the gpl and lgpl licenses in all their versions appear prominently in the list they are widely used by many files in many different applications.
on the other hand some licenses are used in few applications but these applications contain many files e.g.
the disjunctive license cddlv1 or gplv2 it is only used in 5ftp ftp.debian.org debian dists debian5.
.
443two applications one of them netbeans with files .
in comparison table shows the number of applications in which a given license is present in at least one of its file.
the gplv2 is the most common in both tables.
license filesperc.
aps.
none .
gplv2 .
lessergplv2.
.
cddlv1orgplv2 .
seefile .
apachev2 .
librarygplv2 .
gplv2 .
gplv2 or lgplv2.
or mplv1.
.
gplv3 .
bsd3 .
mitx11 .
lessergplv2 .
boostv1 .
gplv2 linkexception .
bsd2 .
lessergplv2.
.
librarygplv2 .
sameasperl .
gplnoversion .
mitx11 variant .
table most common licenses per number of files where they occur in debian .
.
.
the last column is the number of applications in which they are found.
with regard to the distribution of licenses per application the number of licenses used in each application tends to be very small.
the median number of different licenses detected per project is .
.
had only one detected license and applications .
had two.
the maximum number of licenses in one application is large e.g.
different licenses in linux invnc4 and in texlive.
these numbers could be skewed because ninkadid not detect the licenses of all the files.
to avoid this potential problem we studied applications in which ninkaresolved all their files .
of the total i.e.
for each file in it ninkaeither identified its license or that it contained no license .
of these applications used only one license.
table shows the distribution of licenses in these applications.
another applications used two licenses only.
.
.
do different programming languages use different licenses?
table shows the distribution of licenses grouped by programming language based upon the extension of the file .
this table shows the results for java c c and perl.
with respect to java as it can be observed two applications netbeans andglassfish contribute all the files that appear with the cddlv1 or gplv2 java s most used license .
it is also significant that other licenses appear bef ore the gplv2 .
c programs on the other hand are more likely to use the free software foundation licenses.
c programs were found to frequently use the triple license gplv2 lgplv2.
or mplv1.
promoted by the mozilla foundation the largelicense aps.prop none .
gplv2 .
seefile .
librarygplv2 .
sameasperl .
lessergplv2.
.
mitx11 .
bsd3 .
gplv2 .
lessergplv2 .
gplnoversion .
bsd2 .
publicdomain .
table most common licenses per number of applications in which they appear at least once in debian .
.
.
license aps.perc.
gplv2 .
sameasperl .
mitx11 .
bsd3 .
seefile .
apachev2 .
lessergplv2.
.
gplv2 .
bsd2 .
librarygplv2 .
table most common licenses used by applications that used only one license and every file was resolved it either had no license or it was known in debian .
.
.
there were such applications .
of all applications .
number of files that compose boost pushes the number of files under its license into this list.
perl is peculiar because it uses an indirect license same license as perl .
this is the default license statement included in the skeletons of perl modules automatically created by perl and this is likely the reason behind its frequency6.
the table also shows perl files are more likely not to have a license more than twice of any of the other three languages .
.
.
does size matter?
duringthedevelopmentof ninkaweanalyzedvariousfoss applications to test the efficacy of our tool.
one of these applications had a significant proportion of files without a license.
we contacted its main developer informing him of this.
he replied that he did not think it was necessary to place a license on very small files usually test files .
are smaller files more likely not to have a license?
the mediansizeoffilesindebian5.
.2is4633 bytes the median size of files without a license is 6thistypeoflicensemakesiteasytorelicensethesemodules if and when perl changes it license .
perl is expected to change its license to the artistic v2 when version is released it is currently using the disjunctive license bet ween the artistic v1 and the gplv1 .
444license files perc.aps.
java .java cddlv1 or gplv2 .
none .
lessergplv2.
.
apachev2 .
gplv2 .
gplv2 linkexception .
c .c none .
gplv2 .
lessergplv2.
.
seefile .
librarygplv2 .
gplv3 .
c .cpp .cxx .cc and c gplv2 .
none .
gplv2 or lgplv2.
or mplv1.
.
seefile .
librarygplv2 .
boostv1 .
perl .pm and .pl none .
gplv2 .
sameasperl .
librarygplv2 .
seefile .
gplv2 or lgplv2.
or mplv1.
.
table most frequent licenses used by each programming language in debian .
.
bytes while the ones with a license is .
considering that the median size of the license statement of a file is bytes the median size of files with a license was still more than kilobytes longer.a mann whitney test confirms that these differences are significant p .
.
however we did not find a correlation between the size of the file and the existence of a license in it .
.
.
rq2 when present what types of errors do license statements have?
during the development and testing of ninkawe observed several potential problems in the licensing of various appl ications that we analyzed.
these are summarized below application .
files without a license we contacted the author of this application informing him that one of its files did not contain a license the rest contained the gplv3 .
he acknowledged that this file should not have been distributed with the software and removed it.
application .
cutting pasting the wrong license statement in this application we discovered a license inconsistency.
the application according to its web site was licensed under the gplv2.
of its files were licensed under the gplv2 under the gplv3 one in the public domain and didn t have a license.
the gplv3 files created a licensing conflict a file licensed under the gplv3 cannot be linked into a system under the gplv2.
we emailed its mailing list asking for a clarification.
theproject leader quickly replied those files did not have a copyright header and no license at all i ve copied a license header into them but did not see that it was the wrong one sorry.
he also clarified that files without a license statement are licensed under the gplv2 .
application .
inconsistent license clauses this application is licensed under an mit style license.
files out of contained different liability and warranty clauses tha n the rest.
when we contacted the author of the application he acknowledged that this was a problem and would be fixed in the next release.
application .
incorrect name of the license according to the web site of this application it is licensed un der the lesser gpl v2.
.
its readme.txt file asserts it is licensed under the library gplv2 .
ninkaidentified files under the lesser gplv2 but this license does not exist.
the successor of the library gpl version is the lesser gpl version .
there was never a version .
of this license .
the rest of the files correctly referred to the librar y gplv2 .
when we contacted the author of the application he acknowledged the problem claiming the licenses of all files will be changed to lesser gplv .
.
application .
license statements can only be edited by their copyright owners this application included a file under the lesser gplv2 as mentioned above this version of the license does not exist .
when we contacted the project leader he informed us that this was a known problem and there was a bug report already filled about it.
unfortunately this file had come from a different application and because they were not the copyright owner they could not change its license instead they were trying to find its copyright owner to perform such change in summary these issues highlight the need for license maintenance features in software development environments that support editing of the license statements.
verifying the validity of the license statements.
summarizing licenses in source code files.
tracking of copyright owners.
.
threats to v alidity with respect to our evaluation of ninkaand the other tools weaddressed construction validity byrandomlychoosing files from many different applications.
we addressed conclusion validity by performing a statistical test that indicates the level of confidence of the results.
our studyof licensingin foss is exploratoryand its main threat to construction validity is how reliable our license detection is.
our empirical evaluation of ninkahas been design to quantify it.
in this evaluation ninkahad a .
precision for files in which it identified a license hence we are confident of the quality of our analysis of the complete debian distributions.
there is however the risk that the unknown licences might change some of the results.
this potential impact would be small because only .
of files in debian .
.
contained a license that was not identified.
we inspected many of these files and in most cases they contained variants of other known licenses that were not recognizable by ninka.
furthermore we restricted some of our analysis to applications for which ninkaidentified a license or lack of one in each of their files.
with respect to external validity we believe that our results are representative to foss in general because a we analyzed a very large number 445of files and applications and b debian serves as a proxy of active or at least used foss applications.
we have also contacted developers where applicable to make sure that our interpretations were not erroneous.
with respect to reliability validity our study can be replicated first we have used a well defined collection of source code files that is available to anybody debian distributions second we are making ninkaavailable under an open source license and third the data and results or our experimentsareavailableforotherstostudyat org ninkadata .
.
conclusions and future work in this paper we have presented a method of license identification for source code files.
this method is based on matching each of the sentences of the license statement of the file to the sentences of known licenses.
based on this method we implemented ninka.
we empirically evaluated ninkaand other similar tools and found that ninkais better and faster at identifying the license name and version than these tools at the cost of lower recall.
we performed an empirical study of a large collection of foss applications.
we discovered for example that the gplv2 is the most commonly used license in terms of number of files and number of applications that use it.
we also discovered that licensing statements are prone to errors.
the integration of license verification tools int o development environments will alleviate this problem.
with respect to future work the identification of licenses of files is only one step in licensing analysis of components.
it is also necessary to analyze the interactions between different files of a system to determine the resulting license of a component and at a higher level how the interaction of different components affect the overall license of a system that uses them.