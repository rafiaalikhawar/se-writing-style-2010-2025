perturbation analysis of stochastic systems with empirical distribution parameters guoxin su school of computing national university of singapore sugx comp.nus.edu.sgdavid s. rosenblum school of computing national university of singapore david comp.nus.edu.sg abstract probabilistic model checking is a quantitative veri cation technology for computer systems and has been the focus of intense research for over a decade.
while in many circumstances of probabilistic model checking it is reasonable to anticipate a possible discrepancy between a stochastic model and a real world system it represents the state of the art provides little account for the e ects of this discrepancy on veri cation results.
to address this problem we present a perturbation approach in which quantities such as transition probabilities in the stochastic model are allowed to be perturbed from their measured values.
we present a rigorous mathematical characterization for variations that can occur to veri cation results in the presence of model perturbations.
the formal treatment is based on the analysis of a parametric variant of discrete time markov chains called parametric markov chains pmcs which are equipped with a metric to measure their perturbed vector variables.
we employ an asymptotic method from perturbation theory to compute two forms of perturbation bounds namely condition numbers and quadratic bounds for automata based veri cation of pmcs.
we also evaluate our approach with case studies on variant models for three widely studied systems the zeroconf protocol the leader election protocol and the nand multiplexer.
categories and subject descriptors d. .
sotware program veri cation formal methods model checking f. .
models of computation probabilistic computation f. .
logics and meanings of programs specifying and verifying and reasoning about programs speci cation techniques g. probability and statistics markov processes stochastic processes general terms algorithms measurement theory veri cation permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
to copy otherwise to republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
icse may june hyderabad india copyright acm ... .
.keywords asymptotic bounds perturbation analysis prism model checker probabilistic model checking .
introduction probabilistic model checking is a system veri cation technique that has matured over the past two decades and is increasingly exploited in software engineering research such as reliability analysis and adaptation uncertainty .
one of the most widely known and used probabilistic model checking tools is prism and a common scenario of probabilistic model checking is the scenario of verifying a system model against a temporal logical formula and returning either a yes no answer or a probabilistic answer namely a number between and indicating the satisfaction probability .
the majority of case studies reported for probabilistic model checking including those performed with prism involve stochastic models with well understood theoretical stochastic behaviors such as the use of a fair coin toss to introduce randomization into an algorithm or the uniform distribution of randomly chosen ip addresses in the zeroconf protocol.
however real world systems are often governed by empirical or unknown distributions such as the failure rate of some system component.
whether the temporal logical formula and the returned result re ect the true quantitative property of the system behind the stochastic model is dependent on whether the model is a faithful abstraction of the system.
instead of using non determinism to resolve choices between transitions in a stochastic model measurements or experiments are employed to determine the transition probabilities for discrete time systems or transition rates for continuous time systems .
on the one hand those statistical quantities are a ected by the measurement or experiment environment.
for example the rate of losing a message in a communication protocol implemented in a physical network is a ected by network load electrical or wireless noise etc.
on the other hand the stochastic nature of the system may vary over time.
for example the reliability of a hardware component decreases as the age of the component grows.
in the worst case a tiny but non trivial change to some quantities in the model might lead to a misleading or even invalid veri cation result.
the above considerations motivate an important problem for quantitative veri cation of real world systems if a stochastic model or some of its quantities are perturbed what are the consequences on the results of verifying the model against some required or queried temporal properties?
to test the consequences one straightforward method is to per permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
copyright is held by the author owner s .
publication rights licensed to acm.
icse may june hyderabad india acm form multiple point wise model checking in the manner of prism experiments we modify the values of the quantities in the model run the model checker for each choice of the values and compare the resulting set of outcomes.
however while such a sampling strategy provides an e cient way of revealing a rough trend in the veri cation results it only partially reveals the consequence of model perturbations on veri cation.
therefore the practice of probabilistic model checking can bene t from a method that provides a sound and rigorous characterization of the relationship between model perturbations and veri cation.
in particular with this method the model builder is able to better verify whether his system model satis es its requirements in the presence of perturbations caused by the system itself or the environment.
in this paper we present an asymptotic method to compute the perturbation bounds including condition numbers and quadratic bounds for probabilistic model checking of perturbed stochastic models.
perturbation bounds have at least the following three aspects of signi cance first perturbation bounds themselves are intuitive measures of sensitivity for verifying perturbed stochastic model.
second perturbation bounds conveniently predict themaximal variations that might occur to the veri cation results with respect to the perturbation distances of speci c quantities in the stochastic models.
last and based on the second aspect perturbation bounds support the so called backward analysis what is the safe zone for the quantities to perturb if we want to con ne the variation of a result within a speci c value?
to further explain the motivation of our approach let us consider an ipv4 zeroconf protocol model with noisy communication channels.
the zeroconf protocol enables a new host to join a computer network automatically and with zero con guration such as without pre assignment of an ip address .
figure depicts a lightweight abstract model of zeroconf that uses a maximum of four message probes for the new host to discover an unused ip address.
state is the initial state in which the new host randomly selects an ip address.
from state to state the new host sends a probe to existing hosts and waits.
if it receives a reply within a speci ed time then the process goes back to state if not the process proceeds to the next state.
state is the error state in which the new host uses an occupied ip while state is the ok state in which the new host uses an unoccupied ip.
the constant number mis the number of existing hosts and n is the size of the ip address space as speci ed in zeroconf.
the variable xrefers to the probability that a probe or its reply is lost and the exact value of xrelies on an ad hoc statistical estimation of the loss rate of messages tested in experiments.
but we can calculate the mean value xofxas an idealized message loss rate and assume that a potential perturbation x may occur.
it is therefore reasonable to express the probability y that an address collision occurs in the form of y y where yis an idealized value of yandy provides the maximal possible perturbation of y. while ycan be computed by using the values of m n and xin standard probabilistic model checking sheding light on the relationship between y and x is the goal of this paper.
our perturbation analysis approach is based on the formal analysis of a parametric variant of discrete time markov chains called parametric markov chains pmcs which are m n m n test 2x x yy test 3x xcctest 4x x test x x ok1886 error100 figure zeroconf protocol with noisy channels equipped with the norm of total variance to measure the perturbations of their abstract transition probabilities.
in our previous work we developed an asymptotic method to compute condition numbers for probabilities of reachability properties for pmcs.
key contributions of this new paper include the following first we extend our asymptotic method for automata based probabilistic model checking.
this allows our approach to account for a much larger group of temporal properties namely !
regular properties.
second we improve the asymptotic method to compute quadratic bounds which together with condition numbers are able to provide suitable bound predictions in practice.
third we present an evaluation method to demonstrate the utility and applicability of our approach using case studies on variants of well known system models.
the remainder of the paper is organized as follows.
section recalls theoretical basis of automata based probabilistic model checking and relevant mathematical de nitions.
section presents the model of pmcs and relevant model checking concepts.
section provides an asymptotic method for computing condition numbers and quadratic perturbation bounds.
section describes an evaluation method and case studies.
section discusses some related work.
section concludes the paper.
.
preliminaries in this section we recall key concepts in automata based probabilistic model checking including discrete time markov chains mcs deterministic rabin automata dras and their products .
mcs are widely adopted to model probabilistic systems in model checking tools including prism and dras can encode the expressive language of !
regular properties including the syntax of ltl.
we also recall relevant mathematical de nitions in particular vector variables and the norm of total variance.
.
markov chains and automata definition markov chain .
a discrete time markov chain mc is a tuple m s p ap l wheresis a nite non empty set of states p s s!
is a transition probability function such thatp s02sp s s0 for eachs2s s!
is an initial distribution such thatp s2s s ap a set of atomic propositions and l s!2apa labeling function.
in the literature pis often presented as a matrix and as a vector.
the size of m namelyjmj is the number of states in splus the number of pairs s s0 such thatp s s0 .
a path inmis an in nite sequence s1s2s3 of states in ssuch that p si si for eachi.
apath fragment of is an initial and nite fragment312of .s0 sisstrongly connected if for each pair s s0 of states in s0there is a path fragment s1 snsuch that s1 sandsn s0.s0is a strongly connected component scc if no proper superset of s0is strongly connected.
s0 is abottom strongly connected component bscc if for each s62s0there is no path fragment s1s2 snsuch thats12s0 andsn s. letrch m be the largest subset of ssuch that for eachs2rch m there is a path fragment s1s2 snsuch that s1 andsn s. a statesor a sets0of states is reachable inmifs2rch m ors0 rch m respectively.
the digraph ofmis induced in the standard way sis a vertex of the digraph if and only if s2s and s t is an edge of the digraph if and only if p s t .
definition deterministic rabin automaton .
a deterministic rabin automaton dra is a tuple a q q acc whereqis a nite set of states an alphabet q !qa transition function q02qan initial state and acc 2q 2qis an accepting condition.
arunfor a0a1a2 !is an in nite sequence q0q1q2 of states such that qi ai qi 1for eachi .
a run is accepting if there exists j k 2accsuch that 9n 8i n qi62j 9m 8j m qj2k the accepted language ofaisl a f !
the run for is acceptingg.
we recall the following fact for dras.
proposition .the class of languages accepted by dras agrees with the class of !
regular properties.
we say an mcmand a draaarecompatible if 2ap where is the alphabet of aandapis the set of atomic propositions for m. automata based probabilistic model checking is based on the de nition of the product of an mcmand a draathat are compatible.
definition model product .
the product of m s p ap l anda q 2ap q acc is given bym a s q p ap l where p s q s0 q0 p s s0 ifq0 q l s otherwise s q s ifq q0 l s otherwise ap fj k j k 2accg andh2l s q i q2h for eachh2ap .
we note that whenever we write m a it is assumed that mandaare compatible.
a bscc b s qofm a is accepting ifj b ?andk b6 ?for each j k 2acc.
letb!be the union of all accepting and reachable bsccs of m a .
letb?
rch m a such that b?
b!
?and for each s q 2b?there is a path fragment s1 q1 sn qn inm a such thats s1 q q1and sn qn 2b!.
we call b!thetarget set andb?theconstraint set ofm a which can be generated by a standard graph analysis algorithm.
due to space limitations we do not formulate the de nitions of reachability probability and probabilistic satisfaction which can be found in the standard text of probabilistic model checking such as baier and katoen .
one fundamental fact in probabilistic model checking is stated by the following proposition.
proposition .the probability of satisfying the !
regular propertyl a bymis equal to the probability of reaching b!viab?inm a .
.
vector variable and total variance for a vector v we use v to denote the number in the ith entry of v. letjvj the dimension of v bek.
we abbreviatepk i 1v the sum of numbers in all entries of v by sum v .
the norm of total variance forvis de ned as kvk pk i 1jv j.vis a zero vector ifv for each i k. a zero vector is denoted by .
avector variable is a tuple xof pairwise distinct variables.
like vectors we usex to denote the variable in the ith entry of x. letjxj the dimension of x bem.
the norm of total variance forx denoted bykxk is the expressionpm i 1jx j and sum x is the expressionpm i 1x .
.
parametric model in this section we begin by brie y explaining the motivation of pmcs.
then we formally de ne the model of pmcs and the product of pmcs and dras.
when using probabilistic model checking to verify a system the model builder normally speci es systems under consideration in the high level speci cation language with a model checking tool such as prism.
for a discrete system model the semantic model that underpins the highlevel system model is an mc with a transition probability function often represented as a matrix.
each row of the matrix is a probability distribution that de nes the transition probabilities from one state to other states or itself.
as argued in section in order to faithfully model a real world system we should provide the model builder a way to indicate which quantities in the high level system model are subject to perturbations.
such language enhancements are beyond the scope of this paper and we assume that the enhancements are captured at the semantic level by a vector of variables associated to speci c probability distributions.
this semantic treatment motivates the model of pmcs.
each pmc contains a parameterization of the transition probability function from some mc.
given p s s!
andx aparametric transition probability function phxiis obtained from pby replacing values at some entries of p saya2 with the expression a xfor somex2xsuch that the following three propositions are true for eachs t2s ifp s t then phxi s t and if p s t then phxi s t for eachs s0 t t02s ifphxi s t a xand phxi s0 t0 a0 x0 then s s0andt6 t0impliesx6 x0 a6 a0impliesx6 x0 for eachs2s eitherp t2sphxi s t sum x orp t2sphxi s t .
according to the rst proposition above entries with numerical values and are not associated with variables.
this is because a transition with probability or is not a probabilistic transition and therefore not subject to perturbations.
the second proposition states that one variable can be associated to only one position in one probability distribution and to positions with the same number in di erent probability distributions.
the third proposition follows from the requirement that variables in xmust be either fully used or not used at all in each row of phxi.
the last two propositions together guarantee that the insertion of variables from313xintopdoes not distort each row of phxias a legal probability distribution.
the vector variable xinphxi as we indicated before is to be measured by the norm of total variance later in the text.
similar to p we often present phxias a symbolic matrix.
by the de nition of parametric transition probability functions we ensure that each pmc has only one perturbed vector variable and the treatment of pmcs with multiple perturbed vector variables is left for future work.
the model de nition for pmcs is represented below.
definition parametric markov chain .
a parametric markov chain pmc based on an mc m s p ap l is given by a tuple p s phxi ap l where phxiis a parametric transition probability function based onpandx.
in de nition for convenience we call xthe perturbed vector variable or simply the vector variable of p andm theidealized mc ofp.
we intend to interpret pas an innite class of mcs but to formalize we need to identify several terminologies that themselves are occasionally mentioned in the sequel.
let vbe a vector of values such thatjvj jxj k. let p0be obtained from phxiby replacing vforx namely placing v into each position of x for each i k. ifp0is a transition probability function and p0 s t if and only if p s t for each s t2s in other words p0andpshare the same underlying digraph then p0is an instance ofphxi.
in this way we obtain an mc m0with the transition probability functionp0and other components as in p. we call suchm0an instance ofp.
by de nition the idealized mc mofpis also an instance.
we identify as the class of all instances ofp.
it can be veri ed that all mcs in have the same size thus letjpj jm0jwherem02 .
perturbations of a pmc do not change the underlying digraph of the pmc as stated in the following proposition.
proposition .mcs in share the same digraph.
proposition is used later to safely generalize the graphbased concepts de ned for mcs to pmcs.
for illustration purposes we present a pmc pegwith four states.
the names of the states are numbers and .
the initial distribution forpegis the uniform distribution .
the parametric transition probability function for peg is represented by the following symbolic matrix bb x1 4x2 0x3 cca the vector variable for pegisxeg xi i .
we note that for simplicity the vector variable xegoccurs in the rst row of the above matrix only but according to the de nition of parametric transition probability functions a vector variable can occur in multiple rows.
the set of atomic propositions forpegisfone two three four gand the labeling function forpegis given as !foneg !ftwog !fthreeg !ffourg to verify a pmc against an !
regular property represented by a dra we de ne the product of a pmc and a dra which is a parametric version of de nition .
one twovv four three 2663vv four four four four four fourll5664vv figure examples of dras a1 left anda2 right definition parametric model product .
the product ofp s phxi ap l anda q 2ap q acc is given byp a s q p hxi ap l where p hxi s q s0 q0 phxi s s0 ifq0 q l s otherwise and ap andl are as de ned in de nition .
we saypandaarecompatible ifmandaare compatible for anym2 .
when writingp a it is assumed that p andaare compatible.
it can be proved that p a is also a pmc.
thus by proposition all pmcs in p a share the same underlying graph.
based on this fact we identify thetarget resp.
constraint set of p a and the target resp.
constraint set of any mc in p a and the set of reachable states inp a as the set of reachable states in any mc in p a .
two dra examples are depicted in figure .
the accepting condition fora1isf?
f3ggand that fora2isf?
f5gg.
hence the meaning of a1is reaching state in peg not a1itself!
via all states in pegexcept state and a2can be informally read as reaching state in pegwithin two transitions .
clearly both a1anda2are compatible with peg.
a straightforward model construction for peg a reveals thatpeg a 1has reachable states out of possible states and its target set and constraint sets are f gandf g respectively.
by a similar construction peg a2has reachable states out of possible states and its target set and constraint set are f gand f g respectively.
.
perturbation analysis in this section we rst de ne a mathematical characterization for verifying a pmc against an !
regular property represented by a dra.
then we formulate two kinds of perturbation bounds namely condition numbers and quadratic bounds and develop a computational method for them.
.
perturbation characterization the feasibility of the mathematical characterization to be de ned relies on the fact stated in proposition .
before de ning the characterization we rst provide several important auxiliary de nitions.
given p a with state space s q parametric transition probability function p hxi target setb!and constraint set b?
we construct three new functions ?
b?!
such that ?
s s for each s2b?
ahxia mapping such that ahxi s q s0 q0 p hxi s q s0 q0 for each s q s0 q0 2b?
i.e.
ahxiis a restriction of p hxionb?
b?
and bhxia mapping such that bhxi s q x s0 q0 2b!p hxi s q s0 q0 314for each s q 2b?.
the generation procedure for ?
ahxi andbhxiis straightforward.
we also present ?as a vector called a partial initial distribution ahxias a symbolic matrix called the constraint matrix forp a and bhxi as a column vector called the target vector forp a .
we stress that both ahxiandbhximay not contain all variables fromx.
let aandbbe obtained by assigning zeros to the positions of variables from xinahxiandbhxi respectively.
as examples the constraint matrix and target vector for peg a 1are respectively x1 4x2 and x3 with partial initial distribution and the constraint matrix and target vector for peg a2are respectively bbb 0x1 4x2 0x1 4x2 cccaand0 bbb x3 x3 ccca with partial initial distribution .
definition .the perturbation characterization function forpwith vector variable xwith respect toais a scalar function onxsuch that x ?
1x i ahxii bhxi ai b where the meanings of ?
ahxiandbhxiare stated above.
the intuition and signi cance of forpis demonstrated by the following proposition.
proposition .letm2 be the idealized model of pandm02 be obtained by replacing vwith the vector variable ofp and letp p0be probabilities of satisfying l a bym m0 respectively.
then v p0 p where is the perturbation characterization function for p. in other words let xbe the vector variable of p the difference between the probabilities of satisfying the !
regular propertyl a by the idealized mc of pand by some instance ofpobtained by replacing the vector vwithxis equal to v .
.
perturbation bounds let and f v jkvk sum v 0g.
is an interval and for the ease of discussions we call it the perturbation interval of by .
the quantity sup resp.
inf denotes the least upper bound resp.
greatest lower bound of the possible veri cation variations characterized by if the perturbation distance of the vector variable of is not larger than .
definition .
the condition number for is the limit lim !0supnx jx2 0o definition .a pair of low and upper second order bounds for are functions f f respectively such that jf inf j jf sup j o intuitively resp.
is the linear approximation of sup resp.
inf as tends to and f resp.
f tends to sup resp.
inf faster than any other quadratic function as tends to .
the existence of is guaranteed by lemma and theorem .
we omit the argument for the existence of f andf for space limitations.
in the sequel we present a method to estimate the second order bounds based on maximally increasing and decreasing directions and we call such estimations as quadratic bounds .
both of condition numbers and quadratic bounds can perform well when the distances of model perturbations are su ciently small.
in principle it is possible to pursue polynomial bounds of any order to get arbitrarily accurate bounds.
however we believe that condition numbers and quadratic bounds are su cient for practical purposes c.f.
section .
for a slightly detailed discussion .
as an example perturbation characterization function eg2 forpeg a 2up to the second order is eg2 x1 x2 x3 207x1 69x2 69x3 2x1 x2 3x1 4x2 5x3 before presenting the computational method we illustrate that the condition number for eg2is eg2 and estimations of second order bounds namely quadratic bounds for eg2are .
we now consider a computational method for the two kinds of bounds.
let a i a where iis the identity matrix chxi ahxi aanddhxi bhxi b. we de ne that n x ?
a chxi a chxi z ncopies of a chxi a b ?
a chxi a chxi z n copies of a chxi a dhxi it can be proved that the sum of all i s fromi is equal to as stated by the following lemma.
lemma .
x p1 i i x .
proof.
observing that i a p1 i 0ai the proof is by decomposing the sum of product form of c.f.
de nition into in nitely many fragments with respect to the exponents of vector variable x. note that the constant fragment of is eliminated by the seriesp1 i 0ai b. the series on the righthand side of the equation in lemma is called an in nite expansion of in the literature .
the expansion allows one to compute an approximated perturbation value for the quantitative result if the vector variable is instantiated by a concrete vector.
it is worthwhile to explain why we continue to pursue perturbation bounds if we already have an expansion of .
in general xmay contain more than two variables.
in other words jxjmay be larger than .
therefore the exact least upper bound and greatest lower bound for the perturbation interval by a certain perturbation distance is not immediately known from the expansion.
on the other hand an explicit statement of theworst e ect that a certain perturbation distance might cause for a veri cation result is informative and useful for both sensitivity analysis and backward analysis as argued in section .
in spite of the in nite summation form of the expansion in lemma for condition numbers we only need to compute315the rst term of namely the linear fragment of and for quadratic bounds we only need to compute the rst two terms of namely the quadratic fragment of .
in the following we rst deal with condition numbers.
we simplify the form of x ash xfor some vector hof numbers such thatjhj jxj.
we note that all elements in hare not negative.
the following theorem demonstrates that the computation for the condition number can be reduced to the computation for h. theorem .
max h min h .
proof.
sketched by lemma x h xis the rst order fragment of .
by extracting a maximal and a minimal value in h we let max h min h .
the rest of proof is to show that 0is equal to namely is the limit speci ed on the righthand side of the equation in de nition .
the proof is according to the mathematical de nition of limits.
the proof also shows the existence of the limit .
we next turn to quadratic bounds g andg which are respectively estimations of the second order bounds f and f .
in general our strategy is to reduce the multi variate function 2into the pair of single variate quadratic boundsg andg by xing the perturbation directions to be a maximally decreasing direction and a maximally increasing direction of respectively.
more precisely if we can nd a vector vde resp.
vin that is a maximally decreasing resp.
increasing direction of theng vde vde resp.
g vin vin .
if hhas a unique maximal element and a unique minimal element or a zero element then both the maximally decreasing and increasing directions for 2are determined by .
if not we need to consider the quadratic function .
in this step a maximally decreasing direction and a maximally increasing direction for 2is computed by an optimization method.
due to space limitations we only present in detail an algorithm namely algorithm for maximally decreasing directions while a dual algorithm of algorithm computes maximally increasing directions.
algorithm consists of three components first it invokes the operation lc to generate a set of linear constraints that 1imposes.
second for each linear constraint it invokes the operation lm based on the method of lagrange multipliers lm which is a well known method for computing maxima and minima of mathematical functions.
last it selects a vector from the vectors computed in the previous steps to yield the least value which is an expected maximally decreasing direction for .
algorithm is based on a repeated application of the lm method.
the standard lm method computes the critical points of a multi variate function.
if variables of the function are bounded then by taking the variables to the boundary points we can reduce the number of variables.
our elaborated lm method repeats the computation for the original function and functions with reduced variables.
in each step because the 0returned from the lm is also a linear constraint it can be proved that for if v v02sat the set of vectors that satisfy then v v0 .
we observe that the boundary points are also critical points and thus the set of critical points are de nitely not empty.
then the algorithm nds a critical point that yields the least value of 2and returns it as a maximally decreasing direction.algorithm computation of maximally decreasing directions input vde 0such thatjvdej jxj the variable vde is initiated as a zero vector the length of which is the same as that of x. lc the operation lc is invoked which accepts 1and returns a set of linear constraints.
foreach do lm thelm operation is invoke which accepts 2and a linear constraint and returns another linear constraint.
ifsat ?
sat is the set of vectors that satisfy .
then letv2sat if v vde thenvde v return v de the worst case time complexity for computing perturbation bounds is comparable to automata based model checking of non parametric mcs.
for quadratic bounds the complexity is also exponential in the length of the vector variable of the pmc.
theorem .the time complexity for computing condition numbers is o poly jpj jaj and for quadratic bounds iso poly jpj jaj 2jxj .
proof.
the argument for the complexity for computing condition numbers and quadratic bounds is similar to that for automata based model checking of mcs.
first the generation of the target set and the constraint set uses a standard graph based analysis for the product of a pmc and a dra.
the computation for 1and 2involves solving a set of linear equations that is linear in the size of p a and a constant number of matrix multiplications.
therefore the overall time complexity for condition numbers is o poly jpj jaj .
moreover the computational steps in algorithm namely the size of is bounded by the exponential in the number of variables in x. therefore the overall timecomplexity for quadratic bounds is o poly jpj jaj 2k such thatk jxj.
regarding the above complexity analysis there are two points that are worthy of note.
first in practice the dimension of xis usually small.
thus the exponential growth of the complexity depending on the dimension of xwill unlikely impose a practical obstacle.
second in addition to their di erent upper bounds of time complexity stated in the above theorem the computation for quadratic bounds subsumes that for condition numbers and hence requires more computational steps.
.
discussion we end this section with a discussion of the practical signi cance of condition numbers and quadratic bounds.
the asymptotic nature of the two kinds of perturbation bounds implies that they are only able to provide approximated316bounds rather than exact least upper bounds and greatest lower bounds.
actually quadratic bounds themselves are estimations of the second order bounds as de ned in de nition .
when the perturbation distance of the vector variable of the pmc increases the deviation of a veri cation result from its predicted bounds might also increase.
on the other hand estimations of higher order bounds may provide more accurate bound predictions.
nonetheless we believe that condition numbers and quadratic bounds are adequate and useful in practice based on the reasons provided below.
first condition numbers are an intuitive and informative characterization of the sensitivity of quantitative veri cation in the presence of model perturbations.
one merit of representing the sensitivity as numbers is the trend analysis with respect to some interesting quantities other than the vector variable in the model.
second an implicit assumption for perturbation analysis is that the vector variables are subject only to tiny perturbations.
under this assumption condition numbers and quadratic bounds predict su ciently accurate bounds and ful l our needs in practice.
we justify this claim empirically with case studies in the next section.
last the computation for estimations of higherorder bounds is more costly.
at the end of section .
we have stated that the computation for quadratic bounds subsumes the computation for condition numbers.
although we have not provided an algorithm for estimating higher order bounds the previous statement can be generalized an algorithm for estimating higher order bounds subsumes that for estimating lower order bounds and hence requires more computational steps.
.
case studies in this section we evaluate the utility and applicability of condition numbers and quadratic bounds.
by their asymptotic nature the two kinds of perturbations specify the maximal variations on veri cation if perturbation distances of vector variables in the models tend to .
although this mathematical condition is unrealistic in practice we conduct case studies to demonstrate that those bounds can provide accurate predictions for small but non trivial perturbation distances.
as a condition number re ects the sensitivity of a veri cation result to the perturbed variables we also evaluate the relevance of a condition number to some speci c characteristic quantity of a system model other than its perturbed variables.
for experimentation purposes we developed a prototype implementation of perturbation bound calculation in matlab to interact with prism.
the algorithmic ideas behind the implementation are from algorithm and other methods presented in section .
the reason for choosing matlab is because it provides many convenient numerical operations such as matrix multiplication.
in addition the tool prism has an exporting service that translates a model speci ed in its high level modeling language into a vector of reachable states plus a transition matrix in the matlab language.
in principle any formula p ?
in the property language of prism where the pctl path formula does not contain the probabilistic operator p can be represented as an equivalent dra.
this is because such is an!
regular property.
there exist standard algorithms that automate the translation.
if is a propositional logical formula we are able to obtain the set of states of the prism model min which is satis ed namely the set of target states usingoriginal system model and !
regular property in prismtranslate compile shadow system model and reachability property in prism compile ww prism internal representation of mcexport verify states transition matrix constraint matrix and target vector compute veri cation resultperturbation bound figure flowchart of experiment procedure the exporting service of prism.
otherwise we construct a shadow model m0for the prism model mand specify a propositional logical formula 0such thatp ?
in m0equalsp ?
inm.
currently the construction of a shadow model is manual while an automated translation is a subject of later development.
but we can use the prism model checker to verify whether m0and 0are correctly related tomand .
once exported the model the target set and the constraint set are handled by the matlab prototype implementation and a condition number and two quadratic bounds are computed.
the overall experimentation procedure is depicted as a owchart in figure .
the evaluation of perturbation bounds is accomplished in two steps.
in the rst step if the vector variable contains only two elements namely it is binary then go to the second step.
otherwise we slightly adjust the quantities that are considered to be perturbed in the model to be exported be it the original model or the shadow model to stimulate perturbations in di erent directions and to obtain the maximal increasing and decreasing directions.
in the second step we compare the outcomes returned by prism with those predicted by the perturbation bounds with respect to di erent small but non trivial perturbation distances for the perturbed parameters.
our experiments include three case studies based on the noisy zeroconf protocol from the introduction a nonuniform synchronous leader election protocol and a nand multiplexing model.
the prism speci cations for these systems are variants of the corresponding prism models in the benchmark suite available from the prism web site .
both the prism speci cations and the matlab prototype implementation we have developed are available from the rst author s web site .
.
noisy zeroconf protocol the zeroconf protocol with the assumption of noisy channels has been used in section as a motivating example the model of which is depicted in figure .
the veri cation problem for the protocol is to compute the probability that an address collision happens in other words the probability of reaching state .
the problem is a reachability problem and therefore we can directly export the model speci ed in the prism language.
because the network noise is affected unpredictably by the environment the message loss317table address collision perturbations and bound predications pivoted at .
.
and .
loss rates for hosts loss rate actual e predicted e c.n.
q.b.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
number of hosts add.
confl.
c.n.
figure host numbers address collision probabilities and condition numbers rate is perturbed.
we assume that the idealized message loss rate is but the actual rate might be perturbed within .
table presents a comparison of the actual perturbed probabilities of address collision computed by prism and the results predicted by the perturbation bounds when the number of hosts in the network is .
it should be noted that the e ects of small perturbations on the results are nontrivial.
the predicted numbers are based on the following three groups of condition numbers c.n.
for brevity and quadratic bounds q.b.
for brevity loss rate c.n.
q.b.
.
4832e 4832e 8336e .
9965e 9965e 2308e .
5634e 5634e 6539e from table we can make an important observation as the the message loss rate increases or decreases from the deviation between the predicted numbers and the actual number increases.
to further test these observations we perform the same perturbation analysis pivoted at and message loss rates and compare three sets of experimental data.
the results demonstrate that the perturbation bounds provide better predictions when the perturbation distance of message loss rate is small.
we also depict the relationship between the address collision probability and thetable nonuniform lep models veri cation results and condition numbers roundmodelprobability c.n.states transitions .
.
.
.
.
.
.
.
.
.
.
.
.
.
condition number to the number of hosts a graph which is depicted in figure .
.
nonuniform leader election protocol we imagine a real world game of leader elections the game is carried out according to the synchronous leader election protocol lep but the assumption that all participants have a uniform probability distribution for selection of id tokens is dropped.
nonuniform id selection distributions are realistic because the participants are allowed to strategize to maximize their chance to be the leader.
for simplicity we assume that the selection distribution for each participant is the same in each round of a game.
since the distributions are unknown in the rst place we conduct the game multiple times to estimate the selection distributions for participants based on their choices each time.
the problem that interests us is what is the average probability p that a leader is selected in rrounds?
since the id selection distributions are statistical estimations it is important to know the perturbation bounds for p. we also want to evaluate the relationship between the bounds and the number r of rounds.
we specify a concrete leader election game in prism with six participants and four id tokens.
we randomly choose six nonuniform id selection distributions and assume one of the six is perturbed.
the perturbation distance for the perturbed selection distribution is measured by the norm of total variance.
the model speci cation contains a variable round bounded by a constant number to count the number of rounds in the game and a boolean variable elected to indicate whether a leader is elected.
the property formula p ?
where ris round r u elected expresses the probability of electing a leader within rrounds.
since ris not a proposition logical formula we need to construct a shadow model and proceed as described above.
table summarizes information about the original model and shadow model which have the same numbers of states and transitions when ris varied from to .
also shown in the table is the dependence of the leader election probability and the condition number on the value of r. table presents the perturbation analysis data which compare the values of the actual maximal perturbations and those predicted by the condition number and the quadratic bounds up to perturbation distance in both the positive and the negative directions for r .
table shows again that perturbation bounds provide accurate predictions of the e ect caused by small perturbations.
.
nand multiplexing multiplexing is a technique of building more reliable components from less reliable ones.
figure depicts an imper 318table election probabilities and bound predictions for r c.n.
and q.b.
perturbationactual predicted c.n.
predicted q.b.
upper lower upper lower upper lower .
.
.
.
.
.
.
.
.
.
.
.
.
fect nand gate and a nand multiplexer.
the nand multiplexer is devised by replicating the nand gate ktimes.
since the multiplexer is a component of a system that may contain other unreliable components the inputs for the multiplexer are two bundles of klogical values representing a simulated result or representing a non simulated result as determined by a probability distribution.
the functionality of the u unit is to randomly choose two input values as the inputs for the nand gates.
it is assumed that the nand gates have the same error rate and that they fail independently.
whether the overall output of the multiplexer is stimulated or not depends on the number of stimulated outputs of the nand gates.
more speci cally we specify a small value .
then the overall output of the multiplexer is considered to be stimulated if at least k of the outputs of the nand gates are stimulated and nonstimulated if no more than k of them are stimulated.
in the case that neither of the two conditions is satis ed the overall output is undecided.
the nand multiplexer speci ed in prism has two probability parameters pinptfor the original stimulated input andpnand for the error rate.
we analyze the consequence of perturbations to pinptandpnand on the probability of an overall stimulated or non stimulated value for the multiplexer.
in our experiment we take k and .
tables and provide experimental data corresponding to the perturbations of pinptandpnand respectively.
again similar to the previous two case studies we observe both non trivial variations on the intended veri cation and accurate predictions if the input distribution or the error rate are perturbed slightly.
.
discussion overall our case studies re ect that small perturbations of some transition probabilities in the stochastic system models can cause some non trivial e ects on the intended verication and that condition numbers and quadratic bounds can provide su ciently accurate predictions for the maximal variations of veri cation results.
as demonstrated by u k k k figure nand multiplexingtable input perturbations and bound predications pivoted at pstin 9withpnand c.n.
and q.b.
input actual predicted c.n.
q.b.
.
.
.
.
.
.
.
.
.
table error rate perturbations and bound predications pivoted at pnand 01withpstin c.n.
and q.b.
error rate actual predicted c.n.
q.b.
.
.
.
.
.
.
.
.
.
the experimental data our method can improve the exibility of the standard probabilistic model checking technique so that the model builder can better verify whether the system model satis es its requirements in the presence of small perturbations of some quantities.
.
related work perturbation theory for applied mathematics investigates solutions for mathematically formulated problems that involve parameters subject to perturbations .
direct solutions for those problems such as solving equations with perturbed parameters are impossible or impractical to nd.
perturbation analysis provides asymptotic methods to approximate the true solutions.
the present paper demonstrates the merit of adopting a perturbation point of view in the veri cation of empirical stochastic systems and presents319an asymptotic method for computing perturbation bounds for automata based probabilistic model checking.
there exists a line of research works on perturbation analysis of mcs the common goal of which is to nd a suitable condition number for the distance of steady states and the distance of transition matrices between two mcs .
in those works the inequality holds universally for all mcs according to the mathematical properties of the chosen condition numbers and distance metrics instead of by asymptotic numerical computation.
quantitative veri cation of markov models with various formulations of uncertainty is a recently active research eld of formal methods.
an abstract mc with undetermined transition probabilities can be interpreted as a set of concrete mcs and is called an uncertain markov chain umc .
pctl model checking of umcs amounts to the search of a concrete mc belonging to a umc such that a pctl formula is satis ed.
sen et al.
proved that the computational complexity of this problem is np hard.
alternatively an undetermined mc can be interpreted as a markov decision process mdp with a possibly in nite set of actions and is called an interval markov chain imc .
pctl model checking of imcs accommodates the optimization strategy involved in pctl model checking of imcs.
puggelli et al.
presented a method based on convex programming for pctl model checking of mdps and showed that the computational time bound is pseudo polynomial.
by contrast benedikt et al.
considered the ltl model checking problem for imcs which they de ned as the search for an mc belonging to an imc such that probability of satisfying an ltl formula is optimal.
one key di erence between our pmc model in this paper and the umc and imc model is that we assume the perturbation distances of vector variables measured by a speci c metric are tiny but not specifying their boundaries in the rst place.
our approach is also related to symbolic and parametric probabilistic model checking proposed by daws .
in his approach concrete or abstract transition probabilities in his version of parametric mcs are viewed as letters in an alphabet of a nite automaton.
as such the probability measure of a set of paths satisfying a formula is computed symbolically as a regular expression on that alphabet which is further evaluated to its exact rational value if the transition probabilities are rational symbolic expressions of variables.
hahn et al.
improved the approach of daws for reachability checking namely pctl formulas without nested occurrences of the probabilistic operator by carefully intertwining the computation procedure and evaluation procedure of daws.
by de nition their parametric variants of mcs are more general than ours because they allow abstract transition probabilities to be expressed by rational symbolic expressions.
besides the di erent motivations between our approach and theirs methodologically they push the symbolic computation to an extreme while we calculate numbers in symbolic expressions numerically and adopt an asymptotic method from perturbation theory.
another related approach is approximation model checking based on interval and a ne arithmetic proposed by ghorbal et al.
which pursues rigorous bounds for veri cation results of dtmcs belonging to a umc.
although not stated explicitly their method actually does not rely on the boundary of the umc and thus is similar to the aforementioned parametric model checking approach.our work is complementary to the research work on probabilistic model parameter estimation and model repair involving probabilistic model checking in general terms they followed a reversed direction of model checking and estimated a parameter in the model or modify the model in a speci c way with respect to a given temporal property.
there also have been attempts to investigate perturbation errors for realtime systems in which perturbations are applied to the time parameters .
.
conclusions we have argued for the practical merits of a rigorous method to reveal the consequences of perturbed quantities in a stochastic model on its veri cation.
our main technical contribution in this paper is a method for computing condition numbers and quadratic perturbation bounds for automata based probabilistic model checking.
we also presented an evaluation to demonstrate the utility and accuracy of those bounds.
future research directions for our work fall into two work categories.
the rst work category includes the tool support and applications of our approach.
the prototype implementation we developed is for experimentation purposes but a more sophisticated self contained toolkit is an important part of our further work.
we also plan to apply our approach to areas of software engineering such as software reliability analysis in which perturbations of system parameters might a ect analysis results.
the second work category includes various topics of theoretical and methodological enhancements for our approach.
two immediate topics stretched from this paper are the mathematical relationship between the computed quadratic bounds and the de nition of second order perturbation bounds and the accommodation for pmcs with multiple perturbed vector variables.
also it is desirable to leverage our perturbation analysis for pctl formulas including those with nested probabilistic operators which are incompatible with !
regular properties.
furthermore it is important to extend our perturbation analysis to account for model characteristics such as rewards non determinism and transition rates.
the last interesting topic listed here is the incorporation of more advanced metrics widely adopted for problems in some speci c domains such as the kullback leibler divergence from information theory into our approach.
.