symbolic assume guarantee reasoning through bdd learning feihe tsinghuauniversity chinabow yawwang academiasinica taiwanliangzeyin tsinghuauniversity china leizhu tsinghuauniversity china abstract both symbolic model checking and assume guarantee reasoningaimtocircumventthestateexplosionproblem.
symbolic model checking explores many states simultaneously andreportsnumerouserroneoustraces.
automatedassumeguarantee reasoning on the other hand infers contextual assumptionsbyinspectingspuriouserroneoustraces.
one would expect that their integration could further improve thecapacityofmodelchecking.
yetexaminingnumerouserroneoustracestodeducecontextualassumptionscanbevery time consuming.
theintegrationofsymbolicmodelchecking andassume guaranteereasoningisthusfarfromclear.
in this paper we present a progressive witness analysis algorithmforautomatedassume guaranteereasoningtoexploit amultitudeoftracesfrombdd basedsymbolicmodelcheckers.
ourtechniquesuccessfully integratessymbolicmodel checking with automated assume guarantee reasoning by directlyinferringbdd sasimplicitassumptions.
itoutperformsmonolithicsymbolicmodelcheckinginfourbenchmark problemsandanindustrialcasestudyinexperiments.
categoriesandsubjectdescriptors d. .
software programverification f. .
specifyingandverifyingandreasoningaboutprograms generalterms verification reliability keywords softwaremodelchecking symbolicmodelchecking assumeguaranteereasoning algorithmiclearning safety .
introduction theadventofmulti coreprocessorsnotonlyimprovesthe efficiency of computing but also increases the complexity permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bearthisnoticeandthe fullcitationonthefirstpage.
tocopyotherwise to republish topostonserversortoredistributetolists requirespriorspecific permission and or a fee.
icse may june hyderabad india copyright acm ... .
.of programming.
intricate interactions among concurrent processesoftenincurunexpectedfaultyprogrambehaviors eludingprogrammers inspection.
programverificationhence playsanevenmoreimportantroleduringsoftwaredevelopment.
model checking is a program verification technique thatautomaticallyanalyzesthecorrectnessofprogramsby formalmathematicalreasoning .
inmodelchecking programmersspecifyamodelforthe systemunderverification andaformalpropertyaboutintendedsystembehaviors.
amodelcheckerverifiesthemodel againstthepropertybyexploringallsystembehaviors.
ifany behavior does not fulfill the intended property the model checker will report it.
otherwise the model satisfies the propertyconclusivelysincethereisnoviolation.
exploring allbehaviorscanbeveryexpensivecomputationallysince thenumberofsystemstatescangrowexponentiallyinthe numberofsystemcomponents.
thestateexplosionproblem greatlyimpedestheeffectivenessofmodelchecking.
symbolicmodelchecking1isawell knowntechniquefor amelioratingthestateexplosionproblem .
insymbolic model checking system states are implicitly represented by predicates as well as the initial states and transition relationofthesystem.
usingdatastructuressuchasbinary decision diagrams bdd s a large number of states are explored simultaneously by standard predicate operations conjunction disjunction quantifierelimination etc .
since itisnolongernecessarytoenumeratestatesoneatatime thestateexplosionproblemcanbealleviated.
byseparatingconcernsofsoftwarefunctionality componentbased designs improve reusability and quality of software systems .
incomponent basedsoftwareengineering a softwaresystemiscomposedofseveralcomponentsofdifferentfunctionality.
wheneachsoftwarecomponenthasclearly specifiedfunctionsandinterfaces itsreusabilityisimproved.
timeofdevelopingsoftwaresystemsissubsequentlyreduced.
incidentally theseparationofconcernsisnotonlyfoundin softwaredevelopmentbutalsoverification.
assume guaranteereasoningisatechniquetoimprovethe capacityofmodelchecking.
inassume guaranteereasoning oneverifieswhethereverycomponentbehavescorrectlyundercertaincarefullychosencontextualassumptions .
if so the system of components is correct by the soundness of assume guarantee reasoning.
since each component is verifiedagainstcontextualassumptionsseparately thestate explosionproblemcanbeavoided.
choosingcontextualassumptions however is not easy.
oftentimes programmers 1by symbolic we mean bdd based techniques unless statedotherwise.permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
copyright is held by the author owner s .
publication rights licensed to acm.
icse may june hyderabad india acm havetoprovidecontextualassumptionsmanually.
suchlaborioustasksareverytimeconsumingandcanbeextremely difficulttocarryoutonlargesystems.
in order to address the assumption generation problem machinelearningisappliedtoinfercontextualassumptions.
in thel learningalgorithm forregularlanguages isadoptedtosolvetheassumption generationproblem.
insteadofprogrammers oneemploys thel learningalgorithmtocontrivecontextualassumptions under the supervision of a mechanical teacher.
when the l learning algorithm purports a contextual assumption oneperformsassume guaranteereasoning.
ifthecontextual assumption is strong enough to establish the correctness ofthesystem wearedone.
otherwise themodelchecker reportsanerroneousbehaviorunderthepurportedcontextual assumption.
whenthecontextualassumptionisoverlyweak thereportedbehaviormaynotbeavalidsystembehavior.
themechanicalteacherhastocheckiftheerroneousbehavior isvalid.
ifnot themechanicalteacheranalyzesthespurious erroneous behavior and guides the learning algorithm to revisethenextcontextualassumption.
both symbolic model checking and automated assumeguaranteereasoningaimtocircumventthestateexplosion problem.
one wonders if their integration can further improve the capacity of model checking.
on closer examination it is not hard to see that an effective integration is notstraightforward.
first thel learningalgorithmrepresentscontextualassumptionsexplicitly.
convertingexplicit contextualassumptionstoimplicitrepresentationsinduces overheads.2second whenapurportedcontextualassumptionfailstoverifythesystem asymbolicmodelcheckerin fact gives numerous erroneous behaviors.
the mechanical teacherhastoanalyzelotsofbehaviorstosuperviselearning algorithms.
sinceitisinfeasibletoenumerateallimplicitly represented behaviors it is unclear how to extract necessaryinformationtoinferpurportedcontextualassumptions efficiently.
third alearningalgorithmpurportsanewcontextualassumptionafterreceivingaspuriousbehaviorfrom themechanicalteacher.
themechanicalteacheractuallypossessesanumberofspuriousbehaviorsaftersymbolicmodel checking.
efficientlypassingnumerousspuriousbehaviorsto thelearningalgorithmisnotatallobvious.
amoresophisticatedmechanismwhichtakesfulladvantageofsymbolic modelcheckingiscertainlydesirable.
inthispaper wepresentaprogressiveanalysisalgorithm totakeadvantageofbothsymbolicmodelcheckingandautomatedassume guaranteereasoning.
whenspuriousbehaviorsareobtained themechanicalteacherguidesthelearning algorithmtoremoveaspuriousbehaviorfromcontextualassumptions.
whenthelearningalgorithmpurportsarevised contextualassumption ourprogressivealgorithmchecksif previousspuriousbehaviorsareeliminatedinthenewcontextual assumption.
if not another spurious behavior is returnedtoguidethelearningalgorithmtothenextrevision.
onlywhenallspuriousbehaviorsareaccountedfor canthe verificationalgorithmproceedtoperformassume guarantee reasoning with the purported contextual assumption.
observethatassume guaranteereasoningisappliedonlywhen knownspuriousbehaviorsareeliminated.
ourprogressive approachhenceminimizestheinvocationofmodelcheckers 2implicitlearningattemptstoaddresstheproblem but other problems peculiar to symbolic model checking remain.and maximizes the utility of the information in implicitly representedspuriousbehaviors.
ourtechnicalcontributionsaresummarizedasfollows.
we adoptabdd learning algorithm to generate implicit contextual assumptions in our fully symbolic technique.
differentfrom weimplementtheclassificationtree basedbddlearningalgorithm inour symbolicassume guaranteereasoningtechnique.
weproposeaprogressiveanalysisalgorithmforthemechanicalteacherinautomatedassume guaranteereasoning.
thenewalgorithmtakesadvantageofimplicitly representedbehaviorsfromsymbolicmodelcheckers.
it enablestheintegrationofsymbolicmodelcheckingand automatedassume guaranteereasoningtoameliorate thestateexplosionproblem.
we compare our new technique with the monolithic symbolic model checkernusmv2.
.
.
experimental results show that our technique outperforms monolithicmodelcheckinginfourbenchmarkproblems mini rubik scube rubik scube diningphilosophers anddiningcryptographers .
ourcompositionaltechnique moreover improves both time and space in an industrialgatecontrolsystem.
thepaperisorganizedasfollows.
wereviewrelatedwork in section .
after preliminaries section automated assume guaranteereasoningwithimplicitlearningisbriefly reviewedinsection4.
section5presentsourtechnicalcontribution.
itisfollowedbyexperimentalresults section6 .
finally weconcludeourpresentationinsection7.
.
relatedwork automatedassume guaranteereasoningisproposedin .
the authors apply thel algorithm to generate explicit deterministicfiniteautomataascontextualassumptions .
severaloptimizationsforthel algorithmareavailable .
a tree based contextual assumption generation algorithmisalsodevelopedin .
interfacesynthesis bylearningisreportedin .
predicateabstractionhas beenusedtorepresentsoftwarestatespacesymbolically butderivingsymbolicrepresentationsoftransitionsis different.
indeed contextualassumptionsinferredbythese techniques are still represented explicitly.
converting explicitcontextualassumptionstobdd sforsymbolicmodel checkingcaninduceoverheads.
inferringexplicitcontextual assumptionsisnotoptimalforsymbolicmodelchecking.
learning implicit contextual assumptions based on the cdnfalgorithm isproposedin .
thework comparesthecdnfalgorithmandthel basedbddlearning algorithm inthecontextofassume guaranteereasoning throughimplicitlearning.
ratherthanbdd basedsymbolic model checking both works employ a sat based symbolicmodelchecker.
sincesat basedsymbolicmodel checking reports only one erroneous behavior the simple witnessanalysisalgorithmsuffices.
ontheotherhand our progressive algorithm is designed to analyze numerous erroneous behaviors.
it enables programmers to deploy a bdd basedsymbolicmodelcheckerinautomatedassumeguaranteereasoning.
additionally weimplementtheclassificationtree basedbddlearningalgorithm .
thenew algorithmisasymptoticallymoreefficientthanthel based learningalgorithmimplementedin byalinearfactor.1072the symbolic compositional verification technique in isonlyrelevantinappearance.
basedonthel learning algorithm the symbolicl algorithm uses bdd s to encodeinputsymbolsontransitionsofcontextualassumptions.
states of contextual assumptions however are still represented explicitly.
converting semi symbolic contextualassumptionsforsymbolicmodelcheckingmayinduce overheads.
moreover thesymbolicl algorithminfersdeterministic contextual assumptions in a partially implicit representation.
ourtechniqueadoptsabddlearningalgorithmandinfersnondeterministiccontextualassumptionsin bdd s afullyimplicitrepresentation.
finally somedrawbacksofautomatedassume guarantee reasoningwiththebasicl algorithmarediscussedin .
manyissueshavebeenaddressedinvariousoptimizations ofthebasicalgorithmsincethen .
we adopt a bdd learning algorithm and infer contextual assumptionsimplicitly.
observationsin nolongerapply.
moreover thework comparescompositionalreasoning withmonolithicverificationwithinenumerativemodelchecking acontextverydifferentfromsymbolicmodelchecking.
.
preliminaries letb ff tt be theboolean domainwith thetruth values ffandtt.
for a set xof boolean variables define x x x x and x x x x .
avaluationover xis a mapping from xtob.
we writeval xfor the set of valuationsover x. apredicate x or whenthevariables xare clear from the context is a boolean function over thebooleanvariables x. forapredicate andavaluation s val x ssatisfies writtens if evaluatesto tt byassignings x tox x. similarly apairofvaluations s t val x val xsatisfiesa predicate x x written s t if evaluatesto ttbyassignings x andt x to x xandx x respectively.
wewrite forthesetof satisfyingvaluationsforthepredicate namely s val x s .
apredicate isatautology written if s foreveryvaluations val x. reducedandorderedbinarydecisiondiagrams bdd s are arepresentationforpredicates.
foranypredicate wewrite bdd for the bdd representing .
the representation is canonical in the sense that bdd bdd if and only if .
for instance consider x x 0and x x .
thenbdd bdd sinceboth and aretautologies.
booleanoperationsandquantificationare allowedinbdd s. onecancompute bdd bdd bdd bdd x. andbdd x. frombdd andbdd foranypredicates andvariablex x. atransition systemm x consists of a set xof booleanvariables aninitial predicate x andatransition predicate x x .
anx stateis a valuation over x. an x statesism initialifs .
a pair s t of x states is called anm transitionif s t .
if s t is anmtransition tisanm successorofs.
anm traceisasequence ofx statessuchthats 0ism initialand si si isanm transitionfori ... n .
wewrite tr m forthesetofm traces.
an x statesism reachable ifthereisanm traceendingins.
foranypredicate a sequence ofx statessatisfies written ifs i fori ... n. we saymsatisfies writtenm if forevery tr m .
letm x beatransitionsystemand apredicate.
theinvariant checkingproblem is to decide whethermsatisfies .
amodel checkersolves the invariant checking problembyexploringm reachablestatesandstoringthem inpredicates.
whenmdoesnotsatisfy amodelchecker returns a sequence of predicates that .
s everyx statein ism initial .
x.sk anx statein doesnotsatisfy and .for every i k s i x.si x x x everyx statein isanm successorofan x state in .
the sequence is called awitnesstom .3for a transition systemm x and a witness tom anm trace is representedin ifsi siforevery0 i k. for any witness tom there is anmtrace representedin suchthat .
note thatawitnessrepresentsasetofm traces.
letm i xi i i betransitionsystemsfori xi s are not necessarily disjoint .
the compositionm m1 x isatransitionsystemwhere x x0 x1 1 and 1. theprojections yof anx stateson y xisay statesuchthats y y s y fory y. the projection yofasequence ofx states ony xis the sequence ofy states.
notethat tr m0 m1 ifandonlyif x0 tr m0 and x1 tr m .
letm x be a transition system.
a transition systemn x simulatesm writtenm n if and .
inotherwords nsimulatesmif everym initial x stateisn initial andeverym transition isalsoann transition.
aproof ruleis of the form 0 1 k where 0 ... karethepremisesoftheproofrule and isits conclusion.
aproofruleissoundifitsconclusionholdswhen itspremisesarefulfilled itisinvertibleifitspremisescan befulfilledwhenitsconclusionholds.
theorem .
letm i xi i i be transition systems fori x x0 x1 and x a predicate.
the following proof rule is sound and invertible m1 a m a m0 m1 intheproofruleoftheorem1 thetransitionsystemais calledacontextual assumptionofm .
.
implicitlearningframework in automated assume guarantee reasoning through implicit learning a learning algorithm for predicates is usedtogeneratecontextualassumptionsautomatically.
in thissection wereviewbddlearningandtheframeworkof assume guaranteereasoningwithimplicitlearning.
.
learningbdd s letf x beanunknowntargetpredicate.
abddlearning algorithminfers bdd f bymakingqueries.
itassumesa 3most model checkers only report sequences of states for debuggingpurposes butsuchwitnessesareinfactcomputed.1073isequivalent x x x equivalence resolutionmembership resolution ismember a s membership resolution ismember a s t learner amem a s yes no eq a bdd yes smem a s t yes no eq a bdd yes s t learner a figure implicit learning frameworkyesifs fmem s nootherwise eq bdd h yesifbdd f bdd h cewithce f hotherwiselearning algorithmteacher figure angluin s learning model teacherwhoknowsthetargetpredicatefandanswersthe followingtypesofqueries figure1 membership queries mem s withs val x. ifs f the teacher answers yes otherwise the teacher answersno.
equivalence queries eq bdd h with aconjecture bdd h x .
ifbdd f bdd h the teacher answersyes.
otherwise theteachersendsacounterexample ce val xsuchthatce f hwhere isthe exclusive oroperator.
amembershipquery mem s asksiftheunknowntarget predicatefevaluatesto ttunderthevaluations val x. an equivalencequery eq bdd h ontheotherhand purports aconjecturehandasksif bdd f bdd h .
recallthat bdd s are canonical.
when bdd f bdd h f h. hence there is a valuationce val xsuch thatfandh evaluate to different truth values.
in other words f h evaluatesto ttunderacertaince.
theteacherreturnssuch avaluationceasacounterexampletotheequivalencequery.
since the number of predicates over xis finite any unknown predicate can be inferred by enumeration.
for instance onecanobtainthetruthtableoftheunknowntarget predicatebyasking2 x membershipqueriesandgeneratethe bddaccordingly.
thenaivebddlearningalgorithmhoweverrequiresanexponentialnumberofmembershipqueries inthenumberofbooleanvariables.
remarkably itisshown thatthebddofanarbitrarytargetpredicatecanbelearned withinalinearnumberofequivalenceandaquadraticnumber ofmembershipqueriesinitssize.theorem .
for any unknown target predicate f x one can infer bdd f with at mostnequivalence queries and2n lgm 3n membership queries wherenis the size of bdd f andmis the number of boolean variables inx.
.
implicitlearning thebasicideaofimplicitlearningistoguidethelearning algorithmtoinfertheinitialandtransitionpredicatesofa contextualassumption .
sinceacontextualassumption consists of two predicates two instances of the bdd learning algorithm are deployed.
the instance learner a inferstheinitialpredicateofacontextualassumption and theotherinstance learner ainfersitstransitionpredicate.
bothinstancesmakemembershipandequivalencequeriesto amechanicalteacher.
figure2showstheimplicitlearning framework.
for clarity subscripts are used to differentiate queries from the two learners in the figure learner a makesmembershipquery mem a s andequivalencequery eq a bdd andlearner amakes membership query mem a s t andequivalencequeryeq a bdd .
foramembershipquery mem a s themechanicalteacher checksifthevaluationssatisfiestheinitialpredicateofm .
if so the mechanical teacher answers yes.
otherwise it answersno.
conceptually the mechanical teacher uses theinitialpredicateofm 1astheunknowntargetpredicate algorithm1 .
ifnoothercontextualassumptionisfound learner awilleventuallyinfertheinitialpredicateofm .
m x 1 1 input s val x1 avaluation output yesorno ifs 1thensendyeselsesendno algorithm ismember a s similarly membershipqueriesfrom learner aareresolved byusingthetransitionpredicateofm 1astheunknowntarget predicate algorithm .
again learner awill infer the transitionpredicateofm 1eventuallyifnoothercontextual assumptionisfound.
observethatmembershipqueriesfrom thelearnersareresolvedseparately.
synchronizationisnot neededbetweenmembershipqueryresolutionalgorithms.
equivalencequeries ontheotherhand requiresynchronization.
assumethat learner amakesanequivalencequery eq a bdd .
the mechanical teacher has to answer whetherbdd representstheinitialpredicateofacontex 1074j no no j j 1remove spurious transitions between algorithm and compute sj 1remove spurious states from algorithm and compute s0 j k?
?yesspurious states are removed apply assume guarantee reasoning algorithm yes m0 m no yes figure overview of progressive witness analysis m x 1 1 input s t val x1 valuations output yesorno if s t 1thensendyeselsesendno algorithm ismember a s t tualassumptiona.
todoso itneedstocheckifthepremises m1 aandm a hold.
themechanicalteacherneeds the transition predicate of the contextual assumptiona in order to check the premise.
hence the eq a bdd fromlearner acannotberesolvedwithouttheconjecture bdd x1 x ineq a bdd fromlearner a. similarly theeq a bdd fromlearner acannotberesolved withouttheconjecture bdd x1 ineq a bdd from learner a. resolvingeitheroftheequivalencequeriesmust besynchronizedwiththeother.
subsequently thereisbut oneequivalencequeryresolutionalgorithminthemechanical teacher.
whentheequivalencequeryresolutionalgorithmreceives the querieseq a bdd andeq a bdd from the learners themechanicalteacherconstructsapurportedcontextualassumptiona x1 andchecksifa 1can serveasacontextualassumption algorithm3 .
thealgorithmfirstverifiesifa 1simulatesm .
ifnot acounterexampleissentto learner aorlearner a. ifa 1simulates m1 algorithm3theninvokesamodelcheckertoverifythe premisem a .
if the premise is also fulfilled the proof rule in theorem applies.
by the soundness of the proof rule the mechanical teacher reports m m1 .
otherwise awitness tom a isobtained from the model checker.
recall thatm a .
isnotnecessarilyawitnesstom m1 .
particularly the witness may represent anm a trace thatdoesnotsatisfy eventhoughm m1 .
further analysisisrequiredforthewitnesstom a .
m i x i i i fori 1andx x x1 input x aninitialpredicate x x a transitionpredicate output m m1 awitnesstom m1 a counterexampletoeq a bdd ora counterexampletoeq a bdd a x ifs then sendsasthecounterexampletoeq a bdd receiveanequivalencequeryeq a bdd returnisequivalent if s t then send s t asthecounterexampleto eq a bdd receiveanequivalencequeryeq a bdd returnisequivalent ifm a then report m m1 let beawitnesstom a returnanalyzewitness a s0 s1 ... s k algorithm isequivalent .
analyzingsymbolicwitnesses inordertodescribewitnessanalysis weidentifyinvalid behaviors.
letabe a purported contextual assumption.
anm a initialstateisspuriousifitisnotm m1 initial andanm a transitionisspuriousifitisnotanm m1transition.
similarly anm a traceisspuriousifitisnotan m0 m1 trace andanm a reachablestateisspuriousifit isnotm m1 reachable.
consideratrace tr m0 a suchthat .
then x0 tr m0 and x1 tr a .
let x1 .
ifs 0ism1 initialand s i si is anm transitionforevery0 i n then x1isinfactan m1 trace.
weconcludem m1 .
if forinstance s s4 is not anm transition then s s4 is a spuriousa 1transition.
weshouldreturn s s4 asacounterexampleso thatthelearningalgorithmremovesthespurioustransition fromfutureconjectures.
sinceonlyonetraceisinspected wecallthisprocedurethesimple witness analysisalgorithm.
in a sat based symbolic model checker is used1075to verify the premisem a .
since a sat based symbolicmodelcheckerreturnsonlyonetraceasawitnessto m0 a thesimplewitnessanalysisalgorithmapplies.
similarly the simple algorithm suffices when an explicit modelcheckerisused .
the situation becomes slightly more complicated if the mechanicalteacherusesasymbolicmodelchecker.
inthis case awitnesstom a representsanumberoftraces ingeneral.
themechanicalteachercouldpickanarbitrary m0 a traceinthewitnessandanalyzethetraceasbefore.
lotsofinformationinthewitnesshoweverwouldbewasted.
consider forinstance spurioustransitionsofdifferenttraces representedinawitness.
sinceonlyonetraceisinspectedby themechanicalteacher aspurioustransitionoftheinspected traceisreturnedasacounterexample.
spurioustransitions inothertracesmaystillremaininthenextconjecturefrom thelearningalgorithm.
theymayagainappearinanother witness when the mechanical teacher checks the premises with the next purported contextual assumption.
this is clearlyawasteofcomputationresources.
ontheotherhand examiningalltracesinawitnessisby nomeansstraightforward.
awitnessrepresentsnumerous traces.
itisinfeasibletoinspectalltransitionsinalltraces iteratively.
moreover bdd learning algorithms take but one counterexample for each equivalence query.
yet the mechanicalteacheralreadyhavenumerouscounterexamples fromspurioustransitionsaftersymbolicmodelchecking.
it isunclearhowonemayconveyallthesecounterexamplesto bddlearningalgorithmseffectively.
thesequestionsmust beaddressedproperlyinordertointegratesymbolicmodel checkingwithautomatedassume guaranteereasoning.
weproposetoanalyzespurioustracesprogressively.
given awitness tom a ourprogressivewitnessanalysisalgorithmworksasfollows figure3 .
first the algorithmobtainsapredicate s0byeliminatingallspurious m0 a initialstatesfrom .
theset thuscontains m0 m1 reachablestates.
inductively assumethatthealgorithmhasobtainedthepredicate sjbyeliminatingallspuriousm a reachablestatesfrom .
theset hence containsonlym m1 reachablestates.
thewitnessanalysis algorithm checks if is empty.
if so all known spuriousm a traces are eliminated.
the mechanical teacher applies the assume guarantee reasoning proof rule in theorem1withthepurportedassumptiona.
otherwise the algorithmobtainsapredicate sj 1byeliminatingallspuriousm a transitions.
theset hencecontainsonly m0 m1 reachablestates.
whenthesequenceofpredicates isfinallyobtained theset containsonly m0 m1 reachablestates.
if containsastatenotsatisfying thesequence isindeedawitnessto m0 m1 .
wenowgivedetailsoftheprocedurethateliminatesspurious initial states.
algorithm returns a revised initial predicate x1 for the purported contextual assumption a x1 whichremovesspuriousm a initialstates from .
conceptually algorithm considers the purported contextual assumption a x1 in the while loop.
thecontextualassumption aisinitializedtoa.
in eachiteration wehavean x stateusuchthatu but u 1. the stateu is a spuriousm a initial state.
algorithm then sendsu x1as a counterexample toeq a bdd .
informally thecounterexampleu x1informslearner athattheconjecture bdd isincorrectat m i x i i i fori 1andx x x1 input x apurportedcontextualassumption s x apredicate output x1 aninitialpredicate whileu 0 sdo a x is the purported contextual assumption sendu x1asthecounterexampletoeq a bdd receiveanequivalencequeryeq a bdd end return algorithm updateinit x s thevaluationu x1.
afterreceivinganewequivalencequery eq a bdd algorithm4considersthenewpurported contextualassumption x inthenextiteration.
whenthealgorithmreturnsaninitialpredicate wehave 1andhence .
that is everym a initialstateisalsom m1 initial.
notethat adoesnotnecessarilysimulatem .
lemma1summarizes updateinit x s algorithm4 .
lemma1.letm i xi i i be transition systems for i 1and x x0 x1.
if x1 is returned by updateinit x1 s algorithm then .
the mechanical teacher eliminates spurious transitions from reachable states in a similar manner.
algorithm returnsarevisedtransitionpredicate x1 x forthepurportedcontextualassumptiona x1 whichremoves spuriousm a transitionsbetween and .
conceptually algorithm5considersthepurportedcontextualassumptiona x1 inthewhileloop.
atfirst thecontextual assumptionaisa.
ineachiteration wehaveatransition u v suchthat u v but u v 1. them a transition u v between and isspurious.
algorithm5thensends u x1 v x1 asacounterexampleto eq a bdd .
thecounterexample u x1 v x1 effectively informsthelearningalgorithmthattheconjecture bdd is incorrectatthevaluation u x1 v x1 .
afterreceivinganother equivalencequery eq a bdd algorithm5considers thenewpurportedcontextualassumption x1 inthe nextiteration.
whenthealgorithmreturnsatransitionpredicate we have 1and hence r s x .
that is everym a transition between and isalsoanm m1 transition.
notethat adoesnotnecessarilysimulatem .
thefollowinglemma summarizesupdatestep x r s algorithm5 .
lemma2.letm i xi i i be transition systems for i 1and x x0 x1.
if x1 x is returned by updatestep x1 r s algorithm then r s x .
we are ready to give details of our progressive witness analysisalgorithm.
thewitnessanalysisalgorithmproceeds bystages algorithm6 .
leta x1 beapurported1076 m i x i i i fori 1andx x x1 input x apurportedcontextualassumption r x s x predicates output x1 x atransitionpredicate while u v 0 r s x do a x is the purported contextual assumption send u x1 v x1 asthecounterexampleto eq a bdd receiveanequivalencequeryeq a bdd end return algorithm updatestep x r s contextualassumptionwithm a and awitnesstom a .
thewitnessanalysisalgorithm first invokes updateinit a s0 algorithm to find an initialpredicate x1 .
define 0 a x1 0 and s0 0 s0.
bylemma1 everym a0 initialstatein ism m1 initial.
thefollowinglemmasummarizesthe firsttwolinesofalgorithm6.
lemma3.letm i xi i i be transition systems for i 1and x x0 x1.
right after line of algorithm we have .
s0 x s x and .
everyx state in ism m1 reachable.
m i x i i i fori 1andx x x1 input a x apurportedcontextual assumption awitness tom a output m m1 awitnesstom m1 a counterexampletoeq a bdd ora counterexampletoeq a bdd updateinit a s0 algorithm4 s0 0 s 0 forj 0tok 1do4 aj x j if sjthen returnisequivalent j algorithm3 else j updatestep a j sj sj algorithm5 sj x.
0 x0 x0 j x1 x1 sj x s j end end12 if x. sk then report else returnisequivalent k algorithm3 algorithm analyzewitness x s s1 ... s k atstagej wehaveobtainedaset ofm m1 reachable statesandapurportedcontextualassumptiona j x1 j .thewitnessanalysisalgorithmeliminatesspuriousm ajtransitionsfrom byinvoking updatestep aj sj sj algorithm5 .
itthusobtainsatransitionpredicate x1 x .
define j aj x1 j andsj x.
0 x0 x0 j x1 x1 sj x s j .
by lemma everym aj transitionbetween and isalso anm m1 transition.
hence consists ofm m1reachablestates.
thewitnessanalysisalgorithmthenproceedstothenextstage.
thefollowinglemmasummarizes aniterationoftheforloopatline4ofalgorithm6.
lemma4.letm i xi i i be transition systems for i 1and x x0 x1.
at line of algorithm we have .
sj x s j x and .
everyx state in ism m1 reachable.
bylemma3and4 ... isasequenceof m0 m1 reachablex states.
therearetwoscenarios is empty for some j k. cannotbeawitnesstom m1 .
recallthatthe purportedcontextualassumptiona jdoesnotnecessarilysimulatem .
thewitnessanalysisalgorithminvokes algorithm3tocheckifa jcanserveasacontextual assumption line7 algorithm6 .
noneof ... isempty.
algorithm6 checks whether there is an x state in violating thepredicate .
ifso isawitnessto m0 m1 .
otherwise thewitnessanalysisalgorithm invokesalgorithm3tocheckifa k x1 k canbe acontextualassumption line13 algorithm6 .
note that the witness analysis algorithm does not performmodelchecking.
itinsteadrevisespurportedcontextual assumptionsbyinspectingthewitnessprogressively.
only when all known spurious initial states and transitions are accountedfor canassume guaranteereasoningbeperformed withpurportedcontextualassumptions.
alsonotethatpurportedcontextualassumptionsarenotincreasinglystronger.
thelearningalgorithmhasnoinformationaboutunqueried m1 transitions.
itisfreetoincludesuchtransitionsarbitrarily.
the relation between successive purported contextual assumptionsisthusverydifferentfromthoseofcounterexampleguidedabstractionrefinement .
theorem soundness .
letm i xi i i be transition systems fori x x0 x1 and x x1 x1 x predicates.
.ifisequivalent algorithm reports m m1 then the purported contextual assumptiona x1 fulfills both premises of the proof rule in theorem .
.ifisequivalent algorithm reports a sequence of predicates for somek then is a witness tom m1 .
for completeness recall that the predicates 1and are the target predicates of learner aandlearner arespectively.
the transition systemm 1will be inferred as a purported contextual assumption if no other contextual assumptionisfound.
algorithm3canthendecidewhether m0 m1satisfies conclusively.1077theorem completeness .
letm i xi i i be transition systems fori x x0 x1 and x a predicate.
.ifm m1 learner aandlearner awill infer certain predicates x1 and x1 x such that isequivalent algorithm reports m m1 .
.ifm m1 learner aandlearner awill infer certain predicates x1 and x1 x such that isequivalent algorithm returns a sequence for somek .
optimizations thebddlearningalgorithmsin arebasedonthelearningalgorithmsforregularlanguages .
as observed in the first equivalence query made bybddlearningalgorithmsisalways eq bdd ff when there is more than one boolean variable.
bdd learning algorithms hence revise the first purported contextual assumptiona x1 ff ff byaddingm initialx1 statesor m1 transitions.
consequently bddlearningalgorithmsofteninferthecomponentm 1asacontextualassumption.
by complementingqueriesfrombddlearningalgorithms one canensurethefirstequivalencequerytobe eq bdd tt andhenceobtainmoreeffectivecontextualassumptions .
m x 0 0 a x andx x x1 input awitness to m0 a output awitnesstom a containsonly tracesviolating sk sk forj k 1to0do sj sj x .
0 x0 x x x s j x end return algorithm witnessbackward wecanfurtherreducethenumberofspurioustracesfrom symbolicmodelchecking.
witnessesobtainedbysymbolic modelcheckersmaycontainunnecessaryinformation.
considerawitnesstom a .
ifaspuriousm a trace in the witness satisfies it is not useful in revising the contextualassumption.
subsequently itismoreeconomic toconsiderm a tracesviolating inthewitness.
when thewitnessanalysisalgorithm algorithm6 obtainsawitness tom a themechanicalteacher shouldperformbackwardimagecomputationtoobtainuseful spurioustracesfromthewitness algorithm7 .
.
experiments wecomparethreedifferentverificationtechniquesintheexperiments thenusmvmonolithicsymbolicmodelchecking automatedassume guaranteereasoningwithsimplewitness analysis andautomatedassume guaranteereasoningwith progressive witness analysis.
the two automated assumeguaranteereasoningtechniquesareimplementedinnusmv .
bothadopttheclassificationtree basedbddlearning algorithmtoinfercontextualassumptions .
five examples are reported in the experiments minirubik s cube rubik s cube dining philosophers diningcryptographers andanindustrialgatecontrolsystem .
weheuristicallychoosecomponentstogeneratetable mini rubik s cube propertynotsolved overlap2 peaktimepeaktime nusmv .
.69s7.
.37s ag1 ag .
.08s3.
.36s table rubik s cube propertycorner centercorner peaktimepeaktime nusmv ag1 ag .
.24s3.
.39s propertyoverlap3 peaktime nusmv ag1 ag .
.41s contextualassumptionsfrom.
eachexperimentisallocated withonecpucoreand4gbofmemory.
allexperiments areconductedona64 bitlinux3.
.0serverwith42.40ghz intelxeone5620quadcorecpu sand32gbram.
mini rubik s cube.a mini rubik s cube is the versionoftherubik scube.
thereareeightminiaturecubes calledcubies inthemini rubik scube.
eachcubiecanbe located in eight different positions.
it moreover has three visiblefacetsandhencethreeorientationsineachposition.
subsequently a state of the mini rubik s cube consists of thepositionandtheorientationofitseightcubies .
inthetable therownusmvshowstheresultsofmonolithic symbolic model checking.
the rowsag1andag show the results of assume guarantee reasoning with the simpleandourprogressivewitnessanalysisalgorithms algorithm6 respectively.
thecolumn peak showsthenumber ofpeakbddnodesduringverification.
finally theverificationtimeisshown.
inthetable thesymbol indicates eithermemory out 4gb ortime out 7200seconds .
the propertynotsolvedspecifies that the mini rubik s cube cannot be solved.
it fails from a chosen initial state.
awitnessgivesasolutiontothepuzzle.
assume guarantee reasoningwiththesimplewitnessanalysisalgorithmdoes notfinishwithinthegiventimelimit.
monolithicsymbolic modelcheckingusesmorethansixmillionspeakbddnodes.
on the other hand assume guarantee reasoning with our progressivewitnessanalysisalgorithmrequireslessthantwo millionsofpeakbddnodes andimprovestheverification timeby81 .
thepropertyoverlap2specifiesthatthefirst twocubiescannotbeinthesamepositionfromeveryinitial state.
monolithic symbolic model checking requires more than seventy millions of peak bdd nodes and takes more thantwenty sixminutestoconcludetheverification.
assumeguaranteereasoningwithournewwitnessanalysisalgorithm usesahalfofpeakbddnodesandimprovestheverification timeby64 .
rubik s cube.a3 3rubik scubehastwentysixvisible cubies.
wepartitionvisiblecubiesintothreetypes.
thefirst typeconsistsofsixcubiesatthecenterofsixfacesofthe cube.
eachcubieofthefirsttypehasonlyonevisiblefacet1078table dining philosophers nodes4 peaktimepeaktime nusmv .
.63s4.
.51s ag11.
.62s2.
.32s ag .
.46s2.
.28s nodes6 peaktimepeaktime nusmv .
.90s ag16.
.67s3.
.82s ag .
.10s3.
.30s and thus one orientation.
the second type contains eight cubiesatthecornersofthecube.
eachcubieofthistype hasthreevisiblefacetsandthreeorientations.
thelasttype ofcubiesareontheedgesoftherubik scube.
eachedge cubiehastwovisiblefacetsandtwoorientations.
table shows the experimental results.
the property cornerspecifiesthattheeightcornercubiescannotbeattheir solved positions from a chosen initial state.
the property centercornerstatesthatthefirsttwotypesofcubiescannot beattheirsolvedpositionsfromachoseninitialstate.
the propertyoverlap3specifiesthatthefirsttwocentercubies cannotbeatthesamepositionfromeveryinitialstate.
for eachproperty neithermonolithicsymbolicmodelchecking nor assume guarantee reasoning with the simple witness analysis algorithm can verify these properties within the givenresourcebound.
ontheotherhand assume guarantee reasoning with our progressive witness analysis algorithm performsratherwell.
theinferredcontextualassumptions are significantly smaller than their targets.
subsequently assume guaranteereasoningwithprogressivewitnessanalysis isabletoverifyallpropertiesinthisexample.
dining philosophers.inthisexample nphilosopherssitin aroundtable.
twoneighboringphilosophersshareafork.
whenaphilosopherdecidestoeat shehastopickupthe twoforkssharedwithhertwoneighbors.
intheexperiment withnnodes therearenprocessesforphilosophersandn forforks.
weverifythatthefirsttwophilosopherscannot eatatthesametime .
monolithicsymbolicmodelcheckingisagainoutperformed bybothautomatedassume guaranteereasoningtechniques.
itcannotverifytheexperimentwith7philosopherswhereas assume guarantee reasoning can finish the verification in about30minutes.
alsonotethatmonolithicsymbolicmodel checking always has a larger number of peak bdd nodes.
intheexperimentwith6nodes thenumberisanorderof magnitudemorethanthoseofassume guaranteereasoning.
dining cryptographers.the dining cryptographers problemisanexampleofprivacyprotocols.
intheproblem n cryptographers dine around a table.
after finishing their meal they are told that the meal has been paid for.
the cryptographersarecurioustoknowwhethertheyaretreated byanunknowngenerousfundingagencyorbyacolleague amongthemselves.
beingcryptographers theyrespecttheir privacyverymuch.
ifacolleaguepaid thecryptographersdo notwishtoidentifytheperson.
thediningcryptographers problem is to determine whether a funding agency or an anonymouscryptographerpaidthemeal.table dining cryptographers n9 peak timepeak time nusmv .
.29s21.
.64s ag1 ag .
.43s19.
.77s n11 peak timepeak time nusmv .
.84s ag1 ag .
.74s72.
.22s thecryptographerscansolvetheproblemasfollows.
initially each cryptographer selects a secret bit.
she then obtains a shared secret bit with her left neighbor say by computingtheparityoftheirtwosecretbits .
similarly she obtains another secret bit shared with her right neighbor.
eachcryptographerthenannouncesabit.
ifshedidnotpay themeal sheannouncestheparityofhertwosharedbits.
ifshepaid thecomplementoftheparityofhertwoshared bits is announced.
it can be shown that the parity of all announcedbitsisevenifanunknownfundingagencypays thebill.
weverifythisfactintheexample.
automatedassume guaranteereasoningwithprogressive witnessanalysisisabletoverify12cryptographerswithin .
hours.
in fact the verification of cryptographers is completewithin4.2hours.
incontrast monolithicsymbolic modelcheckingusesup4gbofmemoryon12cryptographers.
if we increase the memory bound to 8gb the monolithic techniqueisabletoverifytheinstanceof12cryptographersin .8hoursbutstillcannotfinishtheinstanceof13cryptographers.
assume guaranteereasoningwithprogressivewitness analysisoutperformsmonolithicmodelcheckingforthisexample.
ontheotherhand assume guaranteereasoningwith simple witness analysis performs very disappointingly.
it failstoverifyanyinstancewithmorethanninecryptographers.
analyzingwitnessesprogressivelyisessentialtotake fulladvantagesofassume guaranteereasoninginthedining cryptographersproblem.
gate control system.
designedforabuddhistceremonyon astage thegatecontrolsystemisusedinlingshanbuddhist palaceinjiangsu china .
thesystem consistsof five parts thecontroller liftingplatform push pullunit latch andmotors.
theliftingplatform push pullunit andlatch liftgatestoandfromthewarehouseunderthestage.
amotor is attached to each gate and moves along a circular track.
all these devices are operated by the controller.
figure showsthesystemarchitecture.
considertheopeningsceneoftheceremony whereevery gate arises from the warehouse orderly and moves to the circulartrack.
inordertobringgatesfromthewarehouse underneath the lifting platform elevates a gate from the warehousetothestage.
apush pullunitthenpushesthe gatetothecirculartrack.
attheclosingscene amotorfirst movesagateadjacenttotheliftingplatformalongthetrack.
apush pullunitthenpullsthegatefromthecirculartrack totheplatform.
finally theliftingplatformdescendsthe gatetothewarehousebelow.
forsafetyreasons alatchlocks theliftingplatformwhentheplatformgetstoadesignated1079table gate control system propertygate1 gate2 lpf1 lpf2 peaktimepeaktimepeaktimepeaktime nusmv .
.49s0.
.49s0.
.13s0.
.15s ag10.
.03s0.
.28s0.
.36s1.
.87s ag .
.45s0.
.45s0.
.62s0.
.61s propertylatch1 latch2 ppu peaktimepeaktimepeaktime nusmv .
.11s1.
.12s0.
.83s ag10.
.82s0.
.14s1.
.91s ag .
.24s0.
.49s0.
.34s push pull unitlifting platformlatchbuscontroller motorsfigure structure of gate control system position.
since all gates move on the same circular track collisionbetweengatesmustbeavoided.
table5givestheresults.
theproperty gate1 statesthat agatemuststopwhentheuserpressesthestopbutton.
the propertygate2 specifiesthatagatemuststopwhenitreaches the boundary.
the properties lpf1 latch1 andppu are similartogate1 exceptthedevicesaretheliftingplatform latch andpush pullunit respectively.
theproperties lpf2 andlatch2 aresimilarto gate2 exceptthedevicesarethe liftingplatformandlatch respectively.
for all properties but ppu assume guarantee reasoning withprogressivewitnessanalysisismoreefficientthanthe nusmvmonolithicverificationalgorithm.
onaverage our newtechniqueattains25.
ofspeedup.
assume guarantee reasoning with progressive witness analysis moreover improvesmemoryefficiency.
forthesevenpropertiesverified onthegatecontrolsystem assume guaranteereasoninguses lesspeakbddnodes.
itsaves62.
ofmemorythanmonolithicsymbolicmodelcheckingonaverage.
assume guaranteereasoningwithsimplewitnessanalysis on the other hand is unsatisfactory.
it takes significantly moretimethanmonolithicsymbolicmodelcheckinginfour properties gate1 lpf1 lpf2 andppu .
thesimplewitness analysisalgorithmmoreoverisnotverymemoryefficient.
it usesmorepeakbddnodesthanthemonolithicverification algorithminthreeproperties gate1 lpf2 andppu .
.
conclusion symbolicmodelcheckingandautomatedassume guarantee reasoningareintegratedbytheprogressivewitnessanalysis algorithmproposedinthispaper.
experimentalresultsshow thattheourtechniquecanimprovenotonlytheefficiency butalsothecapacityofsymbolicmodelchecking.
particu larly assume guaranteereasoningwithprogressivewitness analysis is more scalable than monolithic symbolic model checking in symmetric and parametric examples such as diningphilosophersanddiningcryptographers.
ourexperimentsalsodemonstratetheimportanceofwitnessanalysisin automatedassume guaranteereasoningwithsymbolicmodel checking.
an ill designed witness analysis algorithm can significantlyimpedetheperformance.
analyzingwitnesses progressivelyisessentialtointegratesymbolicmodelchecking withautomatedassume guaranteereasoning.
in our experiments we partition systems by trials and hencemaynothavetheoptimalpartition.
howtopartition systems into components remains an important and challengingproblem.
ourtechniquecurrentlyfindscontextual assumptions over all context variables.
since a property oftendependsonasubsetofcontextvariables itsufficesto findcontextualassumptionsoversuchvariables.
in an algorithminferringbooleanfunctionsoverrelevantvariables isproposed.
asimilarlearningalgorithmforbdd smayfurtherimprovetheperformanceofsymbolicassume guarantee reasoning.
.
acknowledgment thisworkwassupportedbythechinesenational973plan 2010cb328003 the nsf of china thechinesenationalkeytechnologyr dprogram sq2012bajy4052 the importation and developmentofhigh calibertalentsprojectofbeijingmunicipal institutions yetp0167 the tsinghua university initiativescientificresearchprogram andthenationalscience counciloftaiwan e .
.