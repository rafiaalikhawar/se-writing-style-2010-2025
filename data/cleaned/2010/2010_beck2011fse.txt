on the congruence of modularity and code coupling fabian beck stephan diehl computer science university of trier germany beckf diehl uni trier.de abstract software systems are modularized to make their inherent complexity manageable.
while there exists a set of well known principles that may guide software engineers to de sign themodulesofasoftware system wedonotknowwhich principles are followed in practice.
in a study based on open source projects we look at different kinds of couplingconcepts between source code entities including structuraldependencies fan outsimilarity evolutionarycoupling codeownership code clones and semantic similarity.
the congruence between these coupling concepts and the modularization of the system hints at the modularity principles usedinpractice.
furthermore theresultsprovideinsightson howto support developers to modularize software systems.
categories and subject descriptors d. .
metrics software science general terms design experimentation measurement .
introduction applying the age old warfare strategy of divide and conquerto a software system its complexity can be managed by modularizing it into smaller parts.
every non trivial software system is modularized on different levels of abstraction and employingdifferent techniques.
for instance classes enclose related functionalities packages summarize classes intosubsystems components provide reusable units of sourcecode or aspects represent cross cutting features.
when modularization came up parnas introduced the concept of information hiding which became a fundamental paradigm for designing software systems.
shortly thereafter stevens et al.
proposed the principle of lowcoupling and high cohesion while modules should only beloosely coupled the elements of a module are supposed tobe highly cohesive.
moreover conway observed that permission to make digital or hard copies of all or part of this work for personal or classroom use is granted w ithout fee provided that copies are not made or distributed for profit or c ommercial advantage and that copies bear this notice and the full citation on the first page.
to copy otherwise torepublish to post on servers or to redist ribute to lists requires prior specific permission and or a fee.esec fse september szeged hungary.
copyright acm ... .
.modularity of a product is connected with the structure of the organization that designs the product.
these principlesand theories put forward different criteria to modularize asystem.
but we do not know which design principles are really used in practice.
in this paper we want to approach this question and validate known design principles by looking at the differenttypes of relationships that connect the entities of a softwaresystem.
these relationships which we call code couplings may explain the design decisions that constitute the modularization of a system.
in particular we will compare a setof different code coupling concepts to the package structures of java systems.
this comparison will be based on a metric that measures the congruence between coupling and mod ularity.
we will show that different principles impact thestudied software systems but none of them dominates themodular structures.
in the rest of this paper we first briefly review different principles on modularizing software systems as well as dif ferent code coupling concepts section .
then we presentour study analyzing the relationship between the couplingconcepts and the modularization of the systems section we contrast the information contained in the coupling concepts section .
.
based on a measure of congruence between the coupling concepts and modularity we comparethe coupling types to find out which concepts impact themodularization most section .
.
by classifying the mod ules of the systems we furthermore derive coupling patternsfor different module types section .
.
while the discussion shows some limitations of the study it also raises possible implications of the results for designing and maintainingsoftware systems section .
finally we present relatedresearch section and conclude the paper section .
.
modularity and coupling for human beings the only way to manage a complex system or solve a problem is to breakit up.
modularizing a system to manage its complexity is not unique to software engineering but is part of every engi neering or design process.
baldwin and clark summa rize this idea in an interdisciplinary theory on modularity.they argue that a well modularized system or design allowsconcurrently working on different parts in parallel makes alarger complexity manageable and hides uncertainties into modules.
.
modularity principles in software engineering different design principles were proposed on how to create a good modular structure of software systems.
we will briefly outline these principles in the following.
.
.
low coupling and high cohesion p1 stevenset al.
propose tofocus on thedata communication dependencies of a program .
the target characteristic of good modularization isthat theelementsof each singlemod ule are highly cohesive i.e.
connected by many dependen cies while elements belonging to different modules shouldbelow coupled i.e.
connectedbyfew dependencies short low coupling and high cohesion.
thisprinciplemightbeconsidered as the default approach when analyzing or retrieving the modularization of a software system.
.
.
information hiding p2 parnas introduced the principle of information hiding hiding design decisions inside modules.
slim interfaces should represent thefacade of themodule.
the design startswith identifyinga set of importantdesign decisions thatmaychange during development.
each of these decisions shouldbe encapsulated in an independent module.
as a result ofthis process changes in the software system should be limited within the boundaries of a module.
information hiding later on became one of the main principles of the objectoriented paradigm .
.
.
conway s law p3 conway formulated a general law on the congruence between organizations and the productsthey design organizations which design systems are constrainedto produce designs which are copies of the communicationstructures of these organizations.
conway s law does not directly state guidelines to modularize a software system.
nevertheless it implies the principlethat thedesign of asystem andhenceitsmodularizationas a part of the design should match the structure of theorganization.
otherwise the intended design would conflictwith the social preconditions and may not be enforceable inpractice.
.
.
others p4 besides these three often cited principles there are other explicit modularity principles or principles that at least im pact modularity.
a martin introduced three package design principles thereuse release equivalence principle the common reuse principle a n dt h e common closure principle .
these principles propose that the package reflects the granule of reuse release and change.
b architectural styles like client server orpipes and filters provide a tight framework for modularization layeredarchitecturesimposerules onthestructuraldependenciesof the modules.
c theideaofseparatingconcerns whichledtothedevelopment of aspect oriented programming could governthe modular structure of a software system in form of non cross cutting concerns.d domain knowledge is one of the key strategies to identify classes in object oriented analysis .
in summary various principlesexist on how to modularize software systems.
they focuson differentaspectsof software engineering while the principle of low coupling and highcohesion looks at the source code information hiding andconway s law take the development process into account.in turn others reflect the domain the software is part of identification of classes or consider the ecosystem around the software common reuse principle .
it is reasonable toassume that these principles are not independent but inter act with each other.
a consistent theory or framework toformally summarize or compare these principles however does not exist.
.
code coupling concepts ifapplied modularity principles as thosediscussedabove leave traces in the structure and evolution of a software system.
since modularizing a system means grouping its ele ments based on their connecting properties the principles are closely related to the relationships of code entities.
we will use the general term coupling to refer to such a relationship.
while the frequently used term dependency implies a cause and effect of the connecting property the termcoupling is not necessarily directed and is neutral with respect to causality.
please note that code coupling has here a different meaning than the term coupling as used in the principle of low coupling and high cohesion p1 while in the principle it only denotes cross module relationships wewill use the term in general for relationships.
in this study we focus on object oriented software systems namely systems mainly written in java.
suchsystems are modularized into packages that themselves may include further packages.
these hierarchically organized packagesform a mid level of abstraction and will be considered asthe modularization of a system in this study.
classes and interfaces are the basic elements of a package.
as a matter of simplification we will use the term classinterchangeable for classes and interfaces .
together with a coupling concept the classes form a graph data structure.
the package modularization defines a hierarchy on theclasses.
formally this data structure can be described asafi v e t u p e l g c p e i called a directed weighted compound graph where cis the set of classes pis the set of packages e c c is the set of directed couplings i c p c p contains the inclusion edges of the package hierarchy and e r 0is the coupling weight function.
furthermore c p i f o r m sat r e ew i t hl e a v e s cand inner vertices p. quite a number of different coupling concepts have been proposed in software engineering literature.
in the following we will introduce the set of coupling concepts that wewill analyze in our study.
we will also discuss possible rela tionships between the coupling concepts and the modularityprinciples as conjectures.
.
.
structural dependencies sd a method calls another method a class extends another class or a class aggregates objects of another class all this creates a direct dependency between two classes.
thesestatic structural code dependenciesare most frequently used when analyzing or leveraging code coupling.
355in our study we distinguish the following three types of structural dependencies.
sd.inh two classes are coupled directed if one class extends the other class.
if coupled the coupling weight is .
sd.agg two classes are coupled directed if one class aggregates another by having class variables using the other class.
the coupling weight is the number of class variables relying on the otherclass.
sd.use two classes are coupled directed if one class uses the other class in a method as a local variable a method parameter or by calling a method of the other cla ss.
the coupling weight is the number of methods using the other class.
weusethetool dependencyfinder toretrieve these structural dependencies from compiled java bytecode.
conjecture structuraldependenciesareastraightforward approach to measure the data communication for the principle of low coupling and high cohesion p1 .
introduced prior to object oriented design it is however not clear howto rate the different types of the object oriented structural dependencies when applying the principle.
.
.
fan out similarity fo structural dependencies might not only directly couple two code entities but also indirectly two entities connected to the same set of other entities might indicate a similar purpose or functionality of these two entities.
we refer tothese indirect structural couplings as fan out similarity .
a feature vector describes the fan out for each class.
each feature representsthe numberof direct structural dependen cies sd to a particular class.
if two vectors of two classesare similar the classes reference similar other classes.
toquantify the similarity we employ the cosine similarity mea sure whichcomputestheanglebetweenthevectorsbutdoes not take their lengths into account .
we again distinguish three types of structural information.
orthogonally external fan out similarity abbreviated e which is based on