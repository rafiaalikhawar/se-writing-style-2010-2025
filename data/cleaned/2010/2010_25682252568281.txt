inductive verification of data model invariants for web applications ivan boci c and tevfik bultan department of computer science university of california santa barbara usa bo bultan cs.ucsb.edu abstract modern software applications store their data in remote cloud servers.
users interact with these applications using web browsers or thin clients running on mobile devices.
a key issue in dependability of these applications is the correctness of the actions that update the data store which are triggered by user requests.
in this paper we present techniques for automatically checking if the actions of an application preserve the data model invariants.
our approach rst automatically extracts a data model speci cation which we call an abstract data store from a given application using instrumented execution .
the abstract data store identi es the sets of objects and relations associations used by the application and the actions that update the data store by deleting or creating objects or by changing the relations among the objects.
we show that checking invariants of an abstract data store corresponds to inductive invariant veri cation and can be done using a mapping to first order logic fol and using a fol theorem prover.
we implemented this approach for the rails framework and applied it to three open source applications.
we found four previously unknown bugs and reported them to the developers who con rmed and immediately xed two of them.
categories and subject descriptors d. .
software program veri cation model checking f. .
logics and meanings of programs specifying and verifying and reasoning about programs invariants f. .
logics and meanings of programs semantics of programming languages program analysis general terms design veri cation keywords automated veri cation data model inductive invariants ruby on rails this work is supported by the nsf grant ccf .
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
to copy otherwise to republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
icse may june hyderabad india copyright acm ... .
.
.
introduction nowadays most computers are connected to the internet.
this network connectivity when combined with the increasingly prevalent cloud computing platforms enables software applications to store data on remote servers and use thin clients web browsers or mobile applications that provide access to application data from any device anywhere anytime without maintaining any local copies.
however these applications are challenging to develop and maintain since they are complex software systems consisting of distributed components that run concurrently and interact over the internet.
in order to reduce this complexity and achieve modularity most web application development frameworks use the model view controller mvc pattern to separate the code for the data model model from the user interface logic view and the navigation logic controller .
the key component in applications that use this pattern is the data model which is responsible for identifying the sets of objects and the relations associations among the objects stored in the back end data store.
correctness of actions that update the data store is the most signi cant correctness concern for these applications since erroneous actions can lead to unrecoverable corruption or loss of data.
another widely used approach in web application development is the representational state transfer rest architecture with restful interfaces.
in restful applications any action on the data model can be invoked at any time and any number of times.
this implies that any property that should hold on the data model must be preserved by each action independently of the history of previous action executions.
hence invariants of the data model can be checked in a modular manner by checking each action in isolation using inductive invariant veri cation.
based on the above observations we developed a novel approach for automatically verifying data model invariants of web applications.
first by exploiting the structure of the mvc pattern we automatically extract an abstract speci cation of the data model including actions that update the data store using instrumented execution.
next we convert veri cation queries about the data model stated as invariants to formulae in first order logic fol based on inductive invariant veri cation.
finally we use an automated fol theorem prover to determine the result of the veri cation query.
we implemented our approach figure for the rails framework .
we decided to focus on the rails framework since it is widely used.
however the approach presented inpermission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
icse may june hyderabad india copyright acm ... .
instrumentation rails code invariants abstract data store extractor execution translation to first order logic verifier first order logic theorem prover verified action invariant pairs falsified action invariant pairs figure veri cation of data model invariants this paper can be adapted to other mvc based web application frameworks such as django and spring .
we evaluated our approach on three open source rails applications kandan tracks and fat free crm .
these are non trivial applications with more than 2k 18k and 30k lines of code respectively.
in addition to proving that the majority of the actions preserve the stated invariants our tool also discovered previously unknown bugs in these applications.
our contributions in this paper are an intermediate representation for data model speci cations called abstract data stores.
data model extraction using instrumented execution and its implementation for the rails framework.
reduction of invariant veri cation queries for abstract data stores to fol using inductive invariant veri cation and a translator that implements this reduction.
implementation of a veri cation tool for the rails framework that combines the components listed above with an existing fol theorem prover.
evaluation of the proposed approach on real world applications and experiments demonstrating the performance and e ectiveness of our veri cation tool for these applications.
this paper is organized as follows.
section provides an overview of the problem we are addressing and the techniques we use to solve it.
section gives an overview of our intermediate language abstract data stores for representing data model speci cations.
section explains our instrumented execution technique for extracting abstract data store speci cations from application code.
section explains how we translate invariant veri cation queries about abstract data store speci cations into rst order logic.
section presents our experimental results and the bugs we found.
section includes discussions about the related work and section concludes the paper.
.
overview figure shows an excerpt from an example rails application.
in rails the data model is implemented using an object relational mapping orm library called activerecord.
it is very similar to other orm libraries hibernate django orm etc.
in that each class corresponds to a table in a relational database and that object