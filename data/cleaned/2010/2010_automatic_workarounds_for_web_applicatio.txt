automatic workarounds for web applications antonio carzaniga alessandra gorla nicol perino and mauro pezz faculty of informatics university of lugano lugano switzerland antonio.carzaniga alessandra.gorla nicolo.perino mauro.pezze usi.ch abstract we present a technique that finds and executes workarounds for faulty web applications automatically and at runtime.
automatic workarounds exploit the inherent redundancy of web applications whereby a functionality of the application can be obtained through different sequences of invocations of web apis.
in general runtime workarounds are applied in response to a failure and require that the application remain in a consistent state before and after the execution of a workaround.
therefore they are ideally suited for interactive web applications since those allow the user to act as a failure detector with minimal effort and also either use read only state or manage their state through a transactional data store.
in this paper we focus on faults found in the access libraries of widely used web applications such as google maps.
we start by classifying a number of reported faults of the google maps and youtube apis that have known workarounds.
from those we derive a number of general and api specific program rewriting rules which we thenapplytootherfaultsforwhichnoworkaroundisknown.
our experiments show that workarounds can be readily deployed within web applications through a simple client side plug in and that program rewriting rules derived from elementary properties of a common library can be effective in finding valid and previously unknown workarounds.
categories and subject descriptors d. .
testing and debugging error handling and recovery general terms reliability design keywords automatic workarounds web applications web api mauro pezz e is also with the university of milano bicocca.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
to copy otherwise to republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
fse november santa fe new mexico usa.
copyright acm ... .
.
.
introduction application programming interfaces apis for popular web applications like google maps and facebook increase the popularity of such applications but also introduce new problems in assessing the quality of the applications.
in fact third party developers can use web apis in many different ways and for various purposes and applications can be accessed by many users through different combinations of browsers operating systems and connection speeds.
this leads to a combinatorialexplosion of use cases and therefore a growing number of potential incompatibilities that can be difficult to test with classic approaches especially within tight schedules and constrained budgets.
furthermore failures caused by faults in common apis can affect a large number of users and fixing such faults requires a time consuming collaboration between third party developers and api developers.
in order to overcome these open problems in the absence of permanent fixes users and developers often resort to workarounds.
however although many such workarounds are found and documented in online support groups their descriptions are informal and their application is carried out on a case by case basis and often with non trivial ad hoc procedures.
in this paper we propose a technique to find and execute workarounds automatically and at runtime in response to failures caused by faults in the libraries that the application depends on.
automatic workarounds do not fix the faults in the api code but rather provide a temporary solution that masks the effects of the faults on applications.
we start from the supposition that libraries are often intrinsically redundant in the sense that they provide several different ways to achieve the same results and that this redundancy can lead to effective workarounds.
for example changing an item in a shopping list may be equivalent to deleting the item and then addinga new one.
so to avoid a failing edit operation one could replace that edit operation with a suitable sequence of delete and add operations.
this assumption that large software systems contain significant portions of functionally equivalent code is supported by evidence from a recent study on redundant code in the linux kernel and is also confirmed by our study of web apis that we report in this paper.
based on this intrinsic redundancy we propose a technique to build and execute at runtime and in response to a failure alternative sequences of operations whose intended behavior is equivalent to that of the failing sequence.
we denote such sequences as equivalent sequences .w et h e nc a l l 237workarounds those equivalent sequences that execute successfully thereby avoiding the failure.
in order to deploy automatic workarounds effectively we need to solve four main problems.
first we need to detect failures and check for the validity of workarounds.
second we must be able to execute equivalent sequences repeatedly without compromising the state of the application and without suffering from potential side effects of the previous failing execution.
third we need to represent the redundancy of apis so as to be able to generate equivalent sequences at run time.
fourth we need to find valid workarounds out of potentially many equivalent sequences.
we assume that we can dismiss the second problem repeated executions in the case of web applications because those are typically designed to avoid potential side effects caused by repeated executions.
we briefly revisit this assumption in section .
.
we can therefore execute a workaround by simply re executing the client side code of the page that manifests the failure after applying the workaround .
the remaining problems are the focus of this paper.
for the first problem detecting failures and verifying the validity of deployed workarounds our general approach is to rely on the interactive nature of web applications and in practice to assume that users can easily detect a failure and explicitly request a workaround for example by pressing a special fix it!
button on their browser.
for example if an application that uses the google maps api does not display a map as expected the user can with minimal effort detect the failure and push the fix it!
button.
similarly users can reject the execution of an equivalent sequence or implicitly validate it as a workaround by proceeding with their interactive session.
as we rely on users to find workarounds we must also take special care not to annoy and ultimately alienate them with too many repeated attempts.
we address this problem by developing an automatic oracle that can conservatively detect and therefore discard some ineffective equivalent sequences.
as for the third and fourth problems modeling and exploiting redundancy to find valid workarounds we continue toexploreandevolveourideasonautomaticworkarounds .
in particular in our earlier work we propose to derive workarounds from a formal model of the application e.g.
a finite state machine or an algebraic specification .
however that initial approach requires that the specification be complete in the sense that the exact state of the application must be identifiable from every sequence of api calls.
instead here we develop a more practical notion of automatic workaround that requires only a much simpler possibly partial and therefore more general application model in which we construct equivalent sequences from explicitly given sequencesthatareknowntobefunctionallynulloridenticalto others.
this paper presents a concrete instantiation of this new approach in the case of web applications and specifically makes the following novel contributions we propose an application independent notation to represent classes of equivalent sequences.
this notation consists of source code rewriting rules that applied to a javascript program produce an equivalent but possibly failure free program.
we propose and evaluate a general architecture implementable within a web proxy or a browser plug in for the generation prioritization and deployment ofworkarounds for web applications at runtime.
this architecture includes an automated oracle that greatly reduces the need for user intervention.
we present the study of some popular web apis together with several of their failure reports.
this study leads to two contributions we present a set of concrete api specificrulesthatgeneratevalid knownbut also previously unknown workarounds for each api we derive a taxonomy of abstract generic rules that are relatively simple but surprisingly effective.
the remainder of the paper is structured as follows.
in section we present some examples that show how to exploit the implicit redundancy of web applications to derive workarounds.
in section we introduce a framework and a concrete architecture to support automatic workarounds for web applications.
in section we present experimental data obtained with applications that use the google maps and youtube apis and that show the effectiveness of the approach proposed in this paper.
in section we discuss related work highlighting the salient differences and the novelty of our proposal.
we then conclude in section with a summary of our results and some ideas for future research.
.
motiv ating examples we illustrate the notion of workaround and specifically the nature of failures and workaroundsin the context of web applications using two examples of failures affecting two widely used web apis.
the two examples we present here are typical of a large number of problems that we observed in our survey of bug repositories discussion forums and interest groups related to popular web apis.
we report more extensively on the results of our survey in section .
flickr photo visibility.
flickr is a popular photo sharing application.
the flickr api allows users to upload and publish photos on the web.
flickr associates photos with a visibility tag that controls access to photos on the web which can bepublic family o rprivate.
the flickr api includes a methodsetperms that allows users to change the visibility of their photos.
a message posted by a user on the flickr forum in march reported a failure of setperms t h e method failed to change the access status of a photo from privatetofamilyfor photos that were originally uploaded as private.1the problem persisted for some time in flickr and was originally avoided with a simple workaround posted on the forum to change the visibility of a photo from private tofamily first change from privatetopublicand then from publictofamily.
this fault has since been fixed.
facebook dialog windows.
the popular social networking system facebook exposes an api for web applications.
the facebook api consists of a javascript library that among other things allows applications to create and control graphical elements.
report n. in the facebook bug repository describes a problem with the setstyle method of the facebook api which is intended to set the width and height of a graphical element.
the method works well when one of the two dimensions is set individually but fails when used to set both dimensions at the same time.2the report bug.cgi?id 238was filed in june by a developer who also suggested a workaround in which one can set width and height with two separate setstyle calls.
as of the time of this writing june this fault is still unresolved.
theexamplesaboveshowthatsomefaultsmaysurvivefor a long time.
in this paper we do not intend to investigate the software maintenance processes for web applications and we realize that those are complex processes affected by human factors and driven by technical as well as nontechnical objectives.
nevertheless we observe that those kinds of failures have to go through two maintenance steps they are initially reported either indirectly by application users first case or more directly by application developers second case but can be corrected only by the developers of the web api who may not be aware of the actual impact of the fault and in any case may have other priorities.
the two cases also exemplify two different types of workarounds.
in the first case it is very likely that the setperms method of the flickr api be exposed directly to users allowing them to control access to their photos.
therefore not only users can more easily notice the failure and report it with an accurate diagnosis but they can also directly apply the proposed workaround.
this is most probably not the case for the setstyle method of the facebook api which is typically used by applications but not exposed to users.
so in this latter case users may or may not detect the failure but would certainly not be able to use the proposed workaround.
in fact the failure report explicitly characterizes it as a workaround for developers.
.
automatic workarounds we now describe the architecture of a system for the deployment of automatic workarounds.
this description refers to a concrete implementation in the form of a browser extension although the same architecture can also be implementedasawebproxy.
thebrowserextensionmediatesthe interaction between on the one hand one or more servers that produce the html pages and the code associated with a web application and on the other hand the browser componentsthatexecutethecode renderthepages andmanage the interaction with the user.
at a high level the browser extension deploys a workaround by modifying the code of the pages i.e.
the application rendered to the user.
figure shows the high level architecture of the browser extension as well as the general process by which the extension deploys automatic workarounds.
this process unfolds in the following steps.
the interaction starts with a user requesting a specific page or application step .
the browser issues the requests for all the objects data and code that compose the page to the origin server step .
the browser extension then examines the objects returned by the server step to decide whether to enable the services of its automatic workaround module.
in particular the browser extension looks for