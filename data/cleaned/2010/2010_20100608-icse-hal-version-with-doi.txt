liability in software engineering overview of the lise approach and illustration on a case study daniel le m tayer manuel maarek licit inria grenoble rh ne alpeseduardo mazza marie laure potet verimag university of grenoblest phane fr not amazones inria grenoble rh ne alpes insa lyon val rie viet triem tong ssir sup lec rennesnicolas craipeau print university of caen basse normandieronan hardouin dante university of versailles saint quentin en yvelines abstract lise is a multidisciplinary project involving lawyers and computer scientists with the aim to put forward a set of methods and tools to de ne software liability in a precise and unambiguous way and establish such liability in case of incident.
this paper provides an overview of the overall approach taken in the project based on a case study.
the case study illustrates a situation where in order to reduce legal uncertainties the parties to a contract wish to include in the agreement speci c clauses to de ne as precisely as possible the share of liabilities between them for the main types of failures of the system.
categories and subject descriptors k. general k. .m legal aspects of computing miscellaneous contracts d. .
requirements speci cations methodologies d. .
software program veri cation formal methods general terms legal aspects keywords liability contract formal methods speci cation defects legal aspects evidence lise liability issues in software engineering is a project funded by anr agence nationale de la recherche under the sesur programme anr sesu .
web site .
emails of the corresponding authors daniel.le metayer manuel.maarek inrialpes.fr .
additional authors are listed in section .
permission to make digital or hard copies of part or all of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise to republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
c acm .
this is the authors version of the work.
it is posted here by permission of acm for your personal use.
not for redistribution.
the definitive version was published in acm ieee icse may .
introduction software contracts usually include strong liability limitations or even exemptions of the providers for damages caused by their products.
this situation does not favour the development of high quality software because the software industry does not have su cient economical incentives to apply stringent development and veri cation methods.
indeed experience shows that products tend to be higher quality and more secure when the actors in position to in uence their development are also the actors bearing the liability for their defects .
the usual argument to justify this lack of liability is the fact that software products are too complex and versatile objects whose expected features and potential defects cannot be characterised precisely and which thus cannot be treated as traditional tangible goods.
admittedly this argument is not without any ground it is well known that de ning in an unambiguous comprehensive and understandable way the expected behaviour of systems integrating a variety of components is quite a challenge not to mention the use of such de nition as a basis for a liability agreement.
taking up this challenge is precisely the objective of the lise project the project studies liability issues both from the legal and the technical points of view with the aim to put forward a formal framework to de ne liability in a precise and unambiguous way and establish such liability in case of incident.
obviously specifying all liabilities in a formal framework is neither possible nor desirable.
usually the parties wish to express as precisely as possible certain aspects which are of prime importance for them and prefer to state other aspects less precisely either because it is impossible to foresee at contracting time all the events that may occur or because they do not want to be bound by too precise commitments .
taking this requirement into account lise provides a set of tools and methods to be used on a need basis in the contract drafting process as opposed to a monolithic all or nothing approach .
the objective of this paper is to provide an overview of the overall approach taken in lise.
the presentation is based on a case study an electronic signature application installed on a mobile phone.
needless to say we do not intend to illustrate all the aspects of the approach or to describe the general framework through this case study.
our aim is rather to provide some hints on the notion of liabilityconsidered in lise and the potential use of the results of the project in a concrete situation.
the structure of the paper re ects the chronological ordering of the actions in a real case section describes the starting point it system subject to the agreement parties involved informal agreement between the parties and legal context section presents the formal de nition of liabilities section suggests how the formal de nition is used to instrument the system with appropriate logging facilities and to design a log analyser.
finally section provides a sketch of related work and section identi es avenues for further research.
.
starting point we consider an electronic signature system allowing an ecommerce company to send a document to be signed by an individual on his mobile phone.
the signature of the document is subject to the individual s approval and authentication and all communications and signature operations are performed trough his mobile phone.
in a real situation the activation of the signature system would be preceded by a request from the individual or by a negotiation with the ecommerce company but we do not consider this negotiation phase here.
the mobile phone itself incorporates a smart card for the veri cation of the pin and a signature application.
we assume that the mobile phone provider the signature application provider and the smart card provider want to execute an agreement to put such a mobile phone signature solution on the market.
in order to reduce legal uncertainties the parties wish to include in the agreement speci c provisions to de ne as precisely as possible the share of liabilities between them for the main types of failures of the system.
their intention is to use these provisions to settle liability issues in an amicable way by the application of well de ned rules.
at this stage it may be the case that all the components software and hardware are already available and the only remaining task is their integration.
it may also be the case that some or all the components still have to be developed.
in general no assumption can thus be made on the fact that software components can be designed or modi ed in a speci c way to make the implementation of liabilities easier.
the only assumptions made at this stage are on the technical side the availability of the functional architecture of the system interfaces of the components and informal de nition of their expected behaviour .
on the business side an informal agreement between the parties with respect to the share of liabilities.
the objective of the infrastructure described in this paper is to allow the parties to translate this informal agreement into a contract which is both valid in the legal sense and as precise as possible in particular w.r.t.
technical issues in order to minimise legal uncertainties.
in the remainder of this section we describe the initial technical and legal situation the it system itself section .
the actors involved section .
the informal agreement between the parties signing the agreement section .
and the legal context surrounding the agreement section .
.
1we do not consider infringement or any other liabilities related to intellectual property rights here.
.
it system at the start of the contractual phase the it system is usually de ned in an informal way by its architecture its components their interfaces expected behaviours and interactions.
in our case study we assume that the electronic signature system is made of the following components a server serv .
a signature application sigapp .
a smart card card .
a mobile input output io component which gathers the keyboard and the display of the mobile phone including their drivers .
an operating system opsys .
all the components except serv are embedded in the mobile phone.
in this paper we focus on liabilities related to the mobile phone system and do not consider liabilities related toserv or the communication network.2the only functionality of opsys that we consider here is its role of medium for all communications between the mobile phone components i.e.
between sigapp card and io .
the architecture of the system and its information ows are pictured in figure .
the protocol starts with the ecommerce company ecc requesting a signature for documentd message .
the document is forwarded by serv and sigapp and presented to customer own by io messages 3and .
if own refuses to sign ecc is informed through io sigapp and serv messages n n nand n .
if own agrees the document and the pin code entered by own are forwarded to card bysigapp messages y yand y .
next depending on whether card authenticates the pin code or not the document and the signature produced by card are sent to ecc viasigapp and serv messages y r y r and y r or ecc is informed via sigapp and serv of the authentication failure messages y w y w and10 y w .
the implementation of the embedded components of the signature system which is further detailed in section .
is based on osgi an interoperable environment for small devices such as home gateways car embedded systems and mobile phones.
.
actors we assume that the contract is to be executed by the three parties involved in the manufacture and distribution of the signature solution the mobile phone provider mpp the signature application provider sap and the smart card provider scp .
the customer own who is the owner of the mobile phone and the e commerce company ecc are supposed to execute di erent contracts with mpp which plays the role of mobile phone operator.
we are concerned only with the 2these liabilities could be handled in the same way by adding the e commerce company and telecommunication operator as additional parties.
.figure communications with and within the system and the providing party for each component.
b2b contract between mpp sap andscp here.
we come back in section .
to the legal consequences of including own among the parties speci c regulations for consumer protection .
in the sequel we shall use the word party for mpp sap andscp and the word user for the end users of the system ecc and own .
each component in the system is provided by one of the parties.
in our case we assume that the sigapp component is provided by sap the card component is provided by scp and the ioandopsys components are provided by mpp .
.
informal agreement the parties wish to de ne as precisely as possible the share of liabilities between themselves in case of a claim from the customer own .4in practice the customer will typically address his claims to mpp because mpp is the only party being in direct contact and contractual relationship with him both as a mobile phone provider and operator .
mpp will have to indemnify the customer if his claim is valid and may in turn be indemni ed by one or several of the other parties depending on the type of the claim the available log les and the liability share de ned in the agreement.
in the following we assume that each document to be signed is originally stamped by ecc and this stamp is i unique ii always included in the messages of a given 4in this paper we assume that the claims related to the use of the signature solution come from the customer.
claims from other users such as ecc would be handled in the same way.session and iii never modi ed.
this stamp can be seen as a session number which makes it easier to distinguish messages pertaining to di erent signature sessions.
as an illustration we consider two kinds of claims from the customer called di doc andnotsigned concerning the signature of an alleged document dstamped a di doc the plainti own claims that he has been presented a document d0stamped di erent from the alleged document d stamped .
in the case of a purchase order for example dandd0may di er with respect to the quantity or price of the ordered items.
b notsigned the plainti own claims that he has never been presented any document stamped .
we assume that the parties agree on the following informal share of liabilities for these two types of claims a if own claims that he has been presented a document d0stamped di erent from the alleged document d stamped then a.sap shall be liable if sigapp has forwarded to own a document stamped di erent from the document received from ecc .
b. otherwise mpp shall be liable.
b if own claims that he has never been presented any document stamped then a. if the smart card has wrongly validated a pin for documentdstamped then scp shall be liable.
b. otherwise mpp shall be liable.
we do not discuss the value or justi cations for this informal agreement here and just take it as an example of a possible share of liabilities.
it should be clear that this share of liabilities is the result of a negotiation between the parties based on a combination of technical as well as business and legal arguments and it does not have to and usually cannot be justi ed formally.
the point is that the formal framework should not impose any undue constraint on the share of liabilities but should provide means for the parties to express their wishes as precisely as possible.
.
legal context even though the intention of the parties is to settle liability issues in an amicable way according to well de ned rules it is obvioulsy necessary to take into account the legal context pursuant to computer systems.
any misconception or overlooking of the legal constraints might lead to contractual clauses that could be invalidated in court thus increasing rather than reducing legal risks.
the two main categories of legal constraints to be considered here concern the two main phases of the process the formal de nition of the share of liabilities among the parties and the analysis of the log les to establish these liabilities after the facts.
in the following we examine these two categories of legal constraints in turn.
5because mpp plays the role of mobile phone operator he takes the risk in connection with the customer.
.
.
liability limitations the rst criterion to be taken into account to assess the validity of contractual liability limitations and exemptions is the quali cation of the parties speci c protections are provided by law to consumers.6we rst consider contracts involving only professionals.
several cases of invalidity of liability limitation7clauses are de ned by law.
the rst obvious cases where the liability limitation would be considered null and void are when the party claiming the bene t of the clause has committed acts of intentional fault wilful misrepresentation or gross negligence.
another case is the situation where the limitation would undermine an essential obligation of a party and would thus introduce an unacceptable imbalance in the contract.
this situation is more di cult to assess though and left to the appraisal of the judge who may either accept the limitation consider it null or even impose a di erent liability cap.
as far as consumers are concerned the law o ers a number of protections which severely restrict the applicability of liability limitation clauses.
the philosophy of these rules is that the consumer is in a weak position in the contractual relationship and legal guarantees should be provided to maintain some form of balance in the contract.
for example professionals must provide to their consumers non conformance and hidden defects warranties in french law and implied warranty including merchantability and tness in the american uniform commercial code.
any clause which would introduce a signi cant imbalance at the prejudice of the consumer would be considered unconscionable.
let us note that we have focused on contractual liability here liability which is de ned in the contract itself of course strict liability when a defect in a product causes personal or property damages will always apply with respect to third parties actors who are not parties to the contract .
it is still possible though for professionals to de ne contractual rules specifying their respective share of indemnities due to a victim third party by one of the parties.
to conclude this subsection let us mention other criteria that need to be taken into account to re ne the legal analysis in particular the quali cation of the contract itself product or service agreement in case of a product agreement whether it is quali ed as a purchase agreement or a license agreement the nature of the software dedicated or o the shelf software the behaviour of the actors etc.
6in french law a party is considered as a consumer if he does not execute the agreement in the context of a professional activity irrespective of the fact that he may have technical skills in computers.
7in the sequel we use the expression liability limitation as a shorthand for liability limitation or exemption .
8the faurecia case illustrates the di erent interpretations of the notion of essential contractual obligation .
the nal decision of the cour de renvoi de la cour de cassation november 26th has invalidated the decision of the cour de cassation february 13th2007 which had itself declared the liability limitation clause invalid.
the cour de renvoi has declared that the limitation of liability was not in contradiction with the essential obligation of the software provider oracle because the customer faurecia could get a reasonable compensation.
9in european laws the victim of a defect caused by a product can sue any of the actors involved in the manufacturing or distribution of the product.
.
.
log files as evidence the rst observation concerning the contractual use of log les is that digital evidence is now put on par with traditional written evidence.
in addition as far as legal facts are concerned as opposed to legal acts such as contracts the general rule is that no constraint is imposed on the means that can be used to provide evidence.
as far as legal acts are concerned the rules depend on the amount of the transaction for example no constraint is put on the means to establish evidence for contracts of value less than one thousand and ve hundred euros in france.
the logs to be used in the context of lise concern the behaviour of software components which can be quali ed as legal facts.
even though they would also be used to establish the existence and content of electronic contracts as in our case study we can consider at this stage that their value would be under the threshold imposed by law to require written evidence or that the evidence provided by the log les would be accepted as written evidence under the aforementioned equivalence principle.
a potential obstacle to the use of log les in court could be the principle according to which no one can form for himself his own evidence .10it seems increasingly admitted however that this general principle allows exceptions for evidence produced by computers .
as an illustration the printed list of an airline company showing the late arrival of a traveller at the boarding desk was accepted as evidence by the french cour de cassation .11another condition for the validity of log les as evidence is their fairness and legality.
for example a letter or message recorded without the sender or receiver knowing it cannot be used against them.12as far as the lise project is concerned attention should be paid to the risk of recording personal data in log les in certain cases such recording might be judged unfair and make it impossible to use the log as evidence in court.
generally speaking to ensure the strength of the log based evidence provisions in the agreement it is recommended to de ne precisely all the technical steps for the production of the log les their storage and the means used to ensure their authenticity and integrity.
last but not least as in the previous section the cases where consumers are involved deserve speci c attention with respect to evidence any contractual clause limiting the possibilities of the consumer to defend his case by providing useful evidence is likely to be considered unconscionable in court.
.
.
international law to conclude this section let us mention the issue of applicable law.
needless to say the information technology business is in essence international and even though we have focused on european laws in a rst stage more attention will be paid in the future to broaden the scope of the legal study and understand in which respect di erences in laws and jurisdictions should be taken into account in the design of the lise framework.
for example liability limitation clauses are more likely to be considered as valid by american courts which put greater emphasis on contractual freedom .
10nul ne peut se constituer de preuve a soi m eme in french.
11cass.
civ.
1re july 13th.
bull.
civ.
i n .
12similarly for phone conversation recordings.
.
formal specification of liabilities the share of liabilities between the parties was expressed in section .
in a traditional informal way.
texts in natural language even in simple legal language often conceal ambiguities and misleading representations.
the situation is even worse when such statements refer to mechanisms which are as complex as software.
such ambiguities are sources of legal uncertainties for the parties executing the contract.
the use of formal mathematical methods has long been studied and put into practice in the computer science community to de ne the speci cation of software systems their expected behaviour and to prove their correctness or to detect errors in their implementations.
for various reasons however both technical and economical it remains di cult to apply formal methods at a large scale to prove the correctness of a complete system.
in contrast with previous work on formal methods our goal here is not to apply them to the veri cation of the system itself the mobile phone solution in our case study but to de ne liabilities in case of malfunction and to build an analysis tool to establish these liabilities from the log les of the system.
it should be clear however as stated in section that our goal is not to provide a monolithic framework in which all liabilities would have to be expressed.
the method proposed in the lise project can be used at the discretion of the parties involved and as much as necessary to express the liabilities concerning the features or potential failures deemed to represent the highest sources of risks for them.
in this section we present successively the parameters which are used to establish liabilities sections .
and .
before introducing the liability function in section .
.
let us note that in order to make the mathematical de nitions and the reasoning simpler the notions used in this section represent an abstraction of the real system.
the link between this abstract view and the real system is described in section .
.
trace model following the informal description in section the sets of components parties and users are de ned as follows components fserv sigapp card io opsysg parties fmpp sap scpg users fown eccg is the set of stamps and cthe set of communicating entities components and users .
oandmdenote respectively the set of communication operations and message contents.
the distinction between send and receive events allows us to capture communication errors.
c components users o fsend receivegm list0 bb documents fyes nog pincodes signatures1 cca we assume that signature sessions in traces are complete and the type document response pin code signature of each element composing a message is implicitly associated with the element itself in order to avoid any ambiguity.
13this feature is not illustrated in this paper.we denote by traces the set of all traces a trace tbeing de ned as as a function associating a stamp with a list of items.
each item is de ned by the communication operation send or receive the sender the receiver and the content of the message t !list o c c m a rst comment on the above de nition is the fact that we use a functional type from stamps to lists of items to represent traces.
this choice makes the manipulation of traces easier in the sequel because we are always interested in the items corresponding to a given session.
other representations could have been chosen as well such as lists of items including the stamp information.
note that we use the term trace here and keep the word log to denote the actual information recorded by the system.
the correspondance between traces and logs is presented in section .
.
trace properties we present successively the two types of trace properties used in this paper error properties and claim properties.
.
.
error properties the most important parameter to determine the allocation of liabilities is the nature of the errors which can be detected in the log les of the system.
ideally the framework should be general enough to re ect the wishes of the parties and to make it possible to explore the combinations of errors in a systematic way.
one possible way to realize this exploration is to start with a speci cation of the key properties to be satis ed by the system and derive the cases which can lead to the negation of these properties.
our goal being to analyse log les we characterise the expected properties of the system directly in terms of traces which are abstractions of logs .
for example the fact that sigapp should send to iothe document dreceived from serv and only this document can be expressed as follows 8d2documents receive serv sigapp 2t send sigapp io 2t note that all properties are implicitly parametrised by a tracetand a stamp .
in the sequel these parameters are left implicit for the sake of readability.
in the scenario considered here the systematic study15of the cases of violation of this property leads to the following errors sigapp di 9d d02documents d6 d0 receive serv sigapp 2t send sigapp io 2t 14note that we do not consider the ordering of send and receive trace items for the sake of conciseness.
this ordering is not necessary to express the liabilities presented in section .
15space considerations prevent us from presenting this systematic derivation here.
it relies on a decomposition of the negation of the properties into disjunctive normal form and selective application of additional decomposition transformations for non existence properties.sigapp not 9d2documents receive serv sigapp 2t 8d02documents send sigapp io 2t sigapp un 9d2documents send sigapp io 2t 8d02documents receive serv sigapp 2t the terms of this disjunction correspond to three typical types of errors .
the rst term de nes a case where a message is sent with content di erent from expected.
.
the second term is a case of expected message which is not sent.
.
the third term is a case where an unexpected message is sent.
similarly the negation of the property that card returns a signature only when it has received own s pin code pown leads to several errors of the three aforementioned types from which we assume that only two are deemed relevant by the parties.
the rst one card wrongval describes a case where an approval and a signature are sent by card even though it has not received a right pin code card wrongval 9d2documents 9s2signatures send card sigapp 2t receive sigapp card 2t the second one card wronginval de nes a case where card refuses to sign a document even though it has received the correct pin code pown card wronginval 9d2documents send card sigapp 2t receive sigapp card 2t needless to say errors can also be de ned directly based on the parties understanding of the potential sources of failure of the system and their desire to handle speci c cases.
the derivation method suggested here can be used when the parties wish to take a more systematic approach to minimise the risk of missing relevant errors.
last but not least the language used to express properties for this case study is relatively simple as it does not account for the ordering of items in traces.
in general richer logics may be needed for example to express temporal properties.
the choice of the language of properties does not have any impact on the overall process but it may make some of the technical steps such as the log analysis section more or less di cult.
.
.
claim properties claim properties represent the grounds for claims of the users they correspond to failures of the system as experienced by the users.
in practice such failures should cause damages to the user for them to give rise to liabilities but damages are left out the formal model.
claims can thus be expressed like errors as properties on traces.
we consider two claim properties here di doc andnotsigned which dene the grounds for the claims introduced in section .
di doc 9d d02documents 9s2signatures d6 d0 send sigapp serv 2t receive sigapp io 2t notsigned 9d2documents 9s2signatures send sigapp serv 2t 8d02documents receive sigapp io 62t the rst de nition di doc de nes a claim corresponding to a case where own has been presented a document d0with stamp as indicated by receive sigapp io di erent from the document dsent by the signature application to the server message .
the second de nition notsigned de nes a claim corresponding to a case where the signature application has sent to the server a message indicating that own has signed a document stamped when own has never been presented any document stamped .
.
liability function the formal speci cation of liabilities can be de ned as a function mapping a claim a trace and a stamp onto a set of parties liability claims traces !p parties we use an intermediate function to de ne liability the check properties function which returns the subset of properties errors and claims holding for a session identi ed by a trace and a stamp check properties traces !p properties errors sigapp di sigapp un sigapp not card wrongval card wronginval claims fdi doc notsignedg properties errors claims where properties is the set of relevant trace properties which in our case study includes the sets errors de ned in section .
.
and claims de ned in section .
.
.
obviously other error and claim properties could be useful to de ne other shares of liabilities.
the actual implementation of check properties section is based on the de nitions of errors and claims presented in section .
.
and section .
.
.
finally the following function captures the share of lia16note that just as error properties claim properties are implicitly parametrised by a trace tand a stamp .
17p s denotes the powerset of s.bilities introduced in section .
liability c t ifc di doc then if di doc2check properties t then if sigapp di 2check properties t thenfsapg elsefmppg else ifc notsigned then if notsigned2check properties t then if card wrongval 2check properties t thenfscpg elsefmppg else the two cases in liability correspond to the two types of claims considered in section .
.
for each type of claim the goal of the rst test is to check the validity of the claim raised byown .
ifown raises a claim which is not con rmed by the trace then the result of liability is the empty set because no party has to be made liable for an unjusti ed claim.
if own claims to have been presented a document d0different from the alleged document dand this claim is conrmed by the trace di doc2check properties t then sap is liable if sigapp has forwarded to own a document stamped di erent from the document received from ecc sigapp di 2check properties t otherwise mpp is liable.
similarly if own s claim is that he has never been presented any document stamped and this claim is conrmed by the trace notsigned2check properties t then scp is liable if the smart card has wrongly validated a pin in session card wrongval2check properties t otherwise mpp is liable.
.
log architecture and analyser the formal liability framework presented in the previous section is useful in itself because it makes it possible to dene liabilities in a very precise way.
its role can be enhanced however if the actual system can be supported by facilities to record the required log les so that experts can be sure to nd all useful information after the facts and if these log les can be analysed automatically based on the liability speci cations.
in this section we sketch successively the log infrastructure and analyser for our case study.
.
log architecture the formal setting proposed in section de nes traces as lists of items corresponding to individual message exchanges between components.
this choice is motivated by its generality and the possibility to model a variety of concrete implementations.
as mentioned in section .
the implementation of our case study is based on osgi a java based environment for the design of applications made of dynamically loadable collections of classes called bundles.
our osgi implementation consists of three bundles implementing the following interfaces public interface sigappifc public string submitdoctouser string doc public interface cardifc public string sign string doc int pin public interface ioifc public string asktouser string doc listing osgi interfaces of the system each bundle provides one service through a java public method which corresponds to a pair of request answer messages in figure .
for example the method submitdoctouser corresponds to the pair of messages 2and n 9y ror9 y w depending on the outcome of the transaction.
the parameter of the method corresponds to the value doc passed in message 2and the string returned as a result is used to encode the di erent types of answers n y r and y w .
similarly the method sign corresponds to the pair of messages yand8 y r or8 y w and the method asktouser to the pair 3and6 yor6 n. table shows the correspondence between the messages of figure which are equivalent to pairs of trace items de ned in section and the osgi method calls and returns.
we have designed and developed an extension to the osgi framework that we call logos log over services which records every service use.
for each access to a service implementation the framework generates on the y a proxy that intercepts the call logs the query of the call and forwards it to the implementation.
logos is built on top of felix 18an open source implementation of the osgi specications.
the source code of logos the logos patch for felix and the implementation of the components presented in this document are available on the inria forge.
.
analyser the liability function was expressed in terms of traces in section .
traces were de ned in subsection .
as functions mapping stamps to sequences of items thus at a more abstract level than the logs e ectively recorded by logos.
the goal of the analyser is to implement the liability function speci cation of section .
based on the e ective logos log le format and the correspondence between traces and log les.
the four main phases of the analysis are the following .
the rst phase is the identi cation of the part of the log les which is relevant for the analysis.
this part obviously depends on the claim.
in our case study the stamp can be used to identify the relevant signature session and thus to extract the useful parts of the log.
this phase of the analyser is made simpler here because of the assumptions of stamps uniqueness and integrity.
identifying a given session can be a more complex task in general.
.
the second phase consists in transforming the relevant parts of the logs into a trace.
table describes this transformation stage for our case study.
for example let us consider a logos log le item recording the call by the sigapp bundle to the asktouser service of the iobundle for a document doc1 and stamp sigapp io ioimpl ioifc asktouser doc1 20note that logos log le items include more information than traces such as the times and dates.generic trace items message number corresponding method components sender!receiver message type exchangedaccording to figure call or return serv!sigapp call to submitdoctouser sigapp!serv n return from submitdoctouser sigapp!serv y r return from submitdoctouser sigapp!serv y w return from submitdoctouser sigapp!io call to asktouser io!sigapp y return from asktouser io!sigapp n return from asktouser sigapp!card y call to sign card!sigapp y r return from sign card!sigapp y w return from sign table relation between trace items messages and methods following table this log item can be transformed into the following trace items for stamp send sigapp io receive sigapp io send io sigapp receive io sigapp .
the third phase is the application of check properties to check the validity of the claim and nd the errors occurring in the trace.
again this phase is made easier by the fact that the properties needed to express the share of liabilities considered here are fairly simple.
all these properties errors in section .
.
and claims in section .
.
are expressed as the presence or absence of certain items in the trace which can be implemented by systematic searches in the trace constructed from the log les.
.
the fourth phase is the exploitation of the result of the check properties function to compute liability .
this phase is straightforward since it amounts to the implementation of the simple tests speci ed in the de nition ofliability in section .
.
the simple four phases structure sketched here obviously needs to be optimized in order to avoid the search for all properties claims and errors in the trace only the claim raised by own and the errors useful for this claim23need to be searched in the trace.
check properties is thus not implemented as such but split into speci c functions searching for speci c properties.
.
related work the signi cance of liability warranty and accountability and their potential impact on software quality have already been emphasized by computer scientists as well as lawyers .
however we are not aware of previous work on the application of formal methods to the de nition of 21as stated above the duplication of send and receive events is useful in general to detect communication errors.
this feature is not illustrated here though because communication errors have not been used to de ne the share of liabilities.
22note that in contrast with the use of formal modals for program veri cation we only need to check these properties on a given trace here rather than for all possible execution traces and this trace is obviously nite.
23for example only the error sigapp di is useful to compute liability for the claim di doc .software liability.
earlier work on the speci cation of contracts mostly deal with obligations in a general sense with speci c types of contracts such as commercial contracts or privacy rules or with the responsibility of agents in multi agent systems but do not address liabilities related to software errors.
it should be clear however that several connected areas share part of our objectives and provide useful hints and results software dependability is also concerned with failure analysis using for example fault trees or fmeca analysis processes but focuses on fault prevention tolerance and removal rather than on the speci cation of liabilities.
model based diagnosis provides techniques for fault analysis and diagnosability based on observability properties.
diagnosis can be carried out either o line or on line24with di erent cost and time constraints.
faults are generally represented as single events rather than as logical properties in our approach.
again the objective of model based diagnosis is to detect faults and analyze them in order to take appropriate measures rather than to determine the liable parties after a failure has occurred and damages have been caused.
intrusion detection systems also aim at detecting unexpected behaviours but they are targeted towards security attacks rather than faults.
they are generally classi ed into two categories the anomaly detection and the misuse detection approaches the rst one being based on a model of the correct behaviour of the system and the second one on typical attack patterns.
as stated in the next section our framework can accomodate both negative properties as shown in this paper and positive properties correct behaviours .
in contrast with intrusion detection however we do not have any real time constraint here and accuracy is far more signi cant than e ciency for liability analysis.
forensics and digital evidence share with lise the objective to analyse digital information in a legal setting.
however the contributions in these areas are generally targeted towards security attacks or computer crime investigations rather than the identi cation of liable parties in a software o board or on board for embedded systems.contract.
technically speaking a signi cant impact is the fact that in our setting the search in the logs is driven by pre de ned properties errors and claims .
service level agreements also de ne contractual provisions but generally focus on quality of service rather than functional requirements and do not put emphasis on formal speci cations.
a notable exception is the slang language which is endowed with a formal semantics and can be used to specify a variety of services such as application service provision internet service provision or storage service provision.
in addition the monitorability and monitoring of slang services have been considered both from the formal and practical point of view .
needless to say each of the above areas are useful sources of inspiration for the lise project but we believe that none of them because of their di erent objectives provides the answer to the key problem addressed in this paper namely the formal speci cation and instrumentation of liability.
.
conclusion first we should stress that the set of methods and tools provided by the lise framework can be used in an incremental way depending on the wishes of the parties the economic stakes and the timing constraints for drafting the contract .
the rst level is a systematic but informal de nition of liabilities in the style of section .
.
.
the second level is the formal de nition of liabilities as presented in section .
.
this formal de nition itself can be more or less detailed and encompass only a part of the liability rules de ned informally.
in addition it does not require a complete speci cation of the software but only the properties relevant for the targeted liability rules.
.
the third level is the implementation of a log infrastructure as shown in section .
or the enhancement of existing logging facilities to ensure that all the information required to establish liabilities will be available if a claim is raised.
another option is to check that it will be possible to extract the required information from regular les if needed.
.
the fourth level is the implementation of a log analyser as shown in section .
to assist human experts in the otherwise tedious and error prone log inspection.
.
a fth level not presented here would be the veri cation of the correctness of the log analyser with respect to the formal de nition of liabilities considering the correspondence between log les and traces .
this level would bring an additional guarantee about the validity of the results produced by the system.
each of these levels contributes to reducing further the uncertainties with respect to liabilities and the parties can decide to choose the level commensurate with the risks involved with potential failures of the system.
the notions of trace and property have been presented in a somewhat simpli ed way in this paper.
it may be the case that not all the relevant information is included in the log les of the system.
for example in our case study the fact that the customer own has declared the theft of hismobile phone or has signed an acknowledgement receipt for a product sent by the e commerce company can be useful information to analyse the situation depending on the liability rules decided by the parties .
traces can thus be more than abstract versions of the log les and include other types of actions from all the actors involved.
also we have de ned properties aserrors claims here.
in general it can be useful to use other types of properties to de ne liabilities for example the fact that own has answered yes to the signature request sent by sigapp here .
these properties can be included into properties without any impact on the rest of the process.
as far as the methodology is concerned we are working on an iterative process for the elaboration of the formal speci cation of liabilities involving interactions with the parties to discover oversights or missing errors and to take into account logging constraints.
logging constraints are typically related to implementation issues e.g.
performance penalties or log distribution security requirements or privacy issues .
for example in our case study logging critical data such as pin codes outside the smart card would not be acceptable thus requiring an iteration step to de ne an equivalent or approximated de nition of liability that could be re ected in the logs.
in addition it is necessary to take into account observability issues previous work on model based diagnosis and diagnosability will prove useful to this respect.
in general liabilities will be expressed by a combination of informal and formal means both of which being integrated in the legal agreement.
we are working on a framework allowing the parties to feed their contract with clauses automatically generated from the formal speci cations of liability with seamless integration with the rest of the contract.
the nal objective is to allow contract drafters to manipulate statements either in natural language or in formal language while maintaining the links between the two parts and the consistency of the whole document.
this extension is based on our previous work on the links between mathematical texts and natural language explanations .
in terms of implementation of the log infrastructure one distinguishing feature of the case study considered here is the possibility to manage the log in a centralised way.
obviously this may not be the case in many situations which will add the extra di culty to de ne correspondences or causality relationships between items in di erent logs .
last but not least we are currently working on two other key issues related to log les which have not been discussed here their optimisation in terms of storage compaction retention delay etc.
using an index based factorization method and techniques to ensure their authenticity and integrity including trusted serialization of log items.
.
additional authors christophe alleaume print university of caen bassenormandie val erie laure benabou dante university of versailles saint quentin en yvelines denis beras amazones inria grenoble rh one alpes insa lyon christophe bidan ssir sup elec rennes gregor goessler popart inria grenoble rh one alpes julien le clainche licit inria grenoble rh one alpes ludovic m e ssir sup elec rennes and sylvain steer dante university of versailles saint quentin en yvelines .
.