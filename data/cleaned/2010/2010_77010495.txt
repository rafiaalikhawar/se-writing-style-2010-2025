iterative test suites refinement for elastic computing systems alessio gambi university of lugano lugano switzerland alessio.gambi usi.chantonio filieri university of stuttgart stuttgart germany antonio.filieri informatik.uni stuttgart.deschahram dustdar vienna university of technology vienna austria dustdar dsg.tuwien.ac.at abstract elastic computing systems can dynamically scale to continuously and cost e ectively provide their required quality of service in face of time varying workloads and they are usually implemented in the cloud.
despite their wide spread adoption by industry a formal de nition of elasticity and suitable procedures for its assessment and veri cation are still missing.
both academia and industry are trying to adapt established testing procedures for functional and nonfunctional properties with limited e ectiveness with respect to elasticity.
in this paper we propose a new methodology to automatically generate test suites for testing the elastic properties of systems.
elasticity plasticity and oscillations are rst formalized through a convenient behavioral abstraction of the elastic system and then used to drive an iterative test suite re nement process.
the outcomes of our approach are a test suite tailored to the violation of elasticity properties and a human readable abstraction of the system behavior to further support diagnosis and x. categories and subject descriptors k. .
quality assurance general terms experimentation measurement performance keywords cloud behavioral modeling model based testing .
introduction cloud computing is gaining momentum and many companies are moving towards its adoption for business critical applications .
on demand resources allocation and payas you go cost models are the enabling features for designing this work is partially supported by the swiss national science foundation under the fellowship for prospective researches contract pbtip2 .
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
to copy otherwise to republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
esec fse august saint petersburg russia copyright acm ... .
.elastic computing systems that can adapt to time varying workloads in order to make applications continuously satisfy quality of service qos requirements still minimizing operative costs.
the main research trends in the area of cloud based elastic computing are mostly concerned on design principles and benchmarking while quality assurance is often delegated to the dynamic scaling capabilities of the infrastructure only.
supporting elasticity requires e ective trade o strategies.
the application is indeed required to scale up quickly in response to a growing incoming workload though avoiding unnecessary over provisioning and furthermore to e ciently release resources no longer needed scale down .
a common praxis in designing elastic systems is to tailor the design of resource allocation controllers to speci c expected workloads.
being rule based controllers the state of practice this usually ends up in the de nition of a suboptimal ruleset to control resources allocation.
most often rules are identi ed by simulating the application execution under expected workloads e.g.
.
the main drawback in such a case is the inability to deal with workload proles unforeseen at design time.
the lack of a convenient methodology in workload pro ling for elastic systems exposes designers to the risk of missing the identi cation of critical usage scenarios that might lead to emergent behaviors and could jeopardize the application execution.
this is especially true for cloud computing where classic design commonsense may sometimes fail as we showed for example in where an elastic system reacted in a quite counterintuitive way to two wave shaped workloads of di erent intensity.
the prompt reaction of the system to the high intensity wave could misleadingly suggest the system can deal with all the lower intensity loads up to that scale.
however the same system when solicited with a signi cantly lower intensity workload failed to scale correctly.
this resulted in an overall degradation of its performance.
islam et al.
provided another example where an elastic web application showed a diverging behavior leading to the acquisition of an ever growing amount of resources from the cloud when subjected to an oscillatory workload with speci c constant amplitude and oscillation frequency.
in both cases allocation controllers were rule based.
the previous examples highlight the quest for a paradigm shift in quality assurance methodologies where elasticity has to be explicitly taken into account.
in this paper we focus on the de nition of a systematic model based test generation framework for the assurance of elasticity properties that iteratively enhances an initial test state spaceidentificationfrequencesinterpolation guidedtest casegenerationtest executiontestsuitereportproblematicworkloadproblematic workloadfound?ny initialtest suite model constructionfigure overview of the proposed approach.
suite.
elasticity properties include elasticity itself i.e.
the ability of dynamically allocating and deallocating resources on they and special forms of its violation including plasticity i.e.
the inability to spontaneously return to the original con guration after an adaptation process and resonance i.e.
the emergence of permanent oscillations in resource allocation in response to speci c input workloads.
testing elasticity properties presents several challenges that we try to summarize in the following observations i elasticity depends on complex interactions between computing infrastructures applications control logics and external environmental conditions e.g.
the interaction with third parties components ii broadly applicable guidelines for testing elastic applications in the cloud are still missing making handcrafted test cases often biased as in the previous examples or unable to capture counterintuitive dynamics nally iii results obtained by testing an elastic system in a speci c cloud environment are hard to generalize to other clouds because of the lack of a wide scope abstraction model that allows an infrastructure agnostic representation of elasticity concerns.
the expected contributions of this new research thread can be summarized in the following points an abstract behavioral formalism suitable for capturing and describing elasticity concerns supporting automatic reasoning about elasticity properties.
an automatic procedure for inferring systems behavioral models from test executions and re ning them after new test results are gathered.
an iterative test suite re nement procedure that exploits the acquired knowledge as captured by the abstract model to nd test candidates likely to make the system violate its elasticity properties.
the execution of the generated test cases produces further information to con rm the presence respectively absence of undesired behaviors of the application and to enhance the model before the next iteration.
.
the approach an overview of the new idea proposed in this paper is provided in figure .
the process begins with an initial test suite either provided by the designer or generated randomly.
a test suite contains a set of workload pro les each of which can be de ned as an instantiation of a parametric class of workloads.
a parametric class of workload pro les is de ned as a time dependent parametric function f w t wheret denotes the time and wis a parameters vector and represents the number of incoming requests at time t. we require every feasible workload to be positive and bounded i.e.
negative or in nite number of requests cannotbe issued.
formally 9m2rs t f m where r is the set of real numbers.
furthermore we require every incoming workload to have a nite horizon that is all the requests have to be issued within a nite time.
this implies that9 t2r s t 8t tf t .
the second constraint makes it possible to verify whether the system is able to eventually return to its original con guration.
the structure of f de nes the type of solicitations to test the system with and can be arbitrarily complex.
for example in a parametric sine function has been used to test the response of the system to oscillatory loads.
a workload pro le is uniquely characterized within its parametric class by an assignment wof the function parameters.
for simplicity we assume that a test suite is composed by workload pro les belonging to the same parametric class.
the test suite is executed on an instance of the application.
if any test case leads to the violation of required elasticity properties the corresponding workload pro le is marked as problematic and reported to the designers in order to drive diagnosis and x. otherwise the test suite undergoes a re nement attempt.
the rst step for re ning the test suite is the construction of a model capturing the elasticity behavior of the system.
this model is a labelled transition system lts where states capture the current resources allocation and transition labels describe the frequency of transitions occurrence during the execution of the test suite.
the initial state of the lts represents the initial con guration of the system.
for the sake of simplicity here we assume the resources allocation to be simply described by the number of computing instances in use and the controller to be only able to allocate or deallocate identical instances i.e.
not to change their local con guration .
transition frequency w i jfrom statesito statesjis directly computed for each input workload wfrom test results data as follows.
let ni jbe the number of observed transitions formsitosjduring the execution of the workload w i j ni jp sk2sni k intuitively if the system scales up and down correctly for all the observed states possibly with the exception of the initial one both incoming and outgoing frequencies cannot be zero otherwise the system would be stuck in one con guration plasticity .
furthermore if the system is behaving properly to each scale up should correspond a scale down requiring the corresponding frequencies to get close one another.
finally in case of permanent oscillations resonance it would mostly likely be possible to identify parts of thelts resembling a strongly connected components.
all such situations can be mapped on convenient patterns on transition label values.
for the sake of simplicity in this paper we will focus on plasticity.
analogous approaches can be used for the other mentioned properties.
after computing the transition frequencies their dependency on the input workload has to be assessed.
being input workloads uniquely characterized by the parameter vector w a set of functions i j w are computed in order to approximate the frequencies w i jby interpolating their dependency on the value of the parameters vector w. that is for a given workload w i j w w i j. the structure of the functions i j is a priori unpredictable.
they are in general multivariate given the size ofw and may be non linear.
furthermore being the data generated via random testing it might be the case that the observed frequencies do not constitute a representative sample for inferring the transition functions.
for these considerations parameter tting methods may not be suitable for our purpose driving our choice of using statistical interpolators.
the latter are indeed able both to approximate arbitrarily complex functions of the parameter space wand to provide con dence intervals for each interpolated point.
con dence intervals capture the uncertainty that stems from the limited knowledge due to nite sampling.
we are currently planning to achieve statistical interpolation by gaussian processes .
gaussian processes generalize gaussian probability distributions in the functional space providing for each input value wa gaussian distribution n w such that when the number of samples grows the expected value of the distribution converges to the real value of the approximated function and the variance 2tends to .
for this reason w can be considered as a correct estimator of the interpolated function in our case any of the frequency functions w i j while the variance 2provides a measure of the uncertainty of the estimation.
as soon as the interpolation process is completed a con dence measure on the constructed model can be provided as the maximum variance over w or more precisely over a reasonable parameter sub space considered feasible .
based on the constructed model the test suite can be improved having in mind two orthogonal goals identify problematic workload pro les and improve model con dence.
the two goals do not interfere one another and can be pursued simultaneously .
in order to generate input workloads likely to reveal plasticity of the application the heuristic we propose is based on nding vectors wthat either make frequencies of selftransitions close to one or frequencies related to scale up or down overall close to zero.
by exploiting the previously constructed behavioral models this means nding the values wthat make the proper i j w close to one or to zero.
such heuristic may provide a speedup with respect to a random exploration of the parameter space that could be very large even for a small number of parameters.
furthermore the uncertainty captured by the model provides further guidance to the test case generation process.
indeed a value wcould make w 0for a transition but it may turn out to be a false positive due to the inaccuracy of the model.
the probability of such erroneous assessment can be bounded by using the variance w for a standard hypothesis testing.
the second goal of test case generation is the improvement of the inferred behavioral models.
this goal can be achievedby adding test cases corresponding to input regions leading to high values of .
adding samples in such regions will improve model con dence and consequently make the research of the wvalues more e ective by reducing the number of false positives.
the new test cases identi ed by the previous heuristic can then be added to the initial test suite and executed during the next iteration.
notice that the test suite is executed incrementally thus the execution time of each iteration depends only on the new test cases to be executed.
a possible criterion to decide the termination of the iterative test suite re nement is the reach of an high con dence on the behavioral model while no wcan be found that makes transition function close to zero or to one for self transitions .
.
novelty the work presented in this paper nicely ts along with previous work on queuing theory and performance modeling and to the best of our knowledge its contributions that are hereafter summarized have not been explored before the formalization of elasticity properties by means of formal patterns on lts models.
the behavioral abstraction strategy accounting for both model structure and transition frequency interpolation as functions of the workload parameters that includes also a con dence measure on the inferred models.
the model based heuristic for test case generation that aims both to maximize the probability of generating problematic input workloads and improve the quality of the behavioral model.
compared to pure random testing our approach may reduce the number of the generated test cases thanks to the direct search thus it can reduce the overall testing time and e orts.
furthermore the con dence measure of the model provides a progress index for the re nement process and allows to quantify the achieved improvement after each iteration.
.
expected feedback the main points we would like to discuss with the audience are pointed out by the following questions is the behavioral model that we propose suitable to capture all the elasticity concerns?
how about other quality properties that are speci c of elastic systems?
what would will be a promising alternative to lts?
statistical inference is computationally expensive.
a parametric model for frequency functions could allow the use of established and e cient parameter tting algorithms.
is there any valid parametric model that we can use in place of gaussian processes?
how can we exploit the knowledge that we obtained by testing elastic systems on a speci c cloud to get insights about their deployment on di erent platforms?
what are the characteristics to take into account in order to assess the validity of reusing previous results at least up to a certain degree of con dence?
is simulation suitable for analyzing elastic applications?
would you recommend speci c benchmarks or case studies to assess the validity of our approach?
.
related work in their previous work the authors investigated the use of kriging models a variation of gaussian processes formodeling cloud based systems described the grounding principles of elastic processes a research agenda for elastic computing and a novel language for their design .
the single most related paper by the authors is where they propose an automatic test case generation for elastic systems based on genetic algorithms and introduce the idea of parametric workloads for the compact representation of test cases that we used here.
in this paper authors propose an alternative approach for generating test cases that builds an informative model of the system behavior and tries to speed up the generation process following a formally grounded heuristic instead of pseudo randomized search.
model based test case generation is a widely investigated topic .
avritzer and weyuker used behavioral abstractions of software behaviors to drive the automatic generation of load test suites.
in particular they analyzed a markov model of the system to identify incoming requests rate likely to degrade its performance.
in our approach workloads are possibly characterized by complex functions not just their request rate.
analysis methods are consequently di erent too.
more recently barna et al.
proposed an adaptive method to discover software and hardware bottlenecks and to automatically generate workloads that saturate them.
the generation process is guided by performance models tted from previous runs and drives the system towards the worst case behavior.
we follow a similar principle though we speci cally target elasticity properties.
.
outlook the approach presented in this paper is undergoing a rst evaluation through simulation.
the preliminary results obtained for oscillatory workload pro les are encouraging.
after this preliminary assessment we plan to validate our methodology on real applications.
for this purpose we are developing tools to support trace based test execution in the cloud and integrating them with popular clouds such as amazon ec2 and openstack.
we will release the prototype in order to let practitioners use it and to collect their feedbacks.
we also plan to consider further workload families in order to replicate problematic situations recently reported in literature thus enabling a thorough comparison.
among the many aspects that deserve further investigation we will focus mainly on elastic behavior formalization .
the lts behavioral abstraction provided in this paper leads to nite states automata closely resembling discrete time markov chains dtmcs .
as a quite intuitive idea our elasticity properties seem to have tight relations with the notions of ergodicity and recurrence related to dtmcs.
if proved correct such a modeling would pave the way to the adoption of a whole new set of quantitative veri cation approaches.
also our heuristic could be enhanced by results from our previous research on parametric model checking possibly speeding up the search of problematic workloads.
controller abstraction .
in this paper we consider cloud based applications as a whole including resource allocation controllers and infrastructures.
being able to take into explicit account the controller s logic could provide valuable insights about the dependence of the problematic behaviors not just on the workload but also on speci c properties of the resource allocation strategy.
this could support the automatic generation of controllers speci cally tailored to elastic systems extending our previous work .
.