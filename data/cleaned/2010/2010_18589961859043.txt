a bounded statistical approach for model checking of unbounded until properties ru he dept.
of computer science iowa state university rhe iastate.edupaul jennings dept.
of computer science iowa state university poj iastate.edusamik basu dept.
of computer science iowa state university sbasu iastate.edu arka p .
ghosh dept.
of statistics iowa state university apghosh iastate.eduhuaiqing wu dept.
of statistics iowa state university isuhwu iastate.edu abstract we study the problem of statistical model checking of probabilistic systems for pctl unbounded until property p1p 1u 2 where using the computation ofp 1u 2 .
the approach is first proposed by sen et al.
in cav but their approach suffers from two drawbacks.
firstly the computation of p 1u 2 requires for its validity a user specified input parameter 2which the user is unlikely to correctly provide.
secondly the validity of computation of p 1u 2 is limited only to probabilistic models that do not contain loops.
we present a new technique which addresses both problems described above.
essentially our technique transforms the hypothesis test for the unbounded until property in the original model into a new equivalent hypothesis test for bounded until property in our modified model.
we empirically show the effectiveness of our technique and compare our results with those using the method proposed by sen et al.
categories and subject descriptors d. .
software program verification model checking g. general terms verification keywords hypothesis testing dtmc pctl .
introduction statistical model checking techniques based on monte carlo simulations have been proposed and depermission to make digital or hard copies of all or part of this w ork for personal or classroom use is granted without fee provided th at copies are not made or distributed for profit or commercial advantage and th at copies bear this notice and the full citation on the first page.
to cop y otherwise to republish to post on servers or to redistribute to lists re quires prior specific permission and or a fee.
ase september antwerp belgium.
copyright acm ... .
.veloped for verifying probabilistic systems discrete time markov chains dtmc continuous time markov chains ctmc semi markov chains where traditional numerical verification may become unusable due to state space explosion problem.
the state space explosion problem is addressed effectively by statistical methods because these methods only require some succinct representation of the system being model checked instead of storing its state space.
the central theme of statistical model checking is that the verification of properties is based on only a finite set of sample simulation paths of the system and the result is computed within a pre specified error limit.
one of the main challenges in the effective application of the statistical model checking for probabilistic systems is the verification problem of pctl csl until properties of the form p1p 1u 2 where andp .
this is to verify whether a path starting from a state in the system satisfies 1u 2with probability 1p.
a path satisfies 1u 2if and only if there exists some state sj in the path of any length that satisfies 2and in all the states before sjin the path 1is satisfied.
the challenge stems from the fact that statistical methods rely on prespecified finite length simulations and this may lead to the existence of some finite simulation where every state satisfies 1but no states satisfy 2. as a result it cannot be inferred decided whether 1u 2is satisfied or not along such a simulation path.
in this paper we will also refer to until path property 1u 2asunbounded until path property.
to counter this problem sen et al.
propose a statistical model checking algorithm based on monte carlo simulation and hypothesis testing.
the key aspect of their approach is the introduction of a basis procedure which is repeatedly used to verify p1p 1u 2 within a given error bound.
the basis procedure is essentially a specific statistical hypothesis test p 1u 2 i.e.
whether a state is the root of some path satisfying 1u 2. it is worth mentioning here that before sen et al.
propose their statistical version solution the numerical method for verifying pctlproperty p 1u 2 has already existed which is equivalent to verifying e 1u 2 non probabilisticctlproperty using traditional non probabilistic model checking method .
the underlying reason is because zero or non zero probabilistic check depends only on the topology of the transitions and not on the actual values of the transition probabilities which is similar to the fact mentioned by hart et al.
in early s. however the traditional model checking algorithm for e 1u 2 suffers from state space explosion problem the main target that all the statistical methods intend to address.
therefore since the statistical solution for p 1u 2 proposed by sen et al.
really avoids the corresponding state space explosion problem it has its importance and usefulness.
the basis procedure proposed by sen et al.
relies on the transformation of the model mwhere a terminal state is introduced such that it is reachable from every state in one step with a small stopping probability ps.
this transformation forces every simulation in the modified model to eventually terminate with a decided result i.e.
1u 2is satisfied or not satisfied.
an important user specified parameter 2 necessary for the validity of the basis procedure as proposed in depends directly on the actual probability of satisfying the given until property 1u 2by any state.
as it is impossible for the user to know this probability value a priori it is also not possible to appropriately choose 2. furthermore as the basis procedure is iteratively applied by the general procedure for verifying the general unbounded until propertyp1p 1u 2 invalidity of the basis procedure will be accumulated and will result in the invalidity of the verification result for the general unbounded until property as well.
another important and more severe drawback of the basis procedure is that in general it is not valid for models containing loops younes and simmons point out this flaw in the validity of the proof of theorem in see section .
for our discussion .
we acknowledge the usefulness of the statistical method developed by sen et al.
and address the above drawbacks by proposing a new method for solving the basis procedure.
the main idea of our solution is to update the transition probabilities of the model mto obtainm primeinstead of introducing a terminal state and changing the model structure as proposed in .
for any state swith an outgoing branching factor ds our update amounts to changing the probability of each outgoing transition to ds.
we prove that the original hypothesis testing applied to verifyingp 1u 2 at a state sinmis exactly equivalent to a modified hypothesis testing in m prime.
we establish that testing inm primerequires every simulation to run till a finite boundn wherenis the number of states in the model.
that is in essence we reduce the verification of unbounded until property in mto a verification problem for bounded n until property in m prime.
we present a procedure for the hypothesis testing within any user specified error limit.
our method eliminates the requirement of providing psor 2 as in and is applicable to models with any structure.
furthermore like other statistical methods our proposed method only requires a succinct representation of the model m does not store any state while exploration and therefore avoids state space explosion problem at the cost of computing results within a pre specified error limit .
contributions.
.
we present a new statistical procedure to check the pctlunbounded until formula p 1u 2 which is applicable to any models and can be seamlessly used by the general procedure in for the verification of general property p1p 1u 2 .
.
we transform a hypothesis testing problem of unbounded until properties in a model minto an exactly equiva lent hypothesis testing problem in a modified model m primeand ensure that each simulation path length is bounded by the number of states in the model.
to the best of our knowledge none of the existing statistical methods are able to provide such a finite bound for verifying unbounded until property.
.
our hypothesis testing is based on a modified model m primeofmwhere the modification is independent of the transition probabilities of m. as such the testing result form primeis applicable not only for the original model mbut also for all other models a with the same transition structure as mand b with the same propositions labeling each state as in m. this aspect allows for the re use of the verification result of our basis procedure for the class of similar models.
re use in turn reduces the verification effort when a large number of these similar models are being verified against the same probabilistic until property.
organization.
section provides an overview of the preliminary concepts and definitions that will be used in the rest of the paper.
section describes our solution methodology while section discusses the theoretical bounds of simulations in our method.
section presents our experimental results and empirically shows the effectiveness of our techniques.
finally section discusses related work and section discusses some future avenues of research.
.
background for the purpose of explaining and establishing the theoretical results we will consider the verification of probabilistic transition systems modeled as dtmc against the properties expressed by pctl.
the results are directly extensible to other modeling paradigms ctmc and semi markov chain and the corresponding property logics csl representing until properties.
.
probabilistic transition systems and pctl definition probabilistic transition systems .
a probabilistic transition system pts s si t l wheresis a finite set of states si sis the initial or start state t s s is a transition probability function such that s summationtext s prime st s s prime andl s p ap is the labeling function which labels each state with a set of atomic propositions apwhich hold in that state.
paths and probability measures.
a path in pts denoted by is a finite or infinite sequence of states s0 s1 s2 s3 ... such that for all i si sandt si si .
we denote the set of all infinite paths starting from sas path s .
denotes the i th state in the path and is the length of in terms of the number of transitions in .
for example for an infinite path while for a finite path s0 ... s n n n .
the cylinder set denoted by cs for a state s where is a finite length path starting from s is defined as cs prime prime path s is prefix of prime .
essentially cs is the set of all infinite paths path s with the common finite length prefix .
for any finite path with nwe define p braceleftbigg ifn t ... t otherwise 226for a cylinder cs we define pr cs p .
it is wellknown that this probability measure pr extends uniquely over all sets in the relevant algebra .
pctl syntax and semantics.
properties of pts can be expressed using pctl an extension of standard ctl augmented with probabilistic specifications.
let represent a state formula and represent a path formula.
then pctl syntax is defined as follows tt a ap p1r u u k in the above r andk ... .
we always use state formulas to specify the properties of a pts and path formulas only occur inside p1r .
.
a states or a path satisfying a state formula or a path formula is denoted by s or and is inductively defined as s tt for alls s s a a l s s s negationslash s 1 2 s 1ands 2 s p1r p s 1r in the above p s pr path s .
in other words s p1r holds if and only if the probability that is true for an outgoing infinite path from state sis 1r.
for any infinite path 1u k 2 i k 2 j i 1 1u 2 i 2 j i 1 we will refer to 1u k 2as a bounded until path formula and refer to 1u 2as an unbounded until path formula or an until path formula .
succinct representation of pts model.
as in other statistical methods our method only requires a succinct representation of the model being verified.
the succinct representation see of a pts is such that given a state s in the pts the representation allows the generation of the set of its next states tsuch thatt s t .
such representation typically has a space requirement in the same scale as the number of variables in the system.
liberatore in explains a succinct representation of a probabilistic system capturing the behavior of flipping ncoins.
the dtmc model of this pts system contains o 2n transitions while the succinct representation of the same model only considers 2npossible transition relations each capturing the event of randomly selecting one of the ncoins and tossing it while other coins remain unaltered .
.
verifying p1p 1u 2 usingp 1u 2 we present the method proposed by sen et al.
in algorithms and .
algorithm which captures the main idea of the general procedure computes the estimate of p s 1u 2 by performing jsimulations from state sand computing the proportion of the simulations that satisfy the given until property line .
if a state in the simulation path does not satisfy 2 algorithm the basis procedure is invoked to decide whether the state is the root of any path satisfying 1u 2 line .
algorithm executes on a modified model m primewhere every state can reach a terminal statealgorithm compute p s 1u 2 require j the number of simulations starting from sin m x for each simulation ofjsimulations from sinm do i while true do if 2 then x x break else if decide p 1u 2 then break else i i end if end while end for returnx j algorithm decidet p 1u 2 require type i error limit 2 k0 log log 2 for each simulation primeofk0simulations from tinm prime do if prime 1u 2 then return false end if end for return true which satisfies 1 2 in one step with a pre specified probability ps all the existing probabilities are accordingly modified by multiplying with ps such that the sum of the probabilities of the outgoing transitions of any state is equal to see definition .
if algorithm returns false i.e.
there exists a path from inm primethat satisfies 1u 2 then the process is iterated starting from the next state of the simulation path the index of increments in line .
there are two problems in algorithm .
first the number of simulations k0required for algorithm line depends on 2 a user specified parameter.
we show that the correct pre specification of 2is difficult if not impossible.
a pre condition condition c2 in necessary for the validity of the procedure in states that for every state sin modelm the probability that a path starting from ssatisfies 1u 2must not lie in the range 2 ps n wherenis the number of states in m and 2andpsare user specified positive parameters.
in other words if the probability of any path satisfying 1u 2isp then 2must be selected such that p ps n. as it is unlikely for the user to know p i.e.
p t 1u 2 tbeing the input state of algorithm it is not possible to choose a suitable 2for the computation of the corresponding k0.
second algorithm is not valid in general for models with loops.
for the validity of algorithm sen et al.
prove in their theorem that for any value of ps p s pre specified by user p prime ps n p wherenis the number of states in the original model m p 2s0 s3s1 f1f1f2q q q 02q20q 23q3211 s figure model showing invalidity of andp primeare the probabilities that a path satisfies 1u 2from any statetin the original and modified model respectively.
here we present a model proving the invalidity of the above claim.
the states s0ands2satisfy 1 and the state s3satisfies 2 transitions are annotated with the corresponding probabilities.
let pi p si 1u 2 .
observe that for fig.
p0 q02 p2 q01 p1 p1 p2 q23 p3 q20 p0 andp3 .
therefore p0 q02 q23 q02.q20 .
for the modified model with stopping probability ps p prime q02 ps p prime q01 ps p prime p prime p prime q23 ps p prime q20 ps p prime andp prime .
therefore p prime q02 q23 ps q02 q20 ps .
for equation to hold i.e.
for satisfying p prime ps p0for any value of ps the following must hold for any ps q02.q20 ps .
clearly this is not true for all psand as such theorem in does not hold.
in the following section we will present an alternative for algorithm which solves the above two problems.
that is our method does not depend on the actual probability of satisfying 1u 2 and is valid for any model transition structure including loops .
.
verifying p 1u 2 alternate for algorithm .
balanced model we proceed with the definition of graph structured equality between pts models.
informally two ptss are said to be graph structured equal if they differ only in the probabilities negationslash associated with each transition.
definition gs equality .
for any two ptss m s si t l andm prime s prime s prime i t prime l prime mis said to be graphstructured equal to m prime denoted as m gsm prime if and only if the following holds s s prime si s prime i l l prime and for all s t sors prime t s t t prime s t t s t t prime s t and t s t t prime s t .
it can be immediately shown that the above relation gs is an equivalence relation reflexive symmetric and transitive .
.
.
gs equivalent transformation.
the central theme of our technique relies on a specific transformation of the original pts model msuch that the transformed model m primeis gs equivalent to m. given a modelm s si t l the transformed model m primeis a tuple s si t prime l such that the domain of t primeis the same as the domain of t s t s t s t t prime s t and s t s t s t t prime s t ds whereds t t s t i.e.
dsis equal to the number of states reachable from sin one step with the original transition probability .
this transformation results in m primewhich is gs equivalent to m definition .
note that there are infinitely many gs equivalent models of m. we will refer to m prime generated by the above transformation as the balanced gs equivalent of m see remark in subsection .
one where it is equally likely to traverse in all possible directions from any state in m prime.
we will show that such a property of the modelm primeis ideal for our method.
.
derivation of equivalent hypothesis test our method for model checking the pctlproperty formula p 1u 2 in a pts model mis based on a hypothesis testing problem referred to as h where h0 null hypothesis p versus h1 alternative hypothesis p in the above p p s 1u 2 pr path s 1u 2 .
as noted in sections and the conventional statistical methods which run monte carlo simulations to directly perform the above test hcan suffer from the drawback that some simulations may not lead to a decided result for any pre specified simulation path length.
therefore the results ofhmay not be restricted appropriately within the user specified error range.
in our approach we first obtain a gs equivalent m primeusing the transformation described in section .
.
.
let n s be the number of the states in manddmaxbe the maximum or some upper bound of the out degrees of all the states in m.1then we consider a new hypothesis testing problem referred to as h prime inm primeas follows h prime p prime dmax n 1versush prime p prime in the above p primeis defined as the probability that a finite random path of length n starting from ssatisfies 1u 2 inm prime.
note that the length bound n has been explicitly imposed in our new h prime.
in short p prime p s 1u n 1 2 proposition .for any path inm orm prime satisfying pctlpath formula 1u 2 there exists a corresponding path simple which satisfies the same formula and simple does not contain any repetition of states.
proof.
the proposition holds due to the fact that 1u 2iff j 2 i j 1 i.e.
there exists a finite path primewhich is a prefix of such that prime j and prime 1u 2. proceeding further simple can always be constructed from primein the following fashion.
for every k l j if prime prime every state between prime and prime both inclusive is removed.
note that the path after each removal still satisfies the invariant 1u 2since 1and 2are both state formulas according to the pctl syntax.
finally the path obtained after all the removals results in simple the one where there is no repetition of states.
theorem .the hypothesis testing problem hinmis equivalent to the hypothesis testing problem h primeinm prime.
1note thatnanddmaxare the same across mandm primesince m gsm prime.
228proof.
to prove h0is true inm h prime 0is true in m prime.
h0is true inm p pr path s 1u 2 there exists a inm s 1u 2 simple inm simple 1u 2 proposition simple inm prime simple 1u 2 definition we have established the existence of a simple path simple that satisfies 1u 2and simple n since simple contains no repetition of states .
next let us denote simple asj0and consider the probability of any random path in m primeof lengthn which has simple as its prefix.
j0 productdisplay i 0t prime j0 productdisplay i d dmax n in the above d denotes the outgoing branching factor of thei th state in the path anddmaxis the maximum outgoing branching factor.
next consider the following events.
e1 1 1is a random path of length n inm prime which has the prefix simple e2 2 2is a random path of length n inm prime which starts at sand satisfies 1u 2 from equation pr e1 dmax n .
observe that paths ine1ande2satisfy 1u 2and paths in e1have the additional constraint that they must have simple as the prefix.
therefore e1 e2and in turn pr e2 pr e1 dmax n .
recall that pr e2 p prime equation .
proceeding further h0is true inm simple inm prime simple 1u 2 p prime dmax n h prime 0is true inm prime to prove h prime 0is true inm prime h0is true inm h prime 0is true p prime dmax n there exists a random path primeinm prime prime n prime s prime 1u 2 primeis inm prime 1u 2 definition p s 1u 2 p h0is true inm to prove h1is true inm h prime 1is true inm prime.
the proof is straightforward.
h1is true inmif and only ifp which in turn ensures that there exists no path starting from sthat satisfies 1u 2. asm gsm prime definition there exists no path in m primestarting from sthat satisfies 1u 2. therefore h prime 1is true inm prime.
the reverse can be proved in a similar fashion.
there are two important consequences of the validity of theorem .
first it allows us to transform the hproblem in mto an equivalenth primeproblem in m primebased on the existence of a simple path simple inmandm prime.
as simple n wherenis the number of states in the model simulation runs of length n is sufficient to test h primeand therefore h. observe that we do not care whether each simulation path of length at most n is a simple path or not.
in the proof of theorem we have already shown that the probability that a finite path of length n fromssatisfies 1u 2in m primeis at least dmax n .
this addresses the problem of identifying the simulation length bounds for statistically verifying unbounded until properties of the form p 1u 2 .
second the family of models which are graph structured equivalent to mwill be mapped to one m primeusing our transformation.
the result of testing h primeform primeis therefore applicable to testing hfor every member of the family.
remark .we choose m prime thebalanced gs equivalent ofm because this is an important feature to have for both the correctness and the effective application of our statistic al technique.
first for the correctness only when the original modelmis modified in such a balanced way the particular real number dmax n 1can be derived for our new hypothesis such that our new hypothesis test is exactly equivalent to the original hypothesis test.
in other words the validity of the proof for theorem relies on our balanced way of modification.
second our balanced way of modification can safeguard against some worst case simulations.
for example if the property is true in the model mwith a small probability pdue to certain valuations of transition probabilities a typical statistical method needs to run many times until the path witnessing the satisfiability is found in the simulations.
our most balanced gs equivalent m primeis able to safeguard against this extreme but important possibility.
of course it is possible that our method has higher computation cost compared to any method that deals with mdirectly e.g.
sen s method in when the true pinmis large.
but since this value of pis not known a priori we introduce our method based on m primewhich performs equally well for all possible values of unknown p. .
testing for the transformed model the hypothesis testing of h primeinm primeis performed as follows.
letp primebe the probability of a finite random path with n and 1u 2 starting from a given state s. we require ksimulations of length at most n starting from statesinm prime.
for each simulation i ... k we define the corresponding binary random variable xias follows if simulation isatisfies 1u 2thenxi otherwise i.e.
1u 2is either not satisfied or undecided for simulationiwithinn steps xi .
note that each xiis independently and identically distributed as a bernoulli random variable with parameter p prime.
if summationtextk i 1xi we reject h prime 0and conclude h prime 1ofh prime and equivalently we reject h0 and conclude h1ofh .
on the other hand if summationtextk i 1xi we conclude h prime 0ofh prime and equivalently we conclude h0of h .
stop early strategy.
a common computation saving strategy used in this type of testing is the stop early strategy.
while conducting ksimulations if the m th simulation path satisfies 1u 2 i.e.
xm the process can stopearly immediately infer that summationtextk i 1xi and conclude h prime .
this stop early saving strategy is also applied to the basis procedure in .
samples from succinct representation.
the above method of testing does not require the construction of the 229original model mor its transformation m prime.
instead we only require that some succinct representation of the original model mbe available see section .
the simulation runs can be easily obtained as follows.
for each simulation path at each currently visited state salong the path we select the next state tto proceed according to the evenly distributed transition probability dsinstead of the original transition probability t s t wheredsis the number of states reachable from sin one step.
the value of dsis directly available from the succinct representation of m. for instance for the coin flipping example discussed in section for any state ds 2n.
for the property p 1u 2 the simulation of a path is terminated a when 2is satisfied in the current state i.e.
the path satisfies 1u 2 b when 1 2is satisfied in the current state i.e.
the path does not satisfy 1u 2 or c when the length of sample path is equal to n nbeing the upper bound of the number of states in m .
this upper bound can be estimated from the number of variables present in the succinct representation of the model.
type i and type ii errors.
consider that the user specifies that the type i error the error that h0is true but the test incorrectly rejects h0 must be no greater than .
maxprob rejecth prime h prime 0is true maxprob summationtextk i 1xi p prime dmax n dmax n k therefore to control type i error within we could set k to log log .
for controlling the type ii error the error that h0is false but the test incorrectly acceptsh0 within similarly we have maxprob concludeh prime h prime 0is false maxprob summationtextk i 1xi p prime therefore type ii error of our test is always .
in our analysis we assume that 1u 2does not include any nested probabilistic operators i.e.
the checking of 1 and 2can be done without any error.
for the nested probabilistic operators the mechanism to control the error propagation has already been described in and later used in the checking framework presented in .
as our procedure is an alternative basis procedure that can replace the one proposed in the same mechanism to control error propagation can be applied to our method.
.
theoretical bounds on simulation the product of mean simulation length and sample size the number of simulations is a unified measurement of the computation cost of a simulation based statistical method.
we will compare between the computation costs of the method proposed by sen et al.
method a and the method proposed in this paper method b .
bound on the simulation length.
as noted before method a ensures the finiteness of every simulation because in every simulation each step has the probability psto end in the terminating state.
as a result the number of steps i.e.
the simulation length has a geometric distribution with the1 r1s0 s2snsok serr .....q rr rr r r1 q s figure model of ipv4 zeroconf protocol.
parameter no less than ps.
though it is not possible to provide an upper bound on the simulation length the average length of simulation can be inferred to be less than or equal to ps.
in the authors suggested that psbe set toc n wherecis a positive constant and nis the number of states in the model.
therefore on average the length of the simulations for method a is o n .
on the other hand as per method b each simulation may proceed up to n steps.
therefore in the worst case the length of the simulations for method b is o n .
bound on the number of simulations.
the worst case of the sample size for any method occurs when h1 p is true i.e.
s p 1u 2 .
for method a sen et al.
state that the required sample size ka log log 2 where 2is a user specified positive parameter recall that 2cannot be chosen correctly due to the invalidity of the method see section .
.
on the other hand for method b the sample size kb log log .
whenh0 p is true i.e.
s negationslash p 1u 2 both method a and method b may still require all the simulation runs.
however for method b the probability that the worst case sample size occurs is close to the tolerance limit for type i error.
in this situation we find it important to analyze the expected number of simulations at which point the testing procedure can stop early before the pre specified worst case number of simulations is exhausted.
let mbe the first simulation path that satisfies 1u 2 i.e.
the testing procedure can be stopped after m simulation runs m k k ka kb .
for method a mhas a geometric distribution with parameter .
therefore the expectation of m e m .
as claimed in lies in wherep p s 1u 2 inm.
however due to the invalidity of method a for general models see section .
the lower bound of cannot be specified asp ps n i.e.
the only conclusion that can be made is e m p. for method b malso has a geometric distribution with parameter p primeso thate m p prime dn max wherep prime p s 1u n 1 2 in our modified model m prime.
therefore whenpis small enough so that p dn max on average method b will obtain a simulation path satisfying 1u 2 earlier than method a. complexity of our proposed method.
we have established that our method requires simulation length o n and the sample size in the worst case is kb.
therefore the computation cost of our method is bounded by o n k b .
.
case study we validate our theoretical results empirically using a case probability .
.
.
.
probability .
.
.
.
.
.
a m method a b m method b figure mvaluations for runs of test procedure.
study of ipv4 zeroconf protocol modeled as pts the same model is used in .
the model contains n n states s0 s1 ... s n sok serr wheres0is the start state and the proposition error holds only in the state serr.
we will verify whether s0 p ttuerror .
observe that for positive values of qandr the correct inference is s0 negationslash p ttuerror .
furthermore the real probability p i.e.
p s0 ttuerror is a function of n qandr.
for fixed q andr pis a decreasing function of n. for fixed n pis an increasing function of qandr.
experimental setup evaluation parameters.
we use the simulation engine in prism to get all the simulation traces and then use our own java programs2to parse all the traces and perform the corresponding analysis.
we set the parameter psto be .
needed for method a across various cases which is the same as the value used by sen et al.
in their experiments in .
for both methods we keep running the simulations until we obtain one simulation which satisfies ttuerror recall that in the example case studys0 negationslash p ttuerror .
for method a it is equivalent to assuming that a sufficiently small 2is provided from the user so that its corresponding sample size is large enough to include the first simulation path satisfying ttuerror .
we evaluate the computation cost of the methods with respect tom the first simulation that satisfies ttuerror andtcs total computation steps the total number of transitions of all the required simulations in the test.
the quantitymprovides an estimate regarding the number of simulations after which the test procedure can be stopped with a valid result stop early while the quantity tcsprovides valuable insights into the computation cost of the test procedure.
note that both quantities are random variables in the test procedure i.e.
they can take different values if the same test is performed multiple times.
validity analysis of test procedures.
we setn q .
andr .
in the example model and fix the type i error bound .
we evaluate the validity of method a and method b. figure presents the results of our experiments.
the histograms present the probability proportion in runs of mvalues for both methods.
we proceed with the discussion on the impact of the selection of 2for the validity of the results obtained 2refer to rhe probupdate .using method a. following the suggestion from if we set 2 .
then the maximum number of simulations that will be used in method a is ka log log 2 .
in fig.
a the vertical line marks this value.
observe that the valuation of m the first simulation that satisfies ttuerror is greater than in out of test experiments.
therefore if 2 .
in this case provided by the user is not small enough then insufficient number of simulations will be examined in method a so that the majority of the test runs would have resulted in the incorrect inference i.e.
p p s ttuerror .
on the other hand in our method method b the appropriate number of simulations kbis calculated using the pre specified type i error limit the branching factor of the model states dmax and the number of states n. here n n and dmax in the model.
therefore kb log log marked by the vertical line in fig.
b .
observe that all the test experiments has the valuation of m .
that is with the choice of simulations all the experiments with method b can lead to the valid inference p s0 ttuerror .
also note that each mis far below the worst case value kbso that there is really a lot of computation saving from ourstop early strategy.
efficiency stability analysis.
in order to compare the efficiency and the stability of method a and method b as before we conduct experiments with sufficiently large sample size for method a such that it always includes the first simulation path satisfying ttuerror i.e.
method a is always valid .
first we obtain five different test cases by fixing q .
r .
and increasing nfrom to .
table a shows the values ofp p s0 ttuerror and the corresponding results for the sample means and standard deviations sds of m andtcsfor both methods with runs per each test case .
observe that the sample means and standard deviations of mandtcsof method b our method are smaller than those of method a. this experiment empirically shows the lower average and the higher stability of the computation cost of method b for the case study.
the results can be explained as follows.
as discussed in section e m for method a is at least p whilee m for method b is p prime dn max.
with the increase in nand for the fixed valuations of q .
and r .
the decrease in the valuation of pin method a is 231n pmethod a method b mean m sd m mean tcs sd tcs mean m sd m mean tcs sd tcs .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.12e .
.
.
.
.
.
.
.
.37e .
.
.
.
.
.
.
.
.81e .
.
.
.
.
.
.
.
.44e .
.
.
.
.
.
.
.
.53e .
.
.
.
.
.
.
.
a q r pmethod a method b mean m sd m mean tcs sd tcs mean m sd m mean tcs sd tcs .
.
.11e .
.
.
.
.
.
.
.
.
.
.33e .
.
.
.
.
.
.34e .
.
.
.
.
.
.00e .
.
.
.
.
.
.00e .
.
.
.
.
.
.25e .
.
.
.
.
.
.09e .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
b table means and standard deviations of mandtcsfor method a and method b for different valuations of a nand b q r .
more than the decrease in the valuation of p primein method b. in fact the valuation of p primeis independent of various valuations ofqandr recall that testing based on modified model m prime does not consider qandr section .
.
.
in the second set of experiments table b we fixed n and used different qandrvalues between .
and .
with runs per each test case .
the sample means and standard deviations of mandtcsfor method b remain unchanged.
this is because our hypothesis test does not depend on qand r in fact one test is sufficient to infer the results for all the models with different valuations of qandr .
on the other hand the valuation of pdecreases with the decrease in the valuations of qandr and as a result the means and standard deviations of mandtcsincrease in method a. observe that for large values of qand orr .
the sample mean of m mean m for method a is smaller than that for method b as the simulations have higher chance to reach the state serr and satisfy ttuerror .
in other words for models where the probability pfor satisfying a desired property decreases dramatically with the transition probability variations method a may suffer from the higher mean and variability of computation cost.
on the other hand our method is based on a transformed balanced model see remark one where the valuation of p primeis not affected by the transition probabilities of the original model.
assuch the efficiency and the stability of the computation in method b do not depend on the transition probabilities.
.
related work .
model checking probabilistic systems younes and simmons introduce a statistical method based on the monte carlo simulation and sequential hypothesis testing for verifying csl formulas in ctmc.
however their method excludes the unbounded until properties and is only applicable to time bounded until properties.
techniques for bounded until properties are also discussed in .
herault et al.
also propose a statistical method based on monte carlo simulation.
the technique uses estimation from chernoff hoeffding inequality to verify a subset of ltl formula and includes the checking of unbounded until properties.
however it fails to completely control the error in the procedure.
the reason is as follows.
the simulation path length used in the procedure has a pre specified upper bound.
if a simulation reaches that bound and fails to infer a decided result the technique assumes that the simulation if allowed to proceed will eventually have results defending the null hypothesis h0of the testing.
this assumption allows the procedure to control type i error within a prespecified limit.
however as admitted in the proposed 232technique cannot determine the appropriate upper bound of simulation path length to control the number of the undecided simulations.
as such the method loses the control of type ii error.
the popular probabilistic model checker prism includes a variation of the method described in .
the distinguishing feature is that unlike which allows the undecided simulations prism requires that every simulation terminates with a decided result.
to control both type i error and type ii error of checking unbounded until properties sen et al.
introduce the new statistical model checking algorithm discussed in section .
however the technique is invalid in general due to the invalidity of their basis procedure see section .
zapreev also proposes a statistical technique for verifying unbounded until properties.
this technique assumes some prior knowledge of the model structure and requires the users to provide the appropriate parameters such as simulation length.
rabih and pekergin propose a new statistical approach to model check both steady state and unbounded until properties based on perfect simulation.
perfect simulation has been proven a valid technique to generate the samples according to the stationary distribution of the target dtmc model.
an important constraint that is imposed on the target dtmc is that it should be ergodic i.e.
irreducible and aperiodic .
in other words if the dtmc model is not guaranteed to be ergodic then the proposed method could not be proven to hold.
on one hand it is therefore necessary to first verify that the dtmc model under consideration is ergodic before the application of the method and on the other hand the assumption restricts the application of the proposed method if such verification is not possible e.g.
for black box dtmc systems or fails.
in our prior work we discuss a two phase method to verify unbounded until properties p s 1u 2 .
in the first phase we use statistical sampling technique to estimate a suitable bound k0such that p s 1u k0 2 is agoodestimate of p s 1u 2 .
in the second phase p s 1u k0 2 is estimated using the statistical method proposed in .
this technique however suffers from the drawback that for certain models k0may not be computable in which case the first phase will fail to terminate.
unlike the above techniques we present a statistical model checking technique which is valid for any model structure and also does not require prior knowledge of the probability of the satisfaction of the property under consideration.
we establish an upper bound with respect to the size of the modelm on the simulation path length that is sufficient for checking specific unbounded until property of the form p 1u 2 .
in essence we reduce the original hypothesis test for the unbounded until property in a model mto the equivalent hypothesis test for a bounded until property in a transformed model m prime.
.
probabilistic methods for model checking non probabilistic properties we have presented a method that can be used as the basis procedure to verify the probabilistic property p1p 1u 2 following the methodology proposed by sen et al.
.
the basis procedure is essentially verifying p 1u 2 or a pure non probabilistic property e 1u 2 .
as such any method capable of verifying e 1u 2 is a candidate alternate for the basis procedure.in contrast to traditional model checking of e 1u 2 which has a space complexity polynomial to the number of states in the model our method being based on statistical sampling has a considerable less space requirement of the order of the size of the succinct representation of the model .
grosu and smolka have discussed a statistical sampling based model checking of non probabilistic models against ltl properties.
their technique also has a space requirement linear to the size of the model which is the same as the one required by the traditional method for model checking e 1u 2 .
i.e.
their technique will have the same kind of state space explosion problem as the the traditional model checking method.
brim et al.
propose a probabilistic approach to achieve space reduction in the depth first search dfs based ltl model checking of non probabilistic systems.
the work is based on two main observations made in a that it is necessary to cache the states on the search stack for the correctness of dfs based ltl model checking and b that caching of states outside the dfs stack such that the overall size of cache is above some threshold usually between and of the entire state space is likely to gain the good space saving without the explosion in time.
in this context authors in use randomness to decide the states that should be cached during dfs.
experiments on two examples dining philosophers and peterson algorithm in show that there is often a good tradeoff point where the space requirement can be reasonably reduced without incurring large penalty in terms of time.
for example experiments on peterson algorithm show that saving in space can be achieved with a increase in time usage.
however it is difficult to identify a good tradeoff point for any given model in advance.
beyond the good tradeoff point the intention to further save space may dramatically increase the time cost.
for instance experiments on dining philosophers in reveal that while a saving of in space can be achieved at the cost of increase in time subsequent gains of and in space increase the time usage by and respectively.
finally as the technique is based on dfs minimum space that holds the stack is always required and the maximum stack size depends on the model being explored.
while our technique has a considerably less space requirement compared to the above techniques it suffers from high computation cost in terms of the number of simulations and simulation path lengths .
however it should be noted that the worst computation cost corresponds to the case when probability of satisfying 1u 2 is actually .
in all other situations it is likely that the number of simulations m considered until the first simulation satisfying 1u 2 is explored is much smaller than the total number of simulations kb required to be examined in the worst case i.e.
that our method will be able to stop early .
therefore our technique is a viable alternate not only for the basis procedure but also for traditional model checking of e 1u 2 especially when the model under consideration is large and branching factor from each state is small.
.
summary discussion to the best of our knowledge our work for the first time provides a road map to obtain the computation complexity of a statistical technique for verifying p 1u 2 under the requirement of controlling both type i error and type ii 233error within the pre specified limits and under the condition that only succinct representation of the model is available prior to the test.
the worst case computation complexity of our method is o nk b wherekbis of the order o dn max .
we concur with the statement in unfortunately this bound might be exponential in the number of states and conjecture that the above computation complexity is the asymptotic lower bound for the complexity of a statistical technique for verifying p 1u 2 under the above requirement and condition.
in future we will first investigate whether a better bound lessmuchdn max on the number of simulations required for the validity of hypothesis testing can be obtained in the basis procedure by minimally relaxing the conditions.
especially the objective will be to identify a minimal set of structural information of the system model that may be exploited for this purpose.
we have made preliminary study involving loop detection and on the fly removal of edges to avoid in turn loops where each state in the loops satisfies 1 2. such removal of edges progressively reduces the branching factor of each state and therefore significantly increases the likelihood of identifying a path that satisfies 1u 2 if such a path exists .
we plan to further this line of research and identify the class of models where the proposed technique can be effectively applied.
we also intend to obtain a bound on the number of invocations to the basis procedure required for the statistical verification of the general p1p 1u 2 .
this objective is to significantly reduce the overhead of verifying p 1u 2 at every state without compromising the correctness and the effectiveness of the method.
acknowledgment this work is supported in part by nsf grant ccf0702758.
.