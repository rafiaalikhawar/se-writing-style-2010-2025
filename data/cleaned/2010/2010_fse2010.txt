fusion a framework for engineering self tuning self adaptive software systems ahmed elkhodary department of computer science george mason university aelkhoda gmu.edu naeem esfahani department of computer science george mason university nesfaha2 gmu.edu sam malek department of computer science george mason university smalek gmu.edu abstract self0adaptive software systems are capable of adjus ting their behavior at run0time to achieve certain objectives.
such systems typically employ analytical models specified at des ign0time to assess their characteristics at run0time and make t he appropriate adaptation decisions.
however prior to system s de ployment engineers often cannot foresee the changes in the e nvironment requirements and system s operational profile.
th erefore any analytical model used in this setting relies on und erlying assumptions that if not held at run0time make the a nalysis and hence the adaptation decisions inaccurate.
we prese nt and evaluate feature0oriented self0adaptation fusion framework which aims to solve this problem by lear ning the impact of adaptation decisions on the system s goal s. the framework allows for automatic online fine0tuni ng of the adaptation logic to unanticipated conditions r educes the upfront effort required for building such systems and makes the run0time analysis of such systems very efficien t. categories and subject descriptors d. .
design methodologies.
general terms algorithms performance design.
.
introduction the ever0growing complexity of software systems cou pled with the need to maintain its quality of service qos c haracteristics even under adverse conditions and highly uncertain environments have instigated the emergence of self adaptive software systems .
a self0adaptive software system is capable of modifying itself at run0time to achieve certain functional or qos goals.
the development of such systems has shown to be signifi cantly more challenging than static and predictable software sy stems .
in particular engineering the adaptation logic pos es the greatest difficult.
since software engineers often cannot fo resee all of the changes in the environment requirements and syste m s operational profile at design0time they rely on an alytical models that given the monitoring data obtained at run0time assess the system s ability to satisfy its goals.
the results produced by the analytical models thus serve as indicators for maki ng the adaptation decisions.
generally this approach suffers from three shortco mings unwieldy for use.
existing state of the art self0adaptive frameworks require the engineer to construct and ut ilize complex analytical models.
unfortunately the major ity of widely used analytical models e.g.
queueing netwo rk models for performance analysis have to painst akingly be customized to the unique characteristics of an appl ication domain.
moreover for any application0specific goa l an appropriate analytical model would have to be devel oped from scratch a task that is often very difficult when one considers the complexity of today s software systems.
further exacerbating the problem is that software engineeri ng practitioners are typically not savvy mathematician s and find it difficult to build systems that make use of such models.
wrong assumptions.
analytical models make simplifying assumptions or presume certain properties of the ru nning system that may not bear out in practice.
these mod els are specified at design0time and cannot cope with the r un0time changes that were not accounted for in their formul ation.
these assumptions could make the analysis and hence the adaptation decisions inaccurate.
efficiency.
efficiency of analysis and planning is of utmost importance in most self0adaptive software systems t hat need to react quickly to situations that arise at run0time.
at the same time searching for an optimal architectural config uration i.e.
solution is often computationally very expensive .
in this paper we present an alternative and relati vely unexplored method of constructing self0adaptive software syste ms aimed at alleviating the three problems mentioned above.
ins tead of manually developing an analytical model that relate s the impact of adaptation decisions on the system s goals we pres ent a learning0 based approach in which such a model is automatical ly induced from the monitored data.
the approach not only allo ws for automatic online fine0tuning of the adaptation logi c to unanticipated conditions but also reduces the upfr ont effort required for building such systems.
we describe this research in the context of a frame work entitled feature oriented self adaptation fusion which by using a feature0oriented system model learns the impact of feature selection and feature interactions on the system s competing conflicting goals.
it then uses this knowledge to efficiently adapt the system to satisfy as many user0defined goals as possible.
in this paper we elaborate on three key contributi ons of fusion fusion adapts and learns in terms of features .
a feature is a domain and platform independent method of represent ing a particular system capability .
this along wit h the fact that fusion does not prescribe a particular analyti cal model permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee pr ovided that copies are not made or distributed for profit or commercial ad vantage and that copies bear this notice and the full citation on th e first page.
to copy otherwise or republish to post on servers or to r edistribute to lists requires prior specific permission and or a fee.
fse november santa fe new mexico usa.
copyright acm ... .
.
makes the approach applicable to any software system with minimal effort.
fusion copes with the changing dynamics of the system even those that were not anticipated through continuous observation and induction.
in turn fusion is capable of learning run0time behaviors unforeseen at design0 time.
fusion incorporates the engineer s knowledge of the system and its capabilities in the form of feature relationships.
it then uses these relationships to reduce the valid configuration space significantly which makes not only the learning feasible but also the adaptation planning efficient for use at run0time.
the rest of this paper is organized as follows.
section motivates the problem using a system that also serves as a running example in this paper.
section provides an overview of fusion.
sections and respect ively detail fusion s feature0oriented model of adaptation lear ning method and adaptation planning.
sections and present the implementation and evaluation details of fusion.
th e paper concludes with an overview of the related work and future avenues of research.
.
motivation we illustrate and evaluate the concepts using an on line travel reservation system trs which is representative o f web applications used by large organizations for making travel reservations.
figure 1c shows a subset of its softw are architecture using the traditional component0and0connector view.
trs aims to provide the best airline ticket prices in the marke t. to make a price quote for the user trs takes the trip inform ation from the user and consequently discovers and queries variou s travel agent services.
the travel agents reply with their itiner ary offers which are then sorted and presented in ascending order of quoted price.
in addition to the functional goals the system is required to attain a number of qos goals such as performance securit y and accountability.
to that end solutions for each qos concern were developed e.g.
caching for performance authentic ation for security and logging of activities for accountabil ity purposes.
in addition trs needs to be self0adaptive to deal with unexpected situations such as traffic spikes or security atta cks.
for instance enable caching to improve performance during a traf fic spike increase authentication to thwart a security attack and enable logging to ensure non0repudiation of transactions i.e.
accountability .
the adaptation logic of trs also n eeds to balance tradeoffs conflicts when it selects from the avai lable adaptation choices e.g.
improving security may degrade respo nse time.
as mentioned earlier there are three problems asso ciated with the construction of adaptation logic.
consider the issu es that may arise in the context of trs unwieldy for use.
consider the difficulty of accurately estimating the impact of enabling a particular type of authentication on the price quotes in trs.
using a heavy authentication protocol increases the system s resp onse time which forces more timeouts on the client0side.
this reduces the total number of received offers and hence the quality of price quotes.
quantitatively modeling this trade0of f is difficult as it depends on many dynamic parameters available service providers network characteristics and so on.
wrong assumptions.
consider an analytical model that quantifies the impact of an adaptation decision on the response time of receiving price quotes from travel agents thick lines in figure 1c .
such a model would inevitably make simplifying assumptions based on what the engineers believe to be the main sources of delay in the system.
for instance if fast communication links are assumed the analytica l model may ignore the network delay.
since accurately pred icting the characteristics of a dynamic system is extremely di fficult the assumptions may not hold making the analysis and h ence the adaptation decisions inaccurate.
efficiency.
to satisfy multiple goals self0adaptation logic needs to search in a configuration space that is eq uivalent to the combined complexity of all the analytical model s involved.
as an example consider how trs would mak e use of p authentication components for authenticating the n etwork traffic between its n software components which may be deployed on m different hardware platforms.
analyzing the impact of authentication alone on the system s goal s would require exploring a space of mn possible deployments p possible ways of authentication mnp possible configurations .
such a problem is computationally expensive to solve at ru n0time for any sizable system.
this is while authentication ma y be only one concern out of many.
the aforementioned difficulties have shaped our mot ivation in the development the fusion framework as described next .
figure .
travel reservation system a goals are quantified in terms of utility obtained for a given level of metric b subset of availabl e features where features with thick borders are selected c software architecture cor responding to the selected features where the thick lines represent an execution scenar io associated with goal g1.
.
fusion overview figure depicts the fusion framework as it adapts a running software system.
the running system is variable in the sense that its features can be selected i.e.
enabled disable d on demand.
fusion modifies the feature selection to resolve qo s tradeoffs and satisfy as many goals as possible.
for example if the trs system violates quote response time goal it is adapted to a new feature selection that brings down the response tim e and keeps other goals satisfied.
as depicted in figure fusion makes such adaptati on decisions using a continuous loop called adaptation cycle .
the adaptation cycle collects metrics measurements an d optimizes the system by executing three activities in the fol lowing sequence based on the metrics collected from the running sys tem detect calculates the achieved utility i.e.
measure of user s satisfaction to determine if a goal violation has occurred.
when a goal is violated plan searches for an optimal configuration feature selection that maximizes ov erall utility.
given a new feature selection effect determines a set of adaptation steps i.e.
enable disable features to ensure consistency during adaptation.
fusion uses learning cycle depicted in figure to learn the impact of adaptation decisions in terms of feature selection on the system s goals.
the first execution of learning cyc le occurs before the system s initial deployment.
the system is eith er simulated or executed in offline mode and metrics corresponding to each feature selection is collected.
this data is used t o train fusion to induce a preliminary model of the system s behavior .
at run0time the learning cycle continuously execut es and as the dynamics of the system and its environment change the framework tunes itself.
for example when fusion ad apts trs to resolve a quote response time violation it keeps track of the gap between the expected and the actual outcome of the adaptation.
this gap is an indicator of the new beh avioral patterns in the system.
learning cycle collects such indicat ors and tunes itself by executing two activities in the following sequence based on the measurements collected from the system observe detects any emerging patterns of behavior.
an emergent pattern is detected when the system sets t he wrong expectation i.e.
inaccurate impact of adaptation on utility .
induce learns the new behavior through induction and stor es the refined model in the knowledge base which is used to make more informed adaptation decisions in future cycles.
in the following three sections we describe fusion s underlying model learning cycle and adaptation cycle in more detail.
.
fusion model we describe fusion s approach to modeling adaptatio n choices and goals.
as detailed in sections and fusion s model is the key enabler of effective learning and efficient ana lysis.
.
feature based adaptation in fusion the unit of adaptation is a feature .
a feature is an abstraction of a capability provided by the system.
a feature may affect either the system s functional e.g.
abilit y to print receipts or non0functional e.g.
ability to authenticate p roperties.
the use of features as an abstraction makes the fus ion framework independent of a particular implementatio n platform or application domain.
for example in a rule0based system a feature may correspond to a set of rules in a serv ice0oriented system it may correspond to a set of services in a workflow and so on.
for clarity in this paper we assume a parti cular realization of a feature a feature represents an extension of the architecture at well0defined variation points .
a feature maps to a subset of the system s software architecture.
for example figure 1b shows the mapping of evidence generation feature to a subset of the trs.
figure 1b shows a simple feature model for trs.
the re are four features in the system and one common core .
the features in the example use two kinds of relationships dependency and mutual exclusion .
the dependency relationship indicates that a feat ure requires the presence of another feature.
for examp le enabling the evidence generation feature requires having the core feature enabled as well.
mutual exclusion is another relati onship which implies that if one of the features in a mutual group is enabled the others must be disabled.
for example per request authentication and per session authentication cannot be enabled at the same time.
feature modeling supports several other types of inter0 feature relationships see that for brevity ar e not detailed here.
the feature model is used to identify the current s ystem configuration in terms of a feature selection strin g. in a feature selection string enabled features are set to disabled features are set to .
for example one possible configura tion of trs would be which means that all features from figure 1b are enabled except per request authentication .
the adaptation of a system is modeled as a transition from one featur e selection string to another which we detail in section .
.
.
goals a goal represents the user s functional or qos objectives for a particular execution scenario.
a goal consists of a metric and a utility .
a metric is a measurable quantity e.g.
response time that can be obtained from a running system.
a utility fu nction is used to express the user s preferences satisfaction fo r achieving a particular metric.
for instance goal g1 in figure 1a specifies the user s degree of satisfaction u with achieving a specific value of quote response time m .
figure .
overview of the fusion framework.
elicitation of user s preferences while an importa nt prerequisite for using the framework is a topic that has been i nvestigated extensively in the existing literature e.g.
and considered to be outside the focus of this paper.
fusion is indep endent of the type of utility functions and the approach employed in extrapolating them.
arguably any user can specify h ard constraints which can be trivially modeled as step 0functions e.g.
g4 depicted in figure 1a .
alternatively a utility fu nction may take on more advanced forms e.g.
sigmoid curve and express more complex preferences such as g g and g .
fusion places one constraint on the range of utilit y functions they need to return zero for the metric values that are not acceptable to the user.
as will be discussed in se ction .
when a utility associated with a goal reaches zero fusi on considers that goal violated and initiates adaptation.
.
fusion learning cycle fusion copes with the changing dynamics of the syst em through learning.
learning discovers relationships between features and metrics.
each relationship is represented as a func tion that quantifies the impact of features including their interactions on a metric.
in trs for example the result of learning would be four functions one function for each of the four metric s mg1 through mg4 .
each function takes a feature selection as input and produces an estimated gain loss value for the metric as outp ut.
learning is typically a very computationally intens ive process.
in particular learning simply at the architectural0le vel is infeasible for any sizable system which is the reason why its application in existing architecture0based adaptation approaches h as been limited.
fusion s feature0oriented model offers two opportunities for tackling the complexity of learni ng .
learning operates on feature selection space which is significantly smaller than the traditional architec tural0level configuration space.
the features in fusion encode the engineer s domain knowledge of the practical variat ion points in a given application.
for instance the en gineer may only consider a small reasonable subset of mnp authentication driven architectural choices recall section .
figure 1b shows two authentication strategies modeled as feat ures in trs f3 and f4.
these two features represent what the trs security engineer envisioned to be the reasonable applications of authentication in the system.
.
by using the inter0feature relationships e.g.
mut ual exclusions dependencies one can significantly re duce the feature selection space.
for instance figure 1b sh ows a mutual exclusion relationship between f3 and f4.
this relationship is manifestation of the domain knowled ge that applying two authentication protocols to the same e xecution scenario is not appropriate.
such relationships red uce the space of valid feature selections significantly fu rther aiding fusion to learn their trade0offs with respect to go als.
figure is an algorithm that determines the size o f the valid feature selection space in a feature model recursiv ely.
applying this algorithm to the feature model in figure 1b yi elds a space of valid feature selections calculated as follows from f from f from f from f .
without considering the inter0feature relationships to prune the invalid selections the space of feature selection would have been 2number of features .
learning starts with a training process that popula tes fusion s knowledge base with an initial set of functions.
co nsequently at run0time the learning cycle fine0tunes the functio ns to accommodate emergent behaviors.
the rest of this se ction describes the two activities that take place to pop ulate and fine0 tune the knowledge base.
.
observe observe is a continuous execution of two activities n ormalize raw metric values to make them suitable for learnin g and test the accuracy of learned functions.
we describe each of these activities below.
learning in terms of raw data hampers the accuracy.
for instance consider the fact that the actual impact of a featu re on a metric may depend on the system s workload.
therefore the actual metric data obtained from executing the same softwa re system i.e.
same feature selection under different work loads may result in starkly different metric readings thus making i t difficult to generalize in the form of a learned function.
to address this issue observe takes raw metric data through an automated normalization process prior to storing th em as observation records.
many normalization techniques can be applied to transform the learning inputs into a rep resentation that is less sensitive to the execution context.
in tabl e observation records were normalized using studentized residual as follows g3435 g1870 g1853 g1875 g1874 g1853 g1864 g1873 g1857 g3398 g1850 g3439 g1871 where g1850 and g1871 are the mean and the standard deviation of the collected data respectiv ely.
normalization using studentized residual does not r equire knowledge of population parameter such as absolute min0max values and population mean.
it only requires knowle dge of mean and standard deviation for sample data.
once a preliminary set of functions are learned de tails provided in the next section observe continuously tests the accuracy of functions against the latest collected observations .
accuracy is defined as the difference between predicted value o f a reward using the learned functions and actually observed v alue.
for that purpose we use the learning accuracy threshold provided by the learning algorithm itself.
note that the majority o f learning algorithms provide an error threshold that indicate s the noise in learned functions.
on top of this one may specify an additional margin of inaccuracy that can be tolerated in case s where it is not desirable to run the learning algorithm frequently.
if the accuracy test fails observe takes this as an indicator that either learning is incomplete or new patterns of behavior are emerging in the system and thus notifies the induce activity to fine0tune the learned functions using the latest set of observati ons.
.
induce based on the collected observations the induce activity constructs several functions that estimate the impact of makin g a feature selectioncounter feature f int int count switch f.type case mutualgroup for each c in f.children count selectioncounter c case leaffeature count default for each c in f.children count selectioncounter c count return count figure .
algorithm for sizing the feature selectio n space.
selection on the corresponding metrics.
induce executes two steps.
the first step is a significance test that determines the features with the most significant impact on each metric.
th is allows us to reduce the number of independent variables recall table that learning needs to consider for each metric.
after t he significance test we apply the learning which for each goal g iven the normalized observations and the features with signi ficance derives the corresponding relationships.
while fusion is not tied to a particular learning a lgorithm in our implementation we have used the m5 model tree mt algorithm which is a machine learning techniqu e with three important properties ability to eliminate insi gnificant features automatically fast training and convergence a nd efficient interaction detection.
table shows the induced relationships among features and metrics for trs.
the information in this table can also be represent ed simply as a set of functions.
for instance a function estimati ng g1839 g3008 g2869 corresponds to the second column of the table as follows g1839 g3008 g2869 .
f1 g3398 .
f2 .
f3 .
f1f3 g3398 .
each feature is assigned a coefficient that is effe ctive only when the feature is enabled i.e.
it is set to .
fo r example the expected value of mg1 for a feature selection where only f1 and f3 are enabled can be calculated as follows g1839 g3008 g2869 .
.
.
g3398 .
.
when making adaptation decisions values obtained f rom the induced functions e.g.
.
from eq.
above a re denormalized by using the inverse of normalization equation presented in the previous section.
the denormalized value for a metric is then plugged into the corresponding utili ty function to determine the impact of feature selection on the go al.
note that the induction also captures the impact of feature interactions on metrics.
for example eq.
specifi es that enabling both f1 evidence generation and f3 per request authentication increases g1839 g3008 g2869.
this is because according to table f1f3 increases the response time by .
which decrea ses the utility of g utility of g is shown in figure 1a .
using figure 1c we can explain this feature interaction as follows.
f1 introduces a delay by adding a mediator connector called log that records the transactions with remote travel agents.
at the same time f3 changes the behavior of the log as it causes an additional delay in mediating the exchange of per session authentica tion credentials.
enabling the two features at the same time has a negative ramification that is beyond the individual impact of each.
in some cases learning may need to incorporate som e contextual factors as independent variables due to their impa ct on metrics.
consider a system with drastically different worklo ads at different times of day that cannot be dealt with effectively through normalization.
in that case the result of learning would be a set of equations that estimate the impact of feature selec tion in different contexts.
for example the following equations esti mate the impact of feature selection on mg1 under different workloads w g1839 g3008 g2869 g3404 g3421... g3397 g2782.
g2782 g2781 g18321 g3398 g2779.
g2778 g2781 g18322 g3397 g2779.
g2781 g18323... g1875 g34091.
... g3397 g2778.
g2786 g2785 g18321 g3398 g2778.
g2781 g2783 g18322 g3397 g2778.
g2781 g18323... .
g3407 g1875 g34091.
... g3397 g2777.
g2786 g2782 g18321 g3397 g2777.
g2783 g2783 g18323 g3397 g2777.
g2779 g2781 g18321 g18323... g1875 g34081.
g1 where w is the average inter0arrival time between requests in milliseconds lower inter0arrival time implies high er workload.
here the generated functions indicate that trs rea ches saturation when w is in the range of .
.
milliseconds.
since t he impact of features on mg1 changes dramatically in that range the learning algorithm produces a separate equation tar geted at that.
although these equations may be of any type e.g.
linear sigmoid or exponential as in for clarity we have limited the discussion to multi0linear equations only.
.
fusion adaptation cycle in this section we describe how detect plan and effect use the learned knowledge to adapt a software system in fus ion.
the underlying principle guiding the adaptation strateg y in fusion is simple if the system works i.e.
satisfies the user do not change it when it breaks find the best fix for only the broken part .
while intuitive this approach sets fusion apart from man y of the existing works that either attempt to continuously optimize the entire system or solely solve the constraints i.e .
violated goals in the system.
fusion adopts a middle ground which we believe to be the most sensible and achieves the following objectives .
reduce interruption adaptation typically interrupts the system s operation e.g.
transient unavailability of certain functionality .
in turn even if at run0time a solu tion with a higher utility is found one may opt not to adapt t he system to avoid such interruptions.
fusion reduces interrupti ons by adapting the system only when a goal is violated.
.
efficient analysis often in run0time adaptation the performance of analysis is crucial.
fusion uses the learned knowledge to scope the analysis to only the parts o f the system that are affected by the adaptation hence m aking it significantly more efficient than assessing the ent ire system.
.
stable fix given the overhead and interruption associated with the adaptation effecting solutions that provi de a temporary fix are not desirable.
we would like fusi on to minimize frequent adaptation of the system for the same problem.
to that end instead of simply satisfying the violated goals fusion finds a near optimal solutio n that is less likely to be broken due to fluctuations in the system.
.
detect the adaptation cycle is initiated as soon as detect determines a goal violation.
this is achieved by monitoring the utility functions table .
learned metric functions.
an empty cell me ans that the corresponding feature has no significant i mpact.
significant variables induc ed functions mg1 mg2 mg3 mg4 .. core .
.
.
.
.. f1 .
.
.
.. f2 .
.
.. f3 .
.
.. f4 .
.. f1f3 .
.. .. .. .. .. .. .. table .
normalized observation records indep.
vars dependent variables f1 f2 f3 f4 mg1 mg2 mg3 mg4 .. .. .. .. .. .. .. .. .. .. .
.
.
.
.. .
.
.
.
.. .
.
.
.
.. .
.
.
.
.. .
.
.
.
.. .
.
.
.
.. .
.
.
.
.. .
.
.
.
.. .. .. .. .. .. .. .. .. .. recall section .
.
a utility function serves two purposes in the adaptation cycle when the metric values are un acceptable returns zero to indicate a violated goal and w hen the metrics satisfy the minimum returns a positive value less than one to indicate the user s preference for improvement.
the refore utility is not only used to initiate adaptation but also t o perform trade0off analysis between competing feature selections such that an optimization of the system can be achieved.
.
plan to achieve the adaptation objectives fusion relies on the knowledge base to generate a tailored problem given a violated goal we use the knowledge base to eliminate all of the features with no significant impact on t he goal.
we call the list of features that may affect a given g oal shared features .
consider a situation in the trs where g2 is violated.
by referring to column g1839 g3008 g2870 in table we can eliminate feature f3 since it has no impact on g2 s metric.
in this example shared features f f2 f4 .
shared features represent our adaptation parameters.
these features may also affect other goals the set of wh ich we call the conflicting goals .
to detect the conflicts again we use the knowledge base except this time we backtrack the l earned relationships.
for each feature in the shared features we find the corresponding row in table and find the othe r metrics that the feature affects.
in the above example we can see that features f1 f2 and f4 also affect metrics mg1 and mg4 and hence the corresponding goals g1 and g4.
by using the knowledge base fusion generates an op timization problem customized to the running software.
the obj ective is to find a selection of shared features f that maximizes the system s overall utility for the conflicting goals as follows g1832 g1499 g3404 g1853 g1870 g1859 g1865 g1853 g1876 g4666 g3007 g1488 g3020 g3035 g3028 g3045 g3032 g3031 g3007 g3032 g3028 g3047 g3048 g3045 g3032 g3046 g4667 g3533 g1847 g3034 g1482 g3034 g1488 g3004 g3042 g3041 g3033 g3039 g3036 g3030 g3047 g3036 g3041 g3034 g3008 g3042 g3028 g3039 g3046 g4666 g1839 g3034 g4666 g1832 g4667 g4667 where g1847 g3034 represents the utility function associated with th e metric g1839 g3034 for goal g recall figure 1a .
since we do not want the solut ion to violate any of the conflicting goals the proble m is subject to g3537 g1847 g3034 g4666 g1839 g3034 g4666 g1832 g4667 g4667 g34080 g1482 g3034 g1488 g3004 g3042 g3041 g3033 g3039 g3036 g3030 g3047 g3036 g3041 g3034 g3008 g3042 g3028 g3039 g3046 note that we do not need to include the goals that are unaffected by shared features .
to prevent feature selections that violate the mutual exclusion we specify the following constrai nt g1482 g1859 g1870 g1867 g1873 g1868 g1488 g1858 g1857 g1853 g1872 g1873 g1870 g1857 g1865 g1867 g1856 g1857 g1864 g3533 g1858 g3030 g34091 g1482 g3033 g3278 g1488 g3034 g3045 g3042 g3048 g3043 here when more than one feature from the same mutua lly exclusive group is selected the left hand side of the inequality brings the total to greater than and violates the constraint.
finally we ensure the dependency relationship as f ollows g1482 g1858 g3030 g3035 g3036 g3039 g3031 g1488 g1845 g1860 g1853 g1870 g1857 g1856 g1832 g1857 g1853 g1872 g1873 g1870 g1857 g1871 g1858 g3043 g3028 g3045 g3032 g3041 g3047 g3398 g1858 g3030 g3035 g3036 g3039 g3031 g34100 this inequality does not hold if a child dependent feature is enabled without its parent being enabled.
applying this formulation to the trs scenario in which g is violated generates the following optimization problem shared features f f f g1853 g1870 g1859 g1865 g1853 g1876 g4666 g3007 g4667 g1847 g3008 g2869 g4666 g1839 g3008 g2869 g4666 g1832 g4667 g4667 g3397 g1847 g3008 g2870 g4666 g1839 g3008 g2870 g4666 g1832 g4667 g4667 g3397 g1847 g3008 g2872 g4666 g1839 g3008 g2872 g4666 g1832 g4667 g4667 subject to g1847 g3008 g2869 g4666 g1839 g3008 g2869 g4666 g1832 g4667 g4667 g3400 g1847 g3008 g2870 g4666 g1839 g3008 g2870 g4666 g1832 g4667 g4667 g3400 g1847 g3008 g2872 g4666 g1839 g3008 g2872 g4666 g1832 g4667 g4667 g3408 g1832 g2871 g3397 g1832 g2872 g3409 where mg1 .
f .
f .
f .
f 1f3 .
m g2 .
f .
f .
f .
m g4 .
f .
note that by eliminating g1847 g3008 g2871 and f3 from the optimization problem we obtain an optimization problem tailored to the violated goals.
the customized problem has less num ber of features and goals than the original problem.
in ou r small example the gain may not seem significant.
however as shown in section in large software systems pruning the optimizati on problem achieves significant performance gains.
.
effect once an optimal feature selection is determined th e effect activity is initiated to make the system transition from the current feature selection to the new one.
effect chooses a path containing several adaptation steps transitions towards the new feature selection.
the steps take one of the three forms enable and disable an optional feature or swap two mutually exclusive features.
figure shows an adaptation path that takes the trs syste m from feature selection to in three steps .
since there are many possible paths to reach a targ et feature selection the effect component is responsible for picking a path that satisfies feature model constrains in addition to system goals.
in the above example enabling f3 and f4 at the same time produces a feature selection that violates the mutu al exclusion relationship in the feature model.
if two features are mutually exclusive the system should never be in a state wh ere both features are enabled.
similarly a dependent featur e is never enabled without its prerequisite parent being ena bled first.
.
implementation figure shows snapshots of a prototype implementat ion of fusion.
this figure closely matches the structure o f figure and illustrates the realization of the modeling con cepts in fusion.
to streamline the development of tool suppo rt for fusion we have adopted extended and integrated e xisting tools to the extent possible.
we have provided support for fusion s modeling meth odology by extending xteam .
xteam supports modeling of software architectures using well0known architectur al description languages adls .
it supports finite st ate processes fsp and extensible architecture description langu age xadl for modeling the behavioral and structural properti es respectively.
a snapshot of xadl model for a subset of trs is shown in figure 5c.
the metrics are specified in te rms of the properties associated with the architectural constr ucts.
for example the response time of a given execution sce nario is modeled as a summation of the computational delay o f its components.
we have enhanced xteam with support for modeling go als figure 5a and features figure 5b .
as the arrow in figure 5b indicates an engineer specifies a mapping for each feature to the underlying architectural model snippet that realize s it.
the model snippet uses