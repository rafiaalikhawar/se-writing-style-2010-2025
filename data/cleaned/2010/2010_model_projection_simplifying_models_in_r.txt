model projection simplifying models inresponse to restricting theenvironment kellyandroutsopoulos1davidbinkle y2davidclark1nicolas gold1 markharman1kevinlano3zheng li1 1university college london malet place london wc1e 6bt uk.
2loyolauniversity maryland baltimore md21210 usa.
3king scollege london strand london wc2r 2ls uk.
abstra ct this paper introduces model projection .finite state models such as extended finite state machines arebeing used inaneverincreasing number ofsoftw areengineering activities.
model projecti onfacilitates model development byspecializing models foraspecific operating environment.
aprojection isuseful inmanydesign le vel applications including specification reuse andproperty verification.
theapplicability ofmodel projection rests upon three criticalconcerns correctness effectiveness andefficienc y allofwhich are addressed inthispaper .weintroduce four related algorithms for model projection andproveeach correct.
wealsopresent anempiricalstudy ofeffectiveness andefficienc yusing tenmodels including widely studied benchmarks aswell asindustrial models.
results showthatatypical projection includes about halfofthestates anda third ofthetransitions from theoriginal model.
categories andsubject descriptors d. .
design tools andtechniques general terms algorithms theory experimentation keywords model projection extended finite state machines slicing .intr oduction both automatically andmanually generated state based models findmanyapplications insoftw areengineering.
forexample they areoften constructed bymodel check ers andbuiltbyengineers inthetelecommunications andembedded systems sectors .
theyarealso used inmodelling notations such astheuml which drawsheavily onstate based modelling andare widely used forspecifying discrete e ventcontrol devices such as automated manuf acturing systems ams .
agreat deal ofengineering effortisdirected towards thedesign ofanorganisation smodels.
asaresult itiscommon formodels to bereused.
one such scenario arises when control models arereused within adevice thatoffersarestricted operational environment.
for example the basic model carairconditioning system may notoffer theclimate control functionality found inmore luxurious models.
it would bewasteful tospecify different models foreach potential car permission tomakedigital orhard copies ofallorpart ofthisworkfor personal orclassroom useisgranted without feeprovided thatcopies are notmade ordistrib uted forprofit orcommercial advantage andthatcopies bear thisnotice andthefullcitation onthefirstpage.
tocopyotherwise or republish topost onserversortoredistrib utetolists requires prior specific permission and or afee.
icse11 may waikiki honolulu hi usa copyright acm978 ... .
.configuration.
rather there istypically asingle controller forthe entire product line .inthissituation model projections specializedtotheparticular environment areuseful astheyavoidproducing bloated controllers thatimplement unused functionality .
the design ofmodels typically occurs earlier intheoverall development process than coding where thecost oferrors is ingeneral higher .this makesitimportant tohavepowerful andflexible tools formodel analysis.
model projection facilitates such analysis inmuch thesame waythattechniques such asprogram transformationandprogram slicing assist with code levelanalysis .
figure 1presents anexample ofmodel projection inwhich a vending machine allowsauser toinsert coins andvends teawith options oflargecups small cups sugar anddouble sugar.consider redeplo ying thiscontroller inan en vironment where the sugar button isdisabled andthus inan en vironment inwhich theevent sugar neveroccurs.
the projection remo vesallstates andtransitions shownindashed grey unreachable byeventsequence sin therestricted environment.
this causes thestate sugar tobecome unreachable andsubsequently thestate double sugar because itis only reachable from thestate sugar .when these states andtheir associated transitions areprojected outofthemodel only theblack elements remain.
model projection canalso beused tofacilitate property verificationbyreducing thecomple xityofamodel andthusmaking analysis more efficient.
consider theproduction cellexample used intheindustrial case study ofagerman metal processing plant .
inthis system metal blanks enter thesystem onafeed beltandareconveyedviaatable byrobot arms tooneoftwopresses.
assume that wewanttoprovethatthefeed beltmotor isoffifthere isablank on thebeltandablank ontheelevating rotating table.
call thisproperty p.itturns outthatproperty ponly concerns twosensors and one actuator ofthemodel.
toprovethatpholds intheoriginal model requires consideration ofastate space having over3 states.
however only four eventsaffectp s1on s1off s3on s3off .amodel projection produced byignoring allother eventshasonly four states andeight transitions.
this substantial reduction incontroller size means thatpcanbeverified tohold inallstates directly .asshown insection thisimplies thatpholds intheoriginal model.
withthese applications andothers theapplicability ofourapproach depends upon bothcorrectness andthereduction achie vedin reasonable time.
therefore thispaper concerns thetheoretical and empirical underpinnings ofmodel projection asformalized insection .section 3then introduces four progressi velymore precise and more expensi ve model projection algorithms.
this isfollowed insection by proofs ofcorrectnes sforthefour algorithms.
finally section 5investig atestheeffectiveness andefficienc yofour approach interms ofthereduction achie vedonasetoftenmodels including standard benchmarks andrealworldmodels .exit sugar coin s t moresugar tea k k tea k1 k1 coin coin dispose insertlargecups n k n insertsmallcups n k1 n coin smallcup s largecup s cancel tea k k tea k1 k1 setprice p price p coin t t insertlargecups n k k n insertsmallcups n k1 k1 n create k k1 t price no small cupsno large cupscoins insertedsugardouble sugaridle tea k1 k1 tea k1 k1 tea k k tea k k cancel cancel tea k1 k1 tea k1 k1 tea k k tea k1 k1 coin coin smallcup s smallcup s largecup s largecup s figur e1 illustrati veexample model projection forasimple vendingmachine.
the complete vending machine includes both thedashed grey and blackelements.
the projection forreuse inanenvironment wher esugar isunavailable the sugar button isdisabled includes only theblack elements ofthe model.
the states and transitions concer nedwith providing sugar are projected outofthemodel.
the projection isfaithful toallother sugar free interactions with itsenvironment.
.model projection definition this section first introduces some notat ionandterminology related totheparticular models focused oninthispaper extended finite state machines efsms .
itthen formalizes thenotion ofa projection forefsms.
definition extended finite state machines efsms anefsm misatuple s t a si wher esisasetofstates t isasetofstate tostate transitions aisanevent alphabet asetof events andsiisthesetofinitial states.
atransition t thas alabellbl t oftheforme a wher ee a gisaboolean guard written inanunspecified condition langua ge andaisan action written inanunspecified command langua ge.allparts of thelabel areoptional.
only when theguardevaluates totruecan thetransition betaken.anomitted guardisassumed tobetrue.
for transition t source t target t guard t trigger t andaction t areused torefer tot ssourcestate targetstate boolean guard triggerevent andaction respectively .
anefsm mtakes as input asequence ofeventse a .each eventincludes inaddition totheeventname alistofformal parameters thatarepassed values from theexternal environment with the event.
atransition saction commonly update sthestore andmay produce output events which need notcome froma.finally iftwo transitions share thesame source state thesame trigger event and their guards canbesimultaneously true thenmisanon deterministic efsm otherwise itisdeterministic.
acompletely specified efsm includes foreverystate atransition triggered byeveryeventintheeventalphabet a.since completeness canoften obscure thetruenature ofanefsm asaconventionefsms areoften presented with certain transitions leftimplicit.
acommon interpretation forimplicit transitions isaselftransition.
ineffecttheeventisconsumed byhaving thestate machine stutter repeat thesame state without anyeffectother than consuming the event.thefollowing definition form alizes theeventsequences that donotrequire stuttering.
definition implicit transition freeeventsequence forefsm m s t a si aninput event sequence e a is referr edtoasimplicit transition freeifmtakesnoimplicit transitions when presented withe.such an eventsequence isalsoreferr ed toasstutter free .forasetofevent sequences x itf m x denotes theimplicit transition freesubset ofx itf m x e x mtakesnoimplicit transitions when processing e .basicprojection efsm m s t a si ignore eventseti letm s t a si where s s s pathp s s t s si t p trigger t ne ationslash i t t t source t s target t s in m s t a i si figur e2 the basic model projection.
givenasetofeventstoignore denotedi theprojection ofefsm mpreserv esm sbehaviorwhen placed inan en vironment thatdoes notgenerate events fromi.the resulting setofeventsequences formalized bythefollowing filter isused todefine model projection .
definition eventsequence setfilter sequence set filter function fi x i e x e i wher ee idenotes theinter section ofthesetofevents inewith i. definition model projection amodel projection ofefsm m s t a si forignor esetiis areduced efsm m thatissemantically indistinguishable fromm onallevent sequences fromfi a i .
foraprojection tobesemantically indistinguishable asrequired bythedefinition itmust preserv ethebehavior oftheoriginal machine.
there aretwoaspects tothissemantic requirement what behaviorispreserv edandoverwhat setofeventsequences itispreserved.thefirstofthese what behaviorispreserv ed isformalized bydefinition 9insection .informally thebehavior includes the variable values computed ateach state.
thesecond aspect ofthesemantic requirement considers theset ofeventsequences overwhich thesemantics ispreserv ed.
two options areconsidered thestrong semantic requir ement andthe weak semantic requir ement .under thestrong requirement behavior ispreserv edonallsequences infi a i while fortheweak requirement behavior ispreserv edonly forthestutter freesequences offi itf m a i .thus theweak requirement does notrequire matching behavior oneventsequences forwhich theefsm implicitlyconsumes anevent.rather itrestricts thisrequirement toevent sequences where thebehaviorofmisexplicitly defined.
figure 2presents thedefinition ofabasic projection ofanefsm which isillustrated bytheexample infigure .insection 4weprovethat theimplementation ofbasicprojection showninfigure3satisfies thestrong semantic requirement.
furthermore this algorithms remo valofstates andtransitions canfacilitate further simplifications.
thus three additional algorithms gobeyond thebasicprojection andconsider simplifying thestate machine using constant propag ation andstate merging.
themost aggressi veofthestate merging algorithms satisfies only theweak semantic requirement.
.algorithms this section describes four model projecti onalgorithms thatrepresent differing performance precision tradeof fs.model projection hasseveral possible implementation strate gies.
forexample one could buildaprojection byadding necessary elements toaninitially empty model.
alternat ively onecould remo veelements from the model being projected.
theinitial implementation followsthelater approach.
to do so itrecasts thenotion ofprogram slicing totheefsm domain.
however thisrecasting differsfrom previousworkonslicing state based models which transplant concepts from theprogram slicing inanattempt toincrementally adapt program slicing concepts andtechniques.
these differences areconsidered further insections .3and6.
formuch ofitshistory depende nceanalysis hastypically been applied toprograms butthere hasbeen arecent increase inthetheoryandpractice ofdependence analysis formodels andinparticular state based models .
indeed ithasbeen argued thatalldescriptions whether theybespecifications models orother descriptions willhave atendenc ytobecome executable overtime making such descriptions more likelytobecome thesubject oftechniques associated with program analysis such asdependence analysis and slicing.
the recent interest independence analysis forstate based models makesittimely toconsider whether notions ofslicing hitherto defined for programs remain appropriate when transplanted into theparadigm ofmodels.
this paper argues thatthenotion of slicing needs tobegeneralised tooneofmodel projection forconsidering models both efsms andotherwise.
specifically the slicingcriterion andalgorithms forslicing willneed totakeaccount of model specific characteristics.
therecasting ofslicing used toimplement model projection provides amore natural slicing approach byproviding amore naturalwaytospecify theslicing criterion anenvironment based slice istakenwith respect toanignore seti.asshowninsections and5 environment based slicing correctly andeffectivelyimplements model projection.
this achie vesalong standing goal inprogram slicing ofdefining theslicing criteria interms ofhigher level concepts .
theremainder ofthissection firstintroduces theslicing algorithm basicslice andthen three extensions thatincorporate constant propagation and2different state mergings.
figure 3presents basicslice .
givenasaslicing criterion anignore seti basicslice computes a slice bydeleting alltransitions whose trigger eventcorresponds to events intheignore set.then itremo vesallstates andtheir transitions thatarenolonger reachable from aninitial state.
thereduced model isabasicprojection asdefined infigure .figure 1shows thebasicslice produced forthevending machine example using theignore seti sugar .
thefirstextension tobasicslice algorithm a2isshowninfigure4 incorporates constant propag ation.
algorithm a2further reduces theprojection ssize byreplacing aconstant v alued variable byitsvalue throughout themachine.
when aguard isupdated it may simplify tofalse thus thecorresponding transition and perhaps itstargetstate canberemo ved.
the algorithm implements asimple flow insensiti veconstant propag ationalgorithm inwhich variables aremapped tovalues inaflatlattice .
initially vari basicslice efsm m s t a ignore eventseti m m delete fromt alltransitions twhere trigger t i while stateswith noincoming transitions do remo vesandalltransitions twhere source t s return m figur e3 algorithm a1 basicslice .basic algorithm forcomputing anenvironment based slice.
ables thatappear asformal parameters ofaneventlabelling atransition areassigned thevalue non constant because theyrecei ve anunkno wnvalue from theenvironment.
allother variables vare initialized to uninitialized .
theassignments thatlabel thetransitions arethen takenintoaccount.
iftheright hand side oftheassignment evaluates toaconstant then thevalue oftheleft hand side variable isreplaced with themeet oftheconstant andthevariable s present value.
otherwise thevalue isreplaced with .
inaddition toconstant propag ation twostate merging algorithms areused tofurther reduce thesize ofaprojection bycombining groups ofstates thathaveidentical semantics.
theright equi valent merging algorithm extends analgorithm ofilieetal.
toefsms.
r equi valence equates tobisimulation fordeterministic state slice cp efsm m ignore eventseti m basicslice m i constantpropagation m returnm constantpropagation efsm m s t a si v. ifvisused asaformal parameter ofan input eventinatransition label otherwise foreach t t foreach assignment v exp action t letx result ofevaluating expusing inupdate v x deleteunt rigger abletransitions m deleteunt rigger abletransitions efsm m s t a si abstract store while t twhere guard t evaluates tofalseusing remo vetfromt while s swith noincoming transitions do remo vesandalltransitions twhere source t s where update v x replaces v svalue in with v x using thefollowing meet operation c c c c c c c c ne ationslash c c figur e4 algorithm a2 constant propagation removestransitions whose guard isalways false.slice merge efsm m ignore eventseti m basicslice m i constantpropagation m r mergeequiv alentstates m ifonly satisfying theweak semantic requirement then g mergeequiv alentstates m r mergeequiv alentstates efsm m s t a si while states s1 s2 ssuch thatr equivalent s1 s2 replace s1ands2withs where shasasitsoutgoing and self transitions acopyofthose ofs1 andincoming transitions theunion ofthose ofs1ands2.
r equivalent states s1 s2 iffinalstate s1 notfinalstate s2 ornotfinalstate s1 finalstate s2 return false elsereturn trueiff t t source t s1 t t source t s2 trigger t trigger t action t action t guard t guard t target t target t t t source t s2 t t source t s1 trigger t trigger t action t action t guard t guard t target t target t where s1 s2means thetargetsarethesame state oroneiss1andtheothers2.
g mergeequiv alentstates efsm m s t a si forasetoftransitions t triggers denotes thesetoftriggers ofthetransitions oft.
function metric g denotes thenumber ofstates remo vedbymerging groups ingintosingle states s g s where s denotes thesizeofsets.
possiblegr oups ss 2s ss t t source t ss target t ss action t skip triggers triggers ifpossiblegr oups ne ationslash then mergegroups pg 2possiblegr oups pg ne ationslash state setsss1 ss2 pg ss1 ne ationslash ss2 ss1 ss2 bestgr oup g mergegroups such thatmetric g ismaximal.
collapsestates m bestgr oup figur e5 algorithms a3anda4 twostate merging algorithms machines.
ithasacounterpart that mergesleft equi valent states.
however thismergeisonly relevantfornon deterministic efsms andisnotpresently implemented.
merging both r equi valent andlequivalent states forms abisimulation forgeneral efsms.
theapproach implemented bythefunction r mergeequiv alentstates showninfigure repeatedly mergespairs ofstates provided that thetwostates ofthepairarer equivalent until nofurther merging ispossible.
states s1ands2arer equivalent if foreverytransition froms1 there isacorresponding transi tionfroms2andvice versa.
that is foreach trigger event theoutgoing transitions from thetwo states areidentical intheir guards andactions andhaveequivalent targetstates after themerge i.e.
s1ands2areconsidered tobethe same state .
this transformation preserv estheregular expression language i.e.
thesetofstutter free eventsequences accepted by thestate machine.
the second merging algorithm g mergeequiv alentstates showninfigure isamore aggressi vemergethatcanyield greater simplification and asatradeof f only preserv estheweak semanticrequirement.
inthisfunction thesetpossiblegr oups includes allgroups subsets ofs thatareeligible tobemergedintosingle states.
agroup sscanbemergedifithassizetwoormore alltransitions within thegroup havenoactions andthesetofinternal triggering events isdisjoint from thesetofexiting triggering events .the set ofinternaltriggering eventsincludes those eventsthattrigger transitions from astate insstoanother state insswhile thesetofexiting triggering events includes those events thattrigger transitions from astate insstoastate outside ofss.while unimplemented itispossible torelax thisrequirement andallowthemerge provided that foralleventse theguard conditions ofeach internal transition triggered byearelogically inconsistent with theguard conditions of alloftheexiting transitions triggered bye.
ifthesetpossiblegr oups isnon empty then some merging ispossible.
todetermine thebest merge asetofallpossibilities mergegroups isdefined.
this setincludes subsets ofpossiblegr oups that arepairwise disjoint andcanthusbemergedsimultaneously .finally thesubset thatmaximizes thenumber ofstates remo vedischosen.
because thisalgorithm isexponential inthenumber ofstates which islikelytobethecase foranyalgorithm which considers allpossi blecandidates forstate merging future workincludes considering heuristics forapplying g mergeequiv alentstates .howeverthe empirical study reported insection .3indicates that inpractice theruntimes arereasonable.
figure 6illustrates theimpact ofconstant propag ation andstate merging.
efsm aissliced with respect toignore seti a .slicingremo vesthetwoassignments toxwhen itdeletes thetransitions froms3 s4ands5 s4.this leavesxwith theconstant value .constant propag ation rewrites theguard x 2onthetransition froms4tothefinal state to true which inturnenables r mer ging ofstatess4ands5leading toefsm b.efsm cshowstheresult of r mer ging states s1ands3.this mergedoes notrequire constant propag ation thus theexample illustrates both that some merging ispossible without performi ngconstant propag ation andthatconstant propag ation canenable additional merging.
ifonly stutter freesequences areacceptable theng mergeequiv alentstates can beused.
this mergess1 s3ands4 s5yielding efsm d. .algorithm correctness inwhat followsweshowthatthebasic slicing algorithm a1is correct with respect tothestrong semantic requirement.
moreo ver weshowthattheconstant propag ation andright equi valent merging algorithms a2anda3 arealsocorrect with respect tothisrequirement.
finally thegroup merging algorithm isshowntobecorrect with respect totheweak semantic requirement.
before wepresent theproofs ofcorrectness wedescribe thesemantics ofefsms formally .
definition configurations let bethesetofallpossible storesforanefsm.
forefsm m s t a si aconfigur ation isapair s wher es sisastate and isastore.
definition status forefsm m s t a si astatus isapair c e wher ec isaconfigur ation ande a isanevent sequence .astatus isan initial status ifthestate contained initsconfigur ation isaninitial state.
definition enabled transitions forstatus st c e ofanefsm m s t a si wher ec s transition tisenabled iffsource t s guard t evaluates totruewhen evaluated using andtrigger t head e .theset enabled st denotes thesetofalltransitions enabled instatus st. thesemantics ofanefsm m isformaliz edasalabeled transition system lts .
states oftheltsarethestatuses ofmand transitions oftheltshavethesame labels asthetransitions ofm butextended with anadditional label forimplicit transit ions see theoperational semantics definition below .theltshasalabeled step rulewhich defines legaltransitions.
aclosed syste massumption ismade inwhich thestatus isonly changed explicitly bythe step rule.
the semantics ofefsm mtaking enabled transition t isgivenasanltsmovefrom status st1tostatusst2 denoted m st1t ltsst2.in sothestore isupdated using the store update function denoted by .this single step rule isformalized asfollows definition ltsstep lts forstatus st s e ofefsm m taking enabled transition tproduces thenextstatus t enabled st m source t e t lts target t tail e s4 b acts2s4 s5d gd acts1 d b b acts2b acts2 ga s1 s3 s5s2 d gd b b acts2gb s4 s5s3s2 s1d acts1 ds2c s1 s3bd acts1 ga x x 1a x x x x ds2 bd s4 s5s1 s3d acts1 b acts2 g x figur e6 this example illustrates therollofconstant propagation and state merging inthecurrentimplementation ofmodel projection.
applying basicslice toefsm ausing ignor eset i a removesthetwodashed transitions fromefsm a. efsm bshowstheresults ofconstant propagation which replaces theguard x 2with true and then ther mer ging ofstates s4ands5 which isenabled bytheconstant propagation.
efsm cshowstheresult oftheadditional r mer ging of states s1ands3.finally efsm dshowstheresult ofapplying g mer ge combining s1 s3ands4 s5.
definition operational semantics theoperational semantics defines themeaning ofefsm m s t a si asthelts st sti l lts wher estandstiare setsofstatuses andinitial statuses respectively thelabel setlis t wher ethespecial label isused tomodel implicit transitions and ltsistheltsstep rule fromdefinition .
definition stuttering rule forastatus st c e ifnotransitions areenabled then the head oftheevent sequence isconsumed without changing c. enabled st m c e lts c tail e definition reachable statuses set forefsm m s t a si having lts st sti l lts and arestricted event alphabet ar thesetstatuses m ar istheset ofstatuses reachable inzeroormoresteps fromaninitial status in anenvironment thatproduces only events found inar statuses m ar defines st st sti sti m stit lts stwhere trigger l ar definition status congruence statuses s1 1 e1 and s2 2 e2 arecongruent written s1 1 e1 s2 2 e2 iff 1 2ande1 e2.
inthefollowing proofs m continues todenote asliceofefsm m.subscripts areadded todenote aslice produced byaparticular slicing algorithm thus aslice ofmproduced bya1 figure isdenoted m .themain theorem uses simulation toestablish the correctness ofalgorithm a1byshowing thatforalleventsequences e fi a i manditsslicem 1produce corresponding statuses.
that is whate vermcandousing only therestricted eventsetm alsocando.this resul tisthen extended toshowthatthesimulation stillholds fora2slices.
finally itisshownthata3produces slices who ssimulation ishomomorphic tothose forslices produced bya2 and foreventsequences infi itf m a i .this result extends to slices produced bya4.
simulation isarelation between statuses intheoperati onal semantics ofapair ofefsms.
wewritest1 st2tomean st2 simulates st1.wemildly abusethewordsimulation when saying m simulates mforagivensetofeventsequencese.the intuition isthatifm simulates mforethen thetwomachines havethe same behaviorwhen placed inan en vironment thatcanonly produce eventsequences ine.first wegivethegeneral definition ofasimulation between thesemantics ofefsms andthen thedefinition for themeaning ofm simulates mfore.
definition simulation relation fortheoperational semanticsofefsms letefsms m s t a si and itsslice m s t a s i have statuses c1 e1 and c e1 respectively .
then c1 e1 c e1 iffwhene ver c1 e1 c e1 andm c1 e1 t lts c2 e2 there exists astatus c e2 suchthat m c e1 t lts c e2 and c2 e2 c e2 wher ee2denotes tail e1 .
definition efsm simulation efsm m s t a s i simulates efsm m s t a si fore written m em if thereisasimulation relation between thetwosemantics whose rangeincludes allstatuses inthesemantics ofm for event sequences ineand forevery start states i s iform thereisacorresponding start statesi siformsothatanyevent sequence eine andstore si e s i e thefirsttheorem states thatprojecting thebehavior ofanefsm viaanignore setissafeastheresulting efsm simulates theoriginal with respect tothereduced environment.
theor em1given efsm m s t a si anditsslicem s t a si produced byalgorithm a1using ignor esetim e m 1fore a i m 1simulates mfore a i .proof.wefirst provethatanon empty simulation relation exists between thesemantics ofm 1andthesemantics ofm.ifm 1isproduced frommbyalgorithm a1using ignore seti thenm 1isa submachine ofm itsstates transitions andactions arecontained inthestates transitions andactions ofm .without lossofgeneralitywecanassume thatthesetofpossible stores foreach machine is thesame.
then each status ofm 1isastatus ofm.ifmhasstatus s e andm 1hasstatus s e where s s ande e a i then wecanshowthattheysatisfy asimulation relation.
because thestatuse sareidentical s e s e .
nowassume thatm s e t lts s1 1 tail e where head e a .wehavethatm s e s e t lts s1 1 tail e aswell.
ifthatwere notthecase sincet lts corresponds toatransitiont inmandt istriggered byanevent ina thefailure tobeinm 1canonly bebecause thetransition is deleted during theconstruction ofm 1bya1because itisunreachable.
howeversince itssource state isinm byarbitrary choice of thestatus form itmust bereachable.
thus theresulting pairof configurations areidentical andinturn must satisfy thesimulation relation.
wetake asthelargest simulation relation between the configurations ofthetwosemantics thatboth includes theidentical pairs from thesemantics ofmandm 1andsatisfy simulation asdefined indefinition .finally byconstruction includes apairof identical statuses foreveryinitial status inm 1because a1includes allofm sinitial states inm .
square wenextshowthatthere isanefsm simulation between theoriginalmachine andtheslice produced bya2 which extends a1by applying constant propag ation.
proposition 1given efsm m s t a si anditsslicem s t a si produced bya2using ignor eseti m em wher ee a i .
proof.letm s t a si betheresult ofapplying a1to musing ignore seti.weshowthatm 2simulates m 1fore that isthere isasimulation 2such thatm em 2andthen relyon theclosure ofsimulations under composition fortheexistence ofa simulation ofmbym 2fore i.e.m em .
first observ ethata2produces m 1andthen performs constant propag ation.
theeffectofconstant propag ation onm 1isthatsome transitions whose guards areconstantly falseinthesemantics ofm aremissing inm some rather than allbecause thecorrectness of theconstant propag ation algorithm implie sitisconserv ative .furthermore transitions inm 1only reachable viatransitions whose guards areconstantly falsearemissing inm .som 2isasubmachine ofm .
weshowthat there isanonempty simulation ofthesemantics ofm 1bythesemantics ofm .letst2 s e beastatusofm .since m 2isasubmachine ofm 1st2isalso astatus ofm 1andtheidentical pair satisfy .nowassume thatm s e t lts s1 1 tail e .m s e t lts s1 1 tail e willhold unless thetransition t t 1does not existint .this could beforoneoftworeasons either theguard oftisconstantly false ortisonly reachable viatransitions whose guards areconstantly false.
inthefirstcasem s e t lts s1 1 tail e isnotpossible inthesecond stisnotareachableconfiguration ofm soneither isitareachable configuration of m .therefore m s e t lts s1 1 tail e holdsandtheresulting configurations areidentical satisfying thesimulationrelation.
again 2isdefined similarly to andtheargument fortheinitial configurations ofm 2satisfying therelation issimilar .
square wenowshowthatthesimulation produced byalgorithm a3is homomorphic tothatproduced byalgorithm a2.
proposition 2given efsm m s t a si anditsslicem s t a si produced bya3using ignor eseti m em wher ee a i .
proof.letm 2betheslice ofmproduced bya2usingi.we showthat there exists a model homomorphism h fromm 2to m .wethen arguethathnaturally extends toahomomorphism between thesimulations ofm 2andm thus m em 3follows fromm em .
assume thatm 2includes statess1 s2where s1ands2haveidentical outgoing transitions forevents ina i.inmore detail for each transiti ont1where source t1 s1andlbl t1 e acts andtarget t1 x there isatransition t2where source t2 s2 lbl t2 e acts andtarget t2 x where x x or x x s1 s2 .model m 3isidentical tom 2except thats1and s2arereplaced byasingle states each transition ttargeting s1or s2isreplaced beatransition targeting s matched transitions t1and t2inm 2asabovearereplaced inm 3byasingle transi tiontwith source t s lbl t e acts andtarget t zwhere z x ifx ne ationslash s1andx ne ationslash s2 orz sotherwise.
therefore m 3isclearly homomorphic tom .
this model homomorphism induces asimulation homomorphism thatmaps status form 2tothestatuses form .inparticular the statuses fors1ands2aremapped those fors.since theassoci ated transitions t1andt2havethesame label theresulting configurations arenotaffected.
consequently m em 2implies m em .
square finally weshowthatapplying a4also induces asimulation between thesemantics oftheoriginal machine andtheresulting slice butonly with some further restriction onthetype ofinput eventsequences thatcanbeconsidered inthesemantics.
proposition 3given efsm m s t a si anditsslicem s t a si produced bya4using ignor eseti m e m wher ee fi itf m a i thesetofrestricted sequences which arestutter freeonm.
proofsketch.
letm 3betheslice ofefsm mproduced byapplyingalgorithm a3.lethdenote themodel homomorphism theexists between m 3tom .proposition 2showsthatthere isasimulation e such thatm e m .
the proposition actually provesthe stronger result fore fi a i a i which isasuperset of e .
theremainder oftheproof showsthatusinghthisrelationship extends tom i.e.
thatm h e m .
model homomorphism hinduces ahomomorphism between the ltssthatarethesemantics ofm 3andm 4respecti velybutonly if theinput eventsequences form 3arestutter free.
consider astatus s e inthesemantics ofm .itsimage inthesemantics ofm under theinduced homomorphis m also called h is h s e .
nowsuppose m s e t lts s e where e tail e .sinceeisstutter freeform 3thelabel onthastrigger t head e .wehavetwocases toconsider .inthefirstcase head e isinternal andm 4takesaself loop m h s e h t lts h s e andh s h s and because internal labels havenoactions .
alternati velyinthesecond casehead e isexiting andm h s e h t lts s e because gmergeequiv alentstates preserv esexiting transitions.
note thatifeisnotstutter freeonm 3thisbreaks down.itispossible thatm stutters m s e t lts s e whereas because of themerging ofstates there existanexiting transition fromh s in m 4thatistriggered byhead e .
thus inconclusion homomorphism hinduces ahomomorphism onsimulations such that foreventsequences infi itf m a i m h e m .combined with theresult from proposition thatm 3m weconclude thatm h e m .
square .empirical evalu ation forenvironment based slicing tobeofpractical use itisimpor tant toempirically consider thereduction obtained.
this section presents results from implementations ofthefour model slicing algorithms a1 a4.theempirical study addresses thefollowing three research questions rq1what istheimpact onmodel sizeofslicing with respect tosmall ignore sets?
rq2what istheimpact onmodel sizeofslicing with respect toalllargeignore sets?
rq3what istheperformance oftheslicer?
thetenefsm models thatwere used intheexperiment areshown intable 1where each model ssizeisgiveninterms ofthenumber ofstates s andtransitions t andthenumber ofeventsinits input alphabet event .thefirstsixmodels were used bykorel etal.
instudies ofdependence based slicing.
thelastfour aretheproduction systems inres anddoorcontrol from previous model based studies andtcp andtcsbin.
tcsbin provided bymotorola wasoriginally written insdl .since sdl specifications arericherthan those currently handled byourtool this model wastransformed toasemantically equivalent model e.g.
by remo ving theneed for history and all state types .
table experimental models.
efsm model s t event atm cashier cruisecontrol fuelpump printtoken vendingmachine doorcontroller inres protocol tcp tcsbin total .
small ignor esets thefirststudy exhausti velyconsiders theimpact ofslicing using small ignore sets.
smaller ignore setsshould produce largerslices andthus provides a worstcase forthereduct ions tobeexpected from environment based slicing.
inaddition slice sizeisaproxy for theimpact ofanevent alargerslice size indicates asmall impact while asmall slice size indicates aneventhaving alargeimpact.
thus computing allpossible slices canidentify interesting events.
the experiment used allignore setsofsize and4.table presents theaverage slice sizecomputed overslices from alltensubjects separately foreach ofthefour algorithms.
overall thereductioninthenumber ofstates andthenumber oftransiti onstellasimilarstory .inaddition asexpected themore expensi vealgorithms provide consistently smaller slices.
considering thatatn 4onlyslice size states slices120 0a4a3a2a1 slice size transitions slices120 0a4a3a2a1slice size states slices1200 0a4a3a2a1 slice size transitions slices1200 0a4a3a2a1 figur e7 allslice sizes foralgorithms a1 a2 a3anda4.the upper twofigur esshowallslice sizes when theignor esetiissetto each ofthe142events andthelowertwographs showallslice sizes when theignor esetiissettoeach ofthe1323 pairs ofevents.
slices120 0slice size states a4a3a2a1 slices120 0slice size transitions a4a3a2a1 figur e8 allslice sizes foralgorithms a1 a2 a3anda4using allpossible ignor esetscontaining allbutone n events.
athird oftheevents are onaverage being ignored thereductions areconsiderable a4reduces thenumber ofstates by60 andthe number oftransitions by70 .
forexpensi veapplications such as model checking thisreduction isespecially significant.
table average slice sizewhen ignoring nevents.
states transitions n n n n n n a185.
.
.
.
.
.
a280.
.
.
.
.
.
a378.
.
.
.
.
.
a471.
.
.
.
.
.
figure 7showsgraphs ofallslice sizes forallignore setsofsize n 1andn 2using allfouralgorithms.
ineach graph thex axis showstheslices inmonotonically increasing order ofslice size.
normalized toapercentage they axis showsslice sizeasapercentage ofnumber ofstates orthenumber oftransitions.
the data isindividually sorted andthus should notbeused tocompare aparticular slice.
inallgraphs thefour lines showsimilar trends.
consider ingtheextremes foralgorithm a1andsingleton eventignore sets there arenostates remo vedinapprox 80ofthe142slices indicated bythestraight line onthetopright ofthediagram .
forthese slices thereductions inthenumber oftransitions issmall less than .
attheother endofthespectrum insevencases theslices havezero transitions.
this occurs when akeyeventisused astheslicing criterion.
further investig ation reveals that these events often occuronthetransitions close toaninitial state where thetriggering event determines iffurther processing bythemodel isneeded.
forexample ignoring thecard eventintheatmmodel corresponds tonot inserting anatmcard andthus theatmremains initsidlestate.
.
largeignor esets the second research question considers largerignore sets.
for a1 using ignore setsofsizen alargersize than considered intable theaverage sliceincludes .
ofthestates and10.
ofthetransitions.
the sizes fora2 a3 anda4followthesame pattern asseen intable .attheextreme ignoring allbutoneevent produces anaverage slice sizeof12.
states and1.
transitions.
figure 8showgraphsoftheseslices foralltenmodels where only a single lineisvisible forallfour algorithms because theyallproduce verysimilar sized slices.
one motivation forthisresearch question wastosupport acomparison with dependence based efsm slicing techniques andwith theslicing ofprograms.
dependence based techniques extract the part ofanefsm thataffectsoneormore elements states transitions orvariables used intransition labels from theefsm.
inthe following comparison these elements areassumed tobetransitions.
previous studies ofsuch slices using thesame tensubjects report an average slice sizeofbetween .
and68.
ofthetransitions usingavariety ofdefinitions of dependence .from aprogram p acommon variant ofprogram slicing extracts asemantically meaning subprogram thatcaptures theexecution ofaparticular statement fromp.itisdifficult tomake adirect comparison ofenvironment based slicing with theslicing ofprograms ordependence based techniques forefsms because theslicing criteria aresodifferent environmentbased slicing startswith oneormore events toignore while the others start with aparticular transition orstatement topreserv e.the average program slice sizeisabout onethird ofaprogram .this iscomparable tothereduction intransitions foramodel using an ignore setofsize4.
comparing with efsm dependence based techniques onepossible comparison clearly favorsenvironment based slicing given thatdependence based approaches preserv ethebehavior ofasingletransition onemight compare them with anignore setthatincludes allbutoneevent.
considering allbutoneeventissimilar todependence based slicing sseeking topreserv e asingle transition from themodel.
inthiscasea4 saverage slice size of1.
ofthetransitions compares quite favorably .asimilar result might beexpected from comparing theuseofignore setsofsizeonewith dependence based slices takenwith respect toalltransitions notusinganignored event.
asthisslicing criterion starting point isa substantial portion ofthemodel thiscomparison toofavorsenvironment based slicing.
finally consider alike for likecomparison using asingle transition fordependence based slicing andanignore setofsizeoneforenvironment based slice.
herea4 saverage slice size of66.
ofthetransitions whiletowardthelargeendofthe range fordependence based slicing .
stillprovides a comparable reduction.
.
runtime efficiency thefinal research question considers theruntime efficienc yofthe slicer .slices were computed ona2.4ghz intel r core duo cpu having 4gb memory .forignore setsofsizeone theresults show thata1anda2areextremely fastwith maximal times of0.016s and0.042s respecti vely.incontrast theexecution time fora3and a4reflect thepspacecomple xityofminimizing anefsm and in general annfa .
theaverage times were 27sand36sand themaximal times were 94sand753s respecti vely.alltimes drop with largerignore sets.
forexample theworst case times forthe four algorithms using allignore setsofsize4are0.
s .025s 29s and126s respecti vely.while allfour showalargepercentage drop theimpact ismore meaningful fora3anda4 where theworst case runtime fora3anda4drop by70 and83 respecti vely.
.rela ted work our model projections arerelated tomodel dependence analysisandslicing.
however previous workonslicing state based formalisms hasconcentrated exclusi velyonawhiteboxviewofastate machine inwhich themachine ismuch like a special case ofaprogram itsstates loosely play therole ofstatements anditstransitions merely mimic control flow.this hasallowed concepts from program slicing tobeadapted forstate based models.
though valuable such approaches miss theability totalk about sub models extracted from anoriginal model interms ofthe environment inwhich themodel operates.
inthissection wedescribe therelationship between model projection andprevious work ondependence analysis andslicing ofstate based models.
korel etal.
describe theincreased comple xity oftheproof oblig ation formodel based slicing arising from thepresence ofenvironmental considerations while sanchez etal.
advocate a clear separation between equipment control activities andproduct manuf acturing procedures.
however neither provide algorithms that yield model projections defined for restricted environments.
cheung andkramer consider aform ofreachability analysisinterms ofevents.
such ananalysis isapre requisite ofslic ing which weuseinourmodel projection.
however cheung and kramer usetheir approach tosimplify interf aces nottosimplify the models themselv es.thetwocomplement each other asmodel projection computes theimplications ofthesimplified interf aces onthe models themselv es.
the previous workthat most closely resembles model projectionisthatdescribed byeshuis andwiering a .
their approach wasdeveloped tohandle thestate space explosion problem when model checking workflo wsaremodelled asuml activitydiagrams.
rather than being based ondependence analysis their approach consists offour reduction rules based onactivityhypergraphs.
each of their four rules isrelated toboth model based slicing andaspects of model projection.
thefirstofthefour rules reflects changes made to themachine during theoverall rewrite process back toitsenvironment.
this issimilar toournotion ofimplicit transition free event sequences definition .thesecond ruleinsists thatnotwonamed eventscanoccur atthesame time i.e.
theycanonly beinterlea ved .
this issimilar toourrequir ement thatonly oneeventisdealt with atatime.
the third rule defines when avariable canberemo ved andissimilar toadata dependence analysis thatisaprerequisite of dependence based slicing.
the fourth rule which resembles arestricted form ofslicing defines howwait andactivity states canberemo vedfrom uml activity hypergraphs.
incomparison with ourapproach theenvironmental restriction isspecified bythe designer whereas intheapproach ofeshuis andwiering a theiterativeapplication ofthefour rules canhavetheeffectofremo ving some environmental elements.
model projection introduces thepossibility ofslicing ontheevents inwhich amodel participates toproduce areduced model specialized toaspecific environment.
model projection therefore presents newchallenges andopportunities formodel based slicing inwhich theenvironment essentially becomes afirstclass citizen intheslicingcriteria.
.conclusion weintroduced model projection inorder toextend tothedesign levelbenefits thatslicing offersatthecoding level.however modeling languages arenotsimply higher levelprogramming languages andsowefound thatweneeded tore think thewayinwhich thesimplification inherent inslicing isdefined andimplemented.
inparticular wefocused onthemodel senvironment asacriterion forsimplification rather than theinternal white boxstructure ofthemodel itself.
aswith anynewapproach there isanoblig ation todemonstrate correctness effectiveness andefficienc yandthese havetherefore formed theprimary contrib utions ofthispaper .wehaveintroduced andprovedcorrect asetoffour algorithms formodel projection that trade effectiveness interms ofprojected model size forefficienc y interms ofprojection construction time .
theimplementations of ourfour algorithm sareavailable from theslim project website at .
.