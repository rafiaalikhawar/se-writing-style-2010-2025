multi objective optimization in rule based design space exploration hani abdeen diro universit de montr al montr al canada abdeenha iro.umontreal.cad niel varr dept.
of measurement and information systems bme diro universit de montr al varro mit.bme.huhouari sahraoui diro universit de montr al montr al canada sahraouh iro.umontreal.ca andr s szabolcs nagy dept.
of measurement and information systems budapest university of technology and economics budapest hungary nasz013 gmail.com bel heged s dept.
of measurement and information systems budapest university of technology and economics budapest hungary abel.hegedus mit.bme.hu kos horv th dept.
of measurement and information systems budapest university of technology and economics budapest hungary ahorvath mit.bme.hu abstract design space exploration dse aims to find optimal design candidates of a domain with respect to different objectives where design candidates are constrained by complex structural and numerical restrictions.
rule based dse aims to find such candidates that are reachable from an ini tial model by applyinga sequenceof exploration rules.
solv ing a rule based dse problem is a difficult challenge due tothe inherently dynamic nature of the problem.
inthecurrentpaper weproposetointegratemulti objective optimization techniquesbyusing non dominatedsortinggeneticalgorithms nsga todriverule baseddesignspaceexploration.
for this purpose finite populations of the mostpromising design candidates are maintained wrt.
different optimization criteria.
in our context individuals of a generation are defined as a sequence of rule applications leadingfrom an initial model to a candidate model.
populationsevolve by mutation and crossover operations which manip ulate change extend or combine rule execution sequencesto yield new individuals.
our multi objective optimization approach for rule based dse is domain independent and it is automated by toolingbuilt on the eclipse framework.
the main added value is toseamlessly liftmulti objectiveoptimizationtechniquestotheexploration process preserving both domain independenceand a high level of abstraction.
design candidates will still be represented as models and the evolution of these models as rule execution sequences.
constraints are captured bymodel queries while objectives can be derived both frommodels or rule applications.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributedfor pro fit or commercial advantage and that copi es bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or re publish to post on servers or to redistribute to lists requires prior speci fic permission and or a fee.
request permissions from permissions acm.org.
ase september vasteras sweden.
copyright acm ... .
.
and subject descriptors i. .
problemsolving control methods and search heuristic methods graph search strategies d. .
design tools and techniques evolutionary prototyping computer aided software engineering keywords rule based design space exploration multi objective optimization model driven engineering .
introduction asa challenging branchof search based software engineering sbse design space exploration dse aims at search ing through different design candidates to fulfill a set of constraints and then proposing optimal designs with respect to certain objectives.
it frequently supports activities like con figuration design of avionics and automotive systems.
manyof such traditional static dse problems can be solved byusing advanced search and optimization algorithms or con straint satisfaction programming techniques .
in model driven engineering mde rule based dse aims to find instance models of a domain that are i reachable from an initial model by applying a sequenceof exploration rules while ii constraints simultaneously in clude complex structural and numerical restrictions.
model driven techniques offer expressive modeling languages and advanced tools to capture the dse problem of different do mains independently on a high level of abstraction close tothe domain itself.
however solving a rule based dse prob lem is a difficult challenge dueto theinherently dynamicna ture of the problem.
such dynamic dse problems may arise in complex reconfiguration challenges of supervising cyberphysical systems cps or it infrastructure or quick fixgeneration in domain specific modeling environments .
as a practical observation the solution space of a rulebased dse problem is dense in principle but one cannotput an a priori upper bound on the number of model elements used in a design candidate i.e.
model elements may be created and deleted during exploration .
unfortunately this makes the exhaustive exploration of the design space intractable.
furthermore many practical problems necessi tate to continue the exploration of the design space incre mentally from a previous solution instead of starting thesearch from scratch each time .
such incremental solvingis rarely handled by state of the art constraint solvers as demonstrated in .
rule based model driven dse problems have additional challengesalso fromanoptimizationperspective.
first some objectives are not values of simple cost attributes but com plex model metrics calculated by model queries.
further more certain cost calculations may depend on the sequence of exploration rules applied on the design model.
finally we may not find a single combined objective function butmultiple objectives may need to be incorporated to identifythe best design candidates.
existingrule baseddsesolutionsexploit modelchecking with powerful graph based symmetry reduction dependencyanalysis and hintsby formal abstractions or different search strategies e.g.
hill climbing simulatedannealing .
as a commonality in these approaches thecore exploration procedure follows a local search based approach i.e.
it gradually extends the search towards promising candidates by priorities defined by local heuristics.
global search techniques like genetic algorithms or multiobjective optimization have already proved to be successfulin various mde scenarios for finding constraints modeltransformations or solving static dse problems where an exhaustive search algorithm becomes infeasible.
moreover they provide graceful degradation for problems where no solutions exist which meet all the objectives andconstraints by relaxing hard constraints to soft constraints.
inthecurrentpaper weproposetointegratemulti objective optimization techniques by using the non dominatedsortinggeneticalgorithm nsga ii todriverule based design space exploration.
for this purpose finite populations of the most promising design candidates are main tained wrt.
different optimization criteria.
in our context individuals of a generation are defined as a sequence of ruleapplications leading from an initial model to a candidatemodel.
populations evolveby mutation and crossover operations which manipulate change extendor combine rule execution sequences to yield new individuals.
however a keytechnical challenge that we face in genetic rule based dseis to preserve the feasibility of candidate solutions whichare generated using genetic oper ators.
indeed in rule based dse crossing two feasible solutions and or randomly mutating a feasible solution may yield infeasible candidates if the corresponding rule execution sequence is infeasible.
inour approach candidate solutions generated using geneticoperators are automatically corrected to preserve their fea sibility.
the main added value of our multi objective optimization approach for rule based dse is to seamlessly lift multi objective optimization techniques to a domain independentmodel level exploration process while preserving a high levelof abstraction.
design candidates will still be representedas models and the evolution of these models as rule execution sequences.
constraints are captured by model queries while objectives can be derived both from models or rule ap plications.
on the theoretical level models are formalizedas graphs model queries as graph patterns and explorationrules as graph transformation rules thus our work can be considered as a multi objective exploration of graph transformation system.
our approach is supported fully auto mated tooling built on advanced components of the eclipseframework.
.
background .
motivating example as a motivating example of the paper we consider modeling the configuration of a smart building which offers offices to rent with highly configurable services such as firealarm air conditioning and security monitoring see fig.
.asmart buildingis frequentlyconsideredas a cyber physicalsystem cps where services need to be deployed on both embedded sensors controllers etc.
andvirtual e.g.
servers cloud computational units which significantly complicatesthe design and maintenance of service configurations over achanging infrastructure.
a architecture b services and requests figure configuration model of a smart building in our smart building example companies are offered to rent offices with multiple rooms each of which can be con figured according to four service packages see fig.
1b basic this package runs the compulsory fire alarm service which requires one smoke sensor for each room.
comfort this package also offers air conditioning by measuring temperature by three sensors per room and setting the required temperature.
measuring thetemperature also offers a backupsolution for fire alarmshould the sensors fail.
secure this package extends the comfort package to offer security surveillance by a video camera con tinuously recording events in the room and a motioncheck application which highlight critical events auto matically.
max this package enhances the securepackage by providing a heat map of the room which can be usedfor fire alarm as well as for surveillance purposes.
two sample company requests are also listed in fig.
1b which summarizes the selected packages for a certain number of rooms together with the application instances to be deployed and hardware devices to be installed.
for instance the first request consists of rooms with comfort pack age and room with basic package and it necessitates torun smoke detector sd service for rooms device perroom the measure temperature mt service for rooms devices per room and the set temperature application for rooms jointly installed on a compute server .
domain metamodel.
the main concepts of configuration design for this smart building are generalized in the meta model of fig.
.
renting companies will issue requestsf o r implying a set of requirement s each of which identifies a required service called application type shortly appltype and the number of redundant instantiations for running this application countattribute .
sensorsandcomputationunits are uniformly called hosttype s. each application type may claim several host types and sufficient amount of resources e.g.
memory storage for its execution as defined by a re source requirement shortly resreq .
forinstance calculating a heat map requires gb memory and gb permanent storage as defined by the labels of dashed arrows in fig.
1a.
figure metamodel for smart building configuration in therunning system multiple application instances applinstshortly of an application type may exist each of which isdeployedonahost instance shortly hostinst corresponding to a specific host type.
such deployment consumes a certain amount of resources in the host instance up to itstotal memory and storage as specified by the correspond ing resource requirement.
application instances need to be started after they are allocated to a host instance andstopped when they are no longer needed which fact is rep resented by the stateattribute.
.
a rule based dse problem configuring the smart building i.e.
installing devices allocating and running applications can be considered as adesign space exploration problem.
however this configura tion is not a static problem as requests may change overtime new requests arrive existing ones are canceled and certain faulty devices may no longer function.
this way we are interested in an incremental approach for calculatinga new configuration which starts from the last configurationand incorporates the changes in the context and require ments of the system.
furthermore there are multiple constraints and objectives which needs to be incorporated for a good candidate configuration.
figure constraints for smart building configuration constraints.
constraints capture valid or invalid configurations.
they are frequently formalized by graph patterns as well or ill formedness criteria which capture the violations of the cor responding constraint.
in our example see fig.
satisfiedreq e identifies a requirement eof a requestrwhich is instantiated into a sufficient number of application instances i.e.
the number of instancesis equal to the required redundancy allocatedappl ai identifies an application instance aiwhich is allocated to a host instance hito fulfill the resource requirement between the corresponding application type atand host type ht appinstrun ai identifiesan application instance of a configuration which is running extrahost h identifiesahostinstance hwhich does not host any application instances.
thefirstthreeconstraintscapturedesiredsituations while the fourth constraint captures an undesired case.
all these constraints are captured by means of graph patterns whichdenotestructuralconditionsthattheunderlyinggraphmodelneedstorespect.
given aconstraint candan instance modelm m c mdenotes a graph morphism identifying a violating fragment of m. objectives.
inordertoobtainagoodconfiguration weneedtoaddress various objectives ideally all configuration constraints need to be satisfied thus this is a top level objective.
291figure exploration rules of the smart building example the smart building operators aim at maximizing the utilization of compute servers.
here the best utiliza tion of memory or storage is incorporated for eachserver and the average of utilization is taken as a re source objective.
installing new host instances and other configurationoperations imply certain cost.
minimizing such costsis another objective of configuration design.
in our context we distinguish between model objectives which are calculated from design candidates e.g.
by query ing the underlying model and trajectory objectives which are calculated along trajectories of applied exploration rules.
exploration rules.
inrule baseddse designcandidatesareallowed toevolve by executing exploration rules.
in the paper such explo ration rules are captured by graph transformation rules r l r whereldenotestheleft handside graph pattern prescribing the precondition of rule application while rdeclaratively describes the effects of the rule.
rules may have i input and output parameters to pass contextual objects to other rules and ii costs incurring when a rule is applied.ar u l eris applied on a model mby finding a match m of graph pattern linm denoted as m l mand also called an activation of rule r then removing elements frommw h i c hh a v ea ni m a g ei nl rand finally creating new elements in mfor elements in r l.a sar e s u l to f rule application we obtain a new model m 1which step is denoted as mr m leftrightline m1.
the exploration rules of our example are depicted in a combined notation like in groove in fig.
.
rule newhostinst installs a new host instance hiof ah o s tt y p e htand sets the available resource parameters to that of the host type.
rule newapplinst creates anewapplication instance aiin accordance with the countattribute of requiremente by reusing the condition defined by graph pattern unsatisfiedreq e .
rule startinitializes a stopped application instance aiwhich is already allocated to a host device while rulestopstops a running instance.
rule allocate aims to allocate an unallocated and stopped application instance aito a host instance hiin accordance with the resource requirement rr provided that sufficient memory and storage space is still available at hi.
ruledeleteremovesanexistingallocation ofastopped application instance aifrom a host instance hi a n d frees the related memory and storage resources of hi.
rule movecombines the allocate and delete rule into one and changes the allocation of an application instanceaifrom host instance hitohn a n da d j u s t s the resource usage accordingly.
a cost is associated to the application of each exploration rule.
thecostofrule newhostinst isspecifictothematched host type element htas defined by the black circles in fig.
1a while the cost of all other rules are defined in graycircles in fig.
.
.
approach in this section we describe our approach to integrate multi objective optimization techniques by using the non dominatedsortinggeneticalgorithm nsga ii todriverule based design space exploration.
in the following wedescribe the basic principles of the used multi objective op timization technique then we present an overview of our approach and its implementation details.
292figure overview on nsga ii process .
optimization algorithm principles fig.
shows an overview on the nsga ii.
the aim of nsga ii is to find a set of pareto optimal solutions in a single run.
as a genetic algorithm nsga ii performs a globalexploration of the search space by making and evolving finite populations of candidate solutions using selection and genetic operators.
the outputof thealgorithm is a set of thefittest solutions i.e.
the pareto front produced along all generations.
the decision maker can select one of the fittestsolutions according to his her preference e.g.
the solution which satisfies all the requirements .
when searching for solutions to a problem using pareto optimality i.e.
multi objective the search yields a set of solutions that are not dominated .
if all objective func tions are for maximization we say that a feasible solutions 1dominates another feasible solution s2 s1 os2 if and only if s1is better than s2for at least one objective while s2is not better than s1regarding all the objectives in o oj o oj s1 oj s2 oi o oi s2 oi s1 nsga iisortssolutionsinorderedfronts frombesttoworst according to their non domination level.
however from a practical mde viewpoint constrained multi objective optimization is important in the context ofdse.
this is due to the fact that the primary objective of a dse approach is to find valid solutions that satisfy all the requirements of the underlying problem.
other objectives such as reducing the cost of obtained solutions could not add an effective value to the optimization results unless theobtainedsolutionsarevalid.
hence weadapttheconstraint handling strategy with nsga iithat was proposed in .
i nt h ep r e s e n c eo fc o n s t r a i n t s i.e.
requirements a solution can be either valid i.e.
it satisfies all the constraints or invalid i.e.
it does not satisfy all the constraints totally or partially .
considering the top level preference of con straints satisfaction over other objectives that we describedin sec.
.
the domination function in equation is modified as follows definition.
asolution s 1issaid to constrained dominate as o l u t i o n s2 if one of the following conditions is true .s1is valid and s2is not.
.
both solutions s1ands2 are invalid but s1hasa smaller overall constraint violation .
.s1ands2are valid and s1dominates s2with the usual domination function equation .
the idea behind this constrained domination strategy is that on the one hand any valid solution has a better nondomination rank than any invalid solution.
on the otherhand valid solutions are ranked into their non dominationlevel based on their associated quality as measured by thevalues of objective functions.
and invalid solutions areranked into their non domination level in descending order according to their associated constraint violation.
in the following we presentour adaptation of the nsga ii to theproblem of rule based dse by defining our implementation of the following elements representation of candidate solutions individuals .
optimization objectives.
genetic operators used to explore the search space.
.
approach overview the optimization inputs and procedure.
fig.
shows an overview of our approach.
given an initial model m0belonging to a domain model dm as e to fr e q u i r e m e n t st o be satisfied req a n das e t rof exploration rules our multiobjective search basedapproachfor rule baseddseexploresthe design space starting from m 0by maintaining finitepopulations of the most promising design candidates wrt.
the set of requirements reqand other optimization criteria o. in our approach each individual of evolving populations is a map of a candidate model mnobtained as a sequence of rule executions denoted as rn leading from the initial model m0 tomn rn m0r1 m1 leftrightline m1...rn mn leftrightline mn w h e r eri randmi is the match of riinmi.
the generation of the initial population starting from m0 step 1of the optimization process in fig.
is achieved by applying random but executable exploration rules fromro nm .
the second step of the optimization process in fig.
is based on the nsga ii as explained in sec.
.
and 293figure approach overview fig.
where populations evolve by applying mutation and crossover operations which change and or extend existingrule execution sequences to yield new individuals.
the re quirements are defined as soft constraints cthat are captured by model queries see fig.
while other optimizationobjectives can be derived both from models or rule execu tion sequences.
each constraint c iinccan be associated t oas p e c i fi cw e i g h t widescribing the relative importance of this constraint thus each violation of ci calculated as a match of the corresponding graph pattern will be weighted accordingly.
candidate solution representation.
the multi objective rule based design space exploration problem can be defined as dse m0 c o r wherem0denotestheinitialmodel cdenotes the structural and attribute constraints characterizing valid design candidates ois a set of numerical objectives which needs to be optimized while ris a set of exploration rules describing valid evolutions of the design.
acandidate solution of a dse problem is a pair scand mcand rcand where the candidate model mcandfulfills all or some constraints in cand it is reached from the initial model m0by a sequence of rule executions rcand.
amodel objective omis evaluated for a candidate solution scandon the candidate model mcandwhile a trajectory objectiveotforscandis evaluated on the sequence of rule executions rcandleading to scand.
considering our running example reducing the number of constraint violations is a model objective or increasing utilization while reducing thecost associated to the trajectory r candis a trajectory objective.
definition of feasible and valid candidate solutions.
by definition a candidate solution is called feasibleif its rule execution sequence ris executable.
in a genetic approach for rule based dse infeasible solutions can occur when ap plying genetic operators e.g.
crossover on existing feasible solutions.
however in our approach such infeasible solu tions are automatically corrected or truncated to guaranty their feasibility or omitted if they cannot be corrected.consider newhostinst hi allocate ai hi rr which is a rule execution sequence that aims to create a new host instance hiand then allocate an application instance ai to it is not executable if there is no application instance ai to be allocated.
to correct this infeasible sequence the cre ationofanewapplicationinstancebyrule newappinst ai should precede the allocate ai hi rr rule.
otherwise the sequence must be truncated so that it includes only therule execution newhostinst cs1 .
a feasible solution s m r is defined as a validsolution if its associated model mfulfills all constraints inc i.e.
c c m c m. the objective of constraints ful fillment.
as constraints areformalized bygraphpatterns inordertoevaluatethede gree of well formedness constraints are met or ill formedness constraintsare violated in acandidatemodel m n w eu s et h e weighted sum of the number of matches for the corresponding graph patterns p. for instance let us evaluate the constraints of fig.
on a sample model mof fig.
.
for this model our optimization approach will returns that the graph pattern satisfiedreq has match and the graph pattern extrahost has match.
in our example the weight of satisfiedreq is set to w1 and the weight of extrahost is set to w2 therefore the degree of constraint violations in mis constviol m w1 w2 .
figure objective of constraint fulfillment formally let matches p m returnthenumberofmatches of the graph pattern p pin the model m a n dl e t wpdenote the weight associated to the constraint described by p wherewpis a positive value for well formedness constraints and a negative value for ill formedness constraints .
thenour objective of constraints fulfillment is defined as follows obj.
constfulfillment m p pwp matches p m the primary optimization objective of our approach as explained in sec.
.
is to maximize constfulfillment m i.e.
to maximize the fulfillment of positive constraints andminimize the degree of negative constraint violations.
model speci fic objectives.
our approach allows to define domain specific objectives captured by graph patterns over the underlying model.
thanks to the incremental query evaluation approach see sec.
.
the re evaluation of suchmodel objectives is instantaneous upon model changes.
in the context of our motivation example in this paper we definethemodel specific objective of maximizing theutiliza tionofcomputeservers csutil sothatthebestutilization of memory or storage is incorporated for each server.
294letutil csi returnthe normalized resource utilization for the computer server csiwhile the system level utilization of computer servers csutil for a solution s m r is defined as the mean of the utilization of each individual computer server element in m obj.
csutil s n j n j 1util csj in the above equation nis the number of computer server instances in the underlying model m. rule sequence objectives.
two valid solutions can beachieved via two different feasible sequence of rule executions.therefore wemaydefineobjectivesspecifictoruleexecutionsequences to evaluate the cost incorporated in achieving a valid solution along a specific path.
for this purpose we define the cost of a feasible solution s m r as the sum of costs of all rule executions in its sequence of rule executions r obj.
cost s cost mi 1ri mi leftrightline mi mi 1ri mi leftrightline mi r cost s takes its values in the interval .. .
minimizing cost s is an objective of our optimization approach.
computing the cost cost mi 1ri mi leftrightline mi of a rule execution in rdepends on three parameters to be defined by the domain experts fixed cost the fixed cost cbof the applied rule ri formally cost ...ri mi leftrightline ... f cb ri .
as defined in fig.
creatinganapplicationinstancewillalwayshave the same cost which is cb newapplinst .
match cost the match cost cmwhich is associated to the match miinmi formally cost ...rj mj leftrightline ... m cb rj c mj rj w h e r ecmj rj returns the cost of rja c c o r d i n gt oi t sm a t c h mj.
for instance the cost of rulenewhostinst is specific to the matched host type element ht as defined by the black circles in fig.
1a .
sequence cost the sequence cost csmay depend on the position of the rule execution ...ri mi leftrightline ...in r.f o r thispurpose wedefinethecostofsucharuleexecutionas relative to its position in ron the same match m cost ...rk mk leftrightline ... s position rk mk cost ...rk mk leftrightline ... m w h e r e position rk mk returns the position of rkapplication on the same match mkin r. genetic operators mutation and crossover .
in this paper we define and use different types of mutation and cross over operators for exploring the design space.
in our con text mutating a solution s m r means to modify the sequence of rule executions r which is conceptually different from most genetic approaches used for dse purposes.
thisc a nb ea c h i e v e di nd i ff e r e n tw a y s add new rule execution a new sequence of rule executions r is generated by selecting an appropriate exploration rule r fromr that can be applied on m and execute it r r mr m leftrightline m delete a random rule execution a new sequence of rule executions r is generated by deleting a random rule execution reiin r r re0 ... re i rei ?
...?
.
the question marks in the aforementioned sequencedenote the execution rules which will be checked forexecutability after delete is performed.
indeed afterdeleting re i the executability of the new sequence r is checked starting from the rule execution rei s ot h a t ifrei 1is not executable anymore it is then ignored removed from the sequence and so on for each rei k k .
swap between two rule executions a new sequence of rule executions r is generated by selecting a random rule execution reiin r then selecting another rule executionrej j i i n r that can replace reiand still executable then swap between reiandrejso that r re0 ... re j rei ?
...?
rei?
rej ?
...?
.s i m ilarly to the case of delete a random rule executiondiscussed above the executability of the new sequence r is checked starting from the rule execution rei .
the crossover operators apply on two individuals represented by the sequences of rule executions of two parentsolutions s m1 r1 ands2 m2 r2 and generate two new offspring individuals children .
fig.
describesthe three crossover operators that our optimization process uses a one point crossover b cut and splice crossover c one point permutation crossover figure crossover operators one point crossover a single crossover point on both sequences of rule executions of parents is selected.
all rule executions beyond that point in eithersequences of rule executions are swapped between thetwo parent sequences.
the resulting sequences of rule executions are the children.
cut and splice crossover cut and splicecrossover is a variation of the one point crossover where the difference is each parent s sequences of rule executionshas a separate choice of crossover point.
as a result the children sequences of rule executions will have different length than that of their parents.
one point permutation crossover inthiscrossover operator every rule execution reiin either sequences of rule executions parents will have an id.
this id is based on the applied rule riand the match element miofrei.
hence two rule executions riand rj can have the same id iff they are applications of the same rule ron the same match m.r e p r e s e n t ing the rule executions by their ids a sequence of rule executions will have a permutation representation asin fig.
8c.
with the one point permutation crossover one crossover point is selected on both sequences ofrule executions of parents from the first second par ent the permutation is copied up to this point then the second first parent is scanned and if the idof the rule execution is not yet in the offspring the rule execution is added.
for every crossover operation our approach performs anautomatic executability check of rule executions occurringafter the cut point s in children sequences of rule execu tions.
the correction mechanism is identical to that used inthe delete and swap mutations that we described above.
.
implementation overview the proposed framework has been fully automated by implementing it on top of the viatradse framework .
in put models and design candidates are represented as eclipsemodelingframework emf models.
theopensourceemf incquery framework is used for evaluating constraintsand calculating the valuesof objectives over instance models incrementally upon model changes.
finally operations are captured by graph transformation rules.
additional searchand configuration parameters can be set prior to starting amulti objective optimization run.
for each individual in a population we store the sequence of rule applications that leads to them from an initial model thus individuals get recalculated several times.
however due to the incremental transformation support by emf incquery this recalculation is very fast.
furthermore eachindividual can be processed in parallel by different threadsto speed up the exploration process.
implementation challenges included to identify if two individualsareidentical in apopulation and toefficientlyencode the individuals themselves.
instead of performingcostly graph isomorphism checks to address we relyupon the vector of numeric objectives if two individualshave the same values for all objectives then one of them is removed from the population.
for we use domainspecificstateencodingstoidentifyandstorematchesofrulesin order to replay them when deriving a new individual.
.
experimental evaluation as there are no widely established benchmarks available for evaluating rule based dse approaches we carried outexperimental evaluation in the context of our case study.
for this purpose we compare our multi objective optimization nsga approach with random simulation ran dom and a fixed priority local search fpls strategyused as a basis of comparison in .
as a consequence thedse problem is identical in both cases furthermore theevaluation of graph patterns and execution of graph transformation rules is carried out by the same implementation.this way any difference between the measurement results isexpected to be affiliated to the substantially different search strategies.
our measurements aim to address which dseapproach finds better candidates wrt.
different objectives.for this purpose we test the following hypothesisusing two tailed wilcoxon tests h0there is no significant evidence that nsga outperforms fpls and or random.
h1there is a statistical evidence that nsga outperforms other dse approaches wrt.
different objectives.
.
experimental scenario in our experimental scenario we generate requests for an increasing number of rooms with an equal useof all packages and respective model sizes of and graph elements .
the initial model only contains the requests with requirements and the application and hosttypesbutno host instances are available.
therefore it is therole of the dse process to create a sufficient number ofapplication and host instances allocate application instances tohost instances andthen start and stop the application instances by applying the appropriate explorationrules.
in the most complex case the different explorationtechniques had to synthesize a rule sequence consisting ofover steps.
in a preparatory phase we experimented with different configurations of our multi objective dse approach and wedecided on the most promising configuration parameters such as population size of individuals iterations between400 and steps crossover by permutation and high rateof mutations.
ourmeasurements were runon core desktopcomputers with gb of ram running on linux operating system.
the used java version was .
.
and the heap size was 24gb.
thenfortheexperiments wesetupatimeoutof2minutes for test cases except for the largest example where it was minutes and run experiments on the different problemsizes.
one experiment was constructed as follows nsga we selected population size popand iteration numberitfor a problem size and run our algorithms.
at the end of each run we selected only one solutionfrom the pareto front produced by nsga.
we selectedthe solution which has the best constraints fulfillmentvalue.
if several solutions have the best constraints fulfillment value then we select the solution which is characterized by the minimal cost and or the maximum usage of computer servers.
random w e e x e c u t e d pop itrandom simulation runs and recorded the best result.
fixed priority ls fpls we set up priorities in a way to guarantee that all application instances willeventually be allocated to host instances.
our priori ties guaranteed that the first three soft constraints will definitely be guaranteed but we may generate more host instances than necessary.
296figure quality of nsgasolutions producedin runsfor different problem sizes as measured by the measurementsnormalized constraints fulfillment costandcomputerserverutilization .
results analysis before comparing the results of our approach nsga with thoseoffplsandrandom weanalysisthequalityofnsga solutions.
figure shows the distribution of nsga produced solutions in runs for considered problem sizes and requested rooms .
the figure shows that in allconsidered scenarios nsga produced solutions have over all good quality.
considering all the produced solutions 30runs 4scenarios 120solutions the minimum fulfillment of constraints is above and for the major body of produced solutions the fulfillment of constraints is above .
analyzing the evolution of the mean value of con straints fulfillment through different problem sizes we findthat it takes its minimum value around in the prob lem size where the incorporated cost in the sequences of rule executions is relatively small as compared to the cost of other solutions in the problem size .
indeed this relativelow fulfillment of constraints is mainly due to the followingfact the optimization process was stopped before reachingsequences of rule executions that have enough depth to sat isfy all the requirements associated to this problem size.
increasing thenumberof iterations of the optimization process in this problem size nsga was able to find better solutionsin terms of constraints fulfillment as demonstrated by so lutions which have high cost.
as for smaller problem sizes such as in the scenarios of and requested rooms in al most all runs nsga was able to find fully valid solutions that satisfy all the constraints.
table comparing between the results of our approach nsga and fpls and between the results of nsga andrandom with different problem sizes with regard to the number of requested rooms two tailed wilcoxon tests with .
and adjusted p.value using the benjamani and hochberg bh correction for multiple tests.
nsga fpls nsga random pbconst.
solution cs const.
solution cs size ful.
cost util.
ful.
cost util.
.
.
.
.
.
.
.
.
values in bold face denote that nsga results outperformed the results of fpls and or random with statistical significance.
and denotes results which are statistically significant at .
and .
respectively.to confirm our claim that nsga produces good results we compare nsga s solutions to those produced by fpls and random.
table shows clearly that nsga outper forms both fpls and random with statistical evidence inalmost all cases.
indeed only in the problem size thereis no significant statistical evidence that nsga outperformsfpls with regard to constraints fulfillment.
however in this case nsga significantly outperforms fpls in reducing the cost of solutions and increasing the usage of computerserver resources.
hence nsga overall significantly outper forms fpls and the same finding apply for the randomapproach.
as a consequence we reject the null hypothesish 0and accept h .
.
related work rule based design space exploration frameworks.
model checking approaches to analyze gt systems are similar to our approach as they also perform state space exploration.
one can categorize them as compiled approaches such as which translate graphs and gt rulesinto off the shelf model checkers to carry out verification and interpreted approaches like which store system states as graphs and directly apply transformation rules to explore the state space similarly to our approach.
in the state space explored by the groove framework is stored as a structured graph model that can be queried using logical expressions.
this approach allows theevaluation of trajectories using cost functions defined afterthe exploration and even the combined assessment of multiple solutions.
common in these approaches that they place emphasis on exhaustive traversal e.g.
by optimizing the storage of individual states while we aim at finding solutions quicklyusing genetic algorithms.
in the t core framework is used for implementing typical meta heuristic exploration strategies such as hillclimbing and simulated annealing using the transformationprimitives of the framework while the operations are speci fied as graph transformation rules.
as a distinguishing fea ture our approach supports trajectory based objective def inition and mutation operations.
compared to previous work of the authors we extend our model driven design space exploration framework by providing support for multi objective optimization al gorithms that complement our guided local search basedapproaches .
the application of multi objective approaches in a model driven dse context provides a unique combination of expressivenessandthusallows itsapplicationto novel problem domains.
other design space exploration.
thedesert tool suite provides model synthesis and constraint based dse fordsmls with structural semantics using ordered binary de cision diagrams for encoding and pruning the design space.saxena and karsai present a generic dse framework extending upon desert by supporting arbitrary analysis tools and includes model transformations for mapping de sign problems to intermediate and low level formats.
theoctopus toolset uses an intermediate representation for design problem specification and performs dseusing integrated analysis tools.
it has been successfully applied to design software intensive embedded systems .
297thegaspard framework is specifically focused on the design of massively parallel embedded systems and uses multilevel modeling where high level uml models are auto matically refined to allow design space exploration to eval uate performance characteristics through simulations.
an efficient design space exploration approach was also presented built on the formula framework in .
the design problem is described using domain specific languagesand exploration is done with symbolic execution and auto matic theorem proving by an smt solver.
these are all compiled approaches where thedesign problems are specified as models and model transformations areapplied to derive inputs for third party analysis tools e.g.
smt or sat solvers .
these analysis tools then perform the exploration and propagate the results back to the orig inal model.
however as the analysis tools are usually usedas black boxes when exploring the design space they cannotbeeasily extendedtosupportconceptuallynovelexplorationalgorithms e.g.
nsga ii .
presentsaframework fortheautomaticdeploymentof software components to hardware architecture that uses de sign space exploration to find deployment alternatives thatoffernear optimalreliability characteristics.
thedesignprob lemconsistsofarchitecturemodelsannotatedwithreliability relevant properties while the exploration uses an evolutionary algorithm to find possible alternatives.
unlike our approach in this work and also a follow up paper globalconstraints are set as hard selection criteria to prevent theexploration optimization of invalid solutions.
sch atzet al.
developed an interactive incremental process using declarative transformation rules for driving the exploration.
the rules are modified interactively userguided toimprovetheperformance of theexploration whileour approach uses genetic algorithms to guide the mutationand crossover operations to find solution models.
multi objective optimization in model driven engineering.multi objectiveoptimization techniquesarewidelyused in model driven engineering mde field .
recently kessentini et al.
proposed an mde based framework foreasingtheadoptionofsearch basedtechniques such as genetic algorithms to mde problems.
in this work the authors describe the logic layer of their mde basedframework based on previous experiences in using sbse inhand crafted applications.
however the realization of the framework is only planned as future work.
moreover it is not clear how the proposed framework can be adopted forrule based dse.
etimaadi and chaudron proposed theaqosa tool which uses a model based approach to eval uate component based software architecture quality.
simi larly to our work aqosa uses multi objective evolutionary algorithms to automatically optimize software architecture design with regard to multiple quality objectives such asresponse time processor utilization safety etc.
despitethepopularityofapplyingsearch basedtechniques for mde problems to the best of the authors knowledge there is not existing work in the literature dealing with rulebased dse using multi objective optimization techniques.
indeed existing work on automatic design space explo ration adse usingmulti objectiveoptimizationtechniquesare not rule based dse and they are proposed for specificdomain problems.
for example calborean et al.
proposed recently the fadse framework for adse for dseof computer systems using different multi objective searchbased algorithms.
inthis paper theauthorscompare theresults producedby different genetic algorithms for optimizingthe parameters of the grid alu processor gap microar chitecture and the post link code optimizer gaptimize.
intheir framework application specific rules that describe ex isting knowledge can be defined and used as constraints to constrain the dse process .
a similar work is performed by bolchini et al.
.
bolchini et al.propose a framework based on the multi objective genetic algorithm nsga ii fordse of reliable field programmable gate array devices.
thecontributionofourapproachoverexistingmulti objective optimization for dse is that our approach is generic so that it can be extended and applied to other domains.
moreover our approach uses exploration rules to guide thedse process while constraints are used to describe the re quirements thatmust be fulfilled.
furthermore unlikeexist ing approaches which also used the nsga ii e.g.
our approaches adapt the constraint dominate strategy of nsga ii so that constraints fulfillment is described as a top level soft optimization objective rather than a re ward penalty parameter or as a hard selection criterion.hence our approach can even be applied to optimize an ex isting invalid solution with regard to the top level objective which is minimizing constraint violation.
.
conclusions in the paper we proposed to integrate constrained multiobjective optimization as a search strategy for rule baseddesign space exploration frameworks.
in contrast to exist ing genetic approaches for design space exploration in ourapproach a genetic population consists of rule executionsequences from an initial model to design candidate con straints are captured by model queries objectives are calculated from models or rule sequences while crossover and mutation operations are manipulating rule sequences.
a first key challenge in this setup is that traditional encoding of populations as fixed width bit vectors is unableto represent rule sequences of increasing depth while it isvery difficult or impossible to give a priori upper bounds for feasibility checks.
moreover unlike in most application scenarios of genetic algorithms crossover and mutation op erations may derive non executable application sequences asindividuals which must not be added to a population.
as aconsequence we had to integrate multi objective optimiza tiontechniquestoamodel drivenrule baseddseframework as a mapping from a rule based dse to a genetic algorithm proved to be infeasible.
ourinitialexperimentsdemonstratedthatmulti objective optimization is an effective strategy for solving rule baseddesign exploration problems.
however using a randomly synthesizedinitialpopulationappearstobesuboptimalchoice in our context.
our future work will aim at investigatingother strategies for this purpose.
.