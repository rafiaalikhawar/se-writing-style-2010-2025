on demand test suite reduction dan hao lu zhang xingxia wu hong mei gregg rothermel key laboratory of high con fidence software technologies ministry of education beijing china institute of software school of electronics engineering and computer science peking university beijing china haod zhanglu wuxx10 meih sei.pku.edu.cn department of computer science and engineering university of nebraska lincoln usa grother cse.unl.edu abstract most test suite reduction techniques aim to select from a given test suite a minimal representative subset of test cases that retains the same code coverage as the suite.
empirical studies have shown however that test suites reduced in this manner may lose fault detection capability.
techniques have been proposed to retain certain redundant test cases in the reduced test suite so as to reduce the loss in fault detection capability but these still do concede some degree of loss.
thus these techniques may be applicable only in cases where loose demands are placed on the upper limit of loss in fault detection capability.
in this work we present an on demand test suite reduction approach which attempts to select a representative subset satisfying the same test requirements as an initial test suite conceding at most l loss in fault detection capability for at least c of the instances in which it is applied.
our technique collects statistics about loss in fault detection capability at the level of individual statements and models the problem of test suite reduction as an integer linear programming problem.
we have evaluated our approach in the contexts of three scenarios in which it might be used.
our results show that most test suites reduced by our approach satisfy given fault detection capability demands and that the approach compares favorably with an existing test suite reduction approach.
keywords software testing test suite reduction on demand i. i ntroduction during regression testing test engineers are often faced with test suites containing large numbers of test cases .
in some cases executing all of these test cases can be excessively time consuming.
test suite reduction techniques attempt to extract from a given test suite a representative subset of test cases satisfying the same testing requirements as the given suite to reduce the time required for testing.
most existing test suite reduction techniques e.g.
aim to select a minimal representative subset of a test suite.
in such techniques a code coverage criterion e.g.
statement coverage or branch coverage serves as the test requirements and the selected minimal representative subset retains the same code coverage as the original test suite.
however even when reduced test suites retain coverage research has shown that the suites may lose fault detection ability in some cases dramatically .
to limit losses in fault detection capability some recent test suite reduction techniques intentionally re tain redundant test cases in the reduced subset.
however these techniques still concede some degree of loss in faultdetection capability.
therefore these techniques may be applicable only in cases where relatively loose demands on fault detection ability exist.
even worse our own empirical data reported in section ii shows that even when a test suite reduction technique concedes only a small average loss in fault detection capability the probability that the technique can concede a much larger loss in fault detection given a particular test suite is still non negligible.
thus a test suite reduction technique with a small average loss in faultdetection capability may still not be applicable in situations where strict demands are placed on the upper limits of loss in fault detection capability.
to allow engineers to set speci fic upper limits on loss in fault detection capability in test suite reduction we propose anon demand test suite reduction approach.
given a confidence level c and an upper limit l on acceptable loss in fault detection capability our approach aims to select a representative subset that satis fies the same test requirements as a given test suite and concedes at most l loss in fault detection capability in at least c of the instances in which it is applied.
our approach works as follows.
first we collect statistics on loss in fault detection capability at the level of individual statements for various levels of confidence and use these to construct a fault detectionloss table.
second based on these statistics we model the problem of on demand test suite reduction as an integer linear programming ilp problem.
we de fine two ilp models for on demand test suite reduction using either local constraints or global constraints.
third by solving the ilp problem we produce a representative subset for on demand test suite reduction.
we have evaluated our technique in three scenarios in which it could be employed in practice applying it to eight c programs and one java program.
in the first scenario we used part of each c program to build a fault detection loss table and used that table to apply test suite reduction to the other parts of the programs.
in the second scenario we used one version of the java program to construct a faultdetection loss table and used that table to apply test suite reduction to its subsequent versions.
in the third scenario .
c ieee icse zurich switzerland we used some of the c programs to construct a faultdetection loss table and then used that to apply test suite reduction to the other c programs.
our results show that the proposed technique using either local constraints or global constraints is usually effective for satisfying a given demand i.e.
an upper limit of loss in fault detection capability and a con fidence level during test suite reduction in each of the three scenarios.
moreover the sizes of reduced test suites obtained using local constraints are usually larger than or equal to those obtained using global constraints and the percentage of test suites found to satisfy given demands in the former case is larger than or equal to the percentage found to satisfy demands in the latter.
finally we compare our results to those produced by harrold et al.
s technique abbreviated as the hgs algorithm which cannot be used to reduce the size of a test suite while also guaranteeing that any loss in fault detection capability satis fies engineers demand.
our results show that to obtain a loss in fault detection capability similar to that of the hgs algorithm the on demand technique selected at most more test cases than the hgs algorithm.
the main contributions of this paper are as follows empirical evidence that the distribution of losses in fault detection capabilities of existing test suite reduction techniques is very much skewed across the basis pairs of original test suites and faulty versions to the best of our knowledge the first approach to on demand test suite reduction and empirical studies evaluating the effectiveness of our approach to on demand test suite reduction.
ii.
m otivation prior empirical studies of test suite reduction have reported only average losses in the fault detection capabilities of test suites.
to further motivate our research we conducted an exploratory study investigating the distribution of losses in fault detection capabilities exhibited by existing test suite reduction techniques.
study setup we used a set of small programs that have been extensively utilized in test suite reduction studies namely the siemens programs.
based on the pool of test cases for each program we constructed a set of test suites in a manner similar to that used by jeffrey and gupta in their study of their test suite reduction technique.
when constructing each test suite we first randomly selected from the test case pool x loc test cases where xis a random variable in the range and loc represents the number of lines of executable code in the program .
then we continued selecting test cases and adding them to the test suite as long as they increased statement coverage until the test suite was statement coverage adequate.
in this way we constructed test suites for each program.
for each test suite for each program we then applied two representative test suite reduction techniques i.e.
harrold et al.
s and jeffrey and gupta s .table i loss in fault detection capability for twotestsuite reduction techniques program harrold et al.
s technique jeffrey and gupta s technique min.
max.
avg.
sd.
min.
max.
avg.
sd.
print tokens .
.
.
.
.
.
.
.
print tokens2 .
.
.
.
.
.
.
.
replace .
.
.
.
.
.
.
.
schedule .
.
.
.
.
.
.
.
schedule2 .
.
.
.
.
.
.
.
tcas .
.
.
.
.
.
.
.
tot info .
.
.
.
.
.
.
.
figure .
fault detection loss distribution for replace horizontal axes depict percentages of test suites and vertical axes depict the upper limit on loss in fault detection capability for that percentage of test suites.
observations table i depicts statistics on losses1in faultdetection capability for the two representative techniques where avg.
denotes the average loss and sd.
denotes the standard deviations of loss.
for harrold et al s technique the average losses in fault detection capability range from .
to .
.
moreover the ranges of loss in fault detection capability are all quite large.
for example for schedule andschedule some reduced test suites concede no loss in fault detection capability while others concede loss in fault detection capability.
the standard deviations of loss in fault detection capability i.e.
from .
to .
also corroborate this observation.
the results of jeffrey and gupta s technique provide a similar view on the distribution of losses in fault detection capability.
figure presents the ranges of losses in fault detection capability across different test suites of harrold et al.
s technique abbreviated as hgs in the figure as well as jeffrey and gupta s technique abbreviated as jg in the figure for replace .
results for the other objects are similar and are omitted for space considerations.
speci fically the curves in this figure show the upper limits on losses in faultdetection capability across percentages of test suites.
in each subfigure the dotted line shows the average loss in faultdetection capability across all the program s test suites.
from thisfigure we observe that there are a substantial number of reduced test suites whose loss in fault detection capability 1the loss in fault detection capability is de fined as the ratio between the number of faults that become unexposed following test suite reduction and the total number of faults detected by the original test suite.
furthermore the loss in fault detection capability can be calculated in a way similar to formula section iv .
speci fically if reduced test suites concede no loss in fault detection capability the loss is if reduced test suites concede loss in fault detection capability the loss is .
2739is signi ficantly larger than the average loss in fault detection capability.
although the average loss in fault detection capability of the hgs algorithm is .
for replace more than of the reduced test suites have losses in faultdetection capability larger than .
.
the average loss in faultdetection capability of the jg algorithm is .
but more than of the reduced test suites have losses in faultdetection capability larger than .
.
these observations show that it may be dif ficult for the actual loss in fault detection capability on a given program and test suite to be similar to the average loss in faultdetection capability.
that is to say given a speci fic faulty program and a speci fic test suite the probability for the loss in fault detection capability to be much higher than the average is not negligible when applying an existing technique for test suite reduction.
therefore a developer may typically find existing techniques for test suite reduction inapplicable if he or she wishes to set an upper limit on loss in fault detection capability.
iii.
p roblem definition we formally de fine the problem of on demand test suite reduction as follows.
let tbe a test suite let l be an upper limit on loss in fault detection capability and let c be a con fidence level.
let fl c s denote the fact that sis a subset of tand that s s loss in fault detection capability is at most l in at least c of circumstances.
the problem of on demand test suite reduction is to findt prime tsuch that fl c t prime and t prime prime t fl c t prime prime t prime t prime prime where t denotes the size of t .
in the preceding de finition we use fl cto ensure that the loss of fault detection capability is at most l at con fidence level c .
according to statistical theory if we set cto be a number near it is likely that we can ensure that the loss in fault detection capability of an arbitrary reduced test suite is at most l .2to ensure that we select as few test cases as possible in on demand test suite reduction our de finition requires the reduced test suite to be the smallest among all the subsets of test cases satisfying the demand on loss in fault detection capability.
iv .
o urapproach similar to previous techniques for test suite reduction our approach to on demand test suite reduction uses coverage information.
given a program under test coverage information can be based on any structural units present in the program e.g.
statements .
in this section we present our approach in terms of statement coverage for simplicity as the implementation and evaluation of our approach is also based on statement coverage.
however it is straightforward to extend the basic idea of our approach to other types of structural coverage.
2in statistical theory the con fidence level is typically set to or .when reducing a test suite tinto one of its subsets t prime if a statement scontains a fault that tcan detect but t prime cannot the number of times t primecovers smust be smaller than the number of times tcovers s. that is to say when there is a difference between the original test suite tand the reduced test suite t primein the number of times statement sis covered there is a possibility that t primemay fail to detect some fault in s. thus our approach to on demand test suite reduction involves two steps.
first we collect statistics on losses in fault detection capability at the level of individual statements.
second we de fine two integer linear programming ilp models using the collected statistics to reduce test suites.
a. collection of statistics at the statement level given two integers i1andi2 i1 i2 our goal in the first step is to collect the distribution of losses in fault detection capability for a statement when coverage of those statements changes from i1toi2.
to achieve this goal we employ the following empirical methodology for sampling.
to provide a suf ficient sampling space we use mutation faults3when collecting statistics.
note that previous research e.g.
andrews et al.
has demonstrated the reasonableness of using mutation faults in experimentation with testing techniques.
for any statement that contains mutation faults and has been executed by i1test cases in an original test suite tbut executed by i2test cases in a subset t primeof t we use covdiff i1 i2 to represent the loss in faultdetection capabilities for that statement when the level of coverage changes from i1toi2.
furthermore we replace t byti1since test suite tcontains i1test cases that execute some statement and replace t primebyt prime i2since test suite t prime contains i2test cases that execute the same statement.
the value of covdiff i1 i2 is de fined by formula where fault s ti1 represents the number of mutation faults detected by ti1and fault s t prime i2 represents the number of mutation faults detected by t prime i2.
covdiff i1 i2 fault s ti1 fault s t prime i2 fault s ti1 based on the preceding de finition if we sample a suf ficiently large number of statements and a suf ficiently large number of pairs of ti1andt prime i2 we are able to record a series of values of covdiff i1 i2 for various pairs of i1 andi2 i1 i2 .
given a pair of i1andi2 i1 i2 all the values of covdiff i1 i2 represent the distribution in loss of fault detection capability for one statement when the level of coverage changes from i1toi2.
according to statistical theory we are primarily interested in the 90th 95th and 99th percentiles.
that is to say given the distribution of all 3we currently collect statistics based on mutation faults since it is possible to generate a large number of mutation faults for any program.
however when suf ficient historical faults are available our approach can also collect statistics based on those.
3740table ii partial fault detection losstable c ... ... .
.
.
.
.
.
.
.
.
.
.
.
.
... this table presents the upper limit of loss i.e.
vc i1 i2 in fault detection capability in at least c circumstances when coverage of statements changes from i1 depicted by the first column to i2 depicted by the last row .
covdiff i1 i2 values for i1 i2 we record the following three values of loss in fault detection capability the value that of the covdiff i1 i2 values are no larger than denoted by v90 i1 i2 the value that of the covdiff i1 i2 values are no larger than denoted by v95 i1 i2 and the value that of the covdiff i1 i2 values are no larger than denoted by v99 i1 i2 .
thus given con fidence level c c or all the values ofvc i1 i2 i1 i for different pairs i1 i2 represent the values of loss in fault detection capability in coverage of one statement at con fidence level c .
note that when i2 equals i1for a statement there is no loss of fault detection capability for that statement.
that is to say vc i i would always be for any c or and any i. following the preceding procedure we generate a faultdetection loss table for a program ignoring the difference within statements.
table ii illustrates part of a faultdetection loss table whose statistics are collected based on the siemens suite.
according to our empirical study and shown by this table for any i vc i andvc i i are always and respectively.
moreover vc i j1 is always no less than vc i j2 when j1 j2.
this observation complies with the intuition that less coverage of a statement may reduce the fault detection capability of a test suite.
b. on demand test suite reduction via ilp based on the statistics collected in the first step of our approach we use two methods for modeling on demand test suite reduction as an integer linear programming problem.
the two ilp models share the same objective function and the same decision variables but use different constraints.
objective function as the problem of on demand test suite reduction requires the smallest reduced test suite satisfying the demand both ilp problems use the objective function de fined in formula where xiis a boolean variable that represents whether test case tihas been selected for inclusion in the reduced test suite and is de fined below.
minn summationdisplay i 1xi decision variables for test suite t t1 t2 ... t n we use nboolean decision variables denoted by xi i n to represent whether test case tihas been selected for the reduced test suite t prime.
the n boolean decision variables are de fined in formula .
xi braceleftbigg1 if test case tiis selected otherwise.
for a program punder test consisting of mstatements s s1 s2 ... s m we use the boolean decision variables de fined in formula to represent changes in coverage when reducing tintot prime.
wj q braceleftbigg iffqtest cases in t primecover sj otherwise.
in formula given one j if there are pjtest cases in tcovering sj qmust be less than or equal to pjandq must be greater than or equal to .
therefore there are pj decision variables of the form wj qforsj.
that is to say the total number of decision variables of the form wj qis summationtextm j 1pj.
constraints for any j m exactly one variable of the form wj qcan be true since there is just one value for the number of test cases in t primethat cover sj.
thus we need the constraints described in formula where pjis the number of test cases in tthat cover sj.
pj summationdisplay q 1wj q furthermore for any j m the number of test cases in t primecovering sjcan be represented either by variables of the form wj qor by variables of the form xi.
therefore we need a set of constraints to ensure that the two manners of representing coverage information comply with each other.
to de fine these constraints we need the coverage information shown in formula denoting whether test case ti i n intcovers statement sj j m .
c i j braceleftbigg1 if test case ticovers statement sj otherwise.
the number of test cases in t primecovering sjcan be represented as summationtextpj q 1wj q qor summationtextn i 1xi c i j .
therefore we have the set of constraints shown in formula .
n summationdisplay i 1xi c i j pj summationdisplay q 1wj q q finally we need a set of constraints to ensure that t prime satisfies the developer s demand.
t primeshould concede at most l loss in fault detection capability at con fidence level c .
we have two ways to de fine this set of constraints.
the first way to de fine the constraints is to use local constraints.
we de fine a set of constraints to ensure that t primeconcedes at most l loss in fault detection capability at 4741confidence level c foreach statement in the program.
in particular formula de fines the local constraints on loss in fault detection capability for any j j m .
pj summationdisplay q 1wj q vc pj q l note that in formula vc pj q represents the loss in fault detection capability for one statement at con fidence level c when the coverage changes from pjtoq.
the second way to de fine the constraints is to use one global constraint.
we de fine one constraint to ensure that t primeconcedes at most l loss in fault detection capability at con fidence level c forthe program under test .
in particular formula de fines the global constraint on loss in fault detection capability.
m summationdisplay j 1pj summationdisplay q 1wj q vc pj q m l thus we have two ilp models for on demand test suite reduction.
one ilp model uses the constraints in formulae and while the other ilp model uses the constraints in formulae and .
note that the global constraint is looser than the local constraints.
thus the ilp model using the global constraint may allow us to select fewer test cases in the reduced test suite t primethan when using the local constraints.
c. practical simpli fication in the preceding ilp models the number of decision variables could be t t s in the worst case because one statement may be covered by all the test cases in t. since the number of decision variables is quadratic in the size of input the computational cost of solving the two ilp models could be too large to be practical.
intuitively when a test suite contains a large number of test cases covering a statement the probability for that test suite to detect all possible faults in that statement should be very near .
that is the value of vc i1 i2 should be very near to for any c or and any i1 i2 when the value of i2become quite large.
actually our experience in collecting values of vc i1 i2 also supports this intuition.
based on this intuition we are able to simplify our ilp models by setting up a threshold cov maxand considering vc i1 i2 to be for any i1 i cov max.
therefore for any j if there are pjtest cases in tcovering statement sj we can have j instead of pj decision variables of the form wj q q j for simpli fication where we use j to denote min cov max pj .
among these j decision variables the meaning of wj j is different from the de finition in formula and the meaning of other decision variables remains the same.
in our simpli fication the value of wj j is if and only if at least j test cases in t primecover sj.
note that when j is equal to pj the meaning of wj j is still the same as that de fined in formula because at most pjtest cases in t primecan cover sj.
we further simplify constraints in formulae and as follows.
first we replace pjwith j in formula .
second we change the equalities in formula into the inequalities in formula .
the change from formula to formula is necessary because when more than cov max test cases in t primecover statement sj it would be infeasible for summationtextn i 1xi c i j to be equal to summationtext j q 1wj q q. note that as the objective function requires the number of test cases int primeto be as small as possible summationtextn i 1xi c i j would always be equal to summationtext j q 1wj q qwhen feasible.
n summationdisplay i 1xi c i j j summationdisplay q 1wj q q third we change formulae and to formulae and respectively.
note that as we deem the value of vc pj q j q pj as the upper bound of the summarization can be simpli fied to j .
j summationdisplay q 1wj q vc pj q l m summationdisplay j 1 j summationdisplay q 1wj q vc pj q m l after simpli fication the number of decision variables in the two ilp models is at most t cov max s .
that is the number of decision variables in our simpli fied ilp models becomes linear in the size of input.
thus we are able to select a proper value of cov maxto make the computational cost of solving the two ilp models acceptable.
v. e mpirical studies we have conducted three empirical studies to investigate the performance4of our on demand test suite reduction approach in three scenarios.
in scenario engineers may gather statistics on loss in fault detection capability from part of a program and use the collected statistics to perform on demand test suite reduction on other portions of the program.
in this case we are interested in the following research question rq1 is the on demand test suite reduction approach effective at satisfying engineers demands when being applied within a single program?
in scenario engineers may gather statistics on loss in fault detection capability on a version of a program and use those statistics to perform on demand test suite reduction on subsequent versions of the program i.e.
in the context 4due to space limitations we evaluate only the effectiveness of the proposed approach in this paper we will evaluate the cost of the approach in our future work.
5742table iii objects of study program abbreviation description loc test pool print tokens pt lexical analyzer print tokens2 pt2 lexical analyzer replace rep pattern replacer schedule sch priority scheduler schedule2 sch2 priority scheduler tcas tca altitude separator tot info tot info measurer space spa adl interpreter jtopas v0 jt0 parsing text data jtopas v1 jt1 parsing text data jtopas v2 jt2 parsing text data of software evolution.
in this case we are interested in the following research question rq2 is the on demand test suite reduction approach effective at satisfying engineers demands when being applied to subsequent versions of a program?
in scenario engineers may gather statistics on loss in fault detection capability on a set of similar programs and use those statistics to perform on demand test suite reduction on other similar programs.
in this case we are interested in the following research question rq3 is the on demand test suite reduction approach effective at satisfying engineers demand when being applied to sets of similar programs?
a. object programs table iii describes the objects used in our studies all of which are available in the software artifact infrastructure repository sir .
in addition to the seven programs of the siemens suite and space which are written in c the other objects are three versions of jtopas which are written in java.
the second column provides abbreviations used in the following sections the third describes program functionality and the fourth lists the total number of lines of executable code in the programs.
each of the object programs comes with existing test cases and the rightmost column of table iii lists the numbers of those test cases.
the first study used all eight c programs listed in table iii the second study used jtopas and its sequential versions and the third study used the seven programs of the siemens suite.
b. study process in each of our three studies we first prepared test suites and faulty programs with which to collect statistics on loss in fault detection capability.
as all of the objects have a test pool for each object by randomly selecting test cases that increase statement coverage we constructed test suites consisting of of each size from test cases to test cases.
if the statement coverage of a test suite under construction reaches the same level of statement coverage as the entire test pool prior to reaching its desired size we selected additional test cases randomly until the desired size was reached.to collect statistics on loss in fault detection capability due to reduced coverage of faulty statements we first used proteum and mujava5 to generate all mutants for each object program and then constructed mutant groups by grouping all the mutants whose mutation operation occurred in the same statement.
in statistics collection each mutant group is viewed as a multiple fault program so that the loss in fault detection capability in each application of test suite reduction comes from the reduced coverage of the same faulty statement.6moreover groups that contain fewer than three mutants were removed to reduce the possibility of biased data.
for each constructed test suite t we generated a reduced test suite t primeby randomly removing i i t test cases from t recording the number of faults detected by t denoted by fault s t the number of faults detected by the reduced test suite t prime denoted by fault s t prime the number of test cases in texecuting the mutated statement denoted by i1 and the number of test cases int primeexecuting the mutated statement denoted by i2 .
then we calculated the loss in fault detection capability from i1 toi2using formula and thus constructed fault detectionloss tables at con fidence levels c where cwas set to and as described in section iv a. the foregoing process provided fault detection capability statistics next we needed to prepare test suites and faulty programs with which to evaluate on demand test suite reduction using those statistics.
for each object program in the siemens suite we used the test suites constructed for use in the preliminary study described in section ii.
for space we constructed test suites in the manner described in section ii.
since our java programs have a small number of test cases in their test pool we constructed only test suites for these programs in the same manner followed for space .
because each object program is provided with only a small number of faulty versions for our purposes we constructed multiple fault c and java programs using mutants generated by the mutation analysis tools proteum and mujava.
to reduce the potential for biased data we followed a procedure similar to that used by hutchins et al.
and retained only mutants that were neither too easy nor too hard to detect by removing mutants detected by more than of the test cases in the test pool and removing mutants detected by fewer than of the test cases in the test pool.
finally as the number of faults within a real program is likely to be related in some way to its number of lines of code for each object we constructed multiplefault programs whose number of faults denoted as nf is offutt mujava .
6those mutants whose mutation operation occurred in different statements cannot be used in statistics collection because in that case it is difficult to determine how the reduced coverage of particular statements contributes to the loss in fault detection capability in test suite reduction.
6743loc loc loc loc orloc respectively.
speci fically for each given number of faults nf we constructed five multiple fault programs each of which contains nfrandomly selected mutants.
given the foregoing we applied our on demand test suite reduction techniques using local and global constraints to each of these test suites recording t t prime fault s t and fault s t prime .
we set the engineers demands on loss in fault detection capability i.e.
the upper limit of loss in fault detection capability to and .
we used ibm s ilog cflex7to solve the two ilp models i.e.
the two practical simpli fied models in section iv c used in our test suite reduction technique.
because our first study aims to evaluate the proposed approach within programs we randomly selected of the statements in each c object to collect statistics on loss in fault detection capability ignoring the other statements.
that is the mutants whose mutation operations occurred in the remaining of the statements were removed in the process of statistics collection in the first study.
in the process of on demand test suite reduction using the collected statistics we first used only the remaining statements by focusing on only the multiple fault programs whose mutation operations occur in these remaining statements and then we used the whole program.
in our second study we used each version of jtopas to collect statistics on loss in fault detection capability and the subsequent versions to perform on demand test suite reduction using the collected statistics.
in our third study we used one program from the siemens suite to perform on demand test suite reduction and the other programs to collect statistics on loss in fault detection capability.
c. measurements to assess the results of the application of our test suite reduction algorithm as independent variables we used test suite size reduction and fault detection capability loss.
test suite size reduction is de fined as t t prime t and fault detection capability loss is de fined as faults t faults t prime faults t .
d. threats to validity the primary internal threat to validity for our study relates to possible problems in the implementations of our techniques.
to reduce this threat we used ibm s integer linear programming tool ilog cflex to implement the on demand test suite reduction technique and reviewed all of our code before conducting the experiment.
the primary external threat to validity for our study relates to the particular objects studied which may be not representative.
a second threat relates to the program and the faults used in the faulty pt pt2 rep sch sch2 tca tot c rod l spa pt pt2 rep sch sch2 tca tot spa pt pt2 rep sch sch2 tca tot spa c c c pt pt2 rep sch sch2 tca tot spa pt pt2 rep sch sch2 tca tot spa pt pt2 rep sch sch2 tca tot spa c c c rod g figure .
test suite size reduction in study i the horizontal axis presents abbreviated object names and the vertical axis depicts test suite size reduction using the formula given in section v c. programs and a third threat lies in the test suites constructed for the process of test suite reduction.
these threats can be addressed only through further studies using other larger object programs faults and test suites.
finally the measures we use to assess results do not include other sources of costs and effectiveness that may matter in practice such as the severity of faults and the cost of the algorithms applied.
vi.
r esults and analysis a. study i within programs table iv presents the percentages of reduced test suites whose actual loss in fault detection capability satis fies engineers demands i.e.
the speci fied upper limit on loss in fault detection capability for each object program when part of the object is used to calculate loss of fault detection capability for the other part of the object or the entire object is used in on demand test suite reduction.
in the table results that are smaller than the con fidence level c given by the engineers are presented in bold font.
most results are larger than or equal to the con fidence level that is most test suites generated by the approach using either local constraints or global constraints satisfy engineers demands including the limit on loss in faultdetection capability and the con fidence level except for a few cases involving print tokens schedule tcas and tot info.
moreover for any given object upper limit of loss in fault detection capability l and con fidence level c the percentage of reduced test suites satisfying engineers demands achieved by our approach using local constraints is usually larger than or equal to that achieved by our approach using global constraints.
figure presents the distributions of test suite size reduction for our approach where actual loss in fault detection capability satis fies engineers demands.
to distinguish the two different ilp models i.e.
the ilp model using local constraints and the ilp model using global constraints we abbreviate the former as rod land the latter as rod g. as the figure shows as we increase the con fidence level test suite size reduction decreases and thus the size of reduced test suites increases.
that is our approach increases 7744table iv pct.ofresults satisfying engineers demand study i partial object is used in on demand test suite reduction using local constraints c l pt pt2 rep sch sch2 tca tot spa .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
entire object is used in on demand test suite reduction using local constraints .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
partial object is used in on demand test suite reduction using global constraints .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
entire object is used in on demand test suite reduction using global constraints .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
engineers con fidence in loss of fault detection capability by selecting more test cases.
note that the test suite size reduction for tcas is much smaller than that for the other object programs.
we suspect the reason for this to be that fortcas the number of faulty programs is small and thus the test suites constructed initially for it are small.table v pct.ofresults satisfying engineers demand study ii rod l rod g c l jt0 jt1 jt1 jt2 jt0 jt2 jt0 jt1 jt1 jt2 jt0 jt2 .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
c c c c c c rod l jt0 jt1 jt1 jt2 jt0 jt2 jt0 jt1 jt1 jt2 jt0 jt2 jt0 jt1 jt1 jt2 jt0 jt2 rod g jt0 jt1 jt1 jt2 jt0 jt2 jt0 jt1 jt1 jt2 jt0 jt2 jt0 jt1 jt1 jt2 jt0 jt2 figure .
test suite size reduction in study ii b. study ii between versions table v presents the percentages of reduced test suites whose actual loss in fault detection capability satis fies engineers demand when some version of jtopas is used to collect statistics and on demand test suite reduction is applied to later versions.
speci fically jti jtjshows that jtopas viis used to collect statistics and jtopas vjis used in on demand test suite reduction.
most results for rod lare larger than the con fidence level but many results for rod gare smaller than the confidence level.
we suspect the reason for this to be that the total number of mutants generated by mujava is relatively small and the reduced test suites are skewed since rod guses the looser global constraint.
further rod lis better than rod gat controlling the loss in fault detection capability.
this observation is consistent with that seen in table iv but the difference between rod landrod g in controlling the loss in fault detection capability in this study is larger than that seen in study i. for the on demand test suite reduction approach either rod lorrod g with any speci fied con fidence level the results of jt1 jt2are slightly larger than those of jt0 jt2.
that is on demand test suite reduction is more effective for a program when its most recent previous version is used in statistics collection.
figure presents the distributions of test suite size reduction for our approach where actual loss in fault detection 8745table vi pct.ofresults satisfying engineers demand study iii rod l c l pt pt2 rep sch sch2 tca tot .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
rod g .
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
.
capability satis fies engineers demands in a manner similar to that of figure .
as the con fidence level increases test suite size reduction decreases and thus the size of reduced test suites increases.
moreover test suite size reduction under rod lis usually smaller than or equal to that under rod g. that is the size of the reduced test suites produced byrod lis usually larger than or equal to the size of the reduced test suites produced by rod g. c. study iii across programs table vi presents the percentages of reduced test suites whose actual loss in fault detection capability satis fies engineers demand for the object program listed in the first row when the other object programs are used to collect statistics and these are used in on demand test suite reduction.
on all programs but tcas andtot info results are larger than the con fidence level used.
because tcas andtot info are the smallest programs we suspect that the technique is less effective when the objects used in statistics collection and test suite reduction differ more widely in scale.
moreover the percentage of reduced test suites satisfying engineers demands generated by rod lis usually greater than or equal to that of those generated by rod g. figure presents the distributions of test suite size reduction for our approach where actual loss in fault detection capability satis fies engineers demands.
as the figure shows test suite size reduction decreases as con fidence level in0 pt pt2 rep sch sch2 tca tot pt pt2 rep sch sch2 tca tot rep sch sch2 tca tot pt pt2 c c c pt pt2 rep sch sch2 tca tot pt pt2 rep sch sch2 tca tot rep sch sch2 tca tot pt pt2 c c c rod l rod g figure .
test suite size reduction in study iii creases and reduced test suites generated by rod gare usually smaller than or the same size as those generated by rod l. d. summary generally speaking the observations derived from our three studies can be summarized as follows.
on demand test suite reduction is effective at producing reduced test suites whose actual loss in fault detection capability is no larger than the speci fied upper limit for losses in fault detection capability when applied to one object various versions of an object or various objects.
the higher the con fidence level used in a faultdetection loss table the larger the reduced test suites produced by our approach using the table.
on demand test suite reduction using global constraints is more effective in reducing the scale of test suites than the approach using local constraints but less effective at guaranteeing losses in fault detection capability.
vii.
d iscussion our approach assumes that vc pj q1 vc pj q2 when q1 q2and simpli fies the ilp models by setting vc pj q to when pj q j .
as it is impossible to collect statistics on loss for vc i1 i2 for every possible pair of i1 andi2 such a simpli fication renders the proposed approach more practical.
moreover as less coverage of a statement may reduce fault detection capability the assumption is reasonable.
in our studies we did not formally compare our approach to existing test suite reduction approaches because these approaches do not attempt to control losses in fault detection capability.
however it is interesting to re flect on differences between the approaches and thus we implemented the hgs algorithm and applied it to the siemens suite using the faulty programs and test suites utilized in the third scenario of our studies.
because our on demand approach is meant to select a representative subset whose upper limit loss in faultdetection capability is l in at least c of its applications we derive one upper limit lthat is slightly smaller than or equal to the upper limit of loss in fault detection capability for at least c i.e.
or of the reduced test 9746rod l pt pt2 rep sch sch2 tca tot pt pt2 rep sch sch2 tca tot rep sch sch2 tca tot pt pt2 c c c pt pt2 rep sch sch2 tca tot pt pt2 rep sch sch2 tca tot rep sch sch2 tca tot pt pt2 c c c rod g figure .
test suite size reduction comparison on demand approach versus hgs algorithm the horizontal axis depicts the abbreviated object name and the vertical axis depicts the differences in test size reduction.
suites created by the hgs algorithm and subtract the test suite size reduction achieved by the hgs algorithm from that achieved by the on demand approach at the same con fidence level and closest upper limit l. figure uses the foregoing data to show the percentages of redundant test cases the on demand approach selects to achieve losses in fault detection similar to those exhibited by the hgs algorithm.
the results in this figure may enlarge the percentage of redundant test cases since the upper limit used by the on demand approach is no larger than that created by the hgs algorithm.
as the boxplots show to achieve similar losses in fault detection capability our ondemand approach based on local constraints i.e.
rod l selects at most more test cases than the hgs algorithm and the on demand approach based on global constraints i.e.
rod g selects at most more test cases than the hgs algorithm.
to summarize the on demand test suite reduction approach achieves the ability to control losses in fault detection capability by selecting at most more test cases than the hgs algorithm which cannot control losses in fault detection capability.
viii.
r elated work research on test suite reduction and minimization can be classi fied into two categories research on algorithms to reduce the size of a test suite and research on coverage criteria to improve the fault detection effectiveness of the reduced test suite.
as it is a np complete problem to find the smallest subset of a given set of test cases that maintains a set of testing requirements research on test suite reduction has focused on heuristics that approximate solutions.
harrold et al.
propose an heuristic hgs that selects representative test cases that are responsible for test requirements by eliminating redundant and obsolete test cases in the test suite.
chen and lau propose another heuristic gre that combines a greedy algorithm with what they refer to as an essential strategy and a to redundancy strategy .
mansour and ei fakin adapt a hybrid genetic algorithm to evolve optimal solutions by reproduction and selection.black et al.
propose two integer linear programming ilp models to solve single and multi objective test suite reduction problems respectively.
as the ilp approach may require exponential time chen et al.
propose a degraded ilp approach based on the ilp method and traditional heuristic methods.
yoo and harman formalize the problem of test suite minimization as a multi objective optimization problem and apply a hybrid algorithm combining the greedy approach and a multi objective evolutionary algorithm.
note that fischer et al.
also apply the linear programming to regression test selection.
where research on coverage criteria is concerned jones and harrold consider the modi fied condition decision coverage.
other test suite reduction techniques use multiple coverage criteria e.g.
branch coverage and definition use pair coverage to increase fault detection effectiveness.
hsu and orso propose a framework to support test suite minimization based on any number of criteria using an ilp solver.
von ronne proposes a multi hit minimization technique whose test requirements e.g.
statements are satis fied by more than one test case.
covering test requirements more than once may improve fault detection effectiveness but this technique does not include mechanisms for determining how many times test requirements should be covered enough to guarantee certain levels fault detection effectiveness.
all of the foregoing test suite reduction techniques produce a representative subset of test cases by conceding some degree of loss in fault detection capability.
however these techniques cannot respond to engineers demands for placing limits on loss in fault detection capability.
ix.
c onclusion we have presented a new on demand approach to test suite reduction.
given a con fidence level c and an upper limit of loss in fault detection capability l our technique selects a representative subset of a test suite that satis fies the same test requirements as an initial test suite and concedes at most an l loss in fault detection capability for at least c of the instances in which it is applied.
our empirical studies show that the on demand test suite reduction approach can be effective when it is applied to programs program versions and sets of similar programs.