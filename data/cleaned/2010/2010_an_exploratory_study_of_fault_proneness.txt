an exploratory study of fault proneness in evolving aspect oriented programs fabiano ferrari1 rachel burrows2 ot vio lemos4 alessandro garcia2 eduardo figueiredo3 nelio cacho5 frederico lopes6 nathalia temudo7 liana silva7 sergio soares8 awais rashid3 paulo masiero1 thais batista6 jos maldonado1 computer systems department university of s o paul o usp s o carlos brazil informatics department pontifical catholic univers ity of rio de janeiro puc rio rio de janeiro br azil computing department lancaster university lancast er united kingdom department of science and technology federal unive rsity of s o paulo unifesp s.j.
campos brazil school of science and technology federal universit y of rio grande do norte ufrn natal brazil computer science department federal university of rio grande do norte ufrn natal brazil department of computing and systems university of pernambuco upe recife brazil informatics centre federal university of pernambuc o ufpe recife brazil ferrari masiero jcmaldon icmc.usp.br rachel.bur rows e.figueiredo marash comp.lancs.ac.uk otavio.
lemos unifesp.br afgarcia inf.puc rio.br neliocacho ect.ufrn.br n mt lsos dsc.upe.br scbs cin.ufpe.br fred.lopes thais ufrnet.br abstract this paper presents the results of an exploratory s tudy on the fault proneness of aspect oriented programs.
we ana lysed the faults collected from three evolving aspect oriente d systems all from different application domains.
the analysis de velops from two different angles.
firstly we measured the impa ct of the obliviousness property on the fault proneness of th e evaluated systems.
the results show that of reported faul ts were due to the lack of awareness among base code and aspects.
the second analysis regarded the fault proneness of the main a spect oriented programming aop mechanisms namely pointcuts adv ices and intertype declarations.
the results indicate that t hese mechanisms present similar fault proneness when we consider bo th the overall system and concern specific implementations.
our fi ndings are reinforced by means of statistical tests.
in genera l this result contradicts the common intuition stating that the u se of pointcut languages is the main source of faults in aop.
categories and subject descriptors d. .
testing and debugging diagnostics code inspections d. .
programming languages language constructs and features.
general terms measurement experimentation languages verificati on.
keywords aspect oriented programming fault proneness softw are testing.
.
introduction with software development becoming increasingly inc remental programmers should be aware of contemporary impleme ntation mechanisms that are fault prone in the presence of changes.
in particular the recent adoption of aspect oriented programming aop languages and frameworks such as aspectj and spring requires a better understanding of the fault causes in aop.
aop is a programming technique that aims to improve the modularisation and robust implementation of con cerns that cut across multiple software modules.
classical example s of crosscutting concerns usually implemented as aspect s are logging exception handling concurrency and certain design patterns.
the modularisation of crosscutting concerns in aop is achieved through a complementary set of programming mechanis ms such as pointcut advice and intertype declaration itd .
in addition a basic property associated with aop is obliviousness .
this property implies that the developers of core f unctionality need not be aware of anticipate or design code to be advised by aspects .
obliviousness is also influenced by q uantification i.e.
the ability to declaratively select sets of po ints via pointcuts in the execution of a program.
the more expressive a p ointcut language is the more support for obliviousness it provides .
new aop models frameworks and language extensions are constantly emerging in some cases leveraging diffe rent degrees of obliviousness .
while some resea rchers have been optimistic about the benefits of aop oth ers have shown scepticism .
for example previous research has indicated that the use of certain aop mechanisms ca n violate module encapsulation and even introduce new typ es of faults .
in particular some researchers claim these fa ults are likely to be amplified in the presence of evolutionary change s .
however the empirical knowledge about the actual i mpact of aop on fault proneness remains very limited even fo r core programming mechanisms such as pointcuts and inter type declarations.
concerned with these issues we present a first exp loratory analysis on the fault proneness of aop properties a nd mechanisms.
our analysis develops in terms of the t hree following questions how does obliviousness inf luence the presence of faults in aspect oriented ao programs ?
what is the impact of specific aop mechanisms on fault pron eness?
and whether and how do certain characteristics of c oncern implementations correlate with the introduction of faults?
to the best of our knowledge this is the first initiative that systematically permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee pr ovided that copies are not made or distributed for profit or commercial ad vantage and that copies bear this notice and the full citation on th e first page.
to copy otherwise or republish to post on servers or to r edistribute to lists requires prior specific permission and or a fee.
icse may cape town south africa copyright acm ... .
tackles these questions based on the exploratory an alysis of realworld ao systems.
previous research has mainly focu sed on defining fault taxonomies and testing approaches ba sed on aop main concepts and current technologies .
however we can only find limited empirical evidenc e on how such faults occur in practice.
to achieve our goals we selected three ao systems from different application domains.
we analysed fault pro ne aop mechanisms by means of various testing and static a nalysis.
throughout the study faults were reported by two m eans by developers during system development and evolution then afterwards by independent testers who reported post releases faults.
the main findings of our study are obliviousness has been a controversial software pro perty since the early research in aop .
our analysis co nfirms that the lack of awareness between base and aspectual mo dules tends to lead to incorrect implementations.
despite the modern support provided by aop specific ides uncertainty about module interactions still remains in the presence o f aspects within the system.
interestingly our findings contradict the common i ntuition stating that the use of pointcut languages is the m ain source of faults in aop .
the main aop mechanisms currently available in aspectj like languages nam ely pointcuts advices and intertype declarations itds present similar fault proneness when the overall system is considered.
the numbers of internal aop mechanisms showed to be good fault indicators when considering the sets of modul es within each concern1 implementation separately.
in this case the number of faults associated with a concern was dire ctly proportional to the number of aop mechanisms used t o implement that concern.
in addition the gathered results in our study supp ort these findings with statistical significance.
the remaind er of this paper is organised as follows section summarises the re lated research.
section describes the study configuration.
it inc ludes our research hypotheses and a description of the target systems and evaluation procedures.
following section brings the collected data.
this data is analysed and discussed in sectio n .
section discusses the limitations of this work.
finally se ction presents our conclusion and future research.
.
related work the difficulty of performing fault proneness evalua tion in aop is mainly twofold i there are not yet several relea ses and documented faults for ao software projects availabl e for analyses and ii aop has introduced new propertie s such as obliviousness and quantification and a wide range of mechanisms often used to implement different categories of cro sscutting concerns.
previous research was limited to evaluate the benefits and drawbacks of aspects from different angles suc h as design stability and system robustness .
however the fault proneness of ao programs is not yet a well un derstood phenomenon.
to date there is limited empirical knowledge of th e impact of aop on software correctness.
in spite of that we p resent pieces of from hereafter we use the term concerns to refer to crosscutting concerns in general as defined by kiczales et al.
.
work that we believe are mostly related to our own.
they are basically distributed in two categories discussed i n the following fault taxonomies and fault proneness of ao programs a number of fault taxonomies and bug patterns for ao programs can be found in the recent literature .
alexander et al.
proposed the first study on aop specific fa ults.
their main contribution is a characterisation of possible sour ces of faults that are specific to ao programs.
based on these sources alexander et al.
also defined a high level fault taxonomy for ao software mainly focusing on features of aspectj like languag es.
further fault taxonomies were built on top of it .
t hey either include new fault types or refine the already exist ing ones.
however none of them have been empirically evaluat ed to date.
ferrari et al.
summarised these and other taxo nomies in a broader fault categorisation for ao software.
the s tudy presented in this paper uses such categorisation for classify ing the aoprelated faults found in the target systems.
so far we have identified a single attempt to eval uate the faultproneness of aop programs.
coelho et al.
presen t an exploratory study of the robustness of aspectj base d systems.
the study analyses the flow of exceptions in five mediu m sized oo systems from different domains and their ao counter parts whose exception handling code have been aspectised.
the r esults show that in all ao systems there was an increase in the number of uncaught exceptions i.e.
exceptions that cross the system boundaries without being handled and also in the n umber of unexpected handler actions.
differently from our wo rk coelho et al.
only focus their analysis on exception handling mechanisms while we focus on aop mechanisms in general.
fault proneness of crosscutting concerns eaddy et al.
performed an empirical study which provides evidenc e suggesting that crosscutting concerns cause defects.
the autho rs examined the concerns of three medium sized open source java projects and found that the more scattered the implementation of a concern is the more likely it is to have defects.
their findin gs recommend the use of aop techniques to modularise crosscutting co ncerns in order to reduce the number of faults potentially ca used by them.
however eaddy et al.
have not investigated the fau lt proneness of aop mechanisms as we do in this study.
in our study we also analyse crosscutting concerns although from a diff erent angle.
we aim to evaluate the impact of the specific chara cteristics of ao concern implementations on the system fault pron eness.
we also highlight that we do not contrast ao implement ations with oo counterparts in order to find out which approach results in more or less faults related to crosscutting concern s. .
study setting this section describes our study configuration.
sec tion .
presents our goals and hypotheses.
section .
prov ides an overview of the target systems.
section .
explain s the evaluation procedures we applied to each selected s ystem and the associated tooling support.
.
goal statement and research hypotheses our objective is to evaluate the fault proneness of aop properties and mechanisms when they are applied to evolving pr ograms.
we are particularly interested in observing the underl ying reasons of the introduction of faults.
first we analyse wheth er a key property of aop obliviousness facilitates the emergence of faults under software evolution conditions.
moreover we aim at analysing how specific characteristics of concerns being aspectised impact on the fault proneness of ao programs.
for example we investigate how the internal implementation details of a concern such as lines of code and use of specific aop mecha nisms are correlated with the presence of faults.
based on th ese goals we defined two research hypotheses.
for each of them the null and the alternative hypotheses are as follows hypothesis h1 h1 obliviousness does not exert impact on the fa ultproneness of evolving ao programs h1 obliviousness exerts impact on the fault pron eness of evolving ao programs hypothesis h2 h2 there is no difference among the fault pronen ess of the main aop mechanisms h2 there are differences among the fault pronene ss of the main aop mechanisms to achieve our goals we needed to apply a number o f evaluation procedures.
our analysis embraced releases of th ree ao systems from different application domains.
such sy stems include a wide range of heterogeneous concerns implemented as aspects.
the systems and evaluation procedures are following described.
.
the target systems the three medium sized applications used in this st udy are from significantly different application domains.
the fi rst one called ibatis is a java based open source framework for objectrelational data mapping.
it was originally develope d in and over releases are available at sourceforge.net2 and apache.org3 repositories.
the second application is healthwatcher hw a typical java web bas ed information system.
hw was first released in a nd allows citizens to register complaints about health issues .
the third evaluated system is a software product line for mob ile devices called mobilemedia mm .
mm was originally dev eloped in to allow users to manipulate image files in di fferent mobile devices.
it has then evolved to support the manipul ation of additional media files such as videos and mp3 file s. every ao release of a given system has an oo counte rpart.
in particular ibatis had its ao releases derived from oo builds available at sourceforge.net which were used as ba selines for implementation alignment.
hw and mm on the other h and have evolved based on a sequence of planned changes and both oo and ao versions of given release were developed con currently .
all releases have experienced exhaustive assessment procedures code revision and testing section .
by independent developers in order to achieve function alities well aligned with the original java system.
from hereafter we refer to the ao versions4 of the target systems by their simple names or abbreviations i.e.
ibatis hw and mm.
four releases of ibatis were considered in our evaluation namely ibatis5 .
.
and .
we also analysed four hw releases hw and and four mm re leases mm and .
these releases were chosen be cause they encompass a wide range of different fine grained an d coarse2 http sourceforge.net projects ibatisdb files is.java