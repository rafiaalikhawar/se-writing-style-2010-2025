static extraction of program configuration optionsariel rabkinasrabkin cs.berkeley.edurandy katzrandy cs.berkeley.eduelectrical engineering and computer science departmentuniversity of california berkeleyabstractmany programs use a key value model for configuration op tions.
we examined how this model is used in seven opensource java projects totaling over a million lines of code.
wepresent a static analysis that extracts a list of configurationoptions for a program.
our analysis finds of the op tions read by the programs in our sample making it morecomplete than existing documentation.most configuration options we saw fall into a small numberof types.
a dozen types cover of options.
we presenta second analysis that exploits this fact inferring a type formost options.
together these analyses enable more visibil ity into program configuration helping reduce the burden ofconfiguration documentation and configuration debugging.categories and subject descriptorsd.
.
distribution maintenance and enhancement documentation extensibilitygeneral termsmanagement measurementkeywordsconfiguration documentation experiences static analysis1.
introductionmodern systems software often exposes a wide range ofconfiguration options to users.
by setting configuration op tions users can control many aspects of execution.
configu ration determines such aspects of execution as where in thelocal filesystem to store data which ports a server shouldbind to and even which algorithms should be used in variousparts of a large system.program configuration is often stored as a map from op tion name to value.
some configuration mechanisms such asthe unix system environment use arbitrary strings as optionpermission to make digital or hard copies of all or part of this work forpersonal or classroom use is granted without fee provided that copies arenot made or distributed for profit or commercial advantage and that copiesbear this notice and the full citation on the first page.
to copy otherwise torepublish to post on servers or to redistribute to lists requires prior specificpermission and or a fee.icsemay waikiki honolulu hi usacopyright acm ... .
.names.
other mechanisms such as the windows registry store options hierarchically in a tree structure.
still othersystems use xml formats for configuration data where thepath to the value represents its name.
this key value styleof configuration is convenient for programmers because itmakes it easy to add new options incrementally.
there is noschema or centralized list of supported options.several kinds of errors can arise from this style of config uration.
user written configuration files can assign valuesfor options that a program never reads either because ofa typing error or because program evolution resulted in anoption being removed or renamed.
documentation is of ten updated separately from code and can fall out of stepwith an evolving program .
as we show documenta tion sometimes claims that an option has a particular effect when in fact that option is never used at all.
conversely a newly added configuration option does users little goodif it is not documented.
the open source systems softwarewe study all have significant undocumented configurability suggesting that this is a widespread problem.programmers often distrust documentation preferring toread source code to understand program behavior .while this attitude may be appropriate for programmers it works less well for users and administrators.
bad doc umentation is a significant bar to adoption of open sourcesoftware as well as a considerable headache for users .excess configurability and poor documentation have beenrecognized as a problem for several years but solutionshave been slow to emerge.this paper argues that static analysis can compensate forthe weaknesses of this key value style of configuration man agement.
static analysis can extract a schema for configu ration tying both user configuration files and program doc umentation back to the actual structure of the associatedprogram.
this can be done efficiently for substantial exist ing systems that would be expensive or difficult to rewrite.we make three contributions.
first we document theway this key value configuration pattern is used in a rangeof open source projects.
we analyzed seven open sourceprograms totaling well over a million lines of code and rep resenting the work of many dozens of developers.
we ob served that configuration options tend to be used in stan dardized ways.
there are modest number of use patternsthat together account for more than of options.
wefound pervasive documentation errors.
every program inour sample had documentation for options that do not ac tually exist as well as significant numbers of undocumentedoptions.permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
to copy otherwise to republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
icse may waikiki honolulu hi usa copyright acm ... .
these pervasive errors motivate our second contribution.we describe and evaluate a static analysis that outputs alist of configuration options potentially used by a programand the program points where each option is read.
thisanalysis finds more than of the options in the programswe inspected.
this accuracy rate is higher than in the doc umentation of mot of the associated programs making theanalysis practical for finding documentation errors.the analysis can also help catch mistakes made by users.in operational experience at yahoo!
typographic errors inoption names are a major cause of problems with hadoopand related programs1.
a hadoop user can easily set thevalue of a non existent option likedefault.fs.namewhenthey meant to refer to a similarly named real option fs.default.name instead.
there is no central list of valid op tions that can be used as a dictionary for a spell checkfor configuration