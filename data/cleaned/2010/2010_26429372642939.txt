automated variability analysis and testing of an e commerce site.
an experience report sergio segura ana b. s nchez and antonio ruiz cort s department of computer languages and systems university of seville spain sergiosegura anabsanchez aruiz us.es abstract in this paper we report on our experience on the development of la hilandera an e commerce site selling haberdashery products and craft supplies in europe.
the store has a huge input space where customers can place almost three millions of di erent orders which made testing an extremely di cult task.
to address the challenge we explored the applicability of some of the practices for variability management in software product lines.
first we used a feature model to represent the store input space which provided us with a variability view easy to understand share and discuss with all the stakeholders.
second we used techniques for the automated analysis of feature models for the detection and repair of inconsistent and missing con guration settings.
finally we used test selection and prioritization techniques for the generation of a manageable and e ective set of test cases.
our ndings summarized in a set of lessons learnt suggest that variability techniques could successfully address many of the challenges found when developing e commerce sites.
categories and subject descriptors d. .
testing tools keywords variability automated testing experience report feature modelling e commerce .
introduction variability is a pervasive feature of modern software applications that determines their ability to be con gured and customized.
software applications exposing a high degree of variability are usually referred to as variability intensive systems .
operating systems as linux development tools as eclipse or even cloud applications as the amazon elastic compute service have been reported as examples of variability intensive systems.
permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than the author s must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
ase september vasteras sweden.
copyright is held by the owner author s .
publication rights licensed to acm.
acm ... .
.
product line spl engineering focuses on the development of families of software products by systematically managing variability.
feature models are the de facto standard for variability modelling in spls.
a feature model is a visual and compact representation of all the con gurations a.k.a.
products of an spl in terms of features and relations among them .
feature models are also used to enable the interactive con guration of variability intensive systems by selecting and deselecting features .
the automated analysis of feature models deals with the computer aided extraction of information from feature models.
catalogues with up to di erent analysis operations on feature models have been reported .
among others these operations allow to know what is the number of con gurations represented by a feature model or whether a feature model contains any dead features i.e.
features that cannot be part of any con guration.
also a recent trend on the automated analysis of feature models focus on reducing the potentially huge testing space of spls.
these operations take a feature model as input and return a manageable subset of con gurations to be tested using test case selection and test case prioritization techniques .
online shopping systems a.k.a e commerce sites or online stores have also been proposed as a good example of variability intensive systems .
a standard e commerce site might be composed of tons of modules providing functionality such as shipping management product rating user wish list product search etc.
in turn each module commonly has numerous setting options leading to millions of potential con gurations of the store.
e commerce sites are usually developed on top of o the shelf e commerce solutions such as magento or prestashop .
prestashop is an open source e commerce platform written in php for the development of online shopping systems.
it o ers over modules and visual templates powering more than online stores worldwide.
in this paper we report our experience in the development of la hilandera e commerce site1.
la hilandera hereinafter the client is a small spanish company selling haberdashery products and craft materials.
their main target is the spanish market although they also sell their products in english to another nine european countries.
founded in the company currently has three employees managing a company blog several social pro les and both a physical and online store.
some of their direct competitors are i do proyect tricotplus and we are knitters .
the online store was developed using prestashop v1.
in three main steps.
first the requirements were gathered from the client.
second a visual template and a set of prestashop modules providing the required functionality were collected installed and slightly customized.
in total the functionality of the store is currently supported by prestashop modules.
finally the numerous setting options of each module were adjusted to meet the requirements.
this involved setting hundreds of parameters related to shipping payment product catalogue languages taxes cache images search engine optimization seo and many others.
also a number of con guration constraints were de ned e.g.
certain carriers only ship packages of certain weight to certain zones.
the nal con guration of prestashop determines the input space of the store this is the input parameters e.g.
payment method their possible values e.g.
bank wire credit card and paypal and the constraints among them e.g.
free shipping is restricted to spain .
.
challenges during the development of the store we found a number of challenges listed below.
.con guration view .
con guration options and constraints in prestashop are scattered through a plethora of menus and wizards.
the lack of a common view of the con guration hindered the communication among the stakeholders and the traceability between the requirements and the con guration settings.
.detection of inconsistent con guration settings .
the numerous con guration options of prestashop made easy to make mistakes resulting in inconsistent or contradictory con gurations settings.
for instance we could set carriers that can never be selected or weight ranges served by no carriers.
we found no modules supporting the automated detection and repair of inconsistent con guration values in prestashop.
.detection of missing con guration settings .
checking if a certain input combination was allowed by the current con guration of the store required either laborious tests or diving into a number of menus.
for instance we may want to check whether the current con guration allows a certain carrier to ship orders under .5kg to luxembourg.
we found no automated support for this.
.test case selection .
tests were manually performed introducing gui input actions e.g.
placing orders and searching for unexpected behaviour such as wrong or missing con guration settings wrong translations css incompatibilities pdf generation problems etc.
however the high number of input combinations made exhaustive testing impractical.
we found no automated means for the selection of a manageable set of test cases with a good coverage of the input space.
.test case prioritization .
our testing resources were limited and so we needed to run rst those test cases that could reveal bugs in the most frequent settings.
for instance our client mainly expected orders under 1kg from spain paid with credit card.
thus we needed to design test cases giving priority to those values while still keeping a reasonable coverage of the restof the input space.
again we did not nd any prestashop module supporting test case prioritization.
previous challenges were manually faced during the development of the online store.
this was a time consuming and unreliable process where the detection of faults mainly depended on our ability to select e ective test cases.
after a thorough search in the literature and the web2 we found that this was the usual process in prestashop were developers have no automated support for testing their stores.
.
experience report based on our research background we hypothesized that previous challenges could be automatically addressed using variability management techniques.
to test our hypothesis we revisited the main milestones of the development exploring the applicability of well established techniques for variability management in spls.
in this paper we report such experience.
to keep our work manageable we focused only on the functionality related to order placing since that was the most challenging part of the development in terms of testing.
first we designed a feature model including the main input parameters of the store and their possible values according to the current con guration.
roughly speaking the model represents all the distinct orders that can be placed in the store.
this model provided us with a visual and common view of the store con guration and its input space easy to understand share and discuss with all the stakeholders challenge .
next we automatically analysed the feature model to extract information from the store.
among other data we found that we were facing an input space of three millions of potential input combinations.
also we automatically detected several con guration problems i.e.
input values that could never be selected challenge .
besides this con guration tools made straightforward to check the validity of a given input combination by simply selecting and deselecting features.
we found that this was a simple and highly automated mechanism to search for missing con guration settings challenge .
next we automatically analysed the feature model to select a manageable and e ective subset of input combinations to be tested i.e.
test cases.
in particular the test space was reduced from three millions to test cases including all the valid pairs of inputs i.e.
pairwise suite.
this means a reduction of more than .
in the number of test cases challenge .
then we applied a weighted prioritization algorithm reordering the test cases according to the expected frequency of use of each input value.
this was a natural approach to accelerate the detection of critical faults a ecting to the core functionality of the store challenge .
as a result of our experience we present a set of lessons learnt for researchers and practitioners in the eld of software variability.
we also share or vision of how the proposed variability techniques could be integrated into a hypothetical prestashop module supporting the generalizability of the approach.
although further research is needed our ndings suggest that spl techniques could successfully address many of the variability challenges found during the development of an e commerce site.
to the best of our knowledge this 2this included inquiries in prestashop forums.
140is one of the few applications putting into practice the techniques for the automated analysis of feature models in a real scenario.
the rest of the paper is structured as follows.
in section feature models and spl testing are introduced.
the feature model used to represent the variability of the store input space is presented in section .
section details how the analysis of feature models could contribute to the early detection and repair of faults caused by wrong con guration settings.
section illustrates how the spl techniques for test case selection and prioritization could be used to support the automated generation of test cases.
a set of lessons learnt are presented in section .
we share our vision of how the approach could be generalized in section .
the related work is reviewed in section .
finally we summarize our conclusions in section .
.
background .
feature models and their analyses feature models fms are commonly used as a compact representation of all the valid con gurations of an spl .
an fm is visually represented as a tree like structure in which nodes represent features and connections illustrate the relationships between them.
these relationships constrain the way in which features can be combined to form valid con gurations a.k.a.
products .
for example the fm in fig.
a taken from illustrates how features are used to specify and build software for mobile phones.
the software loaded in the phone is determined by the features that it supports.
the hierarchical relationships among features can be divided into mandatory .
if a feature has a mandatory relationship with its parent feature it must be included in all the con gurations in which its parent feature appears.
in fig.
a all mobile phones must provide support forcalls .
optional .
if a feature has an optional relationship with its parent feature it can be optionally included in all the con gurations including its parent feature.
for instance gpsis de ned as an optional feature of mobile phones in the example.
set relationship .
a set relationship relates a parent feature with a set of child features using group cardinalities.
a group cardinality is an interval such as hn milimiting the number of di erent child features that can be present in a con guration in which their parent feature appears.
the symbol is often used to denote the maximum number of children in the set.
in fig.
a software for mobile phones can provide support for camera mp3or both of them in the same con guration.
in addition to hierarchical relationships fms can also contain cross tree constraints ctcs between features typically represented using rst order logic formulas.
for instance suppose the following ctc is the context of the example camera!colour hdi.e.
mobile phones including a camera require a colour or a high de nition screen.
fms can be automatically analysed to extract information from them.
catalogues with up to analysis operationson fms have been published .
typical analysis operations allow us to know whether an fm is consistent i.e.
it represents at least one con guration what is the number of con gurations represented by an fm or whether an fm contains any errors.
also fms are commonly used to derive con gurations by selecting or deselecting features according to user s preferences.
this process is supported by so called product con gurators .
these tools usually support decision propagation such that whenever a decision is taken i.e.
a feature is selected or deselected the con guration engine propagates those decisions to enforce their consistency automatically selecting or deselecting the remaining features.
in the example selecting basic screen would implies the automated deselection of the features colour and hd due to the set relationship and the feature camera due to the ctc de ned above .
the automated management of fms is supported by a number of commercial and open source tools including the fama framework and splot .
in this paper we used the splot online tool suite which includes an fm editor fig b an fm analysis engine and a product congurator fig c .
.
spl testing aspl test case can be de ned as a con guration of the product line to be tested i.e.
a set of features.
ideally all the con gurations of the spl should be tested although that is often impractical due to the potentially huge number of con gurations under test.
for instance as an example debian wheezy has more than packages that can be combined with restrictions to form millions of di erent con gurations of the operating system which makes exhaustive testing infeasible.
to address this challenge many approaches follow a model based strategy in which the spl feature model is used as input to derive a subset con gurations to be tested i.e.
a spl test suite.
in particular two main strategies have been adopted test case selection and test case prioritization.
test case selection aims at reducing the test space by selecting an e ective and manageable subset of con gurations to be tested.
most common test selection approaches are those based on combinatorial testing .
in these approaches test cases are selected in a way that guarantees that all combinations of tfeatures are tested this is called t wise testing .
one of the best known variants of combinatorial testing is the wise or pairwise testing approach .
this proposal generates all the possible combinations of pairs of features based on the observation that the most of faults originate from a single feature or by the interaction of two features .
test case prioritization schedules test cases for execution in an order that attempts to increase their e ectiveness at meeting some performance goal e.g.
detecting faults as soon as possible.
there are many possible goals of prioritization .
for example testers may wish to order their test cases in order to achieve code coverage at the fastest rate possible or increase the rate of fault detection of test cases.
also test cases may be prioritized according to the user preferences or non functional properties by assigning weights to the features .
a graphical view b splot tree view c splot product con gurator figure a sample feature model .
variability modelling fig.
depicts a feature model representing the variability in the input space of la hilandera online store.
the model is shown using the splot tree view due to space constraints.
it was manually designed to re ect the current con guration of the store.
roughly speaking the model represents all the possible orders that can be placed in the system.
non leaf features represent the input parameters introduced by the user when placing an order e.g.
payment method.
analogously child features represent the possible input values of the parameter represented by their parent feature e.g.
bank wire credit card paypal.
both input parameters and values were modelled according to the current con guration settings of the e shop.
when the input space of a parameter was not restricted to a speci c set of values we divided the domain into so called equivalence partitions where the store is expected to behave in the same way e.g.
con gurable vs. non con gurable products.
a valid con guration is composed of a set of features i.e.
input parameters and their respective values that do not violate any of the constraints of the model.
each valid con guration of the model represents an input combination with distinct implications on how the orders are placed and processed.
the model tree is divided into ve main branches resembling the ve step checkout process in prestashop .
i.e.
login!shopping cart!address!delivery!payment.
additionally an extra branch is used to model the language settings.
in particular the user interface is available in two languages english andspanish .
each language has an obvious impact in the text translations but also in some of the banners and menus displayed.
for instance the links to the blog of the company in spanish are omitted in the english version of the store.
the login branch refers to the status of the user who place the order guest orcustomer .
a guest is an anonymous user that must provide contact and shipping information for each order while a customer is a registered user of the site.
in turn registered customers can log in with their user name and password before placing an order or if they are not customers they can create a newaccount which requires a di erent authentication ow.
the shopping cart branch groups the mains choices regarding the type price and weight of the purchased products.
regarding the product type products can be classi ed asconfigurable and non configurable products.
con g urable products are derived from a so called base product by assigning di erent values to its con guration attributes such as colour or size.
we distinguish between con gurable products with the same price as the base product and those with different price than the base product .
regarding the product price it can be classi ed as normal price special price price discount and quantity discount .
special prices are those marked as such in the administration panel and displayed with a speci c format in the store.
discounts are temporal price reductions created using the prestashop price rules .
quantity discounts establish price reductions for buying a number of items greater than a certain value.
we distinguish between product purchases where the quantity discount is granted and those where it is not granted .
the cart weight range a ect to the selection of the shipping carrier and shipping rates.
as requested by the client we created ve weight ranges namely from to 2kg from to 5kg from to 10kg from to 10kg and from to 10kg .
note that some of the weight ranges overlap.
this was necessary in prestashop where each carrier must be associated to one or more speci c weight ranges.
finally the total to pay can be greater than the free shipping price currently e getting a free shipping or less than the free shipping price .
the address branch includes two main choices the destination country and the selection of the billing and shipping addresses.
the destination country has obvious implications in the shipping rates applied.
it is noteworthy that the shipping con guration of some european countries was similar and so we grouped them under the europe feature to simplify ctcs.
we may remark however that the selection of each country still has di erent implications in how the orders are processed e.g.
postal code format.
beside this the selection of a single address or two di erent addresses for billing and shipping has also an impact on the views and logic code exercised in the online store e.g.
new address form.
the delivery branch includes the choices regarding the carrier as well as some other options as gift wrapping and customer note .
each choice have e ects on the processing of the order.
for instance the selected carrier3determines the shipping rate as well as the url for package tracking sent to the user.
the free shipping feature has an obvious impact on the shipping rate that should be re ected in the 3carrier names are omitted for con dentiality reasons.
142figure feature model representing the input variability in la hilandera online store generated invoice.
similarly the gift wrapping option has an extra cost of .
eand so it must be re ected in the nal price the invoice and the delivery slip.
finally customer notes should appear in the order management dashboard.
the payment branch groups the choices related to the payment method namely bank wire credit card orpaypal .
also this branch includes the options related to vouchers.
avoucher is a promotional bene t o ered to a single customer or a group of customers.
as requested by the client the system supports three types of vouchers discount free shipping and free gift .
in addition to the hierarchical relationships among features we identi ed a number of ctcs listed in table .
these constraints are used to restrict the countries and weight ranges managed by each carrier.
also they restrict free shipping to spain i.e.
free shipping!spain .
.
variability analysis in this section we show how the analysis of feature models could contribute to i extract information about the input space of the store ii early detection of inconsistencies or missing con guration settings iii assist the user in xing con guration errors and iv perform queries about the conguration of the store.
143b alearic islands!carrier4 europe!carrier3 portugal!carrier1 spain!carrier2 free shipping store pickup carrier1!from to 5kg from to 10kg carrier2!from to 10kg carrier3!from to 5kg from to 10kg carrier4!from to 2kg from to 10kg free shipping!greater than free shipping price free shipping!spain free shipping voucher !spain table cross tree constraints regarding the extraction of information table depicts some of the statistics obtained from the feature model using the splot analysis tool.
as illustrated the model has features which places it among of the largest models currently stored in the splot feature model repository out of models .
also the model has extra ctcs and a ctc ratio ctcr of being the average value of the models in splot.
the ctcr is the ratio of the number of features involved in the ctcs to the total number of features in the model .
this gives an idea of how constrained is the input space of the store.
most features are in or xor groups representing the possible values of the input parameters.
analogously parameters are mainly modelled as mandatory and optional features .
the model represents valid con gurations i.e.
distinct orders.
f eatures mandatory optional grouped xor groups or groups tree depth ctcs ctc ratio con gurations table feature model statistics among other operations the automated analysis of feature models enables the detection of inconsistencies.
as an example the manual tests of the store revealed a dead carrier that is a carrier that could not be selected due to wrong con guration settings.
the problem was caused by a change in the original requirements.
initially the client wanted carrier3 to ship all orders to european countries excluding spain .
however the client later decided that orders to portugal would be shipped by carrier1 which o ers cheaper rates.
although carrier1 had been added to the system it had not been associated to portugal causing the problem.
fig.
depicts how the dead feature would have been automatically detected using the splot feature model editor.
this could be complemented by tools as fama which implements error diagnosis techniques to identify the causes of inconsistencies so called explanations e.g.
carrier1 has no destination countries associated .
thus we could get information about why the carrier cannot be selected assisting the user on repairing the problem i.e.
de ning portugal asan independent destination and making carrier1 its default carrier portugal!carrier1 .
this would have allowed us to detect and x the problem during the con guration stage saving costly testing and debugging resources.
figure dead carrier detected during variability analysis interactive product con guration may also be handy way to detect missing con guration settings.
for instance during the tests of the store we found that the free shipping vouchers were not restricted to orders in spain as requested in the requirements.
fig.
a shows how a product congurator could have been used to detect the problem.
as illustrated once the free shipping voucher is selected all destinations are still enabled revealing the bug.
fig.
b shows the con guration view once the missing ctc is added i.e.
free shipping voucher !spain .
note than only spain remains enabled after selecting the free shipping voucher feature.
this approach could be used to perform preliminary tests during the modelling stage by simply selecting and deselecting features instead of diving into tons of menus and wizards.
finally product con gurators could also be used to perform queries about the current con guration of the store.
to that purpose the user may select or deselect features checking the input combinations allowed by the current conguration settings.
for instance the user could nd out if carrier1 can ship orders to germany by checking if both features can be selected simultaneously.
.
variability testing in this section we show how the techniques for variability testing in spls could contribute to automate the selection and prioritization of test cases for the e commerce site.
we de ne a test case in our domain as a valid con guration of the feature model i.e.
a set of features.
to reduce the test space we used the splcat tool for pairwise spl test case selection .
this tool takes a feature model as input and returns a pairwise test suite i.e.
a set of con gurations containing all the possible pairs of features.
using the feature model in fig as input the tool generated a pairwise suite composed of test cases out of which means a reduction over .
in the number of con gurations under test.
more importantly the pairwise suite is not only manageable but also e ective according to the combinatorial testing theory which state that the most faults are triggered by one feature or the interaction between two features .
as an example see below one of the test cases included in the pairwise suite.
a missing con guration constraint b correct con guration figure using a feature model con gurator to detect missing con guration settings tc flanguage english login customer registered shopping cart products non configurable non conf quantity discount non conf not granted configurable conf price discount different price as base product weight range from to 10kg total to pay more than free shipping price address destination europe austria billing and shipping different addresses delivery carrier carrier3 gift wrapping customer note payment method paypal voucher recipient single type free gift g the test case is composed of the set of features i.e.
input parameters and values that should be exercised when placing an order in the store under test.
note that presenting a test case as a list of features to be tested would have little or no meaning at all for most prestashop users.
thus each leaf feature could be mapped to a sentence in natural language creating step by step instructions easy to understand and follow by non expert users.
not only that the prestashop database could be automatically inspected to suggest products that ful l the criteria de ned in the test case e.g.
non con gurable products with price discount under 2kg.
this would make the test case reproducible.
table illustrates a sample user oriented test case derived from the test case shown above.
once generated test cases could be automatically prioritized to meet certain performance goals.
to illustrate this we applied a plain weighted prioritization algorithm.
this algorithm receives a test suite where each feature has a weight indicating its importance ranging from irrelevant to critical .
the algorithm sorts test cases according to the normalized sum of the weights of its features.
according to the expected frequency of use of each feature we set a weight of .
for features guest from to 10kg spain and credit card and a default weight of .
for the rest of1 .
select english language.
.
log in as a registered user.
.
add the following products to the cart x knitting loom.
x nylon zippers colour size 25cm .
set austria as destination country.
.
introduce di erent shipping and billing addresses.
.
select carrier3.
.
add a customer note.
.
request gift wrapping.
.
introduce voucher code for free gift.
.
select payment with paypal.
.
con rm purchase.
table sample user oriented test case features.
then we ran the algorithm with the suite generated by splcat obtaining a prioritized pairwise suite.
as a result those test cases exercising the high priority features would be performed rst accelerating the detection of critical faults.
this would also guarantee that the most relevant test cases have been exercised in the case that the testing resources are exhausted before running the whole suite.
finally we may remark that the weights could be adjusted and the algorithm run as many times as needed supporting future changes in the client s priorities.
.
lessons learnt our experience exploring the applicability of variability analysis and testing techniques to the development of la hilandera online store can be summarized in the following lessons learnt 145lesson .
feature models are suitable to represent input variability.
feature models are typically used at the problem level to represent requirement variability in a spl.
in this paper however we used a feature model at the solution level to represent the input variability of a single store with a speci c con guration.
our experience con rms that feature models are expressive enough to capture the variability of the store input space in terms of their input parameters and their possible values and constraints.
in this sense the model can also be regarded as a compact and intuitive view of the con guration settings of the store.
more importantly using a feature model allows using o the shelf tools for the automated detection of con guration inconsistencies as well as the generation of test cases.
lesson .
con guration faults are a key target.
we distinguish between software and con guration faults.
the former are caused by bugs in the code.
the latter are caused by wrong con guration settings.
hence a module could work correctly but still not meet the requirements of the client due to a wrong con guration e.g.
dead carrier.
from a prestashop user perspective we found that detecting conguration faults is a key challenge.
every single prestashop store is likely to have di erent con guration settings which makes con guration faults a widespread problem with no one for all solution.
also the con guration of stores is often performed by nal users with no testing knowledge which reinforces the need for automated tool support.
to the best of our knowledge this is the rst approach pointing at the problem of con guration faults in e commerce platforms.
lesson .
feature model analysis for early testing.
our experience suggests that the analysis of feature models is a handy approach for the automated detection of inconsistencies such as contradictory or missing con gurations values.
additionally the available techniques for error diagnosis in feature models could provide helpful information about the sources of the inconsistencies guiding the user toward quick xes.
these analyses would contribute to the early detection and repair of con guration faults in e commerce sites that otherwise would require costly testing and debugging resources.
lesson .
priorities emerge naturally.
performing each test case took us between and minutes on average much more if a failure was revealed and we had to debug the code to x it.
besides this we were pressed by the client to release the online store in a speci c date previously announced through the social networks.
thus we naturally felt the need to prioritize our e orts.
to that purpose we intuitively performed rst those tests exercising the most common input parameters and values.
the goal was to accelerate the detection of those bugs a ecting to the core functionality of the store and therefore those likely to generate more losses.
although multiple prioritization criteria could be used we found that assigning priorities to features according to their expected frequency of use is a quite natural approach for an e commerce site.
lesson .
integration faults are frequent.
this is because new versions of the platform are frequently released creating incompatibilities with previous versions e.g.
modules for prestashop v1.
are not backward compatible withprestashop v1.
.
beside this the modules and the templates must be compatible with the speci c version of prestashop but they are often not.
in our project we found that the purchased template had been developed for prestashop v1.
and patched to work with prestashop v1.
without an exhaustive validation revealing bugs.
among others we found that disabling the product comparison module triggered a css bug that spoiled the appearance of the list of products.
lesson .
four main types of faults.
the faults detected in the store can be classi ed in four main groups i translation faults ii css faults iii work ow faults and iv con guration faults.
translation faults were by far the most common problems.
in many cases the spanish translation of certain strings was wrong e.g.
spelling mistakes or simply missing.
also we found that the spanish translation of prestashop uses di erent ontologies referring to the same term with di erent synonyms e.g.
shopping cart.
css faults were mainly related to wrong positioning of the ui elements that required modifying the stylesheet.
work ows faults caused unexpected redirections while browsing the store.
finally as previously mentioned con guration faults were caused by wrong settings of the store parameters.
among others we detected con guration faults related to carriers shipping and wrapping rates seo sitemap les email noti cations and invoice pdf generation.
this required several iterations of testing and debugging until gaining con dence in the correctness of the system.
lesson .
full automation is tough.
in this paper we focus on test case generation while the execution of the test cases is out of the scope.
tests were manually performed introducing gui input actions e.g.
placing orders and searching for unexpected behaviour such as wrong translations positioning problems error messages wrong navigation work ow missing images etc.
this involved not only manually checking the front end user interface but many others artefacts such as the generated pdf documents order dashboard customer list product stock e mail alerts etc.
according to our experience automating the execution of test cases and in turn the whole testing process is a daunting challenge.
we remark however that tools such as phpunit and selenium would be helpful to automated regression tests once the test suite is designed and recorded.
lesson .
poor support for implementing variability.during the development we received multiple requests from the client to show di erent information in the spanish and english versions of the store.
this included header and footer links banners and even products.
for instance the company sells some self manufactured products e.g.
do it yourself kits with spanish patterns which the client wished to exclude from the english version of the store.
similarly the client requested that the information about their on site workshops should be in spanish only since they are only available for people leaving in the area.
surprisingly we found no built in support for this kind of variability in prestashop.
pressed by time we were forced to hard code it using basic if else statements i.e.
if lang iso en ... else ... a analysis view b testing view figure user interface of an hypothetical prestashop module for variability analysis and testing .
our vision in this section we share our vision of how the proposed variability techniques could be integrated into prestashop generalizing the bene ts of our approach.
as an example figure depicts the user interface prototype of an hypothetical prestashop module integrating the techniques for variability analysis and testing described in this paper.
note that the target users would be prestashop users with no expected knowledge about variability or testing.
thus information should be presented in an intuitive and user friendly way.
figure a depicts the analysis view where the user would interact with the feature model by selecting or deselecting features.
this could be presented either as a feature tree or simply as a list of leaf features with on o controls.
on the right side a panel would show an analysis report with information about the detected inconsistencies e.g.
dead carrier as well as their explanations.
figure b shows the testing view where the user should set priorities for each feature e.g.
low default or high and the number of test cases to be created.
once generated test cases would be shown in an additional panel as sequences of steps that the user should perform to detect potential faults in the store.
the development of such module would require overcoming several challenges among others .feature model generation .
the feature model should be automatically generated to make the approach generalizable.
to that purpose a feature tree template could be used and populated with the con guration values extracted from the prestashop database.
such feature tree template should be version dependent and extensible as new modules are installed.
.inconsistency management .
researchers have identied di erent types of inconsistencies in feature models such as dead features conditionally dead features false optional features etc.
.
studying which ones of those inconsistencies could appear in prestashop andhow presenting them to the user remains as a challenge.
.generation of user oriented test cases .
feature based test cases should be presented as sequences of steps in natural language easy to follow by prestashop users.
to that purpose the prestashop database should be automatically inspected to suggest products that full the criteria de ned in the test cases making them reproducible.
.
related work lau and czarnecki proposed e commerce systems as a motivating case study in the context of model driven spls.
as a part of their work they constructed a feature model representing a family of e commerce systems so called eshop.
the e shop feature model has features and represents 1049con gurations being the second largest feature model in the splot repository and one of the most referenced in the literature .
their work supports our view on e commerce sites as motivating variability intensive systems but with some di erences.
first the e shop model represents a family of e commerce sites while our model represents the input space of a single store.
second they focus on variability modelling while we focus on variability analysis and testing.
finally are more importantly the e shop model was constructed from the information gathered in the literature and the web while our model was derived from a real e commerce site.
regarding variability testing wang et al.
proposed an automated test case selection approach and evaluated it in an industrial case study in cisco.
in the authors reported the results of applying pairwise test case selection in an industrial spl of video conferencing systems.
nguyen et al.
proposed a variability aware approach to execute test cases in plugin based web applications and detected two bugs in the popular blogging platform wordpress.
com147pared to previous works we explore the applicability of variability analysis and testing techniques in a novel scenario a real e commerce site.
instead of modelling variability at the requirement level we use a feature model to represent the input space of the store automating the detection of con guration bugs and the generation of test cases.
equivalence partitioning is a testing technique in which the input domain of the program is divided into partitions also called equivalence classes in which the program is expected to process the set of data input in an equivalent way.
thus only an input value of each partition is needed to evaluate the behaviour of the program in that partition.
this technique is often combined with combinatorial testing to create input combinations from di erent partitions that are likely to reveal faults while keeping a manageable number of test cases.
our work is mostly inspired by these techniques.
the features of the feature model represents the di erent partitions of the input space of the store while the di erent relationships among features represents the constraints among the partitions.
as reported this is not only a natural way of representing the input space of an e commerce site but it also enables the use of multiple tools for the analysis of variability and combinatorial test case generation.
yuan et al.
presented a survey on web application testing since the origin of the world wide web over two decades ago.
in their work authors grouped the testing techniques used in the context of the web into graph based testing model based testing mutation testing search based testing random testing scanning and crawling techniques concolic testing and user session based testing.
although these techniques have made signi cant advances in the detection of faults in web applications they were not conceived to deal with the speci c challenges of variability intensive systems.
also these techniques focus on testing web applications as a whole while our approach deals with the speci c characteristics of web applications developed on top of open source platforms as prestashop.
.
conclusions in this paper we reported the main challenges found during the development of la hilandera e commerce site and explored how they could be addressed using techniques for variability management in spls.
in particular we used a feature model to represent all the di erent orders that can be placed in the store in terms of their input parameters values and constraints.
this allowed us to use o the shelf tools to automatically detect con guration bugs and generate e ective and manageable test suites.
our ndings are summarized as a set of lessons learned for researchers and practitioners in the eld of variability.
among others we identi ed integration and con guration faults as two key targets where research contribution would be welcome.
we also share our vision of how the proposed variability techniques could be integrated into e commerce platforms as prestashop generalizing the bene ts of our approach to thousands of online stores worldwide.
although further research is needed this could become one of the few commercial products making pro t out of putting into practice the techniques for the automated analysis of feature models.
we trust that this work will be used as a motivating and real case study to evaluate variability analysis and testing contributions.material the feature model of the store in sxfm format the test suites and the java implementation of the plain weighted prioritization algorithm are available at us.es segura files material ase14