verifying component and connector models against crosscutting structural views shahar maoz school of computer science tel aviv university israeljan oliver ringert bernhard rumpe software engineering rwth aachen university germany abstract the structure of component and connector c c models which are used in many application domains of software engineering consists of components at di erent containment levels their typed input and output ports and the connectors between them.
c c views presented in can be used to specify structural properties of c c models in an expressive and intuitive way.
in this work we address the veri cation of a c c model against a c c view and present e cient polynomial algorithms to decide satisfaction.
a unique feature of our work not present in existing approaches to checking structural properties of c c models is the generation of witnesses for satisfaction non satisfaction and of short naturallanguage texts which serve to explain and formally justify the veri cation results and point the engineer to its causes.
a prototype tool and an evaluation over four example systems with multiple views performance and scalability experiments as well as a user study of the usefulness of the witnesses for engineers demonstrate the contribution of our work to the state of the art in component and connector modeling and analysis.
categories and subject descriptors d. .
requirements speci cations d. .
design tools and techniques general terms design languages keywords component and connector models veri cation .
introduction the structure of component and connector c c models consists of components at di erent containment levels their permission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
to copy otherwise to republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
icse may june hyderabad india copyright acm ... .
.typed input and output ports and the connectors between them.
c c models are used in many application domains of software engineering from cyber physical and embedded systems to web services to enterprise applications as they o er a physically distributed computation model as well as a logically distributed development process.
in recent work we have presented component and connector views as a new means to specify structural properties of component and connector models in an expressive and intuitive way.
c c views take advantage of novel abstraction mechanisms for hierarchy and connectivity not present in comparable languages.
these mechanisms allow di erent stakeholders to create views that express their partial knowledge about the structure of the system at hand corresponding to di erent use cases functions or concerns.
c c views provide means to abstract away direct hierarchy direct connectivity port names and types.
speci cally a c c view may not contain all components and connectors and typically indeed contains only a small subset of the set of all components and connectors of the system related only to a speci c use case or set of functions or features .
it may contain abstract connectors between components at different non consecutive containment levels and it may provide incomplete typing information i.e.
components ports may be un typed.
while the standard structural abstraction and speci cation mechanisms supported by existing languages and tools for c c models rely on the traditional implementation oriented hierarchical decomposition of systems to sub systems c c views allow one to specify properties that crosscut the boundaries of sub systems.
most importantly this makes them especially suitable to re ect the partial knowledge available to di erent stakeholders involved in a system s design.
we consider two usage scenarios.
first where a set of c c views serves as a speci cation for a c c model.
in this setup di erent teams develop separate views expressing constraints derived from their partial knowledge of the system under development.
an architect is given this set of c c views describing mandatory alternative and negative structural properties and is responsible for building a c c model that satis es them.
second where a set of c c views is created to document an existing c c model.
in this setup the views highlight design decisions and document how speci c concerns are addressed using potentially crosscutting solutions in the model.
unlike the views a c c model is complete it includes all components and connectors with all ports names and types.
it is ready for implementation e.g.
for direct codepermission to make digital or hard copies of all or part of this work for personal or classroom use is granted without fee provided that copies are not made or distributed for profit or commercial advantage and that copies bear this notice and the full citation on the first page.
copyrights for components of this work owned by others than acm must be honored.
abstracting with credit is permitted.
to copy otherwise or republish to post on servers or to redistribute to lists requires prior specific permission and or a fee.
request permissions from permissions acm.org.
icse may june hyderabad india copyright acm ... .
generation.
thus given a c c model one is interested in verifying whether it satis es each of the c c views in its speci cation or documentation.
however as also demonstrated in our evaluation see sect.
manually verifying c c views satisfaction is a di cult and error prone task.
in this work we focus on the veri cation of c c models against c c views and present three contributions first we de ne and implement an e cient polynomial algorithm for the structural veri cation of a c c model against a c c view.
second we extend the veri cation algorithm to not only decide satisfaction but also importantly to generate small model witnesses and short natural language texts that formally justify and explain the veri cation results to the engineer.
finally we report on an evaluation of our work over several example c c model systems taken from different sources and of di erent domains and several c c views speci cations consisting of many views both in terms of the performance and scalability of our algorithms and in terms of its usefulness to engineers.
in our previous work we have introduced c c views and discussed the synthesis problem given a c c views speci cation consisting of mandatory alternative and negative views construct a concrete satisfying c c model if one exists.
synthesis is powerful but it su ers from scalability limitations.
the present paper complements this previous work by focusing on the dual problem of veri cation.
as a concrete language for c c models we use montiarc a textual adl developed using monticore with support for direct java code generation including interfaces factories etc.
.
its expressive power is comparable to that of other adls e.g.
mathworks simulink aadl and uml component diagrams.
the c c views are de ned as an extension to general c c models.
the concrete syntax used in our implementation is an extension of montiarc.
some previous work deals with veri cation of structural properties of component and connector structures mainly in the context of architectures e.g.
.
none however consider witnesses that explain the veri cation results and none have reported on performance and scalability.
we discuss these and other related work in sect.
.
sect.
gives a semi formal overview of c c views and veri cation using examples.
sect.
provides formal de nitions and sect.
describes our veri cation algorithm and its output.
implementation and evaluation are presented in sect.
.
sect.
discusses related work and sect.
concludes.
.
overview we use an example of a pump station architecture given with the autofocus3 tool .
we show the complete pump station c c model and four c c views which we have created based on documented use cases related to the pump station system.
we use these views here to demonstrate the features of the language and the relationship between a c c model and a view.
the example is intentionally small to support readability.
additional example systems we have used in our evaluation are brie y described in sect.
.
we describe the example semi formally.
formal de nitions are given in sect.
.
c c model pumpstation pumpstation environment pumpingsystem physicssimulationsimulation panel sensorreading pumpsensorreader userbuttonreader tanksensorreader valvesensorreader valveactuatorpumpactuator controller useroperation emsoperationmodearbiterfigure the c c model of the pump station.
note that many tools show models like the above only one level and one sub system at a time.
here we show the c c model with its complete depth in one gure in order to give a comprehensive perspective to save space and to contrast it with the partiality of the views as shown in other gures.
also note that to avoid clutter we omit port names and types from the gure.
however as this is a c c model and not a view all ports have names and types.
for example the type of the upper left incoming port of the component modearbiter with a connector coming from the component useroperation isboolean and its name is userpumpstate .
.
a c c model and four c c views fig.
shows the complete c c model of the pump station.
it consists of components a containment hierarchy of levels and connectors.
the complete c c model in textual montiarc format is available with supporting materials from .
fig.
left shows a c c view named aspumpingsystem.
this view focuses only on the connections between sensors and actuators in the system.
as aspumpingsystemis a view it does not contain all components and connectors.
while the components shown inside the pumpingsystem component must actually be inside it they may be nested within some of its subcomponents not shown in this view .
finally each of the sensors shown must be connected to the corresponding actuator in the model but the connection between them is not necessarily direct.
it is easy to see that the c c model satis es the view denoted pumpstationj aspumpingsystem all components mentioned in the view are present in the c c model the c c model respects the containment relation speci ed by the view and all connectors in the view have corresponding chains of connectors in the c c model.
fig.
right shows another c c view named userbutton.
the view focuses on the components and the connectors that participate in a speci c use case namely when the user presses the button.
again not all components are shown but only the ones participating in this use case.
note that the containment hierarchy is not shown and the connectors are abstract i.e.
they specify connections but not necessarily direct ones.
it is easy to see that the c c model satis es this view all the components mentioned in the view exist in the c c model and all abstract connectors in the view have corresponding chains of concrete96pumpingsystem pumpsensorreader valvesensorreader valveactuatorpumpactuator pumpstate valvepositionc c view aspumpingsystem simulationpanel userbuttonreader useroperation modearbiterbutton userbutton userpumpstate uservalvepositionc c view userbuttonfigure two c c views aspumpingsystem and userbutton .
note that as these are views they allow one not to fully specify ports port types and port names.
for example the abstract connector going out from pumpsensorreader in the aspumpingsystem view has no speci ed source port.
the c c model pumpstation satis es these views.
pumpingsystem physicssimulationc c view pcpumpingsystem controllerpumpingsystemc c view systememergencycontroller useroperation modearbiter integer userpumpstatevalveposition valvepositionemergencycontroller figure two c c views pcpumpingsystem and systememergencycontroller .
the c c model pumpstation does not satisfy these views.
connectors in the c c model.
in mathematical notation pumpstationj userbutton .
fig.
left shows a c c view named pcpumpingsystem which includes a connection from the physicssimulation component to the controller component both within thepumpingsystem component.
it is easy to see that the c c model does not satisfy the view we denote this by pumpstation6j pcpumpingsystem .
first in the view physicssimulation is inside pumpingsystem while in the c c model it is not.
second the connector from physicssimulation tocontroller shown in the view does not have a corresponding connector or chain of connectors in the c c model.
finally fig.
right shows a c c view named systememergencycontroller which speci es structural properties related to a use case of emergency.
again the pump station c c model does not satisfy this view.
first the view includes the emergencycontroller component which does not exist in the c c model.
second the type integer of the port named userpumpstate of the modearbiter component does not match the type boolean of the port with the same name userpumpstate in the c c model.
in mathematical notation pumpstation6j systememergencycontroller .
note that the views shown above crosscut the traditional c c view witness for userbutton pumpstation environmentpumpingsystemsimulationpanelsensorreading userbuttonreadercontroller useroperation modearbiterbuttonuserbutton userpumpstate uservalvepositionfigure generated witness for satisfaction of the userbuttonview boundaries of systems and sub systems.
they abstract the hierarchy or parts of the hierarchy away and instead focus on the components and connectors participating in a use case e.g.
the user pressing a button or a certain concern e.g.
emergency .
this crosscutting nature is a distinctive feature of c c views.
we give the formal de nitions for a c c model a view and when does the former satisfy the latter in sect.
.
.
witness for satisfaction non satisfaction as mentioned above given a c c model and a view we are interested in checking whether the former satis es the latter.
however in practice a boolean answer is by far not enough.
rather we look for concrete justi cations for satisfaction or non satisfaction.
these should enable comprehension and in the case of non satisfaction point the engineer to the problems and assist her in correcting her design.
as an example fig.
shows a view which serves as a witness for showing that pumpstationj userbutton that is that the c c model pumpstation satis es the view userbutton .
note the complete hierarchy excluding siblings up until the least common parents of the components appearing in the view and the chains of concrete connectors corresponding to the abstract connectors in the view e.g.
the chain from simluationpanel tomodearbiter .
as another example fig.
shows two views which serve as witnesses for showing that pumpstation6j pcpumpingsystem that is that the c c model pumpstation does not satisfy the view pcpumpingsystem .
while in the view pcpumpingsystem thepumpingsystem component contains the physicssimulation component in the c c model as shown in the witness on the left they are independent.
while inpcpumpingsystem there is a connection from component physicssimulation to component controller from unnamed port to unnamed port in the c c model as shown in the witness on the right controller is not in the set of components reachable with a chain of connectors from physicssimulation .
note that the two witnesses include annotations which explain in natural language the relevant reason for non satisfaction.
in sect.
we discuss the algorithms to decide satisfaction and generate informative witnesses like the ones we show above.
.
preliminaries we brie y recall the structure of c c models and views as de ned in we give shortened de nitions for complete de nitions see the technical report available from .97c c view hierarchymismatch pumpstation pumpingsystemenvironment physicssimulationc c view missingconnection components pumpingsystem and physicssimulation are independent in architecture pumpstation but not independent in view pcpumpingsystem.architecture pumpstation is missing connection from component physicssimulation to component controller from unnamed port to unnamed port .pumpstation environment pumpingsystem physicssimulationsimulation panel sensorreading pumpsens orreader tanksensor reader valvesenso rreadercontrollerfigure two generated witnesses for non satisfaction of the pcpumpingsystem view including generated texts that explain the reason for non satisfaction .
component and connector models a c c model is a structure cncm hcmps ports cons types subs ports type iwhere cmps is a set of named components each of which has a set of ports ports cmp ports and a possibly empty set of immediate subcomponents subs cmp cmps ports is a disjoint union of input and output ports ports portsin portsout where each port p2 ports has a name a type type p 2types and belongs to exactly one component p2ports cmp cons is a set of directed connectors each of which connects two ports of the same type which belong to two sibling components or to a parent component and one of its immediate subcomponents and types is a nite set of type names.
some additional well formedness rules apply e.g.
that the subcomponents relation induced by subs is a strict partial order that every port has at most one incoming connector and that port names are unique within their component.
in addition without loss of generality we consider only c c models with exactly one top component.
.
c c views a c c view is a structure view hcmps ports abscons types subs ports type iwhere cmps is a set of named components each of which has a possibly empty set of ports ports cmp ports and a possibly empty set of subcomponents subs cmp cmps ports is a disjoint union of sets of input and output ports ports portsin portsout where each port p2ports has a possibly unknown name a possibly unknown type type p 2types ?
and belongs to exactly one component p2ports cmp abscons is a set of abstract connectors each of which connects components optionally via ports of the same type or an unknown type and types is a nite set of type names.
note that in a c c view abstract connectors are not required to connect only two sibling components or a par ent component and one of its immediate subcomponents.
again the subcomponents relation is a strict partial order but we do not restrict c c views to have exactly one top component.
we are now ready to de ne the semantics of our c c view and c c model and speci cally when does the second satisfy the rst.
a c c model satis es a c c view i the types components and ports mentioned in the second are contained in the rst the rst respects the subcomponent relation induced by the second two ports connected by an abstract connector in the second are connected by a chain of connectors in the rst respecting direction names and types and all ports of a component in the second belong to the same component in the rst with corresponding name type and direction.
more formally de nition cncmj view .a c c model cncm satis es a c c view view i view types cncm types view cmps cncm cmps view ports cncm ports 8cmp cmp 22view cmps cmp 12view subs cmp i cmp 12cncm subs cmp we use to denote the transitive closure 8ac2view abscons9chain of connectors in cncm c1 c nwith ac srccmp c1 srccmp and ac tgtcmp cn tgtcmp with matching port names and types if speci ed and 8cmp2view cmps view ports cmp cncm ports cmp and 8p2view ports cmp p2view portsin i p2 cncm portsin view type p 2f?
cncm type p g similarly for unknown and given port names .
.
c c views verification .
problem definition the c c views veri cation problem is de ned as follows given a c c model cncm and a c c view v decide whether cncmj v. moreover in addition to the boolean answer we are interested in constructing minimal witnesses we explain our notion of minimality below that demonstrate it as follows.
.
.
a witness for satisfaction in case the c c model satis es the view the witness should be a minimal subset of the c c model that is by itself a well formed c c model contains all the components appearing in the view and their parent components up until their least common parent contains c c model ports corresponding to all the ports appearing on all components in the view and contains c c model connectors and chains of connectors representing all abstract connectors appearing in the view.
for example recall the two views shown in fig.
.
both views are satis ed by the pump station c c model.
fig.
shows the witness for satisfaction of the userbutton view as discussed already in sect.
and fig.
shows the witness for satisfaction of the aspumpingsystem view.
note the complete hierarchy excluding siblings up until the least common parents of the components appearing in the views e.g.
for aspumpingsystem the sensorreading component.
also note the chain of concrete connectors corresponding to98pumpingsystem valveactuatorpumpactuator sensorreading pumpstate valvepositionc c view witness for aspumpingsystem pumpsensorreader valvesensorreaderfigure witness for satisfaction of the aspumpingsystem view the abstract connectors in the views e.g.
the chain from pumpsensorreader topumpactuator .
.
.
witnesses for non satisfaction in case the c c model does not satisfy the view we are interested in a set of witnesses each of which should explain one cause for non satisfaction.
thus the witnesses we are looking for are divided into four classes according to four reasons of non satisfaction as follows missing component the view contains a component that does not exist in the c c model hierarchy mismatch the view contains two components that in the c c model are in a di erent containment relation independent in view but not independent in the c c model not independent in the view but independent in the c c model not independent in both the view and the c c model but in reverse containment relation interface mismatch the view contains a component with a port that does not exist in the c c model no full match of name type direction and missing connection the view contains an abstract connection that has no corresponding concrete chain of connectors in the c c model.
remark .
note that the classi cation of four reasons for non satisfaction described above is complete that is given a c c model cncm and a view view ifcncm6j view then at least one of the reasons above holds.
the correctness of our algorithm see below is based on this property.
a formal proof is available in the technical report from .
given the above classi cation of reasons we require the generation of a set of witnesses each of which is a minimal subset of the c c model that is by itself a well formed c c model.
the set should include the following witnesses for each missing component a witness that is an empty model annotated with the name of the missing component for each hierarchy mismatch between two components a witness that consists of the relevant pairs of components up to their least common parent in the c c model but without siblings and without any connectors and ports for each interface mismatch a witness that consists of the relevant components in the c c model without subcomponents with the relevant port in case of type or direction mismatch or their complete interface in case no matching port was found annotated with the port from the view that has no match and c c view interfacemismatch1 c c view interfacemismatch2 modearbiter boolean userpumpstatemodearbiter boolean userpumpstateboolean emspumpstate valveposition emsvalvepositionboolean desiredpumpstatevalveposition uservalveposition valveposition desiredvalveposition wrong type for port userpumpstate of component modearbiter integer .no match for port valveposition of component modearbiter.figure non satisfaction witnesses for the view systememergencycontroller for each missing connection a witness that consists of the relevant pairs of components up to their least common parent in the c c model but without siblings and with all components reachable by connectors from the source component.
for example as presented in sect.
for the pump station c c model and the view pcpumpingsystem see fig.
and fig.
left we consider the two witnesses shown in fig.
corresponding to two reasons for non satisfaction.
first the witness shown in fig.
left asserting that pumpingsystem andphysicssimulation are independent points to a hierarchy mismatch.
second the witness shown in fig.
right asserting that controller is not in the set of components reachable with a chain of connectors from physicssimulation points to a missing connection.
as another example for the pump station c c model and the view systememergencycontroller see fig.
and fig.
right we consider four witnesses corresponding to four reasons for non satisfaction two interface mismatches one missing component and one missing connection.
remark .
note that according to the above each of the witnesses for non satisfaction as well as for satisfaction is not only by itself a well formed c c model but also can be presented technically as a view albeit with concrete containment and connectors that is satis ed by the c c model indeed this can be checked by the same algorithm .
this has two advantages.
first the engineer does not need to learn a new language in order to understand witnesses.
second the same tools applied to c c models and views e.g.
for presentation or further analysis can be applied to witnesses.
to conclude all witnesses have some common properties.
first each contains a single least common parent component which is the top of the relevant sub system except for the case of a missing component .
second each can be presented as a view with concrete containment and connectors.
finally each witness includes complete port information of name type and direction although the set of ports shown is not necessarily complete .
remark .
interestingly the witness for satisfaction of a witness when considered as a view and checked against the same c c model is the witness itself.
that is a witness is itself the witness for its satisfaction.
we consider this to be a nice idempotence property of our de nition of views satisfaction and witnesses.
.
algorithm overview we now give an overview of the algorithm we use.
a detailed presentation of the algorithm its correctness and com 99plexity and the templates mentioned below are all available in a technical report from .
the input for the algorithm consists of a c c model and a view.
the output is a boolean answer whether the c c model satis es the view or not and a set of one or more witnesses.
the algorithm works by checking for reasons of non satisfaction of the view and the c c model in the four classes described in sect.
.
.
.
the checks are done sequentially and independently the answer that the c c model satis es the view is returned i no reason for non satisfaction is found.
checking for the four non satisfaction reasons is done using standard graph traversing algorithms depth rst search breadth rst search etc.
over the graphs induced by the inclusion relation between components and by the connectedness relation between ports in the model and the view.
checking for missing components and interface mismatches is straightforward.
checking for hierarchy mismatches is done by checking for each component and each of its subcomponents in the view whether the parent also contains the subcomponents in the c c model and for each two components in the view that are not contained in one another whether they are also independent in the model.
checking for missing connections is done by a breadth rst search of the connectors in the model.
the number of traversals is bounded by the total number of elements in the model and view at hand.
data collected during the traversals is used in the construction of the witnesses and in the instantiation of the natural language templates for the textual explanations.
witness construction is based on the data collected during the checking of the four reasons for non satisfaction.
in case of satisfaction the witness is built by traversing the view and adding the corresponding elements from the model.
in case of non satisfaction the input for the construction is the model and a single reason for non satisfaction e.g.
a single pair of hierarchy mismatched components .
construction starts from the elements mentioned in the reason for nonsatisfaction and adds required elements from the model.
.
.
minimality the generated witnesses for non satisfaction are minimal in terms of number of components connectors and ports because there is only one possible witness to construct in each case by de nition.
for the witness of satisfaction minimality is more subtle because as we explain below there may be more than one possible correct witness.
to generate a small witness for cncmj view before adding a chain of connectors for an abstract connector or adding a port shown in the view to the witness the algorithm checks whether the elements in the witness already provide a matching.
if no match of the view s element exists in the witness a match in the model is found and added to the witness.
note that this check is a heuristics to create small witnesses when possible in terms of the total number of concrete connectors and ports in the witnesses but it does not guarantee that the generated witness is minimal to this measure.
also note that computing a shortest chain of connectors for each abstract connector does not guarantee a global minimum either because in a minimal solution some concrete connectors may potentially belong to multiple chains i.e.
be used to implement multiple abstract connectors.thus computing minimal witnesses for satisfaction is possible but more complex and computationally expensive.
in the current implementation we chose a fast computation based on the heuristics described above rather than a slower computation of a global minimum.
.
.
generating natural language descriptions finally for each of the generated witnesses in each of the four classes of non satisfaction reasons we generate a detailed description in natural language.
to generate natural language descriptions for the reasons for non satisfaction we use plain text parametrized templates one template for each non satisfaction reason.
the data collected by the algorithm e.g.
the name of a missing port is used to assign values to the parameters in the template s instantiation.
for example the template for hierarchy mismatch uses the following parameters cncm view the hierarchy mismatch kind three possible values see sect.
.
.
the parent component cmp and the child component subcmp .
for the second hierarchy mismatch kind the template reads components cmp name andsubcmp name are independent in c c model cncm name but not independent in view view name .
.
thus for example for the hierarchy mismatch between the pump station c c model and the view pcpumpingsystem as discussed above the template s instantiation generates the following text components pumpingsystem and physicssimulation are independent in c c model pumpstation but not independent in view pcpumpingsystem .
the generated texts appear on the witnesses list in the eclipse plug in see sect.
and as a comment in the generated witness s document see fig.
and .
they are intended to further help the engineer in identifying the reasons for non satisfaction.
.
ev aluation the plug in implementation and all speci cations reported on below are available in supporting materials together with screen captures and relevant documentation.
all specications can be inspected and all experiments can be reproduced.
we encourage the interested reader to try it out.
our evaluation includes tool support implementation four example systems performance and scalability experiments and a user study as described below.
.
tool support we have implemented support for c c views veri cation within a prototype eclipse plug in.
the concrete syntax used is adapted from montiarc .
using the plug in the engineer can select two les a c c model and a view and check whether the former satis es the latter.
in case of a positive answer a witness for satisfaction is generated and presented as an annotated view in the main editing pane.
in case of a negative answer all witnesses for non satisfaction are generated and listed in a hierarchical problems view titled witnesses for nonsatisfaction .
the hierarchy in the problems view re ects the classi cation of non satisfaction reasons described above i.e.
of missing component hierarchy mismatch interface mismatch and missing connection.
clicking a speci c entry in the problems view opens up the corresponding witness as100figure a screen capture from the prototype plug in after checking the c c model pumpstation shown in fig.
against the view systememergencycontroller shown in fig.
right .
the lower pane shows the eclipse problems view titled witnesses for non satisfaction which provides a hierarchical list of the generated witnesses for non satisfaction and their generated natural language descriptions.
four witnesses were generated one for a missing component two for interface mismatches and one for a missing connection.
the main editing pane shows one of the generated witnesses for interface mismatch.
an annotated view in the main editing pane.
fig.
shows a screen capture from the prototype plug in.
.
four example systems we evaluated c c views veri cation on four systems taken from di erent sources and of di erent domains.
avionics system.
first an aadl model of an avionics system taken from speci cally avionics system.aadl of the osate aadl project .
the avionics system c c model is a high level model of several avionics system subsystems.
since in this work we are only interested in the structure of the models in our translation of this aadl architecture to a montiarc architecture we have ignored the ows de nitions but preserved the hierarchical structure and all ports and connectors.
the avionics system c c model has components ports and connectors.
the depth of the component hierarchy is .
based on various use cases related to the interaction between the avionics system s components we created views satis ed and non satis ed with components each.
for example one view gives an overview of the complete data ow in the system declared using abstract connectors.
this view does not provide additional information such as port names or types.
another view provides additional details about the communication between the pilot display and itspage content manager showing incoming and outgoing ports with their names and connectors.
veri cation produced up to witnesses for each of the views we have dened.
bumper bot.
second the software architecture of a lego mindstorms nxt bumper bot.
the bumper bot can power its left and right motors and detect obstacles in front of it similar to the bumper car model from .
in ad dition it is equipped with an emergency stop button.
the bumper bot s objective is to go around obstacles and keep driving forward.
as part of this example system we have designed a set of views and a complete architecture for the bumper bot software in montiarc.
the bumper bot c c model consists of components ports and connectors.
the depth of the component hierarchy is .
we de ned satis ed and non satis ed views in total each with components.
of the views are independent of the emergency stop feature and describe only the components and abstract connectors for ful lling the main purpose of the bumper bot.
the remaining views exhibit components required by the emergency stop feature.
for example one of these adds a mode arbiter to the components and abstract connectors participating in the regular robot control.
another one shows the components and paths of signals used in case of an emergency stop including the mode arbiter.
veri cation produced up to witnesses for each of the views we have de ned.
pump station.
third the pump station architecture taken from an example system provided with the autofocus tool the model we use as a running example in this paper .
the physical pump station system consists of two water tanks connected by a pipeline system with a valve and a pump.
the water level in the rst water tank can rise this is controlled by the environment .
when the water level of the rst tank rises to a critical level the water has to be pumped to the the second water tank.
the second water tank has a drain.
the architecture presented in fig.
also shows a model of the environment with a physics simulation used to test the pumping system.
the c c model consists of components ports and connectors.
the depth of the component hierarchy is .101based on several design decisions and relations we wanted to highlight and document we created views each with components.
for example one view gives an overview of the basic structure of the system and omits details about interfaces and connectors.
another view documents part of the connections between the actuators and their environment hiding hierarchies and omitting elements not connected to the actuators.
an additional view shows an undesired design where the simulation component is placed inside the pumping system.
we have already described some of the views of this example system in sect.
.
veri cation produced up to witnesses for each view.
robotic arm.
finally we applied c c views veri cation on a robotic arm architecture speci cally the rotational joint of a robotic arm taken from an industrial system by vtt tampere finland.
the main components of the rotational joint s c c model are a cylinder a servo valve a sensor a joint limiter and an actuator.
the rotational joint is a subsystem of a robotic arm containing rotational identical copies and translational joints in total.
the robotic arm rotational joint c c model consists of components ports and connectors.
the depth of the component hierarchy is .
based on several requirements and partial knowledge or particular features we created c c views each with components.
some views highlight the components necessary for the function of the joint while others document design alternatives on the placement of sensor and actuator components.
some of the views give an overview over related components with only few details of their interfaces or connectedness.
other views document complete interfaces of relevant components and some of their connections.
veri cation produced up to witnesses for each view.
.
.
lessons learned from the four systems in the four example systems running times for checking satisfaction including parsing and witness generation for satisfaction or non satisfaction were in all cases very fast.
for example running all the checks mentioned in all four systems above took less than second in total on an ordinary laptop computer .
this seems to be in line with the results of our synthetic experiments of performance and scalability see below .
moreover running times for checking satisfaction of speci cations was in all cases very fast too.
again this comes at no surprise because checking satisfaction of a speci cation requires at most kexecutions of our algorithm where kis the number of distinct views appearing in the speci cation.
the number of witnesses computed for all c c views in all our four example systems was at most .
we believe that this is due to the relatively small number of design decisions typically documented in a single view.
the underspeci cation mechanisms of c c views allow one to focus on only few elements per view to support comprehension.
another reason for the small number of witnesses is that by de nition all checks for non satisfaction reasons except for missing components ignore components in the view that do not appear in the c c model.
.
performance and scalability to examine the performance and scalability of c c views veri cation in handling large c c models and views we have experimented with synthesized models of di erent sizesand with related synthesized views where we have randomly applied various mutations.
we describe the setup of our experiments below.
the code to reproduce our experiments or further de ne and execute similar ones is available together with the rest of the evaluation materials in .
we have implemented a generator for random c c models which constructs random models based on the following parameters number of components maximal number of subcomponents per component number of types of ports in the model maximal number of ports and maximal number of connectors in the model.
we further implemented a generator for random views.
for a given c c model the views generator works in two steps.
first it clones the c c model and eliminates some components ports and connectors based on the following parameters number of components to keep maximal number of ports to keep and maximal number of connectors to keep the actual number of ports and connectors in the view depends also on the number of ports and connectors left on the components to keep .
moreover chains of concrete connectors are replaced by corresponding abstract connectors.
second it randomly applies one or more of the following mutations changing the type of a port renaming a component renaming a port and switching the names of two components.
we have also randomly applied three benign mutations eliminating the name of a port eliminating the type of a port and removing port information from the ends of a connector.
we call these mutations benign because they preserve satisfaction.
in all cases we implemented the mutations in a way that guarantees that the resulting mutated view is syntactically valid i.e.
well formed .
for example if a component is renamed the new name is also applied to the connectors that end or start at this component that is the sets cmps andabscons and the functions subs andports are updated accordingly .
below we show the results of executing c c views verication including the computation of non satisfaction reasons and the generation of witnesses on randomly generated models and mutated views of di erent sizes.
speci cally in the experiments we increased the number of components in the synthesized models from to the maximal number of direct subcomponents per component was xed to the maximal number of port types was xed to the total number of ports in the model was xed to times the number of components in the model and the maximal number of connectors in the model was set to half of the number of ports.
in one setup we set the number of components in the view to a fth of the number of components in the model and set the number of mutations to a third of the number of components in the view.
in another setup we xed the number of components in the view to and the number of mutations to .
in both setups we set the number of ports and abstract connectors to keep to times the number of components in the view.
the rst setup is designed to examine scalability.
the second setup where the views are of xed size is designed to be more realistic based on our experience with using c c models and views.
we executed all the experiments on an ordinary laptop dell latitude e6500 laptop running windows .
we repeated the experiments times for each c c model size from to for the two setups.
fig.
reports the average times in milliseconds to decide satisfaction and compute the reasons for non satisfaction for the two setups.
al 200t i m e m s c c model size number of components average c c verification time variable size setup fixed size setupfigure average times in milliseconds to decide satisfaction and compute the reasons for non satisfaction for the two setups the variable size setup where the view size is a fth of the architecture size and the xed size setup where the view size is xed to .
although the average times for the variable setup grow faster than the average times for the xed setup the absolute times recorded and the chart s growth clearly show that c c views veri cation is feasible and scales well.
see sect.
.
.
though the average times for the variable setup grow faster than the average times for the xed setup the absolute times recorded and the chart s growth clearly show that c c views veri cation is feasible and scales well.
moreover in our experiments average and maximal times to generate a witness were ms and ms respectively in the rst setup and ms and ms respectively in the second setup.
the experiment results show that c c views veri cation is feasible and scales well.
note that fast and scalable performance comes at no surprise since our algorithms are polynomial in the size of the input c c models and views.
.
user study we conducted a small user study to examine two highlevel research questions is c c veri cation di cult to do manually and are witnesses for satisfaction nonsatisfaction helpful.
the study included a two pages introduction on c c views to read veri cation questions each presenting one c c view and questions about the usefulness of a set of witnesses that was presented to the user all referring to a common c c model.
two of the views in the rst questions had non satisfaction reasons each.
the questions of each group were presented to the users in a random order to avoid a bias due to learning e ect.
the study subjects were all cs graduate students or professional software engineers all with some modeling background but no speci c previous knowledge on our work on c c views.
no grades or other reward was involved.
the study was anonymous and conducted online.
we obtained complete set of answers from subjects.
the complete questionnaire and results are available from .
to answer we measured the time spent on the rst three questions the correctness of the answers and their completeness identifying all reasons for non satisfaction where applicable .
we also asked the subjects to report about their con dence in the correctness and completeness of their answers.
the average median time to answer a veri cation question was .
.
minutes.
subjects identi ed non satisfaction correctly and found all non satisfaction reasons.
subjects missed at least one reason for non satisfaction.
only subjects identi ed satisfaction correctly have identi ed wrong nonsatisfaction reasons .
only subjects reported full con dence in the correctness of their answers and only reported full con dence that they have identi ed all nonsatisfaction reasons.
these results show that manual c c veri cation is timeconsuming and error prone.
this justi es the need for automation.
to answer we presented satisfaction results and witnesses same c c model as in the rst three questions but di erent views to the subjects and asked them about the helpfulness of the witnesses.
on average .
subjects reported to have found the witnesses we presented to them helpful orvery helpful top out of options .
only two subjects never found any of the witnesses helpful.
subjects found the witnesses helpful at least once.
these results are promising.
further investigation is required in order to identify which types of witnesses are more helpful than others and how to improve witnesses helpfulness.
ideas for improvement we have received from the study subjects and other users include alternative witness constructions e.g.
not include the least common parent component di erent witness presentation e.g.
using animation or by visually overlaying the witness and the model to prevent the need for context switching and richer textual explanations e.g.
adding text explicitly describing the elements shown in the witness .
.
.
threats to validity our set of subjects is small and heterogeneous e.g.
in terms of previous modeling experience.
the study involved a single small model the pump station model and only veri cation questions and witness usefulness questions based on views that we have designed.
in the second part we did not distinguish between di erent kinds of witnesses although their usefulness may vary.
we also did not check for a correlation between the correctness of the answers in the rst part to the perceived usefulness of witnesses in the second part.
in the future we plan a larger study with more control on participants background and with more questions.
.
related work we discuss related work in the area of component and connector modeling and analysis speci cally related to abstraction mechanisms and veri cation.
the key distinctive features of our work on c c views veri cation are the focus on structure the by example and partial characteristics of the views the expressive power and formal nature of the speci cation approach and the generation of witnesses and textual explanations to justify the results of the automated analysis.
many works investigate various analyses of c c models e.g.
di erencing and merging composition etc.
mainly in the context of architectures.
none of these considers veri cation of structural properties expressed using views.
aadl includes under speci cation mechanisms similar to the ones available in c c views.
for example aadl supports speci cations with incomplete information of port types and with abstract ows which show the source and sink of ows but not their complete path through the system.103feiler et al.
explain that the motivation behind aadl s support for partial speci cations is to allow some analysis e.g.
computing some metrics checking syntactic correctness already during early design before all implementation details are known.
we have not found any work on verifying the structure of aadl architectures against speci cations made of some kind of views or by other means .
acme allows one to specify rst order predicates on the structure of architectures dealing e.g.
with connectedness between components.
in acmestudio these predicates are automatically evaluated against the architecture.
the predicates are written as textual logical formulas not as abstract models such as c c views.
acme s predicate language is in some ways more expressive than c c views as it has the exibility of rst order logic and allows quanti cation over components connectors ports and roles.
however the language neither supports the transitive subcomponent relation nor has constructs to crosscut the boundaries of the traditional implementation based hierarchical decomposition of systems to subsystems which is the very essence of c c views.
finally acme veri cation provides only a boolean answer while c c views veri cation provides a set of witnesses.
we have not seen similar witnesses for satisfaction or non satisfaction of invariants in acmestudio.
more recently bhave et al.
have extended acmestudio to support structural consistency between heterogeneous models as architectural views speci cally for cyber physical systems.
view consistency is checked by verifying if a morphism exists between the two typed graphs.
the work mentions reporting back to the user so she is able to spot the inconsistent elements as future work.
in addition the work discusses a single case study and provides no performance and scalability results.
we currently do not deal with heterogeneous models but instead focus on structural properties and on the abstraction of direct containment and connectivity.
unlike this work we do report on several example systems performance results and a user study that examines the usefulness of our solution.
sysml is a general purpose modeling language for systems engineering applications.
the language is de ned as an extension of a subset of the uni ed modeling language uml using uml s pro ling mechanism.
previous work in our group described the use of views in the context of product lines with a focus on the automotive domain using sysml s internal block diagrams.
sysml s internal block diagrams provide under speci cation mechanisms for example to specify abstract connectors similar to the abstract connectors of c c views.
however the question of verifying the structure of a c c model against a view is discussed neither in these works nor in any other sysml related work we have found.
behjati et al.
have extended sysml with aadl concepts using a pro le to support comprehensive system architecture modeling and analysis.
it may be possible to dene c c views within their extended language so as to integrate it with standard available tools.
moriconi et al.
have investigated a notion of what they call re nement between architectural models adding implementation details while preserving an isomorphic mapping the implementation cannot add elements that are not mapped to elements in the architecture .
a c c model could be seen as a re nement of a c c view that it satis es.
however our notion of re nement would be fundamentallydi erent as the c c model may add elements components ports connectors that do not appear in the view.
finally from a broader higher level perspective many behavioral speci cation languages exist and some of them have related veri cation methods and views .
for example linear temporal logic ltl is a behavioral specication language and scenarios expressed e.g.
using live sequence charts lsc may be considered as related behavioral views.
as another example in sysml behavior is speci ed using activity diagrams and state machine diagrams.
in contrast c c views are intentionally limited to structural properties.
in the behavioral case a system s behavior is typically modeled using a state machine and the behavioral properties this state machine needs to satisfy are expressed using ltl formulas or scenarios.
model checking techniques can be used to check whether a state machine satis es a behavioral property and provide a counterexample in case of a negative answer .
in the structural case which we focus on in our present work the structure of a system is described using a c c model and the properties it needs to satisfy are expressed using structural views.
the algorithm we present is used to check whether a c c model satis es a view.
the witnesses we generate in case of nonsatisfaction may be considered as the structural analogue to counterexamples in behavioral model checking as in the behavioral case the witnesses are meant to improve comprehension and to guide repairing also as in the behavioral case where counterexamples may themselves be viewed as scenarios at least in the context of ltl model checking in the structural case we focus on here witnesses for nonsatisfaction are themselves c c models.
an interesting and challenging possible direction for future work is to combine the structural and behavioral viewpoints into a single views language with a related formal veri cation technique.
.
conclusion we presented an approach for the e cient veri cation of c c models against c c views.
a unique feature of our work is the generation of small model witnesses and short natural language texts that formally justify and explain the veri cation results to the engineer.
we reported on an evaluation of our work both in terms of the performance and scalability of the algorithms and in terms of its usefulness to engineers.
the work complements our previous work on synthesis from c c views .
several future research directions arise from our evaluation in sect.
including investigating alternatives of witness construction presentation and richer textual explanations see sect.
.
.
our c c models and views language focuses intentionally on basic pure concepts.
we believe this is good for the investigation of fundamental principles like abstraction mechanisms for hierarchy and connectivity.
to be applied in industrial contexts these concepts should be integrated into concrete languages and application domains e.g.
as extensions of aadl and sysml with rst class connectors that can be typed and re ned with a distinction between child parent connectors and component component connectors with support for instantiation and quanti cation etc.
we have started working with our industrial partners towards this direction.
.